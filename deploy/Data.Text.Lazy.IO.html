<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE BangPatterns, CPP, RecordWildCards #-}
#if __GLASGOW_HASKELL__ &gt;= 702
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      : Data.Text.Lazy.IO</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   : (c) 2009, 2010 Bryan O&#39;Sullivan,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--               (c) 2009 Simon Marlow</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     : BSD-style</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  : bos@serpentine.com</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   : experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability : GHC</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Efficient locale-sensitive support for lazy text I\/O.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Skip past the synopsis for some important notes on performance and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- portability across different versions of GHC.</span></span><span class="mpre">

module Data.Text.Lazy.IO
    (
    </span><span class="hl_comment"><span class="mpre">-- * Performance</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $performance</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- * Locale support</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $locale</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- * File-at-a-time operations</span></span><span class="mpre">
      readFile
    , writeFile
    , appendFile
    </span><span class="hl_comment"><span class="mpre">-- * Operations on handles</span></span><span class="mpre">
    , hGetContents
    , hGetLine
    , hPutStr
    , hPutStrLn
    </span><span class="hl_comment"><span class="mpre">-- * Special cases for standard input and output</span></span><span class="mpre">
    , interact
    , getContents
    , getLine
    , putStr
    , putStrLn
    ) where

import Data.Text.Lazy (</span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="mpre">Text</span></a><span class="mpre">)
import Prelude hiding (appendFile, getContents, getLine, interact,
                       putStr, putStrLn, readFile, writeFile)
import System.IO (</span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="mpre">Handle</span></a><span class="mpre">, </span><a href="GHC.IO.IOMode.html#loc_28_6_28_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_6_28_12&#39;)"><span class="mpre">IOMode</span></a><span class="mpre">(..), </span><a href="GHC.IO.Handle.Text.html#loc_468_1_468_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_468_1_468_9&#39;)"><span class="mpre">hPutChar</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.FD.html#loc_150_1_150_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_150_1_150_9&#39;)"><span class="mpre">openFile</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.FD.html#loc_52_1_52_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_52_1_52_6&#39;)"><span class="mpre">stdin</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.FD.html#loc_63_1_63_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_63_1_63_7&#39;)"><span class="mpre">stdout</span></a><span class="mpre">,
                  </span><a href="System.IO.html#loc_390_1_390_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_390_1_390_9&#39;)"><span class="mpre">withFile</span></a><span class="mpre">)
import qualified Data.Text.IO as T
import qualified Data.Text.Lazy as L
import qualified Control.Exception as E
import Control.Monad (</span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="mpre">when</span></a><span class="mpre">)
import Data.IORef (</span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="mpre">readIORef</span></a><span class="mpre">)
import Data.Text.Internal.IO (</span><a href="Data.Text.Internal.IO.html#loc_44_1_44_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.IO.html#loc_44_1_44_13&#39;)"><span class="mpre">hGetLineWith</span></a><span class="mpre">, </span><a href="Data.Text.Internal.IO.html#loc_156_1_156_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.IO.html#loc_156_1_156_10&#39;)"><span class="mpre">readChunk</span></a><span class="mpre">)
import Data.Text.Internal.Lazy (</span><a href="Data.Text.Internal.Lazy.html#loc_83_1_83_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_83_1_83_6&#39;)"><span class="mpre">chunk</span></a><span class="mpre">, </span><a href="Data.Text.Internal.Lazy.html#loc_89_1_89_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_89_1_89_6&#39;)"><span class="mpre">empty</span></a><span class="mpre">)
import GHC.IO.Buffer (</span><a href="GHC.IO.Buffer.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_204_1_204_14&#39;)"><span class="mpre">isEmptyBuffer</span></a><span class="mpre">)
import GHC.IO.Exception (</span><a href="GHC.IO.Exception.html#loc_238_6_238_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_238_6_238_17&#39;)"><span class="mpre">IOException</span></a><span class="mpre">(..), </span><a href="GHC.IO.Exception.html#loc_257_6_257_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_257_6_257_17&#39;)"><span class="mpre">IOErrorType</span></a><span class="mpre">(..), </span><a href="GHC.IO.Exception.html#loc_217_1_217_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_217_1_217_12&#39;)"><span class="mpre">ioException</span></a><span class="mpre">)
import GHC.IO.Handle.Internals (</span><a href="GHC.IO.Handle.Internals.html#loc_213_1_213_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_213_1_213_15&#39;)"><span class="mpre">augmentIOError</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.Internals.html#loc_732_1_732_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_732_1_732_12&#39;)"><span class="mpre">hClose_help</span></a><span class="mpre">,
                                </span><a href="GHC.IO.Handle.Internals.html#loc_261_1_261_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_261_1_261_19&#39;)"><span class="mpre">wantReadableHandle</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.Internals.html#loc_125_1_125_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_125_1_125_11&#39;)"><span class="mpre">withHandle</span></a><span class="mpre">)
import GHC.IO.Handle.Types (</span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="mpre">Handle__</span></a><span class="mpre">(..), </span><a href="GHC.IO.Handle.Types.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_154_6_154_16&#39;)"><span class="mpre">HandleType</span></a><span class="mpre">(..))
import System.IO (</span><a href="GHC.IO.Handle.Types.html#loc_246_6_246_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_246_6_246_16&#39;)"><span class="mpre">BufferMode</span></a><span class="mpre">(..), </span><a href="GHC.IO.Handle.html#loc_493_1_493_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_493_1_493_14&#39;)"><span class="mpre">hGetBuffering</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_204_1_204_14&#39;)"><span class="mpre">hSetBuffering</span></a><span class="mpre">)
import System.IO.Error (</span><a href="System.IO.Error.html#loc_152_1_152_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_152_1_152_11&#39;)"><span class="mpre">isEOFError</span></a><span class="mpre">)
import System.IO.Unsafe (</span><a href="GHC.IO.html#loc_213_1_213_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_213_1_213_19&#39;)"><span class="mpre">unsafeInterleaveIO</span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- $performance</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The functions in this module obey the runtime system&#39;s locale,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- character set encoding, and line ending conversion settings.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you know in advance that you will be working with data that has</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a specific encoding (e.g. UTF-8), and your application is highly</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- performance sensitive, you may find that it is faster to perform</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- I\/O with bytestrings and to encode and decode yourself than to use</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the functions in this module.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Whether this will hold depends on the version of GHC you are using,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the platform you are working on, the data you are working with, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the encodings you are using, so be sure to test for yourself.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Read a file and return its contents as a string.  The file is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- read lazily, as with &#39;getContents&#39;.</span></span><span class="mpre">
</span><a href="#loc_82_1_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_9&#39;)"><span class="mpre">readFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_82_1_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_9&#39;)"><span class="hl_fundecl"><span class="mpre">readFile</span></span></a><span class="mpre"> </span><a name="loc_82_10_82_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_10_82_14&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre"> = </span><a href="GHC.IO.Handle.FD.html#loc_150_1_150_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_150_1_150_9&#39;)"><span class="hl_varref"><span class="mpre">openFile</span></span></a><span class="mpre"> </span><a href="#loc_82_10_82_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_10_82_14&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">ReadMode</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a href="#loc_96_1_96_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_1_96_13&#39;)"><span class="hl_varref"><span class="mpre">hGetContents</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Write a string to a file.  The file is truncated to zero length</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- before writing begins.</span></span><span class="mpre">
</span><a href="#loc_87_1_87_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_1_87_10&#39;)"><span class="mpre">writeFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_87_1_87_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_1_87_10&#39;)"><span class="hl_fundecl"><span class="mpre">writeFile</span></span></a><span class="mpre"> </span><a name="loc_87_11_87_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_11_87_12&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="System.IO.html#loc_390_1_390_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_390_1_390_9&#39;)"><span class="hl_varref"><span class="mpre">withFile</span></span></a><span class="mpre"> </span><a href="#loc_87_11_87_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_11_87_12&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">WriteMode</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="#loc_139_1_139_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_1_139_8&#39;)"><span class="hl_varref"><span class="mpre">hPutStr</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Write a string the end of a file.</span></span><span class="mpre">
</span><a href="#loc_91_1_91_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_11&#39;)"><span class="mpre">appendFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_91_1_91_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_11&#39;)"><span class="hl_fundecl"><span class="mpre">appendFile</span></span></a><span class="mpre"> </span><a name="loc_91_12_91_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_12_91_13&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="System.IO.html#loc_390_1_390_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_390_1_390_9&#39;)"><span class="hl_varref"><span class="mpre">withFile</span></span></a><span class="mpre"> </span><a href="#loc_91_12_91_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_12_91_13&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">AppendMode</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="#loc_139_1_139_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_1_139_8&#39;)"><span class="hl_varref"><span class="mpre">hPutStr</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Lazily read the remaining contents of a &#39;Handle&#39;.  The &#39;Handle&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- will be closed after the read completes, or on error.</span></span><span class="mpre">
</span><a href="#loc_96_1_96_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_1_96_13&#39;)"><span class="mpre">hGetContents</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_96_1_96_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_1_96_13&#39;)"><span class="hl_fundecl"><span class="mpre">hGetContents</span></span></a><span class="mpre"> </span><a name="loc_96_14_96_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_14_96_15&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = do
  </span><a href="#loc_105_1_105_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_20&#39;)"><span class="hl_varref"><span class="mpre">chooseGoodBuffering</span></span></a><span class="mpre"> </span><a href="#loc_96_14_96_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_14_96_15&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
  </span><a href="GHC.IO.Handle.Internals.html#loc_261_1_261_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_261_1_261_19&#39;)"><span class="hl_varref"><span class="mpre">wantReadableHandle</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hGetContents&quot;</span></span><span class="mpre"> </span><a href="#loc_96_14_96_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_14_96_15&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><span class="hl_vardecl"><span class="mpre">hh</span></span><span class="mpre"> -&gt; do
    </span><a name="loc_99_5_99_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_7&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_111_1_111_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_1_111_9&#39;)"><span class="hl_varref"><span class="mpre">lazyRead</span></span></a><span class="mpre"> </span><a href="#loc_96_14_96_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_14_96_15&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Lazy/IO.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 13, srcSpanEndLine = 100, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Lazy/IO.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 15, srcSpanEndLine = 100, srcSpanEndColumn = 16},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Lazy/IO.hs&quot;, srcSpanStartLine"><span class="mpre">hh{haType=SemiClosedHandle}</span></span><span class="mpre">, </span><a href="#loc_99_5_99_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_7&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Use a more efficient buffer size if we&#39;re reading in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- block-buffered mode with the default buffer size.</span></span><span class="mpre">
</span><a href="#loc_105_1_105_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_20&#39;)"><span class="mpre">chooseGoodBuffering</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_105_1_105_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_20&#39;)"><span class="hl_fundecl"><span class="mpre">chooseGoodBuffering</span></span></a><span class="mpre"> </span><a name="loc_105_21_105_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_21_105_22&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = do
  </span><a name="loc_106_3_106_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_3_106_10&#39;)"><span class="hl_vardecl"><span class="mpre">bufMode</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.Handle.html#loc_493_1_493_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_493_1_493_14&#39;)"><span class="hl_varref"><span class="mpre">hGetBuffering</span></span></a><span class="mpre"> </span><a href="#loc_105_21_105_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_21_105_22&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
  </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_106_3_106_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_3_106_10&#39;)"><span class="hl_varref"><span class="mpre">bufMode</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">BlockBuffering</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><a href="GHC.IO.Handle.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_204_1_204_14&#39;)"><span class="hl_varref"><span class="mpre">hSetBuffering</span></span></a><span class="mpre"> </span><a href="#loc_105_21_105_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_21_105_22&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">BlockBuffering</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">16384</span></span><span class="mpre">))

</span><a href="#loc_111_1_111_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_1_111_9&#39;)"><span class="mpre">lazyRead</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_111_1_111_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_1_111_9&#39;)"><span class="hl_fundecl"><span class="mpre">lazyRead</span></span></a><span class="mpre"> </span><a name="loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="GHC.IO.html#loc_213_1_213_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_213_1_213_19&#39;)"><span class="hl_varref"><span class="mpre">unsafeInterleaveIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
  </span><a href="GHC.IO.Handle.Internals.html#loc_125_1_125_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_125_1_125_11&#39;)"><span class="hl_varref"><span class="mpre">withHandle</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hGetContents&quot;</span></span><span class="mpre"> </span><a href="#loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_112_34_112_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_34_112_36&#39;)"><span class="hl_vardecl"><span class="mpre">hh</span></span></a><span class="mpre"> -&gt; do
    case </span><a href="GHC.IO.Handle.Types.html#loc_128_7_128_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_128_7_128_13&#39;)"><span class="hl_varref"><span class="mpre">haType</span></span></a><span class="mpre"> </span><a href="#loc_112_34_112_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_34_112_36&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre"> of
      </span><a href="GHC.IO.Handle.Types.html#loc_155_4_155_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_155_4_155_16&#39;)"><span class="hl_conref"><span class="mpre">ClosedHandle</span></span></a><span class="mpre">     -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_112_34_112_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_34_112_36&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.Lazy.html#loc_89_1_89_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_89_1_89_6&#39;)"><span class="hl_varref"><span class="mpre">L.empty</span></span></a><span class="mpre">)
      </span><a href="GHC.IO.Handle.Types.html#loc_156_4_156_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_156_4_156_20&#39;)"><span class="hl_conref"><span class="mpre">SemiClosedHandle</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_121_1_121_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_1_121_17&#39;)"><span class="hl_varref"><span class="mpre">lazyReadBuffered</span></span></a><span class="mpre"> </span><a href="#loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_112_34_112_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_34_112_36&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre">
      _                -&gt; </span><a href="GHC.IO.Exception.html#loc_217_1_217_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_217_1_217_12&#39;)"><span class="hl_varref"><span class="mpre">ioException</span></span></a><span class="mpre">
                          (</span><span class="hl_conref"><span class="mpre">IOError</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">) </span><a href="GHC.IO.Exception.html#loc_264_5_264_21" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_264_5_264_21&#39;)"><span class="hl_conref"><span class="mpre">IllegalOperation</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hGetContents&quot;</span></span><span class="mpre">
                           </span><span class="hl_string"><span class="mpre">&quot;illegal handle type&quot;</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">)

</span><a href="#loc_121_1_121_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_1_121_17&#39;)"><span class="mpre">lazyReadBuffered</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="hl_tyconref"><span class="mpre">Handle__</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="hl_tyconref"><span class="mpre">Handle__</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_121_1_121_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_1_121_17&#39;)"><span class="hl_fundecl"><span class="mpre">lazyReadBuffered</span></span></a><span class="mpre"> </span><a name="loc_121_18_121_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_18_121_19&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> </span><a name="loc_121_20_121_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_20_121_22&#39;)"><span class="hl_specname"><span class="mpre">hh</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Lazy/IO.hs&quot;, srcSpanStartLine = 121, srcSpanStartColumn = 23, srcSpanEndLine = 121, srcSpanEndColumn = 35}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Lazy/IO.hs&quot;, srcSpanStartLine = 121, srcSpanStartColumn = 31, srcSpanEndLine = 121, srcSpanEndColumn = 32},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Lazy/IO.hs&quot;, srcSpanStartLine = 12"><span class="mpre">Handle__{..}</span></span><span class="mpre"> = do
   </span><a name="loc_122_4_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_4_122_7&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="hl_varref"><span class="mpre">readIORef</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_132_7_132_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_132_7_132_19&#39;)"><span class="hl_varref"><span class="mpre">haCharBuffer</span></span></a><span class="mpre">
   (do </span><a name="loc_123_8_123_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_8_123_9&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Text.Internal.IO.html#loc_156_1_156_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.IO.html#loc_156_1_156_10&#39;)"><span class="hl_varref"><span class="mpre">readChunk</span></span></a><span class="mpre"> </span><a href="#loc_121_20_121_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_20_121_22&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre"> </span><a href="#loc_122_4_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_4_122_7&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">
       </span><a name="loc_124_8_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_8_124_10&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_111_1_111_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_1_111_9&#39;)"><span class="hl_varref"><span class="mpre">lazyRead</span></span></a><span class="mpre"> </span><a href="#loc_121_18_121_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_18_121_19&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
       </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_121_20_121_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_20_121_22&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.Lazy.html#loc_83_1_83_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_83_1_83_6&#39;)"><span class="hl_varref"><span class="mpre">chunk</span></span></a><span class="mpre"> </span><a href="#loc_123_8_123_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_8_123_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_124_8_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_8_124_10&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">)) </span><a href="Control.Exception.Base.html#loc_150_1_150_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_150_1_150_6&#39;)"><span class="hl_infix"><span class="mpre">`E.catch`</span></span></a><span class="mpre"> \</span><a name="loc_125_44_125_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_44_125_45&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt; do
         (</span><a name="loc_126_11_126_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_11_126_14&#39;)"><span class="hl_vardecl"><span class="mpre">hh&#39;</span></span></a><span class="mpre">, _) &lt;- </span><a href="GHC.IO.Handle.Internals.html#loc_732_1_732_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_732_1_732_12&#39;)"><span class="hl_varref"><span class="mpre">hClose_help</span></span></a><span class="mpre"> </span><a href="#loc_121_20_121_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_20_121_22&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre">
         if </span><a href="System.IO.Error.html#loc_152_1_152_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_152_1_152_11&#39;)"><span class="hl_varref"><span class="mpre">isEOFError</span></span></a><span class="mpre"> </span><a href="#loc_125_44_125_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_44_125_45&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">
           then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> if </span><a href="GHC.IO.Buffer.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_204_1_204_14&#39;)"><span class="hl_varref"><span class="mpre">isEmptyBuffer</span></span></a><span class="mpre"> </span><a href="#loc_122_4_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_4_122_7&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">
                         then (</span><a href="#loc_126_11_126_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_11_126_14&#39;)"><span class="hl_varref"><span class="mpre">hh&#39;</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.Lazy.html#loc_89_1_89_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_89_1_89_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">)
                         else (</span><a href="#loc_126_11_126_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_11_126_14&#39;)"><span class="hl_varref"><span class="mpre">hh&#39;</span></span></a><span class="mpre">, </span><a href="Data.Text.Lazy.html#loc_373_1_373_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.html#loc_373_1_373_10&#39;)"><span class="hl_varref"><span class="mpre">L.singleton</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\r&#39;</span></span><span class="mpre">)
           else </span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="hl_varref"><span class="mpre">E.throwIO</span></span></a><span class="mpre"> (</span><a href="GHC.IO.Handle.Internals.html#loc_213_1_213_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_213_1_213_15&#39;)"><span class="hl_varref"><span class="mpre">augmentIOError</span></span></a><span class="mpre"> </span><a href="#loc_125_44_125_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_44_125_45&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hGetContents&quot;</span></span><span class="mpre"> </span><a href="#loc_121_18_121_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_18_121_19&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Read a single line from a handle.</span></span><span class="mpre">
</span><a href="#loc_135_1_135_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_9&#39;)"><span class="mpre">hGetLine</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_135_1_135_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_9&#39;)"><span class="hl_vardecl"><span class="mpre">hGetLine</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.IO.html#loc_44_1_44_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.IO.html#loc_44_1_44_13&#39;)"><span class="hl_varref"><span class="mpre">hGetLineWith</span></span></a><span class="mpre"> </span><a href="Data.Text.Lazy.html#loc_385_1_385_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.html#loc_385_1_385_11&#39;)"><span class="hl_varref"><span class="mpre">L.fromChunks</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Write a string to a handle.</span></span><span class="mpre">
</span><a href="#loc_139_1_139_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_1_139_8&#39;)"><span class="mpre">hPutStr</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_139_1_139_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_1_139_8&#39;)"><span class="hl_fundecl"><span class="mpre">hPutStr</span></span></a><span class="mpre"> </span><a name="loc_139_9_139_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_9_139_10&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">mapM_</span></span></a><span class="mpre"> (</span><a href="Data.Text.IO.html#loc_174_1_174_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.IO.html#loc_174_1_174_8&#39;)"><span class="hl_varref"><span class="mpre">T.hPutStr</span></span></a><span class="mpre"> </span><a href="#loc_139_9_139_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_9_139_10&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Lazy.html#loc_389_1_389_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.html#loc_389_1_389_9&#39;)"><span class="hl_varref"><span class="mpre">L.toChunks</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Write a string to a handle, followed by a newline.</span></span><span class="mpre">
</span><a href="#loc_143_1_143_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_1_143_10&#39;)"><span class="mpre">hPutStrLn</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_143_1_143_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_1_143_10&#39;)"><span class="hl_fundecl"><span class="mpre">hPutStrLn</span></span></a><span class="mpre"> </span><a name="loc_143_11_143_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_11_143_12&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> </span><a name="loc_143_13_143_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_13_143_14&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="#loc_139_1_139_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_1_139_8&#39;)"><span class="hl_varref"><span class="mpre">hPutStr</span></span></a><span class="mpre"> </span><a href="#loc_143_11_143_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_11_143_12&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_143_13_143_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_13_143_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Text.html#loc_468_1_468_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_468_1_468_9&#39;)"><span class="hl_varref"><span class="mpre">hPutChar</span></span></a><span class="mpre"> </span><a href="#loc_143_11_143_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_11_143_12&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The &#39;interact&#39; function takes a function of type @Text -&gt; Text@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as its argument. The entire input from the standard input device is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- passed (lazily) to this function as its argument, and the resulting</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- string is output on the standard output device.</span></span><span class="mpre">
</span><a href="#loc_150_1_150_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_1_150_9&#39;)"><span class="mpre">interact</span></a><span class="mpre"> :: (</span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_150_1_150_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_1_150_9&#39;)"><span class="hl_fundecl"><span class="mpre">interact</span></span></a><span class="mpre"> </span><a name="loc_150_10_150_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_10_150_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_162_1_162_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_1_162_7&#39;)"><span class="hl_varref"><span class="mpre">putStr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_150_10_150_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_10_150_11&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Monad.html#loc_92_3_92_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_92_3_92_6&#39;)"><span class="hl_infix"><span class="mpre">=&lt;&lt;</span></span></a><span class="mpre"> </span><a href="#loc_154_1_154_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_1_154_12&#39;)"><span class="hl_varref"><span class="mpre">getContents</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Lazily read all user input on &#39;stdin&#39; as a single string.</span></span><span class="mpre">
</span><a href="#loc_154_1_154_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_1_154_12&#39;)"><span class="mpre">getContents</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_154_1_154_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_1_154_12&#39;)"><span class="hl_vardecl"><span class="mpre">getContents</span></span></a><span class="mpre"> = </span><a href="#loc_96_1_96_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_1_96_13&#39;)"><span class="hl_varref"><span class="mpre">hGetContents</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_52_1_52_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_52_1_52_6&#39;)"><span class="hl_varref"><span class="mpre">stdin</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Read a single line of user input from &#39;stdin&#39;.</span></span><span class="mpre">
</span><a href="#loc_158_1_158_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_8&#39;)"><span class="mpre">getLine</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_158_1_158_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_8&#39;)"><span class="hl_vardecl"><span class="mpre">getLine</span></span></a><span class="mpre"> = </span><a href="#loc_135_1_135_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_9&#39;)"><span class="hl_varref"><span class="mpre">hGetLine</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_52_1_52_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_52_1_52_6&#39;)"><span class="hl_varref"><span class="mpre">stdin</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Write a string to &#39;stdout&#39;.</span></span><span class="mpre">
</span><a href="#loc_162_1_162_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_1_162_7&#39;)"><span class="mpre">putStr</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_162_1_162_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_1_162_7&#39;)"><span class="hl_vardecl"><span class="mpre">putStr</span></span></a><span class="mpre"> = </span><a href="#loc_139_1_139_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_1_139_8&#39;)"><span class="hl_varref"><span class="mpre">hPutStr</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_63_1_63_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_63_1_63_7&#39;)"><span class="hl_varref"><span class="mpre">stdout</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Write a string to &#39;stdout&#39;, followed by a newline.</span></span><span class="mpre">
</span><a href="#loc_166_1_166_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_9&#39;)"><span class="mpre">putStrLn</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_166_1_166_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_9&#39;)"><span class="hl_vardecl"><span class="mpre">putStrLn</span></span></a><span class="mpre"> = </span><a href="#loc_143_1_143_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_1_143_10&#39;)"><span class="hl_varref"><span class="mpre">hPutStrLn</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_63_1_63_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_63_1_63_7&#39;)"><span class="hl_varref"><span class="mpre">stdout</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- $locale</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Note/: The behaviour of functions in this module depends on the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- version of GHC you are using.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Beginning with GHC 6.12, text I\/O is performed using the system or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- handle&#39;s current locale and line ending conventions.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Under GHC 6.10 and earlier, the system I\/O libraries /do not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- support/ locale-sensitive I\/O or line ending conversion.  On these</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- versions of GHC, functions in this library all use UTF-8.  What</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- does this mean in practice?</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * All data that is read will be decoded as UTF-8.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Before data is written, it is first encoded as UTF-8.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * On both reading and writing, the platform&#39;s native newline</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   conversion is performed.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you must use a non-UTF-8 locale on an older version of GHC, you</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- will have to perform the transcoding yourself, e.g. as follows:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import qualified Data.ByteString.Lazy as B</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import Data.Text.Lazy (Text)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import Data.Text.Lazy.Encoding (encodeUtf16)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; putStr_Utf16LE :: Text -&gt; IO ()</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; putStr_Utf16LE t = B.putStr (encodeUtf16LE t)</span></span><span class="mpre">
</span></div></body></html>