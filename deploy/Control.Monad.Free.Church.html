<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE Rank2Types #-}
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE UndecidableInstances #-}
{-# LANGUAGE MultiParamTypeClasses #-}
#ifndef MIN_VERSION_base
#define MIN_VERSION_base(x,y,z) 1
#endif
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Monad.Free.Church</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2011-2012 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable (rank-2 polymorphism)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \&quot;Free Monads for Less\&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The most straightforward way of implementing free monads is as a recursive</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- datatype that allows for arbitrarily deep nesting of the base functor. This is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- akin to a tree, with the leaves containing the values, and the nodes being a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- level of &#39;Functor&#39; over subtrees.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- For each time that the `fmap` or `&gt;&gt;=` operations is used, the old tree is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- traversed up to the leaves, a new set of nodes is allocated, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the old ones are garbage collected. Even if the Haskell runtime</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- optimizes some of the overhead through laziness and generational garbage</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- collection, the asymptotic runtime is still quadratic.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- On the other hand, if the Church encoding is used, the tree only needs to be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- constructed once, because:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * All uses of `fmap` are collapsed into a single one, so that the values on the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   _leaves_ are transformed in one pass.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   prop&gt; fmap f . fmap g == fmap (f . g)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * All uses of `&gt;&gt;=` are right associated, so that every new subtree created</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   is final.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   prop&gt; (m &gt;&gt;= f) &gt;&gt;= g == m &gt;&gt;= (\x -&gt; f x &gt;&gt;= g)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Asymptotically, the Church encoding supports the monadic operations more</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- efficiently than the naïve &#39;Free&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is based on the \&quot;Free Monads for Less\&quot; series of articles by Edward Kmett:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * &lt;http://comonad.com/reader/2011/free-monads-for-less/   Free monads for less — Part 1&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * &lt;http://comonad.com/reader/2011/free-monads-for-less-2/ Free monads for less — Part 2&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Monad.Free.Church
  ( F(..)
  , improve
  , fromF
  , iterM
  , toF
  , retract
  , hoistF
  , MonadFree(..)
  , liftF
  ) where

import Control.Applicative
import Control.Monad as Monad
import Control.Monad.Fix
import Control.Monad.Free hiding (</span><a href="Control.Monad.Free.html#loc_294_1_294_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Free.html#loc_294_1_294_8&#39;)"><span class="mpre">retract</span></a><span class="mpre">, </span><a href="Control.Monad.Free.html#loc_304_1_304_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Free.html#loc_304_1_304_6&#39;)"><span class="mpre">iterM</span></a><span class="mpre">)
import Control.Monad.Reader.Class
import Control.Monad.Writer.Class
import Control.Monad.Cont.Class
import Control.Monad.Trans.Class
import Control.Monad.State.Class
import Data.Foldable
import Data.Functor.Bind
import Prelude hiding (foldr)

</span><span class="hl_comment"><span class="mpre">-- | The Church-encoded free monad for a functor @f@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It is /asymptotically/ more efficient to use (&#39;&gt;&gt;=&#39;) for &#39;F&#39; than it is to (&#39;&gt;&gt;=&#39;) with &#39;Free&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://comonad.com/reader/2011/free-monads-for-less-2/&gt;</span></span><span class="mpre">
newtype </span><a name="loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tycondecl"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_condecl"><span class="mpre">F</span></span></a><span class="mpre"> { </span><a name="loc_84_21_84_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_21_84_25&#39;)"><span class="hl_fielddecl"><span class="mpre">runF</span></span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">. (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> }

</span><span class="hl_comment"><span class="mpre">-- | Like iter for monadic values.</span></span><span class="mpre">
</span><a href="#loc_88_1_88_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_6&#39;)"><span class="mpre">iterM</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 10, srcSpanEndLine = 87, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 10, srcSpanEndLine = 87, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;"><span class="mpre">(Monad m, Functor f) =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_88_1_88_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_6&#39;)"><span class="hl_fundecl"><span class="mpre">iterM</span></span></a><span class="mpre"> </span><a name="loc_88_7_88_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_7_88_10&#39;)"><span class="hl_vardecl"><span class="mpre">phi</span></span></a><span class="mpre"> </span><a name="loc_88_11_88_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_11_88_13&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><a href="#loc_84_21_84_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_21_84_25&#39;)"><span class="hl_varref"><span class="mpre">runF</span></span></a><span class="mpre"> </span><a href="#loc_88_11_88_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_11_88_13&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_88_7_88_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_7_88_10&#39;)"><span class="hl_varref"><span class="mpre">phi</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><span class="hl_fundecl"><span class="mpre">fmap</span></span><span class="mpre"> </span><a name="loc_91_8_91_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_8_91_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_91_13_91_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_13_91_14&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre">) = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_91_22_91_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_22_91_24&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_91_13_91_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_13_91_14&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> (</span><a href="#loc_91_22_91_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_22_91_24&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_91_8_91_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_8_91_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">))

instance </span><a href="Data.Functor.Bind.html#loc_98_20_98_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Bind.html#loc_98_20_98_25&#39;)"><span class="hl_classref"><span class="mpre">Apply</span></span></a><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><span class="hl_vardecl"><span class="mpre">(&lt;.&gt;)</span></span><span class="mpre"> = </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_varref"><span class="mpre">(&lt;*&gt;)</span></span></a><span class="mpre">

instance </span><a href="Control.Applicative.html#loc_113_20_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_113_20_113_31&#39;)"><span class="hl_classref"><span class="mpre">Applicative</span></span></a><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_fundecl"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a name="loc_97_8_97_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_8_97_9&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_97_16_97_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_16_97_18&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> _ -&gt; </span><a href="#loc_97_16_97_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_16_97_18&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_97_8_97_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_8_97_9&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
  </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_98_5_98_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_5_98_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;*&gt;</span></span></a><span class="mpre"> </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_98_13_98_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_13_98_14&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_98_21_98_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_21_98_23&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a name="loc_98_24_98_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_24_98_26&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_98_5_98_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_5_98_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (\</span><a name="loc_98_34_98_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_34_98_35&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_98_13_98_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_13_98_14&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> (</span><a href="#loc_98_21_98_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_21_98_23&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_98_34_98_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_34_98_35&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_98_24_98_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_24_98_26&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">) </span><a href="#loc_98_24_98_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_24_98_26&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">)

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 10, srcSpanEndLine = 100, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 24, srcSpanEndLine = 100, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">Alternative f =&gt;</span></span><span class="mpre"> </span><a href="Control.Applicative.html#loc_138_24_138_35" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_138_24_138_35&#39;)"><span class="hl_classref"><span class="mpre">Alternative</span></span></a><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><a href="Control.Applicative.html#loc_140_5_140_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_140_5_140_10&#39;)"><span class="hl_vardecl"><span class="mpre">empty</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\_ </span><a name="loc_101_17_101_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_17_101_19&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_101_17_101_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_17_101_19&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_140_5_140_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_140_5_140_10&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">)
  </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_102_5_102_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;|&gt;</span></span></a><span class="mpre"> </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_102_13_102_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_13_102_14&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_102_21_102_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_21_102_23&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a name="loc_102_24_102_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_24_102_26&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_102_24_102_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_24_102_26&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> (</span><a href="#loc_102_5_102_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_102_21_102_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_21_102_23&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_102_24_102_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_24_102_26&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">) </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;|&gt;</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> (</span><a href="#loc_102_13_102_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_13_102_14&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_102_21_102_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_21_102_23&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_102_24_102_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_24_102_26&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">)))

instance </span><a href="Data.Functor.Bind.html#loc_355_18_355_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Bind.html#loc_355_18_355_22&#39;)"><span class="hl_classref"><span class="mpre">Bind</span></span></a><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><a href="Data.Functor.Bind.html#loc_356_3_356_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Bind.html#loc_356_3_356_8&#39;)"><span class="hl_vardecl"><span class="mpre">(&gt;&gt;-)</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">(&gt;&gt;=)</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Monad</span></span><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><span class="hl_fundecl"><span class="mpre">return</span></span><span class="mpre"> </span><a name="loc_108_10_108_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_10_108_11&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_108_18_108_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_18_108_20&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> _ -&gt; </span><a href="#loc_108_18_108_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_18_108_20&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_108_10_108_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_10_108_11&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
  </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_109_5_109_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_5_109_6&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_fundecl"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a name="loc_109_11_109_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_11_109_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_109_19_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_19_109_21&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a name="loc_109_22_109_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_22_109_24&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_109_5_109_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_5_109_6&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> (\</span><a name="loc_109_32_109_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_32_109_33&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_84_21_84_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_21_84_25&#39;)"><span class="hl_varref"><span class="mpre">runF</span></span></a><span class="mpre"> (</span><a href="#loc_109_11_109_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_11_109_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_109_32_109_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_32_109_33&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_109_19_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_19_109_21&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_109_22_109_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_22_109_24&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">) </span><a href="#loc_109_22_109_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_22_109_24&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">)

instance </span><a href="Control.Monad.Fix.html#loc_48_20_48_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Fix.html#loc_48_20_48_28&#39;)"><span class="hl_classref"><span class="mpre">MonadFix</span></span></a><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><a href="Control.Monad.Fix.html#loc_53_9_53_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Fix.html#loc_53_9_53_13&#39;)"><span class="hl_fundecl"><span class="mpre">mfix</span></span></a><span class="mpre"> </span><a name="loc_112_8_112_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_8_112_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_113_5_113_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_5_113_6&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> where
    </span><a name="loc_113_5_113_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_5_113_6&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_112_8_112_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_8_112_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_114_5_114_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_5_114_11&#39;)"><span class="hl_varref"><span class="mpre">impure</span></span></a><span class="mpre"> </span><a href="#loc_113_5_113_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_5_113_6&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
    </span><a name="loc_114_5_114_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_5_114_11&#39;)"><span class="hl_fundecl"><span class="mpre">impure</span></span></a><span class="mpre"> (</span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_114_15_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_15_114_16&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><a href="#loc_114_15_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_15_114_16&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;MonadFix (F f): wrap&quot;</span></span><span class="mpre">)

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 116, srcSpanStartColumn = 10, srcSpanEndLine = 116, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 116, srcSpanStartColumn = 10, srcSpanEndLine = 116, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church"><span class="mpre">(Foldable f, Functor f) =&gt;</span></span><span class="mpre"> </span><a href="Data.Foldable.html#loc_97_7_97_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Foldable.html#loc_97_7_97_15&#39;)"><span class="hl_classref"><span class="mpre">Foldable</span></span></a><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
    </span><a href="Data.Foldable.html#loc_110_5_110_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Foldable.html#loc_110_5_110_10&#39;)"><span class="hl_fundecl"><span class="mpre">foldr</span></span></a><span class="mpre"> </span><a name="loc_117_11_117_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_11_117_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_117_13_117_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_13_117_14&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> </span><a name="loc_117_15_117_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_15_117_17&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><a href="#loc_84_21_84_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_21_84_25&#39;)"><span class="hl_varref"><span class="mpre">runF</span></span></a><span class="mpre"> </span><a href="#loc_117_15_117_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_15_117_17&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> </span><a href="#loc_117_11_117_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_11_117_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="Data.Foldable.html#loc_110_5_110_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Foldable.html#loc_110_5_110_10&#39;)"><span class="hl_varref"><span class="mpre">foldr</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">(.)</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">) </span><a href="#loc_117_13_117_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_13_117_14&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
    </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="Data.Foldable.html#loc_110_5_110_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Foldable.html#loc_110_5_110_10&#39;)"><span class="mpre">foldr</span></a><span class="mpre"> #-}</span></span><span class="mpre">

#if MIN_VERSION_base(4,6,0)
    </span><a href="Data.Foldable.html#loc_129_5_129_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Foldable.html#loc_129_5_129_11&#39;)"><span class="hl_fundecl"><span class="mpre">foldl&#39;</span></span></a><span class="mpre"> </span><a name="loc_121_12_121_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_12_121_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_121_14_121_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_14_121_15&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_121_16_121_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_16_121_18&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><a href="#loc_84_21_84_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_21_84_25&#39;)"><span class="hl_varref"><span class="mpre">runF</span></span></a><span class="mpre"> </span><a href="#loc_121_16_121_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_16_121_18&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="#loc_121_12_121_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_12_121_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) (</span><a href="Data.Foldable.html#loc_110_5_110_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Foldable.html#loc_110_5_110_10&#39;)"><span class="hl_varref"><span class="mpre">foldr</span></span></a><span class="mpre"> </span><a href="#loc_122_13_122_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_13_122_19&#39;)"><span class="hl_varref"><span class="mpre">(!&gt;&gt;&gt;)</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">) </span><a href="#loc_121_14_121_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_14_121_15&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre">
      where </span><a name="loc_122_13_122_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_13_122_19&#39;)"><span class="hl_fundecl"><span class="mpre">(!&gt;&gt;&gt;)</span></span></a><span class="mpre"> </span><a name="loc_122_20_122_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_20_122_21&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> </span><a name="loc_122_22_122_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_22_122_23&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = \</span><a name="loc_122_27_122_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_28&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_122_22_122_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_22_122_23&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="#loc_122_20_122_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_20_122_21&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_122_27_122_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_28&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
    </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="Data.Foldable.html#loc_129_5_129_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Foldable.html#loc_129_5_129_11&#39;)"><span class="mpre">foldl&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">
#endif

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 126, srcSpanStartColumn = 10, srcSpanEndLine = 126, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 126, srcSpanStartColumn = 22, srcSpanEndLine = 126, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadPlus f =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.html#loc_122_18_122_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_122_18_122_27&#39;)"><span class="hl_classref"><span class="mpre">MonadPlus</span></span></a><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><a href="Control.Monad.html#loc_128_4_128_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_128_4_128_9&#39;)"><span class="hl_vardecl"><span class="mpre">mzero</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\_ </span><a name="loc_127_17_127_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_17_127_19&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_127_17_127_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_17_127_19&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre"> </span><a href="Control.Monad.html#loc_128_4_128_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_128_4_128_9&#39;)"><span class="hl_varref"><span class="mpre">mzero</span></span></a><span class="mpre">)
  </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_128_5_128_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_5_128_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Monad.html#loc_130_4_130_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_130_4_130_9&#39;)"><span class="hl_fundecl"><span class="mpre">`mplus`</span></span></a><span class="mpre"> </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_128_17_128_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_17_128_18&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_128_25_128_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_25_128_27&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a name="loc_128_28_128_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_28_128_30&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_128_28_128_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_28_128_30&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_128_5_128_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_5_128_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_128_25_128_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_25_128_27&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_128_28_128_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_28_128_30&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">) </span><a href="Control.Monad.html#loc_130_4_130_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_130_4_130_9&#39;)"><span class="hl_infix"><span class="mpre">`mplus`</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_128_17_128_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_17_128_18&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_128_25_128_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_25_128_27&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_128_28_128_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_28_128_30&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">)))

instance </span><a href="Control.Monad.Trans.Class.html#loc_49_7_49_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_49_7_49_17&#39;)"><span class="hl_classref"><span class="mpre">MonadTrans</span></span></a><span class="mpre"> </span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> where
  </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_fundecl"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a name="loc_131_8_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_8_131_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_131_16_131_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_16_131_18&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a name="loc_131_19_131_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_19_131_21&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_131_19_131_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_19_131_21&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre"> (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="#loc_131_16_131_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_16_131_18&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_131_8_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_8_131_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">))

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 133, srcSpanStartColumn = 10, srcSpanEndLine = 133, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 133, srcSpanStartColumn = 20, srcSpanEndLine = 133, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">Functor f =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">MonadFree</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><span class="hl_fundecl"><span class="mpre">wrap</span></span><span class="mpre"> </span><a name="loc_134_8_134_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_8_134_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_134_16_134_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_16_134_18&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a name="loc_134_19_134_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_19_134_21&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_134_19_134_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_19_134_21&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (\ (</span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_134_40_134_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_40_134_41&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_134_40_134_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_40_134_41&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="#loc_134_16_134_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_16_134_18&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_134_19_134_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_19_134_21&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">) </span><a href="#loc_134_8_134_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_8_134_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">))

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 136, srcSpanStartColumn = 10, srcSpanEndLine = 136, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 136, srcSpanStartColumn = 25, srcSpanEndLine = 136, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadState s m =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.State.Class.html#loc_53_18_53_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_53_18_53_28&#39;)"><span class="hl_classref"><span class="mpre">MonadState</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
  </span><a href="Control.Monad.State.Class.html#loc_55_5_55_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_55_5_55_8&#39;)"><span class="hl_vardecl"><span class="mpre">get</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="Control.Monad.State.Class.html#loc_55_5_55_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_55_5_55_8&#39;)"><span class="hl_varref"><span class="mpre">get</span></span></a><span class="mpre">
  </span><a href="Control.Monad.State.Class.html#loc_59_5_59_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_59_5_59_8&#39;)"><span class="hl_vardecl"><span class="mpre">put</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Monad.State.Class.html#loc_59_5_59_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_59_5_59_8&#39;)"><span class="hl_varref"><span class="mpre">put</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 140, srcSpanStartColumn = 10, srcSpanEndLine = 140, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 140, srcSpanStartColumn = 26, srcSpanEndLine = 140, srcSpanEndColumn = 28}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadReader e m =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Reader.Class.html#loc_72_18_72_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_72_18_72_29&#39;)"><span class="hl_classref"><span class="mpre">MonadReader</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
  </span><a href="Control.Monad.Reader.Class.html#loc_77_5_77_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_77_5_77_8&#39;)"><span class="hl_vardecl"><span class="mpre">ask</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="Control.Monad.Reader.Class.html#loc_77_5_77_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_77_5_77_8&#39;)"><span class="hl_varref"><span class="mpre">ask</span></span></a><span class="mpre">
  </span><a href="Control.Monad.Reader.Class.html#loc_81_5_81_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_81_5_81_10&#39;)"><span class="hl_fundecl"><span class="mpre">local</span></span></a><span class="mpre"> </span><a name="loc_142_9_142_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_9_142_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Monad.Reader.Class.html#loc_81_5_81_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_81_5_81_10&#39;)"><span class="hl_varref"><span class="mpre">local</span></span></a><span class="mpre"> </span><a href="#loc_142_9_142_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_9_142_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="hl_varref"><span class="mpre">retract</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 144, srcSpanStartColumn = 10, srcSpanEndLine = 144, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 144, srcSpanStartColumn = 26, srcSpanEndLine = 144, srcSpanEndColumn = 28}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadWriter w m =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Writer.Class.html#loc_62_30_62_41" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Writer.Class.html#loc_62_30_62_41&#39;)"><span class="hl_classref"><span class="mpre">MonadWriter</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
  </span><a href="Control.Monad.Writer.Class.html#loc_73_5_73_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Writer.Class.html#loc_73_5_73_9&#39;)"><span class="hl_vardecl"><span class="mpre">tell</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Monad.Writer.Class.html#loc_73_5_73_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Writer.Class.html#loc_73_5_73_9&#39;)"><span class="hl_varref"><span class="mpre">tell</span></span></a><span class="mpre">
  </span><a href="Control.Monad.Writer.Class.html#loc_82_5_82_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Writer.Class.html#loc_82_5_82_9&#39;)"><span class="hl_vardecl"><span class="mpre">pass</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Monad.Writer.Class.html#loc_82_5_82_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Writer.Class.html#loc_82_5_82_9&#39;)"><span class="hl_varref"><span class="mpre">pass</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="hl_varref"><span class="mpre">retract</span></span></a><span class="mpre">
  </span><a href="Control.Monad.Writer.Class.html#loc_78_5_78_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Writer.Class.html#loc_78_5_78_11&#39;)"><span class="hl_vardecl"><span class="mpre">listen</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Monad.Writer.Class.html#loc_78_5_78_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Writer.Class.html#loc_78_5_78_11&#39;)"><span class="hl_varref"><span class="mpre">listen</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="hl_varref"><span class="mpre">retract</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 149, srcSpanStartColumn = 10, srcSpanEndLine = 149, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 149, srcSpanStartColumn = 22, srcSpanEndLine = 149, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadCont m =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Cont.Class.html#loc_73_18_73_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Cont.Class.html#loc_73_18_73_27&#39;)"><span class="hl_classref"><span class="mpre">MonadCont</span></span></a><span class="mpre"> (</span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
  </span><a href="Control.Monad.Cont.Class.html#loc_92_5_92_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Cont.Class.html#loc_92_5_92_11&#39;)"><span class="hl_fundecl"><span class="mpre">callCC</span></span></a><span class="mpre"> </span><a name="loc_150_10_150_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_10_150_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.Cont.Class.html#loc_92_5_92_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Cont.Class.html#loc_92_5_92_11&#39;)"><span class="hl_varref"><span class="mpre">callCC</span></span></a><span class="mpre"> (</span><a href="#loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="hl_varref"><span class="mpre">retract</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_150_10_150_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_10_150_11&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;retract&#39; is the left inverse of &#39;lift&#39; and &#39;liftF&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;retract&#39; . &#39;lift&#39; = &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;retract&#39; . &#39;liftF&#39; = &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="mpre">retract</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 159, srcSpanStartColumn = 12, srcSpanEndLine = 159, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 159, srcSpanStartColumn = 20, srcSpanEndLine = 159, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="hl_fundecl"><span class="mpre">retract</span></span></a><span class="mpre"> (</span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_160_12_160_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_12_160_13&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">) = </span><a href="#loc_160_12_160_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_12_160_13&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="Control.Monad.html#loc_204_1_204_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_204_1_204_5&#39;)"><span class="hl_varref"><span class="mpre">Monad.join</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="mpre">retract</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Lift a natural transformation from @f@ to @g@ into a natural transformation from @F f@ to @F g@.</span></span><span class="mpre">
</span><a href="#loc_165_1_165_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_7&#39;)"><span class="mpre">hoistF</span></a><span class="mpre"> :: (forall </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">. </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">g</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) -&gt; </span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">g</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_165_1_165_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_7&#39;)"><span class="hl_fundecl"><span class="mpre">hoistF</span></span></a><span class="mpre"> </span><a name="loc_165_8_165_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_8_165_9&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> (</span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_165_13_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_13_165_14&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">) = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_165_22_165_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_22_165_23&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_165_24_165_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_24_165_25&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_165_13_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_13_165_14&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="#loc_165_22_165_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_22_165_23&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="#loc_165_24_165_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_24_165_25&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_165_8_165_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_8_165_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))

</span><span class="hl_comment"><span class="mpre">-- | Convert to another free monad representation.</span></span><span class="mpre">
</span><a href="#loc_169_1_169_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_6&#39;)"><span class="mpre">fromF</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 168, srcSpanStartColumn = 10, srcSpanEndLine = 168, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 168, srcSpanStartColumn = 24, srcSpanEndLine = 168, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadFree f m =&gt;</span></span><span class="mpre"> </span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_169_1_169_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_6&#39;)"><span class="hl_fundecl"><span class="mpre">fromF</span></span></a><span class="mpre"> (</span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> </span><a name="loc_169_10_169_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_10_169_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">) = </span><a href="#loc_169_10_169_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_10_169_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">wrap</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_169_1_169_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_6&#39;)"><span class="mpre">fromF</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generate a Church-encoded free monad from a &#39;Free&#39; monad.</span></span><span class="mpre">
</span><a href="#loc_174_1_174_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_1_174_4&#39;)"><span class="mpre">toF</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 173, srcSpanStartColumn = 8, srcSpanEndLine = 173, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 173, srcSpanStartColumn = 18, srcSpanEndLine = 173, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull"><span class="mpre">Functor f =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Free.html#loc_103_6_103_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Free.html#loc_103_6_103_10&#39;)"><span class="hl_tyconref"><span class="mpre">Free</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_84_9_84_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_10&#39;)"><span class="hl_tyconref"><span class="mpre">F</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_174_1_174_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_1_174_4&#39;)"><span class="hl_fundecl"><span class="mpre">toF</span></span></a><span class="mpre"> </span><a name="loc_174_5_174_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_5_174_7&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><a href="#loc_84_17_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_18&#39;)"><span class="hl_conref"><span class="mpre">F</span></span></a><span class="mpre"> (\</span><a name="loc_174_14_174_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_14_174_16&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a name="loc_174_17_174_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_17_174_19&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_175_3_175_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_3_175_5&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_174_14_174_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_14_174_16&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_174_17_174_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_17_174_19&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre"> </span><a href="#loc_174_5_174_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_5_174_7&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">) where
  </span><a name="loc_175_3_175_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_3_175_5&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_175_6_175_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_6_175_8&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> _  (</span><a href="Control.Monad.Free.html#loc_103_17_103_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Free.html#loc_103_17_103_21&#39;)"><span class="hl_conref"><span class="mpre">Pure</span></span></a><span class="mpre"> </span><a name="loc_175_18_175_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_18_175_19&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">) = </span><a href="#loc_175_6_175_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_6_175_8&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_175_18_175_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_18_175_19&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
  </span><a href="#loc_175_3_175_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_3_175_5&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_176_6_176_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_6_176_8&#39;)"><span class="hl_vardecl"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a name="loc_176_9_176_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_9_176_11&#39;)"><span class="hl_vardecl"><span class="mpre">kf</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Free.html#loc_103_26_103_30" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Free.html#loc_103_26_103_30&#39;)"><span class="hl_conref"><span class="mpre">Free</span></span></a><span class="mpre"> </span><a name="loc_176_18_176_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_18_176_21&#39;)"><span class="hl_vardecl"><span class="mpre">fma</span></span></a><span class="mpre">) = </span><a href="#loc_176_9_176_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_9_176_11&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="#loc_175_3_175_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_3_175_5&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_176_6_176_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_6_176_8&#39;)"><span class="hl_varref"><span class="mpre">kp</span></span></a><span class="mpre"> </span><a href="#loc_176_9_176_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_9_176_11&#39;)"><span class="hl_varref"><span class="mpre">kf</span></span></a><span class="mpre">) </span><a href="#loc_176_18_176_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_18_176_21&#39;)"><span class="hl_varref"><span class="mpre">fma</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Improve the asymptotic performance of code that builds a free monad with only binds and returns by using &#39;F&#39; behind the scenes.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is based on the \&quot;Free Monads for Less\&quot; series of articles by Edward Kmett:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * &lt;http://comonad.com/reader/2011/free-monads-for-less/   Free monads for less — Part 1&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * &lt;http://comonad.com/reader/2011/free-monads-for-less-2/ Free monads for less — Part 2&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and &lt;http://www.iai.uni-bonn.de/~jv/mpc08.pdf \&quot;Asymptotic Improvement of Computations over Free Monads\&quot;&gt; by Janis Voightländer.</span></span><span class="mpre">
</span><a href="#loc_188_1_188_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_8&#39;)"><span class="mpre">improve</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 187, srcSpanStartColumn = 12, srcSpanEndLine = 187, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 187, srcSpanStartColumn = 22, srcSpanEndLine = 187, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">Functor f =&gt;</span></span><span class="mpre"> (forall </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">. </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 187, srcSpanStartColumn = 36, srcSpanEndLine = 187, srcSpanEndColumn = 52}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Monad/Free/Church.hs&quot;, srcSpanStartLine = 187, srcSpanStartColumn = 50, srcSpanEndLine = 187, srcSpanEndColumn = 52}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadFree f m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><a href="Control.Monad.Free.html#loc_103_6_103_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Free.html#loc_103_6_103_10&#39;)"><span class="hl_tyconref"><span class="mpre">Free</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_188_1_188_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_8&#39;)"><span class="hl_fundecl"><span class="mpre">improve</span></span></a><span class="mpre"> </span><a name="loc_188_9_188_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_9_188_10&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="#loc_169_1_169_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_6&#39;)"><span class="hl_varref"><span class="mpre">fromF</span></span></a><span class="mpre"> </span><a href="#loc_188_9_188_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_9_188_10&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_188_1_188_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_8&#39;)"><span class="mpre">improve</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>