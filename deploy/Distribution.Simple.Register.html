<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Distribution.Simple.Register</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  Isaac Jones 2003-2004</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  cabal-devel@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This module deals with registering and unregistering packages. There are a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- couple ways it can do this, one is to do it directly. Another is to generate</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a script that can be run later to do it. The idea here being that the user</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is shielded from the details of what command to use for package registration</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- for a particular compiler. In practice this aspect was not especially</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- popular so we also provide a way to simply generate the package registration</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- file which then must be manually passed to @ghc-pkg@. It is possible to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- generate registration information for where the package is to be installed,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- or alternatively to register the package inplace in the build tree. The</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- latter is occasionally handy, and will become more important when we try to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- build multi-package systems.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This module does not delegate anything to the per-compiler modules but just</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- mixes it all in in this module, which is rather unsatisfactory. The script</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- generation and the unregister feature are not well used or tested.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- Copyright (c) 2003-2004, Isaac Jones
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.

    * Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the following
      disclaimer in the documentation and/or other materials provided
      with the distribution.

    * Neither the name of Isaac Jones nor the names of other
      contributors may be used to endorse or promote products derived
      from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. -}</span></span><span class="mpre">

module Distribution.Simple.Register (
    register,
    unregister,

    initPackageDB,
    invokeHcPkg,
    registerPackage,
    generateRegistrationInfo,
    inplaceInstalledPackageInfo,
    absoluteInstalledPackageInfo,
    generalInstalledPackageInfo,
  ) where

import Distribution.Simple.LocalBuildInfo
         ( </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="mpre">LocalBuildInfo</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="mpre">ComponentLocalBuildInfo</span></a><span class="mpre">(..)
         , </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_191_6_191_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_191_6_191_19&#39;)"><span class="mpre">ComponentName</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_306_1_306_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_306_1_306_27&#39;)"><span class="mpre">getComponentLocalBuildInfo</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_234_6_234_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_234_6_234_17&#39;)"><span class="mpre">LibraryName</span></a><span class="mpre">(..)
         , </span><a href="Distribution.Simple.InstallDirs.html#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_105_6_105_17&#39;)"><span class="mpre">InstallDirs</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20&#39;)"><span class="mpre">absoluteInstallDirs</span></a><span class="mpre"> )
import Distribution.Simple.BuildPaths (</span><a href="Distribution.Simple.BuildPaths.html#loc_108_1_108_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_108_1_108_12&#39;)"><span class="mpre">haddockName</span></a><span class="mpre">)
import qualified Distribution.Simple.GHC  as GHC
import qualified Distribution.Simple.LHC  as LHC
import qualified Distribution.Simple.Hugs as Hugs
import qualified Distribution.Simple.UHC  as UHC
import Distribution.Simple.Compiler
         ( </span><a href="Distribution.Simple.Compiler.html#loc_99_1_99_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_99_1_99_16&#39;)"><span class="mpre">compilerVersion</span></a><span class="mpre">, </span><a href="Distribution.Simple.Compiler.html#loc_85_6_85_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_85_6_85_14&#39;)"><span class="mpre">Compiler</span></a><span class="mpre">, </span><a href="Distribution.Compiler.html#loc_81_6_81_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_6_81_20&#39;)"><span class="mpre">CompilerFlavor</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.Compiler.html#loc_96_1_96_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_96_1_96_15&#39;)"><span class="mpre">compilerFlavor</span></a><span class="mpre">
         , PackageDBStack, </span><a href="Distribution.Simple.Compiler.html#loc_139_1_139_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_139_1_139_22&#39;)"><span class="mpre">registrationPackageDB</span></a><span class="mpre"> )
import Distribution.Simple.Program
         ( ProgramConfiguration, </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="mpre">ConfiguredProgram</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.Run.html#loc_95_1_95_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Run.html#loc_95_1_95_21&#39;)"><span class="mpre">runProgramInvocation</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="mpre">requireProgram</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="mpre">lookupProgram</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="mpre">ghcPkgProgram</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Builtin.html#loc_117_1_117_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_117_1_117_14&#39;)"><span class="mpre">lhcPkgProgram</span></a><span class="mpre"> )
import Distribution.Simple.Program.Script
         ( </span><a href="Distribution.Simple.Program.Script.html#loc_31_1_31_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Script.html#loc_31_1_31_25&#39;)"><span class="mpre">invocationAsSystemScript</span></a><span class="mpre"> )
import qualified Distribution.Simple.Program.HcPkg as HcPkg
import Distribution.Simple.Setup
         ( </span><a href="Distribution.Simple.Setup.html#loc_902_6_902_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_902_6_902_19&#39;)"><span class="mpre">RegisterFlags</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.InstallDirs.html#loc_330_6_330_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_330_6_330_14&#39;)"><span class="mpre">CopyDest</span></a><span class="mpre">(..)
         , </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="mpre">fromFlag</span></a><span class="mpre">, </span><a href="Distribution.Simple.Setup.html#loc_189_1_189_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_189_1_189_18&#39;)"><span class="mpre">fromFlagOrDefault</span></a><span class="mpre">, </span><a href="Distribution.Simple.Setup.html#loc_193_1_193_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_193_1_193_12&#39;)"><span class="mpre">flagToMaybe</span></a><span class="mpre"> )
import Distribution.PackageDescription
         ( </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="mpre">PackageDescription</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="mpre">Library</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="mpre">BuildInfo</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_778_1_778_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_778_1_778_10&#39;)"><span class="mpre">hcOptions</span></a><span class="mpre"> )
import Distribution.Package
         ( </span><a href="Distribution.Package.html#loc_183_7_183_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_183_7_183_14&#39;)"><span class="mpre">Package</span></a><span class="mpre">(..), </span><a href="Distribution.Package.html#loc_187_1_187_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_187_1_187_12&#39;)"><span class="mpre">packageName</span></a><span class="mpre">, </span><a href="Distribution.Package.html#loc_130_9_130_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_130_9_130_27&#39;)"><span class="mpre">InstalledPackageId</span></a><span class="mpre">(..) )
import Distribution.InstalledPackageInfo
         ( InstalledPackageInfo, </span><a href="Distribution.InstalledPackageInfo.html#loc_92_6_92_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.InstalledPackageInfo.html#loc_92_6_92_27&#39;)"><span class="mpre">InstalledPackageInfo_</span></a><span class="mpre">(InstalledPackageInfo)
         , </span><a href="Distribution.InstalledPackageInfo.html#loc_185_1_185_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.InstalledPackageInfo.html#loc_185_1_185_25&#39;)"><span class="mpre">showInstalledPackageInfo</span></a><span class="mpre"> )
import qualified Distribution.InstalledPackageInfo as IPI
import Distribution.Simple.Utils
         ( </span><a href="Distribution.Simple.Utils.html#loc_1260_1_1260_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1260_1_1260_14&#39;)"><span class="mpre">writeUTF8File</span></a><span class="mpre">, </span><a href="Distribution.Simple.Utils.html#loc_1071_1_1071_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1071_1_1071_16&#39;)"><span class="mpre">writeFileAtomic</span></a><span class="mpre">, </span><a href="Distribution.Compat.CopyFile.html#loc_49_1_49_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.CopyFile.html#loc_49_1_49_18&#39;)"><span class="mpre">setFileExecutable</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="mpre">die</span></a><span class="mpre">, </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="mpre">notice</span></a><span class="mpre">, </span><a href="Distribution.Simple.Utils.html#loc_297_1_297_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_297_1_297_13&#39;)"><span class="mpre">setupMessage</span></a><span class="mpre"> )
import Distribution.System
         ( </span><a href="Distribution.System.html#loc_66_6_66_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_6_66_8&#39;)"><span class="mpre">OS</span></a><span class="mpre">(..), </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="mpre">buildOS</span></a><span class="mpre"> )
import Distribution.Text
         ( </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="mpre">display</span></a><span class="mpre"> )
import Distribution.Version ( </span><a href="Data.Version.html#loc_68_6_68_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Version.html#loc_68_6_68_13&#39;)"><span class="mpre">Version</span></a><span class="mpre">(..) )
import Distribution.Verbosity as Verbosity
         ( </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="mpre">Verbosity</span></a><span class="mpre">, </span><a href="Distribution.Verbosity.html#loc_67_1_67_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_67_1_67_7&#39;)"><span class="mpre">normal</span></a><span class="mpre"> )
import Distribution.Compat.Exception
         ( </span><a href="Distribution.Compat.Exception.html#loc_11_1_11_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_11_1_11_6&#39;)"><span class="mpre">tryIO</span></a><span class="mpre"> )

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 113, srcSpanStartColumn = 8, srcSpanEndLine = 113, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;System.FilePath&quot;"><span class="mpre">System.FilePath</span></span><span class="mpre"> ((&lt;/&gt;), (&lt;.&gt;), isAbsolute)
import System.Directory
         ( </span><a href="System.Directory.html#loc_673_1_673_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_673_1_673_20&#39;)"><span class="mpre">getCurrentDirectory</span></a><span class="mpre">, </span><a href="System.Directory.html#loc_351_1_351_25" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_351_1_351_25&#39;)"><span class="mpre">removeDirectoryRecursive</span></a><span class="mpre"> )

import Data.Maybe
         ( </span><a href="Data.Maybe.html#loc_80_1_80_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_80_1_80_7&#39;)"><span class="mpre">isJust</span></a><span class="mpre">, </span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="mpre">fromMaybe</span></a><span class="mpre">, </span><a href="Data.Maybe.html#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_103_1_103_12&#39;)"><span class="mpre">maybeToList</span></a><span class="mpre"> )
import Data.List
         ( </span><a href="Data.List.html#loc_464_1_464_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_464_1_464_10&#39;)"><span class="mpre">partition</span></a><span class="mpre">, </span><a href="Data.List.html#loc_314_1_314_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_314_1_314_4&#39;)"><span class="mpre">nub</span></a><span class="mpre"> )
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 121, srcSpanStartColumn = 18, srcSpanEndLine = 121, srcSpanEndColumn = 44}, srcInfoPoints = []}) &quot;Data.ByteString.Lazy.Char8&quot;"><span class="mpre">Data.ByteString.Lazy.Char8</span></span><span class="mpre"> as BS.Char8

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Registration</span></span><span class="mpre">

</span><a href="#loc_129_1_129_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_9&#39;)"><span class="mpre">register</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
         -&gt; </span><a href="Distribution.Simple.Setup.html#loc_902_6_902_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_902_6_902_19&#39;)"><span class="hl_tyconref"><span class="mpre">RegisterFlags</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^Install in the user&#39;s database?; verbose</span></span><span class="mpre">
         -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_129_1_129_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_9&#39;)"><span class="hl_fundecl"><span class="mpre">register</span></span></a><span class="mpre"> </span><a name="loc_129_10_129_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_10_129_13&#39;)"><span class="hl_specname"><span class="mpre">pkg</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 129, srcSpanStartColumn = 14, srcSpanEndLine = 129, srcSpanEndColumn = 62}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 129, srcSpanStartColumn = 33, srcSpanEndLine = 129, srcSpanEndColumn = 34},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Sim"><span class="mpre">PackageDescription { library       = Just lib  }</span></span><span class="mpre"> </span><a name="loc_129_63_129_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_63_129_66&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_129_67_129_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_67_129_75&#39;)"><span class="hl_vardecl"><span class="mpre">regFlags</span></span></a><span class="mpre">
  = do
    let </span><a name="loc_131_9_131_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_9_131_13&#39;)"><span class="hl_vardecl"><span class="mpre">clbi</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_306_1_306_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_306_1_306_27&#39;)"><span class="hl_varref"><span class="mpre">getComponentLocalBuildInfo</span></span></a><span class="mpre"> </span><a href="#loc_129_63_129_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_63_129_66&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_191_22_191_30" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_191_22_191_30&#39;)"><span class="hl_conref"><span class="mpre">CLibName</span></span></a><span class="mpre">
    </span><a name="loc_132_5_132_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_5_132_21&#39;)"><span class="hl_vardecl"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_187_1_187_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_25&#39;)"><span class="hl_varref"><span class="mpre">generateRegistrationInfo</span></span></a><span class="mpre">
                           </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_129_10_129_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_10_129_13&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">lib</span></span><span class="mpre"> </span><a href="#loc_129_63_129_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_63_129_66&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_131_9_131_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_9_131_13&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre"> </span><a href="#loc_149_5_149_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_5_149_12&#39;)"><span class="hl_varref"><span class="mpre">inplace</span></span></a><span class="mpre"> </span><a href="#loc_155_5_155_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_5_155_13&#39;)"><span class="hl_varref"><span class="mpre">distPref</span></span></a><span class="mpre">

     </span><span class="hl_comment"><span class="mpre">-- Three different modes:</span></span><span class="mpre">
    case </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> of
     _ | </span><a href="#loc_143_5_143_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_5_143_24&#39;)"><span class="hl_varref"><span class="mpre">modeGenerateRegFile</span></span></a><span class="mpre">   -&gt; </span><a href="#loc_158_5_158_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_5_158_26&#39;)"><span class="hl_varref"><span class="mpre">writeRegistrationFile</span></span></a><span class="mpre"> </span><a href="#loc_132_5_132_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_5_132_21&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre">
       | </span><a href="#loc_147_5_147_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_5_147_26&#39;)"><span class="hl_varref"><span class="mpre">modeGenerateRegScript</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_162_5_162_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_5_162_24&#39;)"><span class="hl_varref"><span class="mpre">writeRegisterScript</span></span></a><span class="mpre">   </span><a href="#loc_132_5_132_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_5_132_21&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre">
       | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">             -&gt; </span><a href="#loc_237_1_237_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_16&#39;)"><span class="hl_varref"><span class="mpre">registerPackage</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre">
                                    </span><a href="#loc_132_5_132_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_5_132_21&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a href="#loc_129_10_129_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_10_129_13&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_129_63_129_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_63_129_66&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_149_5_149_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_5_149_12&#39;)"><span class="hl_varref"><span class="mpre">inplace</span></span></a><span class="mpre"> </span><a href="#loc_153_5_153_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_5_153_15&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre">

  where
    </span><a name="loc_143_5_143_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_5_143_24&#39;)"><span class="hl_vardecl"><span class="mpre">modeGenerateRegFile</span></span></a><span class="mpre"> = </span><a href="Data.Maybe.html#loc_80_1_80_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_80_1_80_7&#39;)"><span class="hl_varref"><span class="mpre">isJust</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_193_1_193_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_193_1_193_12&#39;)"><span class="hl_varref"><span class="mpre">flagToMaybe</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_905_5_905_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_905_5_905_18&#39;)"><span class="hl_varref"><span class="mpre">regGenPkgConf</span></span></a><span class="mpre"> </span><a href="#loc_129_67_129_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_67_129_75&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">))
    </span><a name="loc_144_5_144_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_5_144_12&#39;)"><span class="hl_vardecl"><span class="mpre">regFile</span></span></a><span class="mpre">             = </span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="hl_varref"><span class="mpre">fromMaybe</span></span></a><span class="mpre"> (</span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> (</span><a href="Distribution.Package.html#loc_184_3_184_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_184_3_184_12&#39;)"><span class="hl_varref"><span class="mpre">packageId</span></span></a><span class="mpre"> </span><a href="#loc_129_10_129_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_10_129_13&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;conf&quot;</span></span><span class="mpre">)
                                    (</span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_905_5_905_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_905_5_905_18&#39;)"><span class="hl_varref"><span class="mpre">regGenPkgConf</span></span></a><span class="mpre"> </span><a href="#loc_129_67_129_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_67_129_75&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">))

    </span><a name="loc_147_5_147_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_5_147_26&#39;)"><span class="hl_vardecl"><span class="mpre">modeGenerateRegScript</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_904_5_904_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_904_5_904_17&#39;)"><span class="hl_varref"><span class="mpre">regGenScript</span></span></a><span class="mpre"> </span><a href="#loc_129_67_129_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_67_129_75&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">)

    </span><a name="loc_149_5_149_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_5_149_12&#39;)"><span class="hl_vardecl"><span class="mpre">inplace</span></span></a><span class="mpre">   = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_906_5_906_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_906_5_906_15&#39;)"><span class="hl_varref"><span class="mpre">regInPlace</span></span></a><span class="mpre"> </span><a href="#loc_129_67_129_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_67_129_75&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">)
    </span><span class="hl_comment"><span class="mpre">-- FIXME: there&#39;s really no guarantee this will work.</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- registering into a totally different db stack can</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- fail if dependencies cannot be satisfied.</span></span><span class="mpre">
    </span><a name="loc_153_5_153_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_5_153_15&#39;)"><span class="hl_vardecl"><span class="mpre">packageDbs</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_314_1_314_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_314_1_314_4&#39;)"><span class="hl_varref"><span class="mpre">nub</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_148_9_148_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_148_9_148_22&#39;)"><span class="hl_varref"><span class="mpre">withPackageDB</span></span></a><span class="mpre"> </span><a href="#loc_129_63_129_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_63_129_66&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">
                    </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_103_1_103_12&#39;)"><span class="hl_varref"><span class="mpre">maybeToList</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_193_1_193_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_193_1_193_12&#39;)"><span class="hl_varref"><span class="mpre">flagToMaybe</span></span></a><span class="mpre">  (</span><a href="Distribution.Simple.Setup.html#loc_903_5_903_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_903_5_903_17&#39;)"><span class="hl_varref"><span class="mpre">regPackageDB</span></span></a><span class="mpre"> </span><a href="#loc_129_67_129_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_67_129_75&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">))
    </span><a name="loc_155_5_155_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_5_155_13&#39;)"><span class="hl_vardecl"><span class="mpre">distPref</span></span></a><span class="mpre">  = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_907_5_907_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_907_5_907_16&#39;)"><span class="hl_varref"><span class="mpre">regDistPref</span></span></a><span class="mpre"> </span><a href="#loc_129_67_129_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_67_129_75&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">)
    </span><a name="loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_908_5_908_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_908_5_908_17&#39;)"><span class="hl_varref"><span class="mpre">regVerbosity</span></span></a><span class="mpre"> </span><a href="#loc_129_67_129_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_67_129_75&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">)

    </span><a name="loc_158_5_158_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_5_158_26&#39;)"><span class="hl_fundecl"><span class="mpre">writeRegistrationFile</span></span></a><span class="mpre"> </span><a name="loc_158_27_158_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_27_158_43&#39;)"><span class="hl_vardecl"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> = do
      </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;Creating package registration file: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_144_5_144_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_5_144_12&#39;)"><span class="hl_varref"><span class="mpre">regFile</span></span></a><span class="mpre">)
      </span><a href="Distribution.Simple.Utils.html#loc_1260_1_1260_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1260_1_1260_14&#39;)"><span class="hl_varref"><span class="mpre">writeUTF8File</span></span></a><span class="mpre"> </span><a href="#loc_144_5_144_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_5_144_12&#39;)"><span class="hl_varref"><span class="mpre">regFile</span></span></a><span class="mpre"> (</span><a href="Distribution.InstalledPackageInfo.html#loc_185_1_185_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.InstalledPackageInfo.html#loc_185_1_185_25&#39;)"><span class="hl_varref"><span class="mpre">showInstalledPackageInfo</span></span></a><span class="mpre"> </span><a href="#loc_158_27_158_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_27_158_43&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre">)

    </span><a name="loc_162_5_162_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_5_162_24&#39;)"><span class="hl_fundecl"><span class="mpre">writeRegisterScript</span></span></a><span class="mpre"> </span><a name="loc_162_25_162_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_25_162_41&#39;)"><span class="hl_vardecl"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> =
      case </span><a href="Distribution.Simple.Compiler.html#loc_96_1_96_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_96_1_96_15&#39;)"><span class="hl_varref"><span class="mpre">compilerFlavor</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_129_63_129_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_63_129_66&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) of
        </span><a href="Distribution.Compiler.html#loc_81_23_81_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_23_81_26&#39;)"><span class="hl_conref"><span class="mpre">GHC</span></span></a><span class="mpre">  -&gt; do (</span><a name="loc_164_21_164_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_21_164_27&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkg</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_129_63_129_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_63_129_66&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
                   </span><a href="#loc_257_1_257_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_1_257_25&#39;)"><span class="hl_varref"><span class="mpre">writeHcPkgRegisterScript</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_162_25_162_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_25_162_41&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a href="#loc_164_21_164_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_21_164_27&#39;)"><span class="hl_varref"><span class="mpre">ghcPkg</span></span></a><span class="mpre"> </span><a href="#loc_153_5_153_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_5_153_15&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre">
        </span><a href="Distribution.Compiler.html#loc_81_69_81_72" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_69_81_72&#39;)"><span class="hl_conref"><span class="mpre">LHC</span></span></a><span class="mpre">  -&gt; do (</span><a name="loc_166_21_166_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_21_166_27&#39;)"><span class="hl_vardecl"><span class="mpre">lhcPkg</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_117_1_117_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_117_1_117_14&#39;)"><span class="hl_varref"><span class="mpre">lhcPkgProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_129_63_129_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_63_129_66&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
                   </span><a href="#loc_257_1_257_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_1_257_25&#39;)"><span class="hl_varref"><span class="mpre">writeHcPkgRegisterScript</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_162_25_162_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_25_162_41&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a href="#loc_166_21_166_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_21_166_27&#39;)"><span class="hl_varref"><span class="mpre">lhcPkg</span></span></a><span class="mpre"> </span><a href="#loc_153_5_153_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_5_153_15&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre">
        </span><a href="Distribution.Compiler.html#loc_81_41_81_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_41_81_45&#39;)"><span class="hl_conref"><span class="mpre">Hugs</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Registration scripts not needed for hugs&quot;</span></span><span class="mpre">
        </span><a href="Distribution.Compiler.html#loc_81_63_81_66" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_63_81_66&#39;)"><span class="hl_conref"><span class="mpre">JHC</span></span></a><span class="mpre">  -&gt; </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Registration scripts not needed for jhc&quot;</span></span><span class="mpre">
        </span><a href="Distribution.Compiler.html#loc_81_29_81_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_29_81_32&#39;)"><span class="hl_conref"><span class="mpre">NHC</span></span></a><span class="mpre">  -&gt; </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Registration scripts not needed for nhc98&quot;</span></span><span class="mpre">
        </span><a href="Distribution.Compiler.html#loc_81_75_81_78" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_75_81_78&#39;)"><span class="hl_conref"><span class="mpre">UHC</span></span></a><span class="mpre">  -&gt; </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_156_5_156_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_5_156_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Registration scripts not needed for uhc&quot;</span></span><span class="mpre">
        _    -&gt; </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Registration scripts are not implemented for this compiler&quot;</span></span><span class="mpre">

</span><a href="#loc_129_1_129_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_9&#39;)"><span class="hl_fundecl"><span class="mpre">register</span></span></a><span class="mpre"> _ _ </span><a name="loc_174_14_174_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_14_174_22&#39;)"><span class="hl_vardecl"><span class="mpre">regFlags</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_176_5_176_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_5_176_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;No package to register&quot;</span></span><span class="mpre">
  where
    </span><a name="loc_176_5_176_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_5_176_14&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_908_5_908_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_908_5_908_17&#39;)"><span class="hl_varref"><span class="mpre">regVerbosity</span></span></a><span class="mpre"> </span><a href="#loc_174_14_174_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_14_174_22&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">)


</span><a href="#loc_187_1_187_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_25&#39;)"><span class="mpre">generateRegistrationInfo</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
                         -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
                         -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">
                         -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                         -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre">
                         -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
                         -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
                         -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
</span><a name="loc_187_1_187_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_25&#39;)"><span class="hl_fundecl"><span class="mpre">generateRegistrationInfo</span></span></a><span class="mpre"> </span><a name="loc_187_26_187_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_26_187_35&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_187_36_187_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_36_187_39&#39;)"><span class="hl_vardecl"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a name="loc_187_40_187_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_40_187_43&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a name="loc_187_44_187_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_44_187_47&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_187_48_187_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_48_187_52&#39;)"><span class="hl_vardecl"><span class="mpre">clbi</span></span></a><span class="mpre"> </span><a name="loc_187_53_187_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_53_187_60&#39;)"><span class="hl_vardecl"><span class="mpre">inplace</span></span></a><span class="mpre"> </span><a name="loc_187_61_187_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_61_187_69&#39;)"><span class="hl_vardecl"><span class="mpre">distPref</span></span></a><span class="mpre"> = do
  </span><span class="hl_comment"><span class="mpre">--TODO: eliminate pwd!</span></span><span class="mpre">
  </span><a name="loc_189_3_189_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_3_189_6&#39;)"><span class="hl_vardecl"><span class="mpre">pwd</span></span></a><span class="mpre"> &lt;- </span><a href="System.Directory.html#loc_673_1_673_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_673_1_673_20&#39;)"><span class="hl_varref"><span class="mpre">getCurrentDirectory</span></span></a><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">--TODO: the method of setting the InstalledPackageId is compiler specific</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--      this aspect should be delegated to a per-compiler helper.</span></span><span class="mpre">
  let </span><a name="loc_193_7_193_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_7_193_11&#39;)"><span class="hl_vardecl"><span class="mpre">comp</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_187_44_187_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_44_187_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">
  </span><span class="hl_vardecl"><span class="mpre">ipid</span></span><span class="mpre"> &lt;-
    case </span><a href="Distribution.Simple.Compiler.html#loc_96_1_96_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_96_1_96_15&#39;)"><span class="hl_varref"><span class="mpre">compilerFlavor</span></span></a><span class="mpre"> </span><a href="#loc_193_7_193_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_7_193_11&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre"> of
     </span><a href="Distribution.Compiler.html#loc_81_23_81_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_23_81_26&#39;)"><span class="hl_conref"><span class="mpre">GHC</span></span></a><span class="mpre"> | </span><a href="Distribution.Simple.Compiler.html#loc_99_1_99_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_99_1_99_16&#39;)"><span class="hl_varref"><span class="mpre">compilerVersion</span></span></a><span class="mpre"> </span><a href="#loc_193_7_193_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_7_193_11&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">11</span></span><span class="mpre">] [] -&gt; do
            </span><a name="loc_197_13_197_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_13_197_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.Simple.GHC.html#loc_1116_1_1116_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.GHC.html#loc_1116_1_1116_11&#39;)"><span class="hl_varref"><span class="mpre">GHC.libAbiHash</span></span></a><span class="mpre"> </span><a href="#loc_187_26_187_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_26_187_35&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_187_36_187_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_36_187_39&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_187_44_187_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_44_187_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_187_40_187_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_40_187_43&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a href="#loc_187_48_187_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_48_187_52&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre">
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Distribution.Package.html#loc_130_30_130_48" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_130_30_130_48&#39;)"><span class="hl_conref"><span class="mpre">InstalledPackageId</span></span></a><span class="mpre"> (</span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> (</span><a href="Distribution.Package.html#loc_184_3_184_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_184_3_184_12&#39;)"><span class="hl_varref"><span class="mpre">packageId</span></span></a><span class="mpre"> </span><a href="#loc_187_36_187_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_36_187_39&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;-&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_197_13_197_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_13_197_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">))
     </span><span class="hl_vardecl"><span class="mpre">_other</span></span><span class="mpre"> -&gt; do
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Distribution.Package.html#loc_130_30_130_48" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_130_30_130_48&#39;)"><span class="hl_conref"><span class="mpre">InstalledPackageId</span></span></a><span class="mpre"> (</span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> (</span><a href="Distribution.Package.html#loc_184_3_184_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_184_3_184_12&#39;)"><span class="hl_varref"><span class="mpre">packageId</span></span></a><span class="mpre"> </span><a href="#loc_187_36_187_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_36_187_39&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre">)))

  let </span><span class="hl_vardecl"><span class="mpre">installedPkgInfo</span></span><span class="mpre">
        | </span><a href="#loc_187_53_187_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_53_187_60&#39;)"><span class="hl_varref"><span class="mpre">inplace</span></span></a><span class="mpre">   = </span><a href="#loc_347_1_347_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_1_347_28&#39;)"><span class="hl_varref"><span class="mpre">inplaceInstalledPackageInfo</span></span></a><span class="mpre"> </span><a href="#loc_189_3_189_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_3_189_6&#39;)"><span class="hl_varref"><span class="mpre">pwd</span></span></a><span class="mpre"> </span><a href="#loc_187_61_187_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_61_187_69&#39;)"><span class="hl_varref"><span class="mpre">distPref</span></span></a><span class="mpre">
                        </span><a href="#loc_187_36_187_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_36_187_39&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_187_40_187_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_40_187_43&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a href="#loc_187_44_187_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_44_187_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_187_48_187_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_48_187_52&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_375_1_375_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_1_375_29&#39;)"><span class="hl_varref"><span class="mpre">absoluteInstalledPackageInfo</span></span></a><span class="mpre">
                        </span><a href="#loc_187_36_187_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_36_187_39&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_187_40_187_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_40_187_43&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a href="#loc_187_44_187_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_44_187_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_187_48_187_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_48_187_52&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre">

  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 208, srcSpanStartColumn = 10, srcSpanEndLine = 208, srcSpanEndColumn = 59}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 208, srcSpanStartColumn = 26, srcSpanEndLine = 208, srcSpanEndColumn = 27},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distributio"><span class="mpre">installedPkgInfo{ IPI.installedPackageId = ipid }</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | Create an empty package DB at the specified location.</span></span><span class="mpre">
</span><a href="#loc_214_1_214_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_1_214_14&#39;)"><span class="mpre">initPackageDB</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Compiler.html#loc_85_6_85_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_85_6_85_14&#39;)"><span class="hl_tyconref"><span class="mpre">Compiler</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
                 -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_214_1_214_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_1_214_14&#39;)"><span class="hl_fundecl"><span class="mpre">initPackageDB</span></span></a><span class="mpre"> </span><a name="loc_214_15_214_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_15_214_24&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_214_25_214_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_25_214_29&#39;)"><span class="hl_vardecl"><span class="mpre">comp</span></span></a><span class="mpre"> </span><a name="loc_214_30_214_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_30_214_34&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre"> </span><a name="loc_214_35_214_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_35_214_41&#39;)"><span class="hl_vardecl"><span class="mpre">dbPath</span></span></a><span class="mpre"> =
  case (</span><a href="Distribution.Simple.Compiler.html#loc_96_1_96_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_96_1_96_15&#39;)"><span class="hl_varref"><span class="mpre">compilerFlavor</span></span></a><span class="mpre"> </span><a href="#loc_214_25_214_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_25_214_29&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre">) of
    </span><a href="Distribution.Compiler.html#loc_81_23_81_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_23_81_26&#39;)"><span class="hl_conref"><span class="mpre">GHC</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.GHC.html#loc_1323_1_1323_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.GHC.html#loc_1323_1_1323_14&#39;)"><span class="hl_varref"><span class="mpre">GHC.initPackageDB</span></span></a><span class="mpre"> </span><a href="#loc_214_15_214_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_15_214_24&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_214_30_214_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_30_214_34&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre"> </span><a href="#loc_214_35_214_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_35_214_41&#39;)"><span class="hl_varref"><span class="mpre">dbPath</span></span></a><span class="mpre">
    _   -&gt; </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Distribution.Simple.Register.initPackageDB: \
               \not implemented for this compiler&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Run @hc-pkg@ using a given package DB stack, directly forwarding the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- provided command-line arguments to it.</span></span><span class="mpre">
</span><a href="#loc_224_1_224_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_12&#39;)"><span class="mpre">invokeHcPkg</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Compiler.html#loc_85_6_85_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_85_6_85_14&#39;)"><span class="hl_tyconref"><span class="mpre">Compiler</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">PackageDBStack</span></span><span class="mpre">
                -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_224_1_224_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_12&#39;)"><span class="hl_fundecl"><span class="mpre">invokeHcPkg</span></span></a><span class="mpre"> </span><a name="loc_224_13_224_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_13_224_22&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_224_23_224_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_23_224_27&#39;)"><span class="hl_vardecl"><span class="mpre">comp</span></span></a><span class="mpre"> </span><a name="loc_224_28_224_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_28_224_32&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre"> </span><a name="loc_224_33_224_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_33_224_40&#39;)"><span class="hl_vardecl"><span class="mpre">dbStack</span></span></a><span class="mpre"> </span><a name="loc_224_41_224_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_41_224_50&#39;)"><span class="hl_vardecl"><span class="mpre">extraArgs</span></span></a><span class="mpre"> =
    case (</span><a href="Distribution.Simple.Compiler.html#loc_96_1_96_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_96_1_96_15&#39;)"><span class="hl_varref"><span class="mpre">compilerFlavor</span></span></a><span class="mpre"> </span><a href="#loc_224_23_224_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_23_224_27&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre">) of
      </span><a href="Distribution.Compiler.html#loc_81_23_81_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_23_81_26&#39;)"><span class="hl_conref"><span class="mpre">GHC</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.GHC.html#loc_1331_1_1331_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.GHC.html#loc_1331_1_1331_12&#39;)"><span class="hl_varref"><span class="mpre">GHC.invokeHcPkg</span></span></a><span class="mpre"> </span><a href="#loc_224_13_224_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_13_224_22&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_224_28_224_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_28_224_32&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre"> </span><a href="#loc_224_33_224_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_33_224_40&#39;)"><span class="hl_varref"><span class="mpre">dbStack</span></span></a><span class="mpre"> </span><a href="#loc_224_41_224_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_41_224_50&#39;)"><span class="hl_varref"><span class="mpre">extraArgs</span></span></a><span class="mpre">
      _   -&gt; </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Distribution.Simple.Register.invokeHcPkg: \
                 \not implemented for this compiler&quot;</span></span><span class="mpre">

</span><a href="#loc_237_1_237_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_16&#39;)"><span class="mpre">registerPackage</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
                -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
                -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
                -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
                -&gt; </span><span class="hl_tyconref"><span class="mpre">PackageDBStack</span></span><span class="mpre">
                -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_237_1_237_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_16&#39;)"><span class="hl_fundecl"><span class="mpre">registerPackage</span></span></a><span class="mpre"> </span><a name="loc_237_17_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_17_237_26&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_237_27_237_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_43&#39;)"><span class="hl_vardecl"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a name="loc_237_44_237_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_44_237_47&#39;)"><span class="hl_vardecl"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a name="loc_237_48_237_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_48_237_51&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_237_52_237_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_52_237_59&#39;)"><span class="hl_vardecl"><span class="mpre">inplace</span></span></a><span class="mpre"> </span><a name="loc_237_60_237_70" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_60_237_70&#39;)"><span class="hl_vardecl"><span class="mpre">packageDbs</span></span></a><span class="mpre"> = do
  let </span><a name="loc_238_7_238_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_7_238_10&#39;)"><span class="hl_vardecl"><span class="mpre">msg</span></span></a><span class="mpre"> = if </span><a href="#loc_237_52_237_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_52_237_59&#39;)"><span class="hl_varref"><span class="mpre">inplace</span></span></a><span class="mpre">
            then </span><span class="hl_string"><span class="mpre">&quot;In-place registering&quot;</span></span><span class="mpre">
            else </span><span class="hl_string"><span class="mpre">&quot;Registering&quot;</span></span><span class="mpre">
  </span><a href="Distribution.Simple.Utils.html#loc_297_1_297_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_297_1_297_13&#39;)"><span class="hl_varref"><span class="mpre">setupMessage</span></span></a><span class="mpre"> </span><a href="#loc_237_17_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_17_237_26&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_238_7_238_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_7_238_10&#39;)"><span class="hl_varref"><span class="mpre">msg</span></span></a><span class="mpre"> (</span><a href="Distribution.Package.html#loc_184_3_184_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_184_3_184_12&#39;)"><span class="hl_varref"><span class="mpre">packageId</span></span></a><span class="mpre"> </span><a href="#loc_237_44_237_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_44_237_47&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre">)
  case </span><a href="Distribution.Simple.Compiler.html#loc_96_1_96_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_96_1_96_15&#39;)"><span class="hl_varref"><span class="mpre">compilerFlavor</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_237_48_237_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_48_237_51&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) of
    </span><a href="Distribution.Compiler.html#loc_81_23_81_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_23_81_26&#39;)"><span class="hl_conref"><span class="mpre">GHC</span></span></a><span class="mpre">  -&gt; </span><a href="Distribution.Simple.GHC.html#loc_1344_1_1344_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.GHC.html#loc_1344_1_1344_16&#39;)"><span class="hl_varref"><span class="mpre">GHC.registerPackage</span></span></a><span class="mpre">  </span><a href="#loc_237_17_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_17_237_26&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_237_27_237_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_43&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a href="#loc_237_44_237_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_44_237_47&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_237_48_237_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_48_237_51&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_237_52_237_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_52_237_59&#39;)"><span class="hl_varref"><span class="mpre">inplace</span></span></a><span class="mpre"> </span><a href="#loc_237_60_237_70" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_60_237_70&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre">
    </span><a href="Distribution.Compiler.html#loc_81_69_81_72" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_69_81_72&#39;)"><span class="hl_conref"><span class="mpre">LHC</span></span></a><span class="mpre">  -&gt; </span><a href="Distribution.Simple.LHC.html#loc_832_1_832_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LHC.html#loc_832_1_832_16&#39;)"><span class="hl_varref"><span class="mpre">LHC.registerPackage</span></span></a><span class="mpre">  </span><a href="#loc_237_17_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_17_237_26&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_237_27_237_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_43&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a href="#loc_237_44_237_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_44_237_47&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_237_48_237_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_48_237_51&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_237_52_237_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_52_237_59&#39;)"><span class="hl_varref"><span class="mpre">inplace</span></span></a><span class="mpre"> </span><a href="#loc_237_60_237_70" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_60_237_70&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre">
    </span><a href="Distribution.Compiler.html#loc_81_41_81_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_41_81_45&#39;)"><span class="hl_conref"><span class="mpre">Hugs</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Hugs.html#loc_629_1_629_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Hugs.html#loc_629_1_629_16&#39;)"><span class="hl_varref"><span class="mpre">Hugs.registerPackage</span></span></a><span class="mpre"> </span><a href="#loc_237_17_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_17_237_26&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_237_27_237_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_43&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a href="#loc_237_44_237_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_44_237_47&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_237_48_237_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_48_237_51&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_237_52_237_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_52_237_59&#39;)"><span class="hl_varref"><span class="mpre">inplace</span></span></a><span class="mpre"> </span><a href="#loc_237_60_237_70" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_60_237_70&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre">
    </span><a href="Distribution.Compiler.html#loc_81_75_81_78" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_75_81_78&#39;)"><span class="hl_conref"><span class="mpre">UHC</span></span></a><span class="mpre">  -&gt; </span><a href="Distribution.Simple.UHC.html#loc_293_1_293_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.UHC.html#loc_293_1_293_16&#39;)"><span class="hl_varref"><span class="mpre">UHC.registerPackage</span></span></a><span class="mpre">  </span><a href="#loc_237_17_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_17_237_26&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_237_27_237_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_43&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a href="#loc_237_44_237_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_44_237_47&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_237_48_237_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_48_237_51&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_237_52_237_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_52_237_59&#39;)"><span class="hl_varref"><span class="mpre">inplace</span></span></a><span class="mpre"> </span><a href="#loc_237_60_237_70" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_60_237_70&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre">
    </span><a href="Distribution.Compiler.html#loc_81_63_81_66" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_63_81_66&#39;)"><span class="hl_conref"><span class="mpre">JHC</span></span></a><span class="mpre">  -&gt; </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_237_17_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_17_237_26&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Registering for jhc (nothing to do)&quot;</span></span><span class="mpre">
    </span><a href="Distribution.Compiler.html#loc_81_29_81_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_29_81_32&#39;)"><span class="hl_conref"><span class="mpre">NHC</span></span></a><span class="mpre">  -&gt; </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_237_17_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_17_237_26&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Registering for nhc98 (nothing to do)&quot;</span></span><span class="mpre">
    _    -&gt; </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Registering is not implemented for this compiler&quot;</span></span><span class="mpre">


</span><a href="#loc_257_1_257_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_1_257_25&#39;)"><span class="mpre">writeHcPkgRegisterScript</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
                         -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
                         -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre">
                         -&gt; </span><span class="hl_tyconref"><span class="mpre">PackageDBStack</span></span><span class="mpre">
                         -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_257_1_257_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_1_257_25&#39;)"><span class="hl_fundecl"><span class="mpre">writeHcPkgRegisterScript</span></span></a><span class="mpre"> </span><a name="loc_257_26_257_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_26_257_35&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_257_36_257_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_36_257_52&#39;)"><span class="hl_vardecl"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><a name="loc_257_53_257_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_53_257_58&#39;)"><span class="hl_vardecl"><span class="mpre">hcPkg</span></span></a><span class="mpre"> </span><a name="loc_257_59_257_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_59_257_69&#39;)"><span class="hl_vardecl"><span class="mpre">packageDbs</span></span></a><span class="mpre"> = do
  let </span><a name="loc_258_7_258_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_7_258_17&#39;)"><span class="hl_vardecl"><span class="mpre">invocation</span></span></a><span class="mpre">  = </span><a href="Distribution.Simple.Program.HcPkg.html#loc_296_1_296_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.HcPkg.html#loc_296_1_296_21&#39;)"><span class="hl_varref"><span class="mpre">HcPkg.reregisterInvocation</span></span></a><span class="mpre"> </span><a href="#loc_257_53_257_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_53_257_58&#39;)"><span class="hl_varref"><span class="mpre">hcPkg</span></span></a><span class="mpre"> </span><a href="Distribution.Verbosity.html#loc_67_1_67_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_67_1_67_7&#39;)"><span class="hl_varref"><span class="mpre">Verbosity.normal</span></span></a><span class="mpre">
                      </span><a href="#loc_257_59_257_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_59_257_69&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a href="#loc_257_36_257_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_36_257_52&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre">)
      </span><a name="loc_260_7_260_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_7_260_16&#39;)"><span class="hl_vardecl"><span class="mpre">regScript</span></span></a><span class="mpre">   = </span><a href="Distribution.Simple.Program.Script.html#loc_31_1_31_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Script.html#loc_31_1_31_25&#39;)"><span class="hl_varref"><span class="mpre">invocationAsSystemScript</span></span></a><span class="mpre"> </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre">   </span><a href="#loc_258_7_258_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_7_258_17&#39;)"><span class="hl_varref"><span class="mpre">invocation</span></span></a><span class="mpre">

  </span><a href="Distribution.Simple.Utils.html#loc_292_1_292_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_292_1_292_7&#39;)"><span class="hl_varref"><span class="mpre">notice</span></span></a><span class="mpre"> </span><a href="#loc_257_26_257_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_26_257_35&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;Creating package registration script: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_267_1_267_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_18&#39;)"><span class="hl_varref"><span class="mpre">regScriptFileName</span></span></a><span class="mpre">)
  </span><a href="Distribution.Simple.Utils.html#loc_1260_1_1260_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1260_1_1260_14&#39;)"><span class="hl_varref"><span class="mpre">writeUTF8File</span></span></a><span class="mpre"> </span><a href="#loc_267_1_267_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_18&#39;)"><span class="hl_varref"><span class="mpre">regScriptFileName</span></span></a><span class="mpre"> </span><a href="#loc_260_7_260_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_7_260_16&#39;)"><span class="hl_varref"><span class="mpre">regScript</span></span></a><span class="mpre">
  </span><a href="Distribution.Compat.CopyFile.html#loc_49_1_49_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.CopyFile.html#loc_49_1_49_18&#39;)"><span class="hl_varref"><span class="mpre">setFileExecutable</span></span></a><span class="mpre"> </span><a href="#loc_267_1_267_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_18&#39;)"><span class="hl_varref"><span class="mpre">regScriptFileName</span></span></a><span class="mpre">

</span><a href="#loc_267_1_267_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_18&#39;)"><span class="mpre">regScriptFileName</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
</span><a name="loc_267_1_267_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_18&#39;)"><span class="hl_vardecl"><span class="mpre">regScriptFileName</span></span></a><span class="mpre"> = case </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> of
                        </span><a href="Distribution.System.html#loc_66_19_66_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_19_66_26&#39;)"><span class="hl_conref"><span class="mpre">Windows</span></span></a><span class="mpre"> -&gt; </span><span class="hl_string"><span class="mpre">&quot;register.bat&quot;</span></span><span class="mpre">
                        _       -&gt; </span><span class="hl_string"><span class="mpre">&quot;register.sh&quot;</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Making the InstalledPackageInfo</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct &#39;InstalledPackageInfo&#39; for a library in a package, given a set</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of installation directories.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_286_1_286_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_1_286_28&#39;)"><span class="mpre">generalInstalledPackageInfo</span></a><span class="mpre">
  :: ([</span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">] -&gt; [</span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">]) </span><span class="hl_comment"><span class="mpre">-- ^ Translate relative include dir paths to</span></span><span class="mpre">
                                </span><span class="hl_comment"><span class="mpre">-- absolute paths.</span></span><span class="mpre">
  -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
  -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">
  -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre">
  -&gt; </span><a href="Distribution.Simple.InstallDirs.html#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
</span><a name="loc_286_1_286_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_1_286_28&#39;)"><span class="hl_fundecl"><span class="mpre">generalInstalledPackageInfo</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">adjustRelIncDirs</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">pkg</span></span><span class="mpre"> </span><a name="loc_286_50_286_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_50_286_53&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">clbi</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">installDirs</span></span><span class="mpre"> =
  </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 287, srcSpanStartColumn = 3, srcSpanEndLine = 326, srcSpanEndColumn = 4}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 287, srcSpanStartColumn = 24, srcSpanEndLine = 287, srcSpanEndColumn = 25},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/"><span class="mpre">InstalledPackageInfo {
    </span><span class="hl_comment"><span class="mpre">--TODO: do not open-code this conversion from PackageId to InstalledPackageId</span></span><span class="mpre">
    IPI.installedPackageId = InstalledPackageId (display (packageId pkg)),
    IPI.sourcePackageId    = packageId   pkg,
    IPI.license            = license     pkg,
    IPI.copyright          = copyright   pkg,
    IPI.maintainer         = maintainer  pkg,
    IPI.author             = author      pkg,
    IPI.stability          = stability   pkg,
    IPI.homepage           = homepage    pkg,
    IPI.pkgUrl             = pkgUrl      pkg,
    IPI.synopsis           = synopsis    pkg,
    IPI.description        = description pkg,
    IPI.category           = category    pkg,
    IPI.exposed            = libExposed  lib,
    IPI.exposedModules     = exposedModules lib,
    IPI.hiddenModules      = otherModules bi,
    IPI.trusted            = IPI.trusted IPI.emptyInstalledPackageInfo,
    IPI.importDirs         = [ libdir installDirs | hasModules ],
    IPI.libraryDirs        = if hasLibrary
                               then libdir installDirs : extraLibDirs bi
                               else                      extraLibDirs bi,
    IPI.hsLibraries        = [ libname
                             | LibraryName libname &lt;- componentLibraries clbi
                             , hasLibrary ],
    IPI.extraLibraries     = extraLibs bi,
    IPI.extraGHCiLibraries = [],
    IPI.includeDirs        = absinc ++ adjustRelIncDirs relinc,
    IPI.includes           = includes bi,
    IPI.depends            = map fst (componentPackageDeps clbi),
    IPI.hugsOptions        = hcOptions Hugs bi,
    IPI.ccOptions          = [], </span><span class="hl_comment"><span class="mpre">-- Note. NOT ccOptions bi!</span></span><span class="mpre">
                                 </span><span class="hl_comment"><span class="mpre">-- We don&#39;t want cc-options to be propagated</span></span><span class="mpre">
                                 </span><span class="hl_comment"><span class="mpre">-- to C compilations in other packages.</span></span><span class="mpre">
    IPI.ldOptions          = ldOptions bi,
    IPI.frameworkDirs      = [],
    IPI.frameworks         = frameworks bi,
    IPI.haddockInterfaces  = [haddockdir installDirs &lt;/&gt; haddockName pkg],
    IPI.haddockHTMLs       = [htmldir installDirs]
  }</span></span><span class="mpre">
  where
    </span><a name="loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_vardecl"><span class="mpre">bi</span></span></a><span class="mpre"> = </span><a href="Distribution.PackageDescription.html#loc_302_9_302_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_302_9_302_21&#39;)"><span class="hl_varref"><span class="mpre">libBuildInfo</span></span></a><span class="mpre"> </span><a href="#loc_286_50_286_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_50_286_53&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">
    (</span><span class="hl_vardecl"><span class="mpre">absinc</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">relinc</span></span><span class="mpre">) = </span><a href="Data.List.html#loc_464_1_464_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_464_1_464_10&#39;)"><span class="hl_varref"><span class="mpre">partition</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">isAbsolute</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_656_9_656_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_656_9_656_20&#39;)"><span class="hl_varref"><span class="mpre">includeDirs</span></span></a><span class="mpre"> </span><a href="#loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_varref"><span class="mpre">bi</span></span></a><span class="mpre">)
    </span><a name="loc_330_5_330_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_5_330_15&#39;)"><span class="hl_vardecl"><span class="mpre">hasModules</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_300_9_300_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_300_9_300_23&#39;)"><span class="hl_varref"><span class="mpre">exposedModules</span></span></a><span class="mpre"> </span><a href="#loc_286_50_286_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_50_286_53&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">)
                    </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_646_9_646_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_646_9_646_21&#39;)"><span class="hl_varref"><span class="mpre">otherModules</span></span></a><span class="mpre"> </span><a href="#loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_varref"><span class="mpre">bi</span></span></a><span class="mpre">)
    </span><span class="hl_vardecl"><span class="mpre">hasLibrary</span></span><span class="mpre"> = </span><a href="#loc_330_5_330_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_5_330_15&#39;)"><span class="hl_varref"><span class="mpre">hasModules</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_644_9_644_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_644_9_644_17&#39;)"><span class="hl_varref"><span class="mpre">cSources</span></span></a><span class="mpre"> </span><a href="#loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_varref"><span class="mpre">bi</span></span></a><span class="mpre">))


</span><span class="hl_comment"><span class="mpre">-- | Construct &#39;InstalledPackageInfo&#39; for a library that is inplace in the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- build tree.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function knows about the layout of inplace packages.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_347_1_347_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_1_347_28&#39;)"><span class="mpre">inplaceInstalledPackageInfo</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ top of the build tree</span></span><span class="mpre">
                            -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ location of the dist tree</span></span><span class="mpre">
                            -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
                            -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">
                            -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                            -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre">
                            -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
</span><a name="loc_347_1_347_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_1_347_28&#39;)"><span class="hl_fundecl"><span class="mpre">inplaceInstalledPackageInfo</span></span></a><span class="mpre"> </span><a name="loc_347_29_347_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_29_347_39&#39;)"><span class="hl_vardecl"><span class="mpre">inplaceDir</span></span></a><span class="mpre"> </span><a name="loc_347_40_347_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_40_347_48&#39;)"><span class="hl_vardecl"><span class="mpre">distPref</span></span></a><span class="mpre"> </span><a name="loc_347_49_347_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_49_347_52&#39;)"><span class="hl_vardecl"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a name="loc_347_53_347_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_53_347_56&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">lbi</span></span><span class="mpre"> </span><a name="loc_347_61_347_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_61_347_65&#39;)"><span class="hl_vardecl"><span class="mpre">clbi</span></span></a><span class="mpre"> =
    </span><a href="#loc_286_1_286_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_1_286_28&#39;)"><span class="hl_varref"><span class="mpre">generalInstalledPackageInfo</span></span></a><span class="mpre"> </span><a href="#loc_351_5_351_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_351_5_351_30&#39;)"><span class="hl_varref"><span class="mpre">adjustRelativeIncludeDirs</span></span></a><span class="mpre"> </span><a href="#loc_347_49_347_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_49_347_52&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_347_53_347_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_53_347_56&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a href="#loc_347_61_347_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_61_347_65&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre">
    </span><a href="#loc_352_5_352_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_352_5_352_16&#39;)"><span class="hl_varref"><span class="mpre">installDirs</span></span></a><span class="mpre">
  where
    </span><a name="loc_351_5_351_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_351_5_351_30&#39;)"><span class="hl_vardecl"><span class="mpre">adjustRelativeIncludeDirs</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="#loc_347_29_347_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_29_347_39&#39;)"><span class="hl_varref"><span class="mpre">inplaceDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre">)
    </span><a name="loc_352_5_352_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_352_5_352_16&#39;)"><span class="hl_vardecl"><span class="mpre">installDirs</span></span></a><span class="mpre"> =
      </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 353, srcSpanStartColumn = 7, srcSpanEndLine = 360, srcSpanEndColumn = 8}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Register.hs&quot;, srcSpanStartLine = 353, srcSpanStartColumn = 48, srcSpanEndLine = 353, srcSpanEndColumn = 49},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/"><span class="mpre">(absoluteInstallDirs pkg lbi NoCopyDest) {
        libdir     = inplaceDir &lt;/&gt; buildDir lbi,
        datadir    = inplaceDir,
        datasubdir = distPref,
        docdir     = inplaceDocdir,
        htmldir    = inplaceHtmldir,
        haddockdir = inplaceHtmldir
      }</span></span><span class="mpre">
    </span><a name="loc_361_5_361_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_5_361_18&#39;)"><span class="hl_vardecl"><span class="mpre">inplaceDocdir</span></span></a><span class="mpre">  = </span><a href="#loc_347_29_347_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_29_347_39&#39;)"><span class="hl_varref"><span class="mpre">inplaceDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_347_40_347_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_40_347_48&#39;)"><span class="hl_varref"><span class="mpre">distPref</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;doc&quot;</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">inplaceHtmldir</span></span><span class="mpre"> = </span><a href="#loc_361_5_361_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_5_361_18&#39;)"><span class="hl_varref"><span class="mpre">inplaceDocdir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;html&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> (</span><a href="Distribution.Package.html#loc_187_1_187_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_187_1_187_12&#39;)"><span class="hl_varref"><span class="mpre">packageName</span></span></a><span class="mpre"> </span><a href="#loc_347_49_347_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_347_49_347_52&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- | Construct &#39;InstalledPackageInfo&#39; for the final install location of a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- library package.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function knows about the layout of installed packages.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_375_1_375_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_1_375_29&#39;)"><span class="mpre">absoluteInstalledPackageInfo</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
                             -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">
                             -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                             -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre">
                             -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
</span><a name="loc_375_1_375_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_1_375_29&#39;)"><span class="hl_fundecl"><span class="mpre">absoluteInstalledPackageInfo</span></span></a><span class="mpre"> </span><a name="loc_375_30_375_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_30_375_33&#39;)"><span class="hl_vardecl"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a name="loc_375_34_375_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_34_375_37&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a name="loc_375_38_375_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_38_375_41&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_375_42_375_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_42_375_46&#39;)"><span class="hl_vardecl"><span class="mpre">clbi</span></span></a><span class="mpre"> =
    </span><a href="#loc_286_1_286_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_1_286_28&#39;)"><span class="hl_varref"><span class="mpre">generalInstalledPackageInfo</span></span></a><span class="mpre"> </span><a href="#loc_380_5_380_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_5_380_29&#39;)"><span class="hl_varref"><span class="mpre">adjustReativeIncludeDirs</span></span></a><span class="mpre"> </span><a href="#loc_375_30_375_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_30_375_33&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_375_34_375_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_34_375_37&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a href="#loc_375_42_375_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_42_375_46&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre"> </span><a href="#loc_384_5_384_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_384_5_384_16&#39;)"><span class="hl_varref"><span class="mpre">installDirs</span></span></a><span class="mpre">
  where
    </span><span class="hl_comment"><span class="mpre">-- For installed packages we install all include files into one dir,</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- whereas in the build tree they may live in multiple local dirs.</span></span><span class="mpre">
    </span><a name="loc_380_5_380_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_5_380_29&#39;)"><span class="hl_fundecl"><span class="mpre">adjustReativeIncludeDirs</span></span></a><span class="mpre"> _
      | </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_658_9_658_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_658_9_658_24&#39;)"><span class="hl_varref"><span class="mpre">installIncludes</span></span></a><span class="mpre"> </span><a href="#loc_383_5_383_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_5_383_7&#39;)"><span class="hl_varref"><span class="mpre">bi</span></span></a><span class="mpre">) = []
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                 = [</span><a href="Distribution.Simple.InstallDirs.html#loc_113_9_113_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_113_9_113_19&#39;)"><span class="hl_varref"><span class="mpre">includedir</span></span></a><span class="mpre"> </span><a href="#loc_384_5_384_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_384_5_384_16&#39;)"><span class="hl_varref"><span class="mpre">installDirs</span></span></a><span class="mpre">]
    </span><a name="loc_383_5_383_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_5_383_7&#39;)"><span class="hl_vardecl"><span class="mpre">bi</span></span></a><span class="mpre"> = </span><a href="Distribution.PackageDescription.html#loc_302_9_302_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_302_9_302_21&#39;)"><span class="hl_varref"><span class="mpre">libBuildInfo</span></span></a><span class="mpre"> </span><a href="#loc_375_34_375_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_34_375_37&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">
    </span><a name="loc_384_5_384_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_384_5_384_16&#39;)"><span class="hl_vardecl"><span class="mpre">installDirs</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20&#39;)"><span class="hl_varref"><span class="mpre">absoluteInstallDirs</span></span></a><span class="mpre"> </span><a href="#loc_375_30_375_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_30_375_33&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_375_38_375_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_38_375_41&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">NoCopyDest</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Unregistration</span></span><span class="mpre">

</span><a href="#loc_390_1_390_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_1_390_11&#39;)"><span class="mpre">unregister</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Setup.html#loc_902_6_902_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_902_6_902_19&#39;)"><span class="hl_tyconref"><span class="mpre">RegisterFlags</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_390_1_390_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_1_390_11&#39;)"><span class="hl_fundecl"><span class="mpre">unregister</span></span></a><span class="mpre"> </span><a name="loc_390_12_390_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_12_390_15&#39;)"><span class="hl_vardecl"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a name="loc_390_16_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_16_390_19&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_390_20_390_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_20_390_28&#39;)"><span class="hl_vardecl"><span class="mpre">regFlags</span></span></a><span class="mpre"> = do
  let </span><a name="loc_391_7_391_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_7_391_12&#39;)"><span class="hl_vardecl"><span class="mpre">pkgid</span></span></a><span class="mpre">     = </span><a href="Distribution.Package.html#loc_184_3_184_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_184_3_184_12&#39;)"><span class="hl_varref"><span class="mpre">packageId</span></span></a><span class="mpre"> </span><a href="#loc_390_12_390_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_12_390_15&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre">
      </span><a name="loc_392_7_392_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_7_392_16&#39;)"><span class="hl_vardecl"><span class="mpre">genScript</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_904_5_904_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_904_5_904_17&#39;)"><span class="hl_varref"><span class="mpre">regGenScript</span></span></a><span class="mpre"> </span><a href="#loc_390_20_390_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_20_390_28&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">)
      </span><a name="loc_393_7_393_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_7_393_16&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Setup.html#loc_908_5_908_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_908_5_908_17&#39;)"><span class="hl_varref"><span class="mpre">regVerbosity</span></span></a><span class="mpre"> </span><a href="#loc_390_20_390_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_20_390_28&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">)
      </span><a name="loc_394_7_394_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_7_394_16&#39;)"><span class="hl_vardecl"><span class="mpre">packageDb</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Setup.html#loc_189_1_189_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_189_1_189_18&#39;)"><span class="hl_varref"><span class="mpre">fromFlagOrDefault</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Compiler.html#loc_139_1_139_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_139_1_139_22&#39;)"><span class="hl_varref"><span class="mpre">registrationPackageDB</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_148_9_148_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_148_9_148_22&#39;)"><span class="hl_varref"><span class="mpre">withPackageDB</span></span></a><span class="mpre"> </span><a href="#loc_390_16_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_16_390_19&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">))
                                    (</span><a href="Distribution.Simple.Setup.html#loc_903_5_903_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_903_5_903_17&#39;)"><span class="hl_varref"><span class="mpre">regPackageDB</span></span></a><span class="mpre"> </span><a href="#loc_390_20_390_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_20_390_28&#39;)"><span class="hl_varref"><span class="mpre">regFlags</span></span></a><span class="mpre">)
      </span><a name="loc_396_7_396_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_396_7_396_18&#39;)"><span class="hl_vardecl"><span class="mpre">installDirs</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20&#39;)"><span class="hl_varref"><span class="mpre">absoluteInstallDirs</span></span></a><span class="mpre"> </span><a href="#loc_390_12_390_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_12_390_15&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre"> </span><a href="#loc_390_16_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_16_390_19&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">NoCopyDest</span></span><span class="mpre">
  </span><a href="Distribution.Simple.Utils.html#loc_297_1_297_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_297_1_297_13&#39;)"><span class="hl_varref"><span class="mpre">setupMessage</span></span></a><span class="mpre"> </span><a href="#loc_393_7_393_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_7_393_16&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Unregistering&quot;</span></span><span class="mpre"> </span><a href="#loc_391_7_391_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_7_391_12&#39;)"><span class="hl_varref"><span class="mpre">pkgid</span></span></a><span class="mpre">
  case </span><a href="Distribution.Simple.Compiler.html#loc_96_1_96_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_96_1_96_15&#39;)"><span class="hl_varref"><span class="mpre">compilerFlavor</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_390_16_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_16_390_19&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) of
    </span><a href="Distribution.Compiler.html#loc_81_23_81_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_23_81_26&#39;)"><span class="hl_conref"><span class="mpre">GHC</span></span></a><span class="mpre"> -&gt;
      let </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_400_16_400_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_400_16_400_22&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_390_16_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_16_390_19&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
          </span><a name="loc_401_11_401_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_11_401_21&#39;)"><span class="hl_vardecl"><span class="mpre">invocation</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.HcPkg.html#loc_328_1_328_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.HcPkg.html#loc_328_1_328_21&#39;)"><span class="hl_varref"><span class="mpre">HcPkg.unregisterInvocation</span></span></a><span class="mpre"> </span><a href="#loc_400_16_400_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_400_16_400_22&#39;)"><span class="hl_varref"><span class="mpre">ghcPkg</span></span></a><span class="mpre"> </span><a href="Distribution.Verbosity.html#loc_67_1_67_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_67_1_67_7&#39;)"><span class="hl_varref"><span class="mpre">Verbosity.normal</span></span></a><span class="mpre">
                         </span><a href="#loc_394_7_394_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_7_394_16&#39;)"><span class="hl_varref"><span class="mpre">packageDb</span></span></a><span class="mpre"> </span><a href="#loc_391_7_391_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_7_391_12&#39;)"><span class="hl_varref"><span class="mpre">pkgid</span></span></a><span class="mpre">
      in if </span><a href="#loc_392_7_392_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_7_392_16&#39;)"><span class="hl_varref"><span class="mpre">genScript</span></span></a><span class="mpre">
           then </span><a href="Distribution.Simple.Utils.html#loc_1071_1_1071_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1071_1_1071_16&#39;)"><span class="hl_varref"><span class="mpre">writeFileAtomic</span></span></a><span class="mpre"> </span><a href="#loc_417_1_417_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_20&#39;)"><span class="hl_varref"><span class="mpre">unregScriptFileName</span></span></a><span class="mpre">
                  (</span><span class="hl_varref"><span class="mpre">BS.Char8.pack</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Script.html#loc_31_1_31_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Script.html#loc_31_1_31_25&#39;)"><span class="hl_varref"><span class="mpre">invocationAsSystemScript</span></span></a><span class="mpre"> </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> </span><a href="#loc_401_11_401_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_11_401_21&#39;)"><span class="hl_varref"><span class="mpre">invocation</span></span></a><span class="mpre">)
            else </span><a href="Distribution.Simple.Program.Run.html#loc_95_1_95_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Run.html#loc_95_1_95_21&#39;)"><span class="hl_varref"><span class="mpre">runProgramInvocation</span></span></a><span class="mpre"> </span><a href="#loc_393_7_393_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_7_393_16&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_401_11_401_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_11_401_21&#39;)"><span class="hl_varref"><span class="mpre">invocation</span></span></a><span class="mpre">
    </span><a href="Distribution.Compiler.html#loc_81_41_81_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_41_81_45&#39;)"><span class="hl_conref"><span class="mpre">Hugs</span></span></a><span class="mpre"> -&gt; do
        _ &lt;- </span><a href="Distribution.Compat.Exception.html#loc_11_1_11_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_11_1_11_6&#39;)"><span class="hl_varref"><span class="mpre">tryIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="System.Directory.html#loc_351_1_351_25" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_351_1_351_25&#39;)"><span class="hl_varref"><span class="mpre">removeDirectoryRecursive</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.InstallDirs.html#loc_108_9_108_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_108_9_108_15&#39;)"><span class="hl_varref"><span class="mpre">libdir</span></span></a><span class="mpre"> </span><a href="#loc_396_7_396_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_396_7_396_18&#39;)"><span class="hl_varref"><span class="mpre">installDirs</span></span></a><span class="mpre">)
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
    </span><a href="Distribution.Compiler.html#loc_81_29_81_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_29_81_32&#39;)"><span class="hl_conref"><span class="mpre">NHC</span></span></a><span class="mpre"> -&gt; do
        _ &lt;- </span><a href="Distribution.Compat.Exception.html#loc_11_1_11_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_11_1_11_6&#39;)"><span class="hl_varref"><span class="mpre">tryIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="System.Directory.html#loc_351_1_351_25" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_351_1_351_25&#39;)"><span class="hl_varref"><span class="mpre">removeDirectoryRecursive</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.InstallDirs.html#loc_108_9_108_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_108_9_108_15&#39;)"><span class="hl_varref"><span class="mpre">libdir</span></span></a><span class="mpre"> </span><a href="#loc_396_7_396_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_396_7_396_18&#39;)"><span class="hl_varref"><span class="mpre">installDirs</span></span></a><span class="mpre">)
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
    _ -&gt;
        </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;only unregistering with GHC and Hugs is implemented&quot;</span></span><span class="mpre">)

</span><a href="#loc_417_1_417_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_20&#39;)"><span class="mpre">unregScriptFileName</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
</span><a name="loc_417_1_417_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_20&#39;)"><span class="hl_vardecl"><span class="mpre">unregScriptFileName</span></span></a><span class="mpre"> = case </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> of
                          </span><a href="Distribution.System.html#loc_66_19_66_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_19_66_26&#39;)"><span class="hl_conref"><span class="mpre">Windows</span></span></a><span class="mpre"> -&gt; </span><span class="hl_string"><span class="mpre">&quot;unregister.bat&quot;</span></span><span class="mpre">
                          _       -&gt; </span><span class="hl_string"><span class="mpre">&quot;unregister.sh&quot;</span></span><span class="mpre">
</span></div></body></html>