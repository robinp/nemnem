<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# OPTIONS_HADDOCK not-home #-}
{-# LANGUAGE RankNTypes #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE DeriveDataTypeable #-}
{-# LANGUAGE FlexibleContexts #-}
module Data.Acquire.Internal
    ( Acquire (..)
    , Allocated (..)
    , with
    , mkAcquire
    , ReleaseType (..)
    , mkAcquireType
    ) where

import Control.Applicative (</span><a href="Control.Applicative.html#loc_113_20_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_113_20_113_31&#39;)"><span class="mpre">Applicative</span></a><span class="mpre"> (..))
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.hs&quot;, srcSpanStartLine = 16, srcSpanStartColumn = 8, srcSpanEndLine = 16, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;Control.Monad.Base&quot;"><span class="mpre">Control.Monad.Base</span></span><span class="mpre"> (MonadBase (..))
import Control.Monad.IO.Class (</span><a href="Control.Monad.IO.Class.html#loc_30_20_30_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_30_20_30_27&#39;)"><span class="mpre">MonadIO</span></a><span class="mpre"> (..))
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.hs&quot;, srcSpanStartLine = 18, srcSpanStartColumn = 8, srcSpanEndLine = 18, srcSpanEndColumn = 35}, srcInfoPoints = []}) &quot;Control.Monad.Trans.Control&quot;"><span class="mpre">Control.Monad.Trans.Control</span></span><span class="mpre"> (MonadBaseControl, control)
import qualified Control.Exception.Lifted as E
import Data.Typeable (</span><a href="Data.Typeable.Internal.html#loc_196_7_196_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_196_7_196_15&#39;)"><span class="mpre">Typeable</span></a><span class="mpre">)
import Control.Monad (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="mpre">liftM</span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_312_1_312_3" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_312_1_312_3&#39;)"><span class="mpre">ap</span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | The way in which a release is called.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 1.1.2</span></span><span class="mpre">
data </span><a name="loc_26_6_26_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_6_26_17&#39;)"><span class="hl_tycondecl"><span class="mpre">ReleaseType</span></span></a><span class="mpre"> = </span><a name="loc_26_20_26_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_20_26_32&#39;)"><span class="hl_condecl"><span class="mpre">ReleaseEarly</span></span></a><span class="mpre">
                 | </span><a name="loc_27_20_27_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_20_27_33&#39;)"><span class="hl_condecl"><span class="mpre">ReleaseNormal</span></span></a><span class="mpre">
                 | </span><a name="loc_28_20_28_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_20_28_36&#39;)"><span class="hl_condecl"><span class="mpre">ReleaseException</span></span></a><span class="mpre">
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.hs&quot;, srcSpanStartLine = 29, srcSpanStartColumn = 5, srcSpanEndLine = 29, srcSpanEndColumn = 60}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.hs&quot;, srcSpanStartLine = 29, srcSpanStartColumn = 5, srcSpanEndLine = 29, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.h"><span class="mpre">deriving (Show, Read, Eq, Ord, Enum, Bounded, Typeable)</span></span><span class="mpre">

data </span><a name="loc_31_6_31_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_6_31_15&#39;)"><span class="hl_tycondecl"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_condecl"><span class="mpre">Allocated</span></span></a><span class="mpre"> !</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> !(</span><a href="#loc_26_6_26_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_6_26_17&#39;)"><span class="hl_tyconref"><span class="mpre">ReleaseType</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | A method for acquiring a scarce resource, providing the means of freeing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it when no longer needed. This data type provides</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @Functor@/@Applicative@/@Monad@ instances for composing different resources</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- together. You can allocate these resources using either the @bracket@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- pattern (via @with@) or using @ResourceT@ (via @allocateAcquire@).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This concept was originally introduced by Gabriel Gonzalez and described at:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://www.haskellforall.com/2013/06/the-resource-applicative.html&gt;. The</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- implementation in this package is slightly different, due to taking a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- different approach to async exception safety.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 1.1.0</span></span><span class="mpre">
newtype </span><a name="loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tycondecl"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_condecl"><span class="mpre">Acquire</span></span></a><span class="mpre"> ((forall </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">. </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="#loc_31_6_31_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_6_31_15&#39;)"><span class="hl_tyconref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">))
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 5, srcSpanEndLine = 46, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 5, srcSpanEndLine = 46, srcSpanEndColumn = 13}]}) [IHead (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/res"><span class="mpre">deriving Typeable</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> </span><a href="#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> where
    </span><span class="hl_vardecl"><span class="mpre">fmap</span></span><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre">
instance </span><a href="Control.Applicative.html#loc_113_20_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_113_20_113_31&#39;)"><span class="hl_classref"><span class="mpre">Applicative</span></span></a><span class="mpre"> </span><a href="#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> where
    </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_vardecl"><span class="mpre">pure</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">
    </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_vardecl"><span class="mpre">(&lt;*&gt;)</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_312_1_312_3" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_312_1_312_3&#39;)"><span class="hl_varref"><span class="mpre">ap</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Monad</span></span><span class="mpre"> </span><a href="#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">return</span></span><span class="mpre"> </span><a name="loc_55_12_55_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_12_55_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> (\_ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a href="#loc_55_12_55_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_12_55_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)))
    </span><a href="#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><a name="loc_56_13_56_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_13_56_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_fundecl"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a name="loc_56_19_56_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_19_56_21&#39;)"><span class="hl_vardecl"><span class="mpre">g&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_56_35_56_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_35_56_42&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
        </span><a href="#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a name="loc_57_19_57_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_19_57_20&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_57_21_57_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_21_57_26&#39;)"><span class="hl_vardecl"><span class="mpre">free1</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_56_13_56_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_13_56_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_56_35_56_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_35_56_42&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre">
        let </span><a href="#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><a name="loc_58_21_58_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_21_58_22&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><a href="#loc_56_19_56_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_19_56_21&#39;)"><span class="hl_varref"><span class="mpre">g&#39;</span></span></a><span class="mpre"> </span><a href="#loc_57_19_57_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_19_57_20&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
        </span><a href="#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a name="loc_59_19_59_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_19_59_20&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre"> </span><a name="loc_59_21_59_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_21_59_26&#39;)"><span class="hl_vardecl"><span class="mpre">free2</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_58_21_58_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_21_58_22&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_56_35_56_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_35_56_42&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> </span><a href="Control.Exception.Lifted.html#loc_437_1_437_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Lifted.html#loc_437_1_437_12&#39;)"><span class="hl_infix"><span class="mpre">`E.onException`</span></span></a><span class="mpre"> </span><a href="#loc_57_21_57_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_21_57_26&#39;)"><span class="hl_varref"><span class="mpre">free1</span></span></a><span class="mpre"> </span><a href="#loc_28_20_28_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_20_28_36&#39;)"><span class="hl_conref"><span class="mpre">ReleaseException</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a href="#loc_59_19_59_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_19_59_20&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre"> (\</span><a name="loc_60_33_60_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_33_60_35&#39;)"><span class="hl_vardecl"><span class="mpre">rt</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_59_21_59_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_21_59_26&#39;)"><span class="hl_varref"><span class="mpre">free2</span></span></a><span class="mpre"> </span><a href="#loc_60_33_60_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_33_60_35&#39;)"><span class="hl_varref"><span class="mpre">rt</span></span></a><span class="mpre"> </span><a href="Control.Exception.Lifted.html#loc_427_1_427_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Lifted.html#loc_427_1_427_8&#39;)"><span class="hl_infix"><span class="mpre">`E.finally`</span></span></a><span class="mpre"> </span><a href="#loc_57_21_57_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_21_57_26&#39;)"><span class="hl_varref"><span class="mpre">free1</span></span></a><span class="mpre"> </span><a href="#loc_60_33_60_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_33_60_35&#39;)"><span class="hl_varref"><span class="mpre">rt</span></span></a><span class="mpre">)

instance </span><a href="Control.Monad.IO.Class.html#loc_30_20_30_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_30_20_30_27&#39;)"><span class="hl_classref"><span class="mpre">MonadIO</span></span></a><span class="mpre"> </span><a href="#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> where
    </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_fundecl"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><a name="loc_63_12_63_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_12_63_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_63_27_63_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_27_63_34&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
        </span><a name="loc_64_9_64_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_9_64_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_63_27_63_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_27_63_34&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> </span><a href="#loc_63_12_63_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_12_63_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a href="#loc_64_9_64_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_9_64_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)

instance </span><span class="hl_classref"><span class="mpre">MonadBase</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> where
    </span><span class="hl_vardecl"><span class="mpre">liftBase</span></span><span class="mpre"> = </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Create an @Acquire@ value using the given allocate and free functions.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 1.1.0</span></span><span class="mpre">
</span><a href="#loc_76_1_76_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_10&#39;)"><span class="mpre">mkAcquire</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ acquire the resource</span></span><span class="mpre">
          -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) </span><span class="hl_comment"><span class="mpre">-- ^ free the resource</span></span><span class="mpre">
          -&gt; </span><a href="#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_76_1_76_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_10&#39;)"><span class="hl_fundecl"><span class="mpre">mkAcquire</span></span></a><span class="mpre"> </span><a name="loc_76_11_76_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_11_76_17&#39;)"><span class="hl_vardecl"><span class="mpre">create</span></span></a><span class="mpre"> </span><a name="loc_76_18_76_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_18_76_22&#39;)"><span class="hl_vardecl"><span class="mpre">free</span></span></a><span class="mpre"> = </span><a href="#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_76_36_76_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_36_76_43&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
    </span><a name="loc_77_5_77_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_5_77_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_76_36_76_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_36_76_43&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> </span><a href="#loc_76_11_76_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_11_76_17&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a href="#loc_77_5_77_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_5_77_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_76_18_76_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_18_76_22&#39;)"><span class="hl_varref"><span class="mpre">free</span></span></a><span class="mpre"> </span><a href="#loc_77_5_77_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_5_77_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Same as &#39;mkAcquire&#39;, but the cleanup function will be informed of /how/</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- cleanup was initiated. This allows you to distinguish, for example, between</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- normal and exceptional exits.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 1.1.2</span></span><span class="mpre">
</span><a href="#loc_89_1_89_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_1_89_14&#39;)"><span class="mpre">mkAcquireType</span></a><span class="mpre">
    :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ acquire the resource</span></span><span class="mpre">
    -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_26_6_26_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_6_26_17&#39;)"><span class="hl_tyconref"><span class="mpre">ReleaseType</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) </span><span class="hl_comment"><span class="mpre">-- ^ free the resource</span></span><span class="mpre">
    -&gt; </span><a href="#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_89_1_89_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_1_89_14&#39;)"><span class="hl_fundecl"><span class="mpre">mkAcquireType</span></span></a><span class="mpre"> </span><a name="loc_89_15_89_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_15_89_21&#39;)"><span class="hl_vardecl"><span class="mpre">create</span></span></a><span class="mpre"> </span><a name="loc_89_22_89_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_22_89_26&#39;)"><span class="hl_vardecl"><span class="mpre">free</span></span></a><span class="mpre"> = </span><a href="#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_89_40_89_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_40_89_47&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
    </span><a name="loc_90_5_90_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_5_90_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_89_40_89_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_40_89_47&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> </span><a href="#loc_89_15_89_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_15_89_21&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a href="#loc_90_5_90_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_5_90_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> (</span><a href="#loc_89_22_89_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_22_89_26&#39;)"><span class="hl_varref"><span class="mpre">free</span></span></a><span class="mpre"> </span><a href="#loc_90_5_90_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_5_90_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Allocate the given resource and provide it to the provided function. The</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- resource will be freed as soon as the inner block is exited, whether</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- normally or via an exception. This function is similar in function to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @bracket@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 1.1.0</span></span><span class="mpre">
</span><a href="#loc_103_1_103_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_1_103_5&#39;)"><span class="mpre">with</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.hs&quot;, srcSpanStartLine = 99, srcSpanStartColumn = 9, srcSpanEndLine = 100, srcSpanEndColumn = 8}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire/Internal.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 6, srcSpanEndLine = 100, srcSpanEndColumn = 8}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/r"><span class="mpre">MonadBaseControl IO m
     =&gt;</span></span><span class="mpre"> </span><a href="#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
     -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)
     -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_103_1_103_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_1_103_5&#39;)"><span class="hl_fundecl"><span class="mpre">with</span></span></a><span class="mpre"> (</span><a href="#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><a name="loc_103_15_103_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_15_103_16&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">) </span><a name="loc_103_18_103_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_18_103_19&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">control</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_103_33_103_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_33_103_36&#39;)"><span class="hl_vardecl"><span class="mpre">run</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Exception.Lifted.html#loc_268_1_268_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Lifted.html#loc_268_1_268_5&#39;)"><span class="hl_varref"><span class="mpre">E.mask</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_103_50_103_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_50_103_57&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
    </span><a href="#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a name="loc_104_15_104_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_15_104_16&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_104_17_104_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_17_104_21&#39;)"><span class="hl_vardecl"><span class="mpre">free</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_103_15_103_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_15_103_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_103_50_103_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_50_103_57&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre">
    </span><a name="loc_105_5_105_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_5_105_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_103_33_103_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_33_103_36&#39;)"><span class="hl_varref"><span class="mpre">run</span></span></a><span class="mpre"> (</span><a href="#loc_103_18_103_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_18_103_19&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_104_15_104_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_15_104_16&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) </span><a href="Control.Exception.Lifted.html#loc_437_1_437_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Lifted.html#loc_437_1_437_12&#39;)"><span class="hl_infix"><span class="mpre">`E.onException`</span></span></a><span class="mpre"> </span><a href="#loc_104_17_104_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_17_104_21&#39;)"><span class="hl_varref"><span class="mpre">free</span></span></a><span class="mpre"> </span><a href="#loc_28_20_28_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_20_28_36&#39;)"><span class="hl_conref"><span class="mpre">ReleaseException</span></span></a><span class="mpre">
    </span><a href="#loc_104_17_104_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_17_104_21&#39;)"><span class="hl_varref"><span class="mpre">free</span></span></a><span class="mpre"> </span><a href="#loc_27_20_27_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_20_27_33&#39;)"><span class="hl_conref"><span class="mpre">ReleaseNormal</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_105_5_105_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_5_105_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
</span></div></body></html>