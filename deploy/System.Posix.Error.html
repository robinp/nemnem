<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
#ifdef __GLASGOW_HASKELL__
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  System.Posix.Error</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (c) The University of Glasgow 2002</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file libraries/base/LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  libraries@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable (requires POSIX)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- POSIX error support</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">

module System.Posix.Error (
        throwErrnoPath,
        throwErrnoPathIf, 
        throwErrnoPathIf_,
        throwErrnoPathIfRetry,
        throwErrnoPathIfNull,
        throwErrnoPathIfNullRetry,
        throwErrnoPathIfMinus1,
        throwErrnoPathIfMinus1_,
        throwErrnoPathIfMinus1Retry,
        throwErrnoPathIfMinus1Retry_
  ) where

import Foreign hiding (void)
import Foreign.C
import Control.Monad

</span><a href="#loc_38_1_38_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_28&#39;)"><span class="mpre">throwErrnoPathIfMinus1Retry</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Error.hs&quot;, srcSpanStartLine = 36, srcSpanStartColumn = 32, srcSpanEndLine = 37, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Error.hs&quot;, srcSpanStartLine = 36, srcSpanStartColumn = 32, srcSpanEndLine = 36, srcSpanEndColumn = 33},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Error.hs&quot;, srcSpanStartLine = "><span class="mpre">(Eq a, Num a)
                            =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_38_1_38_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_28&#39;)"><span class="hl_fundecl"><span class="mpre">throwErrnoPathIfMinus1Retry</span></span></a><span class="mpre"> </span><a name="loc_38_29_38_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_29_38_32&#39;)"><span class="hl_vardecl"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a name="loc_38_33_38_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_33_38_37&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> </span><a name="loc_38_38_38_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_38_38_39&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> =
  </span><a href="#loc_51_1_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_1_51_22&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoPathIfRetry</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> -</span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_38_29_38_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_29_38_32&#39;)"><span class="hl_varref"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a href="#loc_38_33_38_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_33_38_37&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><a href="#loc_38_38_38_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_38_38_39&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">

</span><a href="#loc_43_1_43_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_1_43_29&#39;)"><span class="mpre">throwErrnoPathIfMinus1Retry_</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Error.hs&quot;, srcSpanStartLine = 41, srcSpanStartColumn = 33, srcSpanEndLine = 42, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Error.hs&quot;, srcSpanStartLine = 41, srcSpanStartColumn = 33, srcSpanEndLine = 41, srcSpanEndColumn = 34},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Error.hs&quot;, srcSpanStartLine = "><span class="mpre">(Eq a, Num a)
                             =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_43_1_43_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_1_43_29&#39;)"><span class="hl_fundecl"><span class="mpre">throwErrnoPathIfMinus1Retry_</span></span></a><span class="mpre"> </span><a name="loc_43_30_43_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_30_43_33&#39;)"><span class="hl_vardecl"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a name="loc_43_34_43_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_34_43_38&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> </span><a name="loc_43_39_43_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_39_43_40&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> =
  </span><span class="hl_varref"><span class="mpre">void</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_51_1_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_1_51_22&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoPathIfRetry</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> -</span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_43_30_43_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_30_43_33&#39;)"><span class="hl_varref"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a href="#loc_43_34_43_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_34_43_38&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><a href="#loc_43_39_43_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_39_43_40&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">

</span><a href="#loc_47_1_47_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_1_47_26&#39;)"><span class="mpre">throwErrnoPathIfNullRetry</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_47_1_47_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_1_47_26&#39;)"><span class="hl_fundecl"><span class="mpre">throwErrnoPathIfNullRetry</span></span></a><span class="mpre"> </span><a name="loc_47_27_47_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_27_47_30&#39;)"><span class="hl_vardecl"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a name="loc_47_31_47_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_31_47_35&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> </span><a name="loc_47_36_47_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_36_47_37&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> =
  </span><a href="#loc_51_1_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_1_51_22&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoPathIfRetry</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nullPtr</span></span><span class="mpre">) </span><a href="#loc_47_27_47_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_27_47_30&#39;)"><span class="hl_varref"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a href="#loc_47_31_47_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_31_47_35&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><a href="#loc_47_36_47_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_36_47_37&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">

</span><a href="#loc_51_1_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_1_51_22&#39;)"><span class="mpre">throwErrnoPathIfRetry</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_51_1_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_1_51_22&#39;)"><span class="hl_fundecl"><span class="mpre">throwErrnoPathIfRetry</span></span></a><span class="mpre"> </span><a name="loc_51_23_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_23_51_25&#39;)"><span class="hl_vardecl"><span class="mpre">pr</span></span></a><span class="mpre"> </span><a name="loc_51_26_51_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_26_51_29&#39;)"><span class="hl_vardecl"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a name="loc_51_30_51_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_30_51_34&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> </span><a name="loc_51_35_51_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_35_51_36&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> =
  do
    </span><a name="loc_53_5_53_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_5_53_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_51_35_51_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_35_51_36&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
    if </span><a href="#loc_51_23_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_23_51_25&#39;)"><span class="hl_varref"><span class="mpre">pr</span></span></a><span class="mpre"> </span><a href="#loc_53_5_53_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_5_53_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
      then do
        </span><a name="loc_56_9_56_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_9_56_12&#39;)"><span class="hl_vardecl"><span class="mpre">err</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">getErrno</span></span><span class="mpre">
        if </span><a href="#loc_56_9_56_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_9_56_12&#39;)"><span class="hl_varref"><span class="mpre">err</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">eINTR</span></span><span class="mpre">
          then </span><a href="#loc_51_1_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_1_51_22&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoPathIfRetry</span></span></a><span class="mpre"> </span><a href="#loc_51_23_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_23_51_25&#39;)"><span class="hl_varref"><span class="mpre">pr</span></span></a><span class="mpre"> </span><a href="#loc_51_26_51_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_26_51_29&#39;)"><span class="hl_varref"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a href="#loc_51_30_51_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_30_51_34&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><a href="#loc_51_35_51_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_35_51_36&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
          else </span><span class="hl_varref"><span class="mpre">throwErrnoPath</span></span><span class="mpre"> </span><a href="#loc_51_26_51_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_26_51_29&#39;)"><span class="hl_varref"><span class="mpre">loc</span></span></a><span class="mpre"> </span><a href="#loc_51_30_51_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_30_51_34&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre">
      else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_53_5_53_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_5_53_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">

</span></div></body></html>