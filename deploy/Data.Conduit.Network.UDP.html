<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE RankNTypes #-}
module Data.Conduit.Network.UDP
    ( </span><span class="hl_comment"><span class="mpre">-- * UDP message representation</span></span><span class="mpre">
      SN.Message (..)
      </span><span class="hl_comment"><span class="mpre">-- * Basic utilities</span></span><span class="mpre">
    , sourceSocket
    , sinkSocket
    , sinkAllSocket
    , sinkToSocket
    , sinkAllToSocket
      </span><span class="hl_comment"><span class="mpre">-- * Helper Utilities</span></span><span class="mpre">
    , SN.HostPreference
    ) where

import Data.Conduit
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 16, srcSpanStartColumn = 8, srcSpanEndLine = 16, srcSpanEndColumn = 22}, srcInfoPoints = []}) &quot;Network.Socket&quot;"><span class="mpre">Network.Socket</span></span><span class="mpre"> (AddrInfo, SockAddr, Socket)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 17, srcSpanStartColumn = 18, srcSpanEndLine = 17, srcSpanEndColumn = 32}, srcInfoPoints = []}) &quot;Network.Socket&quot;"><span class="mpre">Network.Socket</span></span><span class="mpre"> as NS
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 18, srcSpanStartColumn = 8, srcSpanEndLine = 18, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Network.Socket.ByteString&quot;"><span class="mpre">Network.Socket.ByteString</span></span><span class="mpre"> (recvFrom, send, sendAll, sendTo, sendAllTo)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 19, srcSpanStartColumn = 8, srcSpanEndLine = 19, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> (ByteString)
import Control.Monad.IO.Class (</span><a href="Control.Monad.IO.Class.html#loc_30_20_30_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_30_20_30_27&#39;)"><span class="mpre">MonadIO</span></a><span class="mpre"> (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="mpre">liftIO</span></a><span class="mpre">))
import Control.Monad (</span><a href="Control.Monad.html#loc_195_1_195_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_195_1_195_5&#39;)"><span class="mpre">void</span></a><span class="mpre">)
import Control.Monad.Trans.Class (</span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="mpre">lift</span></a><span class="mpre">)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 23, srcSpanStartColumn = 18, srcSpanEndLine = 23, srcSpanEndColumn = 40}, srcInfoPoints = []}) &quot;Data.Streaming.Network&quot;"><span class="mpre">Data.Streaming.Network</span></span><span class="mpre"> as SN

</span><span class="hl_comment"><span class="mpre">-- | Stream messages from the socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The given @len@ defines the maximum packet size. Every produced item</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- contains the message payload and the origin address.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function does /not/ automatically close the socket.</span></span><span class="mpre">
</span><a href="#loc_32_1_32_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_13&#39;)"><span class="mpre">sourceSocket</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 31, srcSpanStartColumn = 17, srcSpanEndLine = 31, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 31, srcSpanStartColumn = 27, srcSpanEndLine = 31, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/ne"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">SN.Message</span></span><span class="mpre">
</span><a name="loc_32_1_32_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_13&#39;)"><span class="hl_fundecl"><span class="mpre">sourceSocket</span></span></a><span class="mpre"> </span><a name="loc_32_14_32_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_14_32_20&#39;)"><span class="hl_vardecl"><span class="mpre">socket</span></span></a><span class="mpre"> </span><a name="loc_32_21_32_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_21_32_24&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_34_5_34_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
  where
    </span><a name="loc_34_5_34_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_9&#39;)"><span class="hl_vardecl"><span class="mpre">loop</span></span></a><span class="mpre"> = do
        (</span><a name="loc_35_10_35_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_10_35_12&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_35_14_35_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_14_35_18&#39;)"><span class="hl_vardecl"><span class="mpre">addr</span></span></a><span class="mpre">) &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">recvFrom</span></span><span class="mpre"> </span><a href="#loc_32_14_32_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_14_32_20&#39;)"><span class="hl_varref"><span class="mpre">socket</span></span></a><span class="mpre"> </span><a href="#loc_32_21_32_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_21_32_24&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
        </span><a href="Data.Conduit.html#loc_180_1_180_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_180_1_180_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">SN.Message</span></span><span class="mpre"> </span><a href="#loc_35_10_35_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_10_35_12&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a href="#loc_35_14_35_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_14_35_18&#39;)"><span class="hl_varref"><span class="mpre">addr</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_34_5_34_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Stream messages to the connected socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The payload is sent using @send@, so some of it might be lost.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function does /not/ automatically close the socket.</span></span><span class="mpre">
</span><a href="#loc_44_1_44_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_1_44_11&#39;)"><span class="mpre">sinkSocket</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 15, srcSpanEndLine = 43, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 25, srcSpanEndLine = 43, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/ne"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_44_1_44_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_1_44_11&#39;)"><span class="hl_vardecl"><span class="mpre">sinkSocket</span></span></a><span class="mpre"> = </span><a href="#loc_78_1_78_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_17&#39;)"><span class="hl_varref"><span class="mpre">sinkSocketHelper</span></span></a><span class="mpre"> (\</span><a name="loc_44_33_44_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_33_44_37&#39;)"><span class="hl_vardecl"><span class="mpre">sock</span></span></a><span class="mpre"> </span><a name="loc_44_38_44_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_38_44_40&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.html#loc_195_1_195_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_195_1_195_5&#39;)"><span class="hl_varref"><span class="mpre">void</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">send</span></span><span class="mpre"> </span><a href="#loc_44_33_44_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_33_44_37&#39;)"><span class="hl_varref"><span class="mpre">sock</span></span></a><span class="mpre"> </span><a href="#loc_44_38_44_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_38_44_40&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Stream messages to the connected socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The payload is sent using @sendAll@, so it might end up in multiple packets.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function does /not/ automatically close the socket.</span></span><span class="mpre">
</span><a href="#loc_52_1_52_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_14&#39;)"><span class="mpre">sinkAllSocket</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 51, srcSpanStartColumn = 18, srcSpanEndLine = 51, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 51, srcSpanStartColumn = 28, srcSpanEndLine = 51, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/ne"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_52_1_52_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_14&#39;)"><span class="hl_vardecl"><span class="mpre">sinkAllSocket</span></span></a><span class="mpre"> = </span><a href="#loc_78_1_78_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_17&#39;)"><span class="hl_varref"><span class="mpre">sinkSocketHelper</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sendAll</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Stream messages to the socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Every handled item contains the message payload and the destination</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- address. The payload is sent using @sendTo@, so some of it might be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- lost.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function does /not/ automatically close the socket.</span></span><span class="mpre">
</span><a href="#loc_62_1_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_13&#39;)"><span class="mpre">sinkToSocket</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 61, srcSpanStartColumn = 17, srcSpanEndLine = 61, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 61, srcSpanStartColumn = 27, srcSpanEndLine = 61, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/ne"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">SN.Message</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_62_1_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_13&#39;)"><span class="hl_vardecl"><span class="mpre">sinkToSocket</span></span></a><span class="mpre"> = </span><a href="#loc_78_1_78_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_17&#39;)"><span class="hl_varref"><span class="mpre">sinkSocketHelper</span></span></a><span class="mpre"> (\</span><a name="loc_62_35_62_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_35_62_39&#39;)"><span class="hl_vardecl"><span class="mpre">sock</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">SN.Message</span></span><span class="mpre"> </span><a name="loc_62_52_62_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_52_62_54&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a name="loc_62_55_62_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_55_62_59&#39;)"><span class="hl_vardecl"><span class="mpre">addr</span></span></a><span class="mpre">) -&gt; </span><a href="Control.Monad.html#loc_195_1_195_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_195_1_195_5&#39;)"><span class="hl_varref"><span class="mpre">void</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sendTo</span></span><span class="mpre"> </span><a href="#loc_62_35_62_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_35_62_39&#39;)"><span class="hl_varref"><span class="mpre">sock</span></span></a><span class="mpre"> </span><a href="#loc_62_52_62_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_52_62_54&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a href="#loc_62_55_62_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_55_62_59&#39;)"><span class="hl_varref"><span class="mpre">addr</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Stream messages to the socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Every handled item contains the message payload and the destination</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- address. The payload is sent using @sendAllTo@, so it might end up in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- multiple packets.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function does /not/ automatically close the socket.</span></span><span class="mpre">
</span><a href="#loc_72_1_72_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_1_72_16&#39;)"><span class="mpre">sinkAllToSocket</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 71, srcSpanStartColumn = 20, srcSpanEndLine = 71, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 71, srcSpanStartColumn = 30, srcSpanEndLine = 71, srcSpanEndColumn = 32}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/ne"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">SN.Message</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_72_1_72_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_1_72_16&#39;)"><span class="hl_vardecl"><span class="mpre">sinkAllToSocket</span></span></a><span class="mpre"> = </span><a href="#loc_78_1_78_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_17&#39;)"><span class="hl_varref"><span class="mpre">sinkSocketHelper</span></span></a><span class="mpre"> (\</span><a name="loc_72_38_72_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_38_72_42&#39;)"><span class="hl_vardecl"><span class="mpre">sock</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">SN.Message</span></span><span class="mpre"> </span><a name="loc_72_55_72_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_55_72_57&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a name="loc_72_58_72_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_58_72_62&#39;)"><span class="hl_vardecl"><span class="mpre">addr</span></span></a><span class="mpre">) -&gt; </span><span class="hl_varref"><span class="mpre">sendAllTo</span></span><span class="mpre"> </span><a href="#loc_72_38_72_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_38_72_42&#39;)"><span class="hl_varref"><span class="mpre">sock</span></span></a><span class="mpre"> </span><a href="#loc_72_55_72_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_55_72_57&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a href="#loc_72_58_72_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_58_72_62&#39;)"><span class="hl_varref"><span class="mpre">addr</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- Internal</span></span><span class="mpre">
</span><a href="#loc_78_1_78_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_17&#39;)"><span class="mpre">sinkSocketHelper</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 75, srcSpanStartColumn = 21, srcSpanEndLine = 75, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network/UDP.hs&quot;, srcSpanStartLine = 75, srcSpanStartColumn = 31, srcSpanEndLine = 75, srcSpanEndColumn = 33}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/ne"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">)
                              -&gt; </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre">
                              -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_78_1_78_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_17&#39;)"><span class="hl_fundecl"><span class="mpre">sinkSocketHelper</span></span></a><span class="mpre"> </span><a name="loc_78_18_78_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_18_78_21&#39;)"><span class="hl_vardecl"><span class="mpre">act</span></span></a><span class="mpre"> </span><a name="loc_78_22_78_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_22_78_28&#39;)"><span class="hl_vardecl"><span class="mpre">socket</span></span></a><span class="mpre"> = </span><a href="#loc_80_5_80_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
  where
    </span><a name="loc_80_5_80_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_9&#39;)"><span class="hl_vardecl"><span class="mpre">loop</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.html#loc_168_1_168_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_168_1_168_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">maybe</span></span><span class="mpre">
                        (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)
                        (\</span><a name="loc_82_27_82_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_28&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_78_18_78_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_18_78_21&#39;)"><span class="hl_varref"><span class="mpre">act</span></span></a><span class="mpre"> </span><a href="#loc_78_22_78_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_22_78_28&#39;)"><span class="hl_varref"><span class="mpre">socket</span></span></a><span class="mpre"> </span><a href="#loc_82_27_82_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_28&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_80_5_80_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_78_1_78_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_17&#39;)"><span class="mpre">sinkSocketHelper</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>