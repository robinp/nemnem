<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE Unsafe #-}
{-# LANGUAGE CPP
           , NoImplicitPrelude
           , ScopedTypeVariables
           , BangPatterns
  #-}

module GHC.Event.Control
    (
    </span><span class="hl_comment"><span class="mpre">-- * Managing the IO manager</span></span><span class="mpre">
      Signal
    , ControlMessage(..)
    , Control
    , newControl
    , closeControl
    </span><span class="hl_comment"><span class="mpre">-- ** Control message reception</span></span><span class="mpre">
    , readControlMessage
    </span><span class="hl_comment"><span class="mpre">-- *** File descriptors</span></span><span class="mpre">
    , controlReadFd
    , wakeupReadFd
    </span><span class="hl_comment"><span class="mpre">-- ** Control message sending</span></span><span class="mpre">
    , sendWakeup
    , sendDie
    </span><span class="hl_comment"><span class="mpre">-- * Utilities</span></span><span class="mpre">
    , setNonBlockingFD
    ) where

#include &quot;EventConfig.h&quot;

import Control.Monad (</span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="mpre">when</span></a><span class="mpre">)
import Foreign.ForeignPtr (ForeignPtr)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 32, srcSpanStartColumn = 8, srcSpanEndLine = 32, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre">
import GHC.Conc.Signal (Signal)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 34, srcSpanStartColumn = 8, srcSpanEndLine = 34, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Real&quot;"><span class="mpre">GHC.Real</span></span><span class="mpre"> (fromIntegral)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 35, srcSpanStartColumn = 8, srcSpanEndLine = 35, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Show&quot;"><span class="mpre">GHC.Show</span></span><span class="mpre"> (Show)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 36, srcSpanStartColumn = 8, srcSpanEndLine = 36, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Word&quot;"><span class="mpre">GHC.Word</span></span><span class="mpre"> (Word8)
import Foreign.C.Error (</span><a href="Foreign.C.Error.html#loc_370_1_370_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_370_1_370_20&#39;)"><span class="mpre">throwErrnoIfMinus1_</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 38, srcSpanStartColumn = 8, srcSpanEndLine = 38, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Foreign.C.Types&quot;"><span class="mpre">Foreign.C.Types</span></span><span class="mpre"> (CInt(..), CSize(..))
import Foreign.ForeignPtr (mallocForeignPtrBytes, withForeignPtr)
import Foreign.Marshal (</span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="mpre">alloca</span></a><span class="mpre">, </span><a href="Foreign.Marshal.Alloc.html#loc_121_1_121_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_121_1_121_12&#39;)"><span class="mpre">allocaBytes</span></a><span class="mpre">)
import Foreign.Marshal.Array (</span><a href="Foreign.Marshal.Array.html#loc_98_1_98_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Array.html#loc_98_1_98_12&#39;)"><span class="mpre">allocaArray</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 42, srcSpanStartColumn = 8, srcSpanEndLine = 42, srcSpanEndColumn = 19}, srcInfoPoints = []}) &quot;Foreign.Ptr&quot;"><span class="mpre">Foreign.Ptr</span></span><span class="mpre"> (castPtr)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 8, srcSpanEndLine = 43, srcSpanEndColumn = 24}, srcInfoPoints = []}) &quot;Foreign.Storable&quot;"><span class="mpre">Foreign.Storable</span></span><span class="mpre"> (peek, peekElemOff, poke)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 44, srcSpanStartColumn = 8, srcSpanEndLine = 44, srcSpanEndColumn = 30}, srcInfoPoints = []}) &quot;System.Posix.Internals&quot;"><span class="mpre">System.Posix.Internals</span></span><span class="mpre"> (c_close, c_pipe, c_read, c_write,
                               setCloseOnExec, setNonBlockingFD)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 8, srcSpanEndLine = 46, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;System.Posix.Types&quot;"><span class="mpre">System.Posix.Types</span></span><span class="mpre"> (Fd)

#if defined(HAVE_EVENTFD)
import Foreign.C.Error (</span><a href="Foreign.C.Error.html#loc_365_1_365_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_365_1_365_19&#39;)"><span class="mpre">throwErrnoIfMinus1</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 50, srcSpanStartColumn = 8, srcSpanEndLine = 50, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Foreign.C.Types&quot;"><span class="mpre">Foreign.C.Types</span></span><span class="mpre"> (CULLong(..))
#else
import Foreign.C.Error (</span><a href="Foreign.C.Error.html#loc_146_1_146_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_146_1_146_7&#39;)"><span class="mpre">eAGAIN</span></a><span class="mpre">, </span><a href="Foreign.C.Error.html#loc_238_1_238_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_238_1_238_12&#39;)"><span class="mpre">eWOULDBLOCK</span></a><span class="mpre">, </span><a href="Foreign.C.Error.html#loc_262_1_262_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_262_1_262_9&#39;)"><span class="mpre">getErrno</span></a><span class="mpre">, </span><a href="Foreign.C.Error.html#loc_280_1_280_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_280_1_280_11&#39;)"><span class="mpre">throwErrno</span></a><span class="mpre">)
#endif

data </span><a name="loc_55_6_55_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_6_55_20&#39;)"><span class="hl_tycondecl"><span class="mpre">ControlMessage</span></span></a><span class="mpre"> = </span><a name="loc_55_23_55_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_23_55_33&#39;)"><span class="hl_condecl"><span class="mpre">CMsgWakeup</span></span></a><span class="mpre">
                    | </span><a name="loc_56_23_56_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_23_56_30&#39;)"><span class="hl_condecl"><span class="mpre">CMsgDie</span></span></a><span class="mpre">
                    | </span><a name="loc_57_23_57_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_23_57_33&#39;)"><span class="hl_condecl"><span class="mpre">CMsgSignal</span></span></a><span class="mpre"> {-# UNPACK #-} !(</span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
                                 {-# UNPACK #-} !</span><span class="hl_tyconref"><span class="mpre">Signal</span></span><span class="mpre">
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 59, srcSpanStartColumn = 5, srcSpanEndLine = 59, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 59, srcSpanStartColumn = 5, srcSpanEndLine = 59, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 59, "><span class="mpre">deriving (Eq, Show)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The structure used to tell the IO manager thread what to do.</span></span><span class="mpre">
data </span><a name="loc_62_6_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_13&#39;)"><span class="hl_tycondecl"><span class="mpre">Control</span></span></a><span class="mpre"> = </span><span class="hl_condecl"><span class="mpre">W</span></span><span class="mpre"> {
      </span><a name="loc_63_7_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_20&#39;)"><span class="hl_fielddecl"><span class="mpre">controlReadFd</span></span></a><span class="mpre">  :: {-# UNPACK #-} !</span><span class="hl_tyconref"><span class="mpre">Fd</span></span><span class="mpre">
    , </span><a name="loc_64_7_64_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_21&#39;)"><span class="hl_fielddecl"><span class="mpre">controlWriteFd</span></span></a><span class="mpre"> :: {-# UNPACK #-} !</span><span class="hl_tyconref"><span class="mpre">Fd</span></span><span class="mpre">
#if defined(HAVE_EVENTFD)
    , </span><a name="loc_66_7_66_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_7_66_21&#39;)"><span class="hl_fielddecl"><span class="mpre">controlEventFd</span></span></a><span class="mpre"> :: {-# UNPACK #-} !</span><span class="hl_tyconref"><span class="mpre">Fd</span></span><span class="mpre">
#else
    , </span><a name="loc_68_7_68_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_68_7_68_19&#39;)"><span class="hl_fielddecl"><span class="mpre">wakeupReadFd</span></span></a><span class="mpre">   :: {-# UNPACK #-} !</span><span class="hl_tyconref"><span class="mpre">Fd</span></span><span class="mpre">
    , </span><a name="loc_69_7_69_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_7_69_20&#39;)"><span class="hl_fielddecl"><span class="mpre">wakeupWriteFd</span></span></a><span class="mpre">  :: {-# UNPACK #-} !</span><span class="hl_tyconref"><span class="mpre">Fd</span></span><span class="mpre">
#endif
    } </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 71, srcSpanStartColumn = 7, srcSpanEndLine = 71, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 71, srcSpanStartColumn = 7, srcSpanEndLine = 71, srcSpanEndColumn = 15},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 71, "><span class="mpre">deriving (Show)</span></span><span class="mpre">

#if defined(HAVE_EVENTFD)
</span><a href="#loc_68_7_68_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_68_7_68_19&#39;)"><span class="mpre">wakeupReadFd</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_13&#39;)"><span class="hl_tyconref"><span class="mpre">Control</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Fd</span></span><span class="mpre">
</span><span class="hl_vardecl"><span class="mpre">wakeupReadFd</span></span><span class="mpre"> = </span><a href="#loc_66_7_66_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_7_66_21&#39;)"><span class="hl_varref"><span class="mpre">controlEventFd</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_68_7_68_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_68_7_68_19&#39;)"><span class="mpre">wakeupReadFd</span></a><span class="mpre"> #-}</span></span><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">-- | Create the structure (usually a pipe) used for waking up the IO</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- manager thread from another thread.</span></span><span class="mpre">
</span><a href="#loc_82_1_82_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_11&#39;)"><span class="mpre">newControl</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_62_6_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_13&#39;)"><span class="hl_tyconref"><span class="mpre">Control</span></span></a><span class="mpre">
</span><a name="loc_82_1_82_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_11&#39;)"><span class="hl_fundecl"><span class="mpre">newControl</span></span></a><span class="mpre"> </span><a name="loc_82_12_82_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_12_82_26&#39;)"><span class="hl_vardecl"><span class="mpre">shouldRegister</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Array.html#loc_98_1_98_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Array.html#loc_98_1_98_12&#39;)"><span class="hl_varref"><span class="mpre">allocaArray</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_82_46_82_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_46_82_49&#39;)"><span class="hl_vardecl"><span class="mpre">fds</span></span></a><span class="mpre"> -&gt; do
  let </span><a name="loc_83_7_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_7_83_17&#39;)"><span class="hl_vardecl"><span class="mpre">createPipe</span></span></a><span class="mpre"> = do
        </span><a href="Foreign.C.Error.html#loc_370_1_370_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_370_1_370_20&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;pipe&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_pipe</span></span><span class="mpre"> </span><a href="#loc_82_46_82_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_46_82_49&#39;)"><span class="hl_varref"><span class="mpre">fds</span></span></a><span class="mpre">
        </span><a name="loc_85_9_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_9_85_11&#39;)"><span class="hl_vardecl"><span class="mpre">rd</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peekElemOff</span></span><span class="mpre"> </span><a href="#loc_82_46_82_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_46_82_49&#39;)"><span class="hl_varref"><span class="mpre">fds</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
        </span><a name="loc_86_9_86_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_11&#39;)"><span class="hl_vardecl"><span class="mpre">wr</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peekElemOff</span></span><span class="mpre"> </span><a href="#loc_82_46_82_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_46_82_49&#39;)"><span class="hl_varref"><span class="mpre">fds</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- The write end must be non-blocking, since we may need to</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- poke the event manager from a signal handler.</span></span><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">setNonBlockingFD</span></span><span class="mpre"> </span><a href="#loc_86_9_86_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_11&#39;)"><span class="hl_varref"><span class="mpre">wr</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">setCloseOnExec</span></span><span class="mpre"> </span><a href="#loc_85_9_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_9_85_11&#39;)"><span class="hl_varref"><span class="mpre">rd</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">setCloseOnExec</span></span><span class="mpre"> </span><a href="#loc_86_9_86_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_11&#39;)"><span class="hl_varref"><span class="mpre">wr</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_85_9_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_9_85_11&#39;)"><span class="hl_varref"><span class="mpre">rd</span></span></a><span class="mpre">, </span><a href="#loc_86_9_86_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_11&#39;)"><span class="hl_varref"><span class="mpre">wr</span></span></a><span class="mpre">)
  (</span><span class="hl_vardecl"><span class="mpre">ctrl_rd</span></span><span class="mpre">, </span><a name="loc_93_13_93_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_20&#39;)"><span class="hl_vardecl"><span class="mpre">ctrl_wr</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_83_7_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_7_83_17&#39;)"><span class="hl_varref"><span class="mpre">createPipe</span></span></a><span class="mpre">
  </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_82_12_82_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_12_82_26&#39;)"><span class="hl_varref"><span class="mpre">shouldRegister</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_setIOManagerControlFd</span></span><span class="mpre"> </span><a href="#loc_93_13_93_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_20&#39;)"><span class="hl_varref"><span class="mpre">ctrl_wr</span></span></a><span class="mpre">
#if defined(HAVE_EVENTFD)
  </span><a name="loc_96_3_96_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_3_96_5&#39;)"><span class="hl_vardecl"><span class="mpre">ev</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.C.Error.html#loc_365_1_365_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_365_1_365_19&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;eventfd&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_eventfd</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">setNonBlockingFD</span></span><span class="mpre"> </span><a href="#loc_96_3_96_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_3_96_5&#39;)"><span class="hl_varref"><span class="mpre">ev</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">setCloseOnExec</span></span><span class="mpre"> </span><a href="#loc_96_3_96_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_3_96_5&#39;)"><span class="hl_varref"><span class="mpre">ev</span></span></a><span class="mpre">
  </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_82_12_82_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_12_82_26&#39;)"><span class="hl_varref"><span class="mpre">shouldRegister</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_setIOManagerWakeupFd</span></span><span class="mpre"> </span><a href="#loc_96_3_96_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_3_96_5&#39;)"><span class="hl_varref"><span class="mpre">ev</span></span></a><span class="mpre">
#else
  (</span><span class="hl_vardecl"><span class="mpre">wake_rd</span></span><span class="mpre">, </span><a name="loc_101_13_101_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_13_101_20&#39;)"><span class="hl_vardecl"><span class="mpre">wake_wr</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_83_7_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_7_83_17&#39;)"><span class="hl_varref"><span class="mpre">createPipe</span></span></a><span class="mpre">
  </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_82_12_82_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_12_82_26&#39;)"><span class="hl_varref"><span class="mpre">shouldRegister</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_setIOManagerWakeupFd</span></span><span class="mpre"> </span><a href="#loc_101_13_101_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_13_101_20&#39;)"><span class="hl_varref"><span class="mpre">wake_wr</span></span></a><span class="mpre">
#endif
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 104, srcSpanStartColumn = 10, srcSpanEndLine = 112, srcSpanEndColumn = 13}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 104, srcSpanStartColumn = 12, srcSpanEndLine = 104, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine"><span class="mpre">W { controlReadFd  = fromIntegral ctrl_rd
           , controlWriteFd = fromIntegral ctrl_wr
#if defined(HAVE_EVENTFD)
           , controlEventFd = fromIntegral ev
#else
           , wakeupReadFd   = fromIntegral wake_rd
           , wakeupWriteFd  = fromIntegral wake_wr
#endif
           }</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Close the control structure used by the IO manager thread.</span></span><span class="mpre">
</span><a href="#loc_116_1_116_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_13&#39;)"><span class="mpre">closeControl</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_13&#39;)"><span class="hl_tyconref"><span class="mpre">Control</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_116_1_116_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_13&#39;)"><span class="hl_fundecl"><span class="mpre">closeControl</span></span></a><span class="mpre"> </span><a name="loc_116_14_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_14_116_15&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> = do
  _ &lt;- </span><span class="hl_varref"><span class="mpre">c_close</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_63_7_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_20&#39;)"><span class="hl_varref"><span class="mpre">controlReadFd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_116_14_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_14_116_15&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
  _ &lt;- </span><span class="hl_varref"><span class="mpre">c_close</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_64_7_64_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_21&#39;)"><span class="hl_varref"><span class="mpre">controlWriteFd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_116_14_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_14_116_15&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
#if defined(HAVE_EVENTFD)
  _ &lt;- </span><span class="hl_varref"><span class="mpre">c_close</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_66_7_66_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_7_66_21&#39;)"><span class="hl_varref"><span class="mpre">controlEventFd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_116_14_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_14_116_15&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
#else
  _ &lt;- </span><span class="hl_varref"><span class="mpre">c_close</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_68_7_68_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_68_7_68_19&#39;)"><span class="hl_varref"><span class="mpre">wakeupReadFd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_116_14_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_14_116_15&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
  _ &lt;- </span><span class="hl_varref"><span class="mpre">c_close</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_69_7_69_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_7_69_20&#39;)"><span class="hl_varref"><span class="mpre">wakeupWriteFd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_116_14_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_14_116_15&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
#endif
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">

</span><a href="#loc_128_1_128_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_18&#39;)"><span class="mpre">io_MANAGER_WAKEUP</span></a><span class="mpre">, </span><a href="#loc_129_1_129_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_15&#39;)"><span class="mpre">io_MANAGER_DIE</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">
</span><a name="loc_128_1_128_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_18&#39;)"><span class="hl_vardecl"><span class="mpre">io_MANAGER_WAKEUP</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0xff</span></span><span class="mpre">
</span><a name="loc_129_1_129_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_15&#39;)"><span class="hl_vardecl"><span class="mpre">io_MANAGER_DIE</span></span></a><span class="mpre">    = </span><span class="hl_num"><span class="mpre">0xfe</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 1, srcSpanEndLine = 132, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 1, srcSpanEndLine = 131, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 131"><span class="mpre">foreign import ccall &quot;__hscore_sizeof_siginfo_t&quot;
    sizeof_siginfo_t :: CSize</span></span><span class="mpre">

</span><a href="#loc_135_1_135_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_19&#39;)"><span class="mpre">readControlMessage</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_13&#39;)"><span class="hl_tyconref"><span class="mpre">Control</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Fd</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_55_6_55_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_6_55_20&#39;)"><span class="hl_tyconref"><span class="mpre">ControlMessage</span></span></a><span class="mpre">
</span><a name="loc_135_1_135_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_19&#39;)"><span class="hl_fundecl"><span class="mpre">readControlMessage</span></span></a><span class="mpre"> </span><a name="loc_135_20_135_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_20_135_24&#39;)"><span class="hl_vardecl"><span class="mpre">ctrl</span></span></a><span class="mpre"> </span><a name="loc_135_25_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_25_135_27&#39;)"><span class="hl_vardecl"><span class="mpre">fd</span></span></a><span class="mpre">
    | </span><a href="#loc_135_25_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_25_135_27&#39;)"><span class="hl_varref"><span class="mpre">fd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_68_7_68_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_68_7_68_19&#39;)"><span class="hl_varref"><span class="mpre">wakeupReadFd</span></span></a><span class="mpre"> </span><a href="#loc_135_20_135_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_20_135_24&#39;)"><span class="hl_varref"><span class="mpre">ctrl</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Alloc.html#loc_121_1_121_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_121_1_121_12&#39;)"><span class="hl_varref"><span class="mpre">allocaBytes</span></span></a><span class="mpre"> </span><a href="#loc_160_9_160_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_9_160_25&#39;)"><span class="hl_varref"><span class="mpre">wakeupBufferSize</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_136_65_136_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_65_136_66&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt; do
                    </span><a href="Foreign.C.Error.html#loc_370_1_370_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_370_1_370_20&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;readWakeupMessage&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                      </span><span class="hl_varref"><span class="mpre">c_read</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_135_25_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_25_135_27&#39;)"><span class="hl_varref"><span class="mpre">fd</span></span></a><span class="mpre">) </span><a href="#loc_136_65_136_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_65_136_66&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_160_9_160_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_9_160_25&#39;)"><span class="hl_varref"><span class="mpre">wakeupBufferSize</span></span></a><span class="mpre">)
                    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_55_23_55_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_23_55_33&#39;)"><span class="hl_conref"><span class="mpre">CMsgWakeup</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> =
        </span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="hl_varref"><span class="mpre">alloca</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_141_19_141_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_19_141_20&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt; do
            </span><a href="Foreign.C.Error.html#loc_370_1_370_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_370_1_370_20&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;readControlMessage&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                </span><span class="hl_varref"><span class="mpre">c_read</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_135_25_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_25_135_27&#39;)"><span class="hl_varref"><span class="mpre">fd</span></span></a><span class="mpre">) </span><a href="#loc_141_19_141_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_19_141_20&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
            </span><a name="loc_144_13_144_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_13_144_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_141_19_141_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_19_141_20&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
            case </span><a href="#loc_144_13_144_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_13_144_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                </span><span class="hl_comment"><span class="mpre">-- Wakeup messages shouldn&#39;t be sent on the control</span></span><span class="mpre">
                </span><span class="hl_comment"><span class="mpre">-- file descriptor but we handle them anyway.</span></span><span class="mpre">
                _ | </span><a href="#loc_144_13_144_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_13_144_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_128_1_128_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_18&#39;)"><span class="hl_varref"><span class="mpre">io_MANAGER_WAKEUP</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_55_23_55_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_23_55_33&#39;)"><span class="hl_conref"><span class="mpre">CMsgWakeup</span></span></a><span class="mpre">
                _ | </span><a href="#loc_144_13_144_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_13_144_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_129_1_129_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_15&#39;)"><span class="hl_varref"><span class="mpre">io_MANAGER_DIE</span></span></a><span class="mpre">    -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_56_23_56_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_23_56_30&#39;)"><span class="hl_conref"><span class="mpre">CMsgDie</span></span></a><span class="mpre">
                _ -&gt; do  </span><span class="hl_comment"><span class="mpre">-- Signal</span></span><span class="mpre">
                    </span><a name="loc_151_21_151_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_21_151_23&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">mallocForeignPtrBytes</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeof_siginfo_t</span></span><span class="mpre">)
                    </span><span class="hl_varref"><span class="mpre">withForeignPtr</span></span><span class="mpre"> </span><a href="#loc_151_21_151_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_21_151_23&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_152_42_152_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_42_152_51&#39;)"><span class="hl_vardecl"><span class="mpre">p_siginfo</span></span></a><span class="mpre"> -&gt; do
                        </span><a name="loc_153_25_153_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_25_153_26&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">c_read</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_135_25_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_25_135_27&#39;)"><span class="hl_varref"><span class="mpre">fd</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_152_42_152_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_42_152_51&#39;)"><span class="hl_varref"><span class="mpre">p_siginfo</span></span></a><span class="mpre">)
                             </span><span class="hl_varref"><span class="mpre">sizeof_siginfo_t</span></span><span class="mpre">
                        </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_153_25_153_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_25_153_26&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeof_siginfo_t</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                            </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;failed to read siginfo_t&quot;</span></span><span class="mpre">
                        let !</span><a name="loc_157_30_157_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_30_157_32&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_144_13_144_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_13_144_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
                        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_57_23_57_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_23_57_33&#39;)"><span class="hl_conref"><span class="mpre">CMsgSignal</span></span></a><span class="mpre"> </span><a href="#loc_151_21_151_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_21_151_23&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><a href="#loc_157_30_157_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_30_157_32&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre">

  where </span><a name="loc_160_9_160_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_9_160_25&#39;)"><span class="hl_vardecl"><span class="mpre">wakeupBufferSize</span></span></a><span class="mpre"> =
#if defined(HAVE_EVENTFD)
            </span><span class="hl_num"><span class="mpre">8</span></span><span class="mpre">
#else
            </span><span class="hl_num"><span class="mpre">4096</span></span><span class="mpre">
#endif

</span><a href="#loc_169_1_169_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_11&#39;)"><span class="mpre">sendWakeup</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_13&#39;)"><span class="hl_tyconref"><span class="mpre">Control</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
#if defined(HAVE_EVENTFD)
</span><a name="loc_169_1_169_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_11&#39;)"><span class="hl_fundecl"><span class="mpre">sendWakeup</span></span></a><span class="mpre"> </span><a name="loc_169_12_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_12_169_13&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> =
  </span><a href="Foreign.C.Error.html#loc_370_1_370_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_370_1_370_20&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;sendWakeup&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">c_eventfd_write</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><a href="#loc_66_7_66_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_7_66_21&#39;)"><span class="hl_varref"><span class="mpre">controlEventFd</span></span></a><span class="mpre"> </span><a href="#loc_169_12_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_12_169_13&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">)) </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
#else
</span><a href="#loc_169_1_169_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_11&#39;)"><span class="hl_fundecl"><span class="mpre">sendWakeup</span></span></a><span class="mpre"> </span><a name="loc_173_12_173_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_12_173_13&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = do
  </span><a name="loc_174_3_174_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_3_174_4&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_188_1_188_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_12&#39;)"><span class="hl_varref"><span class="mpre">sendMessage</span></span></a><span class="mpre"> (</span><a href="#loc_69_7_69_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_7_69_20&#39;)"><span class="hl_varref"><span class="mpre">wakeupWriteFd</span></span></a><span class="mpre"> </span><a href="#loc_173_12_173_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_12_173_13&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) </span><a href="#loc_55_23_55_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_23_55_33&#39;)"><span class="hl_conref"><span class="mpre">CMsgWakeup</span></span></a><span class="mpre">
  case </span><a href="#loc_174_3_174_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_3_174_4&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> of
    _ | </span><a href="#loc_174_3_174_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_3_174_4&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> -</span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">   -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; do
                   </span><a name="loc_178_20_178_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_20_178_25&#39;)"><span class="hl_vardecl"><span class="mpre">errno</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.C.Error.html#loc_262_1_262_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_262_1_262_9&#39;)"><span class="hl_varref"><span class="mpre">getErrno</span></span></a><span class="mpre">
                   </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_178_20_178_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_20_178_25&#39;)"><span class="hl_varref"><span class="mpre">errno</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="Foreign.C.Error.html#loc_146_1_146_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_146_1_146_7&#39;)"><span class="hl_varref"><span class="mpre">eAGAIN</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_178_20_178_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_20_178_25&#39;)"><span class="hl_varref"><span class="mpre">errno</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="Foreign.C.Error.html#loc_238_1_238_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_238_1_238_12&#39;)"><span class="hl_varref"><span class="mpre">eWOULDBLOCK</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                     </span><a href="Foreign.C.Error.html#loc_280_1_280_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_280_1_280_11&#39;)"><span class="hl_varref"><span class="mpre">throwErrno</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;sendWakeup&quot;</span></span><span class="mpre">
#endif

</span><a href="#loc_184_1_184_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_1_184_8&#39;)"><span class="mpre">sendDie</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_13&#39;)"><span class="hl_tyconref"><span class="mpre">Control</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_184_1_184_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_1_184_8&#39;)"><span class="hl_fundecl"><span class="mpre">sendDie</span></span></a><span class="mpre"> </span><a name="loc_184_9_184_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_9_184_10&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = </span><a href="Foreign.C.Error.html#loc_370_1_370_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_370_1_370_20&#39;)"><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;sendDie&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
            </span><a href="#loc_188_1_188_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_12&#39;)"><span class="hl_varref"><span class="mpre">sendMessage</span></span></a><span class="mpre"> (</span><a href="#loc_64_7_64_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_21&#39;)"><span class="hl_varref"><span class="mpre">controlWriteFd</span></span></a><span class="mpre"> </span><a href="#loc_184_9_184_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_9_184_10&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) </span><a href="#loc_56_23_56_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_23_56_30&#39;)"><span class="hl_conref"><span class="mpre">CMsgDie</span></span></a><span class="mpre">

</span><a href="#loc_188_1_188_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_12&#39;)"><span class="mpre">sendMessage</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Fd</span></span><span class="mpre"> -&gt; </span><a href="#loc_55_6_55_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_6_55_20&#39;)"><span class="hl_tyconref"><span class="mpre">ControlMessage</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_188_1_188_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_12&#39;)"><span class="hl_fundecl"><span class="mpre">sendMessage</span></span></a><span class="mpre"> </span><a name="loc_188_13_188_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_13_188_15&#39;)"><span class="hl_vardecl"><span class="mpre">fd</span></span></a><span class="mpre"> </span><a name="loc_188_16_188_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_16_188_19&#39;)"><span class="hl_vardecl"><span class="mpre">msg</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="hl_varref"><span class="mpre">alloca</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_188_32_188_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_32_188_33&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt; do
  case </span><a href="#loc_188_16_188_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_16_188_19&#39;)"><span class="hl_varref"><span class="mpre">msg</span></span></a><span class="mpre"> of
    </span><a href="#loc_55_23_55_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_23_55_33&#39;)"><span class="hl_conref"><span class="mpre">CMsgWakeup</span></span></a><span class="mpre">        -&gt; </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_188_32_188_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_32_188_33&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_128_1_128_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_18&#39;)"><span class="hl_varref"><span class="mpre">io_MANAGER_WAKEUP</span></span></a><span class="mpre">
    </span><a href="#loc_56_23_56_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_23_56_30&#39;)"><span class="hl_conref"><span class="mpre">CMsgDie</span></span></a><span class="mpre">           -&gt; </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_188_32_188_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_32_188_33&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_129_1_129_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_15&#39;)"><span class="hl_varref"><span class="mpre">io_MANAGER_DIE</span></span></a><span class="mpre">
    </span><a href="#loc_57_23_57_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_23_57_33&#39;)"><span class="hl_conref"><span class="mpre">CMsgSignal</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_fp</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_s</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Signals can only be sent from within the RTS&quot;</span></span><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`fmap`</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_write</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_188_13_188_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_13_188_15&#39;)"><span class="hl_varref"><span class="mpre">fd</span></span></a><span class="mpre">) </span><a href="#loc_188_32_188_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_32_188_33&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">

#if defined(HAVE_EVENTFD)
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 1, srcSpanEndLine = 197, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 1, srcSpanEndLine = 196, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 196"><span class="mpre">foreign import ccall unsafe &quot;sys/eventfd.h eventfd&quot;
   c_eventfd :: CInt -&gt; CInt -&gt; IO CInt</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 199, srcSpanStartColumn = 1, srcSpanEndLine = 200, srcSpanEndColumn = 49}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 199, srcSpanStartColumn = 1, srcSpanEndLine = 199, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 199"><span class="mpre">foreign import ccall unsafe &quot;sys/eventfd.h eventfd_write&quot;
   c_eventfd_write :: CInt -&gt; CULLong -&gt; IO CInt</span></span><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">-- Used to tell the RTS how it can send messages to the I/O manager.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 204, srcSpanStartColumn = 1, srcSpanEndLine = 205, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 204, srcSpanStartColumn = 1, srcSpanEndLine = 204, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 204"><span class="mpre">foreign import ccall &quot;setIOManagerControlFd&quot;
   c_setIOManagerControlFd :: CInt -&gt; IO ()</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 207, srcSpanStartColumn = 1, srcSpanEndLine = 208, srcSpanEndColumn = 43}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 207, srcSpanStartColumn = 1, srcSpanEndLine = 207, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Event/Control.hs&quot;, srcSpanStartLine = 207"><span class="mpre">foreign import ccall &quot;setIOManagerWakeupFd&quot;
   c_setIOManagerWakeupFd :: CInt -&gt; IO ()</span></span><span class="mpre">
</span></div></body></html>