<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE BangPatterns, CPP, MagicHash, Rank2Types, UnboxedTuples #-}
{-# OPTIONS_GHC -fno-warn-orphans #-}
#if __GLASGOW_HASKELL__ &gt;= 702
{-# LANGUAGE Trustworthy #-}
#endif

</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      : Data.Text</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   : (c) 2009, 2010, 2011, 2012 Bryan O&#39;Sullivan,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--               (c) 2009 Duncan Coutts,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--               (c) 2008, 2009 Tom Harper</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     : BSD-style</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  : bos@serpentine.com</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   : experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability : GHC</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A time and space-efficient implementation of Unicode text.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Suitable for performance critical use, both in terms of large data</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- quantities and high speed.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Note/: Read below the synopsis for important notes on the use of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- this module.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This module is intended to be imported @qualified@, to avoid name</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- clashes with &quot;Prelude&quot; functions, e.g.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import qualified Data.Text as T</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- To use an extended and very rich family of functions for working</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- with Unicode text (including normalization, regular expressions,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- non-standard encodings, text breaking, and locales), see</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://hackage.haskell.org/package/text-icu the text-icu package &gt;.</span></span><span class="mpre">

module Data.Text
    (
    </span><span class="hl_comment"><span class="mpre">-- * Strict vs lazy types</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $strict</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- * Acceptable data</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $replacement</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- * Fusion</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $fusion</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- * Types</span></span><span class="mpre">
      Text

    </span><span class="hl_comment"><span class="mpre">-- * Creation and elimination</span></span><span class="mpre">
    , pack
    , unpack
    , singleton
    , empty

    </span><span class="hl_comment"><span class="mpre">-- * Basic interface</span></span><span class="mpre">
    , cons
    , snoc
    , append
    , uncons
    , head
    , last
    , tail
    , init
    , null
    , length
    , compareLength

    </span><span class="hl_comment"><span class="mpre">-- * Transformations</span></span><span class="mpre">
    , map
    , intercalate
    , intersperse
    , transpose
    , reverse
    , replace

    </span><span class="hl_comment"><span class="mpre">-- ** Case conversion</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $case</span></span><span class="mpre">
    , toCaseFold
    , toLower
    , toUpper
    , toTitle

    </span><span class="hl_comment"><span class="mpre">-- ** Justification</span></span><span class="mpre">
    , justifyLeft
    , justifyRight
    , center

    </span><span class="hl_comment"><span class="mpre">-- * Folds</span></span><span class="mpre">
    , foldl
    , foldl&#39;
    , foldl1
    , foldl1&#39;
    , foldr
    , foldr1

    </span><span class="hl_comment"><span class="mpre">-- ** Special folds</span></span><span class="mpre">
    , concat
    , concatMap
    , any
    , all
    , maximum
    , minimum

    </span><span class="hl_comment"><span class="mpre">-- * Construction</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- ** Scans</span></span><span class="mpre">
    , scanl
    , scanl1
    , scanr
    , scanr1

    </span><span class="hl_comment"><span class="mpre">-- ** Accumulating maps</span></span><span class="mpre">
    , mapAccumL
    , mapAccumR

    </span><span class="hl_comment"><span class="mpre">-- ** Generation and unfolding</span></span><span class="mpre">
    , replicate
    , unfoldr
    , unfoldrN

    </span><span class="hl_comment"><span class="mpre">-- * Substrings</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- ** Breaking strings</span></span><span class="mpre">
    , take
    , takeEnd
    , drop
    , dropEnd
    , takeWhile
    , dropWhile
    , dropWhileEnd
    , dropAround
    , strip
    , stripStart
    , stripEnd
    , splitAt
    , breakOn
    , breakOnEnd
    , break
    , span
    , group
    , groupBy
    , inits
    , tails

    </span><span class="hl_comment"><span class="mpre">-- ** Breaking into many substrings</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $split</span></span><span class="mpre">
    , splitOn
    , split
    , chunksOf

    </span><span class="hl_comment"><span class="mpre">-- ** Breaking into lines and words</span></span><span class="mpre">
    , lines
    </span><span class="hl_comment"><span class="mpre">--, lines&#39;</span></span><span class="mpre">
    , words
    , unlines
    , unwords

    </span><span class="hl_comment"><span class="mpre">-- * Predicates</span></span><span class="mpre">
    , isPrefixOf
    , isSuffixOf
    , isInfixOf

    </span><span class="hl_comment"><span class="mpre">-- ** View patterns</span></span><span class="mpre">
    , stripPrefix
    , stripSuffix
    , commonPrefixes

    </span><span class="hl_comment"><span class="mpre">-- * Searching</span></span><span class="mpre">
    , filter
    , breakOnAll
    , find
    , partition

    </span><span class="hl_comment"><span class="mpre">-- , findSubstring</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- * Indexing</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $index</span></span><span class="mpre">
    , index
    , findIndex
    , count

    </span><span class="hl_comment"><span class="mpre">-- * Zipping</span></span><span class="mpre">
    , zip
    , zipWith

    </span><span class="hl_comment"><span class="mpre">-- -* Ordered text</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- , sort</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- * Low level operations</span></span><span class="mpre">
    , copy
    ) where

import Prelude (Char, Bool(..), Int, </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="mpre">Maybe</span></a><span class="mpre">(..), String,
                Eq(..), Ord(..), Ordering(..), (++),
                Read(..), Show(..),
                (&amp;&amp;), (||), (+), (-), (.), ($), </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="mpre">($!)</span></a><span class="mpre">, (&gt;&gt;), (*),
                maxBound, not, return, otherwise, quot)
#if defined(HAVE_DEEPSEQ)
import Control.DeepSeq (</span><a href="Control.DeepSeq.html#loc_110_7_110_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_110_7_110_13&#39;)"><span class="mpre">NFData</span></a><span class="mpre">)
#endif
#if defined(ASSERTS)
import Control.Exception (assert)
#endif
import Data.Char (</span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="mpre">isSpace</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text.hs&quot;, srcSpanStartLine = 205, srcSpanStartColumn = 8, srcSpanEndLine = 205, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;Data.Data&quot;"><span class="mpre">Data.Data</span></span><span class="mpre"> (Data(gfoldl, toConstr, gunfold, dataTypeOf), constrIndex,
                  Constr, mkConstr, DataType, mkDataType, Fixity(Prefix))
import Control.Monad (</span><a href="Control.Monad.html#loc_240_1_240_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_240_1_240_6&#39;)"><span class="mpre">foldM</span></a><span class="mpre">)
import qualified Data.Text.Array as A
import qualified Data.List as L
import Data.Monoid (</span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="mpre">Monoid</span></a><span class="mpre">(..))
import Data.String (</span><a href="Data.String.html#loc_34_7_34_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_34_7_34_15&#39;)"><span class="mpre">IsString</span></a><span class="mpre">(..))
import qualified Data.Text.Internal.Fusion as S
import qualified Data.Text.Internal.Fusion.Common as S
import Data.Text.Internal.Fusion (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="mpre">stream</span></a><span class="mpre">, </span><a href="Data.Text.Internal.Fusion.html#loc_86_1_86_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_86_1_86_14&#39;)"><span class="mpre">reverseStream</span></a><span class="mpre">, </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="mpre">unstream</span></a><span class="mpre">)
import Data.Text.Internal.Private (</span><a href="Data.Text.Internal.Private.html#loc_24_1_24_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Private.html#loc_24_1_24_6&#39;)"><span class="mpre">span_</span></a><span class="mpre">)
import Data.Text.Internal (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="mpre">Text</span></a><span class="mpre">(..), </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="mpre">empty</span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_108_1_108_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_108_1_108_7&#39;)"><span class="mpre">firstf</span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="mpre">safe</span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="mpre">text</span></a><span class="mpre">)
import qualified Prelude as P
import Data.Text.Unsafe (</span><a href="Data.Text.Unsafe.html#loc_62_6_62_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_6_62_10&#39;)"><span class="mpre">Iter</span></a><span class="mpre">(..), </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="mpre">iter</span></a><span class="mpre">, </span><a href="Data.Text.Unsafe.html#loc_80_1_80_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_80_1_80_6&#39;)"><span class="mpre">iter_</span></a><span class="mpre">, </span><a href="Data.Text.Unsafe.html#loc_112_1_112_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_112_1_112_13&#39;)"><span class="mpre">lengthWord16</span></a><span class="mpre">, </span><a href="Data.Text.Unsafe.html#loc_89_1_89_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_89_1_89_12&#39;)"><span class="mpre">reverseIter</span></a><span class="mpre">,
                         </span><a href="Data.Text.Unsafe.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_102_1_102_13&#39;)"><span class="mpre">reverseIter_</span></a><span class="mpre">, </span><a href="Data.Text.Unsafe.html#loc_43_1_43_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_43_1_43_11&#39;)"><span class="mpre">unsafeHead</span></a><span class="mpre">, </span><a href="Data.Text.Unsafe.html#loc_54_1_54_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_54_1_54_11&#39;)"><span class="mpre">unsafeTail</span></a><span class="mpre">)
import Data.Text.Internal.Unsafe.Char (</span><a href="Data.Text.Internal.Unsafe.Char.html#loc_44_1_44_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Char.html#loc_44_1_44_10&#39;)"><span class="mpre">unsafeChr</span></a><span class="mpre">)
import qualified Data.Text.Internal.Functions as F
import qualified Data.Text.Internal.Encoding.Utf16 as U16
import Data.Text.Internal.Search (</span><a href="Data.Text.Internal.Search.html#loc_52_1_52_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Search.html#loc_52_1_52_8&#39;)"><span class="mpre">indices</span></a><span class="mpre">)
#if defined(__HADDOCK__)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text.hs&quot;, srcSpanStartLine = 225, srcSpanStartColumn = 8, srcSpanEndLine = 225, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> (ByteString)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text.hs&quot;, srcSpanStartLine = 226, srcSpanStartColumn = 18, srcSpanEndLine = 226, srcSpanEndColumn = 32}, srcInfoPoints = []}) &quot;Data.Text.Lazy&quot;"><span class="mpre">Data.Text.Lazy</span></span><span class="mpre"> as L
import Data.Int (</span><a href="GHC.Int.html#loc_551_30_551_35" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Int.html#loc_551_30_551_35&#39;)"><span class="mpre">Int64</span></a><span class="mpre">)
#endif
#if __GLASGOW_HASKELL__ &gt;= 702
import qualified GHC.CString as GHC
#else
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text.hs&quot;, srcSpanStartLine = 232, srcSpanStartColumn = 18, srcSpanEndLine = 232, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre"> as GHC
#endif
import GHC.Prim (</span><a href="GHC.Prim.html#loc_2279_6_2279_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2279_6_2279_11&#39;)"><span class="mpre">Addr#</span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- $strict</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This package provides both strict and lazy &#39;Text&#39; types.  The</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- strict type is provided by the &quot;Data.Text&quot; module, while the lazy</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- type is provided by the &quot;Data.Text.Lazy&quot; module. Internally, the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- lazy @Text@ type consists of a list of strict chunks.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The strict &#39;Text&#39; type requires that an entire string fit into</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- memory at once.  The lazy &#39;Data.Text.Lazy.Text&#39; type is capable of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- streaming strings that are larger than memory using a small memory</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- footprint.  In many cases, the overhead of chunked streaming makes</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the lazy &#39;Data.Text.Lazy.Text&#39; type slower than its strict</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- counterpart, but this is not always the case.  Sometimes, the time</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- complexity of a function in one module may be different from the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- other, due to their differing internal structures.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Each module provides an almost identical API, with the main</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- difference being that the strict module uses &#39;Int&#39; values for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- lengths and counts, while the lazy module uses &#39;Data.Int.Int64&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- lengths.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- $replacement</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A &#39;Text&#39; value is a sequence of Unicode scalar values, as defined</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://www.unicode.org/versions/Unicode5.2.0/ch03.pdf#page=35 §3.9, definition D76 of the Unicode 5.2 standard &gt;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- As such, a &#39;Text&#39; cannot contain values in the range U+D800 to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- U+DFFF inclusive. Haskell implementations admit all Unicode code</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- points</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&lt;http://www.unicode.org/versions/Unicode5.2.0/ch03.pdf#page=13 §3.4, definition D10 &gt;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as &#39;Char&#39; values, including code points from this invalid range.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This means that there are some &#39;Char&#39; values that are not valid</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Unicode scalar values, and the functions in this module must handle</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- those cases.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Within this module, many functions construct a &#39;Text&#39; from one or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- more &#39;Char&#39; values. Those functions will substitute &#39;Char&#39; values</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that are not valid Unicode scalar values with the replacement</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- character \&quot;&amp;#xfffd;\&quot; (U+FFFD).  Functions that perform this</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- inspection and replacement are documented with the phrase</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \&quot;Performs replacement on invalid scalar values\&quot;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (One reason for this policy of replacement is that internally, a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39; value is represented as packed UTF-16 data. Values in the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- range U+D800 through U+DFFF are used by UTF-16 to denote surrogate</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- code points, and so cannot be represented. The functions replace</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid scalar values, instead of dropping them, as a security</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- measure. For details, see</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://unicode.org/reports/tr36/#Deletion_of_Noncharacters Unicode Technical Report 36, §3.5 &gt;.)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- $fusion</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Most of the functions in this module are subject to /fusion/,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- meaning that a pipeline of such functions will usually allocate at</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- most one &#39;Text&#39; value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- As an example, consider the following pipeline:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import Data.Text as T</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import Data.Text.Encoding as E</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import Data.ByteString (ByteString)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; countChars :: ByteString -&gt; Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; countChars = T.length . T.toUpper . E.decodeUtf8</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- From the type signatures involved, this looks like it should</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- allocate one &#39;Data.ByteString.ByteString&#39; value, and two &#39;Text&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- values. However, when a module is compiled with optimisation</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- enabled under GHC, the two intermediate &#39;Text&#39; values will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- optimised away, and the function will be compiled down to a single</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- loop over the source &#39;Data.ByteString.ByteString&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Functions that can be fused by the compiler are documented with the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- phrase \&quot;Subject to fusion\&quot;.</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Eq</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> where
    </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_312_10_312_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_10_312_14&#39;)"><span class="hl_vardecl"><span class="mpre">arrA</span></span></a><span class="mpre"> </span><a name="loc_312_15_312_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_15_312_19&#39;)"><span class="hl_vardecl"><span class="mpre">offA</span></span></a><span class="mpre"> </span><a name="loc_312_20_312_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_20_312_24&#39;)"><span class="hl_vardecl"><span class="mpre">lenA</span></span></a><span class="mpre"> </span><span class="hl_fundecl"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_312_33_312_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_33_312_37&#39;)"><span class="hl_vardecl"><span class="mpre">arrB</span></span></a><span class="mpre"> </span><a name="loc_312_38_312_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_38_312_42&#39;)"><span class="hl_vardecl"><span class="mpre">offB</span></span></a><span class="mpre"> </span><a name="loc_312_43_312_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_43_312_47&#39;)"><span class="hl_vardecl"><span class="mpre">lenB</span></span></a><span class="mpre">
        | </span><a href="#loc_312_20_312_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_20_312_24&#39;)"><span class="hl_varref"><span class="mpre">lenA</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_312_43_312_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_43_312_47&#39;)"><span class="hl_varref"><span class="mpre">lenB</span></span></a><span class="mpre"> = </span><a href="Data.Text.Array.html#loc_231_1_231_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_231_1_231_6&#39;)"><span class="hl_varref"><span class="mpre">A.equal</span></span></a><span class="mpre"> </span><a href="#loc_312_10_312_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_10_312_14&#39;)"><span class="hl_varref"><span class="mpre">arrA</span></span></a><span class="mpre"> </span><a href="#loc_312_15_312_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_15_312_19&#39;)"><span class="hl_varref"><span class="mpre">offA</span></span></a><span class="mpre"> </span><a href="#loc_312_33_312_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_33_312_37&#39;)"><span class="hl_varref"><span class="mpre">arrB</span></span></a><span class="mpre"> </span><a href="#loc_312_38_312_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_38_312_42&#39;)"><span class="hl_varref"><span class="mpre">offB</span></span></a><span class="mpre"> </span><a href="#loc_312_20_312_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_20_312_24&#39;)"><span class="hl_varref"><span class="mpre">lenA</span></span></a><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">    = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><span class="hl_pragma"><span class="mpre">{-# INLINE (==) #-}</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Ord</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> where
    </span><span class="hl_vardecl"><span class="mpre">compare</span></span><span class="mpre"> = </span><a href="#loc_369_1_369_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_1_369_12&#39;)"><span class="hl_varref"><span class="mpre">compareText</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a name="loc_321_15_321_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_15_321_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_321_17_321_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_17_321_19&#39;)"><span class="hl_vardecl"><span class="mpre">ps</span></span></a><span class="mpre"> </span><a name="loc_321_20_321_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_20_321_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a href="#loc_321_15_321_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_15_321_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="#loc_392_1_392_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_7&#39;)"><span class="hl_varref"><span class="mpre">unpack</span></span></a><span class="mpre"> </span><a href="#loc_321_17_321_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_17_321_19&#39;)"><span class="hl_varref"><span class="mpre">ps</span></span></a><span class="mpre">) </span><a href="#loc_321_20_321_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_20_321_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Read</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">readsPrec</span></span><span class="mpre"> </span><a name="loc_324_15_324_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_15_324_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_324_17_324_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_17_324_20&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> = [(</span><a href="#loc_387_1_387_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_1_387_5&#39;)"><span class="hl_varref"><span class="mpre">pack</span></span></a><span class="mpre"> </span><a href="#loc_324_38_324_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_38_324_39&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">,</span><a href="#loc_324_40_324_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_40_324_41&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">) | (</span><a name="loc_324_38_324_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_38_324_39&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">,</span><a name="loc_324_40_324_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_40_324_41&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">readsPrec</span></span><span class="mpre"> </span><a href="#loc_324_15_324_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_15_324_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_324_17_324_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_17_324_20&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">]

instance </span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="hl_classref"><span class="mpre">Monoid</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> where
    </span><a href="Data.Monoid.html#loc_80_9_80_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_80_9_80_15&#39;)"><span class="hl_vardecl"><span class="mpre">mempty</span></span></a><span class="mpre">  = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_vardecl"><span class="mpre">mappend</span></span></a><span class="mpre"> = </span><a href="#loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="hl_varref"><span class="mpre">append</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_vardecl"><span class="mpre">mconcat</span></span></a><span class="mpre"> = </span><a href="#loc_849_1_849_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_1_849_7&#39;)"><span class="hl_varref"><span class="mpre">concat</span></span></a><span class="mpre">

instance </span><a href="Data.String.html#loc_34_7_34_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_34_7_34_15&#39;)"><span class="hl_classref"><span class="mpre">IsString</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> where
    </span><a href="Data.String.html#loc_35_5_35_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_35_5_35_15&#39;)"><span class="hl_vardecl"><span class="mpre">fromString</span></span></a><span class="mpre"> = </span><a href="#loc_387_1_387_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_1_387_5&#39;)"><span class="hl_varref"><span class="mpre">pack</span></span></a><span class="mpre">

#if defined(HAVE_DEEPSEQ)
instance </span><a href="Control.DeepSeq.html#loc_110_7_110_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_110_7_110_13&#39;)"><span class="hl_classref"><span class="mpre">NFData</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">-- | This instance preserves data abstraction at the cost of inefficiency.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- We omit reflection services for the sake of data abstraction.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This instance was created by copying the updated behavior of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @&quot;Data.Set&quot;.@&#39;Data.Set.Set&#39; and @&quot;Data.Map&quot;.@&#39;Data.Map.Map&#39;. If you</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- feel a mistake has been made, please feel free to submit</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- improvements.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The original discussion is archived here:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://groups.google.com/group/haskell-cafe/browse_thread/thread/b5bbb1b28a7e525d/0639d46852575b93 could we get a Data instance for Data.Text.Text? &gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The followup discussion that changed the behavior of &#39;Data.Set.Set&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and &#39;Data.Map.Map&#39; is archived here:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://markmail.org/message/trovdc6zkphyi3cr#query:+page:1+mid:a46der3iacwjcf6n+state:results Proposal: Allow gunfold for Data.Map, ... &gt;</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Data</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> where
  </span><span class="hl_fundecl"><span class="mpre">gfoldl</span></span><span class="mpre"> </span><a name="loc_354_10_354_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_10_354_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_354_12_354_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_12_354_13&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_354_14_354_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_14_354_17&#39;)"><span class="hl_vardecl"><span class="mpre">txt</span></span></a><span class="mpre"> = </span><a href="#loc_354_12_354_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_12_354_13&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> </span><a href="#loc_387_1_387_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_1_387_5&#39;)"><span class="hl_varref"><span class="mpre">pack</span></span></a><span class="mpre"> </span><a href="#loc_354_10_354_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_10_354_11&#39;)"><span class="hl_infix"><span class="mpre">`f`</span></span></a><span class="mpre"> (</span><a href="#loc_392_1_392_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_7&#39;)"><span class="hl_varref"><span class="mpre">unpack</span></span></a><span class="mpre"> </span><a href="#loc_354_14_354_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_14_354_17&#39;)"><span class="hl_varref"><span class="mpre">txt</span></span></a><span class="mpre">)
  </span><span class="hl_fundecl"><span class="mpre">toConstr</span></span><span class="mpre"> _ = </span><a href="#loc_362_1_362_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_1_362_11&#39;)"><span class="hl_varref"><span class="mpre">packConstr</span></span></a><span class="mpre">
  </span><span class="hl_fundecl"><span class="mpre">gunfold</span></span><span class="mpre"> </span><a name="loc_356_11_356_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_11_356_12&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_356_13_356_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_13_356_14&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_356_15_356_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_15_356_16&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = case </span><span class="hl_varref"><span class="mpre">constrIndex</span></span><span class="mpre"> </span><a href="#loc_356_15_356_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_15_356_16&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> of
    </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> -&gt; </span><a href="#loc_356_11_356_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_11_356_12&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_356_13_356_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_13_356_14&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> </span><a href="#loc_387_1_387_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_1_387_5&#39;)"><span class="hl_varref"><span class="mpre">pack</span></span></a><span class="mpre">)
    _ -&gt; </span><span class="hl_varref"><span class="mpre">P.error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;gunfold&quot;</span></span><span class="mpre">
  </span><span class="hl_fundecl"><span class="mpre">dataTypeOf</span></span><span class="mpre"> _ = </span><a href="#loc_365_1_365_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_1_365_13&#39;)"><span class="hl_varref"><span class="mpre">textDataType</span></span></a><span class="mpre">

</span><a href="#loc_362_1_362_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_1_362_11&#39;)"><span class="mpre">packConstr</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Constr</span></span><span class="mpre">
</span><a name="loc_362_1_362_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_1_362_11&#39;)"><span class="hl_vardecl"><span class="mpre">packConstr</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkConstr</span></span><span class="mpre"> </span><a href="#loc_365_1_365_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_1_365_13&#39;)"><span class="hl_varref"><span class="mpre">textDataType</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;pack&quot;</span></span><span class="mpre"> [] </span><span class="hl_conref"><span class="mpre">Prefix</span></span><span class="mpre">

</span><a href="#loc_365_1_365_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_1_365_13&#39;)"><span class="mpre">textDataType</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">DataType</span></span><span class="mpre">
</span><a name="loc_365_1_365_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_1_365_13&#39;)"><span class="hl_vardecl"><span class="mpre">textDataType</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkDataType</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Text.Text&quot;</span></span><span class="mpre"> [</span><a href="#loc_362_1_362_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_1_362_11&#39;)"><span class="hl_varref"><span class="mpre">packConstr</span></span></a><span class="mpre">]

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Compare two &#39;Text&#39; values lexicographically.</span></span><span class="mpre">
</span><a href="#loc_369_1_369_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_1_369_12&#39;)"><span class="mpre">compareText</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ordering</span></span><span class="mpre">
</span><a name="loc_369_1_369_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_1_369_12&#39;)"><span class="hl_fundecl"><span class="mpre">compareText</span></span></a><span class="mpre"> </span><a name="loc_369_13_369_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_13_369_15&#39;)"><span class="hl_specname"><span class="mpre">ta</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arrA</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_offA</span></span><span class="mpre"> </span><a name="loc_369_34_369_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_34_369_38&#39;)"><span class="hl_vardecl"><span class="mpre">lenA</span></span></a><span class="mpre">) </span><a name="loc_369_40_369_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_40_369_42&#39;)"><span class="hl_specname"><span class="mpre">tb</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arrB</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_offB</span></span><span class="mpre"> </span><a name="loc_369_61_369_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_61_369_65&#39;)"><span class="hl_vardecl"><span class="mpre">lenB</span></span></a><span class="mpre">)
    | </span><a href="#loc_369_34_369_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_34_369_38&#39;)"><span class="hl_varref"><span class="mpre">lenA</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_369_61_369_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_61_369_65&#39;)"><span class="hl_varref"><span class="mpre">lenB</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">EQ</span></span><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">              = </span><a href="#loc_373_5_373_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_5_373_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where
    </span><a name="loc_373_5_373_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_5_373_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_373_9_373_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_9_373_10&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_373_12_373_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_12_373_13&#39;)"><span class="hl_vardecl"><span class="mpre">j</span></span></a><span class="mpre">
        | </span><a href="#loc_373_9_373_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_9_373_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_369_34_369_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_34_369_38&#39;)"><span class="hl_varref"><span class="mpre">lenA</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_373_12_373_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_12_373_13&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_369_61_369_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_61_369_65&#39;)"><span class="hl_varref"><span class="mpre">lenB</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> </span><a href="#loc_369_34_369_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_34_369_38&#39;)"><span class="hl_varref"><span class="mpre">lenA</span></span></a><span class="mpre"> </span><a href="#loc_369_61_369_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_61_369_65&#39;)"><span class="hl_varref"><span class="mpre">lenB</span></span></a><span class="mpre">
        | </span><a href="#loc_378_18_378_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_18_378_19&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_379_18_379_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_18_379_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">                  = </span><span class="hl_conref"><span class="mpre">LT</span></span><span class="mpre">
        | </span><a href="#loc_378_18_378_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_18_378_19&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><a href="#loc_379_18_379_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_18_379_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">                  = </span><span class="hl_conref"><span class="mpre">GT</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">              = </span><a href="#loc_373_5_373_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_5_373_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_373_9_373_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_9_373_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_378_20_378_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_20_378_22&#39;)"><span class="hl_varref"><span class="mpre">di</span></span></a><span class="mpre">) (</span><a href="#loc_373_12_373_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_12_373_13&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_379_20_379_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_20_379_22&#39;)"><span class="hl_varref"><span class="mpre">dj</span></span></a><span class="mpre">)
      where </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_378_18_378_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_18_378_19&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_378_20_378_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_20_378_22&#39;)"><span class="hl_vardecl"><span class="mpre">di</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_369_13_369_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_13_369_15&#39;)"><span class="hl_varref"><span class="mpre">ta</span></span></a><span class="mpre"> </span><a href="#loc_373_9_373_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_9_373_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
            </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_379_18_379_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_18_379_19&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> </span><a name="loc_379_20_379_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_20_379_22&#39;)"><span class="hl_vardecl"><span class="mpre">dj</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_369_40_369_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_369_40_369_42&#39;)"><span class="hl_varref"><span class="mpre">tb</span></span></a><span class="mpre"> </span><a href="#loc_373_12_373_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_12_373_13&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Conversion to/from &#39;Text&#39;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Convert a &#39;String&#39; into a &#39;Text&#39;.  Subject to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- fusion.  Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_387_1_387_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_1_387_5&#39;)"><span class="mpre">pack</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_387_1_387_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_1_387_5&#39;)"><span class="hl_vardecl"><span class="mpre">pack</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.Common.html#loc_351_1_351_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_351_1_351_4&#39;)"><span class="hl_varref"><span class="mpre">S.map</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.Common.html#loc_130_1_130_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_130_1_130_11&#39;)"><span class="hl_varref"><span class="mpre">S.streamList</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_387_1_387_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_1_387_5&#39;)"><span class="mpre">pack</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Convert a &#39;Text&#39; into a &#39;String&#39;.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_392_1_392_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_7&#39;)"><span class="mpre">unpack</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_392_1_392_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_7&#39;)"><span class="hl_vardecl"><span class="mpre">unpack</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">S.unstreamList</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_392_1_392_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_7&#39;)"><span class="mpre">unpack</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Convert a literal string into a Text.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_397_1_397_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_1_397_15&#39;)"><span class="mpre">unpackCString#</span></a><span class="mpre"> :: </span><a href="GHC.Prim.html#loc_2279_6_2279_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2279_6_2279_11&#39;)"><span class="hl_tyconref"><span class="mpre">Addr#</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_397_1_397_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_1_397_15&#39;)"><span class="hl_fundecl"><span class="mpre">unpackCString#</span></span></a><span class="mpre"> </span><a name="loc_397_16_397_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_16_397_21&#39;)"><span class="hl_vardecl"><span class="mpre">addr#</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_150_1_150_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_150_1_150_15&#39;)"><span class="hl_varref"><span class="mpre">S.streamCString#</span></span></a><span class="mpre"> </span><a href="#loc_397_16_397_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_16_397_21&#39;)"><span class="hl_varref"><span class="mpre">addr#</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# NOINLINE </span><a href="#loc_397_1_397_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_1_397_15&#39;)"><span class="mpre">unpackCString#</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES &quot;TEXT literal&quot; forall a.
    unstream (S.map safe (S.streamList (GHC.unpackCString# a)))
      = unpackCString# a #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES &quot;TEXT literal UTF8&quot; forall a.
    unstream (S.map safe (S.streamList (GHC.unpackCStringUtf8# a)))
      = unpackCString# a #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Convert a character into a Text.  Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_411_1_411_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_1_411_10&#39;)"><span class="mpre">singleton</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_411_1_411_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_1_411_10&#39;)"><span class="hl_vardecl"><span class="mpre">singleton</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.Common.html#loc_123_1_123_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_123_1_123_10&#39;)"><span class="hl_varref"><span class="mpre">S.singleton</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_411_1_411_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_1_411_10&#39;)"><span class="mpre">singleton</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Basic functions</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Adds a character to the front of a &#39;Text&#39;.  This function</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is more costly than its &#39;List&#39; counterpart because it requires</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- copying a new array.  Subject to fusion.  Performs replacement on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_422_1_422_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_1_422_5&#39;)"><span class="mpre">cons</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_422_1_422_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_1_422_5&#39;)"><span class="hl_fundecl"><span class="mpre">cons</span></span></a><span class="mpre"> </span><a name="loc_422_6_422_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_6_422_7&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_422_8_422_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_8_422_9&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_181_1_181_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_181_1_181_5&#39;)"><span class="hl_varref"><span class="mpre">S.cons</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><a href="#loc_422_6_422_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_6_422_7&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_422_8_422_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_8_422_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_422_1_422_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_1_422_5&#39;)"><span class="mpre">cons</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclInfixDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text.hs&quot;, srcSpanStartLine = 425, srcSpanStartColumn = 1, srcSpanEndLine = 425, srcSpanEndColumn = 16}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text.hs&quot;, srcSpanStartLine = 425, srcSpanStartColumn = 8, srcSpanEndLine = 425, srcSpanEndColumn = 9}]}) (AssocRight (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text.hs&quot;, "><span class="mpre">infixr 5 `cons`</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Adds a character to the end of a &#39;Text&#39;.  This copies the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- entire array in the process, unless fused.  Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_431_1_431_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_1_431_5&#39;)"><span class="mpre">snoc</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_431_1_431_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_1_431_5&#39;)"><span class="hl_fundecl"><span class="mpre">snoc</span></span></a><span class="mpre"> </span><a name="loc_431_6_431_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_6_431_7&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> </span><a name="loc_431_8_431_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_8_431_9&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_192_1_192_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_192_1_192_5&#39;)"><span class="hl_varref"><span class="mpre">S.snoc</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_431_6_431_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_6_431_7&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><a href="#loc_431_8_431_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_8_431_9&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_431_1_431_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_1_431_5&#39;)"><span class="mpre">snoc</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Appends one &#39;Text&#39; to the other by copying both of them</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- into a new &#39;Text&#39;.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="mpre">append</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="hl_fundecl"><span class="mpre">append</span></span></a><span class="mpre"> </span><a name="loc_437_8_437_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_8_437_9&#39;)"><span class="hl_specname"><span class="mpre">a</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_437_16_437_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_16_437_20&#39;)"><span class="hl_vardecl"><span class="mpre">arr1</span></span></a><span class="mpre"> </span><a name="loc_437_21_437_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_21_437_25&#39;)"><span class="hl_vardecl"><span class="mpre">off1</span></span></a><span class="mpre"> </span><a name="loc_437_26_437_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_26_437_30&#39;)"><span class="hl_vardecl"><span class="mpre">len1</span></span></a><span class="mpre">) </span><a name="loc_437_32_437_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_32_437_33&#39;)"><span class="hl_specname"><span class="mpre">b</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_437_40_437_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_40_437_44&#39;)"><span class="hl_vardecl"><span class="mpre">arr2</span></span></a><span class="mpre"> </span><a name="loc_437_45_437_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_45_437_49&#39;)"><span class="hl_vardecl"><span class="mpre">off2</span></span></a><span class="mpre"> </span><a name="loc_437_50_437_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_50_437_54&#39;)"><span class="hl_vardecl"><span class="mpre">len2</span></span></a><span class="mpre">)
    | </span><a href="#loc_437_26_437_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_26_437_30&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> = </span><a href="#loc_437_32_437_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_32_437_33&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
    | </span><a href="#loc_437_50_437_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_50_437_54&#39;)"><span class="hl_varref"><span class="mpre">len2</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> = </span><a href="#loc_437_8_437_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_8_437_9&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
    | </span><a href="#loc_443_7_443_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_7_443_10&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">   = </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">A.run</span></span></a><span class="mpre"> </span><a href="#loc_444_7_444_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_7_444_8&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_443_7_443_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_7_443_10&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_1660_1_1660_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1660_1_1660_14&#39;)"><span class="hl_varref"><span class="mpre">overflowError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;append&quot;</span></span><span class="mpre">
    where
      </span><a name="loc_443_7_443_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_7_443_10&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_437_26_437_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_26_437_30&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_437_50_437_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_50_437_54&#39;)"><span class="hl_varref"><span class="mpre">len2</span></span></a><span class="mpre">
      </span><a name="loc_444_7_444_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_7_444_8&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = do
        </span><a name="loc_445_9_445_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_445_9_445_12&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Text.Array.html#loc_115_1_115_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_115_1_115_4&#39;)"><span class="hl_varref"><span class="mpre">A.new</span></span></a><span class="mpre"> </span><a href="#loc_443_7_443_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_7_443_10&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
        </span><a href="Data.Text.Array.html#loc_215_1_215_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_215_1_215_6&#39;)"><span class="hl_varref"><span class="mpre">A.copyI</span></span></a><span class="mpre"> </span><a href="#loc_445_9_445_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_445_9_445_12&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_437_16_437_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_16_437_20&#39;)"><span class="hl_varref"><span class="mpre">arr1</span></span></a><span class="mpre"> </span><a href="#loc_437_21_437_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_21_437_25&#39;)"><span class="hl_varref"><span class="mpre">off1</span></span></a><span class="mpre"> </span><a href="#loc_437_26_437_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_26_437_30&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre">
        </span><a href="Data.Text.Array.html#loc_215_1_215_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_215_1_215_6&#39;)"><span class="hl_varref"><span class="mpre">A.copyI</span></span></a><span class="mpre"> </span><a href="#loc_445_9_445_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_445_9_445_12&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_437_26_437_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_26_437_30&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> </span><a href="#loc_437_40_437_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_40_437_44&#39;)"><span class="hl_varref"><span class="mpre">arr2</span></span></a><span class="mpre"> </span><a href="#loc_437_45_437_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_45_437_49&#39;)"><span class="hl_varref"><span class="mpre">off2</span></span></a><span class="mpre"> </span><a href="#loc_443_7_443_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_7_443_10&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_445_9_445_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_445_9_445_12&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# NOINLINE </span><a href="#loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="mpre">append</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT append -&gt; fused&quot; [~1] forall t1 t2.
    append t1 t2 = unstream (S.append (stream t1) (stream t2))
&quot;TEXT append -&gt; unfused&quot; [1] forall t1 t2.
    unstream (S.append (stream t1) (stream t2)) = append t1 t2
 #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Returns the first character of a &#39;Text&#39;, which must be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- non-empty.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_461_1_461_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_1_461_5&#39;)"><span class="mpre">head</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_461_1_461_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_1_461_5&#39;)"><span class="hl_fundecl"><span class="mpre">head</span></span></a><span class="mpre"> </span><a name="loc_461_6_461_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_6_461_7&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_222_1_222_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_222_1_222_5&#39;)"><span class="hl_varref"><span class="mpre">S.head</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_461_6_461_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_6_461_7&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_461_1_461_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_1_461_5&#39;)"><span class="mpre">head</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Returns the first character and rest of a &#39;Text&#39;, or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Nothing&#39; if empty. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_467_1_467_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_1_467_7&#39;)"><span class="mpre">uncons</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_467_1_467_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_1_467_7&#39;)"><span class="hl_fundecl"><span class="mpre">uncons</span></span></a><span class="mpre"> </span><a name="loc_467_8_467_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_8_467_9&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_467_16_467_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_16_467_19&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_467_20_467_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_20_467_23&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_467_24_467_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_24_467_27&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_467_24_467_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_24_467_27&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">  = </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_470_16_470_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_16_470_17&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_467_16_467_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_16_467_19&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_467_20_467_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_20_467_23&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_470_18_470_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_18_470_19&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_467_24_467_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_24_467_27&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_470_18_470_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_18_470_19&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">))
    where </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_470_16_470_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_16_470_17&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_470_18_470_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_18_470_19&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_467_8_467_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_8_467_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_467_1_467_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_1_467_7&#39;)"><span class="mpre">uncons</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Lifted from Control.Arrow and specialized.</span></span><span class="mpre">
</span><a href="#loc_475_1_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_1_475_7&#39;)"><span class="mpre">second</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">)
</span><a name="loc_475_1_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_1_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">second</span></span></a><span class="mpre"> </span><a name="loc_475_8_475_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_8_475_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a name="loc_475_11_475_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_11_475_12&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, </span><a name="loc_475_14_475_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_14_475_15&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">) = (</span><a href="#loc_475_11_475_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_11_475_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">, </span><a href="#loc_475_8_475_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_8_475_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_475_14_475_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_14_475_15&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Returns the last character of a &#39;Text&#39;, which must be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- non-empty.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_480_1_480_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_1_480_5&#39;)"><span class="mpre">last</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_480_1_480_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_1_480_5&#39;)"><span class="hl_fundecl"><span class="mpre">last</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_480_12_480_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_12_480_15&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_480_16_480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_16_480_19&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_480_20_480_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_20_480_23&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_480_20_480_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_20_480_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">                 = </span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_varref"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;last&quot;</span></span><span class="mpre">
    | </span><a href="#loc_484_11_484_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_11_484_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0xDC00</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_484_11_484_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_11_484_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0xDFFF</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.Unsafe.Char.html#loc_44_1_44_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Char.html#loc_44_1_44_10&#39;)"><span class="hl_varref"><span class="mpre">unsafeChr</span></span></a><span class="mpre"> </span><a href="#loc_484_11_484_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_11_484_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                = </span><a href="Data.Text.Internal.Encoding.Utf16.html#loc_30_1_30_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Utf16.html#loc_30_1_30_5&#39;)"><span class="hl_varref"><span class="mpre">U16.chr2</span></span></a><span class="mpre"> </span><a href="#loc_485_11_485_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_11_485_13&#39;)"><span class="hl_varref"><span class="mpre">n0</span></span></a><span class="mpre"> </span><a href="#loc_484_11_484_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_11_484_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
    where </span><a name="loc_484_11_484_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_11_484_12&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre">  = </span><a href="Data.Text.Array.html#loc_150_1_150_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_150_1_150_12&#39;)"><span class="hl_varref"><span class="mpre">A.unsafeIndex</span></span></a><span class="mpre"> </span><a href="#loc_480_12_480_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_12_480_15&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_480_16_480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_16_480_19&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_480_20_480_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_20_480_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
          </span><a name="loc_485_11_485_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_11_485_13&#39;)"><span class="hl_vardecl"><span class="mpre">n0</span></span></a><span class="mpre"> = </span><a href="Data.Text.Array.html#loc_150_1_150_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_150_1_150_12&#39;)"><span class="hl_varref"><span class="mpre">A.unsafeIndex</span></span></a><span class="mpre"> </span><a href="#loc_480_12_480_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_12_480_15&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_480_16_480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_16_480_19&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_480_20_480_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_20_480_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_480_1_480_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_1_480_5&#39;)"><span class="mpre">last</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT last -&gt; fused&quot; [~1] forall t.
    last t = S.last (stream t)
&quot;TEXT last -&gt; unfused&quot; [1] forall t.
    S.last (stream t) = last t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Returns all characters after the head of a &#39;Text&#39;, which</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- must be non-empty.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_498_1_498_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_1_498_5&#39;)"><span class="mpre">tail</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_498_1_498_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_1_498_5&#39;)"><span class="hl_fundecl"><span class="mpre">tail</span></span></a><span class="mpre"> </span><a name="loc_498_6_498_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_6_498_7&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_498_14_498_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_14_498_17&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_498_18_498_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_18_498_21&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_498_22_498_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_22_498_25&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_498_22_498_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_22_498_25&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">  = </span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_varref"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;tail&quot;</span></span><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_498_14_498_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_14_498_17&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_498_18_498_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_18_498_21&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_501_11_501_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_11_501_12&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_498_22_498_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_22_498_25&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_501_11_501_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_11_501_12&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">)
    where </span><a name="loc_501_11_501_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_11_501_12&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_80_1_80_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_80_1_80_6&#39;)"><span class="hl_varref"><span class="mpre">iter_</span></span></a><span class="mpre"> </span><a href="#loc_498_6_498_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_6_498_7&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_498_1_498_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_1_498_5&#39;)"><span class="mpre">tail</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT tail -&gt; fused&quot; [~1] forall t.
    tail t = unstream (S.tail (stream t))
&quot;TEXT tail -&gt; unfused&quot; [1] forall t.
    unstream (S.tail (stream t)) = tail t
 #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Returns all but the last character of a &#39;Text&#39;, which must</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- be non-empty.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_514_1_514_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_1_514_5&#39;)"><span class="mpre">init</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_514_1_514_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_1_514_5&#39;)"><span class="hl_fundecl"><span class="mpre">init</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_514_12_514_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_12_514_15&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_514_16_514_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_16_514_19&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_514_20_514_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_20_514_23&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) | </span><a href="#loc_514_20_514_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_20_514_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">                   = </span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_varref"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;init&quot;</span></span><span class="mpre">
                        | </span><a href="#loc_518_7_518_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_518_7_518_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0xDC00</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_518_7_518_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_518_7_518_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0xDFFF</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_514_12_514_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_12_514_15&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_514_16_514_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_16_514_19&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> (</span><a href="#loc_514_20_514_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_20_514_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">)
                        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                  = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_514_12_514_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_12_514_15&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_514_16_514_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_16_514_19&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> (</span><a href="#loc_514_20_514_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_20_514_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
    where
      </span><a name="loc_518_7_518_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_518_7_518_8&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = </span><a href="Data.Text.Array.html#loc_150_1_150_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_150_1_150_12&#39;)"><span class="hl_varref"><span class="mpre">A.unsafeIndex</span></span></a><span class="mpre"> </span><a href="#loc_514_12_514_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_12_514_15&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_514_16_514_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_16_514_19&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_514_20_514_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_20_514_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_514_1_514_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_1_514_5&#39;)"><span class="mpre">init</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT init -&gt; fused&quot; [~1] forall t.
    init t = unstream (S.init (stream t))
&quot;TEXT init -&gt; unfused&quot; [1] forall t.
    unstream (S.init (stream t)) = init t
 #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Tests whether a &#39;Text&#39; is empty or not.  Subject to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- fusion.</span></span><span class="mpre">
</span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="mpre">null</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_fundecl"><span class="mpre">null</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arr</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_off</span></span><span class="mpre"> </span><a name="loc_531_22_531_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_22_531_25&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) =
#if defined(ASSERTS)
    </span><span class="hl_varref"><span class="mpre">assert</span></span><span class="mpre"> (</span><a href="#loc_531_22_531_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_22_531_25&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
#endif
    </span><a href="#loc_531_22_531_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_22_531_25&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="mpre">null</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT null -&gt; fused&quot; [~1] forall t.
    null t = S.null (stream t)
&quot;TEXT null -&gt; unfused&quot; [1] forall t.
    S.null (stream t) = null t
 #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Tests whether a &#39;Text&#39; contains exactly one character.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_548_1_548_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_1_548_12&#39;)"><span class="mpre">isSingleton</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_548_1_548_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_1_548_12&#39;)"><span class="hl_vardecl"><span class="mpre">isSingleton</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_335_1_335_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_335_1_335_12&#39;)"><span class="hl_varref"><span class="mpre">S.isSingleton</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_548_1_548_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_1_548_12&#39;)"><span class="mpre">isSingleton</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Returns the number of characters in a &#39;Text&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_554_1_554_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_1_554_7&#39;)"><span class="mpre">length</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_554_1_554_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_1_554_7&#39;)"><span class="hl_fundecl"><span class="mpre">length</span></span></a><span class="mpre"> </span><a name="loc_554_8_554_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_8_554_9&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_128_1_128_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_128_1_128_7&#39;)"><span class="hl_varref"><span class="mpre">S.length</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_554_8_554_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_8_554_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_554_1_554_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_1_554_7&#39;)"><span class="mpre">length</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Compare the count of characters in a &#39;Text&#39; to a number.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function gives the same answer as comparing against the result</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of &#39;length&#39;, but can short circuit if the count of characters is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- greater than the number, and hence be more efficient.</span></span><span class="mpre">
</span><a href="#loc_564_1_564_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_14&#39;)"><span class="mpre">compareLength</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ordering</span></span><span class="mpre">
</span><a name="loc_564_1_564_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_14&#39;)"><span class="hl_fundecl"><span class="mpre">compareLength</span></span></a><span class="mpre"> </span><a name="loc_564_15_564_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_15_564_16&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> </span><a name="loc_564_17_564_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_17_564_18&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_321_1_321_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_321_1_321_15&#39;)"><span class="hl_varref"><span class="mpre">S.compareLengthI</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_564_15_564_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_15_564_16&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">) </span><a href="#loc_564_17_564_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_17_564_18&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_564_1_564_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_14&#39;)"><span class="mpre">compareLength</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT compareN/length -&gt; compareLength&quot; [~1] forall t n.
    compare (length t) n = compareLength t n
  #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT ==N/length -&gt; compareLength/==EQ&quot; [~1] forall t n.
    (==) (length t) n = compareLength t n == EQ
  #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT /=N/length -&gt; compareLength//=EQ&quot; [~1] forall t n.
    (/=) (length t) n = compareLength t n /= EQ
  #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT &lt;N/length -&gt; compareLength/==LT&quot; [~1] forall t n.
    (&lt;) (length t) n = compareLength t n == LT
  #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT &lt;=N/length -&gt; compareLength//=GT&quot; [~1] forall t n.
    (&lt;=) (length t) n = compareLength t n /= GT
  #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT &gt;N/length -&gt; compareLength/==GT&quot; [~1] forall t n.
    (&gt;) (length t) n = compareLength t n == GT
  #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT &gt;=N/length -&gt; compareLength//=LT&quot; [~1] forall t n.
    (&gt;=) (length t) n = compareLength t n /= LT
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Transformations</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;map&#39; @f@ @t@ is the &#39;Text&#39; obtained by applying @f@ to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- each element of @t@.  Subject to fusion.  Performs replacement on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_608_1_608_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_1_608_4&#39;)"><span class="mpre">map</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_608_1_608_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_1_608_4&#39;)"><span class="hl_fundecl"><span class="mpre">map</span></span></a><span class="mpre"> </span><a name="loc_608_5_608_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_5_608_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_608_7_608_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_7_608_8&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_351_1_351_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_351_1_351_4&#39;)"><span class="hl_varref"><span class="mpre">S.map</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_608_5_608_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_5_608_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_608_7_608_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_7_608_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_608_1_608_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_1_608_4&#39;)"><span class="mpre">map</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;intercalate&#39; function takes a &#39;Text&#39; and a list of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39;s and concatenates the list after interspersing the first</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- argument between each element of the list.</span></span><span class="mpre">
</span><a href="#loc_615_1_615_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_1_615_12&#39;)"><span class="mpre">intercalate</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">] -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_615_1_615_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_1_615_12&#39;)"><span class="hl_fundecl"><span class="mpre">intercalate</span></span></a><span class="mpre"> </span><a name="loc_615_13_615_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_13_615_14&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="#loc_849_1_849_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_1_849_7&#39;)"><span class="hl_varref"><span class="mpre">concat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> (</span><a href="Data.Text.Internal.Functions.html#loc_26_1_26_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Functions.html#loc_26_1_26_12&#39;)"><span class="hl_varref"><span class="mpre">F.intersperse</span></span></a><span class="mpre"> </span><a href="#loc_615_13_615_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_13_615_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_615_1_615_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_1_615_12&#39;)"><span class="mpre">intercalate</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;intersperse&#39; function takes a character and places it</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- between the characters of a &#39;Text&#39;.  Subject to fusion.  Performs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_622_1_622_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_1_622_12&#39;)"><span class="mpre">intersperse</span></a><span class="mpre">     :: </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_622_1_622_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_1_622_12&#39;)"><span class="hl_fundecl"><span class="mpre">intersperse</span></span></a><span class="mpre"> </span><a name="loc_622_13_622_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_13_622_14&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_622_15_622_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_15_622_16&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_370_1_370_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_370_1_370_12&#39;)"><span class="hl_varref"><span class="mpre">S.intersperse</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><a href="#loc_622_13_622_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_13_622_14&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_622_15_622_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_15_622_16&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_622_1_622_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_1_622_12&#39;)"><span class="mpre">intersperse</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Reverse the characters of a string. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_627_1_627_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_8&#39;)"><span class="mpre">reverse</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_627_1_627_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_8&#39;)"><span class="hl_fundecl"><span class="mpre">reverse</span></span></a><span class="mpre"> </span><a name="loc_627_9_627_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_9_627_10&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_133_1_133_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_133_1_133_8&#39;)"><span class="hl_varref"><span class="mpre">S.reverse</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_627_9_627_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_9_627_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_627_1_627_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_8&#39;)"><span class="mpre">reverse</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(m+n)/ Replace every occurrence of one substring with another.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In (unlikely) bad cases, this function&#39;s time complexity degrades</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- towards /O(n*m)/.</span></span><span class="mpre">
</span><a href="#loc_635_1_635_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_635_1_635_8&#39;)"><span class="mpre">replace</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_635_1_635_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_635_1_635_8&#39;)"><span class="hl_fundecl"><span class="mpre">replace</span></span></a><span class="mpre"> </span><a name="loc_635_9_635_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_635_9_635_15&#39;)"><span class="hl_specname"><span class="mpre">needle</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> _      _      </span><a name="loc_635_36_635_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_635_36_635_42&#39;)"><span class="hl_vardecl"><span class="mpre">neeLen</span></span></a><span class="mpre">)
               (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_636_22_636_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_22_636_28&#39;)"><span class="hl_vardecl"><span class="mpre">repArr</span></span></a><span class="mpre"> </span><a name="loc_636_29_636_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_29_636_35&#39;)"><span class="hl_vardecl"><span class="mpre">repOff</span></span></a><span class="mpre"> </span><a name="loc_636_36_636_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_36_636_42&#39;)"><span class="hl_vardecl"><span class="mpre">repLen</span></span></a><span class="mpre">)
      </span><a name="loc_637_7_637_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_7_637_15&#39;)"><span class="hl_specname"><span class="mpre">haystack</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_637_22_637_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_22_637_28&#39;)"><span class="hl_vardecl"><span class="mpre">hayArr</span></span></a><span class="mpre"> </span><a name="loc_637_29_637_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_29_637_35&#39;)"><span class="hl_vardecl"><span class="mpre">hayOff</span></span></a><span class="mpre"> </span><a name="loc_637_36_637_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_36_637_42&#39;)"><span class="hl_vardecl"><span class="mpre">hayLen</span></span></a><span class="mpre">)
  | </span><a href="#loc_635_36_635_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_635_36_635_42&#39;)"><span class="hl_varref"><span class="mpre">neeLen</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> = </span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_varref"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;replace&quot;</span></span><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">L.null</span></span><span class="mpre"> </span><a href="#loc_644_5_644_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_644_5_644_8&#39;)"><span class="hl_varref"><span class="mpre">ixs</span></span></a><span class="mpre">  = </span><a href="#loc_637_7_637_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_7_637_15&#39;)"><span class="hl_varref"><span class="mpre">haystack</span></span></a><span class="mpre">
  | </span><a href="#loc_645_5_645_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_645_5_645_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">     = </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">A.run</span></span></a><span class="mpre"> </span><a href="#loc_646_5_646_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_646_5_646_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_645_5_645_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_645_5_645_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
  | </span><a href="#loc_645_5_645_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_645_5_645_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">     = </span><a href="#loc_1660_1_1660_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1660_1_1660_14&#39;)"><span class="hl_varref"><span class="mpre">overflowError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;replace&quot;</span></span><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">   = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
  where
    </span><a name="loc_644_5_644_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_644_5_644_8&#39;)"><span class="hl_vardecl"><span class="mpre">ixs</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Search.html#loc_52_1_52_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Search.html#loc_52_1_52_8&#39;)"><span class="hl_varref"><span class="mpre">indices</span></span></a><span class="mpre"> </span><a href="#loc_635_9_635_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_635_9_635_15&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre"> </span><a href="#loc_637_7_637_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_7_637_15&#39;)"><span class="hl_varref"><span class="mpre">haystack</span></span></a><span class="mpre">
    </span><a name="loc_645_5_645_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_645_5_645_8&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_637_36_637_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_36_637_42&#39;)"><span class="hl_varref"><span class="mpre">hayLen</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> (</span><a href="#loc_635_36_635_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_635_36_635_42&#39;)"><span class="hl_varref"><span class="mpre">neeLen</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_636_36_636_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_36_636_42&#39;)"><span class="hl_varref"><span class="mpre">repLen</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">L.length</span></span><span class="mpre"> </span><a href="#loc_644_5_644_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_644_5_644_8&#39;)"><span class="hl_varref"><span class="mpre">ixs</span></span></a><span class="mpre">
    </span><a name="loc_646_5_646_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_646_5_646_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = do
      </span><a name="loc_647_7_647_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_647_7_647_11&#39;)"><span class="hl_vardecl"><span class="mpre">marr</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Text.Array.html#loc_115_1_115_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_115_1_115_4&#39;)"><span class="hl_varref"><span class="mpre">A.new</span></span></a><span class="mpre"> </span><a href="#loc_645_5_645_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_645_5_645_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      let </span><a name="loc_648_11_648_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_11_648_15&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a name="loc_648_17_648_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_17_648_18&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_648_19_648_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_19_648_21&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">) </span><a name="loc_648_23_648_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_23_648_24&#39;)"><span class="hl_vardecl"><span class="mpre">o</span></span></a><span class="mpre"> </span><a name="loc_648_25_648_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_25_648_26&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> = do
            let </span><a name="loc_649_17_649_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_649_17_649_19&#39;)"><span class="hl_vardecl"><span class="mpre">d0</span></span></a><span class="mpre"> = </span><a href="#loc_648_25_648_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_25_648_26&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_648_17_648_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_17_648_18&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_648_23_648_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_23_648_24&#39;)"><span class="hl_varref"><span class="mpre">o</span></span></a><span class="mpre">
                </span><a name="loc_650_17_650_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_650_17_650_19&#39;)"><span class="hl_vardecl"><span class="mpre">d1</span></span></a><span class="mpre"> = </span><a href="#loc_649_17_649_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_649_17_649_19&#39;)"><span class="hl_varref"><span class="mpre">d0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_636_36_636_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_36_636_42&#39;)"><span class="hl_varref"><span class="mpre">repLen</span></span></a><span class="mpre">
            </span><a href="Data.Text.Array.html#loc_215_1_215_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_215_1_215_6&#39;)"><span class="hl_varref"><span class="mpre">A.copyI</span></span></a><span class="mpre"> </span><a href="#loc_647_7_647_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_647_7_647_11&#39;)"><span class="hl_varref"><span class="mpre">marr</span></span></a><span class="mpre"> </span><a href="#loc_648_25_648_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_25_648_26&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">  </span><a href="#loc_637_22_637_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_22_637_28&#39;)"><span class="hl_varref"><span class="mpre">hayArr</span></span></a><span class="mpre"> (</span><a href="#loc_637_29_637_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_29_637_35&#39;)"><span class="hl_varref"><span class="mpre">hayOff</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_648_23_648_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_23_648_24&#39;)"><span class="hl_varref"><span class="mpre">o</span></span></a><span class="mpre">) </span><a href="#loc_649_17_649_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_649_17_649_19&#39;)"><span class="hl_varref"><span class="mpre">d0</span></span></a><span class="mpre">
            </span><a href="Data.Text.Array.html#loc_215_1_215_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_215_1_215_6&#39;)"><span class="hl_varref"><span class="mpre">A.copyI</span></span></a><span class="mpre"> </span><a href="#loc_647_7_647_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_647_7_647_11&#39;)"><span class="hl_varref"><span class="mpre">marr</span></span></a><span class="mpre"> </span><a href="#loc_649_17_649_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_649_17_649_19&#39;)"><span class="hl_varref"><span class="mpre">d0</span></span></a><span class="mpre"> </span><a href="#loc_636_22_636_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_22_636_28&#39;)"><span class="hl_varref"><span class="mpre">repArr</span></span></a><span class="mpre"> </span><a href="#loc_636_29_636_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_29_636_35&#39;)"><span class="hl_varref"><span class="mpre">repOff</span></span></a><span class="mpre"> </span><a href="#loc_650_17_650_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_650_17_650_19&#39;)"><span class="hl_varref"><span class="mpre">d1</span></span></a><span class="mpre">
            </span><a href="#loc_648_11_648_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_11_648_15&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_648_19_648_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_19_648_21&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> (</span><a href="#loc_648_17_648_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_17_648_18&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_635_36_635_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_635_36_635_42&#39;)"><span class="hl_varref"><span class="mpre">neeLen</span></span></a><span class="mpre">) </span><a href="#loc_650_17_650_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_650_17_650_19&#39;)"><span class="hl_varref"><span class="mpre">d1</span></span></a><span class="mpre">
          </span><a href="#loc_648_11_648_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_11_648_15&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> []     </span><a name="loc_654_23_654_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_23_654_24&#39;)"><span class="hl_vardecl"><span class="mpre">o</span></span></a><span class="mpre"> </span><a name="loc_654_25_654_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_25_654_26&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> = </span><a href="Data.Text.Array.html#loc_215_1_215_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_215_1_215_6&#39;)"><span class="hl_varref"><span class="mpre">A.copyI</span></span></a><span class="mpre"> </span><a href="#loc_647_7_647_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_647_7_647_11&#39;)"><span class="hl_varref"><span class="mpre">marr</span></span></a><span class="mpre"> </span><a href="#loc_654_25_654_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_25_654_26&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><a href="#loc_637_22_637_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_22_637_28&#39;)"><span class="hl_varref"><span class="mpre">hayArr</span></span></a><span class="mpre"> (</span><a href="#loc_637_29_637_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_29_637_35&#39;)"><span class="hl_varref"><span class="mpre">hayOff</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_654_23_654_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_23_654_24&#39;)"><span class="hl_varref"><span class="mpre">o</span></span></a><span class="mpre">) </span><a href="#loc_645_5_645_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_645_5_645_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      </span><a href="#loc_648_11_648_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_648_11_648_15&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_644_5_644_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_644_5_644_8&#39;)"><span class="hl_varref"><span class="mpre">ixs</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
      </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_647_7_647_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_647_7_647_11&#39;)"><span class="hl_varref"><span class="mpre">marr</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ** Case conversions (folds)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- $case</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When case converting &#39;Text&#39; values, do not use combinators like</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @map toUpper@ to case convert each character of a string</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- individually, as this gives incorrect results according to the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- rules of some writing systems.  The whole-string case conversion</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- functions from this module, such as @toUpper@, obey the correct</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- case conversion rules.  As a result, these functions may map one</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- input character to two or three output characters. For examples,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- see the documentation of each function.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Note/: In some languages, case conversion is a locale- and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- context-dependent operation. The case conversion functions in this</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- module are /not/ locale sensitive. Programs that require locale</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- sensitivity should use appropriate versions of the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://hackage.haskell.org/package/text-icu-0.6.3.7/docs/Data-Text-ICU.html#g:4 case mapping functions from the text-icu package &gt;.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Convert a string to folded case.  Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function is mainly useful for performing caseless (also known</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as case insensitive) string comparisons.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A string @x@ is a caseless match for a string @y@ if and only if:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @toCaseFold x == toCaseFold y@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The result string may be longer than the input string, and may</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- differ from applying &#39;toLower&#39; to the input string.  For instance,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the Armenian small ligature \&quot;&amp;#xfb13;\&quot; (men now, U+FB13) is case</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- folded to the sequence \&quot;&amp;#x574;\&quot; (men, U+0574) followed by</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \&quot;&amp;#x576;\&quot; (now, U+0576), while the Greek \&quot;&amp;#xb5;\&quot; (micro sign,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- U+00B5) is case folded to \&quot;&amp;#x3bc;\&quot; (small letter mu, U+03BC)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- instead of itself.</span></span><span class="mpre">
</span><a href="#loc_695_1_695_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_1_695_11&#39;)"><span class="mpre">toCaseFold</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_695_1_695_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_1_695_11&#39;)"><span class="hl_fundecl"><span class="mpre">toCaseFold</span></span></a><span class="mpre"> </span><a name="loc_695_12_695_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_12_695_13&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_421_1_421_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_421_1_421_11&#39;)"><span class="hl_varref"><span class="mpre">S.toCaseFold</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_695_12_695_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_12_695_13&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [0] </span><a href="#loc_695_1_695_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_1_695_11&#39;)"><span class="mpre">toCaseFold</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Convert a string to lower case, using simple case</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- conversion.  Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The result string may be longer than the input string.  For</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- instance, \&quot;&amp;#x130;\&quot; (Latin capital letter I with dot above,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- U+0130) maps to the sequence \&quot;i\&quot; (Latin small letter i, U+0069)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- followed by \&quot; &amp;#x307;\&quot; (combining dot above, U+0307).</span></span><span class="mpre">
</span><a href="#loc_706_1_706_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_706_1_706_8&#39;)"><span class="mpre">toLower</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_706_1_706_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_706_1_706_8&#39;)"><span class="hl_fundecl"><span class="mpre">toLower</span></span></a><span class="mpre"> </span><a name="loc_706_9_706_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_706_9_706_10&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_438_1_438_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_438_1_438_8&#39;)"><span class="hl_varref"><span class="mpre">S.toLower</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_706_9_706_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_706_9_706_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_706_1_706_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_706_1_706_8&#39;)"><span class="mpre">toLower</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Convert a string to upper case, using simple case</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- conversion.  Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The result string may be longer than the input string.  For</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- instance, the German \&quot;&amp;#xdf;\&quot; (eszett, U+00DF) maps to the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- two-letter sequence \&quot;SS\&quot;.</span></span><span class="mpre">
</span><a href="#loc_716_1_716_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_716_1_716_8&#39;)"><span class="mpre">toUpper</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_716_1_716_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_716_1_716_8&#39;)"><span class="hl_fundecl"><span class="mpre">toUpper</span></span></a><span class="mpre"> </span><a name="loc_716_9_716_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_716_9_716_10&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_429_1_429_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_429_1_429_8&#39;)"><span class="hl_varref"><span class="mpre">S.toUpper</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_716_9_716_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_716_9_716_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_716_1_716_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_716_1_716_8&#39;)"><span class="mpre">toUpper</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Convert a string to title case, using simple case</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- conversion. Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The first letter of the input is converted to title case, as is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- every subsequent letter that immediately follows a non-letter.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Every letter that immediately follows another letter is converted</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to lower case.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The result string may be longer than the input string. For example,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the Latin small ligature &amp;#xfb02; (U+FB02) is converted to the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- sequence Latin capital letter F (U+0046) followed by Latin small</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- letter l (U+006C).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Note/: this function does not take language or culture specific</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- rules into account. For instance, in English, different style</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- guides disagree on whether the book name \&quot;The Hill of the Red</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Fox\&quot; is correctly title cased&amp;#x2014;but this function will</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- capitalize /every/ word.</span></span><span class="mpre">
</span><a href="#loc_738_1_738_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_1_738_8&#39;)"><span class="mpre">toTitle</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_738_1_738_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_1_738_8&#39;)"><span class="hl_fundecl"><span class="mpre">toTitle</span></span></a><span class="mpre"> </span><a name="loc_738_9_738_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_9_738_10&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_460_1_460_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_460_1_460_8&#39;)"><span class="hl_varref"><span class="mpre">S.toTitle</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_738_9_738_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_9_738_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_738_1_738_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_1_738_8&#39;)"><span class="mpre">toTitle</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Left-justify a string to the given length, using the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- specified fill character on the right. Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; justifyLeft 7 &#39;x&#39; &quot;foo&quot;    == &quot;fooxxxx&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; justifyLeft 3 &#39;x&#39; &quot;foobar&quot; == &quot;foobar&quot;</span></span><span class="mpre">
</span><a href="#loc_750_1_750_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_1_750_12&#39;)"><span class="mpre">justifyLeft</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_750_1_750_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_1_750_12&#39;)"><span class="hl_fundecl"><span class="mpre">justifyLeft</span></span></a><span class="mpre"> </span><a name="loc_750_13_750_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_13_750_14&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_750_15_750_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_15_750_16&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_750_17_750_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_17_750_18&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><a href="#loc_753_9_753_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_753_9_753_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_750_13_750_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_13_750_14&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">  = </span><a href="#loc_750_17_750_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_17_750_18&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_750_17_750_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_17_750_18&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="hl_infix"><span class="mpre">`append`</span></span></a><span class="mpre"> </span><a href="#loc_986_1_986_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_1_986_14&#39;)"><span class="hl_varref"><span class="mpre">replicateChar</span></span></a><span class="mpre"> (</span><a href="#loc_750_13_750_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_13_750_14&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_753_9_753_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_753_9_753_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">) </span><a href="#loc_750_15_750_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_15_750_16&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">
  where </span><a name="loc_753_9_753_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_753_9_753_12&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_554_1_554_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_1_554_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_750_17_750_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_17_750_18&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_750_1_750_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_1_750_12&#39;)"><span class="mpre">justifyLeft</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT justifyLeft -&gt; fused&quot; [~1] forall k c t.
    justifyLeft k c t = unstream (S.justifyLeftI k c (stream t))
&quot;TEXT justifyLeft -&gt; unfused&quot; [1] forall k c t.
    unstream (S.justifyLeftI k c (stream t)) = justifyLeft k c t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Right-justify a string to the given length, using the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- specified fill character on the left.  Performs replacement on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid scalar values.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; justifyRight 7 &#39;x&#39; &quot;bar&quot;    == &quot;xxxxbar&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; justifyRight 3 &#39;x&#39; &quot;foobar&quot; == &quot;foobar&quot;</span></span><span class="mpre">
</span><a href="#loc_772_1_772_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_1_772_13&#39;)"><span class="mpre">justifyRight</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_772_1_772_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_1_772_13&#39;)"><span class="hl_fundecl"><span class="mpre">justifyRight</span></span></a><span class="mpre"> </span><a name="loc_772_14_772_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_14_772_15&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_772_16_772_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_16_772_17&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_772_18_772_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_18_772_19&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><a href="#loc_775_9_775_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_9_775_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_772_14_772_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_14_772_15&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">  = </span><a href="#loc_772_18_772_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_18_772_19&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_986_1_986_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_1_986_14&#39;)"><span class="hl_varref"><span class="mpre">replicateChar</span></span></a><span class="mpre"> (</span><a href="#loc_772_14_772_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_14_772_15&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_775_9_775_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_9_775_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">) </span><a href="#loc_772_16_772_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_16_772_17&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><a href="#loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="hl_infix"><span class="mpre">`append`</span></span></a><span class="mpre"> </span><a href="#loc_772_18_772_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_18_772_19&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
  where </span><a name="loc_775_9_775_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_9_775_12&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_554_1_554_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_1_554_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_772_18_772_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_18_772_19&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_772_1_772_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_1_772_13&#39;)"><span class="mpre">justifyRight</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Center a string to the given length, using the specified</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- fill character on either side.  Performs replacement on invalid</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- scalar values.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; center 8 &#39;x&#39; &quot;HS&quot; = &quot;xxxHSxxx&quot;</span></span><span class="mpre">
</span><a href="#loc_786_1_786_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_1_786_7&#39;)"><span class="mpre">center</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_786_1_786_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_1_786_7&#39;)"><span class="hl_fundecl"><span class="mpre">center</span></span></a><span class="mpre"> </span><a name="loc_786_8_786_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_8_786_9&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_786_10_786_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_10_786_11&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_786_12_786_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_12_786_13&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><a href="#loc_789_9_789_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_789_9_789_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_786_8_786_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_8_786_9&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">  = </span><a href="#loc_786_12_786_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_12_786_13&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_986_1_986_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_1_986_14&#39;)"><span class="hl_varref"><span class="mpre">replicateChar</span></span></a><span class="mpre"> </span><a href="#loc_792_9_792_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_792_9_792_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_786_10_786_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_10_786_11&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><a href="#loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="hl_infix"><span class="mpre">`append`</span></span></a><span class="mpre"> </span><a href="#loc_786_12_786_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_12_786_13&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="hl_infix"><span class="mpre">`append`</span></span></a><span class="mpre"> </span><a href="#loc_986_1_986_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_1_986_14&#39;)"><span class="hl_varref"><span class="mpre">replicateChar</span></span></a><span class="mpre"> </span><a href="#loc_791_9_791_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_791_9_791_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><a href="#loc_786_10_786_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_10_786_11&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">
  where </span><a name="loc_789_9_789_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_789_9_789_12&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_554_1_554_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_1_554_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_786_12_786_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_12_786_13&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
        </span><a name="loc_790_9_790_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_9_790_10&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre">   = </span><a href="#loc_786_8_786_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_8_786_9&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_789_9_789_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_789_9_789_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
        </span><a name="loc_791_9_791_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_791_9_791_10&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">   = </span><a href="#loc_790_9_790_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_9_790_10&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`quot`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">
        </span><a name="loc_792_9_792_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_792_9_792_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">   = </span><a href="#loc_790_9_790_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_9_790_10&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_791_9_791_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_791_9_791_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_786_1_786_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_1_786_7&#39;)"><span class="mpre">center</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;transpose&#39; function transposes the rows and columns</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of its &#39;Text&#39; argument.  Note that this function uses &#39;pack&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unpack&#39;, and the list version of transpose, and is thus not very</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- efficient.</span></span><span class="mpre">
</span><a href="#loc_800_1_800_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_800_1_800_10&#39;)"><span class="mpre">transpose</span></a><span class="mpre"> :: [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">] -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_800_1_800_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_800_1_800_10&#39;)"><span class="hl_fundecl"><span class="mpre">transpose</span></span></a><span class="mpre"> </span><a name="loc_800_11_800_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_800_11_800_13&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">P.map</span></span><span class="mpre"> </span><a href="#loc_387_1_387_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_1_387_5&#39;)"><span class="hl_varref"><span class="mpre">pack</span></span></a><span class="mpre"> (</span><a href="Data.List.html#loc_451_1_451_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_451_1_451_10&#39;)"><span class="hl_varref"><span class="mpre">L.transpose</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">P.map</span></span><span class="mpre"> </span><a href="#loc_392_1_392_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_7&#39;)"><span class="hl_varref"><span class="mpre">unpack</span></span></a><span class="mpre"> </span><a href="#loc_800_11_800_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_800_11_800_13&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">))

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Reducing &#39;Text&#39;s (folds)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;foldl&#39;, applied to a binary operator, a starting value</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (typically the left-identity of the operator), and a &#39;Text&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- reduces the &#39;Text&#39; using the binary operator, from left to right.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_810_1_810_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_1_810_6&#39;)"><span class="mpre">foldl</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_810_1_810_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_1_810_6&#39;)"><span class="hl_fundecl"><span class="mpre">foldl</span></span></a><span class="mpre"> </span><a name="loc_810_7_810_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_7_810_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_810_9_810_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_9_810_10&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_810_11_810_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_11_810_12&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_497_1_497_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_497_1_497_6&#39;)"><span class="hl_varref"><span class="mpre">S.foldl</span></span></a><span class="mpre"> </span><a href="#loc_810_7_810_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_7_810_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_810_9_810_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_9_810_10&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_810_11_810_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_11_810_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_810_1_810_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_810_1_810_6&#39;)"><span class="mpre">foldl</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ A strict version of &#39;foldl&#39;.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_815_1_815_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_1_815_7&#39;)"><span class="mpre">foldl&#39;</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_815_1_815_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_1_815_7&#39;)"><span class="hl_fundecl"><span class="mpre">foldl&#39;</span></span></a><span class="mpre"> </span><a name="loc_815_8_815_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_8_815_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_815_10_815_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_10_815_11&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_815_12_815_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_12_815_13&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_507_1_507_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_507_1_507_7&#39;)"><span class="hl_varref"><span class="mpre">S.foldl&#39;</span></span></a><span class="mpre"> </span><a href="#loc_815_8_815_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_8_815_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_815_10_815_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_10_815_11&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_815_12_815_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_12_815_13&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_815_1_815_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_815_1_815_7&#39;)"><span class="mpre">foldl&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ A variant of &#39;foldl&#39; that has no starting value argument,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and thus must be applied to a non-empty &#39;Text&#39;.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_821_1_821_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_821_1_821_7&#39;)"><span class="mpre">foldl1</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_821_1_821_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_821_1_821_7&#39;)"><span class="hl_fundecl"><span class="mpre">foldl1</span></span></a><span class="mpre"> </span><a name="loc_821_8_821_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_821_8_821_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_821_10_821_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_821_10_821_11&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_518_1_518_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_518_1_518_7&#39;)"><span class="hl_varref"><span class="mpre">S.foldl1</span></span></a><span class="mpre"> </span><a href="#loc_821_8_821_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_821_8_821_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_821_10_821_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_821_10_821_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_821_1_821_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_821_1_821_7&#39;)"><span class="mpre">foldl1</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ A strict version of &#39;foldl1&#39;.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_826_1_826_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_1_826_8&#39;)"><span class="mpre">foldl1&#39;</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_826_1_826_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_1_826_8&#39;)"><span class="hl_fundecl"><span class="mpre">foldl1&#39;</span></span></a><span class="mpre"> </span><a name="loc_826_9_826_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_9_826_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_826_11_826_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_11_826_12&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_532_1_532_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_532_1_532_8&#39;)"><span class="hl_varref"><span class="mpre">S.foldl1&#39;</span></span></a><span class="mpre"> </span><a href="#loc_826_9_826_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_9_826_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_826_11_826_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_11_826_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_826_1_826_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_1_826_8&#39;)"><span class="mpre">foldl1&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;foldr&#39;, applied to a binary operator, a starting value</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (typically the right-identity of the operator), and a &#39;Text&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- reduces the &#39;Text&#39; using the binary operator, from right to left.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_834_1_834_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_1_834_6&#39;)"><span class="mpre">foldr</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_834_1_834_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_1_834_6&#39;)"><span class="hl_fundecl"><span class="mpre">foldr</span></span></a><span class="mpre"> </span><a name="loc_834_7_834_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_7_834_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_834_9_834_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_9_834_10&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_834_11_834_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_11_834_12&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_548_1_548_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_548_1_548_6&#39;)"><span class="hl_varref"><span class="mpre">S.foldr</span></span></a><span class="mpre"> </span><a href="#loc_834_7_834_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_7_834_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_834_9_834_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_9_834_10&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_834_11_834_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_11_834_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_834_1_834_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_1_834_6&#39;)"><span class="mpre">foldr</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ A variant of &#39;foldr&#39; that has no starting value argument,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and thus must be applied to a non-empty &#39;Text&#39;.  Subject to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- fusion.</span></span><span class="mpre">
</span><a href="#loc_841_1_841_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_1_841_7&#39;)"><span class="mpre">foldr1</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_841_1_841_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_1_841_7&#39;)"><span class="hl_fundecl"><span class="mpre">foldr1</span></span></a><span class="mpre"> </span><a name="loc_841_8_841_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_8_841_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_841_10_841_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_10_841_11&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_560_1_560_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_560_1_560_7&#39;)"><span class="hl_varref"><span class="mpre">S.foldr1</span></span></a><span class="mpre"> </span><a href="#loc_841_8_841_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_8_841_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_841_10_841_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_10_841_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_841_1_841_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_1_841_7&#39;)"><span class="mpre">foldr1</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ** Special folds</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Concatenate a list of &#39;Text&#39;s.</span></span><span class="mpre">
</span><a href="#loc_849_1_849_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_1_849_7&#39;)"><span class="mpre">concat</span></a><span class="mpre"> :: [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">] -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_849_1_849_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_1_849_7&#39;)"><span class="hl_fundecl"><span class="mpre">concat</span></span></a><span class="mpre"> </span><a name="loc_849_8_849_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_8_849_10&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre"> = case </span><a href="#loc_854_5_854_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_5_854_8&#39;)"><span class="hl_varref"><span class="mpre">ts&#39;</span></span></a><span class="mpre"> of
              [] -&gt; </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
              [</span><a name="loc_851_16_851_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_851_16_851_17&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">] -&gt; </span><a href="#loc_851_16_851_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_851_16_851_17&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
              _ -&gt; </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">A.run</span></span></a><span class="mpre"> </span><a href="#loc_856_5_856_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_856_5_856_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_855_5_855_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_855_5_855_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
  where
    </span><a name="loc_854_5_854_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_5_854_8&#39;)"><span class="hl_vardecl"><span class="mpre">ts&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">L.filter</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre">) </span><a href="#loc_849_8_849_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_8_849_10&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">
    </span><a name="loc_855_5_855_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_855_5_855_8&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_1649_1_1649_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1649_1_1649_5&#39;)"><span class="hl_varref"><span class="mpre">sumP</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;concat&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">L.map</span></span><span class="mpre"> </span><a href="Data.Text.Unsafe.html#loc_112_1_112_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_112_1_112_13&#39;)"><span class="hl_varref"><span class="mpre">lengthWord16</span></span></a><span class="mpre"> </span><a href="#loc_854_5_854_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_5_854_8&#39;)"><span class="hl_varref"><span class="mpre">ts&#39;</span></span></a><span class="mpre">
    </span><a name="loc_856_5_856_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_856_5_856_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
      </span><a name="loc_857_7_857_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_857_7_857_10&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Text.Array.html#loc_115_1_115_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_115_1_115_4&#39;)"><span class="hl_varref"><span class="mpre">A.new</span></span></a><span class="mpre"> </span><a href="#loc_855_5_855_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_855_5_855_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      let </span><a name="loc_858_11_858_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_11_858_15&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_858_16_858_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_16_858_17&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_858_24_858_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_24_858_25&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_858_26_858_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_26_858_27&#39;)"><span class="hl_vardecl"><span class="mpre">o</span></span></a><span class="mpre"> </span><a name="loc_858_28_858_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_28_858_29&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">) =
            let !</span><a name="loc_859_18_859_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_859_18_859_19&#39;)"><span class="hl_vardecl"><span class="mpre">j</span></span></a><span class="mpre"> = </span><a href="#loc_858_16_858_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_16_858_17&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_858_28_858_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_28_858_29&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> in </span><a href="Data.Text.Array.html#loc_215_1_215_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_215_1_215_6&#39;)"><span class="hl_varref"><span class="mpre">A.copyI</span></span></a><span class="mpre"> </span><a href="#loc_857_7_857_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_857_7_857_10&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_858_16_858_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_16_858_17&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_858_24_858_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_24_858_25&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_858_26_858_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_26_858_27&#39;)"><span class="hl_varref"><span class="mpre">o</span></span></a><span class="mpre"> </span><a href="#loc_859_18_859_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_859_18_859_19&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_859_18_859_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_859_18_859_19&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre">
      </span><a href="Control.Monad.html#loc_240_1_240_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_240_1_240_6&#39;)"><span class="hl_varref"><span class="mpre">foldM</span></span></a><span class="mpre"> </span><a href="#loc_858_11_858_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_858_11_858_15&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_854_5_854_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_5_854_8&#39;)"><span class="hl_varref"><span class="mpre">ts&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_857_7_857_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_857_7_857_10&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Map a function over a &#39;Text&#39; that results in a &#39;Text&#39;, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- concatenate the results.</span></span><span class="mpre">
</span><a href="#loc_865_1_865_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_865_1_865_10&#39;)"><span class="mpre">concatMap</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_865_1_865_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_865_1_865_10&#39;)"><span class="hl_fundecl"><span class="mpre">concatMap</span></span></a><span class="mpre"> </span><a name="loc_865_11_865_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_865_11_865_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_849_1_849_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_1_849_7&#39;)"><span class="hl_varref"><span class="mpre">concat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_834_1_834_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_834_1_834_6&#39;)"><span class="hl_varref"><span class="mpre">foldr</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">(:)</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_865_11_865_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_865_11_865_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) []
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_865_1_865_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_865_1_865_10&#39;)"><span class="mpre">concatMap</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;any&#39; @p@ @t@ determines whether any character in the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39; @t@ satisifes the predicate @p@. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_871_1_871_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_1_871_4&#39;)"><span class="mpre">any</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_871_1_871_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_1_871_4&#39;)"><span class="hl_fundecl"><span class="mpre">any</span></span></a><span class="mpre"> </span><a name="loc_871_5_871_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_5_871_6&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_871_7_871_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_7_871_8&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_594_1_594_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_594_1_594_4&#39;)"><span class="hl_varref"><span class="mpre">S.any</span></span></a><span class="mpre"> </span><a href="#loc_871_5_871_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_5_871_6&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_871_7_871_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_7_871_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_871_1_871_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_1_871_4&#39;)"><span class="mpre">any</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;all&#39; @p@ @t@ determines whether all characters in the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39; @t@ satisify the predicate @p@. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_877_1_877_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_877_1_877_4&#39;)"><span class="mpre">all</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_877_1_877_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_877_1_877_4&#39;)"><span class="hl_fundecl"><span class="mpre">all</span></span></a><span class="mpre"> </span><a name="loc_877_5_877_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_877_5_877_6&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_877_7_877_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_877_7_877_8&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_606_1_606_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_606_1_606_4&#39;)"><span class="hl_varref"><span class="mpre">S.all</span></span></a><span class="mpre"> </span><a href="#loc_877_5_877_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_877_5_877_6&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_877_7_877_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_877_7_877_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_877_1_877_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_877_1_877_4&#39;)"><span class="mpre">all</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;maximum&#39; returns the maximum value from a &#39;Text&#39;, which</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- must be non-empty. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_883_1_883_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_883_1_883_8&#39;)"><span class="mpre">maximum</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_883_1_883_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_883_1_883_8&#39;)"><span class="hl_fundecl"><span class="mpre">maximum</span></span></a><span class="mpre"> </span><a name="loc_883_9_883_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_883_9_883_10&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_618_1_618_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_618_1_618_8&#39;)"><span class="hl_varref"><span class="mpre">S.maximum</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_883_9_883_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_883_9_883_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_883_1_883_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_883_1_883_8&#39;)"><span class="mpre">maximum</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;minimum&#39; returns the minimum value from a &#39;Text&#39;, which</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- must be non-empty. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_889_1_889_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_1_889_8&#39;)"><span class="mpre">minimum</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_889_1_889_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_1_889_8&#39;)"><span class="hl_fundecl"><span class="mpre">minimum</span></span></a><span class="mpre"> </span><a name="loc_889_9_889_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_9_889_10&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_635_1_635_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_635_1_635_8&#39;)"><span class="hl_varref"><span class="mpre">S.minimum</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_889_9_889_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_9_889_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_889_1_889_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_1_889_8&#39;)"><span class="mpre">minimum</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Building &#39;Text&#39;s</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;scanl&#39; is similar to &#39;foldl&#39;, but returns a list of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- successive reduced values from the left. Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; scanl f z [x1, x2, ...] == [z, z `f` x1, (z `f` x1) `f` x2, ...]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; last (scanl f z xs) == foldl f z xs.</span></span><span class="mpre">
</span><a href="#loc_905_1_905_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_1_905_6&#39;)"><span class="mpre">scanl</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_905_1_905_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_1_905_6&#39;)"><span class="hl_fundecl"><span class="mpre">scanl</span></span></a><span class="mpre"> </span><a name="loc_905_7_905_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_7_905_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_905_9_905_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_9_905_10&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_905_11_905_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_11_905_12&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_653_1_653_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_653_1_653_6&#39;)"><span class="hl_varref"><span class="mpre">S.scanl</span></span></a><span class="mpre"> </span><a href="#loc_906_11_906_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_906_11_906_12&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_905_9_905_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_9_905_10&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_905_11_905_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_11_905_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
    where </span><a name="loc_906_11_906_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_906_11_906_12&#39;)"><span class="hl_fundecl"><span class="mpre">g</span></span></a><span class="mpre"> </span><a name="loc_906_13_906_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_906_13_906_14&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_906_15_906_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_906_15_906_16&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> (</span><a href="#loc_905_7_905_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_7_905_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_906_13_906_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_906_13_906_14&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_906_15_906_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_906_15_906_16&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_905_1_905_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_1_905_6&#39;)"><span class="mpre">scanl</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;scanl1&#39; is a variant of &#39;scanl&#39; that has no starting</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- value argument.  Subject to fusion.  Performs replacement on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid scalar values.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; scanl1 f [x1, x2, ...] == [x1, x1 `f` x2, ...]</span></span><span class="mpre">
</span><a href="#loc_915_1_915_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_1_915_7&#39;)"><span class="mpre">scanl1</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_915_1_915_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_1_915_7&#39;)"><span class="hl_fundecl"><span class="mpre">scanl1</span></span></a><span class="mpre"> </span><a name="loc_915_8_915_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_8_915_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_915_10_915_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_10_915_11&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_915_10_915_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_10_915_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">    = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
           | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_905_1_905_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_1_905_6&#39;)"><span class="hl_varref"><span class="mpre">scanl</span></span></a><span class="mpre"> </span><a href="#loc_915_8_915_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_8_915_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="Data.Text.Unsafe.html#loc_43_1_43_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_43_1_43_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeHead</span></span></a><span class="mpre"> </span><a href="#loc_915_10_915_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_10_915_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">) (</span><a href="Data.Text.Unsafe.html#loc_54_1_54_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_54_1_54_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeTail</span></span></a><span class="mpre"> </span><a href="#loc_915_10_915_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_10_915_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_915_1_915_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_1_915_7&#39;)"><span class="mpre">scanl1</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;scanr&#39; is the right-to-left dual of &#39;scanl&#39;.  Performs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- replacement on invalid scalar values.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; scanr f v == reverse . scanl (flip f) v . reverse</span></span><span class="mpre">
</span><a href="#loc_924_1_924_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_924_1_924_6&#39;)"><span class="mpre">scanr</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_924_1_924_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_924_1_924_6&#39;)"><span class="hl_fundecl"><span class="mpre">scanr</span></span></a><span class="mpre"> </span><a name="loc_924_7_924_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_924_7_924_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_924_9_924_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_924_9_924_10&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_133_1_133_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_133_1_133_8&#39;)"><span class="hl_varref"><span class="mpre">S.reverse</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_169_1_169_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_169_1_169_13&#39;)"><span class="hl_varref"><span class="mpre">S.reverseScanr</span></span></a><span class="mpre"> </span><a href="#loc_925_11_925_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_925_11_925_12&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_924_9_924_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_924_9_924_10&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_86_1_86_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_86_1_86_14&#39;)"><span class="hl_varref"><span class="mpre">reverseStream</span></span></a><span class="mpre">
    where </span><a name="loc_925_11_925_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_925_11_925_12&#39;)"><span class="hl_fundecl"><span class="mpre">g</span></span></a><span class="mpre"> </span><a name="loc_925_13_925_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_925_13_925_14&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_925_15_925_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_925_15_925_16&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> (</span><a href="#loc_924_7_924_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_924_7_924_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_925_13_925_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_925_13_925_14&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_925_15_925_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_925_15_925_16&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_924_1_924_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_924_1_924_6&#39;)"><span class="mpre">scanr</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;scanr1&#39; is a variant of &#39;scanr&#39; that has no starting</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- value argument.  Subject to fusion.  Performs replacement on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_932_1_932_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_1_932_7&#39;)"><span class="mpre">scanr1</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_932_1_932_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_1_932_7&#39;)"><span class="hl_fundecl"><span class="mpre">scanr1</span></span></a><span class="mpre"> </span><a name="loc_932_8_932_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_8_932_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_932_10_932_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_10_932_11&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_932_10_932_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_10_932_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">    = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
           | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_924_1_924_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_924_1_924_6&#39;)"><span class="hl_varref"><span class="mpre">scanr</span></span></a><span class="mpre"> </span><a href="#loc_932_8_932_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_8_932_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_480_1_480_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_480_1_480_5&#39;)"><span class="hl_varref"><span class="mpre">last</span></span></a><span class="mpre"> </span><a href="#loc_932_10_932_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_10_932_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">) (</span><a href="#loc_514_1_514_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_1_514_5&#39;)"><span class="hl_varref"><span class="mpre">init</span></span></a><span class="mpre"> </span><a href="#loc_932_10_932_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_10_932_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_932_1_932_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_932_1_932_7&#39;)"><span class="mpre">scanr1</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Like a combination of &#39;map&#39; and &#39;foldl&#39;&#39;. Applies a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- function to each element of a &#39;Text&#39;, passing an accumulating</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- parameter from left to right, and returns a final &#39;Text&#39;.  Performs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_941_1_941_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_1_941_10&#39;)"><span class="mpre">mapAccumL</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_941_1_941_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_1_941_10&#39;)"><span class="hl_fundecl"><span class="mpre">mapAccumL</span></span></a><span class="mpre"> </span><a name="loc_941_11_941_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_11_941_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_941_13_941_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_13_941_15&#39;)"><span class="hl_vardecl"><span class="mpre">z0</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_213_1_213_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_213_1_213_10&#39;)"><span class="hl_varref"><span class="mpre">S.mapAccumL</span></span></a><span class="mpre"> </span><a href="#loc_942_11_942_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_942_11_942_12&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_941_13_941_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_13_941_15&#39;)"><span class="hl_varref"><span class="mpre">z0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre">
    where </span><a name="loc_942_11_942_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_942_11_942_12&#39;)"><span class="hl_fundecl"><span class="mpre">g</span></span></a><span class="mpre"> </span><a name="loc_942_13_942_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_942_13_942_14&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_942_15_942_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_942_15_942_16&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_475_1_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_1_475_7&#39;)"><span class="hl_varref"><span class="mpre">second</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> (</span><a href="#loc_941_11_941_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_11_941_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_942_13_942_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_942_13_942_14&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_942_15_942_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_942_15_942_16&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_941_1_941_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_1_941_10&#39;)"><span class="mpre">mapAccumL</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The &#39;mapAccumR&#39; function behaves like a combination of &#39;map&#39; and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a strict &#39;foldr&#39;; it applies a function to each element of a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39;, passing an accumulating parameter from right to left, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returning a final value of this accumulator together with the new</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_952_1_952_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_952_1_952_10&#39;)"><span class="mpre">mapAccumR</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_952_1_952_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_952_1_952_10&#39;)"><span class="hl_fundecl"><span class="mpre">mapAccumR</span></span></a><span class="mpre"> </span><a name="loc_952_11_952_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_952_11_952_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_952_13_952_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_952_13_952_15&#39;)"><span class="hl_vardecl"><span class="mpre">z0</span></span></a><span class="mpre"> = </span><a href="#loc_475_1_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_1_475_7&#39;)"><span class="hl_varref"><span class="mpre">second</span></span></a><span class="mpre"> </span><a href="#loc_627_1_627_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_8&#39;)"><span class="hl_varref"><span class="mpre">reverse</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_213_1_213_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_213_1_213_10&#39;)"><span class="hl_varref"><span class="mpre">S.mapAccumL</span></span></a><span class="mpre"> </span><a href="#loc_953_11_953_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_11_953_12&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_952_13_952_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_952_13_952_15&#39;)"><span class="hl_varref"><span class="mpre">z0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_86_1_86_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_86_1_86_14&#39;)"><span class="hl_varref"><span class="mpre">reverseStream</span></span></a><span class="mpre">
    where </span><a name="loc_953_11_953_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_11_953_12&#39;)"><span class="hl_fundecl"><span class="mpre">g</span></span></a><span class="mpre"> </span><a name="loc_953_13_953_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_13_953_14&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_953_15_953_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_15_953_16&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_475_1_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_1_475_7&#39;)"><span class="hl_varref"><span class="mpre">second</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> (</span><a href="#loc_952_11_952_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_952_11_952_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_953_13_953_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_13_953_14&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_953_15_953_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_15_953_16&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_952_1_952_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_952_1_952_10&#39;)"><span class="mpre">mapAccumR</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ** Generating and unfolding &#39;Text&#39;s</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n*m)/ &#39;replicate&#39; @n@ @t@ is a &#39;Text&#39; consisting of the input</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @t@ repeated @n@ times.</span></span><span class="mpre">
</span><a href="#loc_962_1_962_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_1_962_10&#39;)"><span class="mpre">replicate</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_962_1_962_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_1_962_10&#39;)"><span class="hl_fundecl"><span class="mpre">replicate</span></span></a><span class="mpre"> </span><a name="loc_962_11_962_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_11_962_12&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_962_13_962_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_13_962_14&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_962_21_962_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_21_962_22&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_962_23_962_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_23_962_24&#39;)"><span class="hl_vardecl"><span class="mpre">o</span></span></a><span class="mpre"> </span><a name="loc_962_25_962_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_25_962_26&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">)
    | </span><a href="#loc_962_11_962_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_11_962_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_962_25_962_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_25_962_26&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">       = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
    | </span><a href="#loc_962_11_962_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_11_962_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">                 = </span><a href="#loc_962_13_962_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_13_962_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><a href="#loc_548_1_548_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_1_548_12&#39;)"><span class="hl_varref"><span class="mpre">isSingleton</span></span></a><span class="mpre"> </span><a href="#loc_962_13_962_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_13_962_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">          = </span><a href="#loc_986_1_986_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_1_986_14&#39;)"><span class="hl_varref"><span class="mpre">replicateChar</span></span></a><span class="mpre"> </span><a href="#loc_962_11_962_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_11_962_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="Data.Text.Unsafe.html#loc_43_1_43_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_43_1_43_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeHead</span></span></a><span class="mpre"> </span><a href="#loc_962_13_962_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_13_962_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
    | </span><a href="#loc_962_11_962_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_11_962_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">maxBound</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`quot`</span></span><span class="mpre"> </span><a href="#loc_962_25_962_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_25_962_26&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">A.run</span></span></a><span class="mpre"> </span><a href="#loc_970_5_970_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_970_5_970_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_969_5_969_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_969_5_969_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">              = </span><a href="#loc_1660_1_1660_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1660_1_1660_14&#39;)"><span class="hl_varref"><span class="mpre">overflowError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;replicate&quot;</span></span><span class="mpre">
  where
    </span><a name="loc_969_5_969_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_969_5_969_8&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_962_25_962_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_25_962_26&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><a href="#loc_962_11_962_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_11_962_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
    </span><a name="loc_970_5_970_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_970_5_970_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = do
      </span><a name="loc_971_7_971_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_971_7_971_10&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Text.Array.html#loc_115_1_115_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_115_1_115_4&#39;)"><span class="hl_varref"><span class="mpre">A.new</span></span></a><span class="mpre"> </span><a href="#loc_969_5_969_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_969_5_969_8&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      let </span><a name="loc_972_11_972_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_11_972_15&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> !</span><a name="loc_972_17_972_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_17_972_18&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> !</span><a name="loc_972_20_972_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_20_972_21&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> | </span><a href="#loc_972_20_972_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_20_972_21&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_962_11_962_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_11_962_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_971_7_971_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_971_7_971_10&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre">
                     | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = let </span><a name="loc_973_40_973_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_973_40_973_41&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="#loc_972_17_972_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_17_972_18&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_962_25_962_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_25_962_26&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
                                   in </span><a href="Data.Text.Array.html#loc_215_1_215_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_215_1_215_6&#39;)"><span class="hl_varref"><span class="mpre">A.copyI</span></span></a><span class="mpre"> </span><a href="#loc_971_7_971_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_971_7_971_10&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_972_17_972_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_17_972_18&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><a href="#loc_962_21_962_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_21_962_22&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_962_23_962_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_23_962_24&#39;)"><span class="hl_varref"><span class="mpre">o</span></span></a><span class="mpre"> </span><a href="#loc_973_40_973_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_973_40_973_41&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_972_11_972_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_11_972_15&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_973_40_973_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_973_40_973_41&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> (</span><a href="#loc_972_20_972_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_20_972_21&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
      </span><a href="#loc_972_11_972_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_972_11_972_15&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_962_1_962_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_1_962_10&#39;)"><span class="mpre">replicate</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT replicate/singleton -&gt; replicateChar&quot; [~1] forall n c.
    replicate n (singleton c) = replicateChar n c
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;replicateChar&#39; @n@ @c@ is a &#39;Text&#39; of length @n@ with @c@ the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- value of every element. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_986_1_986_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_1_986_14&#39;)"><span class="mpre">replicateChar</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_986_1_986_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_1_986_14&#39;)"><span class="hl_fundecl"><span class="mpre">replicateChar</span></span></a><span class="mpre"> </span><a name="loc_986_15_986_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_15_986_16&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_986_17_986_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_17_986_18&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_691_1_691_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_691_1_691_15&#39;)"><span class="hl_varref"><span class="mpre">S.replicateCharI</span></span></a><span class="mpre"> </span><a href="#loc_986_15_986_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_15_986_16&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><a href="#loc_986_17_986_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_17_986_18&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_986_1_986_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_986_1_986_14&#39;)"><span class="mpre">replicateChar</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/, where @n@ is the length of the result. The &#39;unfoldr&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- function is analogous to the List &#39;L.unfoldr&#39;. &#39;unfoldr&#39; builds a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39; from a seed value. The function takes the element and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returns &#39;Nothing&#39; if it is done producing the &#39;Text&#39;, otherwise</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Just&#39; @(a,b)@.  In this case, @a@ is the next &#39;Char&#39; in the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- string, and @b@ is the seed value for further production. Subject</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to fusion.  Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_997_1_997_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_997_1_997_8&#39;)"><span class="mpre">unfoldr</span></a><span class="mpre">     :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_997_1_997_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_997_1_997_8&#39;)"><span class="hl_fundecl"><span class="mpre">unfoldr</span></span></a><span class="mpre"> </span><a name="loc_997_9_997_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_997_9_997_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_997_11_997_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_997_11_997_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_720_1_720_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_720_1_720_8&#39;)"><span class="hl_varref"><span class="mpre">S.unfoldr</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_108_1_108_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_108_1_108_7&#39;)"><span class="hl_varref"><span class="mpre">firstf</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_997_9_997_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_997_9_997_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) </span><a href="#loc_997_11_997_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_997_11_997_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_997_1_997_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_997_1_997_8&#39;)"><span class="mpre">unfoldr</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Like &#39;unfoldr&#39;, &#39;unfoldrN&#39; builds a &#39;Text&#39; from a seed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- value. However, the length of the result should be limited by the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- first argument to &#39;unfoldrN&#39;. This function is more efficient than</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unfoldr&#39; when the maximum length of the result is known and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- correct, otherwise its performance is similar to &#39;unfoldr&#39;. Subject</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to fusion.  Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_1007_1_1007_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_1_1007_9&#39;)"><span class="mpre">unfoldrN</span></a><span class="mpre">     :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1007_1_1007_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_1_1007_9&#39;)"><span class="hl_fundecl"><span class="mpre">unfoldrN</span></span></a><span class="mpre"> </span><a name="loc_1007_10_1007_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_10_1007_11&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_1007_12_1007_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_12_1007_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_1007_14_1007_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_14_1007_15&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">S.unfoldrN</span></span></a><span class="mpre"> </span><a href="#loc_1007_10_1007_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_10_1007_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_108_1_108_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_108_1_108_7&#39;)"><span class="hl_varref"><span class="mpre">firstf</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_1007_12_1007_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_12_1007_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) </span><a href="#loc_1007_14_1007_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_14_1007_15&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1007_1_1007_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1007_1_1007_9&#39;)"><span class="mpre">unfoldrN</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Substrings</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;take&#39; @n@, applied to a &#39;Text&#39;, returns the prefix of the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39; of length @n@, or the &#39;Text&#39; itself if @n@ is greater than</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the length of the Text. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_1017_1_1017_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_1_1017_5&#39;)"><span class="mpre">take</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1017_1_1017_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_1_1017_5&#39;)"><span class="hl_fundecl"><span class="mpre">take</span></span></a><span class="mpre"> </span><a name="loc_1017_6_1017_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_6_1017_7&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_1017_8_1017_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_8_1017_9&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1017_16_1017_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_16_1017_19&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1017_20_1017_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_20_1017_23&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1017_24_1017_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_24_1017_27&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_1017_6_1017_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_6_1017_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
    | </span><a href="#loc_1017_6_1017_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_6_1017_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1017_24_1017_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_24_1017_27&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">  = </span><a href="#loc_1017_8_1017_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_8_1017_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1017_16_1017_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_16_1017_19&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1017_20_1017_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_20_1017_23&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> (</span><a href="#loc_1024_1_1024_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_1_1024_6&#39;)"><span class="hl_varref"><span class="mpre">iterN</span></span></a><span class="mpre"> </span><a href="#loc_1017_6_1017_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_6_1017_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_1017_8_1017_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_8_1017_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1017_1_1017_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1017_1_1017_5&#39;)"><span class="mpre">take</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_1024_1_1024_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_1_1024_6&#39;)"><span class="mpre">iterN</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_1024_1_1024_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_1_1024_6&#39;)"><span class="hl_fundecl"><span class="mpre">iterN</span></span></a><span class="mpre"> </span><a name="loc_1024_7_1024_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_7_1024_8&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_1024_9_1024_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_9_1024_10&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arr</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_off</span></span><span class="mpre"> </span><a name="loc_1024_27_1024_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_27_1024_30&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_1025_9_1025_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_9_1025_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where </span><a name="loc_1025_9_1025_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_9_1025_13&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> !</span><a name="loc_1025_15_1025_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_15_1025_16&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_1025_18_1025_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_18_1025_21&#39;)"><span class="hl_vardecl"><span class="mpre">cnt</span></span></a><span class="mpre">
            | </span><a href="#loc_1025_15_1025_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_15_1025_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1024_27_1024_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_27_1024_30&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_1025_18_1025_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_18_1025_21&#39;)"><span class="hl_varref"><span class="mpre">cnt</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1024_7_1024_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_7_1024_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> = </span><a href="#loc_1025_15_1025_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_15_1025_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">            = </span><a href="#loc_1025_9_1025_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_9_1025_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1025_15_1025_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_15_1025_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1028_17_1028_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1028_17_1028_18&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_1025_18_1025_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_18_1025_21&#39;)"><span class="hl_varref"><span class="mpre">cnt</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
          where </span><a name="loc_1028_17_1028_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1028_17_1028_18&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_80_1_80_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_80_1_80_6&#39;)"><span class="hl_varref"><span class="mpre">iter_</span></span></a><span class="mpre"> </span><a href="#loc_1024_9_1024_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_9_1024_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_1025_15_1025_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1025_15_1025_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT take -&gt; fused&quot; [~1] forall n t.
    take n t = unstream (S.take n (stream t))
&quot;TEXT take -&gt; unfused&quot; [1] forall n t.
    unstream (S.take n (stream t)) = take n t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;takeEnd&#39; @n@ @t@ returns the suffix remaining after</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- taking @n@ characters from the end of @t@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; takeEnd 3 &quot;foobar&quot; == &quot;bar&quot;</span></span><span class="mpre">
</span><a href="#loc_1044_1_1044_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_1_1044_8&#39;)"><span class="mpre">takeEnd</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1044_1_1044_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_1_1044_8&#39;)"><span class="hl_fundecl"><span class="mpre">takeEnd</span></span></a><span class="mpre"> </span><a name="loc_1044_9_1044_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_9_1044_10&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_1044_11_1044_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_11_1044_12&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1044_19_1044_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_19_1044_22&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1044_23_1044_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_23_1044_26&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1044_27_1044_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_27_1044_30&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_1044_9_1044_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_9_1044_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
    | </span><a href="#loc_1044_9_1044_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_9_1044_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1044_27_1044_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_27_1044_30&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">  = </span><a href="#loc_1044_11_1044_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_11_1044_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1044_19_1044_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_19_1044_22&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1044_23_1044_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_23_1044_26&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1048_9_1048_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_9_1048_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) (</span><a href="#loc_1044_27_1044_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_27_1044_30&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1048_9_1048_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_9_1048_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">)
  where </span><a name="loc_1048_9_1048_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_9_1048_10&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> = </span><a href="#loc_1051_1_1051_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_1_1051_9&#39;)"><span class="hl_varref"><span class="mpre">iterNEnd</span></span></a><span class="mpre"> </span><a href="#loc_1044_9_1044_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_9_1044_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_1044_11_1044_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_11_1044_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">

</span><a href="#loc_1051_1_1051_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_1_1051_9&#39;)"><span class="mpre">iterNEnd</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_1051_1_1051_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_1_1051_9&#39;)"><span class="hl_fundecl"><span class="mpre">iterNEnd</span></span></a><span class="mpre"> </span><a name="loc_1051_10_1051_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_10_1051_11&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_1051_12_1051_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_12_1051_13&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arr</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_off</span></span><span class="mpre"> </span><a name="loc_1051_30_1051_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_30_1051_33&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_1052_9_1052_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_9_1052_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1051_30_1051_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_30_1051_33&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_1051_10_1051_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_10_1051_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
  where </span><a name="loc_1052_9_1052_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_9_1052_13&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_1052_14_1052_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_14_1052_15&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_1052_17_1052_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_17_1052_18&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">
          | </span><a href="#loc_1052_14_1052_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_14_1052_15&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
          | </span><a href="#loc_1052_17_1052_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_17_1052_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">    = </span><a href="#loc_1052_14_1052_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_14_1052_15&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
          | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_1052_9_1052_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_9_1052_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1052_14_1052_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_14_1052_15&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1056_17_1056_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1056_17_1056_18&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_1052_17_1052_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_17_1052_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
          where </span><a name="loc_1056_17_1056_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1056_17_1056_18&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_102_1_102_13&#39;)"><span class="hl_varref"><span class="mpre">reverseIter_</span></span></a><span class="mpre"> </span><a href="#loc_1051_12_1051_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_12_1051_13&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_1052_14_1052_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1052_14_1052_15&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;drop&#39; @n@, applied to a &#39;Text&#39;, returns the suffix of the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39; after the first @n@ characters, or the empty &#39;Text&#39; if @n@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is greater than the length of the &#39;Text&#39;. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_1062_1_1062_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_1_1062_5&#39;)"><span class="mpre">drop</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1062_1_1062_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_1_1062_5&#39;)"><span class="hl_fundecl"><span class="mpre">drop</span></span></a><span class="mpre"> </span><a name="loc_1062_6_1062_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_6_1062_7&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_1062_8_1062_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_8_1062_9&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1062_16_1062_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_16_1062_19&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1062_20_1062_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_20_1062_23&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1062_24_1062_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_24_1062_27&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_1062_6_1062_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_6_1062_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = </span><a href="#loc_1062_8_1062_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_8_1062_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><a href="#loc_1062_6_1062_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_6_1062_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1062_24_1062_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_24_1062_27&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">  = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1062_16_1062_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_16_1062_19&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1062_20_1062_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_20_1062_23&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1066_9_1066_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1066_9_1066_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) (</span><a href="#loc_1062_24_1062_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_24_1062_27&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1066_9_1066_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1066_9_1066_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">)
  where </span><a name="loc_1066_9_1066_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1066_9_1066_10&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> = </span><a href="#loc_1024_1_1024_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_1_1024_6&#39;)"><span class="hl_varref"><span class="mpre">iterN</span></span></a><span class="mpre"> </span><a href="#loc_1062_6_1062_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_6_1062_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_1062_8_1062_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_8_1062_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1062_1_1062_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1062_1_1062_5&#39;)"><span class="mpre">drop</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT drop -&gt; fused&quot; [~1] forall n t.
    drop n t = unstream (S.drop n (stream t))
&quot;TEXT drop -&gt; unfused&quot; [1] forall n t.
    unstream (S.drop n (stream t)) = drop n t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;dropEnd&#39; @n@ @t@ returns the prefix remaining after</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- dropping @n@ characters from the end of @t@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; dropEnd 3 &quot;foobar&quot; == &quot;foo&quot;</span></span><span class="mpre">
</span><a href="#loc_1083_1_1083_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_1_1083_8&#39;)"><span class="mpre">dropEnd</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1083_1_1083_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_1_1083_8&#39;)"><span class="hl_fundecl"><span class="mpre">dropEnd</span></span></a><span class="mpre"> </span><a name="loc_1083_9_1083_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_9_1083_10&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_1083_11_1083_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_11_1083_12&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1083_19_1083_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_19_1083_22&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1083_23_1083_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_23_1083_26&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1083_27_1083_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_27_1083_30&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_1083_9_1083_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_9_1083_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = </span><a href="#loc_1083_11_1083_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_11_1083_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    | </span><a href="#loc_1083_9_1083_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_9_1083_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1083_27_1083_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_27_1083_30&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">  = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1083_19_1083_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_19_1083_22&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1083_23_1083_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_23_1083_26&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> (</span><a href="#loc_1051_1_1051_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1051_1_1051_9&#39;)"><span class="hl_varref"><span class="mpre">iterNEnd</span></span></a><span class="mpre"> </span><a href="#loc_1083_9_1083_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_9_1083_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_1083_11_1083_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1083_11_1083_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;takeWhile&#39;, applied to a predicate @p@ and a &#39;Text&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returns the longest prefix (possibly empty) of elements that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- satisfy @p@.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_1092_1_1092_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_1_1092_10&#39;)"><span class="mpre">takeWhile</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1092_1_1092_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_1_1092_10&#39;)"><span class="hl_fundecl"><span class="mpre">takeWhile</span></span></a><span class="mpre"> </span><a name="loc_1092_11_1092_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_11_1092_12&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1092_13_1092_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_13_1092_14&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1092_21_1092_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_21_1092_24&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1092_25_1092_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_25_1092_28&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1092_29_1092_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_29_1092_32&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_1093_9_1093_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_9_1093_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where </span><a name="loc_1093_9_1093_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_9_1093_13&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> !</span><a name="loc_1093_15_1093_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_15_1093_16&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> | </span><a href="#loc_1093_15_1093_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_15_1093_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1092_29_1092_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_29_1092_32&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">    = </span><a href="#loc_1092_13_1092_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_13_1092_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
                | </span><a href="#loc_1092_11_1092_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_11_1092_12&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1096_24_1096_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1096_24_1096_25&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">         = </span><a href="#loc_1093_9_1093_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_9_1093_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1093_15_1093_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_15_1093_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1096_26_1096_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1096_26_1096_27&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">)
                | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">   = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1092_21_1092_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_21_1092_24&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1092_25_1092_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_25_1092_28&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_1093_15_1093_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_15_1093_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
            where </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_1096_24_1096_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1096_24_1096_25&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_1096_26_1096_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1096_26_1096_27&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre">    = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_1092_13_1092_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_13_1092_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_1093_15_1093_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_15_1093_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1092_1_1092_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1092_1_1092_10&#39;)"><span class="mpre">takeWhile</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT takeWhile -&gt; fused&quot; [~1] forall p t.
    takeWhile p t = unstream (S.takeWhile p (stream t))
&quot;TEXT takeWhile -&gt; unfused&quot; [1] forall p t.
    unstream (S.takeWhile p (stream t)) = takeWhile p t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;dropWhile&#39; @p@ @t@ returns the suffix remaining after</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;takeWhile&#39; @p@ @t@. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_1109_1_1109_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_1_1109_10&#39;)"><span class="mpre">dropWhile</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1109_1_1109_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_1_1109_10&#39;)"><span class="hl_fundecl"><span class="mpre">dropWhile</span></span></a><span class="mpre"> </span><a name="loc_1109_11_1109_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_11_1109_12&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1109_13_1109_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_13_1109_14&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1109_21_1109_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_21_1109_24&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1109_25_1109_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_25_1109_28&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1109_29_1109_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_29_1109_32&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_1110_9_1110_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_9_1110_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where </span><a name="loc_1110_9_1110_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_9_1110_13&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> !</span><a name="loc_1110_15_1110_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_15_1110_16&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_1110_18_1110_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_18_1110_19&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> | </span><a href="#loc_1110_18_1110_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_18_1110_19&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1109_29_1109_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_29_1109_32&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">  = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
                   | </span><a href="#loc_1109_11_1109_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_11_1109_12&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1113_24_1113_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1113_24_1113_25&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">       = </span><a href="#loc_1110_9_1110_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_9_1110_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1110_15_1110_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_15_1110_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1113_26_1113_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1113_26_1113_27&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_1110_18_1110_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_18_1110_19&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1113_26_1113_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1113_26_1113_27&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">)
                   | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="#loc_1109_21_1109_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_21_1109_24&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1109_25_1109_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_25_1109_28&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1110_15_1110_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_15_1110_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) (</span><a href="#loc_1109_29_1109_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_29_1109_32&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1110_18_1110_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_18_1110_19&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">)
            where </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_1113_24_1113_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1113_24_1113_25&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_1113_26_1113_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1113_26_1113_27&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre">     = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_1109_13_1109_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_13_1109_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_1110_15_1110_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1110_15_1110_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1109_1_1109_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_1_1109_10&#39;)"><span class="mpre">dropWhile</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT dropWhile -&gt; fused&quot; [~1] forall p t.
    dropWhile p t = unstream (S.dropWhile p (stream t))
&quot;TEXT dropWhile -&gt; unfused&quot; [1] forall p t.
    unstream (S.dropWhile p (stream t)) = dropWhile p t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;dropWhileEnd&#39; @p@ @t@ returns the prefix remaining after</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- dropping characters that fail the predicate @p@ from the end of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @t@.  Subject to fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; dropWhileEnd (==&#39;.&#39;) &quot;foo...&quot; == &quot;foo&quot;</span></span><span class="mpre">
</span><a href="#loc_1130_1_1130_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_1_1130_13&#39;)"><span class="mpre">dropWhileEnd</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1130_1_1130_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_1_1130_13&#39;)"><span class="hl_fundecl"><span class="mpre">dropWhileEnd</span></span></a><span class="mpre"> </span><a name="loc_1130_14_1130_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_14_1130_15&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1130_16_1130_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_16_1130_17&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1130_24_1130_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_24_1130_27&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1130_28_1130_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_28_1130_31&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1130_32_1130_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_32_1130_35&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_1131_9_1131_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_9_1131_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1130_32_1130_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_32_1130_35&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_1130_32_1130_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_32_1130_35&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
  where </span><a name="loc_1131_9_1131_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_9_1131_13&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> !</span><a name="loc_1131_15_1131_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_15_1131_16&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_1131_18_1131_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_18_1131_19&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> | </span><a href="#loc_1131_18_1131_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_18_1131_19&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
                   | </span><a href="#loc_1130_14_1130_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_14_1130_15&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1134_20_1134_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1134_20_1134_21&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">       = </span><a href="#loc_1131_9_1131_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_9_1131_13&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1131_15_1131_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_15_1131_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1134_22_1134_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1134_22_1134_23&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_1131_18_1131_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_18_1131_19&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1134_22_1134_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1134_22_1134_23&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">)
                   | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="#loc_1130_24_1130_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_24_1130_27&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1130_28_1130_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_28_1130_31&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_1131_18_1131_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_18_1131_19&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
            where (</span><a name="loc_1134_20_1134_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1134_20_1134_21&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">,</span><a name="loc_1134_22_1134_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1134_22_1134_23&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre">)        = </span><a href="Data.Text.Unsafe.html#loc_89_1_89_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_89_1_89_12&#39;)"><span class="hl_varref"><span class="mpre">reverseIter</span></span></a><span class="mpre"> </span><a href="#loc_1130_16_1130_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_16_1130_17&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_1131_15_1131_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1131_15_1131_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1130_1_1130_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_1_1130_13&#39;)"><span class="mpre">dropWhileEnd</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT dropWhileEnd -&gt; fused&quot; [~1] forall p t.
    dropWhileEnd p t = S.reverse (S.dropWhile p (S.reverseStream t))
&quot;TEXT dropWhileEnd -&gt; unfused&quot; [1] forall p t.
    S.reverse (S.dropWhile p (S.reverseStream t)) = dropWhileEnd p t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;dropAround&#39; @p@ @t@ returns the substring remaining after</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- dropping characters that fail the predicate @p@ from both the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- beginning and end of @t@.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_1148_1_1148_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1148_1_1148_11&#39;)"><span class="mpre">dropAround</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1148_1_1148_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1148_1_1148_11&#39;)"><span class="hl_fundecl"><span class="mpre">dropAround</span></span></a><span class="mpre"> </span><a name="loc_1148_12_1148_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1148_12_1148_13&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_1109_1_1109_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_1_1109_10&#39;)"><span class="hl_varref"><span class="mpre">dropWhile</span></span></a><span class="mpre"> </span><a href="#loc_1148_12_1148_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1148_12_1148_13&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_1130_1_1130_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_1_1130_13&#39;)"><span class="hl_varref"><span class="mpre">dropWhileEnd</span></span></a><span class="mpre"> </span><a href="#loc_1148_12_1148_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1148_12_1148_13&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1148_1_1148_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1148_1_1148_11&#39;)"><span class="mpre">dropAround</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Remove leading white space from a string.  Equivalent to:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; dropWhile isSpace</span></span><span class="mpre">
</span><a href="#loc_1155_1_1155_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1155_1_1155_11&#39;)"><span class="mpre">stripStart</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1155_1_1155_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1155_1_1155_11&#39;)"><span class="hl_vardecl"><span class="mpre">stripStart</span></span></a><span class="mpre"> = </span><a href="#loc_1109_1_1109_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_1_1109_10&#39;)"><span class="hl_varref"><span class="mpre">dropWhile</span></span></a><span class="mpre"> </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="hl_varref"><span class="mpre">isSpace</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1155_1_1155_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1155_1_1155_11&#39;)"><span class="mpre">stripStart</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Remove trailing white space from a string.  Equivalent to:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; dropWhileEnd isSpace</span></span><span class="mpre">
</span><a href="#loc_1162_1_1162_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1162_1_1162_9&#39;)"><span class="mpre">stripEnd</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1162_1_1162_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1162_1_1162_9&#39;)"><span class="hl_vardecl"><span class="mpre">stripEnd</span></span></a><span class="mpre"> = </span><a href="#loc_1130_1_1130_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1130_1_1130_13&#39;)"><span class="hl_varref"><span class="mpre">dropWhileEnd</span></span></a><span class="mpre"> </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="hl_varref"><span class="mpre">isSpace</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1162_1_1162_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1162_1_1162_9&#39;)"><span class="mpre">stripEnd</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Remove leading and trailing white space from a string.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Equivalent to:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; dropAround isSpace</span></span><span class="mpre">
</span><a href="#loc_1170_1_1170_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1170_1_1170_6&#39;)"><span class="mpre">strip</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1170_1_1170_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1170_1_1170_6&#39;)"><span class="hl_vardecl"><span class="mpre">strip</span></span></a><span class="mpre"> = </span><a href="#loc_1148_1_1148_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1148_1_1148_11&#39;)"><span class="hl_varref"><span class="mpre">dropAround</span></span></a><span class="mpre"> </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="hl_varref"><span class="mpre">isSpace</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1170_1_1170_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1170_1_1170_6&#39;)"><span class="mpre">strip</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;splitAt&#39; @n t@ returns a pair whose first element is a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- prefix of @t@ of length @n@, and whose second is the remainder of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the string. It is equivalent to @(&#39;take&#39; n t, &#39;drop&#39; n t)@.</span></span><span class="mpre">
</span><a href="#loc_1177_1_1177_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_1_1177_8&#39;)"><span class="mpre">splitAt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_1177_1_1177_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_1_1177_8&#39;)"><span class="hl_fundecl"><span class="mpre">splitAt</span></span></a><span class="mpre"> </span><a name="loc_1177_9_1177_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_9_1177_10&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_1177_11_1177_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_11_1177_12&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1177_19_1177_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_19_1177_22&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1177_23_1177_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_23_1177_26&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1177_27_1177_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_27_1177_30&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_1177_9_1177_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_9_1177_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = (</span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">, </span><a href="#loc_1177_11_1177_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_11_1177_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
    | </span><a href="#loc_1177_9_1177_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_9_1177_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1177_27_1177_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_27_1177_30&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">  = (</span><a href="#loc_1177_11_1177_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_11_1177_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">)
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = let </span><a name="loc_1180_23_1180_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1180_23_1180_24&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="#loc_1024_1_1024_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1024_1_1024_6&#39;)"><span class="hl_varref"><span class="mpre">iterN</span></span></a><span class="mpre"> </span><a href="#loc_1177_9_1177_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_9_1177_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_1177_11_1177_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_11_1177_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
                  in (</span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1177_19_1177_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_19_1177_22&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1177_23_1177_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_23_1177_26&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_1180_23_1180_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1180_23_1180_24&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1177_19_1177_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_19_1177_22&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1177_23_1177_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_23_1177_26&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1180_23_1180_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1180_23_1180_24&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">) (</span><a href="#loc_1177_27_1177_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_27_1177_30&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1180_23_1180_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1180_23_1180_24&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">))

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;span&#39;, applied to a predicate @p@ and text @t@, returns</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a pair whose first element is the longest prefix (possibly empty)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of @t@ of elements that satisfy @p@, and whose second is the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- remainder of the list.</span></span><span class="mpre">
</span><a href="#loc_1188_1_1188_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1188_1_1188_5&#39;)"><span class="mpre">span</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_1188_1_1188_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1188_1_1188_5&#39;)"><span class="hl_fundecl"><span class="mpre">span</span></span></a><span class="mpre"> </span><a name="loc_1188_6_1188_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1188_6_1188_7&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1188_8_1188_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1188_8_1188_9&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = case </span><a href="Data.Text.Internal.Private.html#loc_24_1_24_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Private.html#loc_24_1_24_6&#39;)"><span class="hl_varref"><span class="mpre">span_</span></span></a><span class="mpre"> </span><a href="#loc_1188_6_1188_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1188_6_1188_7&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1188_8_1188_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1188_8_1188_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> of
             (# </span><a name="loc_1189_17_1189_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_17_1189_19&#39;)"><span class="hl_vardecl"><span class="mpre">hd</span></span></a><span class="mpre">,</span><a name="loc_1189_20_1189_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_20_1189_22&#39;)"><span class="hl_vardecl"><span class="mpre">tl</span></span></a><span class="mpre"> #) -&gt; (</span><a href="#loc_1189_17_1189_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_17_1189_19&#39;)"><span class="hl_varref"><span class="mpre">hd</span></span></a><span class="mpre">,</span><a href="#loc_1189_20_1189_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_20_1189_22&#39;)"><span class="hl_varref"><span class="mpre">tl</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1188_1_1188_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1188_1_1188_5&#39;)"><span class="mpre">span</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;break&#39; is like &#39;span&#39;, but the prefix returned is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- over elements that fail the predicate @p@.</span></span><span class="mpre">
</span><a href="#loc_1195_1_1195_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1195_1_1195_6&#39;)"><span class="mpre">break</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_1195_1_1195_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1195_1_1195_6&#39;)"><span class="hl_fundecl"><span class="mpre">break</span></span></a><span class="mpre"> </span><a name="loc_1195_7_1195_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1195_7_1195_8&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_1188_1_1188_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1188_1_1188_5&#39;)"><span class="hl_varref"><span class="mpre">span</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_1195_7_1195_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1195_7_1195_8&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1195_1_1195_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1195_1_1195_6&#39;)"><span class="mpre">break</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Group characters in a string according to a predicate.</span></span><span class="mpre">
</span><a href="#loc_1200_1_1200_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1200_1_1200_8&#39;)"><span class="mpre">groupBy</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1200_1_1200_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1200_1_1200_8&#39;)"><span class="hl_fundecl"><span class="mpre">groupBy</span></span></a><span class="mpre"> </span><a name="loc_1200_9_1200_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1200_9_1200_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_1202_5_1202_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_5_1202_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
  where
    </span><a name="loc_1202_5_1202_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_5_1202_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_1202_10_1202_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_10_1202_11&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1202_18_1202_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_18_1202_21&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1202_22_1202_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_22_1202_25&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1202_26_1202_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_26_1202_29&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
        | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1202_10_1202_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_10_1202_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">    = []
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1202_18_1202_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_18_1202_21&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1202_22_1202_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_22_1202_25&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_1206_15_1206_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1206_15_1206_16&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_1202_5_1202_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_5_1202_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1202_18_1202_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_18_1202_21&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1202_22_1202_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_22_1202_25&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1206_15_1206_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1206_15_1206_16&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) (</span><a href="#loc_1202_26_1202_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_26_1202_29&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1206_15_1206_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1206_15_1206_16&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">))
        where </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_1205_20_1205_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1205_20_1205_21&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_1205_22_1205_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1205_22_1205_23&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_1202_10_1202_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_10_1202_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
              </span><a name="loc_1206_15_1206_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1206_15_1206_16&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre">     = </span><a href="#loc_1205_22_1205_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1205_22_1205_23&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_1212_1_1212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_1_1212_16&#39;)"><span class="hl_varref"><span class="mpre">findAIndexOrEnd</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_1200_9_1200_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1200_9_1200_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1205_20_1205_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1205_20_1205_21&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="#loc_1202_18_1202_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_18_1202_21&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1202_22_1202_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_22_1202_25&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1205_22_1205_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1205_22_1205_23&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_1202_26_1202_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1202_26_1202_29&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1205_22_1205_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1205_22_1205_23&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">))

</span><span class="hl_comment"><span class="mpre">-- | Returns the /array/ index (in units of &#39;Word16&#39;) at which a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- character may be found.  This is /not/ the same as the logical</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- index returned by e.g. &#39;findIndex&#39;.</span></span><span class="mpre">
</span><a href="#loc_1212_1_1212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_1_1212_16&#39;)"><span class="mpre">findAIndexOrEnd</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_1212_1_1212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_1_1212_16&#39;)"><span class="hl_fundecl"><span class="mpre">findAIndexOrEnd</span></span></a><span class="mpre"> </span><a name="loc_1212_17_1212_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_17_1212_18&#39;)"><span class="hl_vardecl"><span class="mpre">q</span></span></a><span class="mpre"> </span><a name="loc_1212_19_1212_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_19_1212_20&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arr</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_off</span></span><span class="mpre"> </span><a name="loc_1212_37_1212_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_37_1212_40&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_1213_11_1213_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1213_11_1213_13&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
    where </span><a name="loc_1213_11_1213_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1213_11_1213_13&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_1213_15_1213_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1213_15_1213_16&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> | </span><a href="#loc_1213_15_1213_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1213_15_1213_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1212_37_1212_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_37_1212_40&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_1212_17_1212_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_17_1212_18&#39;)"><span class="hl_varref"><span class="mpre">q</span></span></a><span class="mpre"> </span><a href="#loc_1215_28_1215_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_28_1215_29&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">       = </span><a href="#loc_1213_15_1213_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1213_15_1213_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
                | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">             = </span><a href="#loc_1213_11_1213_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1213_11_1213_13&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_1213_15_1213_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1213_15_1213_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1215_30_1215_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_30_1215_31&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">)
                where </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_1215_28_1215_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_28_1215_29&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_1215_30_1215_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_30_1215_31&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre">          = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_1212_19_1212_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1212_19_1212_20&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_1213_15_1213_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1213_15_1213_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Group characters in a string by equality.</span></span><span class="mpre">
</span><a href="#loc_1219_1_1219_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1219_1_1219_6&#39;)"><span class="mpre">group</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1219_1_1219_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1219_1_1219_6&#39;)"><span class="hl_vardecl"><span class="mpre">group</span></span></a><span class="mpre"> = </span><a href="#loc_1200_1_1200_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1200_1_1200_8&#39;)"><span class="hl_varref"><span class="mpre">groupBy</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">(==)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Return all initial segments of the given &#39;Text&#39;, shortest</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- first.</span></span><span class="mpre">
</span><a href="#loc_1224_1_1224_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_1_1224_6&#39;)"><span class="mpre">inits</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1224_1_1224_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_1_1224_6&#39;)"><span class="hl_fundecl"><span class="mpre">inits</span></span></a><span class="mpre"> </span><a name="loc_1224_7_1224_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_7_1224_8&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1224_15_1224_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_15_1224_18&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1224_19_1224_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_19_1224_22&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1224_23_1224_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_23_1224_26&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_1225_11_1225_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_11_1225_15&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
    where </span><a name="loc_1225_11_1225_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_11_1225_15&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_1225_16_1225_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_16_1225_17&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> | </span><a href="#loc_1225_16_1225_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_16_1225_17&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1224_23_1224_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_23_1224_26&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> = [</span><a href="#loc_1224_7_1224_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_7_1224_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">]
                 | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="#loc_1224_15_1224_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_15_1224_18&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1224_19_1224_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_19_1224_22&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_1225_16_1225_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_16_1225_17&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_1225_11_1225_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_11_1225_15&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1225_16_1225_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_16_1225_17&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="Data.Text.Unsafe.html#loc_80_1_80_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_80_1_80_6&#39;)"><span class="hl_varref"><span class="mpre">iter_</span></span></a><span class="mpre"> </span><a href="#loc_1224_7_1224_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1224_7_1224_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_1225_16_1225_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_16_1225_17&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Return all final segments of the given &#39;Text&#39;, longest</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- first.</span></span><span class="mpre">
</span><a href="#loc_1231_1_1231_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_1_1231_6&#39;)"><span class="mpre">tails</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1231_1_1231_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_1_1231_6&#39;)"><span class="hl_fundecl"><span class="mpre">tails</span></span></a><span class="mpre"> </span><a name="loc_1231_7_1231_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_7_1231_8&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1231_7_1231_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_7_1231_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">    = [</span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">]
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_1231_7_1231_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_7_1231_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_1231_1_1231_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_1_1231_6&#39;)"><span class="hl_varref"><span class="mpre">tails</span></span></a><span class="mpre"> (</span><a href="Data.Text.Unsafe.html#loc_54_1_54_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_54_1_54_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeTail</span></span></a><span class="mpre"> </span><a href="#loc_1231_7_1231_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_7_1231_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- $split</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Splitting functions in this library do not perform character-wise</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- copies to create substrings; they just construct new &#39;Text&#39;s that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- are slices of the original.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(m+n)/ Break a &#39;Text&#39; into pieces separated by the first</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Text&#39; argument, consuming the delimiter. An empty delimiter is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid, and will cause an error to be raised.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; splitOn &quot;\r\n&quot; &quot;a\r\nb\r\nd\r\ne&quot; == [&quot;a&quot;,&quot;b&quot;,&quot;d&quot;,&quot;e&quot;]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; splitOn &quot;aaa&quot;  &quot;aaaXaaaXaaaXaaa&quot;  == [&quot;&quot;,&quot;X&quot;,&quot;X&quot;,&quot;X&quot;,&quot;&quot;]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; splitOn &quot;x&quot;    &quot;x&quot;                == [&quot;&quot;,&quot;&quot;]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; intercalate s . splitOn s         == id</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; splitOn (singleton c)             == split (==c)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In (unlikely) bad cases, this function&#39;s time complexity degrades</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- towards /O(n*m)/.</span></span><span class="mpre">
</span><a href="#loc_1258_1_1258_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_1_1258_8&#39;)"><span class="mpre">splitOn</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1258_1_1258_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_1_1258_8&#39;)"><span class="hl_fundecl"><span class="mpre">splitOn</span></span></a><span class="mpre"> </span><a name="loc_1258_9_1258_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_9_1258_12&#39;)"><span class="hl_specname"><span class="mpre">pat</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> _ _ </span><a name="loc_1258_23_1258_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_23_1258_24&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">) </span><a name="loc_1258_26_1258_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_26_1258_29&#39;)"><span class="hl_specname"><span class="mpre">src</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1258_36_1258_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_36_1258_39&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1258_40_1258_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_40_1258_43&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1258_44_1258_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_44_1258_47&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_1258_23_1258_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_23_1258_24&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">          = </span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_varref"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;splitOn&quot;</span></span><span class="mpre">
    | </span><a href="#loc_548_1_548_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_1_548_12&#39;)"><span class="hl_varref"><span class="mpre">isSingleton</span></span></a><span class="mpre"> </span><a href="#loc_1258_9_1258_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_9_1258_12&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre"> = </span><a href="#loc_1280_1_1280_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1280_1_1280_6&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Data.Text.Unsafe.html#loc_43_1_43_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_43_1_43_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeHead</span></span></a><span class="mpre"> </span><a href="#loc_1258_9_1258_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_9_1258_12&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre">) </span><a href="#loc_1258_26_1258_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_26_1258_29&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">       = </span><a href="#loc_1263_5_1263_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_5_1263_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> (</span><a href="Data.Text.Internal.Search.html#loc_52_1_52_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Search.html#loc_52_1_52_8&#39;)"><span class="hl_varref"><span class="mpre">indices</span></span></a><span class="mpre"> </span><a href="#loc_1258_9_1258_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_9_1258_12&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre"> </span><a href="#loc_1258_26_1258_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_26_1258_29&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">)
  where
    </span><a name="loc_1263_5_1263_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_5_1263_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_1263_9_1263_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_9_1263_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> (</span><a name="loc_1263_12_1263_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_12_1263_13&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_1263_14_1263_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_14_1263_16&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">) =  </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1258_36_1258_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_36_1258_39&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1263_9_1263_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_9_1263_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1258_40_1258_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_40_1258_43&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) (</span><a href="#loc_1263_12_1263_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_12_1263_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1263_9_1263_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_9_1263_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_1263_5_1263_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_5_1263_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_1263_12_1263_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_12_1263_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1258_23_1258_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_23_1258_24&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">) </span><a href="#loc_1263_14_1263_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_14_1263_16&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">
    </span><a href="#loc_1263_5_1263_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1263_5_1263_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre">  </span><a name="loc_1264_9_1264_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1264_9_1264_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> _      = [</span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1258_36_1258_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_36_1258_39&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1264_9_1264_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1264_9_1264_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1258_40_1258_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_40_1258_43&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) (</span><a href="#loc_1258_44_1258_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_44_1258_47&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1264_9_1264_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1264_9_1264_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)]
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1258_1_1258_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1258_1_1258_8&#39;)"><span class="mpre">splitOn</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT splitOn/singleton -&gt; split/==&quot; [~1] forall c t.
    splitOn (singleton c) t = split (==c) t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Splits a &#39;Text&#39; into components delimited by separators,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- where the predicate returns True for a separator element.  The</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- resulting components do not contain the separators.  Two adjacent</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- separators result in an empty component in the output.  eg.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; split (==&#39;a&#39;) &quot;aabbaca&quot; == [&quot;&quot;,&quot;&quot;,&quot;bb&quot;,&quot;c&quot;,&quot;&quot;]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; split (==&#39;a&#39;) &quot;&quot;        == [&quot;&quot;]</span></span><span class="mpre">
</span><a href="#loc_1280_1_1280_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1280_1_1280_6&#39;)"><span class="mpre">split</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1280_1_1280_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1280_1_1280_6&#39;)"><span class="hl_fundecl"><span class="mpre">split</span></span></a><span class="mpre"> _ </span><a name="loc_1280_9_1280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1280_9_1280_10&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_off</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arr</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">) = [</span><a href="#loc_1280_9_1280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1280_9_1280_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">]
</span><a href="#loc_1280_1_1280_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1280_1_1280_6&#39;)"><span class="hl_fundecl"><span class="mpre">split</span></span></a><span class="mpre"> </span><a name="loc_1281_7_1281_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1281_7_1281_8&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1281_9_1281_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1281_9_1281_10&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="#loc_1282_11_1282_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1282_11_1282_15&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_1281_9_1281_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1281_9_1281_10&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    where </span><a name="loc_1282_11_1282_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1282_11_1282_15&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_1282_16_1282_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1282_16_1282_17&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1284_27_1284_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1284_27_1284_29&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre">   = [</span><a href="#loc_1284_24_1284_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1284_24_1284_25&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">]
                 | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_1284_24_1284_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1284_24_1284_25&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_1282_11_1282_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1282_11_1282_15&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="Data.Text.Unsafe.html#loc_54_1_54_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_54_1_54_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeTail</span></span></a><span class="mpre"> </span><a href="#loc_1284_27_1284_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1284_27_1284_29&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre">)
              where (# </span><a name="loc_1284_24_1284_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1284_24_1284_25&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">, </span><a name="loc_1284_27_1284_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1284_27_1284_29&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;</span></span></a><span class="mpre"> #) = </span><a href="Data.Text.Internal.Private.html#loc_24_1_24_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Private.html#loc_24_1_24_6&#39;)"><span class="hl_varref"><span class="mpre">span_</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_1281_7_1281_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1281_7_1281_8&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">) </span><a href="#loc_1282_16_1282_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1282_16_1282_17&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1280_1_1280_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1280_1_1280_6&#39;)"><span class="mpre">split</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Splits a &#39;Text&#39; into components of length @k@.  The last</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- element may be shorter than the other chunks, depending on the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- length of the input. Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; chunksOf 3 &quot;foobarbaz&quot;   == [&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; chunksOf 4 &quot;haskell.org&quot; == [&quot;hask&quot;,&quot;ell.&quot;,&quot;org&quot;]</span></span><span class="mpre">
</span><a href="#loc_1294_1_1294_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1294_1_1294_9&#39;)"><span class="mpre">chunksOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1294_1_1294_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1294_1_1294_9&#39;)"><span class="hl_fundecl"><span class="mpre">chunksOf</span></span></a><span class="mpre"> </span><a name="loc_1294_10_1294_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1294_10_1294_11&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="#loc_1296_5_1296_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1296_5_1296_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_1296_5_1296_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1296_5_1296_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_1296_8_1296_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1296_8_1296_9&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = case </span><a href="#loc_1177_1_1177_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1177_1_1177_8&#39;)"><span class="hl_varref"><span class="mpre">splitAt</span></span></a><span class="mpre"> </span><a href="#loc_1294_10_1294_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1294_10_1294_11&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_1296_8_1296_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1296_8_1296_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> of
             (</span><a name="loc_1297_15_1297_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1297_15_1297_16&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">,</span><a name="loc_1297_17_1297_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1297_17_1297_18&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">) | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1297_15_1297_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1297_15_1297_16&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">    -&gt; []
                   | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; </span><a href="#loc_1297_15_1297_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1297_15_1297_16&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_1296_5_1296_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1296_5_1296_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_1297_17_1297_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1297_17_1297_18&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1294_1_1294_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1294_1_1294_9&#39;)"><span class="mpre">chunksOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Searching</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ** Searching with a predicate</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;find&#39; function takes a predicate and a &#39;Text&#39;, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returns the first element matching the predicate, or &#39;Nothing&#39; if</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- there is no such element.</span></span><span class="mpre">
</span><a href="#loc_1311_1_1311_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1311_1_1311_5&#39;)"><span class="mpre">find</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_1311_1_1311_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1311_1_1311_5&#39;)"><span class="hl_fundecl"><span class="mpre">find</span></span></a><span class="mpre"> </span><a name="loc_1311_6_1311_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1311_6_1311_7&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1311_8_1311_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1311_8_1311_9&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_849_1_849_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_849_1_849_7&#39;)"><span class="hl_varref"><span class="mpre">S.findBy</span></span></a><span class="mpre"> </span><a href="#loc_1311_6_1311_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1311_6_1311_7&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1311_8_1311_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1311_8_1311_9&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1311_1_1311_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1311_1_1311_5&#39;)"><span class="mpre">find</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;partition&#39; function takes a predicate and a &#39;Text&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and returns the pair of &#39;Text&#39;s with elements which do and do not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- satisfy the predicate, respectively; i.e.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; partition p t == (filter p t, filter (not . p) t)</span></span><span class="mpre">
</span><a href="#loc_1320_1_1320_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_1_1320_10&#39;)"><span class="mpre">partition</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_1320_1_1320_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_1_1320_10&#39;)"><span class="hl_fundecl"><span class="mpre">partition</span></span></a><span class="mpre"> </span><a name="loc_1320_11_1320_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_11_1320_12&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1320_13_1320_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_13_1320_14&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = (</span><a href="#loc_1327_1_1327_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_1_1327_7&#39;)"><span class="hl_varref"><span class="mpre">filter</span></span></a><span class="mpre"> </span><a href="#loc_1320_11_1320_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_11_1320_12&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1320_13_1320_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_13_1320_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">, </span><a href="#loc_1327_1_1327_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_1_1327_7&#39;)"><span class="hl_varref"><span class="mpre">filter</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_1320_11_1320_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_11_1320_12&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">) </span><a href="#loc_1320_13_1320_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_13_1320_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1320_1_1320_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1320_1_1320_10&#39;)"><span class="mpre">partition</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;filter&#39;, applied to a predicate and a &#39;Text&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returns a &#39;Text&#39; containing those characters that satisfy the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- predicate.</span></span><span class="mpre">
</span><a href="#loc_1327_1_1327_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_1_1327_7&#39;)"><span class="mpre">filter</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1327_1_1327_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_1_1327_7&#39;)"><span class="hl_fundecl"><span class="mpre">filter</span></span></a><span class="mpre"> </span><a name="loc_1327_8_1327_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_8_1327_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1327_10_1327_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_10_1327_11&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_875_1_875_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_875_1_875_7&#39;)"><span class="hl_varref"><span class="mpre">S.filter</span></span></a><span class="mpre"> </span><a href="#loc_1327_8_1327_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_8_1327_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1327_10_1327_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_10_1327_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1327_1_1327_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1327_1_1327_7&#39;)"><span class="mpre">filter</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n+m)/ Find the first instance of @needle@ (which must be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- non-&#39;null&#39;) in @haystack@.  The first element of the returned tuple</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is the prefix of @haystack@ before @needle@ is matched.  The second</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is the remainder of @haystack@, starting with the match.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; breakOn &quot;::&quot; &quot;a::b::c&quot; ==&gt; (&quot;a&quot;, &quot;::b::c&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; breakOn &quot;/&quot; &quot;foobar&quot;   ==&gt; (&quot;foobar&quot;, &quot;&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Laws:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; append prefix match == haystack</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;   where (prefix, match) = breakOn needle haystack</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you need to break a string by a substring repeatedly (e.g. you</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- want to break on every instance of a substring), use &#39;breakOnAll&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- instead, as it has lower startup overhead.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In (unlikely) bad cases, this function&#39;s time complexity degrades</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- towards /O(n*m)/.</span></span><span class="mpre">
</span><a href="#loc_1352_1_1352_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_1_1352_8&#39;)"><span class="mpre">breakOn</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_1352_1_1352_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_1_1352_8&#39;)"><span class="hl_fundecl"><span class="mpre">breakOn</span></span></a><span class="mpre"> </span><a name="loc_1352_9_1352_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_9_1352_12&#39;)"><span class="hl_vardecl"><span class="mpre">pat</span></span></a><span class="mpre"> </span><a name="loc_1352_13_1352_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_13_1352_16&#39;)"><span class="hl_specname"><span class="mpre">src</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1352_23_1352_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_23_1352_26&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1352_27_1352_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_27_1352_30&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1352_31_1352_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_31_1352_34&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1352_9_1352_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_9_1352_12&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre">  = </span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_varref"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;breakOn&quot;</span></span><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = case </span><a href="Data.Text.Internal.Search.html#loc_52_1_52_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Search.html#loc_52_1_52_8&#39;)"><span class="hl_varref"><span class="mpre">indices</span></span></a><span class="mpre"> </span><a href="#loc_1352_9_1352_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_9_1352_12&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre"> </span><a href="#loc_1352_13_1352_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_13_1352_16&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> of
                    []    -&gt; (</span><a href="#loc_1352_13_1352_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_13_1352_16&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">)
                    (</span><a name="loc_1356_22_1356_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1356_22_1356_23&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_) -&gt; (</span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1352_23_1352_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_23_1352_26&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1352_27_1352_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_27_1352_30&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_1356_22_1356_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1356_22_1356_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1352_23_1352_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_23_1352_26&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1352_27_1352_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_27_1352_30&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1356_22_1356_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1356_22_1356_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) (</span><a href="#loc_1352_31_1352_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_31_1352_34&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1356_22_1356_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1356_22_1356_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1352_1_1352_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_1_1352_8&#39;)"><span class="mpre">breakOn</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n+m)/ Similar to &#39;breakOn&#39;, but searches from the end of the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- string.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The first element of the returned tuple is the prefix of @haystack@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- up to and including the last match of @needle@.  The second is the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- remainder of @haystack@, following the match.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; breakOnEnd &quot;::&quot; &quot;a::b::c&quot; ==&gt; (&quot;a::b::&quot;, &quot;c&quot;)</span></span><span class="mpre">
</span><a href="#loc_1368_1_1368_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1368_1_1368_11&#39;)"><span class="mpre">breakOnEnd</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_1368_1_1368_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1368_1_1368_11&#39;)"><span class="hl_fundecl"><span class="mpre">breakOnEnd</span></span></a><span class="mpre"> </span><a name="loc_1368_12_1368_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1368_12_1368_15&#39;)"><span class="hl_vardecl"><span class="mpre">pat</span></span></a><span class="mpre"> </span><a name="loc_1368_16_1368_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1368_16_1368_19&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> = (</span><a href="#loc_627_1_627_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_8&#39;)"><span class="hl_varref"><span class="mpre">reverse</span></span></a><span class="mpre"> </span><a href="#loc_1369_14_1369_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1369_14_1369_15&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">, </span><a href="#loc_627_1_627_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_8&#39;)"><span class="hl_varref"><span class="mpre">reverse</span></span></a><span class="mpre"> </span><a href="#loc_1369_12_1369_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1369_12_1369_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
    where (</span><a name="loc_1369_12_1369_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1369_12_1369_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">,</span><a name="loc_1369_14_1369_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1369_14_1369_15&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">) = </span><a href="#loc_1352_1_1352_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_1_1352_8&#39;)"><span class="hl_varref"><span class="mpre">breakOn</span></span></a><span class="mpre"> (</span><a href="#loc_627_1_627_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_8&#39;)"><span class="hl_varref"><span class="mpre">reverse</span></span></a><span class="mpre"> </span><a href="#loc_1368_12_1368_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1368_12_1368_15&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre">) (</span><a href="#loc_627_1_627_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_8&#39;)"><span class="hl_varref"><span class="mpre">reverse</span></span></a><span class="mpre"> </span><a href="#loc_1368_16_1368_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1368_16_1368_19&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1368_1_1368_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1368_1_1368_11&#39;)"><span class="mpre">breakOnEnd</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n+m)/ Find all non-overlapping instances of @needle@ in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @haystack@.  Each element of the returned list consists of a pair:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * The entire string prior to the /k/th match (i.e. the prefix)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * The /k/th match, followed by the remainder of the string</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; breakOnAll &quot;::&quot; &quot;&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; ==&gt; []</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; breakOnAll &quot;/&quot; &quot;a/b/c/&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; ==&gt; [(&quot;a&quot;, &quot;/b/c/&quot;), (&quot;a/b&quot;, &quot;/c/&quot;), (&quot;a/b/c&quot;, &quot;/&quot;)]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In (unlikely) bad cases, this function&#39;s time complexity degrades</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- towards /O(n*m)/.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The @needle@ parameter may not be empty.</span></span><span class="mpre">
</span><a href="#loc_1393_1_1393_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_1_1393_11&#39;)"><span class="mpre">breakOnAll</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">              </span><span class="hl_comment"><span class="mpre">-- ^ @needle@ to search for</span></span><span class="mpre">
           -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">              </span><span class="hl_comment"><span class="mpre">-- ^ @haystack@ in which to search</span></span><span class="mpre">
           -&gt; [(</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)]
</span><a name="loc_1393_1_1393_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_1_1393_11&#39;)"><span class="hl_fundecl"><span class="mpre">breakOnAll</span></span></a><span class="mpre"> </span><a name="loc_1393_12_1393_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_12_1393_15&#39;)"><span class="hl_vardecl"><span class="mpre">pat</span></span></a><span class="mpre"> </span><a name="loc_1393_16_1393_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_16_1393_19&#39;)"><span class="hl_specname"><span class="mpre">src</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1393_26_1393_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_26_1393_29&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1393_30_1393_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_30_1393_33&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1393_34_1393_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_34_1393_38&#39;)"><span class="hl_vardecl"><span class="mpre">slen</span></span></a><span class="mpre">)
    | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1393_12_1393_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_12_1393_15&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre">  = </span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_varref"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;breakOnAll&quot;</span></span><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">L.map</span></span><span class="mpre"> </span><a href="#loc_1397_5_1397_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1397_5_1397_9&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Search.html#loc_52_1_52_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Search.html#loc_52_1_52_8&#39;)"><span class="hl_varref"><span class="mpre">indices</span></span></a><span class="mpre"> </span><a href="#loc_1393_12_1393_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_12_1393_15&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre"> </span><a href="#loc_1393_16_1393_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_16_1393_19&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">)
  where
    </span><a name="loc_1397_5_1397_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1397_5_1397_9&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre">       </span><a name="loc_1397_16_1397_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1397_16_1397_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = (</span><a href="#loc_1398_5_1398_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1398_5_1398_10&#39;)"><span class="hl_varref"><span class="mpre">chunk</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_1397_16_1397_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1397_16_1397_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">, </span><a href="#loc_1398_5_1398_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1398_5_1398_10&#39;)"><span class="hl_varref"><span class="mpre">chunk</span></span></a><span class="mpre"> </span><a href="#loc_1397_16_1397_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1397_16_1397_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> (</span><a href="#loc_1393_34_1393_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_34_1393_38&#39;)"><span class="hl_varref"><span class="mpre">slen</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1397_16_1397_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1397_16_1397_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">))
    </span><a name="loc_1398_5_1398_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1398_5_1398_10&#39;)"><span class="hl_fundecl"><span class="mpre">chunk</span></span></a><span class="mpre"> !</span><a name="loc_1398_12_1398_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1398_12_1398_13&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> !</span><a name="loc_1398_15_1398_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1398_15_1398_16&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">  = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1393_26_1393_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_26_1393_29&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1398_12_1398_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1398_12_1398_13&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1393_30_1393_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_30_1393_33&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) </span><a href="#loc_1398_15_1398_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1398_15_1398_16&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1393_1_1393_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1393_1_1393_11&#39;)"><span class="mpre">breakOnAll</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ** Indexing &#39;Text&#39;s</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- $index</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you think of a &#39;Text&#39; value as an array of &#39;Char&#39; values (which</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it is not), you run the risk of writing inefficient code.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- An idiom that is common in some languages is to find the numeric</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- offset of a character or substring, then use that number to split</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- or trim the searched string.  With a &#39;Text&#39; value, this approach</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- would require two /O(n)/ operations: one to perform the search, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- one to operate from wherever the search ended.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- For example, suppose you have a string that you want to split on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the substring @\&quot;::\&quot;@, such as @\&quot;foo::bar::quux\&quot;@. Instead of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- searching for the index of @\&quot;::\&quot;@ and taking the substrings</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- before and after that index, you would instead use @breakOnAll \&quot;::\&quot;@.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;Text&#39; index (subscript) operator, starting from 0.</span></span><span class="mpre">
</span><a href="#loc_1422_1_1422_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1422_1_1422_6&#39;)"><span class="mpre">index</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_1422_1_1422_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1422_1_1422_6&#39;)"><span class="hl_fundecl"><span class="mpre">index</span></span></a><span class="mpre"> </span><a name="loc_1422_7_1422_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1422_7_1422_8&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> </span><a name="loc_1422_9_1422_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1422_9_1422_10&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_193_1_193_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_193_1_193_6&#39;)"><span class="hl_varref"><span class="mpre">S.index</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1422_7_1422_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1422_7_1422_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">) </span><a href="#loc_1422_9_1422_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1422_9_1422_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1422_1_1422_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1422_1_1422_6&#39;)"><span class="mpre">index</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;findIndex&#39; function takes a predicate and a &#39;Text&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and returns the index of the first element in the &#39;Text&#39; satisfying</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the predicate. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_1429_1_1429_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1429_1_1429_10&#39;)"><span class="mpre">findIndex</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_1429_1_1429_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1429_1_1429_10&#39;)"><span class="hl_fundecl"><span class="mpre">findIndex</span></span></a><span class="mpre"> </span><a name="loc_1429_11_1429_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1429_11_1429_12&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1429_13_1429_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1429_13_1429_14&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_200_1_200_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_200_1_200_10&#39;)"><span class="hl_varref"><span class="mpre">S.findIndex</span></span></a><span class="mpre"> </span><a href="#loc_1429_11_1429_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1429_11_1429_12&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1429_13_1429_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1429_13_1429_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1429_1_1429_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1429_1_1429_10&#39;)"><span class="mpre">findIndex</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n+m)/ The &#39;count&#39; function returns the number of times the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- query string appears in the given &#39;Text&#39;. An empty query string is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid, and will cause an error to be raised.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In (unlikely) bad cases, this function&#39;s time complexity degrades</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- towards /O(n*m)/.</span></span><span class="mpre">
</span><a href="#loc_1439_1_1439_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_1_1439_6&#39;)"><span class="mpre">count</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_1439_1_1439_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_1_1439_6&#39;)"><span class="hl_fundecl"><span class="mpre">count</span></span></a><span class="mpre"> </span><a name="loc_1439_7_1439_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_7_1439_10&#39;)"><span class="hl_vardecl"><span class="mpre">pat</span></span></a><span class="mpre"> </span><a name="loc_1439_11_1439_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_11_1439_14&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre">
    | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1439_7_1439_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_7_1439_10&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre">        = </span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_varref"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;count&quot;</span></span><span class="mpre">
    | </span><a href="#loc_548_1_548_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_1_548_12&#39;)"><span class="hl_varref"><span class="mpre">isSingleton</span></span></a><span class="mpre"> </span><a href="#loc_1439_7_1439_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_7_1439_10&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre"> = </span><a href="#loc_1453_1_1453_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1453_1_1453_10&#39;)"><span class="hl_varref"><span class="mpre">countChar</span></span></a><span class="mpre"> (</span><a href="Data.Text.Unsafe.html#loc_43_1_43_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_43_1_43_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeHead</span></span></a><span class="mpre"> </span><a href="#loc_1439_7_1439_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_7_1439_10&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre">) </span><a href="#loc_1439_11_1439_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_11_1439_14&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">       = </span><span class="hl_varref"><span class="mpre">L.length</span></span><span class="mpre"> (</span><a href="Data.Text.Internal.Search.html#loc_52_1_52_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Search.html#loc_52_1_52_8&#39;)"><span class="hl_varref"><span class="mpre">indices</span></span></a><span class="mpre"> </span><a href="#loc_1439_7_1439_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_7_1439_10&#39;)"><span class="hl_varref"><span class="mpre">pat</span></span></a><span class="mpre"> </span><a href="#loc_1439_11_1439_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_11_1439_14&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1439_1_1439_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1439_1_1439_6&#39;)"><span class="mpre">count</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT count/singleton -&gt; countChar&quot; [~1] forall c t.
    count (singleton c) t = countChar c t
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;countChar&#39; function returns the number of times the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- query element appears in the given &#39;Text&#39;. Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_1453_1_1453_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1453_1_1453_10&#39;)"><span class="mpre">countChar</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_1453_1_1453_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1453_1_1453_10&#39;)"><span class="hl_fundecl"><span class="mpre">countChar</span></span></a><span class="mpre"> </span><a name="loc_1453_11_1453_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1453_11_1453_12&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_1453_13_1453_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1453_13_1453_14&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_206_1_206_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_206_1_206_10&#39;)"><span class="hl_varref"><span class="mpre">S.countChar</span></span></a><span class="mpre"> </span><a href="#loc_1453_11_1453_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1453_11_1453_12&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1453_13_1453_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1453_13_1453_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1453_1_1453_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1453_1_1453_10&#39;)"><span class="mpre">countChar</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Zipping</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;zip&#39; takes two &#39;Text&#39;s and returns a list of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- corresponding pairs of bytes. If one input &#39;Text&#39; is short,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- excess elements of the longer &#39;Text&#39; are discarded. This is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- equivalent to a pair of &#39;unpack&#39; operations.</span></span><span class="mpre">
</span><a href="#loc_1464_1_1464_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1464_1_1464_4&#39;)"><span class="mpre">zip</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [(</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">)]
</span><a name="loc_1464_1_1464_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1464_1_1464_4&#39;)"><span class="hl_fundecl"><span class="mpre">zip</span></span></a><span class="mpre"> </span><a name="loc_1464_5_1464_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1464_5_1464_6&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_1464_7_1464_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1464_7_1464_8&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">S.unstreamList</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.Common.html#loc_917_1_917_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_917_1_917_8&#39;)"><span class="hl_varref"><span class="mpre">S.zipWith</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">(,)</span></span><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1464_5_1464_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1464_5_1464_6&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1464_7_1464_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1464_7_1464_8&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [0] </span><a href="#loc_1464_1_1464_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1464_1_1464_4&#39;)"><span class="mpre">zip</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ &#39;zipWith&#39; generalises &#39;zip&#39; by zipping with the function</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- given as the first argument, instead of a tupling function.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Performs replacement on invalid scalar values.</span></span><span class="mpre">
</span><a href="#loc_1471_1_1471_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_1_1471_8&#39;)"><span class="mpre">zipWith</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">) -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1471_1_1471_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_1_1471_8&#39;)"><span class="hl_fundecl"><span class="mpre">zipWith</span></span></a><span class="mpre"> </span><a name="loc_1471_9_1471_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_9_1471_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_1471_11_1471_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_11_1471_13&#39;)"><span class="hl_vardecl"><span class="mpre">t1</span></span></a><span class="mpre"> </span><a name="loc_1471_14_1471_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_14_1471_16&#39;)"><span class="hl_vardecl"><span class="mpre">t2</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Common.html#loc_917_1_917_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_917_1_917_8&#39;)"><span class="hl_varref"><span class="mpre">S.zipWith</span></span></a><span class="mpre"> </span><a href="#loc_1472_11_1472_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1472_11_1472_12&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1471_11_1471_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_11_1471_13&#39;)"><span class="hl_varref"><span class="mpre">t1</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1471_14_1471_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_14_1471_16&#39;)"><span class="hl_varref"><span class="mpre">t2</span></span></a><span class="mpre">))
    where </span><a name="loc_1472_11_1472_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1472_11_1472_12&#39;)"><span class="hl_fundecl"><span class="mpre">g</span></span></a><span class="mpre"> </span><a name="loc_1472_13_1472_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1472_13_1472_14&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_1472_15_1472_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1472_15_1472_16&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> (</span><a href="#loc_1471_9_1471_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_9_1471_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_1472_13_1472_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1472_13_1472_14&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_1472_15_1472_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1472_15_1472_16&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [0] </span><a href="#loc_1471_1_1471_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1471_1_1471_8&#39;)"><span class="mpre">zipWith</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Breaks a &#39;Text&#39; up into a list of words, delimited by &#39;Char&#39;s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- representing white space.</span></span><span class="mpre">
</span><a href="#loc_1478_1_1478_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_1_1478_6&#39;)"><span class="mpre">words</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1478_1_1478_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_1_1478_6&#39;)"><span class="hl_fundecl"><span class="mpre">words</span></span></a><span class="mpre"> </span><a name="loc_1478_7_1478_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_7_1478_8&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1478_15_1478_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_15_1478_18&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1478_19_1478_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_19_1478_22&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1478_23_1478_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_23_1478_26&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_1480_5_1480_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_5_1480_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where
    </span><a name="loc_1480_5_1480_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_5_1480_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> !</span><a name="loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_vardecl"><span class="mpre">start</span></span></a><span class="mpre"> !</span><a name="loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre">
        | </span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_1478_23_1478_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_23_1478_26&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> = if </span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
                     then []
                     else [</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="#loc_1478_15_1478_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_15_1478_18&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1478_19_1478_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_19_1478_22&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) (</span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="mpre">)]
        | </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="hl_varref"><span class="mpre">isSpace</span></span></a><span class="mpre"> </span><a href="#loc_1489_20_1489_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1489_20_1489_21&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> =
            if </span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
            then </span><a href="#loc_1480_5_1480_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_5_1480_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
            else </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="#loc_1478_15_1478_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_15_1478_18&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1478_19_1478_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_19_1478_22&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) (</span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_1480_5_1480_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_5_1480_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1489_22_1489_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1489_22_1489_23&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1489_22_1489_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1489_22_1489_23&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_1480_5_1480_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_5_1480_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_1480_11_1480_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_11_1480_16&#39;)"><span class="hl_varref"><span class="mpre">start</span></span></a><span class="mpre"> (</span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1489_22_1489_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1489_22_1489_23&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">)
        where </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_1489_20_1489_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1489_20_1489_21&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_1489_22_1489_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1489_22_1489_23&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_1478_7_1478_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_7_1478_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="#loc_1480_18_1480_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1480_18_1480_19&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1478_1_1478_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1478_1_1478_6&#39;)"><span class="mpre">words</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Breaks a &#39;Text&#39; up into a list of &#39;Text&#39;s at</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- newline &#39;Char&#39;s. The resulting strings do not contain newlines.</span></span><span class="mpre">
</span><a href="#loc_1495_1_1495_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1495_1_1495_6&#39;)"><span class="mpre">lines</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_1495_1_1495_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1495_1_1495_6&#39;)"><span class="hl_fundecl"><span class="mpre">lines</span></span></a><span class="mpre"> </span><a name="loc_1495_7_1495_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1495_7_1495_9&#39;)"><span class="hl_vardecl"><span class="mpre">ps</span></span></a><span class="mpre"> | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1495_7_1495_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1495_7_1495_9&#39;)"><span class="hl_varref"><span class="mpre">ps</span></span></a><span class="mpre">   = []
         | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_1499_14_1499_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1499_14_1499_15&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> if </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1499_16_1499_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1499_16_1499_17&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
                           then []
                           else </span><a href="#loc_1495_1_1495_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1495_1_1495_6&#39;)"><span class="hl_varref"><span class="mpre">lines</span></span></a><span class="mpre"> (</span><a href="Data.Text.Unsafe.html#loc_54_1_54_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_54_1_54_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeTail</span></span></a><span class="mpre"> </span><a href="#loc_1499_16_1499_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1499_16_1499_17&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
    where (# </span><a name="loc_1499_14_1499_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1499_14_1499_15&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre">,</span><a name="loc_1499_16_1499_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1499_16_1499_17&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> #) = </span><a href="Data.Text.Internal.Private.html#loc_24_1_24_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Private.html#loc_24_1_24_6&#39;)"><span class="hl_varref"><span class="mpre">span_</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="mpre">) </span><a href="#loc_1495_7_1495_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1495_7_1495_9&#39;)"><span class="hl_varref"><span class="mpre">ps</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1495_1_1495_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1495_1_1495_6&#39;)"><span class="mpre">lines</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-
-- | /O(n)/ Portably breaks a &#39;Text&#39; up into a list of &#39;Text&#39;s at line
-- boundaries.
--
-- A line boundary is considered to be either a line feed, a carriage
-- return immediately followed by a line feed, or a carriage return.
-- This accounts for both Unix and Windows line ending conventions,
-- and for the old convention used on Mac OS 9 and earlier.
lines&#39; :: Text -&gt; [Text]
lines&#39; ps | null ps   = []
          | otherwise = h : case uncons t of
                              Nothing -&gt; []
                              Just (c,t&#39;)
                                  | c == &#39;\n&#39; -&gt; lines t&#39;
                                  | c == &#39;\r&#39; -&gt; case uncons t&#39; of
                                                   Just (&#39;\n&#39;,t&#39;&#39;) -&gt; lines t&#39;&#39;
                                                   _               -&gt; lines t&#39;
    where (h,t)    = span notEOL ps
          notEOL c = c /= &#39;\n&#39; &amp;&amp; c /= &#39;\r&#39;
{-# INLINE lines&#39; #-}
-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Joins lines, after appending a terminating newline to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- each.</span></span><span class="mpre">
</span><a href="#loc_1527_1_1527_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1527_1_1527_8&#39;)"><span class="mpre">unlines</span></a><span class="mpre"> :: [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">] -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1527_1_1527_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1527_1_1527_8&#39;)"><span class="hl_vardecl"><span class="mpre">unlines</span></span></a><span class="mpre"> = </span><a href="#loc_849_1_849_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_1_849_7&#39;)"><span class="hl_varref"><span class="mpre">concat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">L.map</span></span><span class="mpre"> (</span><a href="#loc_431_1_431_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_1_431_5&#39;)"><span class="hl_infix"><span class="mpre">`snoc`</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1527_1_1527_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1527_1_1527_8&#39;)"><span class="mpre">unlines</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Joins words using single space characters.</span></span><span class="mpre">
</span><a href="#loc_1532_1_1532_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1532_1_1532_8&#39;)"><span class="mpre">unwords</span></a><span class="mpre"> :: [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">] -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1532_1_1532_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1532_1_1532_8&#39;)"><span class="hl_vardecl"><span class="mpre">unwords</span></span></a><span class="mpre"> = </span><a href="#loc_615_1_615_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_1_615_12&#39;)"><span class="hl_varref"><span class="mpre">intercalate</span></span></a><span class="mpre"> (</span><a href="#loc_411_1_411_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_1_411_10&#39;)"><span class="hl_varref"><span class="mpre">singleton</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39; &#39;</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1532_1_1532_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1532_1_1532_8&#39;)"><span class="mpre">unwords</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;isPrefixOf&#39; function takes two &#39;Text&#39;s and returns</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;True&#39; iff the first is a prefix of the second.  Subject to fusion.</span></span><span class="mpre">
</span><a href="#loc_1538_1_1538_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_1_1538_11&#39;)"><span class="mpre">isPrefixOf</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_1538_1_1538_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_1_1538_11&#39;)"><span class="hl_fundecl"><span class="mpre">isPrefixOf</span></span></a><span class="mpre"> </span><a name="loc_1538_12_1538_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_12_1538_13&#39;)"><span class="hl_specname"><span class="mpre">a</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> _ _ </span><a name="loc_1538_24_1538_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_24_1538_28&#39;)"><span class="hl_vardecl"><span class="mpre">alen</span></span></a><span class="mpre">) </span><a name="loc_1538_30_1538_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_30_1538_31&#39;)"><span class="hl_specname"><span class="mpre">b</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> _ _ </span><a name="loc_1538_42_1538_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_42_1538_46&#39;)"><span class="hl_vardecl"><span class="mpre">blen</span></span></a><span class="mpre">) =
    </span><a href="#loc_1538_24_1538_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_24_1538_28&#39;)"><span class="hl_varref"><span class="mpre">alen</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><a href="#loc_1538_42_1538_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_42_1538_46&#39;)"><span class="hl_varref"><span class="mpre">blen</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.Common.html#loc_813_1_813_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_813_1_813_11&#39;)"><span class="hl_varref"><span class="mpre">S.isPrefixOf</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1538_12_1538_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_12_1538_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">stream</span></span></a><span class="mpre"> </span><a href="#loc_1538_30_1538_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_30_1538_31&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1538_1_1538_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_1_1538_11&#39;)"><span class="mpre">isPrefixOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT isPrefixOf -&gt; fused&quot; [~1] forall s t.
    isPrefixOf s t = S.isPrefixOf (stream s) (stream t)
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ The &#39;isSuffixOf&#39; function takes two &#39;Text&#39;s and returns</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;True&#39; iff the first is a suffix of the second.</span></span><span class="mpre">
</span><a href="#loc_1550_1_1550_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_1_1550_11&#39;)"><span class="mpre">isSuffixOf</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_1550_1_1550_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_1_1550_11&#39;)"><span class="hl_fundecl"><span class="mpre">isSuffixOf</span></span></a><span class="mpre"> </span><a name="loc_1550_12_1550_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_12_1550_13&#39;)"><span class="hl_specname"><span class="mpre">a</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_aarr</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_aoff</span></span><span class="mpre"> </span><a name="loc_1550_32_1550_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_32_1550_36&#39;)"><span class="hl_vardecl"><span class="mpre">alen</span></span></a><span class="mpre">) </span><a name="loc_1550_38_1550_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_38_1550_39&#39;)"><span class="hl_specname"><span class="mpre">b</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1550_46_1550_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_46_1550_50&#39;)"><span class="hl_vardecl"><span class="mpre">barr</span></span></a><span class="mpre"> </span><a name="loc_1550_51_1550_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_51_1550_55&#39;)"><span class="hl_vardecl"><span class="mpre">boff</span></span></a><span class="mpre"> </span><a name="loc_1550_56_1550_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_56_1550_60&#39;)"><span class="hl_vardecl"><span class="mpre">blen</span></span></a><span class="mpre">) =
    </span><a href="#loc_1552_9_1552_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1552_9_1552_10&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_1550_12_1550_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_12_1550_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_1553_9_1553_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1553_9_1553_11&#39;)"><span class="hl_varref"><span class="mpre">b&#39;</span></span></a><span class="mpre">
  where </span><a name="loc_1552_9_1552_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1552_9_1552_10&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre">              = </span><a href="#loc_1550_56_1550_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_56_1550_60&#39;)"><span class="hl_varref"><span class="mpre">blen</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_1550_32_1550_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_32_1550_36&#39;)"><span class="hl_varref"><span class="mpre">alen</span></span></a><span class="mpre">
        </span><a name="loc_1553_9_1553_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1553_9_1553_11&#39;)"><span class="hl_vardecl"><span class="mpre">b&#39;</span></span></a><span class="mpre"> | </span><a href="#loc_1552_9_1552_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1552_9_1552_10&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = </span><a href="#loc_1550_38_1550_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_38_1550_39&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
           | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="#loc_1550_46_1550_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_46_1550_50&#39;)"><span class="hl_varref"><span class="mpre">barr</span></span></a><span class="mpre"> (</span><a href="#loc_1550_51_1550_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_51_1550_55&#39;)"><span class="hl_varref"><span class="mpre">boff</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1552_9_1552_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1552_9_1552_10&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) </span><a href="#loc_1550_32_1550_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_32_1550_36&#39;)"><span class="hl_varref"><span class="mpre">alen</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1550_1_1550_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_1_1550_11&#39;)"><span class="mpre">isSuffixOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n+m)/ The &#39;isInfixOf&#39; function takes two &#39;Text&#39;s and returns</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;True&#39; iff the first is contained, wholly and intact, anywhere</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- within the second.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In (unlikely) bad cases, this function&#39;s time complexity degrades</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- towards /O(n*m)/.</span></span><span class="mpre">
</span><a href="#loc_1564_1_1564_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_1_1564_10&#39;)"><span class="mpre">isInfixOf</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_1564_1_1564_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_1_1564_10&#39;)"><span class="hl_fundecl"><span class="mpre">isInfixOf</span></span></a><span class="mpre"> </span><a name="loc_1564_11_1564_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_11_1564_17&#39;)"><span class="hl_vardecl"><span class="mpre">needle</span></span></a><span class="mpre"> </span><a name="loc_1564_18_1564_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_18_1564_26&#39;)"><span class="hl_vardecl"><span class="mpre">haystack</span></span></a><span class="mpre">
    | </span><a href="#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><a href="#loc_1564_11_1564_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_11_1564_17&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre">        = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
    | </span><a href="#loc_548_1_548_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_1_548_12&#39;)"><span class="hl_varref"><span class="mpre">isSingleton</span></span></a><span class="mpre"> </span><a href="#loc_1564_11_1564_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_11_1564_17&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Common.html#loc_832_1_832_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Common.html#loc_832_1_832_5&#39;)"><span class="hl_varref"><span class="mpre">S.elem</span></span></a><span class="mpre"> (</span><a href="Data.Text.Unsafe.html#loc_43_1_43_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_43_1_43_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeHead</span></span></a><span class="mpre"> </span><a href="#loc_1564_11_1564_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_11_1564_17&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">S.stream</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_1564_18_1564_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_18_1564_26&#39;)"><span class="hl_varref"><span class="mpre">haystack</span></span></a><span class="mpre">
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">          = </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">L.null</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Search.html#loc_52_1_52_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Search.html#loc_52_1_52_8&#39;)"><span class="hl_varref"><span class="mpre">indices</span></span></a><span class="mpre"> </span><a href="#loc_1564_11_1564_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_11_1564_17&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_1564_18_1564_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_18_1564_26&#39;)"><span class="hl_varref"><span class="mpre">haystack</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [1] </span><a href="#loc_1564_1_1564_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1564_1_1564_10&#39;)"><span class="mpre">isInfixOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
&quot;TEXT isInfixOf/singleton -&gt; S.elem/S.stream&quot; [~1] forall n h.
    isInfixOf (singleton n) h = S.elem n (S.stream h)
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * View patterns</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Return the suffix of the second string if its prefix</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- matches the entire first string.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; stripPrefix &quot;foo&quot; &quot;foobar&quot; == Just &quot;bar&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; stripPrefix &quot;&quot;    &quot;baz&quot;    == Just &quot;baz&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; stripPrefix &quot;foo&quot; &quot;quux&quot;   == Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is particularly useful with the @ViewPatterns@ extension to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- GHC, as follows:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; {-# LANGUAGE ViewPatterns #-}</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import Data.Text as T</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; fnordLength :: Text -&gt; Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; fnordLength (stripPrefix &quot;fnord&quot; -&gt; Just suf) = T.length suf</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; fnordLength _                                 = -1</span></span><span class="mpre">
</span><a href="#loc_1597_1_1597_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_1_1597_12&#39;)"><span class="mpre">stripPrefix</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1597_1_1597_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_1_1597_12&#39;)"><span class="hl_fundecl"><span class="mpre">stripPrefix</span></span></a><span class="mpre"> </span><a name="loc_1597_13_1597_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_13_1597_14&#39;)"><span class="hl_specname"><span class="mpre">p</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arr</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_off</span></span><span class="mpre"> </span><a name="loc_1597_31_1597_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_31_1597_35&#39;)"><span class="hl_vardecl"><span class="mpre">plen</span></span></a><span class="mpre">) </span><a name="loc_1597_37_1597_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_37_1597_38&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1597_45_1597_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_45_1597_48&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1597_49_1597_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_49_1597_52&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1597_53_1597_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_53_1597_56&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_1597_13_1597_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_13_1597_14&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1538_1_1538_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1538_1_1538_11&#39;)"><span class="hl_infix"><span class="mpre">`isPrefixOf`</span></span></a><span class="mpre"> </span><a href="#loc_1597_37_1597_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_37_1597_38&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1597_45_1597_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_45_1597_48&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_1597_49_1597_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_49_1597_52&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1597_31_1597_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_31_1597_35&#39;)"><span class="hl_varref"><span class="mpre">plen</span></span></a><span class="mpre">) (</span><a href="#loc_1597_53_1597_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_53_1597_56&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1597_31_1597_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1597_31_1597_35&#39;)"><span class="hl_varref"><span class="mpre">plen</span></span></a><span class="mpre">)
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">        = </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Find the longest non-empty common prefix of two strings</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and return it, along with the suffixes of each string at which they</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- no longer match.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the strings do not have a common prefix or either one is empty,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- this function returns &#39;Nothing&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; commonPrefixes &quot;foobar&quot; &quot;fooquux&quot; == Just (&quot;foo&quot;,&quot;bar&quot;,&quot;quux&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; commonPrefixes &quot;veeble&quot; &quot;fetzer&quot;  == Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; commonPrefixes &quot;&quot; &quot;baz&quot;           == Nothing</span></span><span class="mpre">
</span><a href="#loc_1614_1_1614_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_1_1614_15&#39;)"><span class="mpre">commonPrefixes</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">,</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">,</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_1614_1_1614_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_1_1614_15&#39;)"><span class="hl_fundecl"><span class="mpre">commonPrefixes</span></span></a><span class="mpre"> </span><a name="loc_1614_16_1614_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_16_1614_18&#39;)"><span class="hl_specname"><span class="mpre">t0</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1614_25_1614_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_25_1614_29&#39;)"><span class="hl_vardecl"><span class="mpre">arr0</span></span></a><span class="mpre"> </span><a name="loc_1614_30_1614_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_30_1614_34&#39;)"><span class="hl_vardecl"><span class="mpre">off0</span></span></a><span class="mpre"> </span><a name="loc_1614_35_1614_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_35_1614_39&#39;)"><span class="hl_vardecl"><span class="mpre">len0</span></span></a><span class="mpre">) </span><a name="loc_1614_41_1614_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_41_1614_43&#39;)"><span class="hl_specname"><span class="mpre">t1</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1614_50_1614_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_50_1614_54&#39;)"><span class="hl_vardecl"><span class="mpre">arr1</span></span></a><span class="mpre"> </span><a name="loc_1614_55_1614_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_55_1614_59&#39;)"><span class="hl_vardecl"><span class="mpre">off1</span></span></a><span class="mpre"> </span><a name="loc_1614_60_1614_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_60_1614_64&#39;)"><span class="hl_vardecl"><span class="mpre">len1</span></span></a><span class="mpre">) = </span><a href="#loc_1616_5_1616_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_5_1616_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where
    </span><a name="loc_1616_5_1616_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_5_1616_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_1616_9_1616_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_9_1616_10&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_1616_12_1616_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_12_1616_13&#39;)"><span class="hl_vardecl"><span class="mpre">j</span></span></a><span class="mpre"> | </span><a href="#loc_1616_9_1616_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_9_1616_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_1614_35_1614_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_35_1614_39&#39;)"><span class="hl_varref"><span class="mpre">len0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_1616_12_1616_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_12_1616_13&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_1614_60_1614_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_60_1614_64&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_1621_18_1621_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1621_18_1621_19&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_1622_18_1622_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1622_18_1622_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_1616_5_1616_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_5_1616_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_1616_9_1616_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_9_1616_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1621_20_1621_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1621_20_1621_22&#39;)"><span class="hl_varref"><span class="mpre">d0</span></span></a><span class="mpre">) (</span><a href="#loc_1616_12_1616_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_12_1616_13&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1622_20_1622_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1622_20_1622_22&#39;)"><span class="hl_varref"><span class="mpre">d1</span></span></a><span class="mpre">)
             | </span><a href="#loc_1616_9_1616_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_9_1616_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">     = </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="#loc_1614_25_1614_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_25_1614_29&#39;)"><span class="hl_varref"><span class="mpre">arr0</span></span></a><span class="mpre"> </span><a href="#loc_1614_30_1614_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_30_1614_34&#39;)"><span class="hl_varref"><span class="mpre">off0</span></span></a><span class="mpre"> </span><a href="#loc_1616_9_1616_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_9_1616_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">,
                                 </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1614_25_1614_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_25_1614_29&#39;)"><span class="hl_varref"><span class="mpre">arr0</span></span></a><span class="mpre"> (</span><a href="#loc_1614_30_1614_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_30_1614_34&#39;)"><span class="hl_varref"><span class="mpre">off0</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1616_9_1616_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_9_1616_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) (</span><a href="#loc_1614_35_1614_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_35_1614_39&#39;)"><span class="hl_varref"><span class="mpre">len0</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1616_9_1616_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_9_1616_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">),
                                 </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1614_50_1614_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_50_1614_54&#39;)"><span class="hl_varref"><span class="mpre">arr1</span></span></a><span class="mpre"> (</span><a href="#loc_1614_55_1614_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_55_1614_59&#39;)"><span class="hl_varref"><span class="mpre">off1</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_1616_12_1616_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_12_1616_13&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre">) (</span><a href="#loc_1614_60_1614_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_60_1614_64&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1616_12_1616_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_12_1616_13&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre">))
             | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
      where </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_1621_18_1621_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1621_18_1621_19&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_1621_20_1621_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1621_20_1621_22&#39;)"><span class="hl_vardecl"><span class="mpre">d0</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_1614_16_1614_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_16_1614_18&#39;)"><span class="hl_varref"><span class="mpre">t0</span></span></a><span class="mpre"> </span><a href="#loc_1616_9_1616_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_9_1616_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
            </span><a href="Data.Text.Unsafe.html#loc_62_13_62_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_62_13_62_17&#39;)"><span class="hl_conref"><span class="mpre">Iter</span></span></a><span class="mpre"> </span><a name="loc_1622_18_1622_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1622_18_1622_19&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> </span><a name="loc_1622_20_1622_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1622_20_1622_22&#39;)"><span class="hl_vardecl"><span class="mpre">d1</span></span></a><span class="mpre"> = </span><a href="Data.Text.Unsafe.html#loc_68_1_68_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Unsafe.html#loc_68_1_68_5&#39;)"><span class="hl_varref"><span class="mpre">iter</span></span></a><span class="mpre"> </span><a href="#loc_1614_41_1614_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1614_41_1614_43&#39;)"><span class="hl_varref"><span class="mpre">t1</span></span></a><span class="mpre"> </span><a href="#loc_1616_12_1616_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1616_12_1616_13&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Return the prefix of the second string if its suffix</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- matches the entire first string.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; stripSuffix &quot;bar&quot; &quot;foobar&quot; == Just &quot;foo&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; stripSuffix &quot;&quot;    &quot;baz&quot;    == Just &quot;baz&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; stripSuffix &quot;foo&quot; &quot;quux&quot;   == Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is particularly useful with the @ViewPatterns@ extension to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- GHC, as follows:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; {-# LANGUAGE ViewPatterns #-}</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; import Data.Text as T</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; quuxLength :: Text -&gt; Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; quuxLength (stripSuffix &quot;quux&quot; -&gt; Just pre) = T.length pre</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; quuxLength _                                = -1</span></span><span class="mpre">
</span><a href="#loc_1643_1_1643_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_1_1643_12&#39;)"><span class="mpre">stripSuffix</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1643_1_1643_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_1_1643_12&#39;)"><span class="hl_fundecl"><span class="mpre">stripSuffix</span></span></a><span class="mpre"> </span><a name="loc_1643_13_1643_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_13_1643_14&#39;)"><span class="hl_specname"><span class="mpre">p</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_arr</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_off</span></span><span class="mpre"> </span><a name="loc_1643_31_1643_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_31_1643_35&#39;)"><span class="hl_vardecl"><span class="mpre">plen</span></span></a><span class="mpre">) </span><a name="loc_1643_37_1643_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_37_1643_38&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1643_45_1643_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_45_1643_48&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1643_49_1643_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_49_1643_52&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1643_53_1643_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_53_1643_56&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
    | </span><a href="#loc_1643_13_1643_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_13_1643_14&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1550_1_1550_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1550_1_1550_11&#39;)"><span class="hl_infix"><span class="mpre">`isSuffixOf`</span></span></a><span class="mpre"> </span><a href="#loc_1643_37_1643_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_37_1643_38&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_1643_45_1643_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_45_1643_48&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1643_49_1643_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_49_1643_52&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> (</span><a href="#loc_1643_53_1643_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_53_1643_56&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_1643_31_1643_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1643_31_1643_35&#39;)"><span class="hl_varref"><span class="mpre">plen</span></span></a><span class="mpre">)
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">        = </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Add a list of non-negative numbers.  Errors out on overflow.</span></span><span class="mpre">
</span><a href="#loc_1649_1_1649_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1649_1_1649_5&#39;)"><span class="mpre">sumP</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_1649_1_1649_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1649_1_1649_5&#39;)"><span class="hl_fundecl"><span class="mpre">sumP</span></span></a><span class="mpre"> </span><a name="loc_1649_6_1649_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1649_6_1649_9&#39;)"><span class="hl_vardecl"><span class="mpre">fun</span></span></a><span class="mpre"> = </span><a href="#loc_1650_9_1650_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_9_1650_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where </span><a name="loc_1650_9_1650_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_9_1650_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_1650_13_1650_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_13_1650_14&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> (</span><a name="loc_1650_16_1650_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_16_1650_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_1650_18_1650_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_18_1650_20&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">)
            | </span><a href="#loc_1653_17_1653_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1653_17_1653_19&#39;)"><span class="hl_varref"><span class="mpre">ax</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">   = </span><a href="#loc_1650_9_1650_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_9_1650_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_1653_17_1653_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1653_17_1653_19&#39;)"><span class="hl_varref"><span class="mpre">ax</span></span></a><span class="mpre"> </span><a href="#loc_1650_18_1650_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_18_1650_20&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_1660_1_1660_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1660_1_1660_14&#39;)"><span class="hl_varref"><span class="mpre">overflowError</span></span></a><span class="mpre"> </span><a href="#loc_1649_6_1649_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1649_6_1649_9&#39;)"><span class="hl_varref"><span class="mpre">fun</span></span></a><span class="mpre">
          where </span><a name="loc_1653_17_1653_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1653_17_1653_19&#39;)"><span class="hl_vardecl"><span class="mpre">ax</span></span></a><span class="mpre"> = </span><a href="#loc_1650_13_1650_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_13_1650_14&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_1650_16_1650_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_16_1650_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
        </span><a href="#loc_1650_9_1650_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1650_9_1650_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_1654_12_1654_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1654_12_1654_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">  _         = </span><a href="#loc_1654_12_1654_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1654_12_1654_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">

</span><a href="#loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="mpre">emptyError</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_1657_1_1657_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_1_1657_11&#39;)"><span class="hl_fundecl"><span class="mpre">emptyError</span></span></a><span class="mpre"> </span><a name="loc_1657_12_1657_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_12_1657_15&#39;)"><span class="hl_vardecl"><span class="mpre">fun</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">P.error</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Text.&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_1657_12_1657_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1657_12_1657_15&#39;)"><span class="hl_varref"><span class="mpre">fun</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;: empty input&quot;</span></span><span class="mpre">

</span><a href="#loc_1660_1_1660_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1660_1_1660_14&#39;)"><span class="mpre">overflowError</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_1660_1_1660_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1660_1_1660_14&#39;)"><span class="hl_fundecl"><span class="mpre">overflowError</span></span></a><span class="mpre"> </span><a name="loc_1660_15_1660_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1660_15_1660_18&#39;)"><span class="hl_vardecl"><span class="mpre">fun</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">P.error</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Text.&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_1660_15_1660_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1660_15_1660_18&#39;)"><span class="hl_varref"><span class="mpre">fun</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;: size overflow&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/ Make a distinct copy of the given string, sharing no</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- storage with the original string.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- As an example, suppose you read a large string, of which you need</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- only a small portion.  If you do not use &#39;copy&#39;, the entire original</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- array will be kept alive in memory by the smaller string. Making a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- copy \&quot;breaks the link\&quot; to the original array, allowing it to be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- garbage collected if there are no other live references to it.</span></span><span class="mpre">
</span><a href="#loc_1671_1_1671_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_1_1671_5&#39;)"><span class="mpre">copy</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_1671_1_1671_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_1_1671_5&#39;)"><span class="hl_fundecl"><span class="mpre">copy</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_1671_12_1671_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_12_1671_15&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_1671_16_1671_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_16_1671_19&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_1671_20_1671_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_20_1671_23&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">A.run</span></span></a><span class="mpre"> </span><a href="#loc_1673_5_1673_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1673_5_1673_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_1671_20_1671_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_20_1671_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
  where
    </span><a name="loc_1673_5_1673_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1673_5_1673_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
      </span><a name="loc_1674_7_1674_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1674_7_1674_11&#39;)"><span class="hl_vardecl"><span class="mpre">marr</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Text.Array.html#loc_115_1_115_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_115_1_115_4&#39;)"><span class="hl_varref"><span class="mpre">A.new</span></span></a><span class="mpre"> </span><a href="#loc_1671_20_1671_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_20_1671_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      </span><a href="Data.Text.Array.html#loc_215_1_215_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_215_1_215_6&#39;)"><span class="hl_varref"><span class="mpre">A.copyI</span></span></a><span class="mpre"> </span><a href="#loc_1674_7_1674_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1674_7_1674_11&#39;)"><span class="hl_varref"><span class="mpre">marr</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_1671_12_1671_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_12_1671_15&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_1671_16_1671_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_16_1671_19&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_1671_20_1671_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1671_20_1671_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_1674_7_1674_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1674_7_1674_11&#39;)"><span class="hl_varref"><span class="mpre">marr</span></span></a><span class="mpre">
</span></div></body></html>