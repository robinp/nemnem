<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE ForeignFunctionInterface #-}
{-# LANGUAGE CPP #-}

module Network.Wai.Handler.Warp.Recv (
    receive
  ) where

import Control.Applicative (</span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="mpre">(&lt;$&gt;)</span></a><span class="mpre">)
import Control.Monad (</span><a href="Control.Monad.html#loc_195_1_195_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_195_1_195_5&#39;)"><span class="mpre">void</span></a><span class="mpre">)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 10, srcSpanStartColumn = 18, srcSpanEndLine = 10, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as BS (empty)
import Data.ByteString.Internal (</span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="mpre">ByteString</span></a><span class="mpre">(..), </span><a href="Data.ByteString.Internal.html#loc_489_1_489_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_489_1_489_17&#39;)"><span class="mpre">mallocByteString</span></a><span class="mpre">)
import Data.Word (Word8)
import Foreign.C.Error (</span><a href="Foreign.C.Error.html#loc_146_1_146_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_146_1_146_7&#39;)"><span class="mpre">eAGAIN</span></a><span class="mpre">, </span><a href="Foreign.C.Error.html#loc_262_1_262_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_262_1_262_9&#39;)"><span class="mpre">getErrno</span></a><span class="mpre">, </span><a href="Foreign.C.Error.html#loc_280_1_280_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_280_1_280_11&#39;)"><span class="mpre">throwErrno</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 14, srcSpanStartColumn = 8, srcSpanEndLine = 14, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Foreign.C.Types&quot;"><span class="mpre">Foreign.C.Types</span></span><span class="mpre">
import Foreign.ForeignPtr (withForeignPtr)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 16, srcSpanStartColumn = 8, srcSpanEndLine = 16, srcSpanEndColumn = 19}, srcInfoPoints = []}) &quot;Foreign.Ptr&quot;"><span class="mpre">Foreign.Ptr</span></span><span class="mpre"> (Ptr, castPtr)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 17, srcSpanStartColumn = 8, srcSpanEndLine = 17, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Conc&quot;"><span class="mpre">GHC.Conc</span></span><span class="mpre"> (threadWaitRead)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 18, srcSpanStartColumn = 8, srcSpanEndLine = 18, srcSpanEndColumn = 22}, srcInfoPoints = []}) &quot;Network.Socket&quot;"><span class="mpre">Network.Socket</span></span><span class="mpre"> (Socket, fdSocket)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 19, srcSpanStartColumn = 8, srcSpanEndLine = 19, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;System.Posix.Types&quot;"><span class="mpre">System.Posix.Types</span></span><span class="mpre"> (Fd(..))
import Network.Wai.Handler.Warp.Buffer

#ifdef mingw32_HOST_OS
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 23, srcSpanStartColumn = 8, srcSpanEndLine = 23, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;GHC.IO.FD&quot;"><span class="mpre">GHC.IO.FD</span></span><span class="mpre"> (FD(..), readRawBufferPtr)
import Network.Wai.Handler.Warp.Windows
#endif

</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------</span></span><span class="mpre">

</span><a href="#loc_30_1_30_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_1_30_8&#39;)"><span class="mpre">receive</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Buffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_30_1_30_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_1_30_8&#39;)"><span class="hl_fundecl"><span class="mpre">receive</span></span></a><span class="mpre"> </span><a name="loc_30_9_30_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_9_30_13&#39;)"><span class="hl_vardecl"><span class="mpre">sock</span></span></a><span class="mpre"> </span><a name="loc_30_14_30_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_14_30_17&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre"> </span><a name="loc_30_18_30_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_18_30_22&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> = do
    </span><a name="loc_31_5_31_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_5_31_10&#39;)"><span class="hl_vardecl"><span class="mpre">bytes</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_49_1_49_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_12&#39;)"><span class="hl_varref"><span class="mpre">receiveloop</span></span></a><span class="mpre"> </span><a href="#loc_40_5_40_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_10&#39;)"><span class="hl_varref"><span class="mpre">sock&#39;</span></span></a><span class="mpre"> </span><a href="#loc_41_5_41_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_5_41_9&#39;)"><span class="hl_varref"><span class="mpre">buf&#39;</span></span></a><span class="mpre"> </span><a href="#loc_42_5_42_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_5_42_10&#39;)"><span class="hl_varref"><span class="mpre">size&#39;</span></span></a><span class="mpre">
    if </span><a href="#loc_31_5_31_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_5_31_10&#39;)"><span class="hl_varref"><span class="mpre">bytes</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> then
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BS.empty</span></span><span class="mpre">
      else do
        </span><a name="loc_35_9_35_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_9_35_13&#39;)"><span class="hl_vardecl"><span class="mpre">fptr</span></span></a><span class="mpre"> &lt;- </span><a href="Data.ByteString.Internal.html#loc_489_1_489_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_489_1_489_17&#39;)"><span class="hl_varref"><span class="mpre">mallocByteString</span></span></a><span class="mpre"> </span><a href="#loc_31_5_31_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_5_31_10&#39;)"><span class="hl_varref"><span class="mpre">bytes</span></span></a><span class="mpre">
        </span><a href="Control.Monad.html#loc_195_1_195_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_195_1_195_5&#39;)"><span class="hl_varref"><span class="mpre">void</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">withForeignPtr</span></span><span class="mpre"> </span><a href="#loc_35_9_35_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_9_35_13&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_36_39_36_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_39_36_42&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> -&gt;
            </span><span class="hl_varref"><span class="mpre">c_memcpy</span></span><span class="mpre"> </span><a href="#loc_36_39_36_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_39_36_42&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><a href="#loc_30_14_30_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_14_30_17&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_31_5_31_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_5_31_10&#39;)"><span class="hl_varref"><span class="mpre">bytes</span></span></a><span class="mpre">)
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a href="#loc_35_9_35_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_9_35_13&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_31_5_31_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_5_31_10&#39;)"><span class="hl_varref"><span class="mpre">bytes</span></span></a><span class="mpre">
  where
    </span><a name="loc_40_5_40_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_10&#39;)"><span class="hl_vardecl"><span class="mpre">sock&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fdSocket</span></span><span class="mpre"> </span><a href="#loc_30_9_30_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_9_30_13&#39;)"><span class="hl_varref"><span class="mpre">sock</span></span></a><span class="mpre">
    </span><a name="loc_41_5_41_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_5_41_9&#39;)"><span class="hl_vardecl"><span class="mpre">buf&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_30_14_30_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_14_30_17&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">
    </span><a name="loc_42_5_42_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_5_42_10&#39;)"><span class="hl_vardecl"><span class="mpre">size&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_30_18_30_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_18_30_22&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">

#ifdef mingw32_HOST_OS
</span><a href="#loc_49_1_49_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_12&#39;)"><span class="mpre">receiveloop</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">CSize</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre">
#else
</span><a href="#loc_49_1_49_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_12&#39;)"><span class="mpre">receiveloop</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CChar</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">CSize</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre">
#endif
</span><a name="loc_49_1_49_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_12&#39;)"><span class="hl_fundecl"><span class="mpre">receiveloop</span></span></a><span class="mpre"> </span><a name="loc_49_13_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_13_49_17&#39;)"><span class="hl_vardecl"><span class="mpre">sock</span></span></a><span class="mpre"> </span><a name="loc_49_18_49_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_18_49_21&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre"> </span><a name="loc_49_22_49_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_22_49_26&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> = do
#ifdef mingw32_HOST_OS
    </span><span class="hl_vardecl"><span class="mpre">bytes</span></span><span class="mpre"> &lt;- </span><a href="Network.Wai.Handler.Warp.Windows.html#loc_13_1_13_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.Wai.Handler.Warp.Windows.html#loc_13_1_13_23&#39;)"><span class="hl_varref"><span class="mpre">windowsThreadBlockHack</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">readRawBufferPtr</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;recv&quot;</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">FD</span></span><span class="mpre"> </span><a href="#loc_49_13_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_13_49_17&#39;)"><span class="hl_varref"><span class="mpre">sock</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_49_18_49_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_18_49_21&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_49_22_49_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_22_49_26&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">
#else
    </span><a name="loc_53_5_53_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_5_53_10&#39;)"><span class="hl_vardecl"><span class="mpre">bytes</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">c_recv</span></span><span class="mpre"> </span><a href="#loc_49_13_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_13_49_17&#39;)"><span class="hl_varref"><span class="mpre">sock</span></span></a><span class="mpre"> </span><a href="#loc_49_18_49_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_18_49_21&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> </span><a href="#loc_49_22_49_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_22_49_26&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
#endif
    if </span><a href="#loc_53_5_53_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_5_53_10&#39;)"><span class="hl_varref"><span class="mpre">bytes</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> -</span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> then do
        </span><a name="loc_56_9_56_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_9_56_14&#39;)"><span class="hl_vardecl"><span class="mpre">errno</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.C.Error.html#loc_262_1_262_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_262_1_262_9&#39;)"><span class="hl_varref"><span class="mpre">getErrno</span></span></a><span class="mpre">
        if </span><a href="#loc_56_9_56_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_9_56_14&#39;)"><span class="hl_varref"><span class="mpre">errno</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Foreign.C.Error.html#loc_146_1_146_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_146_1_146_7&#39;)"><span class="hl_varref"><span class="mpre">eAGAIN</span></span></a><span class="mpre"> then do
            </span><span class="hl_varref"><span class="mpre">threadWaitRead</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Fd</span></span><span class="mpre"> </span><a href="#loc_49_13_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_13_49_17&#39;)"><span class="hl_varref"><span class="mpre">sock</span></span></a><span class="mpre">)
            </span><a href="#loc_49_1_49_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_12&#39;)"><span class="hl_varref"><span class="mpre">receiveloop</span></span></a><span class="mpre"> </span><a href="#loc_49_13_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_13_49_17&#39;)"><span class="hl_varref"><span class="mpre">sock</span></span></a><span class="mpre"> </span><a href="#loc_49_18_49_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_18_49_21&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> </span><a href="#loc_49_22_49_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_22_49_26&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">
          else
            </span><a href="Foreign.C.Error.html#loc_280_1_280_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_280_1_280_11&#39;)"><span class="hl_varref"><span class="mpre">throwErrno</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;receiveloop&quot;</span></span><span class="mpre">
       else
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_53_5_53_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_5_53_10&#39;)"><span class="hl_varref"><span class="mpre">bytes</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- fixme: the type of the return value</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 66, srcSpanStartColumn = 1, srcSpanEndLine = 67, srcSpanEndColumn = 60}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 66, srcSpanStartColumn = 1, srcSpanEndLine = 66, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/"><span class="mpre">foreign import ccall unsafe &quot;recv&quot;
    c_recv :: CInt -&gt; Ptr CChar -&gt; CSize -&gt; CInt -&gt; IO CInt</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 69, srcSpanStartColumn = 1, srcSpanEndLine = 70, srcSpanEndColumn = 66}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/Recv.hs&quot;, srcSpanStartLine = 69, srcSpanStartColumn = 1, srcSpanEndLine = 69, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/warp-3.0.0.3/Network/Wai/Handler/Warp/"><span class="mpre">foreign import ccall unsafe &quot;string.h memcpy&quot;
    c_memcpy :: Ptr Word8 -&gt; Ptr Word8 -&gt; CSize -&gt; IO (Ptr Word8)</span></span><span class="mpre">
</span></div></body></html>