<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE Rank2Types #-}
{-# LANGUAGE FlexibleContexts #-}
#ifdef TRUSTWORTHY
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Data.Vector.Generic.Lens</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2012-2014 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This module provides lenses and traversals for working with generic</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- vectors.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
module Data.Vector.Generic.Lens
  ( toVectorOf
  </span><span class="hl_comment"><span class="mpre">-- * Isomorphisms</span></span><span class="mpre">
  , forced
  , vector
  , asStream
  , asStreamR
  , cloned
  </span><span class="hl_comment"><span class="mpre">-- * Lenses</span></span><span class="mpre">
  , sliced
  </span><span class="hl_comment"><span class="mpre">-- * Traversal of individual indices</span></span><span class="mpre">
  , ordinals
  ) where

import Control.Applicative
import Control.Lens
import Data.List (</span><a href="Data.List.html#loc_314_1_314_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_314_1_314_4&#39;)"><span class="mpre">nub</span></a><span class="mpre">)
import Data.Monoid
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 37, srcSpanStartColumn = 8, srcSpanEndLine = 37, srcSpanEndColumn = 27}, srcInfoPoints = []}) &quot;Data.Vector.Generic&quot;"><span class="mpre">Data.Vector.Generic</span></span><span class="mpre"> as V hiding (zip, filter, indexed)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 38, srcSpanStartColumn = 8, srcSpanEndLine = 38, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.Vector.Fusion.Stream&quot;"><span class="mpre">Data.Vector.Fusion.Stream</span></span><span class="mpre"> (Stream)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 39, srcSpanStartColumn = 8, srcSpanEndLine = 39, srcSpanEndColumn = 31}, srcInfoPoints = []}) &quot;Data.Vector.Generic.New&quot;"><span class="mpre">Data.Vector.Generic.New</span></span><span class="mpre"> (New)
import Prelude hiding ((++), length, null, head, tail, init, last, map, reverse)

</span><span class="hl_comment"><span class="mpre">-- $setup</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Data.Vector as Vector</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @sliced i n@ provides a &#39;Lens&#39; that edits the @n@ elements starting</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- at index @i@ from a &#39;Lens&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is only a valid &#39;Lens&#39; if you do not change the length of the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- resulting &#39;Vector&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Attempting to return a longer or shorter vector will result in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- violations of the &#39;Lens&#39; laws.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Vector.fromList [1..10] ^. sliced 2 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- fromList [3,4,5,6,7]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Vector.fromList [1..10] &amp; sliced 2 5 . mapped .~ 0</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- fromList [1,2,0,0,0,0,0,8,9,10]</span></span><span class="mpre">
</span><a href="#loc_63_1_63_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_7&#39;)"><span class="mpre">sliced</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 59, srcSpanStartColumn = 11, srcSpanEndLine = 60, srcSpanEndColumn = 10}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 60, srcSpanStartColumn = 8, srcSpanEndLine = 60, srcSpanEndColumn = 10}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-"><span class="mpre">Vector v a
       =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ @i@ starting index</span></span><span class="mpre">
       -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ @n@ length</span></span><span class="mpre">
       -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_63_1_63_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_7&#39;)"><span class="hl_fundecl"><span class="mpre">sliced</span></span></a><span class="mpre"> </span><a name="loc_63_8_63_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_8_63_9&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> </span><a name="loc_63_10_63_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_10_63_11&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_63_12_63_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_12_63_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_63_14_63_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_14_63_15&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> = </span><a href="#loc_63_12_63_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_12_63_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">slice</span></span><span class="mpre"> </span><a href="#loc_63_8_63_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_8_63_9&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_63_10_63_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_10_63_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_63_14_63_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_14_63_15&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">) </span><a href="Control.Lens.Lens.html#loc_343_4_343_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Lens.html#loc_343_4_343_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;&amp;&gt;</span></span></a><span class="mpre"> \ </span><a name="loc_63_40_63_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_40_63_42&#39;)"><span class="hl_vardecl"><span class="mpre">v0</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_63_14_63_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_14_63_15&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">//</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpEnumFromTo (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 63, srcSpanStartColumn = 55, srcSpanEndLine = 63, srcSpanEndColumn = 65}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 63, srcSpanStartColumn = 55, srcSpanEndLine = 63, srcSpanEndColumn = 56},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;"><span class="mpre">[i..i+n-1]</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">V.toList</span></span><span class="mpre"> </span><a href="#loc_63_40_63_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_40_63_42&#39;)"><span class="hl_varref"><span class="mpre">v0</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_63_1_63_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_7&#39;)"><span class="mpre">sliced</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Similar to &#39;toListOf&#39;, but returning a &#39;Vector&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; toVectorOf both (8,15) :: Vector.Vector Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- fromList [8,15]</span></span><span class="mpre">
</span><a href="#loc_71_1_71_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_11&#39;)"><span class="mpre">toVectorOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 15, srcSpanEndLine = 70, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 26, srcSpanEndLine = 70, srcSpanEndColumn = 28}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Vector v a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Getting</span></span><span class="mpre"> (</span><a href="Data.Monoid.html#loc_162_9_162_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_162_9_162_13&#39;)"><span class="hl_tyconref"><span class="mpre">Endo</span></span></a><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_71_1_71_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_11&#39;)"><span class="hl_fundecl"><span class="mpre">toVectorOf</span></span></a><span class="mpre"> </span><a name="loc_71_12_71_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_12_71_13&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_71_14_71_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_14_71_15&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromList</span></span><span class="mpre"> (</span><a href="Control.Lens.Fold.html#loc_543_1_543_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Fold.html#loc_543_1_543_9&#39;)"><span class="hl_varref"><span class="mpre">toListOf</span></span></a><span class="mpre"> </span><a href="#loc_71_12_71_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_12_71_13&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_71_14_71_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_14_71_15&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_71_1_71_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_11&#39;)"><span class="mpre">toVectorOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a list to a &#39;Vector&#39; (or back.)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [1,2,3] ^. vector :: Vector.Vector Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- fromList [1,2,3]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Vector.fromList [0,8,15] ^. from vector</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [0,8,15]</span></span><span class="mpre">
</span><a href="#loc_82_1_82_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_7&#39;)"><span class="mpre">vector</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 81, srcSpanStartColumn = 11, srcSpanEndLine = 81, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 81, srcSpanStartColumn = 22, srcSpanEndLine = 81, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Vector v a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Iso&#39;</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_82_1_82_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_7&#39;)"><span class="hl_vardecl"><span class="mpre">vector</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Iso.html#loc_122_1_122_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Iso.html#loc_122_1_122_4&#39;)"><span class="hl_varref"><span class="mpre">iso</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromList</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">V.toList</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_82_1_82_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_7&#39;)"><span class="mpre">vector</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a &#39;Vector&#39; to a finite &#39;Stream&#39; (or back.)</span></span><span class="mpre">
</span><a href="#loc_87_1_87_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_1_87_9&#39;)"><span class="mpre">asStream</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 86, srcSpanStartColumn = 13, srcSpanEndLine = 86, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 86, srcSpanStartColumn = 24, srcSpanEndLine = 86, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Vector v a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Iso&#39;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Stream</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_87_1_87_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_1_87_9&#39;)"><span class="hl_vardecl"><span class="mpre">asStream</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Iso.html#loc_122_1_122_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Iso.html#loc_122_1_122_4&#39;)"><span class="hl_varref"><span class="mpre">iso</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">stream</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">unstream</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_87_1_87_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_1_87_9&#39;)"><span class="mpre">asStream</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a &#39;Vector&#39; to a finite &#39;Stream&#39; from right to left (or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- back.)</span></span><span class="mpre">
</span><a href="#loc_93_1_93_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_1_93_10&#39;)"><span class="mpre">asStreamR</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 92, srcSpanStartColumn = 14, srcSpanEndLine = 92, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 92, srcSpanStartColumn = 25, srcSpanEndLine = 92, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Vector v a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Iso&#39;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Stream</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_93_1_93_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_1_93_10&#39;)"><span class="hl_vardecl"><span class="mpre">asStreamR</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Iso.html#loc_122_1_122_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Iso.html#loc_122_1_122_4&#39;)"><span class="hl_varref"><span class="mpre">iso</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">streamR</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">unstreamR</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_93_1_93_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_1_93_10&#39;)"><span class="mpre">asStreamR</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a &#39;Vector&#39; back and forth to an initializer that when run</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- produces a copy of the &#39;Vector&#39;.</span></span><span class="mpre">
</span><a href="#loc_99_1_99_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_7&#39;)"><span class="mpre">cloned</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 98, srcSpanStartColumn = 11, srcSpanEndLine = 98, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 98, srcSpanStartColumn = 22, srcSpanEndLine = 98, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Vector v a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Iso&#39;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">New</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_99_1_99_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_7&#39;)"><span class="hl_vardecl"><span class="mpre">cloned</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Iso.html#loc_122_1_122_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Iso.html#loc_122_1_122_4&#39;)"><span class="hl_varref"><span class="mpre">iso</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">clone</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">new</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_99_1_99_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_7&#39;)"><span class="mpre">cloned</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a &#39;Vector&#39; to a version that doesn&#39;t retain any extra</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- memory.</span></span><span class="mpre">
</span><a href="#loc_105_1_105_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_7&#39;)"><span class="mpre">forced</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 104, srcSpanStartColumn = 11, srcSpanEndLine = 104, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 104, srcSpanStartColumn = 22, srcSpanEndLine = 104, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Vector v a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Iso&#39;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_105_1_105_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_7&#39;)"><span class="hl_vardecl"><span class="mpre">forced</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Iso.html#loc_423_1_423_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Iso.html#loc_423_1_423_10&#39;)"><span class="hl_varref"><span class="mpre">involuted</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">force</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_105_1_105_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_7&#39;)"><span class="mpre">forced</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This &#39;Traversal&#39; will ignore any duplicates in the supplied list</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of indices.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; toListOf (ordinals [1,3,2,5,9,10]) $ Vector.fromList [2,4..40]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [4,8,6,12,20,22]</span></span><span class="mpre">
</span><a href="#loc_114_1_114_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_1_114_9&#39;)"><span class="mpre">ordinals</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 113, srcSpanStartColumn = 13, srcSpanEndLine = 113, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Data/Vector/Generic/Lens.hs&quot;, srcSpanStartLine = 113, srcSpanStartColumn = 24, srcSpanEndLine = 113, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Vector v a =&gt;</span></span><span class="mpre"> [</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_114_1_114_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_1_114_9&#39;)"><span class="hl_fundecl"><span class="mpre">ordinals</span></span></a><span class="mpre"> </span><a name="loc_114_10_114_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_10_114_12&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre"> </span><a name="loc_114_13_114_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_13_114_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_114_15_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_15_114_16&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="#loc_114_15_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_15_114_16&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">//</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre"> (\</span><a name="loc_114_44_114_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_44_114_45&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">(,)</span></span><span class="mpre"> </span><a href="#loc_114_44_114_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_44_114_45&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">indexed</span></span><span class="mpre"> </span><a href="#loc_114_13_114_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_13_114_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_114_44_114_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_44_114_45&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> (</span><a href="#loc_114_15_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_15_114_16&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">!</span></span><span class="mpre"> </span><a href="#loc_114_44_114_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_44_114_45&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.List.html#loc_314_1_314_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_314_1_314_4&#39;)"><span class="hl_varref"><span class="mpre">nub</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> (\</span><a name="loc_114_97_114_98" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_97_114_98&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><a href="#loc_114_97_114_98" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_97_114_98&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_114_97_114_98" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_97_114_98&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_115_3_115_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_3_115_4&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">) </span><a href="#loc_114_10_114_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_10_114_12&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> where
  </span><a name="loc_115_3_115_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_3_115_4&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">length</span></span><span class="mpre"> </span><a href="#loc_114_15_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_15_114_16&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_114_1_114_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_1_114_9&#39;)"><span class="mpre">ordinals</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>