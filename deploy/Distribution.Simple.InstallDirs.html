<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP, ForeignFunctionInterface #-}
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Distribution.Simple.InstallDirs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  Isaac Jones 2003-2004</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  cabal-devel@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This manages everything to do with where files get installed (though does</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- not get involved with actually doing any installation). It provides an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;InstallDirs&#39; type which is a set of directories for where to install</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- things. It also handles the fact that we use templates in these install</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- dirs. For example most install dirs are relative to some @$prefix@ and by</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- changing the prefix all other dirs still end up changed appropriately. So it</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- provides a &#39;PathTemplate&#39; type and functions for substituting for these</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- templates.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.

    * Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the following
      disclaimer in the documentation and/or other materials provided
      with the distribution.

    * Neither the name of Isaac Jones nor the names of other
      contributors may be used to endorse or promote products derived
      from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. -}</span></span><span class="mpre">

module Distribution.Simple.InstallDirs (
        InstallDirs(..),
        InstallDirTemplates,
        defaultInstallDirs,
        combineInstallDirs,
        absoluteInstallDirs,
        CopyDest(..),
        prefixRelativeInstallDirs,
        substituteInstallDirTemplates,

        PathTemplate,
        PathTemplateVariable(..),
        PathTemplateEnv,
        toPathTemplate,
        fromPathTemplate,
        substPathTemplate,
        initialPathTemplateEnv,
        platformTemplateEnv,
        compilerTemplateEnv,
        packageTemplateEnv,
        installDirsTemplateEnv,
  ) where


import Data.List (</span><a href="Data.List.html#loc_286_1_286_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_286_1_286_11&#39;)"><span class="mpre">isPrefixOf</span></a><span class="mpre">)
import Data.Maybe (</span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="mpre">fromMaybe</span></a><span class="mpre">)
import Data.Monoid (</span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="mpre">Monoid</span></a><span class="mpre">(..))
import System.Directory (</span><a href="System.Directory.html#loc_848_1_848_24" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_848_1_848_24&#39;)"><span class="mpre">getAppUserDataDirectory</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 8, srcSpanEndLine = 77, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;System.FilePath&quot;"><span class="mpre">System.FilePath</span></span><span class="mpre"> ((&lt;/&gt;), isPathSeparator, pathSeparator)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 78, srcSpanStartColumn = 8, srcSpanEndLine = 78, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;System.FilePath&quot;"><span class="mpre">System.FilePath</span></span><span class="mpre"> (dropDrive)

import Distribution.Package
         ( </span><a href="Distribution.Package.html#loc_102_6_102_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_102_6_102_23&#39;)"><span class="mpre">PackageIdentifier</span></a><span class="mpre">, </span><a href="Distribution.Package.html#loc_187_1_187_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_187_1_187_12&#39;)"><span class="mpre">packageName</span></a><span class="mpre">, </span><a href="Distribution.Package.html#loc_190_1_190_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_190_1_190_15&#39;)"><span class="mpre">packageVersion</span></a><span class="mpre"> )
import Distribution.System
         ( </span><a href="Distribution.System.html#loc_66_6_66_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_6_66_8&#39;)"><span class="mpre">OS</span></a><span class="mpre">(..), </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="mpre">buildOS</span></a><span class="mpre">, </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="mpre">Platform</span></a><span class="mpre">(..) )
import Distribution.Compiler
         ( </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><a href="Distribution.Compiler.html#loc_154_19_154_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_19_154_29&#39;)"><span class="mpre">CompilerId</span></a></a><span class="mpre">, </span><a href="Distribution.Compiler.html#loc_81_6_81_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_6_81_20&#39;)"><span class="mpre">CompilerFlavor</span></a><span class="mpre">(..) )
import Distribution.Text
         ( </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="mpre">display</span></a><span class="mpre"> )

#if mingw32_HOST_OS
import Foreign
import Foreign.C
#endif

</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Instalation directories</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | The directories where we will install files for packages.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- We have several different directories for different types of files since</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- many systems have conventions whereby different types of files in a package</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- are installed in different direcotries. This is particularly the case on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- unix style systems.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
data </span><a name="loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tycondecl"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre"> = </span><span class="hl_condecl"><span class="mpre">InstallDirs</span></span><span class="mpre"> {
        </span><a name="loc_106_9_106_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_9_106_15&#39;)"><span class="hl_fielddecl"><span class="mpre">prefix</span></span></a><span class="mpre">       :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_107_9_107_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_9_107_15&#39;)"><span class="hl_fielddecl"><span class="mpre">bindir</span></span></a><span class="mpre">       :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_108_9_108_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_9_108_15&#39;)"><span class="hl_fielddecl"><span class="mpre">libdir</span></span></a><span class="mpre">       :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_109_9_109_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_9_109_18&#39;)"><span class="hl_fielddecl"><span class="mpre">libsubdir</span></span></a><span class="mpre">    :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_110_9_110_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_9_110_18&#39;)"><span class="hl_fielddecl"><span class="mpre">dynlibdir</span></span></a><span class="mpre">    :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_111_9_111_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_9_111_19&#39;)"><span class="hl_fielddecl"><span class="mpre">libexecdir</span></span></a><span class="mpre">   :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_112_9_112_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_16&#39;)"><span class="hl_fielddecl"><span class="mpre">progdir</span></span></a><span class="mpre">      :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_113_9_113_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_9_113_19&#39;)"><span class="hl_fielddecl"><span class="mpre">includedir</span></span></a><span class="mpre">   :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_114_9_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_9_114_16&#39;)"><span class="hl_fielddecl"><span class="mpre">datadir</span></span></a><span class="mpre">      :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_115_9_115_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_9_115_19&#39;)"><span class="hl_fielddecl"><span class="mpre">datasubdir</span></span></a><span class="mpre">   :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_116_9_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_9_116_15&#39;)"><span class="hl_fielddecl"><span class="mpre">docdir</span></span></a><span class="mpre">       :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_117_9_117_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_9_117_15&#39;)"><span class="hl_fielddecl"><span class="mpre">mandir</span></span></a><span class="mpre">       :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_118_9_118_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_9_118_16&#39;)"><span class="hl_fielddecl"><span class="mpre">htmldir</span></span></a><span class="mpre">      :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_119_9_119_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_9_119_19&#39;)"><span class="hl_fielddecl"><span class="mpre">haddockdir</span></span></a><span class="mpre">   :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">,
        </span><a name="loc_120_9_120_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_9_120_19&#39;)"><span class="hl_fielddecl"><span class="mpre">sysconfdir</span></span></a><span class="mpre">   :: </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">
    } </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 121, srcSpanStartColumn = 7, srcSpanEndLine = 121, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 121, srcSpanStartColumn = 7, srcSpanEndLine = 121, srcSpanEndColumn = 15},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribu"><span class="mpre">deriving (Read, Show)</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> where
  </span><span class="hl_fundecl"><span class="mpre">fmap</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">dirs</span></span><span class="mpre"> = </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 124, srcSpanStartColumn = 17, srcSpanEndLine = 140, srcSpanEndColumn = 4}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 124, srcSpanStartColumn = 29, srcSpanEndLine = 124, srcSpanEndColumn = 30},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distri"><span class="mpre">InstallDirs {
    prefix       = f (prefix dirs),
    bindir       = f (bindir dirs),
    libdir       = f (libdir dirs),
    libsubdir    = f (libsubdir dirs),
    dynlibdir    = f (dynlibdir dirs),
    libexecdir   = f (libexecdir dirs),
    progdir      = f (progdir dirs),
    includedir   = f (includedir dirs),
    datadir      = f (datadir dirs),
    datasubdir   = f (datasubdir dirs),
    docdir       = f (docdir dirs),
    mandir       = f (mandir dirs),
    htmldir      = f (htmldir dirs),
    haddockdir   = f (haddockdir dirs),
    sysconfdir   = f (sysconfdir dirs)
  }</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 142, srcSpanStartColumn = 10, srcSpanEndLine = 142, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 142, srcSpanStartColumn = 21, srcSpanEndLine = 142, srcSpanEndColumn = 23}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/va"><span class="mpre">Monoid dir =&gt;</span></span><span class="mpre"> </span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="hl_classref"><span class="mpre">Monoid</span></span></a><span class="mpre"> (</span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">dir</span></span><span class="mpre">) where
  </span><a href="Data.Monoid.html#loc_80_9_80_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_80_9_80_15&#39;)"><span class="hl_vardecl"><span class="mpre">mempty</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 143, srcSpanStartColumn = 12, srcSpanEndLine = 159, srcSpanEndColumn = 4}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 143, srcSpanStartColumn = 24, srcSpanEndLine = 143, srcSpanEndColumn = 25},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distri"><span class="mpre">InstallDirs {
      prefix       = mempty,
      bindir       = mempty,
      libdir       = mempty,
      libsubdir    = mempty,
      dynlibdir    = mempty,
      libexecdir   = mempty,
      progdir      = mempty,
      includedir   = mempty,
      datadir      = mempty,
      datasubdir   = mempty,
      docdir       = mempty,
      mandir       = mempty,
      htmldir      = mempty,
      haddockdir   = mempty,
      sysconfdir   = mempty
  }</span></span><span class="mpre">
  </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_vardecl"><span class="mpre">mappend</span></span></a><span class="mpre"> = </span><a href="#loc_166_1_166_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_19&#39;)"><span class="hl_varref"><span class="mpre">combineInstallDirs</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_varref"><span class="mpre">mappend</span></span></a><span class="mpre">

</span><a href="#loc_166_1_166_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_19&#39;)"><span class="mpre">combineInstallDirs</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">)
                   -&gt; </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
                   -&gt; </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
                   -&gt; </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
</span><a name="loc_166_1_166_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_19&#39;)"><span class="hl_fundecl"><span class="mpre">combineInstallDirs</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">combine</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">b</span></span><span class="mpre"> = </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 166, srcSpanStartColumn = 34, srcSpanEndLine = 182, srcSpanEndColumn = 4}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 166, srcSpanStartColumn = 46, srcSpanEndLine = 166, srcSpanEndColumn = 47},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distri"><span class="mpre">InstallDirs {
    prefix       = prefix a     `combine` prefix b,
    bindir       = bindir a     `combine` bindir b,
    libdir       = libdir a     `combine` libdir b,
    libsubdir    = libsubdir a  `combine` libsubdir b,
    dynlibdir    = dynlibdir a  `combine` dynlibdir b,
    libexecdir   = libexecdir a `combine` libexecdir b,
    progdir      = progdir a    `combine` progdir b,
    includedir   = includedir a `combine` includedir b,
    datadir      = datadir a    `combine` datadir b,
    datasubdir   = datasubdir a `combine` datasubdir b,
    docdir       = docdir a     `combine` docdir b,
    mandir       = mandir a     `combine` mandir b,
    htmldir      = htmldir a    `combine` htmldir b,
    haddockdir   = haddockdir a `combine` haddockdir b,
    sysconfdir   = sysconfdir a `combine` sysconfdir b
  }</span></span><span class="mpre">

</span><a href="#loc_185_1_185_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_14&#39;)"><span class="mpre">appendSubdirs</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_185_1_185_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_14&#39;)"><span class="hl_fundecl"><span class="mpre">appendSubdirs</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">append</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">dirs</span></span><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 185, srcSpanStartColumn = 29, srcSpanEndLine = 190, srcSpanEndColumn = 4}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 185, srcSpanStartColumn = 34, srcSpanEndLine = 185, srcSpanEndColumn = 35},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distri"><span class="mpre">dirs {
    libdir     = libdir dirs `append` libsubdir dirs,
    datadir    = datadir dirs `append` datasubdir dirs,
    libsubdir  = error &quot;internal error InstallDirs.libsubdir&quot;,
    datasubdir = error &quot;internal error InstallDirs.datasubdir&quot;
  }</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The installation directories in terms of &#39;PathTemplate&#39;s that contain</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- variables.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The defaults for most of the directories are relative to each other, in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- particular they are all relative to a single prefix. This makes it</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- convenient for the user to override the default installation directory</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- by only having to specify --prefix=... rather than overriding each</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- individually. This is done by allowing $-style variables in the dirs.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- These are expanded by textual substituion (see &#39;substPathTemplate&#39;).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A few of these installation directories are split into two components, the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- dir and subdir. The full installation path is formed by combining the two</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- together with @\/@. The reason for this is compatibility with other unix</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- build systems which also support @--libdir@ and @--datadir@. We would like</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- users to be able to configure @--libdir=\/usr\/lib64@ for example but</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- because by default we want to support installing multiple versions of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- packages and building the same package for multiple compilers we append the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- libsubdir to get: @\/usr\/lib64\/$pkgid\/$compiler@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- An additional complication is the need to support relocatable packages on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- systems which support such things, like Windows.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 214, srcSpanStartColumn = 1, srcSpanEndLine = 214, srcSpanEndColumn = 52}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 214, srcSpanStartColumn = 1, srcSpanEndLine = 214, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribut"><span class="mpre">type InstallDirTemplates = InstallDirs PathTemplate</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Default installation directories</span></span><span class="mpre">

</span><a href="#loc_220_1_220_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_1_220_19&#39;)"><span class="mpre">defaultInstallDirs</span></a><span class="mpre"> :: </span><a href="Distribution.Compiler.html#loc_81_6_81_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_6_81_20&#39;)"><span class="hl_tyconref"><span class="mpre">CompilerFlavor</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">InstallDirTemplates</span></span><span class="mpre">
</span><a name="loc_220_1_220_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_1_220_19&#39;)"><span class="hl_fundecl"><span class="mpre">defaultInstallDirs</span></span></a><span class="mpre"> </span><a name="loc_220_20_220_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_20_220_24&#39;)"><span class="hl_vardecl"><span class="mpre">comp</span></span></a><span class="mpre"> </span><a name="loc_220_25_220_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_25_220_36&#39;)"><span class="hl_vardecl"><span class="mpre">userInstall</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_hasLibs</span></span><span class="mpre"> = do
  </span><span class="hl_vardecl"><span class="mpre">installPrefix</span></span><span class="mpre"> &lt;-
      if </span><a href="#loc_220_25_220_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_25_220_36&#39;)"><span class="hl_varref"><span class="mpre">userInstall</span></span></a><span class="mpre">
      then </span><a href="System.Directory.html#loc_848_1_848_24" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_848_1_848_24&#39;)"><span class="hl_varref"><span class="mpre">getAppUserDataDirectory</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;cabal&quot;</span></span><span class="mpre">
      else case </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> of
           </span><a href="Distribution.System.html#loc_66_19_66_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_19_66_26&#39;)"><span class="hl_conref"><span class="mpre">Windows</span></span></a><span class="mpre"> -&gt; do </span><a name="loc_225_26_225_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_26_225_48&#39;)"><span class="hl_vardecl"><span class="mpre">windowsProgramFilesDir</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_556_1_556_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_556_1_556_26&#39;)"><span class="hl_varref"><span class="mpre">getWindowsProgramFilesDir</span></span></a><span class="mpre">
                         </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_225_26_225_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_26_225_48&#39;)"><span class="hl_varref"><span class="mpre">windowsProgramFilesDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Haskell&quot;</span></span><span class="mpre">)
           _       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;/usr/local&quot;</span></span><span class="mpre">
  </span><span class="hl_vardecl"><span class="mpre">installLibDir</span></span><span class="mpre"> &lt;-
      case </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> of
      </span><a href="Distribution.System.html#loc_66_19_66_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_19_66_26&#39;)"><span class="hl_conref"><span class="mpre">Windows</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;$prefix&quot;</span></span><span class="mpre">
      _       -&gt; case </span><a href="#loc_220_20_220_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_20_220_24&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre"> of
                 </span><a href="Distribution.Compiler.html#loc_81_69_81_72" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_69_81_72&#39;)"><span class="hl_conref"><span class="mpre">LHC</span></span></a><span class="mpre"> | </span><a href="#loc_220_25_220_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_25_220_36&#39;)"><span class="hl_varref"><span class="mpre">userInstall</span></span></a><span class="mpre"> -&gt; </span><a href="System.Directory.html#loc_848_1_848_24" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_848_1_848_24&#39;)"><span class="hl_varref"><span class="mpre">getAppUserDataDirectory</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;lhc&quot;</span></span><span class="mpre">
                 _                 -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;$prefix&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;lib&quot;</span></span><span class="mpre">)
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_405_1_405_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_1_405_15&#39;)"><span class="hl_varref"><span class="mpre">toPathTemplate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 234, srcSpanStartColumn = 34, srcSpanEndLine = 259, srcSpanEndColumn = 4}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 234, srcSpanStartColumn = 46, srcSpanEndLine = 234, srcSpanEndColumn = 47},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distri"><span class="mpre">InstallDirs {
      prefix       = installPrefix,
      bindir       = &quot;$prefix&quot; &lt;/&gt; &quot;bin&quot;,
      libdir       = installLibDir,
      libsubdir    = case comp of
           Hugs   -&gt; &quot;hugs&quot; &lt;/&gt; &quot;packages&quot; &lt;/&gt; &quot;$pkg&quot;
           JHC    -&gt; &quot;$compiler&quot;
           LHC    -&gt; &quot;$compiler&quot;
           UHC    -&gt; &quot;$pkgid&quot;
           _other -&gt; &quot;$arch-$os-$compiler&quot; &lt;/&gt; &quot;$pkgid&quot;,
      dynlibdir    = &quot;$libdir&quot;,
      libexecdir   = case buildOS of
        Windows   -&gt; &quot;$prefix&quot; &lt;/&gt; &quot;$pkgid&quot;
        _other    -&gt; &quot;$prefix&quot; &lt;/&gt; &quot;libexec&quot;,
      progdir      = &quot;$libdir&quot; &lt;/&gt; &quot;hugs&quot; &lt;/&gt; &quot;programs&quot;,
      includedir   = &quot;$libdir&quot; &lt;/&gt; &quot;$libsubdir&quot; &lt;/&gt; &quot;include&quot;,
      datadir      = case buildOS of
        Windows   -&gt; &quot;$prefix&quot;
        _other    -&gt; &quot;$prefix&quot; &lt;/&gt; &quot;share&quot;,
      datasubdir   = &quot;$arch-$os-$compiler&quot; &lt;/&gt; &quot;$pkgid&quot;,
      docdir       = &quot;$datadir&quot; &lt;/&gt; &quot;doc&quot; &lt;/&gt; &quot;$arch-$os-$compiler&quot; &lt;/&gt; &quot;$pkgid&quot;,
      mandir       = &quot;$datadir&quot; &lt;/&gt; &quot;man&quot;,
      htmldir      = &quot;$docdir&quot;  &lt;/&gt; &quot;html&quot;,
      haddockdir   = &quot;$htmldir&quot;,
      sysconfdir   = &quot;$prefix&quot; &lt;/&gt; &quot;etc&quot;
  }</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Converting directories, absolute or prefix-relative</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Substitute the install dir templates into each other.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- To prevent cyclic substitutions, only some variables are allowed in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- particular dir templates. If out of scope vars are present, they are not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- substituted for. Checking for any remaining unsubstituted vars can be done</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as a subsequent operation.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The reason it is done this way is so that in &#39;prefixRelativeInstallDirs&#39; we</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- can replace &#39;prefix&#39; with the &#39;PrefixVar&#39; and get resulting</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;PathTemplate&#39;s that still have the &#39;PrefixVar&#39; in them. Doing this makes it</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- each to check which paths are relative to the $prefix.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_278_1_278_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_1_278_30&#39;)"><span class="mpre">substituteInstallDirTemplates</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">PathTemplateEnv</span></span><span class="mpre">
                              -&gt; </span><span class="hl_tyconref"><span class="mpre">InstallDirTemplates</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">InstallDirTemplates</span></span><span class="mpre">
</span><a name="loc_278_1_278_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_1_278_30&#39;)"><span class="hl_fundecl"><span class="mpre">substituteInstallDirTemplates</span></span></a><span class="mpre"> </span><a name="loc_278_31_278_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_31_278_34&#39;)"><span class="hl_vardecl"><span class="mpre">env</span></span></a><span class="mpre"> </span><a name="loc_278_35_278_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_35_278_39&#39;)"><span class="hl_vardecl"><span class="mpre">dirs</span></span></a><span class="mpre"> = </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">
  where
    </span><a name="loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_vardecl"><span class="mpre">dirs&#39;</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 280, srcSpanStartColumn = 13, srcSpanEndLine = 298, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 280, srcSpanStartColumn = 25, srcSpanEndLine = 280, srcSpanEndColumn = 26},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distri"><span class="mpre">InstallDirs {
      </span><span class="hl_comment"><span class="mpre">-- So this specifies exactly which vars are allowed in each template</span></span><span class="mpre">
      prefix     = subst prefix     [],
      bindir     = subst bindir     [prefixVar],
      libdir     = subst libdir     [prefixVar, bindirVar],
      libsubdir  = subst libsubdir  [],
      dynlibdir  = subst dynlibdir  [prefixVar, bindirVar, libdirVar],
      libexecdir = subst libexecdir prefixBinLibVars,
      progdir    = subst progdir    prefixBinLibVars,
      includedir = subst includedir prefixBinLibVars,
      datadir    = subst datadir    prefixBinLibVars,
      datasubdir = subst datasubdir [],
      docdir     = subst docdir     prefixBinLibDataVars,
      mandir     = subst mandir     (prefixBinLibDataVars ++ [docdirVar]),
      htmldir    = subst htmldir    (prefixBinLibDataVars ++ [docdirVar]),
      haddockdir = subst haddockdir (prefixBinLibDataVars ++
                                      [docdirVar, htmldirVar]),
      sysconfdir = subst sysconfdir prefixBinLibVars
    }</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">subst</span></span><span class="mpre"> </span><a name="loc_299_11_299_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_11_299_14&#39;)"><span class="hl_vardecl"><span class="mpre">dir</span></span></a><span class="mpre"> </span><a name="loc_299_15_299_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_15_299_19&#39;)"><span class="hl_vardecl"><span class="mpre">env&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_417_1_417_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_18&#39;)"><span class="hl_varref"><span class="mpre">substPathTemplate</span></span></a><span class="mpre"> (</span><a href="#loc_299_15_299_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_15_299_19&#39;)"><span class="hl_varref"><span class="mpre">env&#39;</span></span></a><span class="hl_infix"><span class="mpre">++</span></span><a href="#loc_278_31_278_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_31_278_34&#39;)"><span class="hl_varref"><span class="mpre">env</span></span></a><span class="mpre">) (</span><a href="#loc_299_11_299_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_11_299_14&#39;)"><span class="hl_varref"><span class="mpre">dir</span></span></a><span class="mpre"> </span><a href="#loc_278_35_278_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_35_278_39&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)

    </span><a name="loc_301_5_301_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_5_301_14&#39;)"><span class="hl_vardecl"><span class="mpre">prefixVar</span></span></a><span class="mpre">        = (</span><a href="#loc_379_8_379_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_8_379_17&#39;)"><span class="hl_conref"><span class="mpre">PrefixVar</span></span></a><span class="mpre">,     </span><a href="#loc_106_9_106_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_9_106_15&#39;)"><span class="hl_varref"><span class="mpre">prefix</span></span></a><span class="mpre">     </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">)
    </span><a name="loc_302_5_302_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_302_5_302_14&#39;)"><span class="hl_vardecl"><span class="mpre">bindirVar</span></span></a><span class="mpre">        = (</span><a href="#loc_380_8_380_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_8_380_17&#39;)"><span class="hl_conref"><span class="mpre">BindirVar</span></span></a><span class="mpre">,     </span><a href="#loc_107_9_107_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_9_107_15&#39;)"><span class="hl_varref"><span class="mpre">bindir</span></span></a><span class="mpre">     </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">)
    </span><a name="loc_303_5_303_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_5_303_14&#39;)"><span class="hl_vardecl"><span class="mpre">libdirVar</span></span></a><span class="mpre">        = (</span><a href="#loc_381_8_381_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_8_381_17&#39;)"><span class="hl_conref"><span class="mpre">LibdirVar</span></span></a><span class="mpre">,     </span><a href="#loc_108_9_108_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_9_108_15&#39;)"><span class="hl_varref"><span class="mpre">libdir</span></span></a><span class="mpre">     </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">)
    </span><a name="loc_304_5_304_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_5_304_17&#39;)"><span class="hl_vardecl"><span class="mpre">libsubdirVar</span></span></a><span class="mpre">     = (</span><a href="#loc_382_8_382_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_8_382_20&#39;)"><span class="hl_conref"><span class="mpre">LibsubdirVar</span></span></a><span class="mpre">,  </span><a href="#loc_109_9_109_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_9_109_18&#39;)"><span class="hl_varref"><span class="mpre">libsubdir</span></span></a><span class="mpre">  </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">)
    </span><a name="loc_305_5_305_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_305_5_305_15&#39;)"><span class="hl_vardecl"><span class="mpre">datadirVar</span></span></a><span class="mpre">       = (</span><a href="#loc_383_8_383_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_8_383_18&#39;)"><span class="hl_conref"><span class="mpre">DatadirVar</span></span></a><span class="mpre">,    </span><a href="#loc_114_9_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_9_114_16&#39;)"><span class="hl_varref"><span class="mpre">datadir</span></span></a><span class="mpre">    </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">)
    </span><a name="loc_306_5_306_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_306_5_306_18&#39;)"><span class="hl_vardecl"><span class="mpre">datasubdirVar</span></span></a><span class="mpre">    = (</span><a href="#loc_384_8_384_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_384_8_384_21&#39;)"><span class="hl_conref"><span class="mpre">DatasubdirVar</span></span></a><span class="mpre">, </span><a href="#loc_115_9_115_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_9_115_19&#39;)"><span class="hl_varref"><span class="mpre">datasubdir</span></span></a><span class="mpre"> </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">)
    </span><span class="hl_vardecl"><span class="mpre">docdirVar</span></span><span class="mpre">        = (</span><a href="#loc_385_8_385_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_385_8_385_17&#39;)"><span class="hl_conref"><span class="mpre">DocdirVar</span></span></a><span class="mpre">,     </span><a href="#loc_116_9_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_9_116_15&#39;)"><span class="hl_varref"><span class="mpre">docdir</span></span></a><span class="mpre">     </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">)
    </span><span class="hl_vardecl"><span class="mpre">htmldirVar</span></span><span class="mpre">       = (</span><a href="#loc_386_8_386_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_18&#39;)"><span class="hl_conref"><span class="mpre">HtmldirVar</span></span></a><span class="mpre">,    </span><a href="#loc_118_9_118_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_9_118_16&#39;)"><span class="hl_varref"><span class="mpre">htmldir</span></span></a><span class="mpre">    </span><a href="#loc_280_5_280_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_10&#39;)"><span class="hl_varref"><span class="mpre">dirs&#39;</span></span></a><span class="mpre">)
    </span><a name="loc_309_5_309_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_5_309_21&#39;)"><span class="hl_vardecl"><span class="mpre">prefixBinLibVars</span></span></a><span class="mpre"> = [</span><a href="#loc_301_5_301_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_5_301_14&#39;)"><span class="hl_varref"><span class="mpre">prefixVar</span></span></a><span class="mpre">, </span><a href="#loc_302_5_302_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_302_5_302_14&#39;)"><span class="hl_varref"><span class="mpre">bindirVar</span></span></a><span class="mpre">, </span><a href="#loc_303_5_303_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_5_303_14&#39;)"><span class="hl_varref"><span class="mpre">libdirVar</span></span></a><span class="mpre">, </span><a href="#loc_304_5_304_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_5_304_17&#39;)"><span class="hl_varref"><span class="mpre">libsubdirVar</span></span></a><span class="mpre">]
    </span><span class="hl_vardecl"><span class="mpre">prefixBinLibDataVars</span></span><span class="mpre"> = </span><a href="#loc_309_5_309_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_5_309_21&#39;)"><span class="hl_varref"><span class="mpre">prefixBinLibVars</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [</span><a href="#loc_305_5_305_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_305_5_305_15&#39;)"><span class="hl_varref"><span class="mpre">datadirVar</span></span></a><span class="mpre">, </span><a href="#loc_306_5_306_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_306_5_306_18&#39;)"><span class="hl_varref"><span class="mpre">datasubdirVar</span></span></a><span class="mpre">]

</span><span class="hl_comment"><span class="mpre">-- | Convert from abstract install directories to actual absolute ones by</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- substituting for all the variables in the abstract paths, to get real</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- absolute path.</span></span><span class="mpre">
</span><a href="#loc_318_1_318_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_1_318_20&#39;)"><span class="mpre">absoluteInstallDirs</span></a><span class="mpre"> :: </span><a href="Distribution.Package.html#loc_102_6_102_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_102_6_102_23&#39;)"><span class="hl_tyconref"><span class="mpre">PackageIdentifier</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="hl_tyconref"><span class="mpre">CompilerId</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_330_6_330_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_6_330_14&#39;)"><span class="hl_tyconref"><span class="mpre">CopyDest</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="hl_tyconref"><span class="mpre">Platform</span></span></a><span class="mpre">
                    -&gt; </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre">
                    -&gt; </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
</span><a name="loc_318_1_318_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_1_318_20&#39;)"><span class="hl_fundecl"><span class="mpre">absoluteInstallDirs</span></span></a><span class="mpre"> </span><a name="loc_318_21_318_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_21_318_26&#39;)"><span class="hl_vardecl"><span class="mpre">pkgId</span></span></a><span class="mpre"> </span><a name="loc_318_27_318_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_27_318_37&#39;)"><span class="hl_vardecl"><span class="mpre">compilerId</span></span></a><span class="mpre"> </span><a name="loc_318_38_318_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_38_318_46&#39;)"><span class="hl_vardecl"><span class="mpre">copydest</span></span></a><span class="mpre"> </span><a name="loc_318_47_318_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_47_318_55&#39;)"><span class="hl_vardecl"><span class="mpre">platform</span></span></a><span class="mpre"> </span><a name="loc_318_56_318_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_56_318_60&#39;)"><span class="hl_vardecl"><span class="mpre">dirs</span></span></a><span class="mpre"> =
    (case </span><a href="#loc_318_38_318_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_38_318_46&#39;)"><span class="hl_varref"><span class="mpre">copydest</span></span></a><span class="mpre"> of
       </span><a href="#loc_332_5_332_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_5_332_11&#39;)"><span class="hl_conref"><span class="mpre">CopyTo</span></span></a><span class="mpre"> </span><a name="loc_320_15_320_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_320_15_320_22&#39;)"><span class="hl_vardecl"><span class="mpre">destdir</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> ((</span><a href="#loc_320_15_320_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_320_15_320_22&#39;)"><span class="hl_varref"><span class="mpre">destdir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">dropDrive</span></span><span class="mpre">)
       _              -&gt; </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">)
  </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_185_1_185_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_14&#39;)"><span class="hl_varref"><span class="mpre">appendSubdirs</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">(&lt;/&gt;)</span></span><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_410_1_410_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_410_1_410_17&#39;)"><span class="hl_varref"><span class="mpre">fromPathTemplate</span></span></a><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_278_1_278_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_1_278_30&#39;)"><span class="hl_varref"><span class="mpre">substituteInstallDirTemplates</span></span></a><span class="mpre"> </span><a href="#loc_326_5_326_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_5_326_8&#39;)"><span class="hl_varref"><span class="mpre">env</span></span></a><span class="mpre"> </span><a href="#loc_318_56_318_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_56_318_60&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">
  where
    </span><a name="loc_326_5_326_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_5_326_8&#39;)"><span class="hl_vardecl"><span class="mpre">env</span></span></a><span class="mpre"> = </span><a href="#loc_429_1_429_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_1_429_23&#39;)"><span class="hl_varref"><span class="mpre">initialPathTemplateEnv</span></span></a><span class="mpre"> </span><a href="#loc_318_21_318_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_21_318_26&#39;)"><span class="hl_varref"><span class="mpre">pkgId</span></span></a><span class="mpre"> </span><a href="#loc_318_27_318_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_27_318_37&#39;)"><span class="hl_varref"><span class="mpre">compilerId</span></span></a><span class="mpre"> </span><a href="#loc_318_47_318_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_47_318_55&#39;)"><span class="hl_varref"><span class="mpre">platform</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- |The location prefix for the /copy/ command.</span></span><span class="mpre">
data </span><a name="loc_330_6_330_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_6_330_14&#39;)"><span class="hl_tycondecl"><span class="mpre">CopyDest</span></span></a><span class="mpre">
  = </span><a name="loc_331_5_331_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_5_331_15&#39;)"><span class="hl_condecl"><span class="mpre">NoCopyDest</span></span></a><span class="mpre">
  | </span><a name="loc_332_5_332_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_5_332_11&#39;)"><span class="hl_condecl"><span class="mpre">CopyTo</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
  </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 333, srcSpanStartColumn = 3, srcSpanEndLine = 333, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 333, srcSpanStartColumn = 3, srcSpanEndLine = 333, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribu"><span class="mpre">deriving (Eq, Show)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Check which of the paths are relative to the installation $prefix.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If any of the paths are not relative, ie they are absolute paths, then it</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- prevents us from making a relocatable package (also known as a \&quot;prefix</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- independent\&quot; package).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_344_1_344_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_1_344_26&#39;)"><span class="mpre">prefixRelativeInstallDirs</span></a><span class="mpre"> :: </span><a href="Distribution.Package.html#loc_102_6_102_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_102_6_102_23&#39;)"><span class="hl_tyconref"><span class="mpre">PackageIdentifier</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="hl_tyconref"><span class="mpre">CompilerId</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="hl_tyconref"><span class="mpre">Platform</span></span></a><span class="mpre">
                          -&gt; </span><span class="hl_tyconref"><span class="mpre">InstallDirTemplates</span></span><span class="mpre">
                          -&gt; </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">)
</span><a name="loc_344_1_344_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_1_344_26&#39;)"><span class="hl_fundecl"><span class="mpre">prefixRelativeInstallDirs</span></span></a><span class="mpre"> </span><a name="loc_344_27_344_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_27_344_32&#39;)"><span class="hl_vardecl"><span class="mpre">pkgId</span></span></a><span class="mpre"> </span><a name="loc_344_33_344_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_33_344_43&#39;)"><span class="hl_vardecl"><span class="mpre">compilerId</span></span></a><span class="mpre"> </span><a name="loc_344_44_344_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_44_344_52&#39;)"><span class="hl_vardecl"><span class="mpre">platform</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">dirs</span></span><span class="mpre"> =
    </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_358_5_358_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_5_358_13&#39;)"><span class="hl_varref"><span class="mpre">relative</span></span></a><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_185_1_185_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_14&#39;)"><span class="hl_varref"><span class="mpre">appendSubdirs</span></span></a><span class="mpre"> </span><a href="#loc_413_1_413_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_413_1_413_20&#39;)"><span class="hl_varref"><span class="mpre">combinePathTemplate</span></span></a><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- substitute the path template into each other, except that we map</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- \$prefix back to $prefix. We&#39;re trying to end up with templates that</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- mention no vars except $prefix.</span></span><span class="mpre">
    </span><a href="#loc_278_1_278_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_1_278_30&#39;)"><span class="hl_varref"><span class="mpre">substituteInstallDirTemplates</span></span></a><span class="mpre"> </span><a href="#loc_354_5_354_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_5_354_8&#39;)"><span class="hl_varref"><span class="mpre">env</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 350, srcSpanStartColumn = 39, srcSpanEndLine = 352, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 350, srcSpanStartColumn = 44, srcSpanEndLine = 350, srcSpanEndColumn = 45},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distri"><span class="mpre">dirs {
      prefix = PathTemplate [Variable PrefixVar]
    }</span></span><span class="mpre">
  where
    </span><a name="loc_354_5_354_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_5_354_8&#39;)"><span class="hl_vardecl"><span class="mpre">env</span></span></a><span class="mpre"> = </span><a href="#loc_429_1_429_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_1_429_23&#39;)"><span class="hl_varref"><span class="mpre">initialPathTemplateEnv</span></span></a><span class="mpre"> </span><a href="#loc_344_27_344_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_27_344_32&#39;)"><span class="hl_varref"><span class="mpre">pkgId</span></span></a><span class="mpre"> </span><a href="#loc_344_33_344_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_33_344_43&#39;)"><span class="hl_varref"><span class="mpre">compilerId</span></span></a><span class="mpre"> </span><a href="#loc_344_44_344_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_44_344_52&#39;)"><span class="hl_varref"><span class="mpre">platform</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- If it starts with $prefix then it&#39;s relative and produce the relative</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- path by stripping off $prefix/ or $prefix</span></span><span class="mpre">
    </span><a name="loc_358_5_358_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_5_358_13&#39;)"><span class="hl_fundecl"><span class="mpre">relative</span></span></a><span class="mpre"> </span><a name="loc_358_14_358_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_14_358_17&#39;)"><span class="hl_vardecl"><span class="mpre">dir</span></span></a><span class="mpre"> = case </span><a href="#loc_358_14_358_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_14_358_17&#39;)"><span class="hl_varref"><span class="mpre">dir</span></span></a><span class="mpre"> of
      </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><a name="loc_359_20_359_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_359_20_359_22&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="#loc_410_1_410_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_410_1_410_17&#39;)"><span class="hl_varref"><span class="mpre">fromPathTemplate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre">) (</span><a href="#loc_360_5_360_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_5_360_14&#39;)"><span class="hl_varref"><span class="mpre">relative&#39;</span></span></a><span class="mpre"> </span><a href="#loc_359_20_359_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_359_20_359_22&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">)
    </span><a name="loc_360_5_360_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_5_360_14&#39;)"><span class="hl_fundecl"><span class="mpre">relative&#39;</span></span></a><span class="mpre"> (</span><a href="#loc_375_8_375_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_8_375_16&#39;)"><span class="hl_conref"><span class="mpre">Variable</span></span></a><span class="mpre"> </span><a href="#loc_379_8_379_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_8_379_17&#39;)"><span class="hl_conref"><span class="mpre">PrefixVar</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> (</span><a name="loc_360_47_360_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_47_360_48&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_360_49_360_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_49_360_53&#39;)"><span class="hl_vardecl"><span class="mpre">rest</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a name="loc_360_57_360_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_57_360_62&#39;)"><span class="hl_vardecl"><span class="mpre">rest&#39;</span></span></a><span class="mpre">)
                      | </span><span class="hl_varref"><span class="mpre">isPathSeparator</span></span><span class="mpre"> </span><a href="#loc_360_47_360_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_47_360_48&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><a href="#loc_360_49_360_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_49_360_53&#39;)"><span class="hl_varref"><span class="mpre">rest</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_360_57_360_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_57_360_62&#39;)"><span class="hl_varref"><span class="mpre">rest&#39;</span></span></a><span class="mpre">)
    </span><a href="#loc_360_5_360_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_5_360_14&#39;)"><span class="hl_fundecl"><span class="mpre">relative&#39;</span></span></a><span class="mpre"> (</span><a href="#loc_375_8_375_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_8_375_16&#39;)"><span class="hl_conref"><span class="mpre">Variable</span></span></a><span class="mpre"> </span><a href="#loc_379_8_379_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_8_379_17&#39;)"><span class="hl_conref"><span class="mpre">PrefixVar</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a name="loc_362_37_362_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_37_362_41&#39;)"><span class="hl_vardecl"><span class="mpre">rest</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_362_37_362_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_37_362_41&#39;)"><span class="hl_varref"><span class="mpre">rest</span></span></a><span class="mpre">
    </span><a href="#loc_360_5_360_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_5_360_14&#39;)"><span class="hl_fundecl"><span class="mpre">relative&#39;</span></span></a><span class="mpre"> _                           = </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Path templates</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | An abstract path, posibly containing variables that need to be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- substituted for to get a real &#39;FilePath&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
newtype </span><a name="loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tycondecl"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> = </span><a name="loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_condecl"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> [</span><a href="#loc_373_6_373_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_6_373_19&#39;)"><span class="hl_tyconref"><span class="mpre">PathComponent</span></span></a><span class="mpre">]

data </span><a name="loc_373_6_373_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_6_373_19&#39;)"><span class="hl_tycondecl"><span class="mpre">PathComponent</span></span></a><span class="mpre"> =
       </span><a name="loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_condecl"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
     | </span><a name="loc_375_8_375_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_8_375_16&#39;)"><span class="hl_condecl"><span class="mpre">Variable</span></span></a><span class="mpre"> </span><a href="#loc_378_6_378_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_6_378_26&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplateVariable</span></span></a><span class="mpre">
     </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 376, srcSpanStartColumn = 6, srcSpanEndLine = 376, srcSpanEndColumn = 17}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 376, srcSpanStartColumn = 6, srcSpanEndLine = 376, srcSpanEndColumn = 14}]}) [IHead (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagra"><span class="mpre">deriving Eq</span></span><span class="mpre">

data </span><a name="loc_378_6_378_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_6_378_26&#39;)"><span class="hl_tycondecl"><span class="mpre">PathTemplateVariable</span></span></a><span class="mpre"> =
       </span><a name="loc_379_8_379_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_8_379_17&#39;)"><span class="hl_condecl"><span class="mpre">PrefixVar</span></span></a><span class="mpre">     </span><span class="hl_comment"><span class="mpre">-- ^ The @$prefix@ path variable</span></span><span class="mpre">
     | </span><a name="loc_380_8_380_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_8_380_17&#39;)"><span class="hl_condecl"><span class="mpre">BindirVar</span></span></a><span class="mpre">     </span><span class="hl_comment"><span class="mpre">-- ^ The @$bindir@ path variable</span></span><span class="mpre">
     | </span><a name="loc_381_8_381_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_8_381_17&#39;)"><span class="hl_condecl"><span class="mpre">LibdirVar</span></span></a><span class="mpre">     </span><span class="hl_comment"><span class="mpre">-- ^ The @$libdir@ path variable</span></span><span class="mpre">
     | </span><a name="loc_382_8_382_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_8_382_20&#39;)"><span class="hl_condecl"><span class="mpre">LibsubdirVar</span></span></a><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^ The @$libsubdir@ path variable</span></span><span class="mpre">
     | </span><a name="loc_383_8_383_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_8_383_18&#39;)"><span class="hl_condecl"><span class="mpre">DatadirVar</span></span></a><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- ^ The @$datadir@ path variable</span></span><span class="mpre">
     | </span><a name="loc_384_8_384_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_384_8_384_21&#39;)"><span class="hl_condecl"><span class="mpre">DatasubdirVar</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ The @$datasubdir@ path variable</span></span><span class="mpre">
     | </span><a name="loc_385_8_385_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_385_8_385_17&#39;)"><span class="hl_condecl"><span class="mpre">DocdirVar</span></span></a><span class="mpre">     </span><span class="hl_comment"><span class="mpre">-- ^ The @$docdir@ path variable</span></span><span class="mpre">
     | </span><a name="loc_386_8_386_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_18&#39;)"><span class="hl_condecl"><span class="mpre">HtmldirVar</span></span></a><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- ^ The @$htmldir@ path variable</span></span><span class="mpre">
     | </span><a name="loc_387_8_387_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_8_387_18&#39;)"><span class="hl_condecl"><span class="mpre">PkgNameVar</span></span></a><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- ^ The @$pkg@ package name path variable</span></span><span class="mpre">
     | </span><a name="loc_388_8_388_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_8_388_17&#39;)"><span class="hl_condecl"><span class="mpre">PkgVerVar</span></span></a><span class="mpre">     </span><span class="hl_comment"><span class="mpre">-- ^ The @$version@ package version path variable</span></span><span class="mpre">
     | </span><a name="loc_389_8_389_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_8_389_16&#39;)"><span class="hl_condecl"><span class="mpre">PkgIdVar</span></span></a><span class="mpre">      </span><span class="hl_comment"><span class="mpre">-- ^ The @$pkgid@ package Id path variable, eg @foo-1.0@</span></span><span class="mpre">
     | </span><a name="loc_390_8_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_8_390_19&#39;)"><span class="hl_condecl"><span class="mpre">CompilerVar</span></span></a><span class="mpre">   </span><span class="hl_comment"><span class="mpre">-- ^ The compiler name and version, eg @ghc-6.6.1@</span></span><span class="mpre">
     | </span><a name="loc_391_8_391_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_8_391_13&#39;)"><span class="hl_condecl"><span class="mpre">OSVar</span></span></a><span class="mpre">         </span><span class="hl_comment"><span class="mpre">-- ^ The operating system name, eg @windows@ or @linux@</span></span><span class="mpre">
     | </span><a name="loc_392_8_392_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_8_392_15&#39;)"><span class="hl_condecl"><span class="mpre">ArchVar</span></span></a><span class="mpre">       </span><span class="hl_comment"><span class="mpre">-- ^ The cpu architecture name, eg @i386@ or @x86_64@</span></span><span class="mpre">
     | </span><a name="loc_393_8_393_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_8_393_25&#39;)"><span class="hl_condecl"><span class="mpre">ExecutableNameVar</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ The executable name; used in shell wrappers</span></span><span class="mpre">
     | </span><a name="loc_394_8_394_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_8_394_24&#39;)"><span class="hl_condecl"><span class="mpre">TestSuiteNameVar</span></span></a><span class="mpre">   </span><span class="hl_comment"><span class="mpre">-- ^ The name of the test suite being run</span></span><span class="mpre">
     | </span><a name="loc_395_8_395_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_395_8_395_26&#39;)"><span class="hl_condecl"><span class="mpre">TestSuiteResultVar</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ The result of the test suite being run, eg</span></span><span class="mpre">
                          </span><span class="hl_comment"><span class="mpre">-- @pass@, @fail@, or @error@.</span></span><span class="mpre">
     | </span><a name="loc_397_8_397_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_8_397_24&#39;)"><span class="hl_condecl"><span class="mpre">BenchmarkNameVar</span></span></a><span class="mpre">   </span><span class="hl_comment"><span class="mpre">-- ^ The name of the benchmark being run</span></span><span class="mpre">
  </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 398, srcSpanStartColumn = 3, srcSpanEndLine = 398, srcSpanEndColumn = 14}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 398, srcSpanStartColumn = 3, srcSpanEndLine = 398, srcSpanEndColumn = 11}]}) [IHead (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagra"><span class="mpre">deriving Eq</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 400, srcSpanStartColumn = 1, srcSpanEndLine = 400, srcSpanEndColumn = 62}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 400, srcSpanStartColumn = 1, srcSpanEndLine = 400, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribut"><span class="mpre">type PathTemplateEnv = [(PathTemplateVariable, PathTemplate)]</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a &#39;FilePath&#39; to a &#39;PathTemplate&#39; including any template vars.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_405_1_405_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_1_405_15&#39;)"><span class="mpre">toPathTemplate</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre">
</span><a name="loc_405_1_405_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_1_405_15&#39;)"><span class="hl_vardecl"><span class="mpre">toPathTemplate</span></span></a><span class="mpre"> = </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">read</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert back to a path, any remaining vars are included</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_410_1_410_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_410_1_410_17&#39;)"><span class="mpre">fromPathTemplate</span></a><span class="mpre"> :: </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
</span><a name="loc_410_1_410_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_410_1_410_17&#39;)"><span class="hl_fundecl"><span class="mpre">fromPathTemplate</span></span></a><span class="mpre"> (</span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><a name="loc_410_32_410_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_410_32_410_40&#39;)"><span class="hl_vardecl"><span class="mpre">template</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_410_32_410_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_410_32_410_40&#39;)"><span class="hl_varref"><span class="mpre">template</span></span></a><span class="mpre">

</span><a href="#loc_413_1_413_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_413_1_413_20&#39;)"><span class="mpre">combinePathTemplate</span></a><span class="mpre"> :: </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre">
</span><a name="loc_413_1_413_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_413_1_413_20&#39;)"><span class="hl_fundecl"><span class="mpre">combinePathTemplate</span></span></a><span class="mpre"> (</span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><a name="loc_413_35_413_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_413_35_413_37&#39;)"><span class="hl_vardecl"><span class="mpre">t1</span></span></a><span class="mpre">) (</span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><a name="loc_413_53_413_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_413_53_413_55&#39;)"><span class="hl_vardecl"><span class="mpre">t2</span></span></a><span class="mpre">) =
  </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> (</span><a href="#loc_413_35_413_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_413_35_413_37&#39;)"><span class="hl_varref"><span class="mpre">t1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> [</span><span class="hl_varref"><span class="mpre">pathSeparator</span></span><span class="mpre">]] </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_413_53_413_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_413_53_413_55&#39;)"><span class="hl_varref"><span class="mpre">t2</span></span></a><span class="mpre">)

</span><a href="#loc_417_1_417_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_18&#39;)"><span class="mpre">substPathTemplate</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">PathTemplateEnv</span></span><span class="mpre"> -&gt; </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre">
</span><a name="loc_417_1_417_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_18&#39;)"><span class="hl_fundecl"><span class="mpre">substPathTemplate</span></span></a><span class="mpre"> </span><a name="loc_417_19_417_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_19_417_30&#39;)"><span class="hl_vardecl"><span class="mpre">environment</span></span></a><span class="mpre"> (</span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><a name="loc_417_45_417_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_45_417_53&#39;)"><span class="hl_vardecl"><span class="mpre">template</span></span></a><span class="mpre">) =
    </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> </span><a href="#loc_420_11_420_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_11_420_16&#39;)"><span class="hl_varref"><span class="mpre">subst</span></span></a><span class="mpre"> </span><a href="#loc_417_45_417_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_45_417_53&#39;)"><span class="hl_varref"><span class="mpre">template</span></span></a><span class="mpre">)

    where </span><a name="loc_420_11_420_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_11_420_16&#39;)"><span class="hl_fundecl"><span class="mpre">subst</span></span></a><span class="mpre"> </span><a name="loc_420_17_420_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_17_420_26&#39;)"><span class="hl_specname"><span class="mpre">component</span></span></a><span class="mpre">@(</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> _) = [</span><a href="#loc_420_17_420_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_17_420_26&#39;)"><span class="hl_varref"><span class="mpre">component</span></span></a><span class="mpre">]
          </span><a href="#loc_420_11_420_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_11_420_16&#39;)"><span class="hl_fundecl"><span class="mpre">subst</span></span></a><span class="mpre"> </span><a name="loc_421_17_421_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_421_17_421_26&#39;)"><span class="hl_specname"><span class="mpre">component</span></span></a><span class="mpre">@(</span><a href="#loc_375_8_375_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_8_375_16&#39;)"><span class="hl_conref"><span class="mpre">Variable</span></span></a><span class="mpre"> </span><a name="loc_421_37_421_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_421_37_421_45&#39;)"><span class="hl_vardecl"><span class="mpre">variable</span></span></a><span class="mpre">) =
              case </span><span class="hl_varref"><span class="mpre">lookup</span></span><span class="mpre"> </span><a href="#loc_421_37_421_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_421_37_421_45&#39;)"><span class="hl_varref"><span class="mpre">variable</span></span></a><span class="mpre"> </span><a href="#loc_417_19_417_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_19_417_30&#39;)"><span class="hl_varref"><span class="mpre">environment</span></span></a><span class="mpre"> of
                  </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><a name="loc_423_38_423_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_38_423_48&#39;)"><span class="hl_vardecl"><span class="mpre">components</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_423_38_423_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_38_423_48&#39;)"><span class="hl_varref"><span class="mpre">components</span></span></a><span class="mpre">
                  </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">                        -&gt; [</span><a href="#loc_421_17_421_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_421_17_421_26&#39;)"><span class="hl_varref"><span class="mpre">component</span></span></a><span class="mpre">]

</span><span class="hl_comment"><span class="mpre">-- | The initial environment has all the static stuff but no paths</span></span><span class="mpre">
</span><a href="#loc_429_1_429_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_1_429_23&#39;)"><span class="mpre">initialPathTemplateEnv</span></a><span class="mpre"> :: </span><a href="Distribution.Package.html#loc_102_6_102_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_102_6_102_23&#39;)"><span class="hl_tyconref"><span class="mpre">PackageIdentifier</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="hl_tyconref"><span class="mpre">CompilerId</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="hl_tyconref"><span class="mpre">Platform</span></span></a><span class="mpre">
                       -&gt; </span><span class="hl_tyconref"><span class="mpre">PathTemplateEnv</span></span><span class="mpre">
</span><a name="loc_429_1_429_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_1_429_23&#39;)"><span class="hl_fundecl"><span class="mpre">initialPathTemplateEnv</span></span></a><span class="mpre"> </span><a name="loc_429_24_429_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_24_429_29&#39;)"><span class="hl_vardecl"><span class="mpre">pkgId</span></span></a><span class="mpre"> </span><a name="loc_429_30_429_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_30_429_40&#39;)"><span class="hl_vardecl"><span class="mpre">compilerId</span></span></a><span class="mpre"> </span><a name="loc_429_41_429_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_41_429_49&#39;)"><span class="hl_vardecl"><span class="mpre">platform</span></span></a><span class="mpre"> =
     </span><a href="#loc_435_1_435_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_19&#39;)"><span class="hl_varref"><span class="mpre">packageTemplateEnv</span></span></a><span class="mpre">  </span><a href="#loc_429_24_429_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_24_429_29&#39;)"><span class="hl_varref"><span class="mpre">pkgId</span></span></a><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_442_1_442_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_1_442_20&#39;)"><span class="hl_varref"><span class="mpre">compilerTemplateEnv</span></span></a><span class="mpre"> </span><a href="#loc_429_30_429_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_30_429_40&#39;)"><span class="hl_varref"><span class="mpre">compilerId</span></span></a><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_447_1_447_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_447_1_447_20&#39;)"><span class="hl_varref"><span class="mpre">platformTemplateEnv</span></span></a><span class="mpre"> </span><a href="#loc_429_41_429_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_41_429_49&#39;)"><span class="hl_varref"><span class="mpre">platform</span></span></a><span class="mpre">

</span><a href="#loc_435_1_435_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_19&#39;)"><span class="mpre">packageTemplateEnv</span></a><span class="mpre"> :: </span><a href="Distribution.Package.html#loc_102_6_102_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_102_6_102_23&#39;)"><span class="hl_tyconref"><span class="mpre">PackageIdentifier</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">PathTemplateEnv</span></span><span class="mpre">
</span><a name="loc_435_1_435_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_19&#39;)"><span class="hl_fundecl"><span class="mpre">packageTemplateEnv</span></span></a><span class="mpre"> </span><a name="loc_435_20_435_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_20_435_25&#39;)"><span class="hl_vardecl"><span class="mpre">pkgId</span></span></a><span class="mpre"> =
  [(</span><a href="#loc_387_8_387_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_8_387_18&#39;)"><span class="hl_conref"><span class="mpre">PkgNameVar</span></span></a><span class="mpre">,  </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> [</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> (</span><a href="Distribution.Package.html#loc_187_1_187_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_187_1_187_12&#39;)"><span class="hl_varref"><span class="mpre">packageName</span></span></a><span class="mpre"> </span><a href="#loc_435_20_435_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_20_435_25&#39;)"><span class="hl_varref"><span class="mpre">pkgId</span></span></a><span class="mpre">)])
  ,(</span><a href="#loc_388_8_388_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_8_388_17&#39;)"><span class="hl_conref"><span class="mpre">PkgVerVar</span></span></a><span class="mpre">,   </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> [</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> (</span><a href="Distribution.Package.html#loc_190_1_190_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_190_1_190_15&#39;)"><span class="hl_varref"><span class="mpre">packageVersion</span></span></a><span class="mpre"> </span><a href="#loc_435_20_435_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_20_435_25&#39;)"><span class="hl_varref"><span class="mpre">pkgId</span></span></a><span class="mpre">)])
  ,(</span><a href="#loc_389_8_389_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_8_389_16&#39;)"><span class="hl_conref"><span class="mpre">PkgIdVar</span></span></a><span class="mpre">,    </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> [</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> </span><a href="#loc_435_20_435_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_20_435_25&#39;)"><span class="hl_varref"><span class="mpre">pkgId</span></span></a><span class="mpre">])
  ]

</span><a href="#loc_442_1_442_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_1_442_20&#39;)"><span class="mpre">compilerTemplateEnv</span></a><span class="mpre"> :: </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="hl_tyconref"><span class="mpre">CompilerId</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">PathTemplateEnv</span></span><span class="mpre">
</span><a name="loc_442_1_442_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_1_442_20&#39;)"><span class="hl_fundecl"><span class="mpre">compilerTemplateEnv</span></span></a><span class="mpre"> </span><a name="loc_442_21_442_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_21_442_31&#39;)"><span class="hl_vardecl"><span class="mpre">compilerId</span></span></a><span class="mpre"> =
  [(</span><a href="#loc_390_8_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_8_390_19&#39;)"><span class="hl_conref"><span class="mpre">CompilerVar</span></span></a><span class="mpre">, </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> [</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> </span><a href="#loc_442_21_442_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_21_442_31&#39;)"><span class="hl_varref"><span class="mpre">compilerId</span></span></a><span class="mpre">])
  ]

</span><a href="#loc_447_1_447_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_447_1_447_20&#39;)"><span class="mpre">platformTemplateEnv</span></a><span class="mpre"> :: </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="hl_tyconref"><span class="mpre">Platform</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">PathTemplateEnv</span></span><span class="mpre">
</span><a name="loc_447_1_447_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_447_1_447_20&#39;)"><span class="hl_fundecl"><span class="mpre">platformTemplateEnv</span></span></a><span class="mpre"> (</span><a href="Distribution.System.html#loc_164_17_164_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_17_164_25&#39;)"><span class="hl_conref"><span class="mpre">Platform</span></span></a><span class="mpre"> </span><a name="loc_447_31_447_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_447_31_447_35&#39;)"><span class="hl_vardecl"><span class="mpre">arch</span></span></a><span class="mpre"> </span><a name="loc_447_36_447_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_447_36_447_38&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre">) =
  [(</span><a href="#loc_391_8_391_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_8_391_13&#39;)"><span class="hl_conref"><span class="mpre">OSVar</span></span></a><span class="mpre">,       </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> [</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> </span><a href="#loc_447_36_447_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_447_36_447_38&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">])
  ,(</span><a href="#loc_392_8_392_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_8_392_15&#39;)"><span class="hl_conref"><span class="mpre">ArchVar</span></span></a><span class="mpre">,     </span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> [</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> </span><a href="#loc_447_31_447_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_447_31_447_35&#39;)"><span class="hl_varref"><span class="mpre">arch</span></span></a><span class="mpre">])
  ]

</span><a href="#loc_453_1_453_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_1_453_23&#39;)"><span class="mpre">installDirsTemplateEnv</span></a><span class="mpre"> :: </span><a href="#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">PathTemplateEnv</span></span><span class="mpre">
</span><a name="loc_453_1_453_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_1_453_23&#39;)"><span class="hl_fundecl"><span class="mpre">installDirsTemplateEnv</span></span></a><span class="mpre"> </span><a name="loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_vardecl"><span class="mpre">dirs</span></span></a><span class="mpre"> =
  [(</span><a href="#loc_379_8_379_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_8_379_17&#39;)"><span class="hl_conref"><span class="mpre">PrefixVar</span></span></a><span class="mpre">,     </span><a href="#loc_106_9_106_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_9_106_15&#39;)"><span class="hl_varref"><span class="mpre">prefix</span></span></a><span class="mpre">     </span><a href="#loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)
  ,(</span><a href="#loc_380_8_380_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_8_380_17&#39;)"><span class="hl_conref"><span class="mpre">BindirVar</span></span></a><span class="mpre">,     </span><a href="#loc_107_9_107_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_9_107_15&#39;)"><span class="hl_varref"><span class="mpre">bindir</span></span></a><span class="mpre">     </span><a href="#loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)
  ,(</span><a href="#loc_381_8_381_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_8_381_17&#39;)"><span class="hl_conref"><span class="mpre">LibdirVar</span></span></a><span class="mpre">,     </span><a href="#loc_108_9_108_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_9_108_15&#39;)"><span class="hl_varref"><span class="mpre">libdir</span></span></a><span class="mpre">     </span><a href="#loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)
  ,(</span><a href="#loc_382_8_382_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_8_382_20&#39;)"><span class="hl_conref"><span class="mpre">LibsubdirVar</span></span></a><span class="mpre">,  </span><a href="#loc_109_9_109_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_9_109_18&#39;)"><span class="hl_varref"><span class="mpre">libsubdir</span></span></a><span class="mpre">  </span><a href="#loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)
  ,(</span><a href="#loc_383_8_383_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_8_383_18&#39;)"><span class="hl_conref"><span class="mpre">DatadirVar</span></span></a><span class="mpre">,    </span><a href="#loc_114_9_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_9_114_16&#39;)"><span class="hl_varref"><span class="mpre">datadir</span></span></a><span class="mpre">    </span><a href="#loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)
  ,(</span><a href="#loc_384_8_384_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_384_8_384_21&#39;)"><span class="hl_conref"><span class="mpre">DatasubdirVar</span></span></a><span class="mpre">, </span><a href="#loc_115_9_115_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_9_115_19&#39;)"><span class="hl_varref"><span class="mpre">datasubdir</span></span></a><span class="mpre"> </span><a href="#loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)
  ,(</span><a href="#loc_385_8_385_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_385_8_385_17&#39;)"><span class="hl_conref"><span class="mpre">DocdirVar</span></span></a><span class="mpre">,     </span><a href="#loc_116_9_116_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_9_116_15&#39;)"><span class="hl_varref"><span class="mpre">docdir</span></span></a><span class="mpre">     </span><a href="#loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)
  ,(</span><a href="#loc_386_8_386_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_18&#39;)"><span class="hl_conref"><span class="mpre">HtmldirVar</span></span></a><span class="mpre">,    </span><a href="#loc_118_9_118_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_9_118_16&#39;)"><span class="hl_varref"><span class="mpre">htmldir</span></span></a><span class="mpre">    </span><a href="#loc_453_24_453_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_24_453_28&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">)
  ]


</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Parsing and showing path templates:</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- The textual format is that of an ordinary Haskell String, eg</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;$prefix/bin&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and this gets parsed to the internal representation as a sequence of path</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- spans which are either strings or variables, eg:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- PathTemplate [Variable PrefixVar, Ordinary &quot;/bin&quot; ]</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_378_6_378_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_6_378_26&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplateVariable</span></span></a><span class="mpre"> where
  </span><a name="loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_379_8_379_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_8_379_17&#39;)"><span class="hl_conref"><span class="mpre">PrefixVar</span></span></a><span class="mpre">     = </span><span class="hl_string"><span class="mpre">&quot;prefix&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_380_8_380_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_8_380_17&#39;)"><span class="hl_conref"><span class="mpre">BindirVar</span></span></a><span class="mpre">     = </span><span class="hl_string"><span class="mpre">&quot;bindir&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_381_8_381_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_8_381_17&#39;)"><span class="hl_conref"><span class="mpre">LibdirVar</span></span></a><span class="mpre">     = </span><span class="hl_string"><span class="mpre">&quot;libdir&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_382_8_382_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_8_382_20&#39;)"><span class="hl_conref"><span class="mpre">LibsubdirVar</span></span></a><span class="mpre">  = </span><span class="hl_string"><span class="mpre">&quot;libsubdir&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_383_8_383_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_8_383_18&#39;)"><span class="hl_conref"><span class="mpre">DatadirVar</span></span></a><span class="mpre">    = </span><span class="hl_string"><span class="mpre">&quot;datadir&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_384_8_384_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_384_8_384_21&#39;)"><span class="hl_conref"><span class="mpre">DatasubdirVar</span></span></a><span class="mpre"> = </span><span class="hl_string"><span class="mpre">&quot;datasubdir&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_385_8_385_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_385_8_385_17&#39;)"><span class="hl_conref"><span class="mpre">DocdirVar</span></span></a><span class="mpre">     = </span><span class="hl_string"><span class="mpre">&quot;docdir&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_386_8_386_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_18&#39;)"><span class="hl_conref"><span class="mpre">HtmldirVar</span></span></a><span class="mpre">    = </span><span class="hl_string"><span class="mpre">&quot;htmldir&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_387_8_387_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_8_387_18&#39;)"><span class="hl_conref"><span class="mpre">PkgNameVar</span></span></a><span class="mpre">    = </span><span class="hl_string"><span class="mpre">&quot;pkg&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_388_8_388_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_8_388_17&#39;)"><span class="hl_conref"><span class="mpre">PkgVerVar</span></span></a><span class="mpre">     = </span><span class="hl_string"><span class="mpre">&quot;version&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_389_8_389_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_8_389_16&#39;)"><span class="hl_conref"><span class="mpre">PkgIdVar</span></span></a><span class="mpre">      = </span><span class="hl_string"><span class="mpre">&quot;pkgid&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_390_8_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_8_390_19&#39;)"><span class="hl_conref"><span class="mpre">CompilerVar</span></span></a><span class="mpre">   = </span><span class="hl_string"><span class="mpre">&quot;compiler&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_391_8_391_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_8_391_13&#39;)"><span class="hl_conref"><span class="mpre">OSVar</span></span></a><span class="mpre">         = </span><span class="hl_string"><span class="mpre">&quot;os&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_392_8_392_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_8_392_15&#39;)"><span class="hl_conref"><span class="mpre">ArchVar</span></span></a><span class="mpre">       = </span><span class="hl_string"><span class="mpre">&quot;arch&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_393_8_393_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_8_393_25&#39;)"><span class="hl_conref"><span class="mpre">ExecutableNameVar</span></span></a><span class="mpre"> = </span><span class="hl_string"><span class="mpre">&quot;executablename&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_394_8_394_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_8_394_24&#39;)"><span class="hl_conref"><span class="mpre">TestSuiteNameVar</span></span></a><span class="mpre">   = </span><span class="hl_string"><span class="mpre">&quot;test-suite&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_395_8_395_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_395_8_395_26&#39;)"><span class="hl_conref"><span class="mpre">TestSuiteResultVar</span></span></a><span class="mpre"> = </span><span class="hl_string"><span class="mpre">&quot;result&quot;</span></span><span class="mpre">
  </span><a href="#loc_475_3_475_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_475_3_475_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> </span><a href="#loc_397_8_397_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_8_397_24&#39;)"><span class="hl_conref"><span class="mpre">BenchmarkNameVar</span></span></a><span class="mpre">   = </span><span class="hl_string"><span class="mpre">&quot;benchmark&quot;</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Read</span></span><span class="mpre"> </span><a href="#loc_378_6_378_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_378_6_378_26&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplateVariable</span></span></a><span class="mpre"> where
  </span><span class="hl_fundecl"><span class="mpre">readsPrec</span></span><span class="mpre"> _ </span><a name="loc_495_15_495_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_495_15_495_16&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> =
    </span><span class="hl_varref"><span class="mpre">take</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
    [ (</span><a href="#loc_498_16_498_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_16_498_19&#39;)"><span class="hl_varref"><span class="mpre">var</span></span></a><span class="mpre">, </span><span class="hl_varref"><span class="mpre">drop</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">length</span></span><span class="mpre"> </span><a href="#loc_498_8_498_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_8_498_14&#39;)"><span class="hl_varref"><span class="mpre">varStr</span></span></a><span class="mpre">) </span><a href="#loc_495_15_495_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_495_15_495_16&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
    | (</span><a name="loc_498_8_498_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_8_498_14&#39;)"><span class="hl_vardecl"><span class="mpre">varStr</span></span></a><span class="mpre">, </span><a name="loc_498_16_498_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_16_498_19&#39;)"><span class="hl_vardecl"><span class="mpre">var</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_500_11_500_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_500_11_500_15&#39;)"><span class="hl_varref"><span class="mpre">vars</span></span></a><span class="mpre">
    , </span><a href="#loc_498_8_498_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_8_498_14&#39;)"><span class="hl_varref"><span class="mpre">varStr</span></span></a><span class="mpre"> </span><a href="Data.List.html#loc_286_1_286_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_286_1_286_11&#39;)"><span class="hl_infix"><span class="mpre">`isPrefixOf`</span></span></a><span class="mpre"> </span><a href="#loc_495_15_495_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_495_15_495_16&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> ]
    where </span><a name="loc_500_11_500_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_500_11_500_15&#39;)"><span class="hl_vardecl"><span class="mpre">vars</span></span></a><span class="mpre"> = [(</span><span class="hl_string"><span class="mpre">&quot;prefix&quot;</span></span><span class="mpre">,     </span><a href="#loc_379_8_379_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_379_8_379_17&#39;)"><span class="hl_conref"><span class="mpre">PrefixVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;bindir&quot;</span></span><span class="mpre">,     </span><a href="#loc_380_8_380_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_8_380_17&#39;)"><span class="hl_conref"><span class="mpre">BindirVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;libdir&quot;</span></span><span class="mpre">,     </span><a href="#loc_381_8_381_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_8_381_17&#39;)"><span class="hl_conref"><span class="mpre">LibdirVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;libsubdir&quot;</span></span><span class="mpre">,  </span><a href="#loc_382_8_382_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_8_382_20&#39;)"><span class="hl_conref"><span class="mpre">LibsubdirVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;datadir&quot;</span></span><span class="mpre">,    </span><a href="#loc_383_8_383_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_8_383_18&#39;)"><span class="hl_conref"><span class="mpre">DatadirVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;datasubdir&quot;</span></span><span class="mpre">, </span><a href="#loc_384_8_384_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_384_8_384_21&#39;)"><span class="hl_conref"><span class="mpre">DatasubdirVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;docdir&quot;</span></span><span class="mpre">,     </span><a href="#loc_385_8_385_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_385_8_385_17&#39;)"><span class="hl_conref"><span class="mpre">DocdirVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;htmldir&quot;</span></span><span class="mpre">,    </span><a href="#loc_386_8_386_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_18&#39;)"><span class="hl_conref"><span class="mpre">HtmldirVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;pkgid&quot;</span></span><span class="mpre">,      </span><a href="#loc_389_8_389_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_8_389_16&#39;)"><span class="hl_conref"><span class="mpre">PkgIdVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;pkg&quot;</span></span><span class="mpre">,        </span><a href="#loc_387_8_387_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_8_387_18&#39;)"><span class="hl_conref"><span class="mpre">PkgNameVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;version&quot;</span></span><span class="mpre">,    </span><a href="#loc_388_8_388_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_8_388_17&#39;)"><span class="hl_conref"><span class="mpre">PkgVerVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;compiler&quot;</span></span><span class="mpre">,   </span><a href="#loc_390_8_390_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_8_390_19&#39;)"><span class="hl_conref"><span class="mpre">CompilerVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;os&quot;</span></span><span class="mpre">,         </span><a href="#loc_391_8_391_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_8_391_13&#39;)"><span class="hl_conref"><span class="mpre">OSVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;arch&quot;</span></span><span class="mpre">,       </span><a href="#loc_392_8_392_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_8_392_15&#39;)"><span class="hl_conref"><span class="mpre">ArchVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;executablename&quot;</span></span><span class="mpre">, </span><a href="#loc_393_8_393_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_8_393_25&#39;)"><span class="hl_conref"><span class="mpre">ExecutableNameVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;test-suite&quot;</span></span><span class="mpre">, </span><a href="#loc_394_8_394_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_8_394_24&#39;)"><span class="hl_conref"><span class="mpre">TestSuiteNameVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;result&quot;</span></span><span class="mpre">, </span><a href="#loc_395_8_395_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_395_8_395_26&#39;)"><span class="hl_conref"><span class="mpre">TestSuiteResultVar</span></span></a><span class="mpre">)
                 ,(</span><span class="hl_string"><span class="mpre">&quot;benchmark&quot;</span></span><span class="mpre">, </span><a href="#loc_397_8_397_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_8_397_24&#39;)"><span class="hl_conref"><span class="mpre">BenchmarkNameVar</span></span></a><span class="mpre">)]

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_373_6_373_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_6_373_19&#39;)"><span class="hl_tyconref"><span class="mpre">PathComponent</span></span></a><span class="mpre"> where
  </span><a name="loc_520_3_520_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_3_520_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> (</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><a name="loc_520_18_520_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_18_520_22&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre">) = </span><a href="#loc_520_18_520_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_18_520_22&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre">
  </span><a href="#loc_520_3_520_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_3_520_7&#39;)"><span class="hl_fundecl"><span class="mpre">show</span></span></a><span class="mpre"> (</span><a href="#loc_375_8_375_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_8_375_16&#39;)"><span class="hl_conref"><span class="mpre">Variable</span></span></a><span class="mpre"> </span><a name="loc_521_18_521_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_18_521_21&#39;)"><span class="hl_vardecl"><span class="mpre">var</span></span></a><span class="mpre">)  = </span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_521_18_521_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_18_521_21&#39;)"><span class="hl_varref"><span class="mpre">var</span></span></a><span class="mpre">
  </span><span class="hl_vardecl"><span class="mpre">showList</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">foldr</span></span><span class="mpre"> (\</span><a name="loc_522_22_522_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_22_522_23&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_varref"><span class="mpre">shows</span></span><span class="mpre"> </span><a href="#loc_522_22_522_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_22_522_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre">)) </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Read</span></span><span class="mpre"> </span><a href="#loc_373_6_373_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_6_373_19&#39;)"><span class="hl_tyconref"><span class="mpre">PathComponent</span></span></a><span class="mpre"> where
  </span><span class="hl_comment"><span class="mpre">-- for some reason we colapse multiple $ symbols here</span></span><span class="mpre">
  </span><span class="hl_fundecl"><span class="mpre">readsPrec</span></span><span class="mpre"> _ = </span><a href="#loc_527_11_527_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_11_527_15&#39;)"><span class="hl_varref"><span class="mpre">lex0</span></span></a><span class="mpre">
    where </span><a name="loc_527_11_527_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_11_527_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex0</span></span></a><span class="mpre"> [] = []
          </span><a href="#loc_527_11_527_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_11_527_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex0</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_528_25_528_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_25_528_27&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_527_11_527_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_11_527_15&#39;)"><span class="hl_varref"><span class="mpre">lex0</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_528_25_528_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_25_528_27&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre">)
          </span><a href="#loc_527_11_527_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_11_527_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex0</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_529_21_529_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_21_529_23&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;</span></span></a><span class="mpre">) = case [ (</span><a href="#loc_375_8_375_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_8_375_16&#39;)"><span class="hl_conref"><span class="mpre">Variable</span></span></a><span class="mpre"> </span><a href="#loc_530_35_530_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_530_35_530_38&#39;)"><span class="hl_varref"><span class="mpre">var</span></span></a><span class="mpre">, </span><a href="#loc_530_40_530_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_530_40_530_43&#39;)"><span class="hl_varref"><span class="mpre">s&#39;&#39;</span></span></a><span class="mpre">)
                               | (</span><a name="loc_530_35_530_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_530_35_530_38&#39;)"><span class="hl_vardecl"><span class="mpre">var</span></span></a><span class="mpre">, </span><a name="loc_530_40_530_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_530_40_530_43&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;&#39;</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">reads</span></span><span class="mpre"> </span><a href="#loc_529_21_529_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_21_529_23&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre"> ] of
                            [] -&gt; </span><a href="#loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_varref"><span class="mpre">lex1</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;$&quot;</span></span><span class="mpre"> </span><a href="#loc_529_21_529_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_21_529_23&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre">
                            </span><a name="loc_532_29_532_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_532_29_532_31&#39;)"><span class="hl_vardecl"><span class="mpre">ok</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_532_29_532_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_532_29_532_31&#39;)"><span class="hl_varref"><span class="mpre">ok</span></span></a><span class="mpre">
          </span><a href="#loc_527_11_527_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_11_527_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex0</span></span></a><span class="mpre"> </span><a name="loc_533_16_533_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_16_533_18&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_varref"><span class="mpre">lex1</span></span></a><span class="mpre"> [] </span><a href="#loc_533_16_533_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_16_533_18&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre">
          </span><a name="loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex1</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">  </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">      = []
          </span><a href="#loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex1</span></span></a><span class="mpre"> </span><a name="loc_535_16_535_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_16_535_19&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">      = [(</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> </span><a href="#loc_535_16_535_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_16_535_19&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre">), </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)]
          </span><a href="#loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex1</span></span></a><span class="mpre"> </span><a name="loc_536_16_536_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_16_536_19&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_536_29_536_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_29_536_30&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="#loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_varref"><span class="mpre">lex1</span></span></a><span class="mpre"> </span><a href="#loc_536_16_536_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_16_536_19&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_536_29_536_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_29_536_30&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
          </span><a href="#loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex1</span></span></a><span class="mpre"> </span><a name="loc_537_16_537_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_16_537_19&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_537_25_537_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_25_537_26&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = [(</span><a href="#loc_374_8_374_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_8_374_16&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> </span><a href="#loc_537_16_537_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_16_537_19&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre">), </span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_537_25_537_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_25_537_26&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)]
          </span><a href="#loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_fundecl"><span class="mpre">lex1</span></span></a><span class="mpre"> </span><a name="loc_538_16_538_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_538_16_538_19&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> (</span><a name="loc_538_21_538_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_538_21_538_22&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_538_23_538_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_538_23_538_24&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)   = </span><a href="#loc_534_11_534_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_11_534_15&#39;)"><span class="hl_varref"><span class="mpre">lex1</span></span></a><span class="mpre"> (</span><a href="#loc_538_21_538_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_538_21_538_22&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_538_16_538_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_538_16_538_19&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre">) </span><a href="#loc_538_23_538_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_538_23_538_24&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
  </span><a name="loc_539_3_539_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_539_3_539_11&#39;)"><span class="hl_fundecl"><span class="mpre">readList</span></span></a><span class="mpre"> [] = [([],</span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)]
  </span><a href="#loc_539_3_539_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_539_3_539_11&#39;)"><span class="hl_fundecl"><span class="mpre">readList</span></span></a><span class="mpre"> </span><a name="loc_540_12_540_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_540_12_540_13&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">  = [ (</span><a href="#loc_541_20_541_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_541_20_541_29&#39;)"><span class="hl_varref"><span class="mpre">component</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_542_20_542_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_542_20_542_30&#39;)"><span class="hl_varref"><span class="mpre">components</span></span></a><span class="mpre">, </span><a href="#loc_542_32_542_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_542_32_542_35&#39;)"><span class="hl_varref"><span class="mpre">s&#39;&#39;</span></span></a><span class="mpre">)
                | (</span><a name="loc_541_20_541_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_541_20_541_29&#39;)"><span class="hl_vardecl"><span class="mpre">component</span></span></a><span class="mpre">, </span><a name="loc_541_31_541_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_541_31_541_33&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">reads</span></span><span class="mpre"> </span><a href="#loc_540_12_540_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_540_12_540_13&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
                , (</span><a name="loc_542_20_542_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_542_20_542_30&#39;)"><span class="hl_vardecl"><span class="mpre">components</span></span></a><span class="mpre">, </span><a name="loc_542_32_542_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_542_32_542_35&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;&#39;</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">readList</span></span><span class="mpre"> </span><a href="#loc_541_31_541_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_541_31_541_33&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre"> ]

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> where
  </span><span class="hl_fundecl"><span class="mpre">show</span></span><span class="mpre"> (</span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><a name="loc_545_22_545_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_22_545_30&#39;)"><span class="hl_vardecl"><span class="mpre">template</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_545_22_545_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_22_545_30&#39;)"><span class="hl_varref"><span class="mpre">template</span></span></a><span class="mpre">)

instance </span><span class="hl_classref"><span class="mpre">Read</span></span><span class="mpre"> </span><a href="#loc_371_9_371_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_9_371_21&#39;)"><span class="hl_tyconref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> where
  </span><span class="hl_fundecl"><span class="mpre">readsPrec</span></span><span class="mpre"> </span><a name="loc_548_13_548_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_13_548_14&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_548_15_548_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_15_548_16&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = [ (</span><a href="#loc_371_24_371_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_24_371_36&#39;)"><span class="hl_conref"><span class="mpre">PathTemplate</span></span></a><span class="mpre"> </span><a href="#loc_550_22_550_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_22_550_30&#39;)"><span class="hl_varref"><span class="mpre">template</span></span></a><span class="mpre">, </span><a href="#loc_549_28_549_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_28_549_30&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre">)
                  | (</span><a name="loc_549_22_549_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_22_549_26&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre">, </span><a name="loc_549_28_549_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_28_549_30&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;</span></span></a><span class="mpre">)     &lt;- </span><span class="hl_varref"><span class="mpre">readsPrec</span></span><span class="mpre"> </span><a href="#loc_548_13_548_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_13_548_14&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_548_15_548_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_15_548_16&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
                  , (</span><a name="loc_550_22_550_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_22_550_30&#39;)"><span class="hl_vardecl"><span class="mpre">template</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">reads</span></span><span class="mpre"> </span><a href="#loc_549_22_549_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_22_549_26&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> ]

</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Internal utilities</span></span><span class="mpre">

</span><a href="#loc_556_1_556_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_556_1_556_26&#39;)"><span class="mpre">getWindowsProgramFilesDir</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
</span><a name="loc_556_1_556_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_556_1_556_26&#39;)"><span class="hl_vardecl"><span class="mpre">getWindowsProgramFilesDir</span></span></a><span class="mpre"> = do
#if mingw32_HOST_OS
  </span><span class="hl_vardecl"><span class="mpre">m</span></span><span class="mpre"> &lt;- </span><a href="#loc_566_1_566_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_1_566_16&#39;)"><span class="hl_varref"><span class="mpre">shGetFolderPath</span></span></a><span class="mpre"> </span><a href="#loc_576_1_576_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_1_576_20&#39;)"><span class="hl_varref"><span class="mpre">csidl_PROGRAM_FILES</span></span></a><span class="mpre">
#else
  let </span><a name="loc_560_7_560_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_560_7_560_8&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
#endif
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="hl_varref"><span class="mpre">fromMaybe</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;C:\\Program Files&quot;</span></span><span class="mpre"> </span><a href="#loc_560_7_560_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_560_7_560_8&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">)

#if mingw32_HOST_OS
</span><a href="#loc_566_1_566_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_1_566_16&#39;)"><span class="mpre">shGetFolderPath</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">)
</span><a name="loc_566_1_566_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_1_566_16&#39;)"><span class="hl_fundecl"><span class="mpre">shGetFolderPath</span></span></a><span class="mpre"> </span><a name="loc_566_17_566_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_17_566_18&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> =
  </span><a href="Foreign.Marshal.Array.html#loc_98_1_98_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Array.html#loc_98_1_98_12&#39;)"><span class="hl_varref"><span class="mpre">allocaArray</span></span></a><span class="mpre"> </span><a href="#loc_573_5_573_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_5_573_19&#39;)"><span class="hl_varref"><span class="mpre">long_path_size</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_567_33_567_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_33_567_38&#39;)"><span class="hl_vardecl"><span class="mpre">pPath</span></span></a><span class="mpre"> -&gt; do
     </span><a name="loc_568_6_568_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_568_6_568_7&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">c_SHGetFolderPath</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nullPtr</span></span><span class="mpre"> </span><a href="#loc_566_17_566_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_17_566_18&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nullPtr</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_567_33_567_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_33_567_38&#39;)"><span class="hl_varref"><span class="mpre">pPath</span></span></a><span class="mpre">
     if (</span><a href="#loc_568_6_568_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_568_6_568_7&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">)
        then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
        else do </span><a name="loc_571_17_571_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_17_571_18&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.C.String.html#loc_360_1_360_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.String.html#loc_360_1_360_13&#39;)"><span class="hl_varref"><span class="mpre">peekCWString</span></span></a><span class="mpre"> </span><a href="#loc_567_33_567_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_33_567_38&#39;)"><span class="hl_varref"><span class="mpre">pPath</span></span></a><span class="mpre">; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_571_17_571_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_17_571_18&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
  where
    </span><a name="loc_573_5_573_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_5_573_19&#39;)"><span class="hl_vardecl"><span class="mpre">long_path_size</span></span></a><span class="mpre">      = </span><span class="hl_num"><span class="mpre">1024</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- MAX_PATH is 260, this should be plenty</span></span><span class="mpre">

</span><a href="#loc_576_1_576_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_1_576_20&#39;)"><span class="mpre">csidl_PROGRAM_FILES</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre">
</span><a name="loc_576_1_576_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_1_576_20&#39;)"><span class="hl_vardecl"><span class="mpre">csidl_PROGRAM_FILES</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x0026</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- csidl_PROGRAM_FILES_COMMON :: CInt</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- csidl_PROGRAM_FILES_COMMON = 0x002b</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 580, srcSpanStartColumn = 1, srcSpanEndLine = 586, srcSpanEndColumn = 41}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/InstallDirs.hs&quot;, srcSpanStartLine = 580, srcSpanStartColumn = 1, srcSpanEndLine = 580, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distributio"><span class="mpre">foreign import stdcall unsafe &quot;shlobj.h SHGetFolderPathW&quot;
            c_SHGetFolderPath :: Ptr ()
                              -&gt; CInt
                              -&gt; Ptr ()
                              -&gt; CInt
                              -&gt; CWString
                              -&gt; IO CInt</span></span><span class="mpre">
#endif
</span></div></body></html>