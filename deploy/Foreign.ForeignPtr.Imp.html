<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE Unsafe #-}
{-# LANGUAGE NoImplicitPrelude #-}
{-# OPTIONS_HADDOCK hide #-}

</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Foreign.ForeignPtr.Imp</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (c) The University of Glasgow 2001</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file libraries/base/LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  ffi@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The &#39;ForeignPtr&#39; type and operations.  This module is part of the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Foreign Function Interface (FFI) and will usually be imported via</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the &quot;Foreign&quot; module.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">

module Foreign.ForeignPtr.Imp
        ( 
        </span><span class="hl_comment"><span class="mpre">-- * Finalised data pointers</span></span><span class="mpre">
          ForeignPtr
        , FinalizerPtr
        , FinalizerEnvPtr

        </span><span class="hl_comment"><span class="mpre">-- ** Basic operations</span></span><span class="mpre">
        , newForeignPtr
        , newForeignPtr_
        , addForeignPtrFinalizer
        , newForeignPtrEnv
        , addForeignPtrFinalizerEnv
        , withForeignPtr
        , finalizeForeignPtr

        </span><span class="hl_comment"><span class="mpre">-- ** Low-level operations</span></span><span class="mpre">
        , unsafeForeignPtrToPtr
        , touchForeignPtr
        , castForeignPtr

        </span><span class="hl_comment"><span class="mpre">-- ** Allocating managed memory</span></span><span class="mpre">
        , mallocForeignPtr
        , mallocForeignPtrBytes
        , mallocForeignPtrArray
        , mallocForeignPtrArray0
        ) 
        where

import Foreign.Ptr
import Foreign.Storable ( Storable(sizeOf) )

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 53, srcSpanStartColumn = 8, srcSpanEndLine = 53, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 8, srcSpanEndLine = 54, srcSpanEndColumn = 15}, srcInfoPoints = []}) &quot;GHC.Num&quot;"><span class="mpre">GHC.Num</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 55, srcSpanStartColumn = 8, srcSpanEndLine = 55, srcSpanEndColumn = 22}, srcInfoPoints = []}) &quot;GHC.ForeignPtr&quot;"><span class="mpre">GHC.ForeignPtr</span></span><span class="mpre">

</span><a href="#loc_63_1_63_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_14&#39;)"><span class="mpre">newForeignPtr</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FinalizerPtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">-- ^Turns a plain memory reference into a foreign pointer, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- associates a finalizer with the reference.  The finalizer will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- executed after the last reference to the foreign object is dropped.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- There is no guarantee of promptness, however the finalizer will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- executed before the program exits.</span></span><span class="mpre">
</span><a name="loc_63_1_63_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_14&#39;)"><span class="hl_fundecl"><span class="mpre">newForeignPtr</span></span></a><span class="mpre"> </span><a name="loc_63_15_63_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_15_63_24&#39;)"><span class="hl_vardecl"><span class="mpre">finalizer</span></span></a><span class="mpre"> </span><a name="loc_63_25_63_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_25_63_26&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">
  = do </span><a name="loc_64_8_64_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_8_64_12&#39;)"><span class="hl_vardecl"><span class="mpre">fObj</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">newForeignPtr_</span></span><span class="mpre"> </span><a href="#loc_63_25_63_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_25_63_26&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
       </span><span class="hl_varref"><span class="mpre">addForeignPtrFinalizer</span></span><span class="mpre"> </span><a href="#loc_63_15_63_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_15_63_24&#39;)"><span class="hl_varref"><span class="mpre">finalizer</span></span></a><span class="mpre"> </span><a href="#loc_64_8_64_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_8_64_12&#39;)"><span class="hl_varref"><span class="mpre">fObj</span></span></a><span class="mpre">
       </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_64_8_64_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_8_64_12&#39;)"><span class="hl_varref"><span class="mpre">fObj</span></span></a><span class="mpre">

</span><a href="#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_15&#39;)"><span class="mpre">withForeignPtr</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ^This is a way to look at the pointer living inside a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- foreign object.  This function takes a function which is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- applied to that pointer. The resulting &#39;IO&#39; action is then</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- executed. The foreign object is kept alive at least during</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the whole action, even if it is not used directly</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- inside. Note that it is not safe to return the pointer from</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the action and use it after the action completes. All uses</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of the pointer should be inside the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;withForeignPtr&#39; bracket.  The reason for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- this unsafeness is the same as for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafeForeignPtrToPtr&#39; below: the finalizer</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- may run earlier than expected, because the compiler can only</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- track usage of the &#39;ForeignPtr&#39; object, not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a &#39;Ptr&#39; object made from it.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function is normally used for marshalling data to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- or from the object pointed to by the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ForeignPtr&#39;, using the operations from the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Storable&#39; class.</span></span><span class="mpre">
</span><a name="loc_88_1_88_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_15&#39;)"><span class="hl_fundecl"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a name="loc_88_16_88_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_16_88_18&#39;)"><span class="hl_vardecl"><span class="mpre">fo</span></span></a><span class="mpre"> </span><a name="loc_88_19_88_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_19_88_21&#39;)"><span class="hl_vardecl"><span class="mpre">io</span></span></a><span class="mpre">
  = do </span><a name="loc_89_8_89_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_8_89_9&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_88_19_88_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_19_88_21&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">unsafeForeignPtrToPtr</span></span><span class="mpre"> </span><a href="#loc_88_16_88_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_16_88_18&#39;)"><span class="hl_varref"><span class="mpre">fo</span></span></a><span class="mpre">)
       </span><span class="hl_varref"><span class="mpre">touchForeignPtr</span></span><span class="mpre"> </span><a href="#loc_88_16_88_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_16_88_18&#39;)"><span class="hl_varref"><span class="mpre">fo</span></span></a><span class="mpre">
       </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_89_8_89_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_8_89_9&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This variant of &#39;newForeignPtr&#39; adds a finalizer that expects an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- environment in addition to the finalized pointer.  The environment</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that will be passed to the finalizer is fixed by the second argument to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;newForeignPtrEnv&#39;.</span></span><span class="mpre">
</span><a href="#loc_99_1_99_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_17&#39;)"><span class="mpre">newForeignPtrEnv</span></a><span class="mpre"> ::
    </span><span class="hl_tyconref"><span class="mpre">FinalizerEnvPtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">env</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">env</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_99_1_99_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_17&#39;)"><span class="hl_fundecl"><span class="mpre">newForeignPtrEnv</span></span></a><span class="mpre"> </span><a name="loc_99_18_99_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_18_99_27&#39;)"><span class="hl_vardecl"><span class="mpre">finalizer</span></span></a><span class="mpre"> </span><a name="loc_99_28_99_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_28_99_31&#39;)"><span class="hl_vardecl"><span class="mpre">env</span></span></a><span class="mpre"> </span><a name="loc_99_32_99_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_32_99_33&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">
  = do </span><a name="loc_100_8_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_8_100_12&#39;)"><span class="hl_vardecl"><span class="mpre">fObj</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">newForeignPtr_</span></span><span class="mpre"> </span><a href="#loc_99_32_99_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_32_99_33&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
       </span><span class="hl_varref"><span class="mpre">addForeignPtrFinalizerEnv</span></span><span class="mpre"> </span><a href="#loc_99_18_99_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_18_99_27&#39;)"><span class="hl_varref"><span class="mpre">finalizer</span></span></a><span class="mpre"> </span><a href="#loc_99_28_99_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_28_99_31&#39;)"><span class="hl_varref"><span class="mpre">env</span></span></a><span class="mpre"> </span><a href="#loc_100_8_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_8_100_12&#39;)"><span class="hl_varref"><span class="mpre">fObj</span></span></a><span class="mpre">
       </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_100_8_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_8_100_12&#39;)"><span class="hl_varref"><span class="mpre">fObj</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This function is similar to &#39;Foreign.Marshal.Array.mallocArray&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- but yields a memory area that has a finalizer attached that releases</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the memory area.  As with &#39;mallocForeignPtr&#39;, it is not guaranteed that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the block of memory was allocated by &#39;Foreign.Marshal.Alloc.malloc&#39;.</span></span><span class="mpre">
</span><a href="#loc_109_1_109_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_1_109_22&#39;)"><span class="mpre">mallocForeignPtrArray</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 108, srcSpanStartColumn = 26, srcSpanEndLine = 108, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 108, srcSpanStartColumn = 37, srcSpanEndLine = 108, srcSpanEndColumn = 39}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base"><span class="mpre">Storable a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_109_1_109_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_1_109_22&#39;)"><span class="hl_vardecl"><span class="mpre">mallocForeignPtrArray</span></span></a><span class="mpre">  = </span><a href="#loc_112_5_112_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_5_112_13&#39;)"><span class="hl_varref"><span class="mpre">doMalloc</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">undefined</span></span><span class="mpre">
  where
    </span><a href="#loc_112_5_112_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_5_112_13&#39;)"><span class="mpre">doMalloc</span></a><span class="mpre">            :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 111, srcSpanStartColumn = 28, srcSpanEndLine = 111, srcSpanEndColumn = 41}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 111, srcSpanStartColumn = 39, srcSpanEndLine = 111, srcSpanEndColumn = 41}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base"><span class="mpre">Storable b =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)
    </span><a name="loc_112_5_112_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_5_112_13&#39;)"><span class="hl_fundecl"><span class="mpre">doMalloc</span></span></a><span class="mpre"> </span><a name="loc_112_14_112_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_14_112_19&#39;)"><span class="hl_vardecl"><span class="mpre">dummy</span></span></a><span class="mpre"> </span><a name="loc_112_20_112_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_20_112_24&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre">  = </span><span class="hl_varref"><span class="mpre">mallocForeignPtrBytes</span></span><span class="mpre"> (</span><a href="#loc_112_20_112_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_20_112_24&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><a href="#loc_112_14_112_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_14_112_19&#39;)"><span class="hl_varref"><span class="mpre">dummy</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | This function is similar to &#39;Foreign.Marshal.Array.mallocArray0&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- but yields a memory area that has a finalizer attached that releases</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the memory area.  As with &#39;mallocForeignPtr&#39;, it is not guaranteed that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the block of memory was allocated by &#39;Foreign.Marshal.Alloc.malloc&#39;.</span></span><span class="mpre">
</span><a href="#loc_119_1_119_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_23&#39;)"><span class="mpre">mallocForeignPtrArray0</span></a><span class="mpre">      :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 118, srcSpanStartColumn = 32, srcSpanEndLine = 118, srcSpanEndColumn = 45}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/ForeignPtr/Imp.hs&quot;, srcSpanStartLine = 118, srcSpanStartColumn = 43, srcSpanEndLine = 118, srcSpanEndColumn = 45}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base"><span class="mpre">Storable a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_119_1_119_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_23&#39;)"><span class="hl_fundecl"><span class="mpre">mallocForeignPtrArray0</span></span></a><span class="mpre"> </span><a name="loc_119_24_119_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_24_119_28&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre">  = </span><a href="#loc_109_1_109_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_1_109_22&#39;)"><span class="hl_varref"><span class="mpre">mallocForeignPtrArray</span></span></a><span class="mpre"> (</span><a href="#loc_119_24_119_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_24_119_28&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)

</span></div></body></html>