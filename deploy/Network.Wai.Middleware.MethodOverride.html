<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE OverloadedStrings #-}
module Network.Wai.Middleware.MethodOverride
    ( methodOverride
    ) where

import Network.Wai
import Control.Monad (</span><a href="Control.Monad.html#loc_204_1_204_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_204_1_204_5&#39;)"><span class="mpre">join</span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Allows overriding of the HTTP request method via the _method query string</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- parameter.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This middleware only applies when the initial request method is POST. This</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- allow submitting of normal HTML forms, without worries of semantics</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- mismatches in the HTTP spec.</span></span><span class="mpre">
</span><a href="#loc_16_1_16_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_16_1_16_15&#39;)"><span class="mpre">methodOverride</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Middleware</span></span><span class="mpre">
</span><a name="loc_16_1_16_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_16_1_16_15&#39;)"><span class="hl_fundecl"><span class="mpre">methodOverride</span></span></a><span class="mpre"> </span><a name="loc_16_16_16_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_16_16_16_19&#39;)"><span class="hl_vardecl"><span class="mpre">app</span></span></a><span class="mpre"> </span><a name="loc_16_20_16_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_16_20_16_23&#39;)"><span class="hl_vardecl"><span class="mpre">req</span></span></a><span class="mpre"> =
    </span><a href="#loc_16_16_16_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_16_16_16_19&#39;)"><span class="hl_varref"><span class="mpre">app</span></span></a><span class="mpre"> </span><a href="#loc_19_5_19_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_19_5_19_9&#39;)"><span class="hl_varref"><span class="mpre">req&#39;</span></span></a><span class="mpre">
  where
    </span><a name="loc_19_5_19_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_19_5_19_9&#39;)"><span class="hl_vardecl"><span class="mpre">req&#39;</span></span></a><span class="mpre"> =
        case (</span><a href="Network.Wai.Internal.html#loc_22_6_22_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.Wai.Internal.html#loc_22_6_22_19&#39;)"><span class="hl_varref"><span class="mpre">requestMethod</span></span></a><span class="mpre"> </span><a href="#loc_16_20_16_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_16_20_16_23&#39;)"><span class="hl_varref"><span class="mpre">req</span></span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_204_1_204_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_204_1_204_5&#39;)"><span class="hl_varref"><span class="mpre">join</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">lookup</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;_method&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Network.Wai.Internal.html#loc_52_6_52_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.Wai.Internal.html#loc_52_6_52_17&#39;)"><span class="hl_varref"><span class="mpre">queryString</span></span></a><span class="mpre"> </span><a href="#loc_16_20_16_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_16_20_16_23&#39;)"><span class="hl_varref"><span class="mpre">req</span></span></a><span class="mpre">) of
            (</span><span class="hl_string"><span class="mpre">&quot;POST&quot;</span></span><span class="mpre">, </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">m</span></span><span class="mpre">) -&gt; </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/wai-extra-3.0.0.1/Network/Wai/Middleware/MethodOverride.hs&quot;, srcSpanStartLine = 21, srcSpanStartColumn = 33, srcSpanEndLine = 21, srcSpanEndColumn = 58}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/wai-extra-3.0.0.1/Network/Wai/Middleware/MethodOverride.hs&quot;, srcSpanStartLine = 21, srcSpanStartColumn = 37, srcSpanEndLine = 21, srcSpanEndColumn = 38},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/wai-ex"><span class="mpre">req { requestMethod = m }</span></span><span class="mpre">
            _ -&gt; </span><a href="#loc_16_20_16_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_16_20_16_23&#39;)"><span class="hl_varref"><span class="mpre">req</span></span></a><span class="mpre">
</span></div></body></html>