<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP               #-}
{-# LANGUAGE FlexibleInstances #-}

#if __GLASGOW_HASKELL__ &gt;= 702
{-# LANGUAGE Trustworthy       #-}
#endif

</span><span class="hl_comment"><span class="mpre">-- | Input and output streams for file &#39;Handle&#39;s.</span></span><span class="mpre">
module System.IO.Streams.Handle
 ( </span><span class="hl_comment"><span class="mpre">-- * Handle conversions</span></span><span class="mpre">
   handleToInputStream
 , handleToOutputStream
 , inputStreamToHandle
 , outputStreamToHandle
 , streamPairToHandle

   </span><span class="hl_comment"><span class="mpre">-- * Standard system handles</span></span><span class="mpre">
 , stdin
 , stdout
 , stderr
 ) where

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
import           </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/io-streams-1.1.4.6/src/System/IO/Streams/Handle.hs&quot;, srcSpanStartLine = 24, srcSpanStartColumn = 18, srcSpanEndLine = 24, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre">            (ByteString)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/io-streams-1.1.4.6/src/System/IO/Streams/Handle.hs&quot;, srcSpanStartLine = 25, srcSpanStartColumn = 18, srcSpanEndLine = 25, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre">            as S
import qualified GHC.IO.Handle              as H
import           System.IO                  (Handle, </span><a href="GHC.IO.Handle.html#loc_293_1_293_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_293_1_293_7&#39;)"><span class="mpre">hFlush</span></a><span class="mpre">)
import qualified System.IO                  as IO
import           System.IO.Unsafe           (</span><a href="GHC.IO.html#loc_165_1_165_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_165_1_165_16&#39;)"><span class="mpre">unsafePerformIO</span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
import           System.IO.Streams.Internal (</span><a href="System.IO.Streams.Internal.html#loc_107_6_107_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_107_6_107_17&#39;)"><span class="mpre">InputStream</span></a><span class="mpre">, </span><a href="System.IO.Streams.Internal.html#loc_126_6_126_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_126_6_126_18&#39;)"><span class="mpre">OutputStream</span></a><span class="mpre">, </span><a href="System.IO.Streams.Internal.html#loc_88_6_88_8" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_88_6_88_8&#39;)"><span class="mpre">SP</span></a><span class="mpre"> (..), </span><a href="System.IO.Streams.Internal.html#loc_284_1_284_19" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_284_1_284_19&#39;)"><span class="mpre">lockingInputStream</span></a><span class="mpre">, </span><a href="System.IO.Streams.Internal.html#loc_302_1_302_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_302_1_302_20&#39;)"><span class="mpre">lockingOutputStream</span></a><span class="mpre">, </span><a href="System.IO.Streams.Internal.html#loc_247_1_247_16" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_247_1_247_16&#39;)"><span class="mpre">makeInputStream</span></a><span class="mpre">, </span><a href="System.IO.Streams.Internal.html#loc_273_1_273_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_273_1_273_17&#39;)"><span class="mpre">makeOutputStream</span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><a href="#loc_36_1_36_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_7&#39;)"><span class="mpre">bUFSIZ</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_36_1_36_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_7&#39;)"><span class="hl_vardecl"><span class="mpre">bUFSIZ</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">32752</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | Converts a read-only handle into an &#39;InputStream&#39; of strict &#39;ByteString&#39;s.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note that the wrapped handle is /not/ closed when it yields end-of-stream;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- you can use &#39;System.IO.Streams.Combinators.atEndOfInput&#39; to close the handle</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- if you would like this behaviour.</span></span><span class="mpre">
</span><a href="#loc_46_1_46_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_1_46_20&#39;)"><span class="mpre">handleToInputStream</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="System.IO.Streams.Internal.html#loc_107_6_107_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_107_6_107_17&#39;)"><span class="hl_tyconref"><span class="mpre">InputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">)
</span><a name="loc_46_1_46_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_1_46_20&#39;)"><span class="hl_fundecl"><span class="mpre">handleToInputStream</span></span></a><span class="mpre"> </span><a name="loc_46_21_46_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_21_46_22&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="System.IO.Streams.Internal.html#loc_247_1_247_16" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_247_1_247_16&#39;)"><span class="hl_varref"><span class="mpre">makeInputStream</span></span></a><span class="mpre"> </span><a href="#loc_48_5_48_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_5_48_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
  where
    </span><a name="loc_48_5_48_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_5_48_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = do
        </span><a name="loc_49_9_49_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_9_49_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">S.hGetSome</span></span><span class="mpre"> </span><a href="#loc_46_21_46_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_21_46_22&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_36_1_36_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_7&#39;)"><span class="hl_varref"><span class="mpre">bUFSIZ</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> if </span><span class="hl_varref"><span class="mpre">S.null</span></span><span class="mpre"> </span><a href="#loc_49_9_49_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_9_49_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> then </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> else </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_49_9_49_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_9_49_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | Converts a writable handle into an &#39;OutputStream&#39; of strict &#39;ByteString&#39;s.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note that the wrapped handle is /not/ closed when it receives end-of-stream;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- you can use &#39;System.IO.Streams.Combinators.atEndOfOutput&#39; to close the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- handle if you would like this behaviour.</span></span><span class="mpre">
</span><a href="#loc_60_1_60_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_21&#39;)"><span class="mpre">handleToOutputStream</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="System.IO.Streams.Internal.html#loc_126_6_126_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_126_6_126_18&#39;)"><span class="hl_tyconref"><span class="mpre">OutputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">)
</span><a name="loc_60_1_60_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_21&#39;)"><span class="hl_fundecl"><span class="mpre">handleToOutputStream</span></span></a><span class="mpre"> </span><a name="loc_60_22_60_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_22_60_23&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="System.IO.Streams.Internal.html#loc_273_1_273_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_273_1_273_17&#39;)"><span class="hl_varref"><span class="mpre">makeOutputStream</span></span></a><span class="mpre"> </span><a href="#loc_62_5_62_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_5_62_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
  where
    </span><a name="loc_62_5_62_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_5_62_6&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">  = </span><a href="GHC.IO.Handle.html#loc_293_1_293_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_293_1_293_7&#39;)"><span class="hl_varref"><span class="mpre">hFlush</span></span></a><span class="mpre"> </span><a href="#loc_60_22_60_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_22_60_23&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
    </span><a href="#loc_62_5_62_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_5_62_6&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_63_13_63_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_14&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = if </span><span class="hl_varref"><span class="mpre">S.null</span></span><span class="mpre"> </span><a href="#loc_63_13_63_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_14&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
                   then </span><a href="GHC.IO.Handle.html#loc_293_1_293_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_293_1_293_7&#39;)"><span class="hl_varref"><span class="mpre">hFlush</span></span></a><span class="mpre"> </span><a href="#loc_60_22_60_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_22_60_23&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
                   else </span><span class="hl_varref"><span class="mpre">S.hPut</span></span><span class="mpre"> </span><a href="#loc_60_22_60_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_22_60_23&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_63_13_63_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_14&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | Converts an &#39;InputStream&#39; over bytestrings to a read-only &#39;Handle&#39;. Note</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that the generated handle is opened unbuffered in binary mode (i.e. no</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- newline translation is performed).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: the &#39;InputStream&#39; passed into this function is wrapped in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;lockingInputStream&#39; to make it thread-safe.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Since: 1.0.2.0./</span></span><span class="mpre">
</span><a href="#loc_78_1_78_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_20&#39;)"><span class="mpre">inputStreamToHandle</span></a><span class="mpre"> :: </span><a href="System.IO.Streams.Internal.html#loc_107_6_107_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_107_6_107_17&#39;)"><span class="hl_tyconref"><span class="mpre">InputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">
</span><a name="loc_78_1_78_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_20&#39;)"><span class="hl_fundecl"><span class="mpre">inputStreamToHandle</span></span></a><span class="mpre"> </span><a name="loc_78_21_78_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_21_78_24&#39;)"><span class="hl_vardecl"><span class="mpre">is0</span></span></a><span class="mpre"> = do
    </span><a name="loc_79_5_79_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_5_79_7&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre"> &lt;- </span><a href="System.IO.Streams.Internal.html#loc_284_1_284_19" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_284_1_284_19&#39;)"><span class="hl_varref"><span class="mpre">lockingInputStream</span></span></a><span class="mpre"> </span><a href="#loc_78_21_78_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_21_78_24&#39;)"><span class="hl_varref"><span class="mpre">is0</span></span></a><span class="mpre">
    </span><a name="loc_80_5_80_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_6&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">H.mkDuplexHandle</span></span><span class="mpre"> </span><a href="#loc_79_5_79_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_5_79_7&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;*input-stream*&quot;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">H.noNewlineTranslation</span></span><span class="mpre">
    </span><a href="GHC.IO.Handle.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_204_1_204_14&#39;)"><span class="hl_varref"><span class="mpre">H.hSetBuffering</span></span></a><span class="mpre"> </span><a href="#loc_80_5_80_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">H.NoBuffering</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_80_5_80_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | Converts an &#39;OutputStream&#39; over bytestrings to a write-only &#39;Handle&#39;. Note</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that the &#39;Handle&#39; will be opened in non-buffering mode; if you buffer the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;OutputStream&#39; using the &#39;Handle&#39; buffering then @io-streams@ will copy the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Handle&#39; buffer when sending &#39;ByteString&#39; values to the output, which might</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- not be what you want. When the output buffer, if used, is flushed, an empty</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- string is written to the output, as is conventional throughout the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @io-streams@ library for &#39;ByteString&#39; output buffers.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: the &#39;OutputStream&#39; passed into this function is wrapped in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;lockingOutputStream&#39; to make it thread-safe.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Since: 1.0.2.0./</span></span><span class="mpre">
</span><a href="#loc_99_1_99_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_21&#39;)"><span class="mpre">outputStreamToHandle</span></a><span class="mpre"> :: </span><a href="System.IO.Streams.Internal.html#loc_126_6_126_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_126_6_126_18&#39;)"><span class="hl_tyconref"><span class="mpre">OutputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">
</span><a name="loc_99_1_99_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_21&#39;)"><span class="hl_fundecl"><span class="mpre">outputStreamToHandle</span></span></a><span class="mpre"> </span><a name="loc_99_22_99_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_22_99_25&#39;)"><span class="hl_vardecl"><span class="mpre">os0</span></span></a><span class="mpre"> = do
    </span><a name="loc_100_5_100_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_5_100_7&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre"> &lt;- </span><a href="System.IO.Streams.Internal.html#loc_302_1_302_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_302_1_302_20&#39;)"><span class="hl_varref"><span class="mpre">lockingOutputStream</span></span></a><span class="mpre"> </span><a href="#loc_99_22_99_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_22_99_25&#39;)"><span class="hl_varref"><span class="mpre">os0</span></span></a><span class="mpre">
    </span><a name="loc_101_5_101_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_6&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">H.mkDuplexHandle</span></span><span class="mpre"> </span><a href="#loc_100_5_100_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_5_100_7&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;*output-stream*&quot;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">H.noNewlineTranslation</span></span><span class="mpre">
    </span><a href="GHC.IO.Handle.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_204_1_204_14&#39;)"><span class="hl_varref"><span class="mpre">H.hSetBuffering</span></span></a><span class="mpre"> </span><a href="#loc_101_5_101_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">H.NoBuffering</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_101_5_101_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | Converts a pair of &#39;InputStream&#39; and &#39;OutputStream&#39; over bytestrings to a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- read-write &#39;Handle&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: the streams passed into this function are wrapped in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- locking primitives to make them thread-safe.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Since: 1.0.2.0./</span></span><span class="mpre">
</span><a href="#loc_115_1_115_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_1_115_19&#39;)"><span class="mpre">streamPairToHandle</span></a><span class="mpre"> :: </span><a href="System.IO.Streams.Internal.html#loc_107_6_107_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_107_6_107_17&#39;)"><span class="hl_tyconref"><span class="mpre">InputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> -&gt; </span><a href="System.IO.Streams.Internal.html#loc_126_6_126_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_126_6_126_18&#39;)"><span class="hl_tyconref"><span class="mpre">OutputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">
</span><a name="loc_115_1_115_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_1_115_19&#39;)"><span class="hl_fundecl"><span class="mpre">streamPairToHandle</span></span></a><span class="mpre"> </span><a name="loc_115_20_115_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_20_115_23&#39;)"><span class="hl_vardecl"><span class="mpre">is0</span></span></a><span class="mpre"> </span><a name="loc_115_24_115_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_24_115_27&#39;)"><span class="hl_vardecl"><span class="mpre">os0</span></span></a><span class="mpre"> = do
    </span><a name="loc_116_5_116_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_5_116_7&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre"> &lt;- </span><a href="System.IO.Streams.Internal.html#loc_284_1_284_19" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_284_1_284_19&#39;)"><span class="hl_varref"><span class="mpre">lockingInputStream</span></span></a><span class="mpre"> </span><a href="#loc_115_20_115_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_20_115_23&#39;)"><span class="hl_varref"><span class="mpre">is0</span></span></a><span class="mpre">
    </span><a name="loc_117_5_117_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_7&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre"> &lt;- </span><a href="System.IO.Streams.Internal.html#loc_302_1_302_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_302_1_302_20&#39;)"><span class="hl_varref"><span class="mpre">lockingOutputStream</span></span></a><span class="mpre"> </span><a href="#loc_115_24_115_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_24_115_27&#39;)"><span class="hl_varref"><span class="mpre">os0</span></span></a><span class="mpre">
    </span><a name="loc_118_5_118_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_6&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">H.mkDuplexHandle</span></span><span class="mpre"> (</span><a href="System.IO.Streams.Internal.html#loc_88_15_88_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_88_15_88_17&#39;)"><span class="hl_conref"><span class="mpre">SP</span></span></a><span class="mpre"> </span><a href="#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_5_116_7&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><a href="#loc_117_5_117_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_7&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">) </span><span class="hl_string"><span class="mpre">&quot;*stream*&quot;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">H.noNewlineTranslation</span></span><span class="mpre">
    </span><a href="GHC.IO.Handle.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_204_1_204_14&#39;)"><span class="hl_varref"><span class="mpre">H.hSetBuffering</span></span></a><span class="mpre"> </span><a href="#loc_118_5_118_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">H.NoBuffering</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_118_5_118_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | An &#39;InputStream&#39; for &#39;IO.stdin&#39;.</span></span><span class="mpre">
</span><a href="#loc_126_1_126_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_1_126_6&#39;)"><span class="mpre">stdin</span></a><span class="mpre"> :: </span><a href="System.IO.Streams.Internal.html#loc_107_6_107_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_107_6_107_17&#39;)"><span class="hl_tyconref"><span class="mpre">InputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">
</span><a name="loc_126_1_126_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_1_126_6&#39;)"><span class="hl_vardecl"><span class="mpre">stdin</span></span></a><span class="mpre"> = </span><a href="GHC.IO.html#loc_165_1_165_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_165_1_165_16&#39;)"><span class="hl_varref"><span class="mpre">unsafePerformIO</span></span></a><span class="mpre"> (</span><a href="#loc_46_1_46_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_1_46_20&#39;)"><span class="hl_varref"><span class="mpre">handleToInputStream</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_52_1_52_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_52_1_52_6&#39;)"><span class="hl_varref"><span class="mpre">IO.stdin</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a href="System.IO.Streams.Internal.html#loc_284_1_284_19" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_284_1_284_19&#39;)"><span class="hl_varref"><span class="mpre">lockingInputStream</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# NOINLINE </span><a href="#loc_126_1_126_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_1_126_6&#39;)"><span class="mpre">stdin</span></a><span class="mpre"> #-}</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | An &#39;OutputStream&#39; for &#39;IO.stdout&#39;.</span></span><span class="mpre">
</span><a href="#loc_133_1_133_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_1_133_7&#39;)"><span class="mpre">stdout</span></a><span class="mpre"> :: </span><a href="System.IO.Streams.Internal.html#loc_126_6_126_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_126_6_126_18&#39;)"><span class="hl_tyconref"><span class="mpre">OutputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">
</span><a name="loc_133_1_133_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_1_133_7&#39;)"><span class="hl_vardecl"><span class="mpre">stdout</span></span></a><span class="mpre"> = </span><a href="GHC.IO.html#loc_165_1_165_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_165_1_165_16&#39;)"><span class="hl_varref"><span class="mpre">unsafePerformIO</span></span></a><span class="mpre"> (</span><a href="#loc_60_1_60_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_21&#39;)"><span class="hl_varref"><span class="mpre">handleToOutputStream</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_63_1_63_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_63_1_63_7&#39;)"><span class="hl_varref"><span class="mpre">IO.stdout</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre">
                          </span><a href="System.IO.Streams.Internal.html#loc_302_1_302_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_302_1_302_20&#39;)"><span class="hl_varref"><span class="mpre">lockingOutputStream</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# NOINLINE </span><a href="#loc_133_1_133_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_1_133_7&#39;)"><span class="mpre">stdout</span></a><span class="mpre"> #-}</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | An &#39;OutputStream&#39; for &#39;IO.stderr&#39;.</span></span><span class="mpre">
</span><a href="#loc_141_1_141_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_1_141_7&#39;)"><span class="mpre">stderr</span></a><span class="mpre"> :: </span><a href="System.IO.Streams.Internal.html#loc_126_6_126_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_126_6_126_18&#39;)"><span class="hl_tyconref"><span class="mpre">OutputStream</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">
</span><a name="loc_141_1_141_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_1_141_7&#39;)"><span class="hl_vardecl"><span class="mpre">stderr</span></span></a><span class="mpre"> = </span><a href="GHC.IO.html#loc_165_1_165_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_165_1_165_16&#39;)"><span class="hl_varref"><span class="mpre">unsafePerformIO</span></span></a><span class="mpre"> (</span><a href="#loc_60_1_60_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_21&#39;)"><span class="hl_varref"><span class="mpre">handleToOutputStream</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_74_1_74_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_74_1_74_7&#39;)"><span class="hl_varref"><span class="mpre">IO.stderr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre">
                          </span><a href="System.IO.Streams.Internal.html#loc_302_1_302_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_302_1_302_20&#39;)"><span class="hl_varref"><span class="mpre">lockingOutputStream</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# NOINLINE </span><a href="#loc_141_1_141_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_1_141_7&#39;)"><span class="mpre">stderr</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>