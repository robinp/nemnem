<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE DeriveDataTypeable, CPP, BangPatterns, RankNTypes,
             ForeignFunctionInterface, MagicHash, UnboxedTuples,
             UnliftedFFITypes #-}
{-# OPTIONS_GHC -fno-warn-name-shadowing #-}
#if __GLASGOW_HASKELL__ &gt;= 701
{-# LANGUAGE Unsafe #-}
#endif
{-# OPTIONS_HADDOCK hide #-}

</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      : Data.ByteString.Short.Internal</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   : (c) Duncan Coutts 2012-2013</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     : BSD-style</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  : duncan@community.haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   : stable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability : ghc only</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Internal representation of ShortByteString</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
module Data.ByteString.Short.Internal (

    </span><span class="hl_comment"><span class="mpre">-- * The @ShortByteString@ type and representation</span></span><span class="mpre">
    ShortByteString(..),

    </span><span class="hl_comment"><span class="mpre">-- * Conversions</span></span><span class="mpre">
    toShort,
    fromShort,
    pack,
    unpack,

    </span><span class="hl_comment"><span class="mpre">-- * Other operations</span></span><span class="mpre">
    empty, null, length, index, unsafeIndex,

    </span><span class="hl_comment"><span class="mpre">-- * Low level operations</span></span><span class="mpre">
    createFromPtr, copyToPtr
  ) where

import Data.ByteString.Internal (</span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="mpre">ByteString</span></a><span class="mpre">(..), </span><a href="Data.ByteString.Internal.html#loc_592_1_592_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_592_1_592_16&#39;)"><span class="mpre">inlinePerformIO</span></a><span class="mpre">)

import Data.Typeable    (</span><a href="Data.Typeable.Internal.html#loc_196_7_196_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_196_7_196_15&#39;)"><span class="mpre">Typeable</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 42, srcSpanStartColumn = 8, srcSpanEndLine = 42, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;Data.Data&quot;"><span class="mpre">Data.Data</span></span><span class="mpre">        (Data(..), mkNoRepType)
import Data.Monoid      (</span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="mpre">Monoid</span></a><span class="mpre">(..))
import Data.String      (</span><a href="Data.String.html#loc_34_7_34_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_34_7_34_15&#39;)"><span class="mpre">IsString</span></a><span class="mpre">(..))
import Control.DeepSeq  (</span><a href="Control.DeepSeq.html#loc_110_7_110_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_110_7_110_13&#39;)"><span class="mpre">NFData</span></a><span class="mpre">(..))
import qualified Data.List as List (length)
#if MIN_VERSION_base(4,7,0)
import Foreign.C.Types  (CSize(..), CInt(..))
#elif MIN_VERSION_base(4,4,0)
import Foreign.C.Types  (CSize(..), CInt(..), CLong(..))
#else
import Foreign.C.Types  (CSize, CInt, CLong)
#endif
import Foreign.Ptr
import Foreign.ForeignPtr (touchForeignPtr)
#if MIN_VERSION_base(4,5,0)
import Foreign.ForeignPtr.Unsafe (unsafeForeignPtrToPtr)
#else
import Foreign.ForeignPtr (unsafeForeignPtrToPtr)
#endif

#if MIN_VERSION_base(4,5,0)
import qualified GHC.Exts
#endif
import GHC.Exts ( Int(I#), </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="mpre">Int#</span></a><span class="mpre">, Ptr(Ptr), </span><a href="GHC.Prim.html#loc_2279_6_2279_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2279_6_2279_11&#39;)"><span class="mpre">Addr#</span></a><span class="mpre">, Char(C#)
                , </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="mpre">State#</span></a><span class="mpre">, </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="mpre">RealWorld</span></a><span class="mpre">
                , </span><a href="GHC.Prim.html#loc_1949_6_1949_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1949_6_1949_16&#39;)"><span class="mpre">ByteArray#</span></a><span class="mpre">, </span><a href="GHC.Prim.html#loc_1951_6_1951_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1951_6_1951_23&#39;)"><span class="mpre">MutableByteArray#</span></a><span class="mpre">
                , </span><a href="GHC.Prim.html#loc_1957_1_1957_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1957_1_1957_14&#39;)"><span class="mpre">newByteArray#</span></a><span class="mpre">
#if MIN_VERSION_base(4,6,0)
                , </span><a href="GHC.Prim.html#loc_1962_1_1962_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1962_1_1962_20&#39;)"><span class="mpre">newPinnedByteArray#</span></a><span class="mpre">
                , </span><a href="GHC.Prim.html#loc_1972_1_1972_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1972_1_1972_19&#39;)"><span class="mpre">byteArrayContents#</span></a><span class="mpre">
                , </span><a href="GHC.Prim.html#loc_2912_1_2912_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2912_1_2912_14&#39;)"><span class="mpre">unsafeCoerce#</span></a><span class="mpre">
#endif
#if MIN_VERSION_base(4,3,0)
                , </span><a href="GHC.Prim.html#loc_1985_1_1985_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1985_1_1985_17&#39;)"><span class="mpre">sizeofByteArray#</span></a><span class="mpre">
#endif
                , </span><a href="GHC.Prim.html#loc_2033_1_2033_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2033_1_2033_17&#39;)"><span class="mpre">indexWord8Array#</span></a><span class="mpre">, </span><a href="GHC.Prim.html#loc_1995_1_1995_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1995_1_1995_16&#39;)"><span class="mpre">indexCharArray#</span></a><span class="mpre">
                , </span><a href="GHC.Prim.html#loc_2137_1_2137_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2137_1_2137_17&#39;)"><span class="mpre">writeWord8Array#</span></a><span class="mpre">, </span><a href="GHC.Prim.html#loc_2099_1_2099_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2099_1_2099_16&#39;)"><span class="mpre">writeCharArray#</span></a><span class="mpre">
                , </span><a href="GHC.Prim.html#loc_1980_1_1980_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1980_1_1980_23&#39;)"><span class="mpre">unsafeFreezeByteArray#</span></a><span class="mpre"> )
import GHC.IO
#if MIN_VERSION_base(4,6,0)
import GHC.ForeignPtr (</span><a href="GHC.ForeignPtr.html#loc_73_6_73_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_6_73_16&#39;)"><span class="mpre">ForeignPtr</span></a><span class="mpre">(</span><a href="GHC.ForeignPtr.html#loc_73_21_73_31" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_21_73_31&#39;)"><span class="mpre">ForeignPtr</span></a><span class="mpre">), </span><a href="GHC.ForeignPtr.html#loc_90_6_90_24" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_90_6_90_24&#39;)"><span class="mpre">ForeignPtrContents</span></a><span class="mpre">(</span><a href="GHC.ForeignPtr.html#loc_93_5_93_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_93_5_93_13&#39;)"><span class="mpre">PlainPtr</span></a><span class="mpre">))
#else
import GHC.ForeignPtr (</span><a href="GHC.ForeignPtr.html#loc_227_1_227_27" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_227_1_227_27&#39;)"><span class="mpre">mallocPlainForeignPtrBytes</span></a><span class="mpre">)
#endif
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 86, srcSpanStartColumn = 8, srcSpanEndLine = 86, srcSpanEndColumn = 14}, srcInfoPoints = []}) &quot;GHC.ST&quot;"><span class="mpre">GHC.ST</span></span><span class="mpre">         (ST(ST), runST)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 8, srcSpanEndLine = 87, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Word&quot;"><span class="mpre">GHC.Word</span></span><span class="mpre">

import Prelude ( Eq(..), Ord(..), Ordering(..), Read(..), Show(..)
               , ($), error, (++)
               , Bool(..), (&amp;&amp;), otherwise
               , (+), (-), fromIntegral
               , return )


</span><span class="hl_comment"><span class="mpre">-- | A compact representation of a &#39;Word8&#39; vector.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It has a lower memory overhead than a &#39;ByteString&#39; and and does not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- contribute to heap fragmentation. It can be converted to or from a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ByteString&#39; (at the cost of copying the string data). It supports very few</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- other operations.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It is suitable for use as an internal representation for code that needs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to keep many short strings in memory, but it /should not/ be used as an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- interchange type. That is, it should not generally be used in public APIs.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The &#39;ByteString&#39; type is usually more suitable for use in interfaces; it is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- more flexible and it supports a wide range of operations.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
data </span><a name="loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tycondecl"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> = </span><a name="loc_109_24_109_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_24_109_27&#39;)"><span class="hl_condecl"><span class="mpre">SBS</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_1949_6_1949_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1949_6_1949_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteArray#</span></span></a><span class="mpre">
#if !(MIN_VERSION_base(4,3,0))
                           </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^ Prior to ghc-7.0.x, &#39;ByteArray#&#39;s reported</span></span><span class="mpre">
                                </span><span class="hl_comment"><span class="mpre">-- their length rounded up to the nearest word.</span></span><span class="mpre">
                                </span><span class="hl_comment"><span class="mpre">-- This means we have to store the true length</span></span><span class="mpre">
                                </span><span class="hl_comment"><span class="mpre">-- separately, wasting a word.</span></span><span class="mpre">
#define LEN(x) (x)
#else
#define _len   /* empty */
#define LEN(x) /* empty */
#endif
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 120, srcSpanStartColumn = 5, srcSpanEndLine = 120, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 120, srcSpanStartColumn = 5, srcSpanEndLine = 120, srcSpanEndColumn = 13}]}) [IHead (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/ho"><span class="mpre">deriving Typeable</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- The ByteArray# representation is always word sized and aligned but with a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- known byte length. Our representation choice for ShortByteString is to leave</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the 0--3 trailing bytes undefined. This means we can use word-sized writes,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- but we have to be careful with reads, see equateBytes and compareBytes below.</span></span><span class="mpre">


instance </span><span class="hl_classref"><span class="mpre">Eq</span></span><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> where
    </span><span class="hl_vardecl"><span class="mpre">(==)</span></span><span class="mpre">    = </span><a href="#loc_363_1_363_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_1_363_12&#39;)"><span class="hl_varref"><span class="mpre">equateBytes</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Ord</span></span><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> where
    </span><span class="hl_vardecl"><span class="mpre">compare</span></span><span class="mpre"> = </span><a href="#loc_370_1_370_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_13&#39;)"><span class="hl_varref"><span class="mpre">compareBytes</span></span></a><span class="mpre">

instance </span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="hl_classref"><span class="mpre">Monoid</span></span></a><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> where
    </span><a href="Data.Monoid.html#loc_80_9_80_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_80_9_80_15&#39;)"><span class="hl_vardecl"><span class="mpre">mempty</span></span></a><span class="mpre">  = </span><a href="#loc_165_1_165_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_6&#39;)"><span class="hl_varref"><span class="mpre">empty</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_vardecl"><span class="mpre">mappend</span></span></a><span class="mpre"> = </span><a href="#loc_386_1_386_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_1_386_7&#39;)"><span class="hl_varref"><span class="mpre">append</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_vardecl"><span class="mpre">mconcat</span></span></a><span class="mpre"> = </span><a href="#loc_394_1_394_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_1_394_7&#39;)"><span class="hl_varref"><span class="mpre">concat</span></span></a><span class="mpre">

instance </span><a href="Control.DeepSeq.html#loc_110_7_110_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_110_7_110_13&#39;)"><span class="hl_classref"><span class="mpre">NFData</span></span></a><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a name="loc_142_15_142_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_15_142_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_142_17_142_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_17_142_19&#39;)"><span class="hl_vardecl"><span class="mpre">ps</span></span></a><span class="mpre"> </span><a name="loc_142_20_142_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_20_142_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a href="#loc_142_15_142_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_15_142_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="#loc_304_1_304_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_1_304_12&#39;)"><span class="hl_varref"><span class="mpre">unpackChars</span></span></a><span class="mpre"> </span><a href="#loc_142_17_142_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_17_142_19&#39;)"><span class="hl_varref"><span class="mpre">ps</span></span></a><span class="mpre">) </span><a href="#loc_142_20_142_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_20_142_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Read</span></span><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">readsPrec</span></span><span class="mpre"> </span><a name="loc_145_15_145_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_15_145_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_145_17_145_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_17_145_20&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> = [ (</span><a href="#loc_267_1_267_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_10&#39;)"><span class="hl_varref"><span class="mpre">packChars</span></span></a><span class="mpre"> </span><a href="#loc_145_45_145_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_45_145_46&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">, </span><a href="#loc_145_48_145_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_48_145_49&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">) | (</span><a name="loc_145_45_145_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_45_145_46&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">, </span><a name="loc_145_48_145_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_48_145_49&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">readsPrec</span></span><span class="mpre"> </span><a href="#loc_145_15_145_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_15_145_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_145_17_145_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_17_145_20&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre"> ]

instance </span><a href="Data.String.html#loc_34_7_34_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_34_7_34_15&#39;)"><span class="hl_classref"><span class="mpre">IsString</span></span></a><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> where
    </span><a href="Data.String.html#loc_35_5_35_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_35_5_35_15&#39;)"><span class="hl_vardecl"><span class="mpre">fromString</span></span></a><span class="mpre"> = </span><a href="#loc_267_1_267_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_10&#39;)"><span class="hl_varref"><span class="mpre">packChars</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Data</span></span><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> where
  </span><span class="hl_fundecl"><span class="mpre">gfoldl</span></span><span class="mpre"> </span><a name="loc_151_10_151_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_10_151_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_151_12_151_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_12_151_13&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_151_14_151_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_14_151_17&#39;)"><span class="hl_vardecl"><span class="mpre">txt</span></span></a><span class="mpre"> = </span><a href="#loc_151_12_151_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_12_151_13&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> </span><a href="#loc_270_1_270_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_270_1_270_10&#39;)"><span class="hl_varref"><span class="mpre">packBytes</span></span></a><span class="mpre"> </span><a href="#loc_151_10_151_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_10_151_11&#39;)"><span class="hl_infix"><span class="mpre">`f`</span></span></a><span class="mpre"> (</span><a href="#loc_307_1_307_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_1_307_12&#39;)"><span class="hl_varref"><span class="mpre">unpackBytes</span></span></a><span class="mpre"> </span><a href="#loc_151_14_151_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_14_151_17&#39;)"><span class="hl_varref"><span class="mpre">txt</span></span></a><span class="mpre">)
  </span><span class="hl_fundecl"><span class="mpre">toConstr</span></span><span class="mpre"> _     = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Short.ShortByteString.toConstr&quot;</span></span><span class="mpre">
  </span><span class="hl_fundecl"><span class="mpre">gunfold</span></span><span class="mpre"> _ _    = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Short.ShortByteString.gunfold&quot;</span></span><span class="mpre">
#if MIN_VERSION_base(4,2,0)
  </span><a name="loc_155_3_155_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_3_155_13&#39;)"><span class="hl_fundecl"><span class="mpre">dataTypeOf</span></span></a><span class="mpre"> _   = </span><span class="hl_varref"><span class="mpre">mkNoRepType</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Short.ShortByteString&quot;</span></span><span class="mpre">
#else
  </span><a href="#loc_155_3_155_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_3_155_13&#39;)"><span class="hl_fundecl"><span class="mpre">dataTypeOf</span></span></a><span class="mpre"> _   = </span><span class="hl_varref"><span class="mpre">mkNorepType</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Short.ShortByteString&quot;</span></span><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Simple operations</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/. The empty &#39;ShortByteString&#39;.</span></span><span class="mpre">
</span><a href="#loc_165_1_165_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_6&#39;)"><span class="mpre">empty</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_165_1_165_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_6&#39;)"><span class="hl_vardecl"><span class="mpre">empty</span></span></a><span class="mpre"> = </span><a href="#loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> (\_ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ The length of a &#39;ShortByteString&#39;.</span></span><span class="mpre">
</span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="mpre">length</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
#if MIN_VERSION_base(4,3,0)
</span><a name="loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_fundecl"><span class="mpre">length</span></span></a><span class="mpre"> (</span><a href="#loc_109_24_109_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_24_109_27&#39;)"><span class="hl_conref"><span class="mpre">SBS</span></span></a><span class="mpre"> </span><a name="loc_170_13_170_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_13_170_18&#39;)"><span class="hl_vardecl"><span class="mpre">barr#</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> (</span><a href="GHC.Prim.html#loc_1985_1_1985_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1985_1_1985_17&#39;)"><span class="hl_varref"><span class="mpre">sizeofByteArray#</span></span></a><span class="mpre"> </span><a href="#loc_170_13_170_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_13_170_18&#39;)"><span class="hl_varref"><span class="mpre">barr#</span></span></a><span class="mpre">)
#else
</span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_fundecl"><span class="mpre">length</span></span></a><span class="mpre"> (</span><a href="#loc_109_24_109_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_24_109_27&#39;)"><span class="hl_conref"><span class="mpre">SBS</span></span></a><span class="mpre"> _ </span><a name="loc_172_15_172_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_172_15_172_18&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="#loc_172_15_172_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_172_15_172_18&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ Test whether a &#39;ShortByteString&#39; is empty.</span></span><span class="mpre">
</span><a href="#loc_177_1_177_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_5&#39;)"><span class="mpre">null</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_177_1_177_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_5&#39;)"><span class="hl_fundecl"><span class="mpre">null</span></span></a><span class="mpre"> </span><a name="loc_177_6_177_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_6_177_9&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_177_6_177_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_6_177_9&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(1)/ &#39;ShortByteString&#39; index (subscript) operator, starting from 0. </span></span><span class="mpre">
</span><a href="#loc_181_1_181_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_1_181_6&#39;)"><span class="mpre">index</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">
</span><a name="loc_181_1_181_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_1_181_6&#39;)"><span class="hl_fundecl"><span class="mpre">index</span></span></a><span class="mpre"> </span><a name="loc_181_7_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_7_181_10&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a name="loc_181_11_181_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_11_181_12&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">
  | </span><a href="#loc_181_11_181_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_11_181_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_181_11_181_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_11_181_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_181_7_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_7_181_10&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre"> = </span><a href="#loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="hl_varref"><span class="mpre">unsafeIndex</span></span></a><span class="mpre"> </span><a href="#loc_181_7_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_7_181_10&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a href="#loc_181_11_181_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_11_181_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                = </span><a href="#loc_189_1_189_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_1_189_11&#39;)"><span class="hl_varref"><span class="mpre">indexError</span></span></a><span class="mpre"> </span><a href="#loc_181_7_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_7_181_10&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a href="#loc_181_11_181_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_11_181_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">

</span><a href="#loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="mpre">unsafeIndex</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">
</span><a name="loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="hl_fundecl"><span class="mpre">unsafeIndex</span></span></a><span class="mpre"> </span><a name="loc_186_13_186_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_13_186_16&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> = </span><a href="#loc_441_1_441_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_441_1_441_16&#39;)"><span class="hl_varref"><span class="mpre">indexWord8Array</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_186_13_186_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_13_186_16&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">)

</span><a href="#loc_189_1_189_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_1_189_11&#39;)"><span class="mpre">indexError</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_189_1_189_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_1_189_11&#39;)"><span class="hl_fundecl"><span class="mpre">indexError</span></span></a><span class="mpre"> </span><a name="loc_189_12_189_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_12_189_15&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a name="loc_189_16_189_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_16_189_17&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> =
  </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Short.index: error in array index; &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_189_16_189_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_16_189_17&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
       </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; not in range [0..&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> (</span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_189_12_189_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_12_189_15&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;)&quot;</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Internal utils</span></span><span class="mpre">

</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="mpre">asBA</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre">
</span><a name="loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_fundecl"><span class="mpre">asBA</span></span></a><span class="mpre"> (</span><a href="#loc_109_24_109_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_24_109_27&#39;)"><span class="hl_conref"><span class="mpre">SBS</span></span></a><span class="mpre"> </span><a name="loc_198_11_198_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_11_198_14&#39;)"><span class="hl_vardecl"><span class="mpre">ba#</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_len</span></span><span class="mpre">) = </span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a href="#loc_198_11_198_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_11_198_14&#39;)"><span class="hl_varref"><span class="mpre">ba#</span></span></a><span class="mpre">

</span><a href="#loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="mpre">create</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; (forall </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">. </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="hl_fundecl"><span class="mpre">create</span></span></a><span class="mpre"> </span><a name="loc_201_8_201_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_8_201_11&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_201_12_201_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_12_201_16&#39;)"><span class="hl_vardecl"><span class="mpre">fill</span></span></a><span class="mpre"> =
    </span><span class="hl_varref"><span class="mpre">runST</span></span><span class="mpre"> (do
      </span><a name="loc_203_7_203_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_7_203_10&#39;)"><span class="hl_vardecl"><span class="mpre">mba</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_444_1_444_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_1_444_13&#39;)"><span class="hl_varref"><span class="mpre">newByteArray</span></span></a><span class="mpre"> </span><a href="#loc_201_8_201_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_8_201_11&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      </span><a href="#loc_201_12_201_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_12_201_16&#39;)"><span class="hl_varref"><span class="mpre">fill</span></span></a><span class="mpre"> </span><a href="#loc_203_7_203_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_7_203_10&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre">
      </span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_205_11_205_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_11_205_14&#39;)"><span class="hl_vardecl"><span class="mpre">ba#</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_456_1_456_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_1_456_22&#39;)"><span class="hl_varref"><span class="mpre">unsafeFreezeByteArray</span></span></a><span class="mpre"> </span><a href="#loc_203_7_203_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_7_203_10&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre">
      </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_109_24_109_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_24_109_27&#39;)"><span class="hl_conref"><span class="mpre">SBS</span></span></a><span class="mpre"> </span><a href="#loc_205_11_205_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_11_205_14&#39;)"><span class="hl_varref"><span class="mpre">ba#</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">LEN</span></span><span class="mpre">(</span><a href="#loc_201_8_201_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_8_201_11&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="mpre">create</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Conversion to and from ByteString</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/. Convert a &#39;ByteString&#39; into a &#39;ShortByteString&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This makes a copy, so does not retain the input string.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_217_1_217_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_8&#39;)"><span class="mpre">toShort</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_217_1_217_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_8&#39;)"><span class="hl_fundecl"><span class="mpre">toShort</span></span></a><span class="mpre"> !</span><a name="loc_217_10_217_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_10_217_12&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = </span><a href="GHC.IO.html#loc_182_1_182_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_182_1_182_23&#39;)"><span class="hl_varref"><span class="mpre">unsafeDupablePerformIO</span></span></a><span class="mpre"> (</span><a href="#loc_220_1_220_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_1_220_10&#39;)"><span class="hl_varref"><span class="mpre">toShortIO</span></span></a><span class="mpre"> </span><a href="#loc_217_10_217_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_10_217_12&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)

</span><a href="#loc_220_1_220_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_1_220_10&#39;)"><span class="mpre">toShortIO</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_220_1_220_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_1_220_10&#39;)"><span class="hl_fundecl"><span class="mpre">toShortIO</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a name="loc_220_15_220_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_15_220_19&#39;)"><span class="hl_vardecl"><span class="mpre">fptr</span></span></a><span class="mpre"> </span><a name="loc_220_20_220_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_20_220_23&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_220_24_220_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_24_220_27&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = do
    </span><a name="loc_221_5_221_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_5_221_8&#39;)"><span class="hl_vardecl"><span class="mpre">mba</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.html#loc_91_1_91_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_91_1_91_7&#39;)"><span class="hl_varref"><span class="mpre">stToIO</span></span></a><span class="mpre"> (</span><a href="#loc_444_1_444_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_1_444_13&#39;)"><span class="hl_varref"><span class="mpre">newByteArray</span></span></a><span class="mpre"> </span><a href="#loc_220_24_220_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_24_220_27&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
    let </span><a name="loc_222_9_222_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_9_222_12&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">unsafeForeignPtrToPtr</span></span><span class="mpre"> </span><a href="#loc_220_15_220_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_15_220_19&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre">
    </span><a href="GHC.IO.html#loc_91_1_91_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_91_1_91_7&#39;)"><span class="hl_varref"><span class="mpre">stToIO</span></span></a><span class="mpre"> (</span><a href="#loc_471_1_471_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_1_471_20&#39;)"><span class="hl_varref"><span class="mpre">copyAddrToByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_222_9_222_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_9_222_12&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_220_20_220_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_20_220_23&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) </span><a href="#loc_221_5_221_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_5_221_8&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_220_24_220_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_24_220_27&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">touchForeignPtr</span></span><span class="mpre"> </span><a href="#loc_220_15_220_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_15_220_19&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre">
    </span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_225_9_225_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_9_225_12&#39;)"><span class="hl_vardecl"><span class="mpre">ba#</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.html#loc_91_1_91_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_91_1_91_7&#39;)"><span class="hl_varref"><span class="mpre">stToIO</span></span></a><span class="mpre"> (</span><a href="#loc_456_1_456_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_1_456_22&#39;)"><span class="hl_varref"><span class="mpre">unsafeFreezeByteArray</span></span></a><span class="mpre"> </span><a href="#loc_221_5_221_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_5_221_8&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_109_24_109_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_24_109_27&#39;)"><span class="hl_conref"><span class="mpre">SBS</span></span></a><span class="mpre"> </span><a href="#loc_225_9_225_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_9_225_12&#39;)"><span class="hl_varref"><span class="mpre">ba#</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">LEN</span></span><span class="mpre">(</span><a href="#loc_220_24_220_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_24_220_27&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">))


</span><span class="hl_comment"><span class="mpre">-- | /O(n)/. Convert a &#39;ShortByteString&#39; into a &#39;ByteString&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_232_1_232_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_1_232_10&#39;)"><span class="mpre">fromShort</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_232_1_232_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_1_232_10&#39;)"><span class="hl_fundecl"><span class="mpre">fromShort</span></span></a><span class="mpre"> !</span><a name="loc_232_12_232_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_12_232_15&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> = </span><a href="GHC.IO.html#loc_182_1_182_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_182_1_182_23&#39;)"><span class="hl_varref"><span class="mpre">unsafeDupablePerformIO</span></span></a><span class="mpre"> (</span><a href="#loc_235_1_235_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_1_235_12&#39;)"><span class="hl_varref"><span class="mpre">fromShortIO</span></span></a><span class="mpre"> </span><a href="#loc_232_12_232_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_12_232_15&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">)

</span><a href="#loc_235_1_235_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_1_235_12&#39;)"><span class="mpre">fromShortIO</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_235_1_235_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_1_235_12&#39;)"><span class="hl_fundecl"><span class="mpre">fromShortIO</span></span></a><span class="mpre"> </span><a name="loc_235_13_235_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_16&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> = do
#if MIN_VERSION_base(4,6,0)
    let </span><a name="loc_237_9_237_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_9_237_12&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_235_13_235_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_16&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">
    </span><a name="loc_238_5_238_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_5_238_8&#39;)"><span class="hl_specname"><span class="mpre">mba</span></span></a><span class="mpre">@(</span><a href="#loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_conref"><span class="mpre">MBA#</span></span></a><span class="mpre"> </span><a name="loc_238_15_238_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_15_238_19&#39;)"><span class="hl_vardecl"><span class="mpre">mba#</span></span></a><span class="mpre">) &lt;- </span><a href="GHC.IO.html#loc_91_1_91_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_91_1_91_7&#39;)"><span class="hl_varref"><span class="mpre">stToIO</span></span></a><span class="mpre"> (</span><a href="#loc_450_1_450_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_450_1_450_19&#39;)"><span class="hl_varref"><span class="mpre">newPinnedByteArray</span></span></a><span class="mpre"> </span><a href="#loc_237_9_237_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_9_237_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
    </span><a href="GHC.IO.html#loc_91_1_91_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_91_1_91_7&#39;)"><span class="hl_varref"><span class="mpre">stToIO</span></span></a><span class="mpre"> (</span><a href="#loc_481_1_481_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_1_481_14&#39;)"><span class="hl_varref"><span class="mpre">copyByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_235_13_235_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_16&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_238_5_238_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_5_238_8&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_237_9_237_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_9_237_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
    let </span><a name="loc_240_9_240_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_240_9_240_11&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="mpre"> = </span><a href="GHC.ForeignPtr.html#loc_73_21_73_31" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_21_73_31&#39;)"><span class="hl_conref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> (</span><a href="GHC.Prim.html#loc_1972_1_1972_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1972_1_1972_19&#39;)"><span class="hl_varref"><span class="mpre">byteArrayContents#</span></span></a><span class="mpre"> (</span><a href="GHC.Prim.html#loc_2912_1_2912_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2912_1_2912_14&#39;)"><span class="hl_varref"><span class="mpre">unsafeCoerce#</span></span></a><span class="mpre"> </span><a href="#loc_238_15_238_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_15_238_19&#39;)"><span class="hl_varref"><span class="mpre">mba#</span></span></a><span class="mpre">))
                        (</span><a href="GHC.ForeignPtr.html#loc_93_5_93_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_93_5_93_13&#39;)"><span class="hl_conref"><span class="mpre">PlainPtr</span></span></a><span class="mpre"> </span><a href="#loc_238_15_238_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_15_238_19&#39;)"><span class="hl_varref"><span class="mpre">mba#</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a href="#loc_240_9_240_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_240_9_240_11&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_237_9_237_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_9_237_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
#else
    </span><span class="hl_comment"><span class="mpre">-- Before base 4.6 ForeignPtrContents is not exported from GHC.ForeignPtr</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- so we cannot get direct access to the mbarr#</span></span><span class="mpre">
    let </span><a name="loc_246_9_246_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_9_246_12&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_235_13_235_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_16&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">
    </span><a name="loc_247_5_247_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_5_247_9&#39;)"><span class="hl_vardecl"><span class="mpre">fptr</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.ForeignPtr.html#loc_227_1_227_27" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_227_1_227_27&#39;)"><span class="hl_varref"><span class="mpre">mallocPlainForeignPtrBytes</span></span></a><span class="mpre"> </span><a href="#loc_246_9_246_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_9_246_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
    let </span><a name="loc_248_9_248_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_9_248_12&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">unsafeForeignPtrToPtr</span></span><span class="mpre"> </span><a href="#loc_247_5_247_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_5_247_9&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre">
    </span><a href="GHC.IO.html#loc_91_1_91_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_91_1_91_7&#39;)"><span class="hl_varref"><span class="mpre">stToIO</span></span></a><span class="mpre"> (</span><a href="#loc_476_1_476_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_20&#39;)"><span class="hl_varref"><span class="mpre">copyByteArrayToAddr</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_235_13_235_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_16&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_248_9_248_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_9_248_12&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><a href="#loc_246_9_246_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_9_246_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">touchForeignPtr</span></span><span class="mpre"> </span><a href="#loc_247_5_247_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_5_247_9&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a href="#loc_247_5_247_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_5_247_9&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_246_9_246_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_9_246_12&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
#endif


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Packing and unpacking from lists</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/. Convert a list into a &#39;ShortByteString&#39;</span></span><span class="mpre">
</span><a href="#loc_260_1_260_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_1_260_5&#39;)"><span class="mpre">pack</span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">] -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_260_1_260_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_1_260_5&#39;)"><span class="hl_vardecl"><span class="mpre">pack</span></span></a><span class="mpre"> = </span><a href="#loc_270_1_270_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_270_1_270_10&#39;)"><span class="hl_varref"><span class="mpre">packBytes</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /O(n)/. Convert a &#39;ShortByteString&#39; into a list.</span></span><span class="mpre">
</span><a href="#loc_264_1_264_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_1_264_7&#39;)"><span class="mpre">unpack</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">]
</span><a name="loc_264_1_264_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_1_264_7&#39;)"><span class="hl_vardecl"><span class="mpre">unpack</span></span></a><span class="mpre"> = </span><a href="#loc_307_1_307_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_1_307_12&#39;)"><span class="hl_varref"><span class="mpre">unpackBytes</span></span></a><span class="mpre">

</span><a href="#loc_267_1_267_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_10&#39;)"><span class="mpre">packChars</span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">] -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_267_1_267_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_10&#39;)"><span class="hl_fundecl"><span class="mpre">packChars</span></span></a><span class="mpre"> </span><a name="loc_267_11_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_11_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre"> = </span><a href="#loc_273_1_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_1_273_13&#39;)"><span class="hl_varref"><span class="mpre">packLenChars</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">List.length</span></span><span class="mpre"> </span><a href="#loc_267_11_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_11_267_13&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">) </span><a href="#loc_267_11_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_11_267_13&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">

</span><a href="#loc_270_1_270_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_270_1_270_10&#39;)"><span class="mpre">packBytes</span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">] -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_270_1_270_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_270_1_270_10&#39;)"><span class="hl_fundecl"><span class="mpre">packBytes</span></span></a><span class="mpre"> </span><a name="loc_270_11_270_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_270_11_270_13&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre"> = </span><a href="#loc_283_1_283_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_1_283_13&#39;)"><span class="hl_varref"><span class="mpre">packLenBytes</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">List.length</span></span><span class="mpre"> </span><a href="#loc_270_11_270_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_270_11_270_13&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">) </span><a href="#loc_270_11_270_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_270_11_270_13&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">

</span><a href="#loc_273_1_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_1_273_13&#39;)"><span class="mpre">packLenChars</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">] -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_273_1_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_1_273_13&#39;)"><span class="hl_fundecl"><span class="mpre">packLenChars</span></span></a><span class="mpre"> </span><a name="loc_273_14_273_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_14_273_17&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_273_18_273_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_18_273_21&#39;)"><span class="hl_vardecl"><span class="mpre">cs0</span></span></a><span class="mpre"> =
    </span><a href="#loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><a href="#loc_273_14_273_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_14_273_17&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> (\</span><a name="loc_274_18_274_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_18_274_21&#39;)"><span class="hl_vardecl"><span class="mpre">mba</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_277_5_277_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_5_277_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_274_18_274_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_18_274_21&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_273_18_273_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_18_273_21&#39;)"><span class="hl_varref"><span class="mpre">cs0</span></span></a><span class="mpre">)
  where
    </span><a href="#loc_277_5_277_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_5_277_7&#39;)"><span class="mpre">go</span></a><span class="mpre"> :: </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
    </span><a name="loc_277_5_277_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_5_277_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !_   !_ []     = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
    </span><a href="#loc_277_5_277_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_5_277_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_278_9_278_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_9_278_12&#39;)"><span class="hl_vardecl"><span class="mpre">mba</span></span></a><span class="mpre"> !</span><a name="loc_278_14_278_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_14_278_15&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> (</span><a name="loc_278_17_278_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_17_278_18&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_278_19_278_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_19_278_21&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = do
      </span><a href="#loc_461_1_461_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_1_461_15&#39;)"><span class="hl_varref"><span class="mpre">writeCharArray</span></span></a><span class="mpre"> </span><a href="#loc_278_9_278_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_9_278_12&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><a href="#loc_278_14_278_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_14_278_15&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_278_17_278_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_17_278_18&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">
      </span><a href="#loc_277_5_277_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_5_277_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_278_9_278_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_9_278_12&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> (</span><a href="#loc_278_14_278_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_14_278_15&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_278_19_278_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_19_278_21&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">

</span><a href="#loc_283_1_283_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_1_283_13&#39;)"><span class="mpre">packLenBytes</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">] -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_283_1_283_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_1_283_13&#39;)"><span class="hl_fundecl"><span class="mpre">packLenBytes</span></span></a><span class="mpre"> </span><a name="loc_283_14_283_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_14_283_17&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_283_18_283_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_18_283_21&#39;)"><span class="hl_vardecl"><span class="mpre">ws0</span></span></a><span class="mpre"> =
    </span><a href="#loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><a href="#loc_283_14_283_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_14_283_17&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> (\</span><a name="loc_284_18_284_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_284_18_284_21&#39;)"><span class="hl_vardecl"><span class="mpre">mba</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_287_5_287_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_284_18_284_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_284_18_284_21&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_283_18_283_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_18_283_21&#39;)"><span class="hl_varref"><span class="mpre">ws0</span></span></a><span class="mpre">)
  where
    </span><a href="#loc_287_5_287_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_7&#39;)"><span class="mpre">go</span></a><span class="mpre"> :: </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
    </span><a name="loc_287_5_287_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !_   !_ []     = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
    </span><a href="#loc_287_5_287_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_288_9_288_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_9_288_12&#39;)"><span class="hl_vardecl"><span class="mpre">mba</span></span></a><span class="mpre"> !</span><a name="loc_288_14_288_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_14_288_15&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> (</span><a name="loc_288_17_288_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_17_288_18&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_288_19_288_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_19_288_21&#39;)"><span class="hl_vardecl"><span class="mpre">ws</span></span></a><span class="mpre">) = do
      </span><a href="#loc_466_1_466_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_1_466_16&#39;)"><span class="hl_varref"><span class="mpre">writeWord8Array</span></span></a><span class="mpre"> </span><a href="#loc_288_9_288_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_9_288_12&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><a href="#loc_288_14_288_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_14_288_15&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_288_17_288_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_17_288_18&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
      </span><a href="#loc_287_5_287_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_288_9_288_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_9_288_12&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> (</span><a href="#loc_288_14_288_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_14_288_15&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_288_19_288_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_19_288_21&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Unpacking bytestrings into lists effeciently is a tradeoff: on the one hand</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- we would like to write a tight loop that just blats the list into memory, on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the other hand we want it to be unpacked lazily so we don&#39;t end up with a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- massive list data structure in memory.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Our strategy is to combine both: we will unpack lazily in reasonable sized</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- chunks, where each chunk is unpacked strictly.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- unpackChars does the lazy loop, while unpackAppendBytes and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- unpackAppendChars do the chunks strictly.</span></span><span class="mpre">

</span><a href="#loc_304_1_304_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_1_304_12&#39;)"><span class="mpre">unpackChars</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">]
</span><a name="loc_304_1_304_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_1_304_12&#39;)"><span class="hl_fundecl"><span class="mpre">unpackChars</span></span></a><span class="mpre"> </span><a name="loc_304_13_304_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_13_304_15&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = </span><a href="#loc_314_1_314_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_1_314_22&#39;)"><span class="hl_varref"><span class="mpre">unpackAppendCharsLazy</span></span></a><span class="mpre"> </span><a href="#loc_304_13_304_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_13_304_15&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> []

</span><a href="#loc_307_1_307_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_1_307_12&#39;)"><span class="mpre">unpackBytes</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">]
</span><a name="loc_307_1_307_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_1_307_12&#39;)"><span class="hl_fundecl"><span class="mpre">unpackBytes</span></span></a><span class="mpre"> </span><a name="loc_307_13_307_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_13_307_15&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = </span><a href="#loc_325_1_325_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_1_325_22&#39;)"><span class="hl_varref"><span class="mpre">unpackAppendBytesLazy</span></span></a><span class="mpre"> </span><a href="#loc_307_13_307_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_13_307_15&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> []

</span><span class="hl_comment"><span class="mpre">-- Why 100 bytes you ask? Because on a 64bit machine the list we allocate</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- takes just shy of 4k which seems like a reasonable amount.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (5 words per list element, 8 bytes per word, 100 elements = 4000 bytes)</span></span><span class="mpre">

</span><a href="#loc_314_1_314_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_1_314_22&#39;)"><span class="mpre">unpackAppendCharsLazy</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">] -&gt; [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">]
</span><a name="loc_314_1_314_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_1_314_22&#39;)"><span class="hl_fundecl"><span class="mpre">unpackAppendCharsLazy</span></span></a><span class="mpre"> </span><a name="loc_314_23_314_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_23_314_26&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a name="loc_314_27_314_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_27_314_30&#39;)"><span class="hl_vardecl"><span class="mpre">cs0</span></span></a><span class="mpre"> =
    </span><a href="#loc_319_5_319_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_5_319_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> (</span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_314_23_314_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_23_314_26&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">) </span><a href="#loc_314_27_314_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_27_314_30&#39;)"><span class="hl_varref"><span class="mpre">cs0</span></span></a><span class="mpre">
  where
    </span><a name="loc_317_5_317_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_5_317_7&#39;)"><span class="hl_vardecl"><span class="mpre">sz</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">100</span></span><span class="mpre">

    </span><a name="loc_319_5_319_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_5_319_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_319_8_319_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_8_319_11&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_319_12_319_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_12_319_15&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_319_16_319_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_16_319_18&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">
      | </span><a href="#loc_319_12_319_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_12_319_15&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><a href="#loc_317_5_317_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_5_317_7&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre"> = </span><a href="#loc_341_1_341_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_24&#39;)"><span class="hl_varref"><span class="mpre">unpackAppendCharsStrict</span></span></a><span class="mpre"> </span><a href="#loc_314_23_314_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_23_314_26&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a href="#loc_319_8_319_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_8_319_11&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_319_12_319_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_12_319_15&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><a href="#loc_319_16_319_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_16_319_18&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_341_1_341_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_24&#39;)"><span class="hl_varref"><span class="mpre">unpackAppendCharsStrict</span></span></a><span class="mpre"> </span><a href="#loc_314_23_314_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_23_314_26&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a href="#loc_319_8_319_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_8_319_11&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_317_5_317_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_5_317_7&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre">  </span><a href="#loc_322_29_322_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_29_322_38&#39;)"><span class="hl_varref"><span class="mpre">remainder</span></span></a><span class="mpre">
                      where </span><a name="loc_322_29_322_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_29_322_38&#39;)"><span class="hl_vardecl"><span class="mpre">remainder</span></span></a><span class="mpre"> = </span><a href="#loc_319_5_319_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_5_319_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_319_8_319_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_8_319_11&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_317_5_317_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_5_317_7&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre">) (</span><a href="#loc_319_12_319_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_12_319_15&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_317_5_317_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_5_317_7&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre">) </span><a href="#loc_319_16_319_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_16_319_18&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">

</span><a href="#loc_325_1_325_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_1_325_22&#39;)"><span class="mpre">unpackAppendBytesLazy</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">] -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">]
</span><a name="loc_325_1_325_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_1_325_22&#39;)"><span class="hl_fundecl"><span class="mpre">unpackAppendBytesLazy</span></span></a><span class="mpre"> </span><a name="loc_325_23_325_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_23_325_26&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a name="loc_325_27_325_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_27_325_30&#39;)"><span class="hl_vardecl"><span class="mpre">ws0</span></span></a><span class="mpre"> =
    </span><a href="#loc_330_5_330_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_5_330_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> (</span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_325_23_325_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_23_325_26&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">) </span><a href="#loc_325_27_325_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_27_325_30&#39;)"><span class="hl_varref"><span class="mpre">ws0</span></span></a><span class="mpre">
  where
    </span><a name="loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_vardecl"><span class="mpre">sz</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">100</span></span><span class="mpre">

    </span><a name="loc_330_5_330_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_5_330_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_330_8_330_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_8_330_11&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_330_12_330_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_12_330_15&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_330_16_330_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_16_330_18&#39;)"><span class="hl_vardecl"><span class="mpre">ws</span></span></a><span class="mpre">
      | </span><a href="#loc_330_12_330_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_12_330_15&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><a href="#loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre"> = </span><a href="#loc_350_1_350_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_1_350_24&#39;)"><span class="hl_varref"><span class="mpre">unpackAppendBytesStrict</span></span></a><span class="mpre"> </span><a href="#loc_325_23_325_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_23_325_26&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a href="#loc_330_8_330_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_8_330_11&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_330_12_330_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_12_330_15&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><a href="#loc_330_16_330_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_16_330_18&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_350_1_350_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_1_350_24&#39;)"><span class="hl_varref"><span class="mpre">unpackAppendBytesStrict</span></span></a><span class="mpre"> </span><a href="#loc_325_23_325_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_23_325_26&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a href="#loc_330_8_330_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_8_330_11&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre">  </span><a href="#loc_333_29_333_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_333_29_333_38&#39;)"><span class="hl_varref"><span class="mpre">remainder</span></span></a><span class="mpre">
                      where </span><a name="loc_333_29_333_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_333_29_333_38&#39;)"><span class="hl_vardecl"><span class="mpre">remainder</span></span></a><span class="mpre"> = </span><a href="#loc_330_5_330_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_5_330_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_330_8_330_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_8_330_11&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre">) (</span><a href="#loc_330_12_330_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_12_330_15&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_328_5_328_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_5_328_7&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre">) </span><a href="#loc_330_16_330_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_16_330_18&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- For these unpack functions, since we&#39;re unpacking the whole list strictly we</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- build up the result list in an accumulator. This means we have to build up</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the list starting at the end. So our traversal starts at the end of the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- buffer and loops down until we hit the sentinal:</span></span><span class="mpre">

</span><a href="#loc_341_1_341_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_24&#39;)"><span class="mpre">unpackAppendCharsStrict</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">] -&gt; [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">]
</span><a name="loc_341_1_341_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_24&#39;)"><span class="hl_fundecl"><span class="mpre">unpackAppendCharsStrict</span></span></a><span class="mpre"> !</span><a name="loc_341_26_341_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_26_341_29&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a name="loc_341_30_341_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_30_341_33&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_341_34_341_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_34_341_37&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_341_38_341_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_38_341_40&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre"> =
    </span><a href="#loc_344_5_344_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_5_344_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_341_30_341_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_30_341_33&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><a href="#loc_341_30_341_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_30_341_33&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_341_34_341_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_34_341_37&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">) </span><a href="#loc_341_38_341_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_38_341_40&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
  where
    </span><a name="loc_344_5_344_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_5_344_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_344_9_344_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_9_344_17&#39;)"><span class="hl_vardecl"><span class="mpre">sentinal</span></span></a><span class="mpre"> !</span><a name="loc_344_19_344_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_19_344_20&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_344_22_344_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_22_344_25&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre">
      | </span><a href="#loc_344_19_344_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_19_344_20&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_344_9_344_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_9_344_17&#39;)"><span class="hl_varref"><span class="mpre">sentinal</span></span></a><span class="mpre"> = </span><a href="#loc_344_22_344_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_22_344_25&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">     = let !</span><a name="loc_346_30_346_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_30_346_31&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = </span><a href="#loc_438_1_438_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_1_438_15&#39;)"><span class="hl_varref"><span class="mpre">indexCharArray</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_341_26_341_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_26_341_29&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">) </span><a href="#loc_344_19_344_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_19_344_20&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
                        in </span><a href="#loc_344_5_344_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_5_344_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_344_9_344_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_9_344_17&#39;)"><span class="hl_varref"><span class="mpre">sentinal</span></span></a><span class="mpre"> (</span><a href="#loc_344_19_344_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_19_344_20&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><a href="#loc_346_30_346_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_30_346_31&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_344_22_344_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_22_344_25&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre">)

</span><a href="#loc_350_1_350_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_1_350_24&#39;)"><span class="mpre">unpackAppendBytesStrict</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">] -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">]
</span><a name="loc_350_1_350_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_1_350_24&#39;)"><span class="hl_fundecl"><span class="mpre">unpackAppendBytesStrict</span></span></a><span class="mpre"> !</span><a name="loc_350_26_350_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_26_350_29&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="mpre"> </span><a name="loc_350_30_350_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_30_350_33&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_350_34_350_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_34_350_37&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_350_38_350_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_38_350_40&#39;)"><span class="hl_vardecl"><span class="mpre">ws</span></span></a><span class="mpre"> =
    </span><a href="#loc_353_5_353_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_5_353_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_350_30_350_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_30_350_33&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><a href="#loc_350_30_350_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_30_350_33&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_350_34_350_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_34_350_37&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">) </span><a href="#loc_350_38_350_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_38_350_40&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">
  where
    </span><a name="loc_353_5_353_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_5_353_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_353_9_353_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_9_353_17&#39;)"><span class="hl_vardecl"><span class="mpre">sentinal</span></span></a><span class="mpre"> !</span><a name="loc_353_19_353_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_19_353_20&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_353_22_353_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_22_353_25&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre">
      | </span><a href="#loc_353_19_353_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_19_353_20&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_353_9_353_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_9_353_17&#39;)"><span class="hl_varref"><span class="mpre">sentinal</span></span></a><span class="mpre"> = </span><a href="#loc_353_22_353_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_22_353_25&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">     = let !</span><a name="loc_355_30_355_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_355_30_355_31&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> = </span><a href="#loc_441_1_441_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_441_1_441_16&#39;)"><span class="hl_varref"><span class="mpre">indexWord8Array</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_350_26_350_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_26_350_29&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">) </span><a href="#loc_353_19_353_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_19_353_20&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
                         in </span><a href="#loc_353_5_353_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_5_353_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_353_9_353_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_9_353_17&#39;)"><span class="hl_varref"><span class="mpre">sentinal</span></span></a><span class="mpre"> (</span><a href="#loc_353_19_353_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_19_353_20&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><a href="#loc_355_30_355_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_355_30_355_31&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_353_22_353_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_22_353_25&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Eq and Ord implementations</span></span><span class="mpre">

</span><a href="#loc_363_1_363_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_1_363_12&#39;)"><span class="mpre">equateBytes</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_363_1_363_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_1_363_12&#39;)"><span class="hl_fundecl"><span class="mpre">equateBytes</span></span></a><span class="mpre"> </span><a name="loc_363_13_363_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_13_363_17&#39;)"><span class="hl_vardecl"><span class="mpre">sbs1</span></span></a><span class="mpre"> </span><a name="loc_363_18_363_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_18_363_22&#39;)"><span class="hl_vardecl"><span class="mpre">sbs2</span></span></a><span class="mpre"> =
    let !</span><a name="loc_364_10_364_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_364_10_364_14&#39;)"><span class="hl_vardecl"><span class="mpre">len1</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_363_13_363_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_13_363_17&#39;)"><span class="hl_varref"><span class="mpre">sbs1</span></span></a><span class="mpre">
        !</span><a name="loc_365_10_365_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_10_365_14&#39;)"><span class="hl_vardecl"><span class="mpre">len2</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_363_18_363_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_18_363_22&#39;)"><span class="hl_varref"><span class="mpre">sbs2</span></span></a><span class="mpre">
     in </span><a href="#loc_364_10_364_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_364_10_364_14&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_365_10_365_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_10_365_14&#39;)"><span class="hl_varref"><span class="mpre">len2</span></span></a><span class="mpre">
     </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_592_1_592_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_592_1_592_16&#39;)"><span class="hl_varref"><span class="mpre">inlinePerformIO</span></span></a><span class="mpre"> (</span><a href="#loc_490_1_490_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_1_490_17&#39;)"><span class="hl_varref"><span class="mpre">memcmp_ByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_363_13_363_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_13_363_17&#39;)"><span class="hl_varref"><span class="mpre">sbs1</span></span></a><span class="mpre">) (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_363_18_363_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_18_363_22&#39;)"><span class="hl_varref"><span class="mpre">sbs2</span></span></a><span class="mpre">) </span><a href="#loc_364_10_364_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_364_10_364_14&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre">)

</span><a href="#loc_370_1_370_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_13&#39;)"><span class="mpre">compareBytes</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ordering</span></span><span class="mpre">
</span><a name="loc_370_1_370_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_13&#39;)"><span class="hl_fundecl"><span class="mpre">compareBytes</span></span></a><span class="mpre"> </span><a name="loc_370_14_370_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_14_370_18&#39;)"><span class="hl_vardecl"><span class="mpre">sbs1</span></span></a><span class="mpre"> </span><a name="loc_370_19_370_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_19_370_23&#39;)"><span class="hl_vardecl"><span class="mpre">sbs2</span></span></a><span class="mpre"> =
    let !</span><a name="loc_371_10_371_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_10_371_14&#39;)"><span class="hl_vardecl"><span class="mpre">len1</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_370_14_370_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_14_370_18&#39;)"><span class="hl_varref"><span class="mpre">sbs1</span></span></a><span class="mpre">
        !</span><a name="loc_372_10_372_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_10_372_14&#39;)"><span class="hl_vardecl"><span class="mpre">len2</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_370_19_370_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_19_370_23&#39;)"><span class="hl_varref"><span class="mpre">sbs2</span></span></a><span class="mpre">
        !</span><a name="loc_373_10_373_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_10_373_13&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">  = </span><span class="hl_varref"><span class="mpre">min</span></span><span class="mpre"> </span><a href="#loc_371_10_371_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_10_371_14&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> </span><a href="#loc_372_10_372_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_10_372_14&#39;)"><span class="hl_varref"><span class="mpre">len2</span></span></a><span class="mpre">
     in case </span><a href="Data.ByteString.Internal.html#loc_592_1_592_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_592_1_592_16&#39;)"><span class="hl_varref"><span class="mpre">inlinePerformIO</span></span></a><span class="mpre"> (</span><a href="#loc_490_1_490_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_1_490_17&#39;)"><span class="hl_varref"><span class="mpre">memcmp_ByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_370_14_370_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_14_370_18&#39;)"><span class="hl_varref"><span class="mpre">sbs1</span></span></a><span class="mpre">) (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_370_19_370_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_19_370_23&#39;)"><span class="hl_varref"><span class="mpre">sbs2</span></span></a><span class="mpre">) </span><a href="#loc_373_10_373_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_10_373_13&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">) of
          </span><a name="loc_375_11_375_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_11_375_12&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> | </span><a href="#loc_375_11_375_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_11_375_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    -&gt; </span><span class="hl_conref"><span class="mpre">LT</span></span><span class="mpre">
            | </span><a href="#loc_375_11_375_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_11_375_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    -&gt; </span><span class="hl_conref"><span class="mpre">GT</span></span><span class="mpre">
            | </span><a href="#loc_372_10_372_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_10_372_14&#39;)"><span class="hl_varref"><span class="mpre">len2</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><a href="#loc_371_10_371_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_10_371_14&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">LT</span></span><span class="mpre">
            | </span><a href="#loc_372_10_372_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_10_372_14&#39;)"><span class="hl_varref"><span class="mpre">len2</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_371_10_371_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_371_10_371_14&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">GT</span></span><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">   -&gt; </span><span class="hl_conref"><span class="mpre">EQ</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Appending and concatenation</span></span><span class="mpre">

</span><a href="#loc_386_1_386_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_1_386_7&#39;)"><span class="mpre">append</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_386_1_386_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_1_386_7&#39;)"><span class="hl_fundecl"><span class="mpre">append</span></span></a><span class="mpre"> </span><a name="loc_386_8_386_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_12&#39;)"><span class="hl_vardecl"><span class="mpre">src1</span></span></a><span class="mpre"> </span><a name="loc_386_13_386_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_13_386_17&#39;)"><span class="hl_vardecl"><span class="mpre">src2</span></span></a><span class="mpre"> =
  let !</span><a name="loc_387_8_387_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_8_387_12&#39;)"><span class="hl_vardecl"><span class="mpre">len1</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_386_8_386_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_12&#39;)"><span class="hl_varref"><span class="mpre">src1</span></span></a><span class="mpre">
      !</span><a name="loc_388_8_388_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_8_388_12&#39;)"><span class="hl_vardecl"><span class="mpre">len2</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_386_13_386_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_13_386_17&#39;)"><span class="hl_varref"><span class="mpre">src2</span></span></a><span class="mpre">
   in </span><a href="#loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> (</span><a href="#loc_387_8_387_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_8_387_12&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_388_8_388_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_8_388_12&#39;)"><span class="hl_varref"><span class="mpre">len2</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_389_31_389_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_31_389_34&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> -&gt; do
        </span><a href="#loc_481_1_481_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_1_481_14&#39;)"><span class="hl_varref"><span class="mpre">copyByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_386_8_386_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_12&#39;)"><span class="hl_varref"><span class="mpre">src1</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_389_31_389_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_31_389_34&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    </span><a href="#loc_387_8_387_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_8_387_12&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre">
        </span><a href="#loc_481_1_481_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_1_481_14&#39;)"><span class="hl_varref"><span class="mpre">copyByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_386_13_386_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_13_386_17&#39;)"><span class="hl_varref"><span class="mpre">src2</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_389_31_389_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_31_389_34&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a href="#loc_387_8_387_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_8_387_12&#39;)"><span class="hl_varref"><span class="mpre">len1</span></span></a><span class="mpre"> </span><a href="#loc_388_8_388_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_8_388_12&#39;)"><span class="hl_varref"><span class="mpre">len2</span></span></a><span class="mpre">

</span><a href="#loc_394_1_394_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_1_394_7&#39;)"><span class="mpre">concat</span></a><span class="mpre"> :: [</span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">] -&gt; </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_394_1_394_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_1_394_7&#39;)"><span class="hl_fundecl"><span class="mpre">concat</span></span></a><span class="mpre"> </span><a name="loc_394_8_394_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_8_394_12&#39;)"><span class="hl_vardecl"><span class="mpre">sbss</span></span></a><span class="mpre"> =
    </span><a href="#loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> (</span><a href="#loc_397_5_397_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_5_397_13&#39;)"><span class="hl_varref"><span class="mpre">totalLen</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_394_8_394_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_8_394_12&#39;)"><span class="hl_varref"><span class="mpre">sbss</span></span></a><span class="mpre">) (\</span><a name="loc_395_32_395_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_395_32_395_35&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_401_5_401_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_5_401_9&#39;)"><span class="hl_varref"><span class="mpre">copy</span></span></a><span class="mpre"> </span><a href="#loc_395_32_395_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_395_32_395_35&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_394_8_394_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_8_394_12&#39;)"><span class="hl_varref"><span class="mpre">sbss</span></span></a><span class="mpre">)
  where
    </span><a name="loc_397_5_397_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_5_397_13&#39;)"><span class="hl_fundecl"><span class="mpre">totalLen</span></span></a><span class="mpre"> !</span><a name="loc_397_15_397_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_15_397_18&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> []          = </span><a href="#loc_397_15_397_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_15_397_18&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre">
    </span><a href="#loc_397_5_397_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_5_397_13&#39;)"><span class="hl_fundecl"><span class="mpre">totalLen</span></span></a><span class="mpre"> !</span><a name="loc_398_15_398_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_15_398_18&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> (</span><a name="loc_398_20_398_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_20_398_23&#39;)"><span class="hl_vardecl"><span class="mpre">sbs</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a name="loc_398_25_398_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_25_398_29&#39;)"><span class="hl_vardecl"><span class="mpre">sbss</span></span></a><span class="mpre">) = </span><a href="#loc_397_5_397_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_5_397_13&#39;)"><span class="hl_varref"><span class="mpre">totalLen</span></span></a><span class="mpre"> (</span><a href="#loc_398_15_398_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_15_398_18&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_398_20_398_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_20_398_23&#39;)"><span class="hl_varref"><span class="mpre">sbs</span></span></a><span class="mpre">) </span><a href="#loc_398_25_398_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_25_398_29&#39;)"><span class="hl_varref"><span class="mpre">sbss</span></span></a><span class="mpre">

    </span><a href="#loc_401_5_401_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_5_401_9&#39;)"><span class="mpre">copy</span></a><span class="mpre"> :: </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; [</span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
    </span><a name="loc_401_5_401_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_5_401_9&#39;)"><span class="hl_fundecl"><span class="mpre">copy</span></span></a><span class="mpre"> !_   !_   []                           = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
    </span><a href="#loc_401_5_401_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_5_401_9&#39;)"><span class="hl_fundecl"><span class="mpre">copy</span></span></a><span class="mpre"> !</span><a name="loc_402_11_402_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_11_402_14&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> !</span><a name="loc_402_16_402_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_16_402_19&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> (</span><a name="loc_402_21_402_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_21_402_24&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a name="loc_402_27_402_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_27_402_31&#39;)"><span class="hl_vardecl"><span class="mpre">sbss</span></span></a><span class="mpre">) = do
      let !</span><a name="loc_403_12_403_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_403_12_403_15&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><a href="#loc_170_1_170_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_7&#39;)"><span class="hl_varref"><span class="mpre">length</span></span></a><span class="mpre"> </span><a href="#loc_402_21_402_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_21_402_24&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">
      </span><a href="#loc_481_1_481_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_1_481_14&#39;)"><span class="hl_varref"><span class="mpre">copyByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_402_21_402_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_21_402_24&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_402_11_402_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_11_402_14&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a href="#loc_402_16_402_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_16_402_19&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_403_12_403_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_403_12_403_15&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      </span><a href="#loc_401_5_401_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_5_401_9&#39;)"><span class="hl_varref"><span class="mpre">copy</span></span></a><span class="mpre"> </span><a href="#loc_402_11_402_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_11_402_14&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> (</span><a href="#loc_402_16_402_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_16_402_19&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_403_12_403_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_403_12_403_15&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">) </span><a href="#loc_402_27_402_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_402_27_402_31&#39;)"><span class="hl_varref"><span class="mpre">sbss</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Exported low level operations</span></span><span class="mpre">

</span><a href="#loc_416_1_416_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_1_416_10&#39;)"><span class="mpre">copyToPtr</span></a><span class="mpre"> :: </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^ source data</span></span><span class="mpre">
          -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">              </span><span class="hl_comment"><span class="mpre">-- ^ offset into source</span></span><span class="mpre">
          -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">            </span><span class="hl_comment"><span class="mpre">-- ^ destination</span></span><span class="mpre">
          -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">              </span><span class="hl_comment"><span class="mpre">-- ^ number of bytes to copy</span></span><span class="mpre">
          -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_416_1_416_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_1_416_10&#39;)"><span class="hl_fundecl"><span class="mpre">copyToPtr</span></span></a><span class="mpre"> </span><a name="loc_416_11_416_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_11_416_14&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_416_15_416_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_15_416_18&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_416_19_416_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_19_416_22&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a name="loc_416_23_416_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_23_416_26&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> =
    </span><a href="GHC.IO.html#loc_91_1_91_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_91_1_91_7&#39;)"><span class="hl_varref"><span class="mpre">stToIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
      </span><a href="#loc_476_1_476_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_20&#39;)"><span class="hl_varref"><span class="mpre">copyByteArrayToAddr</span></span></a><span class="mpre"> (</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_varref"><span class="mpre">asBA</span></span></a><span class="mpre"> </span><a href="#loc_416_11_416_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_11_416_14&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre">) </span><a href="#loc_416_15_416_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_15_416_18&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><a href="#loc_416_19_416_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_19_416_22&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a href="#loc_416_23_416_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_23_416_26&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">

</span><a href="#loc_423_1_423_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_1_423_14&#39;)"><span class="mpre">createFromPtr</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">   </span><span class="hl_comment"><span class="mpre">-- ^ source data</span></span><span class="mpre">
              -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">     </span><span class="hl_comment"><span class="mpre">-- ^ number of bytes to copy</span></span><span class="mpre">
              -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_109_6_109_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_6_109_21&#39;)"><span class="hl_tyconref"><span class="mpre">ShortByteString</span></span></a><span class="mpre">
</span><a name="loc_423_1_423_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_1_423_14&#39;)"><span class="hl_fundecl"><span class="mpre">createFromPtr</span></span></a><span class="mpre"> !</span><a name="loc_423_16_423_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_16_423_19&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><a name="loc_423_20_423_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_20_423_23&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> =
    </span><a href="GHC.IO.html#loc_91_1_91_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_91_1_91_7&#39;)"><span class="hl_varref"><span class="mpre">stToIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
      </span><a name="loc_425_7_425_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_7_425_10&#39;)"><span class="hl_vardecl"><span class="mpre">mba</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_444_1_444_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_1_444_13&#39;)"><span class="hl_varref"><span class="mpre">newByteArray</span></span></a><span class="mpre"> </span><a href="#loc_423_20_423_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_20_423_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      </span><a href="#loc_471_1_471_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_1_471_20&#39;)"><span class="hl_varref"><span class="mpre">copyAddrToByteArray</span></span></a><span class="mpre"> </span><a href="#loc_423_16_423_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_16_423_19&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><a href="#loc_425_7_425_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_7_425_10&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_423_20_423_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_20_423_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
      </span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_427_11_427_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_11_427_14&#39;)"><span class="hl_vardecl"><span class="mpre">ba#</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_456_1_456_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_1_456_22&#39;)"><span class="hl_varref"><span class="mpre">unsafeFreezeByteArray</span></span></a><span class="mpre"> </span><a href="#loc_425_7_425_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_7_425_10&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre">
      </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_109_24_109_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_24_109_27&#39;)"><span class="hl_conref"><span class="mpre">SBS</span></span></a><span class="mpre"> </span><a href="#loc_427_11_427_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_11_427_14&#39;)"><span class="hl_varref"><span class="mpre">ba#</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">LEN</span></span><span class="mpre">(</span><a href="#loc_423_20_423_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_20_423_23&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">))


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Primop wrappers</span></span><span class="mpre">

data </span><a name="loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tycondecl"><span class="mpre">BA</span></span></a><span class="mpre">    = </span><a name="loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_condecl"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_1949_6_1949_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1949_6_1949_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteArray#</span></span></a><span class="mpre">
data </span><a name="loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tycondecl"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> = </span><a name="loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_condecl"><span class="mpre">MBA#</span></span></a><span class="mpre"> (</span><a href="GHC.Prim.html#loc_1951_6_1951_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1951_6_1951_23&#39;)"><span class="hl_tyconref"><span class="mpre">MutableByteArray#</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">)

</span><a href="#loc_438_1_438_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_1_438_15&#39;)"><span class="mpre">indexCharArray</span></a><span class="mpre"> :: </span><a href="#loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">
</span><a name="loc_438_1_438_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_1_438_15&#39;)"><span class="hl_fundecl"><span class="mpre">indexCharArray</span></span></a><span class="mpre"> (</span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_438_21_438_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_21_438_24&#39;)"><span class="hl_vardecl"><span class="mpre">ba#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_438_30_438_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_30_438_32&#39;)"><span class="hl_vardecl"><span class="mpre">i#</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">C#</span></span><span class="mpre"> (</span><a href="GHC.Prim.html#loc_1995_1_1995_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1995_1_1995_16&#39;)"><span class="hl_varref"><span class="mpre">indexCharArray#</span></span></a><span class="mpre"> </span><a href="#loc_438_21_438_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_21_438_24&#39;)"><span class="hl_varref"><span class="mpre">ba#</span></span></a><span class="mpre"> </span><a href="#loc_438_30_438_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_30_438_32&#39;)"><span class="hl_varref"><span class="mpre">i#</span></span></a><span class="mpre">)

</span><a href="#loc_441_1_441_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_441_1_441_16&#39;)"><span class="mpre">indexWord8Array</span></a><span class="mpre"> :: </span><a href="#loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">
</span><a name="loc_441_1_441_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_441_1_441_16&#39;)"><span class="hl_fundecl"><span class="mpre">indexWord8Array</span></span></a><span class="mpre"> (</span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_441_22_441_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_441_22_441_25&#39;)"><span class="hl_vardecl"><span class="mpre">ba#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_441_31_441_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_441_31_441_33&#39;)"><span class="hl_vardecl"><span class="mpre">i#</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">W8#</span></span><span class="mpre"> (</span><a href="GHC.Prim.html#loc_2033_1_2033_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2033_1_2033_17&#39;)"><span class="hl_varref"><span class="mpre">indexWord8Array#</span></span></a><span class="mpre"> </span><a href="#loc_441_22_441_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_441_22_441_25&#39;)"><span class="hl_varref"><span class="mpre">ba#</span></span></a><span class="mpre"> </span><a href="#loc_441_31_441_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_441_31_441_33&#39;)"><span class="hl_varref"><span class="mpre">i#</span></span></a><span class="mpre">)

</span><a href="#loc_444_1_444_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_1_444_13&#39;)"><span class="mpre">newByteArray</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> (</span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">)
</span><a name="loc_444_1_444_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_1_444_13&#39;)"><span class="hl_fundecl"><span class="mpre">newByteArray</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_444_18_444_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_18_444_22&#39;)"><span class="hl_vardecl"><span class="mpre">len#</span></span></a><span class="mpre">) =
    </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_445_11_445_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_445_11_445_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><a href="GHC.Prim.html#loc_1957_1_1957_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1957_1_1957_14&#39;)"><span class="hl_varref"><span class="mpre">newByteArray#</span></span></a><span class="mpre"> </span><a href="#loc_444_18_444_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_18_444_22&#39;)"><span class="hl_varref"><span class="mpre">len#</span></span></a><span class="mpre"> </span><a href="#loc_445_11_445_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_445_11_445_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                 (# </span><a name="loc_446_21_446_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_446_21_446_22&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">, </span><a name="loc_446_24_446_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_446_24_446_28&#39;)"><span class="hl_vardecl"><span class="mpre">mba#</span></span></a><span class="mpre"> #) -&gt; (# </span><a href="#loc_446_21_446_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_446_21_446_22&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">, </span><a href="#loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_conref"><span class="mpre">MBA#</span></span></a><span class="mpre"> </span><a href="#loc_446_24_446_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_446_24_446_28&#39;)"><span class="hl_varref"><span class="mpre">mba#</span></span></a><span class="mpre"> #)

#if MIN_VERSION_base(4,6,0)
</span><a href="#loc_450_1_450_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_450_1_450_19&#39;)"><span class="mpre">newPinnedByteArray</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> (</span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">)
</span><a name="loc_450_1_450_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_450_1_450_19&#39;)"><span class="hl_fundecl"><span class="mpre">newPinnedByteArray</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_450_24_450_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_450_24_450_28&#39;)"><span class="hl_vardecl"><span class="mpre">len#</span></span></a><span class="mpre">) =
    </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_451_11_451_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_11_451_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><a href="GHC.Prim.html#loc_1962_1_1962_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1962_1_1962_20&#39;)"><span class="hl_varref"><span class="mpre">newPinnedByteArray#</span></span></a><span class="mpre"> </span><a href="#loc_450_24_450_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_450_24_450_28&#39;)"><span class="hl_varref"><span class="mpre">len#</span></span></a><span class="mpre"> </span><a href="#loc_451_11_451_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_11_451_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                 (# </span><a name="loc_452_21_452_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_21_452_22&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">, </span><a name="loc_452_24_452_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_24_452_28&#39;)"><span class="hl_vardecl"><span class="mpre">mba#</span></span></a><span class="mpre"> #) -&gt; (# </span><a href="#loc_452_21_452_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_21_452_22&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">, </span><a href="#loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_conref"><span class="mpre">MBA#</span></span></a><span class="mpre"> </span><a href="#loc_452_24_452_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_24_452_28&#39;)"><span class="hl_varref"><span class="mpre">mba#</span></span></a><span class="mpre"> #)
#endif

</span><a href="#loc_456_1_456_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_1_456_22&#39;)"><span class="mpre">unsafeFreezeByteArray</span></a><span class="mpre"> :: </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><a href="#loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre">
</span><a name="loc_456_1_456_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_1_456_22&#39;)"><span class="hl_fundecl"><span class="mpre">unsafeFreezeByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_conref"><span class="mpre">MBA#</span></span></a><span class="mpre"> </span><a name="loc_456_29_456_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_29_456_33&#39;)"><span class="hl_vardecl"><span class="mpre">mba#</span></span></a><span class="mpre">) =
    </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_457_11_457_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_11_457_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><a href="GHC.Prim.html#loc_1980_1_1980_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1980_1_1980_23&#39;)"><span class="hl_varref"><span class="mpre">unsafeFreezeByteArray#</span></span></a><span class="mpre"> </span><a href="#loc_456_29_456_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_29_456_33&#39;)"><span class="hl_varref"><span class="mpre">mba#</span></span></a><span class="mpre"> </span><a href="#loc_457_11_457_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_11_457_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                 (# </span><a name="loc_458_21_458_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_458_21_458_22&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">, </span><a name="loc_458_24_458_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_458_24_458_27&#39;)"><span class="hl_vardecl"><span class="mpre">ba#</span></span></a><span class="mpre"> #) -&gt; (# </span><a href="#loc_458_21_458_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_458_21_458_22&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">, </span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a href="#loc_458_24_458_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_458_24_458_27&#39;)"><span class="hl_varref"><span class="mpre">ba#</span></span></a><span class="mpre"> #)

</span><a href="#loc_461_1_461_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_1_461_15&#39;)"><span class="mpre">writeCharArray</span></a><span class="mpre"> :: </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_461_1_461_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_1_461_15&#39;)"><span class="hl_fundecl"><span class="mpre">writeCharArray</span></span></a><span class="mpre"> (</span><a href="#loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_conref"><span class="mpre">MBA#</span></span></a><span class="mpre"> </span><a name="loc_461_22_461_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_22_461_26&#39;)"><span class="hl_vardecl"><span class="mpre">mba#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_461_32_461_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_32_461_34&#39;)"><span class="hl_vardecl"><span class="mpre">i#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">C#</span></span><span class="mpre"> </span><a name="loc_461_40_461_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_40_461_42&#39;)"><span class="hl_vardecl"><span class="mpre">c#</span></span></a><span class="mpre">) =
  </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_462_9_462_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_462_9_462_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><a href="GHC.Prim.html#loc_2099_1_2099_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2099_1_2099_16&#39;)"><span class="hl_varref"><span class="mpre">writeCharArray#</span></span></a><span class="mpre"> </span><a href="#loc_461_22_461_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_22_461_26&#39;)"><span class="hl_varref"><span class="mpre">mba#</span></span></a><span class="mpre"> </span><a href="#loc_461_32_461_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_32_461_34&#39;)"><span class="hl_varref"><span class="mpre">i#</span></span></a><span class="mpre"> </span><a href="#loc_461_40_461_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_40_461_42&#39;)"><span class="hl_varref"><span class="mpre">c#</span></span></a><span class="mpre"> </span><a href="#loc_462_9_462_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_462_9_462_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
               </span><a name="loc_463_16_463_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_16_463_17&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; (# </span><a href="#loc_463_16_463_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_16_463_17&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> #)

</span><a href="#loc_466_1_466_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_1_466_16&#39;)"><span class="mpre">writeWord8Array</span></a><span class="mpre"> :: </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_466_1_466_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_1_466_16&#39;)"><span class="hl_fundecl"><span class="mpre">writeWord8Array</span></span></a><span class="mpre"> (</span><a href="#loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_conref"><span class="mpre">MBA#</span></span></a><span class="mpre"> </span><a name="loc_466_23_466_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_23_466_27&#39;)"><span class="hl_vardecl"><span class="mpre">mba#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_466_33_466_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_33_466_35&#39;)"><span class="hl_vardecl"><span class="mpre">i#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">W8#</span></span><span class="mpre"> </span><a name="loc_466_42_466_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_42_466_44&#39;)"><span class="hl_vardecl"><span class="mpre">w#</span></span></a><span class="mpre">) =
  </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_467_9_467_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_9_467_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><a href="GHC.Prim.html#loc_2137_1_2137_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2137_1_2137_17&#39;)"><span class="hl_varref"><span class="mpre">writeWord8Array#</span></span></a><span class="mpre"> </span><a href="#loc_466_23_466_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_23_466_27&#39;)"><span class="hl_varref"><span class="mpre">mba#</span></span></a><span class="mpre"> </span><a href="#loc_466_33_466_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_33_466_35&#39;)"><span class="hl_varref"><span class="mpre">i#</span></span></a><span class="mpre"> </span><a href="#loc_466_42_466_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_42_466_44&#39;)"><span class="hl_varref"><span class="mpre">w#</span></span></a><span class="mpre"> </span><a href="#loc_467_9_467_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_467_9_467_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
               </span><a name="loc_468_16_468_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_468_16_468_17&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; (# </span><a href="#loc_468_16_468_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_468_16_468_17&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> #)

</span><a href="#loc_471_1_471_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_1_471_20&#39;)"><span class="mpre">copyAddrToByteArray</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_471_1_471_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_1_471_20&#39;)"><span class="hl_fundecl"><span class="mpre">copyAddrToByteArray</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><a name="loc_471_26_471_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_26_471_30&#39;)"><span class="hl_vardecl"><span class="mpre">src#</span></span></a><span class="mpre">) (</span><a href="#loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_conref"><span class="mpre">MBA#</span></span></a><span class="mpre"> </span><a name="loc_471_38_471_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_38_471_42&#39;)"><span class="hl_vardecl"><span class="mpre">dst#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_471_48_471_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_48_471_56&#39;)"><span class="hl_vardecl"><span class="mpre">dst_off#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_471_62_471_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_62_471_66&#39;)"><span class="hl_vardecl"><span class="mpre">len#</span></span></a><span class="mpre">) =
    </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_472_11_472_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_11_472_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><a href="#loc_519_1_519_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_519_1_519_21&#39;)"><span class="hl_varref"><span class="mpre">copyAddrToByteArray#</span></span></a><span class="mpre"> </span><a href="#loc_471_26_471_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_26_471_30&#39;)"><span class="hl_varref"><span class="mpre">src#</span></span></a><span class="mpre"> </span><a href="#loc_471_38_471_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_38_471_42&#39;)"><span class="hl_varref"><span class="mpre">dst#</span></span></a><span class="mpre"> </span><a href="#loc_471_48_471_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_48_471_56&#39;)"><span class="hl_varref"><span class="mpre">dst_off#</span></span></a><span class="mpre"> </span><a href="#loc_471_62_471_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_62_471_66&#39;)"><span class="hl_varref"><span class="mpre">len#</span></span></a><span class="mpre"> </span><a href="#loc_472_11_472_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_11_472_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                 </span><a name="loc_473_18_473_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_473_18_473_19&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; (# </span><a href="#loc_473_18_473_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_473_18_473_19&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> #)

</span><a href="#loc_476_1_476_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_20&#39;)"><span class="mpre">copyByteArrayToAddr</span></a><span class="mpre"> :: </span><a href="#loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_476_1_476_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_20&#39;)"><span class="hl_fundecl"><span class="mpre">copyByteArrayToAddr</span></span></a><span class="mpre"> (</span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_476_26_476_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_26_476_30&#39;)"><span class="hl_vardecl"><span class="mpre">src#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_476_36_476_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_36_476_44&#39;)"><span class="hl_vardecl"><span class="mpre">src_off#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><a name="loc_476_51_476_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_51_476_55&#39;)"><span class="hl_vardecl"><span class="mpre">dst#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_476_61_476_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_61_476_65&#39;)"><span class="hl_vardecl"><span class="mpre">len#</span></span></a><span class="mpre">) =
    </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_477_11_477_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_477_11_477_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><a href="#loc_520_1_520_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_1_520_21&#39;)"><span class="hl_varref"><span class="mpre">copyByteArrayToAddr#</span></span></a><span class="mpre"> </span><a href="#loc_476_26_476_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_26_476_30&#39;)"><span class="hl_varref"><span class="mpre">src#</span></span></a><span class="mpre"> </span><a href="#loc_476_36_476_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_36_476_44&#39;)"><span class="hl_varref"><span class="mpre">src_off#</span></span></a><span class="mpre"> </span><a href="#loc_476_51_476_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_51_476_55&#39;)"><span class="hl_varref"><span class="mpre">dst#</span></span></a><span class="mpre"> </span><a href="#loc_476_61_476_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_61_476_65&#39;)"><span class="hl_varref"><span class="mpre">len#</span></span></a><span class="mpre"> </span><a href="#loc_477_11_477_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_477_11_477_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                 </span><a name="loc_478_18_478_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_18_478_19&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; (# </span><a href="#loc_478_18_478_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_18_478_19&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> #)

</span><a href="#loc_481_1_481_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_1_481_14&#39;)"><span class="mpre">copyByteArray</span></a><span class="mpre"> :: </span><a href="#loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="#loc_435_6_435_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_9&#39;)"><span class="hl_tyconref"><span class="mpre">MBA</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_481_1_481_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_1_481_14&#39;)"><span class="hl_fundecl"><span class="mpre">copyByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_481_20_481_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_20_481_24&#39;)"><span class="hl_vardecl"><span class="mpre">src#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_481_30_481_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_30_481_38&#39;)"><span class="hl_vardecl"><span class="mpre">src_off#</span></span></a><span class="mpre">) (</span><a href="#loc_435_14_435_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_14_435_18&#39;)"><span class="hl_conref"><span class="mpre">MBA#</span></span></a><span class="mpre"> </span><a name="loc_481_46_481_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_46_481_50&#39;)"><span class="hl_vardecl"><span class="mpre">dst#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_481_56_481_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_56_481_64&#39;)"><span class="hl_vardecl"><span class="mpre">dst_off#</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_481_70_481_74" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_70_481_74&#39;)"><span class="hl_vardecl"><span class="mpre">len#</span></span></a><span class="mpre">) =
    </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_482_11_482_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_11_482_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><a href="#loc_577_1_577_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_577_1_577_15&#39;)"><span class="hl_varref"><span class="mpre">copyByteArray#</span></span></a><span class="mpre"> </span><a href="#loc_481_20_481_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_20_481_24&#39;)"><span class="hl_varref"><span class="mpre">src#</span></span></a><span class="mpre"> </span><a href="#loc_481_30_481_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_30_481_38&#39;)"><span class="hl_varref"><span class="mpre">src_off#</span></span></a><span class="mpre"> </span><a href="#loc_481_46_481_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_46_481_50&#39;)"><span class="hl_varref"><span class="mpre">dst#</span></span></a><span class="mpre"> </span><a href="#loc_481_56_481_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_56_481_64&#39;)"><span class="hl_varref"><span class="mpre">dst_off#</span></span></a><span class="mpre"> </span><a href="#loc_481_70_481_74" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_481_70_481_74&#39;)"><span class="hl_varref"><span class="mpre">len#</span></span></a><span class="mpre"> </span><a href="#loc_482_11_482_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_11_482_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                 </span><a name="loc_483_18_483_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_483_18_483_19&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; (# </span><a href="#loc_483_18_483_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_483_18_483_19&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> #)


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- FFI imports</span></span><span class="mpre">

</span><a href="#loc_490_1_490_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_1_490_17&#39;)"><span class="mpre">memcmp_ByteArray</span></a><span class="mpre"> :: </span><a href="#loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_434_6_434_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_6_434_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre">
</span><a name="loc_490_1_490_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_1_490_17&#39;)"><span class="hl_fundecl"><span class="mpre">memcmp_ByteArray</span></span></a><span class="mpre"> (</span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_490_23_490_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_23_490_27&#39;)"><span class="hl_vardecl"><span class="mpre">ba1#</span></span></a><span class="mpre">) (</span><a href="#loc_434_14_434_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_434_14_434_17&#39;)"><span class="hl_conref"><span class="mpre">BA#</span></span></a><span class="mpre"> </span><a name="loc_490_34_490_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_34_490_38&#39;)"><span class="hl_vardecl"><span class="mpre">ba2#</span></span></a><span class="mpre">) </span><a name="loc_490_40_490_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_40_490_43&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> =
  </span><span class="hl_varref"><span class="mpre">c_memcmp_ByteArray</span></span><span class="mpre"> </span><a href="#loc_490_23_490_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_23_490_27&#39;)"><span class="hl_varref"><span class="mpre">ba1#</span></span></a><span class="mpre"> </span><a href="#loc_490_34_490_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_34_490_38&#39;)"><span class="hl_varref"><span class="mpre">ba2#</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_490_40_490_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_490_40_490_43&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 493, srcSpanStartColumn = 1, srcSpanEndLine = 494, srcSpanEndColumn = 69}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 493, srcSpanStartColumn = 1, srcSpanEndLine = 493, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4."><span class="mpre">foreign import ccall unsafe &quot;string.h memcmp&quot;
  c_memcmp_ByteArray :: ByteArray# -&gt; ByteArray# -&gt; CSize -&gt; IO CInt</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Primop replacements</span></span><span class="mpre">

</span><a href="#loc_519_1_519_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_519_1_519_21&#39;)"><span class="mpre">copyAddrToByteArray#</span></a><span class="mpre"> :: </span><a href="GHC.Prim.html#loc_2279_6_2279_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2279_6_2279_11&#39;)"><span class="hl_tyconref"><span class="mpre">Addr#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_1951_6_1951_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1951_6_1951_23&#39;)"><span class="hl_tyconref"><span class="mpre">MutableByteArray#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre">

</span><a href="#loc_520_1_520_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_1_520_21&#39;)"><span class="mpre">copyByteArrayToAddr#</span></a><span class="mpre"> :: </span><a href="GHC.Prim.html#loc_1949_6_1949_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1949_6_1949_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteArray#</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_2279_6_2279_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2279_6_2279_11&#39;)"><span class="hl_tyconref"><span class="mpre">Addr#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre">

</span><a href="#loc_577_1_577_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_577_1_577_15&#39;)"><span class="mpre">copyByteArray#</span></a><span class="mpre">       :: </span><a href="GHC.Prim.html#loc_1949_6_1949_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1949_6_1949_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteArray#</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_1951_6_1951_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1951_6_1951_23&#39;)"><span class="hl_tyconref"><span class="mpre">MutableByteArray#</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">

#if MIN_VERSION_base(4,7,0)

</span><span class="hl_comment"><span class="mpre">-- These exist as real primops in ghc-7.8, and for before that we use</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- FFI to C memcpy.</span></span><span class="mpre">
</span><a name="loc_519_1_519_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_519_1_519_21&#39;)"><span class="hl_vardecl"><span class="mpre">copyAddrToByteArray#</span></span></a><span class="mpre"> = </span><a href="GHC.Prim.html#loc_2186_1_2186_21" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2186_1_2186_21&#39;)"><span class="hl_varref"><span class="mpre">GHC.Exts.copyAddrToByteArray#</span></span></a><span class="mpre">
</span><a name="loc_520_1_520_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_1_520_21&#39;)"><span class="hl_vardecl"><span class="mpre">copyByteArrayToAddr#</span></span></a><span class="mpre"> = </span><a href="GHC.Prim.html#loc_2168_1_2168_21" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2168_1_2168_21&#39;)"><span class="hl_varref"><span class="mpre">GHC.Exts.copyByteArrayToAddr#</span></span></a><span class="mpre">

#else

</span><span class="hl_fundecl"><span class="mpre">copyAddrToByteArray#</span></span><span class="mpre"> </span><a name="loc_524_22_524_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_22_524_25&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_524_26_524_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_26_524_29&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a name="loc_524_30_524_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_30_524_37&#39;)"><span class="hl_vardecl"><span class="mpre">dst_off</span></span></a><span class="mpre"> </span><a name="loc_524_38_524_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_38_524_41&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_524_42_524_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_42_524_43&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> =
  </span><a href="#loc_567_1_567_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_1_567_6&#39;)"><span class="hl_varref"><span class="mpre">unIO_</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">memcpy_AddrToByteArray</span></span><span class="mpre"> </span><a href="#loc_524_26_524_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_26_524_29&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> (</span><a href="#loc_570_1_570_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_6&#39;)"><span class="hl_varref"><span class="mpre">clong</span></span></a><span class="mpre"> </span><a href="#loc_524_30_524_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_30_524_37&#39;)"><span class="hl_varref"><span class="mpre">dst_off</span></span></a><span class="mpre">) </span><a href="#loc_524_22_524_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_22_524_25&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> (</span><a href="#loc_573_1_573_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_6&#39;)"><span class="hl_varref"><span class="mpre">csize</span></span></a><span class="mpre"> </span><a href="#loc_524_38_524_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_38_524_41&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)) </span><a href="#loc_524_42_524_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_42_524_43&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><a href="#loc_529_1_529_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_1_529_21&#39;)"><span class="mpre">copyAddrToByteArray0</span></a><span class="mpre"> :: </span><a href="GHC.Prim.html#loc_2279_6_2279_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2279_6_2279_11&#39;)"><span class="hl_tyconref"><span class="mpre">Addr#</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1951_6_1951_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1951_6_1951_23&#39;)"><span class="hl_tyconref"><span class="mpre">MutableByteArray#</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre">
</span><a name="loc_529_1_529_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_1_529_21&#39;)"><span class="hl_fundecl"><span class="mpre">copyAddrToByteArray0</span></span></a><span class="mpre"> </span><a name="loc_529_22_529_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_22_529_25&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_529_26_529_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_26_529_29&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a name="loc_529_30_529_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_30_529_33&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_529_34_529_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_34_529_35&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> =
  </span><a href="#loc_567_1_567_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_1_567_6&#39;)"><span class="hl_varref"><span class="mpre">unIO_</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">memcpy_AddrToByteArray0</span></span><span class="mpre"> </span><a href="#loc_529_26_529_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_26_529_29&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a href="#loc_529_22_529_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_22_529_25&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> (</span><a href="#loc_573_1_573_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_6&#39;)"><span class="hl_varref"><span class="mpre">csize</span></span></a><span class="mpre"> </span><a href="#loc_529_30_529_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_30_529_33&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)) </span><a href="#loc_529_34_529_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_34_529_35&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# INLINE [0] </span><a href="#loc_519_1_519_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_519_1_519_21&#39;)"><span class="mpre">copyAddrToByteArray#</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# RULES &quot;copyAddrToByteArray# dst_off=0&quot;
      forall src dst len s.
          copyAddrToByteArray# src dst 0# len s
        = copyAddrToByteArray0 src dst    len s  #-}</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 538, srcSpanStartColumn = 1, srcSpanEndLine = 539, srcSpanEndColumn = 93}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 538, srcSpanStartColumn = 1, srcSpanEndLine = 538, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4."><span class="mpre">foreign import ccall unsafe &quot;fpstring.h fps_memcpy_offsets&quot;
  memcpy_AddrToByteArray :: MutableByteArray# s -&gt; CLong -&gt; Addr# -&gt; CLong -&gt; CSize -&gt; IO ()</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 541, srcSpanStartColumn = 1, srcSpanEndLine = 542, srcSpanEndColumn = 76}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 541, srcSpanStartColumn = 1, srcSpanEndLine = 541, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4."><span class="mpre">foreign import ccall unsafe &quot;string.h memcpy&quot;
  memcpy_AddrToByteArray0 :: MutableByteArray# s -&gt; Addr# -&gt; CSize -&gt; IO ()</span></span><span class="mpre">


</span><span class="hl_fundecl"><span class="mpre">copyByteArrayToAddr#</span></span><span class="mpre"> </span><a name="loc_545_22_545_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_22_545_25&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_545_26_545_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_26_545_33&#39;)"><span class="hl_vardecl"><span class="mpre">src_off</span></span></a><span class="mpre"> </span><a name="loc_545_34_545_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_34_545_37&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a name="loc_545_38_545_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_38_545_41&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_545_42_545_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_42_545_43&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> =
  </span><a href="#loc_567_1_567_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_1_567_6&#39;)"><span class="hl_varref"><span class="mpre">unIO_</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">memcpy_ByteArrayToAddr</span></span><span class="mpre"> </span><a href="#loc_545_34_545_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_34_545_37&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_545_22_545_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_22_545_25&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> (</span><a href="#loc_570_1_570_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_6&#39;)"><span class="hl_varref"><span class="mpre">clong</span></span></a><span class="mpre"> </span><a href="#loc_545_26_545_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_26_545_33&#39;)"><span class="hl_varref"><span class="mpre">src_off</span></span></a><span class="mpre">) (</span><a href="#loc_573_1_573_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_6&#39;)"><span class="hl_varref"><span class="mpre">csize</span></span></a><span class="mpre"> </span><a href="#loc_545_38_545_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_38_545_41&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)) </span><a href="#loc_545_42_545_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_545_42_545_43&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><a href="#loc_550_1_550_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_1_550_21&#39;)"><span class="mpre">copyByteArrayToAddr0</span></a><span class="mpre"> :: </span><a href="GHC.Prim.html#loc_1949_6_1949_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1949_6_1949_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteArray#</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_2279_6_2279_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2279_6_2279_11&#39;)"><span class="hl_tyconref"><span class="mpre">Addr#</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
                     -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre">
</span><a name="loc_550_1_550_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_1_550_21&#39;)"><span class="hl_fundecl"><span class="mpre">copyByteArrayToAddr0</span></span></a><span class="mpre"> </span><a name="loc_550_22_550_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_22_550_25&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_550_26_550_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_26_550_29&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a name="loc_550_30_550_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_30_550_33&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_550_34_550_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_34_550_35&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> =
  </span><a href="#loc_567_1_567_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_1_567_6&#39;)"><span class="hl_varref"><span class="mpre">unIO_</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">memcpy_ByteArrayToAddr0</span></span><span class="mpre"> </span><a href="#loc_550_26_550_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_26_550_29&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a href="#loc_550_22_550_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_22_550_25&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> (</span><a href="#loc_573_1_573_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_6&#39;)"><span class="hl_varref"><span class="mpre">csize</span></span></a><span class="mpre"> </span><a href="#loc_550_30_550_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_30_550_33&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)) </span><a href="#loc_550_34_550_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_550_34_550_35&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# INLINE [0] </span><a href="#loc_520_1_520_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_1_520_21&#39;)"><span class="mpre">copyByteArrayToAddr#</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# RULES &quot;copyByteArrayToAddr# src_off=0&quot;
      forall src dst len s.
          copyByteArrayToAddr# src 0# dst len s
        = copyByteArrayToAddr0 src    dst len s  #-}</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 559, srcSpanStartColumn = 1, srcSpanEndLine = 560, srcSpanEndColumn = 84}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 559, srcSpanStartColumn = 1, srcSpanEndLine = 559, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4."><span class="mpre">foreign import ccall unsafe &quot;fpstring.h fps_memcpy_offsets&quot;
  memcpy_ByteArrayToAddr :: Addr# -&gt; CLong -&gt; ByteArray# -&gt; CLong -&gt; CSize -&gt; IO ()</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 562, srcSpanStartColumn = 1, srcSpanEndLine = 563, srcSpanEndColumn = 67}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 562, srcSpanStartColumn = 1, srcSpanEndLine = 562, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4."><span class="mpre">foreign import ccall unsafe &quot;string.h memcpy&quot;
  memcpy_ByteArrayToAddr0 :: Addr# -&gt; ByteArray# -&gt; CSize -&gt; IO ()</span></span><span class="mpre">


</span><a href="#loc_567_1_567_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_1_567_6&#39;)"><span class="mpre">unIO_</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_2647_6_2647_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2647_6_2647_12&#39;)"><span class="hl_tyconref"><span class="mpre">State#</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="hl_tyconref"><span class="mpre">RealWorld</span></span></a><span class="mpre">
</span><a name="loc_567_1_567_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_1_567_6&#39;)"><span class="hl_fundecl"><span class="mpre">unIO_</span></span></a><span class="mpre"> </span><a name="loc_567_7_567_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_7_567_9&#39;)"><span class="hl_vardecl"><span class="mpre">io</span></span></a><span class="mpre"> </span><a name="loc_567_10_567_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_10_567_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = case </span><span class="hl_varref"><span class="mpre">unIO</span></span><span class="mpre"> </span><a href="#loc_567_7_567_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_7_567_9&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> </span><a href="#loc_567_10_567_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_10_567_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of (# </span><a name="loc_567_35_567_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_35_567_36&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">, _ #) -&gt; </span><a href="#loc_567_35_567_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_35_567_36&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><a href="#loc_570_1_570_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_6&#39;)"><span class="mpre">clong</span></a><span class="mpre"> :: </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">CLong</span></span><span class="mpre">
</span><a name="loc_570_1_570_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_6&#39;)"><span class="hl_fundecl"><span class="mpre">clong</span></span></a><span class="mpre"> </span><a name="loc_570_7_570_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_7_570_9&#39;)"><span class="hl_vardecl"><span class="mpre">i#</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a href="#loc_570_7_570_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_7_570_9&#39;)"><span class="hl_varref"><span class="mpre">i#</span></span></a><span class="mpre">)

</span><a href="#loc_573_1_573_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_6&#39;)"><span class="mpre">csize</span></a><span class="mpre"> :: </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">CSize</span></span><span class="mpre">
</span><a name="loc_573_1_573_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_6&#39;)"><span class="hl_fundecl"><span class="mpre">csize</span></span></a><span class="mpre"> </span><a name="loc_573_7_573_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_7_573_9&#39;)"><span class="hl_vardecl"><span class="mpre">i#</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a href="#loc_573_7_573_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_7_573_9&#39;)"><span class="hl_varref"><span class="mpre">i#</span></span></a><span class="mpre">)
#endif

#if MIN_VERSION_base(4,5,0)
</span><a name="loc_577_1_577_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_577_1_577_15&#39;)"><span class="hl_vardecl"><span class="mpre">copyByteArray#</span></span></a><span class="mpre"> = </span><a href="GHC.Prim.html#loc_2153_1_2153_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2153_1_2153_15&#39;)"><span class="hl_varref"><span class="mpre">GHC.Exts.copyByteArray#</span></span></a><span class="mpre">
#else
</span><span class="hl_fundecl"><span class="mpre">copyByteArray#</span></span><span class="mpre"> </span><a name="loc_579_16_579_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_16_579_19&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_579_20_579_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_20_579_27&#39;)"><span class="hl_vardecl"><span class="mpre">src_off</span></span></a><span class="mpre"> </span><a name="loc_579_28_579_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_28_579_31&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a name="loc_579_32_579_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_32_579_39&#39;)"><span class="hl_vardecl"><span class="mpre">dst_off</span></span></a><span class="mpre"> </span><a name="loc_579_40_579_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_40_579_43&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> </span><a name="loc_579_44_579_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_44_579_45&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> =
    </span><a href="#loc_584_5_584_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_5_584_10&#39;)"><span class="hl_varref"><span class="mpre">unST_</span></span></a><span class="mpre"> (</span><a href="GHC.IO.html#loc_100_1_100_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_100_1_100_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeIOToST</span></span></a><span class="mpre">
      (</span><span class="hl_varref"><span class="mpre">memcpy_ByteArray</span></span><span class="mpre"> </span><a href="#loc_579_28_579_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_28_579_31&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> (</span><a href="#loc_570_1_570_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_6&#39;)"><span class="hl_varref"><span class="mpre">clong</span></span></a><span class="mpre"> </span><a href="#loc_579_32_579_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_32_579_39&#39;)"><span class="hl_varref"><span class="mpre">dst_off</span></span></a><span class="mpre">) </span><a href="#loc_579_16_579_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_16_579_19&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> (</span><a href="#loc_570_1_570_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_6&#39;)"><span class="hl_varref"><span class="mpre">clong</span></span></a><span class="mpre"> </span><a href="#loc_579_20_579_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_20_579_27&#39;)"><span class="hl_varref"><span class="mpre">src_off</span></span></a><span class="mpre">) (</span><a href="#loc_573_1_573_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_6&#39;)"><span class="hl_varref"><span class="mpre">csize</span></span></a><span class="mpre"> </span><a href="#loc_579_40_579_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_40_579_43&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">))) </span><a href="#loc_579_44_579_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_44_579_45&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
  where
    </span><a name="loc_583_5_583_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_5_583_9&#39;)"><span class="hl_fundecl"><span class="mpre">unST</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><a name="loc_583_14_583_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_14_583_16&#39;)"><span class="hl_vardecl"><span class="mpre">st</span></span></a><span class="mpre">) = </span><a href="#loc_583_14_583_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_14_583_16&#39;)"><span class="hl_varref"><span class="mpre">st</span></span></a><span class="mpre">
    </span><a name="loc_584_5_584_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_5_584_10&#39;)"><span class="hl_fundecl"><span class="mpre">unST_</span></span></a><span class="mpre"> </span><a name="loc_584_11_584_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_11_584_13&#39;)"><span class="hl_vardecl"><span class="mpre">st</span></span></a><span class="mpre"> </span><a name="loc_584_14_584_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_14_584_15&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = case </span><a href="#loc_583_5_583_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_5_583_9&#39;)"><span class="hl_varref"><span class="mpre">unST</span></span></a><span class="mpre"> </span><a href="#loc_584_11_584_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_11_584_13&#39;)"><span class="hl_varref"><span class="mpre">st</span></span></a><span class="mpre"> </span><a href="#loc_584_14_584_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_14_584_15&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of (# </span><a name="loc_584_39_584_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_39_584_40&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">, _ #) -&gt; </span><a href="#loc_584_39_584_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_39_584_40&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 586, srcSpanStartColumn = 1, srcSpanEndLine = 588, srcSpanEndColumn = 60}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Short/Internal.hs&quot;, srcSpanStartLine = 586, srcSpanStartColumn = 1, srcSpanEndLine = 586, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4."><span class="mpre">foreign import ccall unsafe &quot;fpstring.h fps_memcpy_offsets&quot;
  memcpy_ByteArray :: MutableByteArray# s -&gt; CLong
                   -&gt; ByteArray# -&gt; CLong -&gt; CSize -&gt; IO ()</span></span><span class="mpre">
#endif

</span></div></body></html>