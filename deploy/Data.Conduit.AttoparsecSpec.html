<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP               #-}
{-# LANGUAGE OverloadedStrings #-}
{-# OPTIONS_GHC -fno-warn-incomplete-patterns #-}
module Data.Conduit.AttoparsecSpec (spec) where
import           Control.Exception                (fromException)
import           </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/AttoparsecSpec.hs&quot;, srcSpanStartLine = 6, srcSpanStartColumn = 18, srcSpanEndLine = 6, srcSpanEndColumn = 28}, srcInfoPoints = []}) &quot;Test.Hspec&quot;"><span class="mpre">Test.Hspec</span></span><span class="mpre">

import           Control.Applicative              (</span><a href="Control.Applicative.html#loc_125_5_125_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_125_5_125_9&#39;)"><span class="mpre">(&lt;*)</span></a><span class="mpre">, </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="mpre">(&lt;|&gt;)</span></a><span class="mpre">)
import           Control.Monad
import           Control.Monad.Trans.Resource (</span><a href="Control.Monad.Trans.Resource.html#loc_238_1_238_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Resource.html#loc_238_1_238_14&#39;)"><span class="mpre">runExceptionT</span></a><span class="mpre">)
import qualified Data.Attoparsec.ByteString.Char8
import qualified Data.Attoparsec.Text
import           Data.Conduit
import           Data.Conduit.Attoparsec
import qualified Data.Conduit.List                as CL

</span><a href="#loc_18_1_18_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_18_1_18_5&#39;)"><span class="mpre">spec</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Spec</span></span><span class="mpre">
</span><a name="loc_18_1_18_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_18_1_18_5&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">describe</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Conduit.AttoparsecSpec&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    </span><span class="hl_varref"><span class="mpre">describe</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;error position&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;works for text&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_21_17_21_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_17_21_22&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot;aaa\na&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa\n\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aab\n\naaaa&quot;</span></span><span class="mpre">]
                </span><a name="loc_22_17_22_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_17_22_24&#39;)"><span class="hl_vardecl"><span class="mpre">badLine</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre">
                </span><a name="loc_23_17_23_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_17_23_23&#39;)"><span class="hl_vardecl"><span class="mpre">badCol</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">
                </span><a name="loc_24_17_24_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_17_24_23&#39;)"><span class="hl_vardecl"><span class="mpre">parser</span></span></a><span class="mpre"> = </span><a href="Data.Attoparsec.Internal.html#loc_98_1_98_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Internal.html#loc_98_1_98_11&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.endOfInput</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;|&gt;</span></span></a><span class="mpre"> (</span><a href="Data.Attoparsec.Text.Internal.html#loc_367_1_367_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Text.Internal.html#loc_367_1_367_8&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.notChar</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;b&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_24_17_24_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_17_24_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">)
                </span><a name="loc_25_17_25_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_17_25_21&#39;)"><span class="hl_vardecl"><span class="mpre">sink</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.Attoparsec.html#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_116_1_116_11&#39;)"><span class="hl_varref"><span class="mpre">sinkParser</span></span></a><span class="mpre"> </span><a href="#loc_24_17_24_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_17_24_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">
            </span><a name="loc_26_13_26_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_13_26_15&#39;)"><span class="hl_vardecl"><span class="mpre">ea</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Resource.html#loc_238_1_238_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Resource.html#loc_238_1_238_14&#39;)"><span class="hl_varref"><span class="mpre">runExceptionT</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_21_17_21_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_17_21_22&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">$$</span></span></a><span class="mpre"> </span><a href="#loc_25_17_25_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_17_25_21&#39;)"><span class="hl_varref"><span class="mpre">sink</span></span></a><span class="mpre">
            case </span><a href="#loc_26_13_26_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_13_26_15&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_28_22_28_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_22_28_23&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt;
                    case </span><span class="hl_varref"><span class="mpre">fromException</span></span><span class="mpre"> </span><a href="#loc_28_22_28_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_22_28_23&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
                        </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_30_30_30_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_30_30_32&#39;)"><span class="hl_vardecl"><span class="mpre">pe</span></span></a><span class="mpre"> -&gt; do
                            </span><a href="Data.Conduit.Attoparsec.html#loc_46_7_46_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_46_7_46_20&#39;)"><span class="hl_varref"><span class="mpre">errorPosition</span></span></a><span class="mpre"> </span><a href="#loc_30_30_30_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_30_30_32&#39;)"><span class="hl_varref"><span class="mpre">pe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><a href="#loc_22_17_22_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_17_22_24&#39;)"><span class="hl_varref"><span class="mpre">badLine</span></span></a><span class="mpre"> </span><a href="#loc_23_17_23_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_17_23_23&#39;)"><span class="hl_varref"><span class="mpre">badCol</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;works for bytestring&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_33_17_33_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_17_33_22&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot;aaa\na&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa\n\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aab\n\naaaa&quot;</span></span><span class="mpre">]
                </span><a name="loc_34_17_34_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_17_34_24&#39;)"><span class="hl_vardecl"><span class="mpre">badLine</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre">
                </span><a name="loc_35_17_35_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_17_35_23&#39;)"><span class="hl_vardecl"><span class="mpre">badCol</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">
                </span><a name="loc_36_17_36_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_17_36_23&#39;)"><span class="hl_vardecl"><span class="mpre">parser</span></span></a><span class="mpre"> = </span><a href="Data.Attoparsec.Internal.html#loc_98_1_98_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Internal.html#loc_98_1_98_11&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.ByteString.Char8.endOfInput</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;|&gt;</span></span></a><span class="mpre"> (</span><a href="Data.Attoparsec.ByteString.Char8.html#loc_301_1_301_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.ByteString.Char8.html#loc_301_1_301_8&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.ByteString.Char8.notChar</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;b&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_36_17_36_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_17_36_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">)
                </span><a name="loc_37_17_37_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_17_37_21&#39;)"><span class="hl_vardecl"><span class="mpre">sink</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.Attoparsec.html#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_116_1_116_11&#39;)"><span class="hl_varref"><span class="mpre">sinkParser</span></span></a><span class="mpre"> </span><a href="#loc_36_17_36_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_17_36_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">
            </span><a name="loc_38_13_38_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_13_38_15&#39;)"><span class="hl_vardecl"><span class="mpre">ea</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Resource.html#loc_238_1_238_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Resource.html#loc_238_1_238_14&#39;)"><span class="hl_varref"><span class="mpre">runExceptionT</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_33_17_33_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_17_33_22&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">$$</span></span></a><span class="mpre"> </span><a href="#loc_37_17_37_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_17_37_21&#39;)"><span class="hl_varref"><span class="mpre">sink</span></span></a><span class="mpre">
            case </span><a href="#loc_38_13_38_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_13_38_15&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_40_22_40_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_22_40_23&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt;
                    case </span><span class="hl_varref"><span class="mpre">fromException</span></span><span class="mpre"> </span><a href="#loc_40_22_40_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_22_40_23&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
                        </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_42_30_42_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_30_42_32&#39;)"><span class="hl_vardecl"><span class="mpre">pe</span></span></a><span class="mpre"> -&gt; do
                            </span><a href="Data.Conduit.Attoparsec.html#loc_46_7_46_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_46_7_46_20&#39;)"><span class="hl_varref"><span class="mpre">errorPosition</span></span></a><span class="mpre"> </span><a href="#loc_42_30_42_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_30_42_32&#39;)"><span class="hl_varref"><span class="mpre">pe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><a href="#loc_34_17_34_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_17_34_24&#39;)"><span class="hl_varref"><span class="mpre">badLine</span></span></a><span class="mpre"> </span><a href="#loc_35_17_35_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_17_35_23&#39;)"><span class="hl_varref"><span class="mpre">badCol</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;works in last chunk&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_45_17_45_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_17_45_22&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot;aaa\na&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa\n\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aab\n\naaaa&quot;</span></span><span class="mpre">]
                </span><a name="loc_46_17_46_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_17_46_24&#39;)"><span class="hl_vardecl"><span class="mpre">badLine</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">
                </span><a name="loc_47_17_47_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_17_47_23&#39;)"><span class="hl_vardecl"><span class="mpre">badCol</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">5</span></span><span class="mpre">
                </span><a name="loc_48_17_48_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_17_48_23&#39;)"><span class="hl_vardecl"><span class="mpre">parser</span></span></a><span class="mpre"> = </span><a href="Data.Attoparsec.Text.Internal.html#loc_362_1_362_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Text.Internal.html#loc_362_1_362_5&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.char</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;c&#39;</span></span><span class="mpre"> </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;|&gt;</span></span></a><span class="mpre"> (</span><a href="Data.Attoparsec.Text.Internal.html#loc_357_1_357_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Text.Internal.html#loc_357_1_357_8&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.anyChar</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_48_17_48_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_17_48_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">)
                </span><a name="loc_49_17_49_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_17_49_21&#39;)"><span class="hl_vardecl"><span class="mpre">sink</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.Attoparsec.html#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_116_1_116_11&#39;)"><span class="hl_varref"><span class="mpre">sinkParser</span></span></a><span class="mpre"> </span><a href="#loc_48_17_48_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_17_48_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">
            </span><a name="loc_50_13_50_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_13_50_15&#39;)"><span class="hl_vardecl"><span class="mpre">ea</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Resource.html#loc_238_1_238_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Resource.html#loc_238_1_238_14&#39;)"><span class="hl_varref"><span class="mpre">runExceptionT</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_45_17_45_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_17_45_22&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">$$</span></span></a><span class="mpre"> </span><a href="#loc_49_17_49_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_17_49_21&#39;)"><span class="hl_varref"><span class="mpre">sink</span></span></a><span class="mpre">
            case </span><a href="#loc_50_13_50_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_13_50_15&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_52_22_52_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_22_52_23&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt;
                    case </span><span class="hl_varref"><span class="mpre">fromException</span></span><span class="mpre"> </span><a href="#loc_52_22_52_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_22_52_23&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
                        </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_54_30_54_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_30_54_32&#39;)"><span class="hl_vardecl"><span class="mpre">pe</span></span></a><span class="mpre"> -&gt; do
                            </span><a href="Data.Conduit.Attoparsec.html#loc_46_7_46_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_46_7_46_20&#39;)"><span class="hl_varref"><span class="mpre">errorPosition</span></span></a><span class="mpre"> </span><a href="#loc_54_30_54_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_30_54_32&#39;)"><span class="hl_varref"><span class="mpre">pe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><a href="#loc_46_17_46_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_17_46_24&#39;)"><span class="hl_varref"><span class="mpre">badLine</span></span></a><span class="mpre"> </span><a href="#loc_47_17_47_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_17_47_23&#39;)"><span class="hl_varref"><span class="mpre">badCol</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;works in last chunk&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_57_17_57_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_17_57_22&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot;aaa\na&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa\n\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aa\n\naaaab&quot;</span></span><span class="mpre">]
                </span><a name="loc_58_17_58_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_17_58_24&#39;)"><span class="hl_vardecl"><span class="mpre">badLine</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">
                </span><a name="loc_59_17_59_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_17_59_23&#39;)"><span class="hl_vardecl"><span class="mpre">badCol</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">
                </span><a name="loc_60_17_60_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_17_60_23&#39;)"><span class="hl_vardecl"><span class="mpre">parser</span></span></a><span class="mpre"> = </span><a href="Data.Attoparsec.Text.Internal.html#loc_162_1_162_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Text.Internal.html#loc_162_1_162_7&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.string</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;bc&quot;</span></span><span class="mpre"> </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;|&gt;</span></span></a><span class="mpre"> (</span><a href="Data.Attoparsec.Text.Internal.html#loc_357_1_357_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Text.Internal.html#loc_357_1_357_8&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.anyChar</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_60_17_60_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_17_60_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">)
                </span><a name="loc_61_17_61_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_17_61_21&#39;)"><span class="hl_vardecl"><span class="mpre">sink</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.Attoparsec.html#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_116_1_116_11&#39;)"><span class="hl_varref"><span class="mpre">sinkParser</span></span></a><span class="mpre"> </span><a href="#loc_60_17_60_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_17_60_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">
            </span><a name="loc_62_13_62_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_13_62_15&#39;)"><span class="hl_vardecl"><span class="mpre">ea</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Resource.html#loc_238_1_238_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Resource.html#loc_238_1_238_14&#39;)"><span class="hl_varref"><span class="mpre">runExceptionT</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_57_17_57_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_17_57_22&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">$$</span></span></a><span class="mpre"> </span><a href="#loc_61_17_61_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_17_61_21&#39;)"><span class="hl_varref"><span class="mpre">sink</span></span></a><span class="mpre">
            case </span><a href="#loc_62_13_62_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_13_62_15&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_64_22_64_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_22_64_23&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt;
                    case </span><span class="hl_varref"><span class="mpre">fromException</span></span><span class="mpre"> </span><a href="#loc_64_22_64_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_22_64_23&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
                        </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_66_30_66_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_30_66_32&#39;)"><span class="hl_vardecl"><span class="mpre">pe</span></span></a><span class="mpre"> -&gt; do
                            </span><a href="Data.Conduit.Attoparsec.html#loc_46_7_46_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_46_7_46_20&#39;)"><span class="hl_varref"><span class="mpre">errorPosition</span></span></a><span class="mpre"> </span><a href="#loc_66_30_66_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_30_66_32&#39;)"><span class="hl_varref"><span class="mpre">pe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><a href="#loc_58_17_58_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_17_58_24&#39;)"><span class="hl_varref"><span class="mpre">badLine</span></span></a><span class="mpre"> </span><a href="#loc_59_17_59_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_17_59_23&#39;)"><span class="hl_varref"><span class="mpre">badCol</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;works after new line in text&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_69_17_69_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_17_69_22&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot;aaa\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa\n\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aa\nb\naaaa&quot;</span></span><span class="mpre">]
                </span><a name="loc_70_17_70_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_17_70_24&#39;)"><span class="hl_vardecl"><span class="mpre">badLine</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">5</span></span><span class="mpre">
                </span><a name="loc_71_17_71_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_17_71_23&#39;)"><span class="hl_vardecl"><span class="mpre">badCol</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
                </span><a name="loc_72_17_72_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_17_72_23&#39;)"><span class="hl_vardecl"><span class="mpre">parser</span></span></a><span class="mpre"> = </span><a href="Data.Attoparsec.Internal.html#loc_98_1_98_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Internal.html#loc_98_1_98_11&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.endOfInput</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;|&gt;</span></span></a><span class="mpre"> (</span><a href="Data.Attoparsec.Text.Internal.html#loc_367_1_367_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Text.Internal.html#loc_367_1_367_8&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.notChar</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;b&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_72_17_72_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_17_72_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">)
                </span><a name="loc_73_17_73_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_17_73_21&#39;)"><span class="hl_vardecl"><span class="mpre">sink</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.Attoparsec.html#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_116_1_116_11&#39;)"><span class="hl_varref"><span class="mpre">sinkParser</span></span></a><span class="mpre"> </span><a href="#loc_72_17_72_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_17_72_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">
            </span><a name="loc_74_13_74_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_13_74_15&#39;)"><span class="hl_vardecl"><span class="mpre">ea</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Resource.html#loc_238_1_238_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Resource.html#loc_238_1_238_14&#39;)"><span class="hl_varref"><span class="mpre">runExceptionT</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_69_17_69_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_17_69_22&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">$$</span></span></a><span class="mpre"> </span><a href="#loc_73_17_73_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_17_73_21&#39;)"><span class="hl_varref"><span class="mpre">sink</span></span></a><span class="mpre">
            case </span><a href="#loc_74_13_74_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_13_74_15&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_76_22_76_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_22_76_23&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt;
                    case </span><span class="hl_varref"><span class="mpre">fromException</span></span><span class="mpre"> </span><a href="#loc_76_22_76_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_22_76_23&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
                        </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_78_30_78_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_30_78_32&#39;)"><span class="hl_vardecl"><span class="mpre">pe</span></span></a><span class="mpre"> -&gt; do
                            </span><a href="Data.Conduit.Attoparsec.html#loc_46_7_46_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_46_7_46_20&#39;)"><span class="hl_varref"><span class="mpre">errorPosition</span></span></a><span class="mpre"> </span><a href="#loc_78_30_78_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_30_78_32&#39;)"><span class="hl_varref"><span class="mpre">pe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><a href="#loc_70_17_70_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_17_70_24&#39;)"><span class="hl_varref"><span class="mpre">badLine</span></span></a><span class="mpre"> </span><a href="#loc_71_17_71_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_17_71_23&#39;)"><span class="hl_varref"><span class="mpre">badCol</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;works after new line in bytestring&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_81_17_81_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_17_81_22&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot;aaa\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa\n\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aa\nb\naaaa&quot;</span></span><span class="mpre">]
                </span><a name="loc_82_17_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_17_82_24&#39;)"><span class="hl_vardecl"><span class="mpre">badLine</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">5</span></span><span class="mpre">
                </span><a name="loc_83_17_83_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_17_83_23&#39;)"><span class="hl_vardecl"><span class="mpre">badCol</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
                </span><a name="loc_84_17_84_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_23&#39;)"><span class="hl_vardecl"><span class="mpre">parser</span></span></a><span class="mpre"> = </span><a href="Data.Attoparsec.Internal.html#loc_98_1_98_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Internal.html#loc_98_1_98_11&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.ByteString.Char8.endOfInput</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_142_5_142_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_142_5_142_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;|&gt;</span></span></a><span class="mpre"> (</span><a href="Data.Attoparsec.ByteString.Char8.html#loc_301_1_301_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.ByteString.Char8.html#loc_301_1_301_8&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.ByteString.Char8.notChar</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;b&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_84_17_84_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">)
                </span><a name="loc_85_17_85_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_17_85_21&#39;)"><span class="hl_vardecl"><span class="mpre">sink</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.Attoparsec.html#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_116_1_116_11&#39;)"><span class="hl_varref"><span class="mpre">sinkParser</span></span></a><span class="mpre"> </span><a href="#loc_84_17_84_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_17_84_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre">
            </span><a name="loc_86_13_86_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_13_86_15&#39;)"><span class="hl_vardecl"><span class="mpre">ea</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Resource.html#loc_238_1_238_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Resource.html#loc_238_1_238_14&#39;)"><span class="hl_varref"><span class="mpre">runExceptionT</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_81_17_81_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_17_81_22&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">$$</span></span></a><span class="mpre"> </span><a href="#loc_85_17_85_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_17_85_21&#39;)"><span class="hl_varref"><span class="mpre">sink</span></span></a><span class="mpre">
            case </span><a href="#loc_86_13_86_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_13_86_15&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_88_22_88_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_22_88_23&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt;
                    case </span><span class="hl_varref"><span class="mpre">fromException</span></span><span class="mpre"> </span><a href="#loc_88_22_88_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_22_88_23&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
                        </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_90_30_90_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_30_90_32&#39;)"><span class="hl_vardecl"><span class="mpre">pe</span></span></a><span class="mpre"> -&gt; do
                            </span><a href="Data.Conduit.Attoparsec.html#loc_46_7_46_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_46_7_46_20&#39;)"><span class="hl_varref"><span class="mpre">errorPosition</span></span></a><span class="mpre"> </span><a href="#loc_90_30_90_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_30_90_32&#39;)"><span class="hl_varref"><span class="mpre">pe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><a href="#loc_82_17_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_17_82_24&#39;)"><span class="hl_varref"><span class="mpre">badLine</span></span></a><span class="mpre"> </span><a href="#loc_83_17_83_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_17_83_23&#39;)"><span class="hl_varref"><span class="mpre">badCol</span></span></a><span class="mpre">

    </span><span class="hl_varref"><span class="mpre">describe</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;conduitParser&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;parses a repeated stream&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_95_17_95_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_17_95_22&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot;aaa\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa\naaa\n&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;aaa\n&quot;</span></span><span class="mpre">]
                </span><a name="loc_96_17_96_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_17_96_23&#39;)"><span class="hl_vardecl"><span class="mpre">parser</span></span></a><span class="mpre"> = </span><a href="Data.Attoparsec.Text.Internal.html#loc_162_1_162_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Text.Internal.html#loc_162_1_162_7&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.string</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;aaa&quot;</span></span><span class="mpre"> </span><a href="Control.Applicative.html#loc_125_5_125_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_125_5_125_9&#39;)"><span class="hl_infix"><span class="mpre">&lt;*</span></span></a><span class="mpre"> </span><a href="Data.Attoparsec.Text.Internal.html#loc_404_1_404_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Attoparsec.Text.Internal.html#loc_404_1_404_10&#39;)"><span class="hl_varref"><span class="mpre">Data.Attoparsec.Text.endOfLine</span></span></a><span class="mpre">
                </span><a name="loc_97_17_97_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_17_97_21&#39;)"><span class="hl_vardecl"><span class="mpre">sink</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.Attoparsec.html#loc_153_1_153_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Attoparsec.html#loc_153_1_153_20&#39;)"><span class="hl_varref"><span class="mpre">conduitParserEither</span></span></a><span class="mpre"> </span><a href="#loc_96_17_96_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_17_96_23&#39;)"><span class="hl_varref"><span class="mpre">parser</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_160_15_160_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_160_15_160_18&#39;)"><span class="hl_infix"><span class="mpre">=$=</span></span></a><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_450_1_450_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_450_1_450_8&#39;)"><span class="hl_varref"><span class="mpre">CL.consume</span></span></a><span class="mpre">
            (</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_98_20_98_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_20_98_22&#39;)"><span class="hl_vardecl"><span class="mpre">ea</span></span></a><span class="mpre">) &lt;- </span><a href="Control.Monad.Trans.Resource.html#loc_238_1_238_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Resource.html#loc_238_1_238_14&#39;)"><span class="hl_varref"><span class="mpre">runExceptionT</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_95_17_95_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_17_95_22&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">$$</span></span></a><span class="mpre"> </span><a href="#loc_97_17_97_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_17_97_21&#39;)"><span class="hl_varref"><span class="mpre">sink</span></span></a><span class="mpre">
            let </span><a name="loc_99_17_99_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_17_99_20&#39;)"><span class="hl_fundecl"><span class="mpre">chk</span></span></a><span class="mpre"> </span><a name="loc_99_21_99_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_21_99_22&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = case </span><a href="#loc_99_21_99_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_21_99_22&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> of
                          </span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/AttoparsecSpec.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 27, srcSpanEndLine = 100, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/AttoparsecSpec.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 31, srcSpanEndLine = 100, srcSpanEndColumn = 32},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra"><span class="mpre">Left{}</span></span><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
                          </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (_, </span><a name="loc_101_37_101_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_37_101_39&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_101_37_101_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_37_101_39&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;aaa&quot;</span></span><span class="mpre">
                </span><a name="loc_102_17_102_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_17_102_21&#39;)"><span class="hl_fundecl"><span class="mpre">chkp</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> = (</span><span class="hl_conref"><span class="mpre">PositionRange</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">))
                </span><a href="#loc_102_17_102_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_17_102_21&#39;)"><span class="hl_fundecl"><span class="mpre">chkp</span></span></a><span class="mpre"> </span><a name="loc_103_22_103_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_22_103_23&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = (</span><span class="hl_conref"><span class="mpre">PositionRange</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> </span><a href="#loc_103_22_103_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_22_103_23&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">Position</span></span><span class="mpre"> (</span><a href="#loc_103_22_103_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_22_103_23&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">))
            </span><a href="Control.Monad.html#loc_168_1_168_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_168_1_168_6&#39;)"><span class="hl_varref"><span class="mpre">forM_</span></span></a><span class="mpre"> </span><a href="#loc_98_20_98_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_20_98_22&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \ </span><a name="loc_104_26_104_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_26_104_27&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_104_26_104_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_26_104_27&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldSatisfy`</span></span><span class="mpre"> </span><a href="#loc_99_17_99_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_17_99_20&#39;)"><span class="hl_varref"><span class="mpre">chk</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Expectation</span></span><span class="mpre">
            </span><a href="Control.Monad.html#loc_168_1_168_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_168_1_168_6&#39;)"><span class="hl_varref"><span class="mpre">forM_</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> </span><a href="#loc_98_20_98_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_20_98_22&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpEnumFrom (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/AttoparsecSpec.hs&quot;, srcSpanStartLine = 105, srcSpanStartColumn = 27, srcSpanEndLine = 105, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/AttoparsecSpec.hs&quot;, srcSpanStartLine = 105, srcSpanStartColumn = 27, srcSpanEndLine = 105, srcSpanEndColumn = 28},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-e"><span class="mpre">[1..]</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \ (</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_105_46_105_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_46_105_49&#39;)"><span class="hl_vardecl"><span class="mpre">pos</span></span></a><span class="mpre">, _), </span><a name="loc_105_55_105_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_55_105_56&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_105_46_105_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_46_105_49&#39;)"><span class="hl_varref"><span class="mpre">pos</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><a href="#loc_102_17_102_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_17_102_21&#39;)"><span class="hl_varref"><span class="mpre">chkp</span></span></a><span class="mpre"> </span><a href="#loc_105_55_105_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_55_105_56&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
            </span><span class="hl_varref"><span class="mpre">length</span></span><span class="mpre"> </span><a href="#loc_98_20_98_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_20_98_22&#39;)"><span class="hl_varref"><span class="mpre">ea</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre">


</span></div></body></html>