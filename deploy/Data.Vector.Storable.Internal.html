<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      : Data.Vector.Storable.Internal</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   : (c) Roman Leshchinskiy 2009-2010</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     : BSD-style</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  : Roman Leshchinskiy &lt;rl@cse.unsw.edu.au&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   : experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability : non-portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Ugly internal utility functions for implementing &#39;Storable&#39;-based vectors.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">

module Data.Vector.Storable.Internal (
  getPtr, setPtr, updPtr
) where

import Control.Monad.Primitive ( </span><a href="Control.Monad.Primitive.html#loc_102_1_102_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Primitive.html#loc_102_1_102_15&#39;)"><span class="mpre">unsafeInlineIO</span></a><span class="mpre"> )
import Foreign.Storable
import Foreign.ForeignPtr
import Foreign.Ptr
import Foreign.Marshal.Array ( </span><a href="Foreign.Marshal.Array.html#loc_260_1_260_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Array.html#loc_260_1_260_11&#39;)"><span class="mpre">advancePtr</span></a><span class="mpre"> )
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/vector-0.10.11.0/Data/Vector/Storable/Internal.hs&quot;, srcSpanStartLine = 22, srcSpanStartColumn = 8, srcSpanEndLine = 22, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre">         ( quotInt )
import GHC.ForeignPtr   ( </span><a href="GHC.ForeignPtr.html#loc_73_6_73_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_6_73_16&#39;)"><span class="mpre">ForeignPtr</span></a><span class="mpre">(..) )
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/vector-0.10.11.0/Data/Vector/Storable/Internal.hs&quot;, srcSpanStartLine = 24, srcSpanStartColumn = 8, srcSpanEndLine = 24, srcSpanEndColumn = 15}, srcInfoPoints = []}) &quot;GHC.Ptr&quot;"><span class="mpre">GHC.Ptr</span></span><span class="mpre">          ( Ptr(..) )

</span><a href="#loc_28_1_28_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_1_28_7&#39;)"><span class="mpre">getPtr</span></a><span class="mpre"> :: </span><a href="GHC.ForeignPtr.html#loc_73_6_73_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_6_73_16&#39;)"><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_28_1_28_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_1_28_7&#39;)"><span class="mpre">getPtr</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a name="loc_28_1_28_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_1_28_7&#39;)"><span class="hl_fundecl"><span class="mpre">getPtr</span></span></a><span class="mpre"> (</span><a href="GHC.ForeignPtr.html#loc_73_21_73_31" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_21_73_31&#39;)"><span class="hl_conref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><a name="loc_28_20_28_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_20_28_24&#39;)"><span class="hl_vardecl"><span class="mpre">addr</span></span></a><span class="mpre"> _) = </span><span class="hl_conref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><a href="#loc_28_20_28_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_20_28_24&#39;)"><span class="hl_varref"><span class="mpre">addr</span></span></a><span class="mpre">

</span><a href="#loc_32_1_32_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_7&#39;)"><span class="mpre">setPtr</span></a><span class="mpre"> :: </span><a href="GHC.ForeignPtr.html#loc_73_6_73_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_6_73_16&#39;)"><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="GHC.ForeignPtr.html#loc_73_6_73_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_6_73_16&#39;)"><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_32_1_32_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_7&#39;)"><span class="mpre">setPtr</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a name="loc_32_1_32_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_7&#39;)"><span class="hl_fundecl"><span class="mpre">setPtr</span></span></a><span class="mpre"> (</span><a href="GHC.ForeignPtr.html#loc_73_21_73_31" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_21_73_31&#39;)"><span class="hl_conref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> _ </span><a name="loc_32_22_32_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_22_32_23&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><a name="loc_32_30_32_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_30_32_34&#39;)"><span class="hl_vardecl"><span class="mpre">addr</span></span></a><span class="mpre">) = </span><a href="GHC.ForeignPtr.html#loc_73_21_73_31" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_21_73_31&#39;)"><span class="hl_conref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_32_30_32_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_30_32_34&#39;)"><span class="hl_varref"><span class="mpre">addr</span></span></a><span class="mpre"> </span><a href="#loc_32_22_32_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_22_32_23&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">

</span><a href="#loc_36_1_36_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_7&#39;)"><span class="mpre">updPtr</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><a href="GHC.ForeignPtr.html#loc_73_6_73_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_6_73_16&#39;)"><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="GHC.ForeignPtr.html#loc_73_6_73_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_6_73_16&#39;)"><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_36_1_36_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_7&#39;)"><span class="mpre">updPtr</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a name="loc_36_1_36_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_7&#39;)"><span class="hl_fundecl"><span class="mpre">updPtr</span></span></a><span class="mpre"> </span><a name="loc_36_8_36_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_8_36_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="GHC.ForeignPtr.html#loc_73_21_73_31" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_21_73_31&#39;)"><span class="hl_conref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><a name="loc_36_22_36_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_22_36_23&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_36_24_36_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_24_36_25&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">) = case </span><a href="#loc_36_8_36_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_8_36_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><a href="#loc_36_22_36_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_22_36_23&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">) of { </span><span class="hl_conref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><a name="loc_36_53_36_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_53_36_54&#39;)"><span class="hl_vardecl"><span class="mpre">q</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.ForeignPtr.html#loc_73_21_73_31" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.ForeignPtr.html#loc_73_21_73_31&#39;)"><span class="hl_conref"><span class="mpre">ForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_36_53_36_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_53_36_54&#39;)"><span class="hl_varref"><span class="mpre">q</span></span></a><span class="mpre"> </span><a href="#loc_36_24_36_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_24_36_25&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> }

</span></div></body></html>