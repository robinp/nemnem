<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE Trustworthy #-}
{-# LANGUAGE CPP, MagicHash, UnboxedTuples, NoImplicitPrelude #-}
{-# OPTIONS_HADDOCK hide #-}

</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  GHC.Float.RealFracMethods</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (c) Daniel Fischer 2010</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  see libraries/base/LICENSE</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  cvs-ghc@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  internal</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable (GHC Extensions)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Methods for the RealFrac instances for &#39;Float&#39; and &#39;Double&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- with specialised versions for &#39;Int&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Moved to their own module to not bloat GHC.Float further.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">

#include &quot;MachDeps.h&quot;

module GHC.Float.RealFracMethods
    ( </span><span class="hl_comment"><span class="mpre">-- * Double methods</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- ** Integer results</span></span><span class="mpre">
      properFractionDoubleInteger
    , truncateDoubleInteger
    , floorDoubleInteger
    , ceilingDoubleInteger
    , roundDoubleInteger
      </span><span class="hl_comment"><span class="mpre">-- ** Int results</span></span><span class="mpre">
    , properFractionDoubleInt
    , floorDoubleInt
    , ceilingDoubleInt
    , roundDoubleInt
      </span><span class="hl_comment"><span class="mpre">-- * Double/Int conversions, wrapped primops</span></span><span class="mpre">
    , double2Int
    , int2Double
      </span><span class="hl_comment"><span class="mpre">-- * Float methods</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- ** Integer results</span></span><span class="mpre">
    , properFractionFloatInteger
    , truncateFloatInteger
    , floorFloatInteger
    , ceilingFloatInteger
    , roundFloatInteger
      </span><span class="hl_comment"><span class="mpre">-- ** Int results</span></span><span class="mpre">
    , properFractionFloatInt
    , floorFloatInt
    , ceilingFloatInt
    , roundFloatInt
      </span><span class="hl_comment"><span class="mpre">-- * Float/Int conversions, wrapped primops</span></span><span class="mpre">
    , float2Int
    , int2Float
    ) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 57, srcSpanStartColumn = 8, srcSpanEndLine = 57, srcSpanEndColumn = 19}, srcInfoPoints = []}) &quot;GHC.Integer&quot;"><span class="mpre">GHC.Integer</span></span><span class="mpre">

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 59, srcSpanStartColumn = 8, srcSpanEndLine = 59, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 60, srcSpanStartColumn = 8, srcSpanEndLine = 60, srcSpanEndColumn = 15}, srcInfoPoints = []}) &quot;GHC.Num&quot;"><span class="mpre">GHC.Num</span></span><span class="mpre"> ()

#if WORD_SIZE_IN_BITS &lt; 64

import GHC.IntWord64

#define TO64 integerToInt64
#define FROM64 int64ToInteger
#define MINUS64 minusInt64#
#define NEGATE64 negateInt64#

#else

#define TO64 integerToInt
#define FROM64 smallInteger
#define MINUS64 ( -# )
#define NEGATE64 negateInt#

</span><a href="#loc_79_1_79_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_21&#39;)"><span class="mpre">uncheckedIShiftRA64#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre">
</span><a name="loc_79_1_79_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_21&#39;)"><span class="hl_vardecl"><span class="mpre">uncheckedIShiftRA64#</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">uncheckedIShiftRA#</span></span><span class="mpre">

</span><a href="#loc_82_1_82_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_20&#39;)"><span class="mpre">uncheckedIShiftL64#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre">
</span><a name="loc_82_1_82_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_20&#39;)"><span class="hl_vardecl"><span class="mpre">uncheckedIShiftL64#</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">uncheckedIShiftL#</span></span><span class="mpre">

#endif

</span><span class="warning" data-warning="DeclDefaultDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 86, srcSpanStartColumn = 1, srcSpanEndLine = 86, srcSpanEndColumn = 11}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 86, srcSpanStartColumn = 1, srcSpanEndLine = 86, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs"><span class="mpre">default ()</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                              Float Methods                               --</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Special Functions for Int, nice, easy and fast.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- They should be small enough to be inlined automatically.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- We have to test for ±0.0 to avoid returning -0.0 in the second</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- component of the pair. Unfortunately the branching costs a lot</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of performance.</span></span><span class="mpre">
</span><a href="#loc_99_1_99_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_23&#39;)"><span class="mpre">properFractionFloatInt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre">)
</span><a name="loc_99_1_99_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_23&#39;)"><span class="hl_fundecl"><span class="mpre">properFractionFloatInt</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> </span><a name="loc_99_28_99_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_28_99_29&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    if </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_99_28_99_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_28_99_29&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`eqFloat#`</span></span><span class="mpre"> 0.0#)
        then (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> 0#, </span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> 0.0#)
        else case </span><span class="hl_varref"><span class="mpre">float2Int#</span></span><span class="mpre"> </span><a href="#loc_99_28_99_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_28_99_29&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
                </span><a name="loc_103_17_103_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_17_103_18&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a href="#loc_103_17_103_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_17_103_18&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> (</span><a href="#loc_99_28_99_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_28_99_29&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`minusFloat#`</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">int2Float#</span></span><span class="mpre"> </span><a href="#loc_103_17_103_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_17_103_18&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">))

</span><span class="hl_comment"><span class="mpre">-- truncateFloatInt = float2Int</span></span><span class="mpre">

</span><a href="#loc_108_1_108_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_1_108_14&#39;)"><span class="mpre">floorFloatInt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_108_1_108_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_1_108_14&#39;)"><span class="hl_fundecl"><span class="mpre">floorFloatInt</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> </span><a name="loc_108_19_108_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_19_108_20&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">float2Int#</span></span><span class="mpre"> </span><a href="#loc_108_19_108_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_19_108_20&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      </span><a name="loc_110_7_110_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_7_110_8&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_108_19_108_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_19_108_20&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`ltFloat#`</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">int2Float#</span></span><span class="mpre"> </span><a href="#loc_110_7_110_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_7_110_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) -&gt; </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> (</span><a href="#loc_110_7_110_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_7_110_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-#</span></span><span class="mpre"> 1#)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                           -&gt; </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a href="#loc_110_7_110_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_7_110_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">

</span><a href="#loc_114_1_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_1_114_16&#39;)"><span class="mpre">ceilingFloatInt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_114_1_114_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_1_114_16&#39;)"><span class="hl_fundecl"><span class="mpre">ceilingFloatInt</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> </span><a name="loc_114_21_114_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_21_114_22&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">float2Int#</span></span><span class="mpre"> </span><a href="#loc_114_21_114_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_21_114_22&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      </span><a name="loc_116_7_116_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_7_116_8&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">int2Float#</span></span><span class="mpre"> </span><a href="#loc_116_7_116_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_7_116_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`ltFloat#`</span></span><span class="mpre"> </span><a href="#loc_114_21_114_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_21_114_22&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) -&gt; </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> (</span><a href="#loc_116_7_116_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_7_116_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+#</span></span><span class="mpre"> 1#)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                           -&gt; </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a href="#loc_116_7_116_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_7_116_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">

</span><a href="#loc_120_1_120_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_14&#39;)"><span class="mpre">roundFloatInt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_120_1_120_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_14&#39;)"><span class="hl_fundecl"><span class="mpre">roundFloatInt</span></span></a><span class="mpre"> </span><a name="loc_120_15_120_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_15_120_16&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_298_1_298_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_298_1_298_10&#39;)"><span class="hl_varref"><span class="mpre">float2Int</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">c_rintFloat</span></span><span class="mpre"> </span><a href="#loc_120_15_120_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_15_120_16&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- Functions with Integer results</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- With the new code generator in GHC 7, the explicit bit-fiddling is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- slower than the old code for values of small modulus, but when the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Int&#39; range is left, the bit-fiddling quickly wins big, so we use that.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the methods are called on smallish values, hopefully people go</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- through Int and not larger types.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Note: For negative exponents, we must check the validity of the shift</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- distance for the right shifts of the mantissa.</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_135_1_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_27&#39;)"><span class="mpre">properFractionFloatInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_135_1_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_27&#39;)"><span class="mpre">properFractionFloatInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre">)
</span><a name="loc_135_1_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_27&#39;)"><span class="hl_fundecl"><span class="mpre">properFractionFloatInteger</span></span></a><span class="mpre"> </span><a name="loc_135_28_135_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_28_135_29&#39;)"><span class="hl_specname"><span class="mpre">v</span></span></a><span class="mpre">@(</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> </span><a name="loc_135_34_135_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_34_135_35&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">decodeFloat_Int#</span></span><span class="mpre"> </span><a href="#loc_135_34_135_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_34_135_35&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      (# </span><a name="loc_137_10_137_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">, </span><a name="loc_137_13_137_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_13_137_14&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> #)
        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_137_13_137_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_13_137_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 0#) -&gt;
          case </span><span class="hl_varref"><span class="mpre">negateInt#</span></span><span class="mpre"> </span><a href="#loc_137_13_137_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_13_137_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
            </span><a name="loc_140_13_140_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_13_140_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_140_13_140_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_13_140_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;#</span></span><span class="mpre"> 23#) -&gt; (</span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">, </span><a href="#loc_135_28_135_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_28_135_29&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">)
              | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_137_10_137_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre">  0#) -&gt;
                case </span><span class="hl_varref"><span class="mpre">negateInt#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">negateInt#</span></span><span class="mpre"> </span><a href="#loc_137_10_137_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`uncheckedIShiftRA#`</span></span><span class="mpre"> </span><a href="#loc_140_13_140_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_13_140_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) of
                  </span><a name="loc_143_19_143_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_19_143_20&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> </span><a href="#loc_143_19_143_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_19_143_20&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">,
                            case </span><a href="#loc_137_10_137_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-#</span></span><span class="mpre"> (</span><a href="#loc_143_19_143_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_19_143_20&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`uncheckedIShiftL#`</span></span><span class="mpre"> </span><a href="#loc_140_13_140_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_13_140_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) of
                              </span><a name="loc_145_31_145_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_31_145_32&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">encodeFloatInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> </span><a href="#loc_145_31_145_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_31_145_32&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">) </span><a href="#loc_137_13_137_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_13_137_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">))
              | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">           -&gt;
                case </span><a href="#loc_137_10_137_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`uncheckedIShiftRL#`</span></span><span class="mpre"> </span><a href="#loc_140_13_140_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_13_140_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                  </span><a name="loc_148_19_148_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_19_148_20&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> </span><a href="#loc_148_19_148_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_19_148_20&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">,
                            case </span><a href="#loc_137_10_137_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-#</span></span><span class="mpre"> (</span><a href="#loc_148_19_148_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_19_148_20&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`uncheckedIShiftL#`</span></span><span class="mpre"> </span><a href="#loc_140_13_140_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_13_140_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) of
                              </span><a name="loc_150_31_150_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_31_150_32&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">encodeFloatInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> </span><a href="#loc_150_31_150_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_31_150_32&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">) </span><a href="#loc_137_13_137_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_13_137_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">))
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; (</span><span class="hl_varref"><span class="mpre">shiftLInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> </span><a href="#loc_137_10_137_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) </span><a href="#loc_137_13_137_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_13_137_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> 0.0#)

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_155_1_155_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_1_155_21&#39;)"><span class="mpre">truncateFloatInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_155_1_155_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_1_155_21&#39;)"><span class="mpre">truncateFloatInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_155_1_155_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_1_155_21&#39;)"><span class="hl_fundecl"><span class="mpre">truncateFloatInteger</span></span></a><span class="mpre"> </span><a name="loc_155_22_155_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_22_155_23&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> =
    case </span><a href="#loc_135_1_135_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_27&#39;)"><span class="hl_varref"><span class="mpre">properFractionFloatInteger</span></span></a><span class="mpre"> </span><a href="#loc_155_22_155_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_22_155_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      (</span><a name="loc_157_8_157_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_8_157_9&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre">, _) -&gt; </span><a href="#loc_157_8_157_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_8_157_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- floor is easier for negative numbers than truncate, so this gets its</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- own implementation, it&#39;s a little faster.</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_163_1_163_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_18&#39;)"><span class="mpre">floorFloatInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_163_1_163_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_18&#39;)"><span class="mpre">floorFloatInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_163_1_163_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_18&#39;)"><span class="hl_fundecl"><span class="mpre">floorFloatInteger</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> </span><a name="loc_163_23_163_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_23_163_24&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">decodeFloat_Int#</span></span><span class="mpre"> </span><a href="#loc_163_23_163_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_23_163_24&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      (# </span><a name="loc_165_10_165_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_10_165_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">, </span><a name="loc_165_13_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_13_165_14&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> #)
        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_165_13_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_13_165_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 0#) -&gt;
          case </span><span class="hl_varref"><span class="mpre">negateInt#</span></span><span class="mpre"> </span><a href="#loc_165_13_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_13_165_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
            </span><a name="loc_168_13_168_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_13_168_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_168_13_168_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_13_168_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;#</span></span><span class="mpre"> 23#) -&gt; if </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_165_10_165_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_10_165_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 0#) then (-</span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) else </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
              | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">          -&gt; </span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> (</span><a href="#loc_165_10_165_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_10_165_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`uncheckedIShiftRA#`</span></span><span class="mpre"> </span><a href="#loc_168_13_168_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_13_168_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">shiftLInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> </span><a href="#loc_165_10_165_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_10_165_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) </span><a href="#loc_165_13_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_13_165_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ceiling x = -floor (-x)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If giving this its own implementation is faster at all,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it&#39;s only marginally so, hence we keep it short.</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_177_1_177_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_20&#39;)"><span class="mpre">ceilingFloatInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_177_1_177_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_20&#39;)"><span class="mpre">ceilingFloatInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_177_1_177_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_20&#39;)"><span class="hl_fundecl"><span class="mpre">ceilingFloatInteger</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> </span><a name="loc_177_25_177_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_25_177_26&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    </span><span class="hl_varref"><span class="mpre">negateInteger</span></span><span class="mpre"> (</span><a href="#loc_163_1_163_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_18&#39;)"><span class="hl_varref"><span class="mpre">floorFloatInteger</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">negateFloat#</span></span><span class="mpre"> </span><a href="#loc_177_25_177_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_25_177_26&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)))

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_182_1_182_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_1_182_18&#39;)"><span class="mpre">roundFloatInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_182_1_182_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_1_182_18&#39;)"><span class="mpre">roundFloatInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_182_1_182_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_1_182_18&#39;)"><span class="hl_fundecl"><span class="mpre">roundFloatInteger</span></span></a><span class="mpre"> </span><a name="loc_182_19_182_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_19_182_20&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_322_1_322_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_14&#39;)"><span class="hl_varref"><span class="mpre">float2Integer</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">c_rintFloat</span></span><span class="mpre"> </span><a href="#loc_182_19_182_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_19_182_20&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                              Double Methods                              --</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Special Functions for Int, nice, easy and fast.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- They should be small enough to be inlined automatically.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- We have to test for ±0.0 to avoid returning -0.0 in the second</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- component of the pair. Unfortunately the branching costs a lot</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of performance.</span></span><span class="mpre">
</span><a href="#loc_195_1_195_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_1_195_24&#39;)"><span class="mpre">properFractionDoubleInt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre">)
</span><a name="loc_195_1_195_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_1_195_24&#39;)"><span class="hl_fundecl"><span class="mpre">properFractionDoubleInt</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> </span><a name="loc_195_29_195_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_29_195_30&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    if </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_195_29_195_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_29_195_30&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==##</span></span><span class="mpre"> 0.0##)
        then (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> 0#, </span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> 0.0##)
        else case </span><span class="hl_varref"><span class="mpre">double2Int#</span></span><span class="mpre"> </span><a href="#loc_195_29_195_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_29_195_30&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
                </span><a name="loc_199_17_199_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_17_199_18&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a href="#loc_199_17_199_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_17_199_18&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> (</span><a href="#loc_195_29_195_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_29_195_30&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-##</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">int2Double#</span></span><span class="mpre"> </span><a href="#loc_199_17_199_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_17_199_18&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">))

</span><span class="hl_comment"><span class="mpre">-- truncateDoubleInt = double2Int</span></span><span class="mpre">

</span><a href="#loc_204_1_204_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_1_204_15&#39;)"><span class="mpre">floorDoubleInt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_204_1_204_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_1_204_15&#39;)"><span class="hl_fundecl"><span class="mpre">floorDoubleInt</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> </span><a name="loc_204_20_204_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_20_204_21&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">double2Int#</span></span><span class="mpre"> </span><a href="#loc_204_20_204_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_20_204_21&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      </span><a name="loc_206_7_206_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_7_206_8&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_204_20_204_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_20_204_21&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;##</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">int2Double#</span></span><span class="mpre"> </span><a href="#loc_206_7_206_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_7_206_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) -&gt; </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> (</span><a href="#loc_206_7_206_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_7_206_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-#</span></span><span class="mpre"> 1#)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                     -&gt; </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a href="#loc_206_7_206_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_7_206_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">

</span><a href="#loc_210_1_210_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_17&#39;)"><span class="mpre">ceilingDoubleInt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_210_1_210_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_17&#39;)"><span class="hl_fundecl"><span class="mpre">ceilingDoubleInt</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> </span><a name="loc_210_22_210_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_22_210_23&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">double2Int#</span></span><span class="mpre"> </span><a href="#loc_210_22_210_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_22_210_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      </span><a name="loc_212_7_212_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_7_212_8&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">int2Double#</span></span><span class="mpre"> </span><a href="#loc_212_7_212_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_7_212_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;##</span></span><span class="mpre"> </span><a href="#loc_210_22_210_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_22_210_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) -&gt; </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> (</span><a href="#loc_212_7_212_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_7_212_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+#</span></span><span class="mpre"> 1#)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                     -&gt; </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a href="#loc_212_7_212_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_7_212_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">

</span><a href="#loc_216_1_216_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_1_216_15&#39;)"><span class="mpre">roundDoubleInt</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_216_1_216_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_1_216_15&#39;)"><span class="hl_fundecl"><span class="mpre">roundDoubleInt</span></span></a><span class="mpre"> </span><a name="loc_216_16_216_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_16_216_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_292_1_292_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_1_292_11&#39;)"><span class="hl_varref"><span class="mpre">double2Int</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">c_rintDouble</span></span><span class="mpre"> </span><a href="#loc_216_16_216_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_16_216_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- Functions with Integer results</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- The new Code generator isn&#39;t quite as good for the old &#39;Double&#39; code</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as for the &#39;Float&#39; code, so for &#39;Double&#39; the bit-fiddling also wins</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- when the values have small modulus.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- When the exponent is negative, all mantissae have less than 64 bits</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and the right shifting of sized types is much faster than that of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Integer&#39;s, especially when we can</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Note: For negative exponents, we must check the validity of the shift</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- distance for the right shifts of the mantissa.</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_233_1_233_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_1_233_28&#39;)"><span class="mpre">properFractionDoubleInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_233_1_233_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_1_233_28&#39;)"><span class="mpre">properFractionDoubleInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre">)
</span><a name="loc_233_1_233_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_1_233_28&#39;)"><span class="hl_fundecl"><span class="mpre">properFractionDoubleInteger</span></span></a><span class="mpre"> </span><a name="loc_233_29_233_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_29_233_30&#39;)"><span class="hl_specname"><span class="mpre">v</span></span></a><span class="mpre">@(</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> </span><a name="loc_233_35_233_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_35_233_36&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">decodeDoubleInteger</span></span><span class="mpre"> </span><a href="#loc_233_35_233_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_35_233_36&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      (# </span><a name="loc_235_10_235_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_10_235_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">, </span><a name="loc_235_13_235_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_14&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> #)
        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_235_13_235_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 0#) -&gt;
          case </span><span class="hl_varref"><span class="mpre">negateInt#</span></span><span class="mpre"> </span><a href="#loc_235_13_235_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
            </span><a name="loc_238_13_238_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_13_238_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_238_13_238_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_13_238_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;#</span></span><span class="mpre"> 52#) -&gt; (</span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">, </span><a href="#loc_233_29_233_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_29_233_30&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">)
              | </span><a href="#loc_235_10_235_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_10_235_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">                 -&gt;
                case </span><span class="hl_conref"><span class="mpre">TO64</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">negateInteger</span></span><span class="mpre"> </span><a href="#loc_235_10_235_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_10_235_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) of
                  </span><a name="loc_241_19_241_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_19_241_20&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> -&gt;
                    case </span><a href="#loc_241_19_241_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_19_241_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_79_1_79_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_21&#39;)"><span class="hl_infix"><span class="mpre">`uncheckedIShiftRA64#`</span></span></a><span class="mpre"> </span><a href="#loc_238_13_238_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_13_238_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                      </span><a name="loc_243_23_243_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_23_243_24&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> -&gt;
                        (</span><span class="hl_conref"><span class="mpre">FROM64</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">NEGATE64</span></span><span class="mpre"> </span><a href="#loc_243_23_243_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_23_243_24&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">),
                          case </span><span class="hl_conref"><span class="mpre">MINUS64</span></span><span class="mpre"> </span><a href="#loc_241_19_241_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_19_241_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="#loc_243_23_243_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_23_243_24&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_82_1_82_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_20&#39;)"><span class="hl_infix"><span class="mpre">`uncheckedIShiftL64#`</span></span></a><span class="mpre"> </span><a href="#loc_238_13_238_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_13_238_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) of
                            </span><a name="loc_246_29_246_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_29_246_30&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt;
                              </span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">encodeDoubleInteger</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">FROM64</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">NEGATE64</span></span><span class="mpre"> </span><a href="#loc_246_29_246_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_29_246_30&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)) </span><a href="#loc_235_13_235_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">))
              | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">           -&gt;
                case </span><span class="hl_conref"><span class="mpre">TO64</span></span><span class="mpre"> </span><a href="#loc_235_10_235_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_10_235_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> of
                  </span><a name="loc_250_19_250_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_19_250_20&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> -&gt;
                    case </span><a href="#loc_250_19_250_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_19_250_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_79_1_79_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_21&#39;)"><span class="hl_infix"><span class="mpre">`uncheckedIShiftRA64#`</span></span></a><span class="mpre"> </span><a href="#loc_238_13_238_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_13_238_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                      </span><a name="loc_252_23_252_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_252_23_252_24&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_conref"><span class="mpre">FROM64</span></span><span class="mpre"> </span><a href="#loc_252_23_252_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_252_23_252_24&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">,
                            case </span><span class="hl_conref"><span class="mpre">MINUS64</span></span><span class="mpre"> </span><a href="#loc_250_19_250_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_19_250_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="#loc_252_23_252_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_252_23_252_24&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_82_1_82_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_20&#39;)"><span class="hl_infix"><span class="mpre">`uncheckedIShiftL64#`</span></span></a><span class="mpre"> </span><a href="#loc_238_13_238_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_13_238_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) of
                              </span><a name="loc_254_31_254_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_31_254_32&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">encodeDoubleInteger</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">FROM64</span></span><span class="mpre"> </span><a href="#loc_254_31_254_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_31_254_32&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">) </span><a href="#loc_235_13_235_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">))
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; (</span><span class="hl_varref"><span class="mpre">shiftLInteger</span></span><span class="mpre"> </span><a href="#loc_235_10_235_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_10_235_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="#loc_235_13_235_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> 0.0##)

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_259_1_259_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_22&#39;)"><span class="mpre">truncateDoubleInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_259_1_259_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_22&#39;)"><span class="mpre">truncateDoubleInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_259_1_259_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_22&#39;)"><span class="hl_fundecl"><span class="mpre">truncateDoubleInteger</span></span></a><span class="mpre"> </span><a name="loc_259_23_259_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_23_259_24&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> =
    case </span><a href="#loc_233_1_233_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_1_233_28&#39;)"><span class="hl_varref"><span class="mpre">properFractionDoubleInteger</span></span></a><span class="mpre"> </span><a href="#loc_259_23_259_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_23_259_24&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      (</span><a name="loc_261_8_261_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_8_261_9&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre">, _) -&gt; </span><a href="#loc_261_8_261_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_8_261_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- floor is easier for negative numbers than truncate, so this gets its</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- own implementation, it&#39;s a little faster.</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_267_1_267_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_19&#39;)"><span class="mpre">floorDoubleInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_267_1_267_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_19&#39;)"><span class="mpre">floorDoubleInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_267_1_267_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_19&#39;)"><span class="hl_fundecl"><span class="mpre">floorDoubleInteger</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> </span><a name="loc_267_24_267_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_24_267_25&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">decodeDoubleInteger</span></span><span class="mpre"> </span><a href="#loc_267_24_267_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_24_267_25&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      (# </span><a name="loc_269_10_269_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_10_269_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">, </span><a name="loc_269_13_269_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_13_269_14&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> #)
        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_269_13_269_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_13_269_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 0#) -&gt;
          case </span><span class="hl_varref"><span class="mpre">negateInt#</span></span><span class="mpre"> </span><a href="#loc_269_13_269_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_13_269_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
            </span><a name="loc_272_13_272_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_13_272_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_272_13_272_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_13_272_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;#</span></span><span class="mpre"> 52#) -&gt; if </span><a href="#loc_269_10_269_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_10_269_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> then (-</span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) else </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
              | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">          -&gt;
                case </span><span class="hl_conref"><span class="mpre">TO64</span></span><span class="mpre"> </span><a href="#loc_269_10_269_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_10_269_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> of
                  </span><a name="loc_275_19_275_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_275_19_275_20&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">FROM64</span></span><span class="mpre"> (</span><a href="#loc_275_19_275_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_275_19_275_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_79_1_79_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_21&#39;)"><span class="hl_infix"><span class="mpre">`uncheckedIShiftRA64#`</span></span></a><span class="mpre"> </span><a href="#loc_272_13_272_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_13_272_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">shiftLInteger</span></span><span class="mpre"> </span><a href="#loc_269_10_269_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_10_269_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="#loc_269_13_269_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_13_269_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_280_1_280_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_1_280_21&#39;)"><span class="mpre">ceilingDoubleInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_280_1_280_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_1_280_21&#39;)"><span class="mpre">ceilingDoubleInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_280_1_280_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_1_280_21&#39;)"><span class="hl_fundecl"><span class="mpre">ceilingDoubleInteger</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> </span><a name="loc_280_26_280_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_26_280_27&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    </span><span class="hl_varref"><span class="mpre">negateInteger</span></span><span class="mpre"> (</span><a href="#loc_267_1_267_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_19&#39;)"><span class="hl_varref"><span class="mpre">floorDoubleInteger</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">negateDouble#</span></span><span class="mpre"> </span><a href="#loc_280_26_280_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_26_280_27&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)))

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_285_1_285_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_1_285_19&#39;)"><span class="mpre">roundDoubleInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_285_1_285_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_1_285_19&#39;)"><span class="mpre">roundDoubleInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_285_1_285_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_1_285_19&#39;)"><span class="hl_fundecl"><span class="mpre">roundDoubleInteger</span></span></a><span class="mpre"> </span><a name="loc_285_20_285_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_20_285_21&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_312_1_312_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_1_312_15&#39;)"><span class="hl_varref"><span class="mpre">double2Integer</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">c_rintDouble</span></span><span class="mpre"> </span><a href="#loc_285_20_285_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_20_285_21&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- Wrappers around double2Int#, int2Double#, float2Int# and int2Float#,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- we need them here, so we move them from GHC.Float and re-export them</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- explicitly from there.</span></span><span class="mpre">

</span><a href="#loc_292_1_292_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_1_292_11&#39;)"><span class="mpre">double2Int</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_292_1_292_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_1_292_11&#39;)"><span class="hl_fundecl"><span class="mpre">double2Int</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> </span><a name="loc_292_16_292_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_16_292_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">double2Int#</span></span><span class="mpre"> </span><a href="#loc_292_16_292_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_16_292_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><a href="#loc_295_1_295_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_1_295_11&#39;)"><span class="mpre">int2Double</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre">
</span><a name="loc_295_1_295_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_1_295_11&#39;)"><span class="hl_fundecl"><span class="mpre">int2Double</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_295_16_295_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_16_295_17&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">int2Double#</span></span><span class="mpre"> </span><a href="#loc_295_16_295_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_16_295_17&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">)

</span><a href="#loc_298_1_298_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_298_1_298_10&#39;)"><span class="mpre">float2Int</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_298_1_298_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_298_1_298_10&#39;)"><span class="hl_fundecl"><span class="mpre">float2Int</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> </span><a name="loc_298_15_298_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_298_15_298_16&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">float2Int#</span></span><span class="mpre"> </span><a href="#loc_298_15_298_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_298_15_298_16&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><a href="#loc_301_1_301_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_1_301_10&#39;)"><span class="mpre">int2Float</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre">
</span><a name="loc_301_1_301_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_1_301_10&#39;)"><span class="hl_fundecl"><span class="mpre">int2Float</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">I#</span></span><span class="mpre"> </span><a name="loc_301_15_301_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_15_301_16&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">int2Float#</span></span><span class="mpre"> </span><a href="#loc_301_15_301_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_15_301_16&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- Quicker conversions from &#39;Double&#39; and &#39;Float&#39; to &#39;Integer&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- assuming the floating point value is integral.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: Since the value is integral, the exponent can&#39;t be less than</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (-TYP_MANT_DIG), so we need not check the validity of the shift</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- distance for the right shfts here.</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_312_1_312_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_1_312_15&#39;)"><span class="mpre">double2Integer</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_312_1_312_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_1_312_15&#39;)"><span class="mpre">double2Integer</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Double</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_312_1_312_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_1_312_15&#39;)"><span class="hl_fundecl"><span class="mpre">double2Integer</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">D#</span></span><span class="mpre"> </span><a name="loc_312_20_312_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_20_312_21&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">decodeDoubleInteger</span></span><span class="mpre"> </span><a href="#loc_312_20_312_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_20_312_21&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      (# </span><a name="loc_314_10_314_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_10_314_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">, </span><a name="loc_314_13_314_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_13_314_14&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> #)
        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_314_13_314_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_13_314_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 0#) -&gt;
          case </span><span class="hl_conref"><span class="mpre">TO64</span></span><span class="mpre"> </span><a href="#loc_314_10_314_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_10_314_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> of
            </span><a name="loc_317_13_317_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_13_317_14&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">FROM64</span></span><span class="mpre"> (</span><a href="#loc_317_13_317_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_13_317_14&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_79_1_79_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_21&#39;)"><span class="hl_infix"><span class="mpre">`uncheckedIShiftRA64#`</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">negateInt#</span></span><span class="mpre"> </span><a href="#loc_314_13_314_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_13_314_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">shiftLInteger</span></span><span class="mpre"> </span><a href="#loc_314_10_314_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_10_314_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="#loc_314_13_314_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_13_314_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_322_1_322_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_14&#39;)"><span class="mpre">float2Integer</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_322_1_322_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_14&#39;)"><span class="mpre">float2Integer</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Float</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
</span><a name="loc_322_1_322_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_14&#39;)"><span class="hl_fundecl"><span class="mpre">float2Integer</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">F#</span></span><span class="mpre"> </span><a name="loc_322_19_322_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_19_322_20&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) =
    case </span><span class="hl_varref"><span class="mpre">decodeFloat_Int#</span></span><span class="mpre"> </span><a href="#loc_322_19_322_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_19_322_20&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
      (# </span><a name="loc_324_10_324_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_10_324_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">, </span><a name="loc_324_13_324_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_13_324_14&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> #)
        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_324_13_324_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_13_324_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 0#) -&gt; </span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> (</span><a href="#loc_324_10_324_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_10_324_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`uncheckedIShiftRA#`</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">negateInt#</span></span><span class="mpre"> </span><a href="#loc_324_13_324_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_13_324_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">         -&gt; </span><span class="hl_varref"><span class="mpre">shiftLInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> </span><a href="#loc_324_10_324_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_10_324_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) </span><a href="#loc_324_13_324_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_13_324_14&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Foreign imports, the rounding is done faster in C when the value</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- isn&#39;t integral, so we call out for rounding. For values of large</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- modulus, calling out to C is slower than staying in Haskell, but</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- presumably &#39;round&#39; is mostly called for values with smaller modulus,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- when calling out to C is a major win.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- For all other functions, calling out to C gives at most a marginal</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- speedup for values of small modulus and is much slower than staying</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- in Haskell for values of large modulus, so those are done in Haskell.</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 337, srcSpanStartColumn = 1, srcSpanEndLine = 338, srcSpanEndColumn = 37}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 337, srcSpanStartColumn = 1, srcSpanEndLine = 337, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;"><span class="mpre">foreign import ccall unsafe &quot;rintDouble&quot;
    c_rintDouble :: Double -&gt; Double</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 340, srcSpanStartColumn = 1, srcSpanEndLine = 341, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;, srcSpanStartLine = 340, srcSpanStartColumn = 1, srcSpanEndLine = 340, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/RealFracMethods.hs&quot;"><span class="mpre">foreign import ccall unsafe &quot;rintFloat&quot;
    c_rintFloat :: Float -&gt; Float</span></span><span class="mpre">

</span></div></body></html>