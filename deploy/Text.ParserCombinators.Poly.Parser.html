<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- | This module contains the definitions for a generic parser, without</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   running state.  These are the parts that are shared between the Plain</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   and Lazy variations.  Do not import this module directly, but only</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   via T.P.Poly.Plain or T.P.Poly.Lazy.</span></span><span class="mpre">
module Text.ParserCombinators.Poly.Parser
  ( </span><span class="hl_comment"><span class="mpre">-- * The Parser datatype</span></span><span class="mpre">
    Parser(P)        </span><span class="hl_comment"><span class="mpre">-- datatype, instance of: Functor, Monad, PolyParse</span></span><span class="mpre">
  , Result(..)        </span><span class="hl_comment"><span class="mpre">-- internal to the Parser Monad.</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- ** Basic parsers</span></span><span class="mpre">
  , next        </span><span class="hl_comment"><span class="mpre">-- :: Parser t t</span></span><span class="mpre">
  , eof                </span><span class="hl_comment"><span class="mpre">-- :: Parser t ()</span></span><span class="mpre">
  , satisfy        </span><span class="hl_comment"><span class="mpre">-- :: (t-&gt;Bool) -&gt; Parser t t</span></span><span class="mpre">
  , onFail      </span><span class="hl_comment"><span class="mpre">-- :: Parser t a -&gt; Parser t a -&gt; Parser t a</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- ** Re-parsing</span></span><span class="mpre">
  , reparse        </span><span class="hl_comment"><span class="mpre">-- :: [t] -&gt; Parser t ()</span></span><span class="mpre">
  ) where


import Text.ParserCombinators.Poly.Base
import Text.ParserCombinators.Poly.Result

</span><span class="hl_comment"><span class="mpre">-- | This @Parser@ datatype is a fairly generic parsing monad with error</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   reporting.  It can be used for arbitrary token types, not just</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   String input.  (If you require a running state, use module Poly.State</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   instead)</span></span><span class="mpre">
newtype </span><a name="loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tycondecl"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_condecl"><span class="mpre">P</span></span></a><span class="mpre"> ([</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">] -&gt; </span><a href="Text.ParserCombinators.Poly.Result.html#loc_13_6_13_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_13_6_13_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">] </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)

instance </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> (</span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">fmap</span></span><span class="mpre"> </span><a name="loc_30_10_30_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_10_30_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_30_15_30_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_15_30_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_30_10_30_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_10_30_11&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_30_15_30_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_15_30_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)

instance </span><span class="hl_classref"><span class="mpre">Monad</span></span><span class="mpre"> (</span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">return</span></span><span class="mpre"> </span><a name="loc_33_12_33_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_12_33_13&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">     = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (\</span><a name="loc_33_24_33_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_24_33_26&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre">-&gt; </span><a href="Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26&#39;)"><span class="hl_conref"><span class="mpre">Success</span></span></a><span class="mpre"> </span><a href="#loc_33_24_33_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_24_33_26&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre"> </span><a href="#loc_33_12_33_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_12_33_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
    </span><span class="hl_fundecl"><span class="mpre">fail</span></span><span class="mpre"> </span><a name="loc_34_10_34_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_10_34_11&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre">       = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (\</span><a name="loc_34_24_34_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_24_34_26&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre">-&gt; </span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> </span><a href="#loc_34_24_34_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_24_34_26&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre"> </span><a href="#loc_34_10_34_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_10_34_11&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)
    (</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_35_8_35_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_8_35_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">) </span><span class="hl_fundecl"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a name="loc_35_15_35_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_15_35_16&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre">  = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (</span><a href="#loc_37_9_37_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_9_37_17&#39;)"><span class="hl_varref"><span class="mpre">continue</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_35_8_35_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_8_35_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
      where
        </span><a name="loc_37_9_37_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_9_37_17&#39;)"><span class="hl_fundecl"><span class="mpre">continue</span></span></a><span class="mpre"> (</span><a href="Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26&#39;)"><span class="hl_conref"><span class="mpre">Success</span></span></a><span class="mpre"> </span><a name="loc_37_27_37_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_27_37_29&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre"> </span><a name="loc_37_30_37_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_30_37_31&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">)             = let (</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_37_54_37_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_54_37_56&#39;)"><span class="hl_vardecl"><span class="mpre">g&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_35_15_35_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_15_35_16&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_37_30_37_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_30_37_31&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> in </span><a href="#loc_37_54_37_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_54_37_56&#39;)"><span class="hl_varref"><span class="mpre">g&#39;</span></span></a><span class="mpre"> </span><a href="#loc_37_27_37_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_27_37_29&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">
        </span><a href="#loc_37_9_37_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_9_37_17&#39;)"><span class="hl_fundecl"><span class="mpre">continue</span></span></a><span class="mpre"> (</span><a href="Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28&#39;)"><span class="hl_conref"><span class="mpre">Committed</span></span></a><span class="mpre"> </span><a name="loc_38_29_38_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_29_38_30&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">)              = </span><a href="Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28&#39;)"><span class="hl_conref"><span class="mpre">Committed</span></span></a><span class="mpre"> (</span><a href="#loc_37_9_37_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_9_37_17&#39;)"><span class="hl_varref"><span class="mpre">continue</span></span></a><span class="mpre"> </span><a href="#loc_38_29_38_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_29_38_30&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
        </span><a href="#loc_37_9_37_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_9_37_17&#39;)"><span class="hl_fundecl"><span class="mpre">continue</span></span></a><span class="mpre"> (</span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> </span><a name="loc_39_27_39_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_27_39_29&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre"> </span><a name="loc_39_30_39_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_30_39_31&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre">)             = </span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> </span><a href="#loc_39_27_39_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_27_39_29&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre"> </span><a href="#loc_39_30_39_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_30_39_31&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

instance </span><a href="Text.ParserCombinators.Poly.Base.html#loc_44_7_44_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Base.html#loc_44_7_44_17&#39;)"><span class="hl_classref"><span class="mpre">Commitment</span></span></a><span class="mpre"> (</span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) where
    </span><a href="Text.ParserCombinators.Poly.Base.html#loc_49_5_49_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Base.html#loc_49_5_49_11&#39;)"><span class="hl_fundecl"><span class="mpre">commit</span></span></a><span class="mpre"> (</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_42_15_42_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_15_42_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">)         = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (</span><a href="Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28&#39;)"><span class="hl_conref"><span class="mpre">Committed</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_44_9_44_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_9_44_15&#39;)"><span class="hl_varref"><span class="mpre">squash</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_42_15_42_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_15_42_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
      where
        </span><a name="loc_44_9_44_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_9_44_15&#39;)"><span class="hl_fundecl"><span class="mpre">squash</span></span></a><span class="mpre"> (</span><a href="Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28&#39;)"><span class="hl_conref"><span class="mpre">Committed</span></span></a><span class="mpre"> </span><a name="loc_44_27_44_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_27_44_28&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">) = </span><a href="#loc_44_9_44_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_9_44_15&#39;)"><span class="hl_varref"><span class="mpre">squash</span></span></a><span class="mpre"> </span><a href="#loc_44_27_44_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_27_44_28&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
        </span><a href="#loc_44_9_44_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_9_44_15&#39;)"><span class="hl_fundecl"><span class="mpre">squash</span></span></a><span class="mpre"> </span><a name="loc_45_16_45_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_16_45_17&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">             = </span><a href="#loc_45_16_45_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_16_45_17&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
    (</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_46_8_46_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_8_46_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) </span><a href="Text.ParserCombinators.Poly.Base.html#loc_52_5_52_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Base.html#loc_52_5_52_14&#39;)"><span class="hl_fundecl"><span class="mpre">`adjustErr`</span></span></a><span class="mpre"> </span><a name="loc_46_23_46_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_23_46_24&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">  = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (</span><a href="#loc_48_9_48_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_9_48_15&#39;)"><span class="hl_varref"><span class="mpre">adjust</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_46_8_46_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_8_46_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
      where
        </span><a name="loc_48_9_48_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_9_48_15&#39;)"><span class="hl_fundecl"><span class="mpre">adjust</span></span></a><span class="mpre"> (</span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> </span><a name="loc_48_25_48_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_25_48_26&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_48_27_48_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_27_48_28&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre">) = </span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> </span><a href="#loc_48_25_48_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_25_48_26&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="#loc_46_23_46_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_23_46_24&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_48_27_48_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_27_48_28&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)
        </span><a href="#loc_48_9_48_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_9_48_15&#39;)"><span class="hl_fundecl"><span class="mpre">adjust</span></span></a><span class="mpre"> (</span><a href="Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28&#39;)"><span class="hl_conref"><span class="mpre">Committed</span></span></a><span class="mpre"> </span><a name="loc_49_27_49_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_27_49_28&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">) = </span><a href="Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28&#39;)"><span class="hl_conref"><span class="mpre">Committed</span></span></a><span class="mpre"> (</span><a href="#loc_48_9_48_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_9_48_15&#39;)"><span class="hl_varref"><span class="mpre">adjust</span></span></a><span class="mpre"> </span><a href="#loc_49_27_49_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_27_49_28&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
        </span><a href="#loc_48_9_48_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_9_48_15&#39;)"><span class="hl_fundecl"><span class="mpre">adjust</span></span></a><span class="mpre">  </span><a name="loc_50_17_50_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_17_50_21&#39;)"><span class="hl_vardecl"><span class="mpre">good</span></span></a><span class="mpre">         = </span><a href="#loc_50_17_50_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_17_50_21&#39;)"><span class="hl_varref"><span class="mpre">good</span></span></a><span class="mpre">

    </span><a href="Text.ParserCombinators.Poly.Base.html#loc_56_5_56_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Base.html#loc_56_5_56_11&#39;)"><span class="hl_vardecl"><span class="mpre">oneOf&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_53_13_53_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_13_53_18&#39;)"><span class="hl_varref"><span class="mpre">accum</span></span></a><span class="mpre"> []
      where </span><a name="loc_53_13_53_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_13_53_18&#39;)"><span class="hl_fundecl"><span class="mpre">accum</span></span></a><span class="mpre"> </span><a name="loc_53_19_53_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_19_53_23&#39;)"><span class="hl_vardecl"><span class="mpre">errs</span></span></a><span class="mpre"> [] =
                </span><span class="hl_varref"><span class="mpre">fail</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;failed to parse any of the possible choices:\n&quot;</span></span><span class="mpre">
                            </span><span class="hl_infix"><span class="mpre">++</span></span><a href="Text.ParserCombinators.Poly.Base.html#loc_122_1_122_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Base.html#loc_122_1_122_7&#39;)"><span class="hl_varref"><span class="mpre">indent</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> </span><a href="#loc_63_13_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_20&#39;)"><span class="hl_varref"><span class="mpre">showErr</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> </span><a href="#loc_53_19_53_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_19_53_23&#39;)"><span class="hl_varref"><span class="mpre">errs</span></span></a><span class="mpre">)))
            </span><a href="#loc_53_13_53_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_13_53_18&#39;)"><span class="hl_fundecl"><span class="mpre">accum</span></span></a><span class="mpre"> </span><a name="loc_56_19_56_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_19_56_23&#39;)"><span class="hl_vardecl"><span class="mpre">errs</span></span></a><span class="mpre"> ((</span><a name="loc_56_26_56_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_26_56_27&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre">,</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_56_30_56_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_30_56_31&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">)</span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_56_33_56_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_33_56_35&#39;)"><span class="hl_vardecl"><span class="mpre">ps</span></span></a><span class="mpre">) =
                </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (\</span><a name="loc_57_21_57_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_21_57_23&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre">-&gt; case </span><a href="#loc_56_30_56_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_30_56_31&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_57_21_57_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_21_57_23&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre"> of
                           </span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> _ </span><a name="loc_58_38_58_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_38_58_41&#39;)"><span class="hl_vardecl"><span class="mpre">err</span></span></a><span class="mpre"> -&gt;
                                       let (</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_59_47_59_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_47_59_48&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) = </span><a href="#loc_53_13_53_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_13_53_18&#39;)"><span class="hl_varref"><span class="mpre">accum</span></span></a><span class="mpre"> ((</span><a href="#loc_56_26_56_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_26_56_27&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">,</span><a href="#loc_58_38_58_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_38_58_41&#39;)"><span class="hl_varref"><span class="mpre">err</span></span></a><span class="mpre">)</span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_56_19_56_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_19_56_23&#39;)"><span class="hl_varref"><span class="mpre">errs</span></span></a><span class="mpre">) </span><a href="#loc_56_33_56_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_33_56_35&#39;)"><span class="hl_varref"><span class="mpre">ps</span></span></a><span class="mpre">
                                       in </span><a href="#loc_59_47_59_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_47_59_48&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_57_21_57_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_21_57_23&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">
                           </span><a name="loc_61_28_61_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_28_61_29&#39;)"><span class="hl_specname"><span class="mpre">r</span></span></a><span class="mpre">@(</span><a href="Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26&#39;)"><span class="hl_conref"><span class="mpre">Success</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">z</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">a</span></span><span class="mpre">)    -&gt; </span><a href="#loc_61_28_61_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_28_61_29&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
                           </span><a name="loc_62_28_62_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_28_62_29&#39;)"><span class="hl_specname"><span class="mpre">r</span></span></a><span class="mpre">@(</span><a href="Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_15_19_15_28&#39;)"><span class="hl_conref"><span class="mpre">Committed</span></span></a><span class="mpre"> _)    -&gt; </span><a href="#loc_62_28_62_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_28_62_29&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> )
            </span><a name="loc_63_13_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_20&#39;)"><span class="hl_fundecl"><span class="mpre">showErr</span></span></a><span class="mpre"> (</span><a name="loc_63_22_63_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_22_63_26&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre">,</span><a name="loc_63_27_63_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_27_63_30&#39;)"><span class="hl_vardecl"><span class="mpre">err</span></span></a><span class="mpre">) = </span><a href="#loc_63_22_63_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_22_63_26&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="hl_infix"><span class="mpre">++</span></span><span class="hl_string"><span class="mpre">&quot;:\n&quot;</span></span><span class="hl_infix"><span class="mpre">++</span></span><a href="Text.ParserCombinators.Poly.Base.html#loc_122_1_122_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Base.html#loc_122_1_122_7&#39;)"><span class="hl_varref"><span class="mpre">indent</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre"> </span><a href="#loc_63_27_63_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_27_63_30&#39;)"><span class="hl_varref"><span class="mpre">err</span></span></a><span class="mpre">

</span><span class="warning" data-warning="DeclInfixDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/polyparse-1.9/src/Text/ParserCombinators/Poly/Parser.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 1, srcSpanEndLine = 65, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/polyparse-1.9/src/Text/ParserCombinators/Poly/Parser.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 8, srcSpanEndLine = 65, srcSpanEndColumn = 9}]}) (AssocLeft (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = "><span class="mpre">infixl 6 `onFail`</span></span><span class="mpre">        </span><span class="hl_comment"><span class="mpre">-- not sure about precedence 6?</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @p `onFail` q@ means parse p, unless p fails, in which case</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   parse q instead.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Can be chained together to give multiple attempts to parse something.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   (Note that q could itself be a failing parser, e.g. to change the error</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   message from that defined in p to something different.)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   However, a severe failure in p cannot be ignored.</span></span><span class="mpre">
</span><a href="#loc_74_7_74_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_7_74_15&#39;)"><span class="mpre">onFail</span></a><span class="mpre"> :: </span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
(</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_74_4_74_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_4_74_5&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) </span><a name="loc_74_7_74_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_7_74_15&#39;)"><span class="hl_fundecl"><span class="mpre">`onFail`</span></span></a><span class="mpre"> (</span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> </span><a name="loc_74_19_74_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_19_74_20&#39;)"><span class="hl_vardecl"><span class="mpre">q</span></span></a><span class="mpre">) = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (\</span><a name="loc_74_28_74_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_28_74_30&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre">-&gt; </span><a href="#loc_76_5_76_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_5_76_13&#39;)"><span class="hl_varref"><span class="mpre">continue</span></span></a><span class="mpre"> </span><a href="#loc_74_28_74_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_28_74_30&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_74_4_74_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_4_74_5&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_74_28_74_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_28_74_30&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">)
  where
    </span><a name="loc_76_5_76_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_5_76_13&#39;)"><span class="hl_fundecl"><span class="mpre">continue</span></span></a><span class="mpre"> </span><a name="loc_76_14_76_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_14_76_16&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre"> (</span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">z</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">e</span></span><span class="mpre">) = </span><a href="#loc_74_19_74_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_74_19_74_20&#39;)"><span class="hl_varref"><span class="mpre">q</span></span></a><span class="mpre"> </span><a href="#loc_76_14_76_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_14_76_16&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  continue _  (Committed r) = r   -- no, remain Committed</span></span><span class="mpre">
    </span><a href="#loc_76_5_76_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_5_76_13&#39;)"><span class="hl_fundecl"><span class="mpre">continue</span></span></a><span class="mpre"> _  </span><a name="loc_78_17_78_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_17_78_18&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">             = </span><a href="#loc_78_17_78_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_17_78_18&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Simply return the next token in the input tokenstream.</span></span><span class="mpre">
</span><a href="#loc_85_1_85_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_5&#39;)"><span class="mpre">next</span></a><span class="mpre"> :: </span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_85_1_85_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_5&#39;)"><span class="hl_vardecl"><span class="mpre">next</span></span></a><span class="mpre"> = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (\</span><a name="loc_85_12_85_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_12_85_14&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre">-&gt; case </span><a href="#loc_85_12_85_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_12_85_14&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre"> of
                  []      -&gt; </span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> [] </span><span class="hl_string"><span class="mpre">&quot;Ran out of input (EOF)&quot;</span></span><span class="mpre">
                  (</span><a name="loc_87_20_87_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_20_87_21&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_87_22_87_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_22_87_25&#39;)"><span class="hl_vardecl"><span class="mpre">ts&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26&#39;)"><span class="hl_conref"><span class="mpre">Success</span></span></a><span class="mpre"> </span><a href="#loc_87_22_87_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_22_87_25&#39;)"><span class="hl_varref"><span class="mpre">ts&#39;</span></span></a><span class="mpre"> </span><a href="#loc_87_20_87_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_20_87_21&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> )

</span><span class="hl_comment"><span class="mpre">-- | Succeed if the end of file/input has been reached, fail otherwise.</span></span><span class="mpre">
</span><a href="#loc_91_1_91_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_4&#39;)"><span class="mpre">eof</span></a><span class="mpre">  :: </span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_91_1_91_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_4&#39;)"><span class="hl_vardecl"><span class="mpre">eof</span></span></a><span class="mpre">  = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (\</span><a name="loc_91_12_91_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_12_91_14&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre">-&gt; case </span><a href="#loc_91_12_91_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_12_91_14&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre"> of
                  []      -&gt; </span><a href="Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26&#39;)"><span class="hl_conref"><span class="mpre">Success</span></span></a><span class="mpre"> [] </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
                  (</span><span class="hl_vardecl"><span class="mpre">t</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_vardecl"><span class="mpre">ts&#39;</span></span><span class="mpre">) -&gt; </span><a href="Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_14_19_14_26&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> </span><a href="#loc_91_12_91_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_12_91_14&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Expected end of input (EOF)&quot;</span></span><span class="mpre"> )

</span><span class="hl_comment"><span class="mpre">-- | Return the next token if it satisfies the given predicate.</span></span><span class="mpre">
</span><a href="#loc_97_1_97_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_8&#39;)"><span class="mpre">satisfy</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">-&gt;</span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_97_1_97_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_8&#39;)"><span class="hl_fundecl"><span class="mpre">satisfy</span></span></a><span class="mpre"> </span><a name="loc_97_9_97_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_9_97_13&#39;)"><span class="hl_vardecl"><span class="mpre">pred</span></span></a><span class="mpre"> = do { </span><a name="loc_97_21_97_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_21_97_22&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_85_1_85_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre">
                  ; if </span><a href="#loc_97_9_97_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_9_97_13&#39;)"><span class="hl_varref"><span class="mpre">pred</span></span></a><span class="mpre"> </span><a href="#loc_97_21_97_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_21_97_22&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_97_21_97_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_21_97_22&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> else </span><span class="hl_varref"><span class="mpre">fail</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Parse.satisfy: failed&quot;</span></span><span class="mpre">
                  }

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Push some tokens back onto the front of the input stream and reparse.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   This is useful e.g. for recursively expanding macros.  When the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   user-parser recognises a macro use, it can lookup the macro</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   expansion from the parse state, lex it, and then stuff the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   lexed expansion back down into the parser.</span></span><span class="mpre">
</span><a href="#loc_109_1_109_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_1_109_8&#39;)"><span class="mpre">reparse</span></a><span class="mpre">    :: [</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">] -&gt; </span><a href="#loc_27_9_27_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_9_27_15&#39;)"><span class="hl_tyconref"><span class="mpre">Parser</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_109_1_109_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_1_109_8&#39;)"><span class="hl_fundecl"><span class="mpre">reparse</span></span></a><span class="mpre"> </span><a name="loc_109_9_109_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_9_109_11&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre">  = </span><a href="#loc_27_22_27_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_22_27_23&#39;)"><span class="hl_conref"><span class="mpre">P</span></span></a><span class="mpre"> (\</span><a name="loc_109_19_109_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_19_109_22&#39;)"><span class="hl_vardecl"><span class="mpre">inp</span></span></a><span class="mpre">-&gt; </span><a href="Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.ParserCombinators.Poly.Result.html#loc_13_19_13_26&#39;)"><span class="hl_conref"><span class="mpre">Success</span></span></a><span class="mpre"> (</span><a href="#loc_109_9_109_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_9_109_11&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="hl_infix"><span class="mpre">++</span></span><a href="#loc_109_19_109_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_19_109_22&#39;)"><span class="hl_varref"><span class="mpre">inp</span></span></a><span class="mpre">) </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span></div></body></html>