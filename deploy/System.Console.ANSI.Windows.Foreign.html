<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- | &quot;System.Win32.Console&quot; is really very impoverished, so I have had to do all the FFI myself.</span></span><span class="mpre">
module System.Console.ANSI.Windows.Foreign (
        </span><span class="hl_comment"><span class="mpre">-- Re-exports from Win32.Types</span></span><span class="mpre">
        BOOL, WORD, DWORD, WCHAR, HANDLE, SHORT,
        
        charToWCHAR,
        
        COORD(..), SMALL_RECT(..), rect_top, rect_bottom, rect_left, rect_right, rect_width, rect_height,
        CONSOLE_CURSOR_INFO(..), CONSOLE_SCREEN_BUFFER_INFO(..), CHAR_INFO(..),
        
        sTD_INPUT_HANDLE, sTD_OUTPUT_HANDLE, sTD_ERROR_HANDLE,
        
        fOREGROUND_BLUE, fOREGROUND_GREEN, fOREGROUND_RED, fOREGROUND_INTENSITY, fOREGROUND_WHITE, fOREGROUND_INTENSE_WHITE,
        bACKGROUND_BLUE, bACKGROUND_GREEN, bACKGROUND_RED, bACKGROUND_INTENSITY, bACKGROUND_WHITE, bACKGROUND_INTENSE_WHITE,
        cOMMON_LVB_REVERSE_VIDEO, cOMMON_LVB_UNDERSCORE,
        
        getStdHandle,
        getConsoleScreenBufferInfo,
        getConsoleCursorInfo,
        
        setConsoleTextAttribute,
        setConsoleCursorPosition,
        setConsoleCursorInfo,
        setConsoleTitle,
        
        fillConsoleOutputAttribute,
        fillConsoleOutputCharacter,
        scrollConsoleScreenBuffer,
        
        withTString, withHandleToHANDLE
    ) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 33, srcSpanStartColumn = 8, srcSpanEndLine = 33, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Foreign.C.Types&quot;"><span class="mpre">Foreign.C.Types</span></span><span class="mpre">
import Foreign.Marshal
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 35, srcSpanStartColumn = 8, srcSpanEndLine = 35, srcSpanEndColumn = 19}, srcInfoPoints = []}) &quot;Foreign.Ptr&quot;"><span class="mpre">Foreign.Ptr</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 36, srcSpanStartColumn = 8, srcSpanEndLine = 36, srcSpanEndColumn = 24}, srcInfoPoints = []}) &quot;Foreign.Storable&quot;"><span class="mpre">Foreign.Storable</span></span><span class="mpre">

import Data.Bits
import Data.Char

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 41, srcSpanStartColumn = 8, srcSpanEndLine = 41, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;System.Win32.Types&quot;"><span class="mpre">System.Win32.Types</span></span><span class="mpre">

import Control.Concurrent.MVar
import Control.Exception (</span><a href="Control.Exception.Base.html#loc_259_1_259_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_259_1_259_8&#39;)"><span class="mpre">bracket</span></a><span class="mpre">)

import Foreign.StablePtr

#if __GLASGOW_HASKELL__ &gt;= 612
import GHC.IO.Handle.Types (</span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="mpre">Handle</span></a><span class="mpre">(..), </span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="mpre">Handle__</span></a><span class="mpre">(..))
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 50, srcSpanStartColumn = 8, srcSpanEndLine = 50, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;GHC.IO.FD&quot;"><span class="mpre">GHC.IO.FD</span></span><span class="mpre"> (FD(..)) </span><span class="hl_comment"><span class="mpre">-- A wrapper around an Int32</span></span><span class="mpre">
import Data.Typeable
#else
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 53, srcSpanStartColumn = 8, srcSpanEndLine = 53, srcSpanEndColumn = 18}, srcInfoPoints = []}) &quot;GHC.IOBase&quot;"><span class="mpre">GHC.IOBase</span></span><span class="mpre"> (Handle(..), Handle__(..))
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 18, srcSpanEndLine = 54, srcSpanEndColumn = 28}, srcInfoPoints = []}) &quot;GHC.IOBase&quot;"><span class="mpre">GHC.IOBase</span></span><span class="mpre"> as IOBase (FD) </span><span class="hl_comment"><span class="mpre">-- Just an Int32</span></span><span class="mpre">
#endif


</span><span class="hl_comment"><span class="mpre">-- Some Windows types missing from System.Win32</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 59, srcSpanStartColumn = 1, srcSpanEndLine = 59, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 59, srcSpanStartColumn = 1, srcSpanEndLine = 59, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-t"><span class="mpre">type SHORT = CShort</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 60, srcSpanStartColumn = 1, srcSpanEndLine = 60, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 60, srcSpanStartColumn = 1, srcSpanEndLine = 60, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-t"><span class="mpre">type WCHAR = CWchar</span></span><span class="mpre">

</span><a href="#loc_63_1_63_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_12&#39;)"><span class="mpre">charToWCHAR</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">WCHAR</span></span><span class="mpre">
</span><a name="loc_63_1_63_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_12&#39;)"><span class="hl_fundecl"><span class="mpre">charToWCHAR</span></span></a><span class="mpre"> </span><a name="loc_63_13_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_17&#39;)"><span class="hl_vardecl"><span class="mpre">char</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">ord</span></span><span class="mpre"> </span><a href="#loc_63_13_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_17&#39;)"><span class="hl_varref"><span class="mpre">char</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- This is a FFI hack. Some of the API calls take a Coord, but that isn&#39;t a built-in FFI type so I can&#39;t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- use it directly. Instead, I use UNPACKED_COORD and marshal COORDs into this manually. Note that we CAN&#39;T</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- just use two SHORTs directly because they get expanded to 4 bytes each instead of just boing 2 lots of 2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- bytes by the stdcall convention, so linking fails.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 1, srcSpanEndLine = 70, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 1, srcSpanEndLine = 70, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-t"><span class="mpre">type UNPACKED_COORD = CInt</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Field packing order determined experimentally: I couldn&#39;t immediately find a specification for Windows</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- struct layout anywhere.</span></span><span class="mpre">
</span><a href="#loc_75_1_75_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_12&#39;)"><span class="mpre">unpackCOORD</span></a><span class="mpre"> :: </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">UNPACKED_COORD</span></span><span class="mpre">
</span><a name="loc_75_1_75_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_12&#39;)"><span class="hl_fundecl"><span class="mpre">unpackCOORD</span></span></a><span class="mpre"> (</span><a href="#loc_89_14_89_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_14_89_19&#39;)"><span class="hl_conref"><span class="mpre">COORD</span></span></a><span class="mpre"> </span><a name="loc_75_20_75_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_20_75_21&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_75_22_75_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_22_75_23&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">) = (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_75_22_75_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_22_75_23&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">) </span><a href="Data.Bits.html#loc_200_5_200_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Bits.html#loc_200_5_200_11&#39;)"><span class="hl_infix"><span class="mpre">`shiftL`</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><a href="#loc_75_20_75_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_20_75_21&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">8</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.|.</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_75_20_75_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_20_75_21&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)


</span><a href="#loc_79_1_79_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_14&#39;)"><span class="mpre">peekAndOffset</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 78, srcSpanStartColumn = 18, srcSpanEndLine = 78, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 78, srcSpanStartColumn = 29, srcSpanEndLine = 78, srcSpanEndColumn = 31}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFi"><span class="mpre">Storable a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)
</span><a name="loc_79_1_79_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_14&#39;)"><span class="hl_fundecl"><span class="mpre">peekAndOffset</span></span></a><span class="mpre"> </span><a name="loc_79_15_79_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_15_79_18&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> = do
    </span><a name="loc_80_5_80_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_9&#39;)"><span class="hl_vardecl"><span class="mpre">item</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_79_15_79_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_15_79_18&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_80_5_80_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_9&#39;)"><span class="hl_varref"><span class="mpre">item</span></span></a><span class="mpre">, </span><a href="#loc_79_15_79_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_15_79_18&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><a href="#loc_80_5_80_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_5_80_9&#39;)"><span class="hl_varref"><span class="mpre">item</span></span></a><span class="mpre">)

</span><a href="#loc_84_1_84_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_1_84_14&#39;)"><span class="mpre">pokeAndOffset</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 83, srcSpanStartColumn = 18, srcSpanEndLine = 83, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 83, srcSpanStartColumn = 29, srcSpanEndLine = 83, srcSpanEndColumn = 31}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFi"><span class="mpre">Storable a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)
</span><a name="loc_84_1_84_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_1_84_14&#39;)"><span class="hl_fundecl"><span class="mpre">pokeAndOffset</span></span></a><span class="mpre"> </span><a name="loc_84_15_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_15_84_18&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><a name="loc_84_19_84_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_19_84_23&#39;)"><span class="hl_vardecl"><span class="mpre">item</span></span></a><span class="mpre"> = do
    </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_84_15_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_15_84_18&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><a href="#loc_84_19_84_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_19_84_23&#39;)"><span class="hl_varref"><span class="mpre">item</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_84_15_84_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_15_84_18&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><a href="#loc_84_19_84_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_19_84_23&#39;)"><span class="hl_varref"><span class="mpre">item</span></span></a><span class="mpre">)


data </span><a name="loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tycondecl"><span class="mpre">COORD</span></span></a><span class="mpre"> = </span><a name="loc_89_14_89_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_14_89_19&#39;)"><span class="hl_condecl"><span class="mpre">COORD</span></span></a><span class="mpre"> {
        </span><a name="loc_90_9_90_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_9_90_16&#39;)"><span class="hl_fielddecl"><span class="mpre">coord_x</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">SHORT</span></span><span class="mpre">,
        </span><a name="loc_91_9_91_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_9_91_16&#39;)"><span class="hl_fielddecl"><span class="mpre">coord_y</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">SHORT</span></span><span class="mpre">
    }

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">show</span></span><span class="mpre"> (</span><a href="#loc_89_14_89_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_14_89_19&#39;)"><span class="hl_conref"><span class="mpre">COORD</span></span></a><span class="mpre"> </span><a name="loc_95_17_95_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_17_95_18&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_95_19_95_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_19_95_20&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;(&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_95_17_95_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_17_95_18&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;, &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_95_19_95_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_19_95_20&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;)&quot;</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Storable</span></span><span class="mpre"> </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 98, srcSpanStartColumn = 12, srcSpanEndLine = 98, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 98, srcSpanStartColumn = 12, srcSpanEndLine = 98, srcSpanEndColumn = 13}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFil"><span class="mpre">~(COORD x y)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">y</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 99, srcSpanStartColumn = 15, srcSpanEndLine = 99, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 99, srcSpanStartColumn = 15, srcSpanEndLine = 99, srcSpanEndColumn = 16}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFil"><span class="mpre">~(COORD x _)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">x</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">peek</span></span><span class="mpre"> </span><a name="loc_100_10_100_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_10_100_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> = do
        let </span><a name="loc_101_13_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_13_101_17&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_100_10_100_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_10_100_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">SHORT</span></span><span class="mpre">
        </span><a name="loc_102_9_102_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_9_102_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peekElemOff</span></span><span class="mpre"> </span><a href="#loc_101_13_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_13_101_17&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
        </span><a name="loc_103_9_103_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_9_103_10&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peekElemOff</span></span><span class="mpre"> </span><a href="#loc_101_13_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_13_101_17&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_89_14_89_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_14_89_19&#39;)"><span class="hl_conref"><span class="mpre">COORD</span></span></a><span class="mpre"> </span><a href="#loc_102_9_102_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_9_102_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="#loc_103_9_103_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_9_103_10&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">)
    </span><span class="hl_fundecl"><span class="mpre">poke</span></span><span class="mpre"> </span><a name="loc_105_10_105_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_10_105_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> (</span><a href="#loc_89_14_89_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_14_89_19&#39;)"><span class="hl_conref"><span class="mpre">COORD</span></span></a><span class="mpre"> </span><a name="loc_105_21_105_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_21_105_22&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_105_23_105_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_23_105_24&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">) = do
        let </span><a name="loc_106_13_106_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_13_106_17&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_105_10_105_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_10_105_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">SHORT</span></span><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">pokeElemOff</span></span><span class="mpre"> </span><a href="#loc_106_13_106_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_13_106_17&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_105_21_105_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_21_105_22&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">pokeElemOff</span></span><span class="mpre"> </span><a href="#loc_106_13_106_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_13_106_17&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><a href="#loc_105_23_105_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_23_105_24&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">


data </span><a name="loc_111_6_111_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_6_111_16&#39;)"><span class="hl_tycondecl"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> = </span><a name="loc_111_19_111_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_19_111_29&#39;)"><span class="hl_condecl"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> {
        </span><a name="loc_112_9_112_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_22&#39;)"><span class="hl_fielddecl"><span class="mpre">rect_top_left</span></span></a><span class="mpre"> :: </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre">,
        </span><a name="loc_113_9_113_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_9_113_26&#39;)"><span class="hl_fielddecl"><span class="mpre">rect_bottom_right</span></span></a><span class="mpre"> :: </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre">
    }

</span><a href="#loc_117_1_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_1_117_9&#39;)"><span class="mpre">rect_top</span></a><span class="mpre">, </span><a href="#loc_118_1_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_1_118_10&#39;)"><span class="mpre">rect_left</span></a><span class="mpre">, </span><a href="#loc_119_1_119_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_12&#39;)"><span class="mpre">rect_bottom</span></a><span class="mpre">, </span><a href="#loc_120_1_120_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_11&#39;)"><span class="mpre">rect_right</span></a><span class="mpre"> :: </span><a href="#loc_111_6_111_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_6_111_16&#39;)"><span class="hl_tyconref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">SHORT</span></span><span class="mpre">
</span><a name="loc_117_1_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_1_117_9&#39;)"><span class="hl_vardecl"><span class="mpre">rect_top</span></span></a><span class="mpre"> = </span><a href="#loc_91_9_91_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_9_91_16&#39;)"><span class="hl_varref"><span class="mpre">coord_y</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_112_9_112_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_22&#39;)"><span class="hl_varref"><span class="mpre">rect_top_left</span></span></a><span class="mpre">
</span><a name="loc_118_1_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_1_118_10&#39;)"><span class="hl_vardecl"><span class="mpre">rect_left</span></span></a><span class="mpre"> = </span><a href="#loc_90_9_90_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_9_90_16&#39;)"><span class="hl_varref"><span class="mpre">coord_x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_112_9_112_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_22&#39;)"><span class="hl_varref"><span class="mpre">rect_top_left</span></span></a><span class="mpre">
</span><a name="loc_119_1_119_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_12&#39;)"><span class="hl_vardecl"><span class="mpre">rect_bottom</span></span></a><span class="mpre"> = </span><a href="#loc_91_9_91_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_9_91_16&#39;)"><span class="hl_varref"><span class="mpre">coord_y</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_113_9_113_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_9_113_26&#39;)"><span class="hl_varref"><span class="mpre">rect_bottom_right</span></span></a><span class="mpre">
</span><a name="loc_120_1_120_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_11&#39;)"><span class="hl_vardecl"><span class="mpre">rect_right</span></span></a><span class="mpre"> = </span><a href="#loc_90_9_90_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_9_90_16&#39;)"><span class="hl_varref"><span class="mpre">coord_x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_113_9_113_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_9_113_26&#39;)"><span class="hl_varref"><span class="mpre">rect_bottom_right</span></span></a><span class="mpre">

</span><a href="#loc_123_1_123_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_1_123_11&#39;)"><span class="mpre">rect_width</span></a><span class="mpre">, </span><a href="#loc_124_1_124_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_1_124_12&#39;)"><span class="mpre">rect_height</span></a><span class="mpre"> :: </span><a href="#loc_111_6_111_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_6_111_16&#39;)"><span class="hl_tyconref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">SHORT</span></span><span class="mpre">
</span><a name="loc_123_1_123_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_1_123_11&#39;)"><span class="hl_fundecl"><span class="mpre">rect_width</span></span></a><span class="mpre"> </span><a name="loc_123_12_123_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_12_123_16&#39;)"><span class="hl_vardecl"><span class="mpre">rect</span></span></a><span class="mpre"> = </span><a href="#loc_120_1_120_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_11&#39;)"><span class="hl_varref"><span class="mpre">rect_right</span></span></a><span class="mpre"> </span><a href="#loc_123_12_123_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_12_123_16&#39;)"><span class="hl_varref"><span class="mpre">rect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_118_1_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_1_118_10&#39;)"><span class="hl_varref"><span class="mpre">rect_left</span></span></a><span class="mpre"> </span><a href="#loc_123_12_123_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_12_123_16&#39;)"><span class="hl_varref"><span class="mpre">rect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
</span><a name="loc_124_1_124_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_1_124_12&#39;)"><span class="hl_fundecl"><span class="mpre">rect_height</span></span></a><span class="mpre"> </span><a name="loc_124_13_124_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_13_124_17&#39;)"><span class="hl_vardecl"><span class="mpre">rect</span></span></a><span class="mpre"> = </span><a href="#loc_119_1_119_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_12&#39;)"><span class="hl_varref"><span class="mpre">rect_bottom</span></span></a><span class="mpre"> </span><a href="#loc_124_13_124_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_13_124_17&#39;)"><span class="hl_varref"><span class="mpre">rect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_117_1_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_1_117_9&#39;)"><span class="hl_varref"><span class="mpre">rect_top</span></span></a><span class="mpre"> </span><a href="#loc_124_13_124_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_13_124_17&#39;)"><span class="hl_varref"><span class="mpre">rect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_111_6_111_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_6_111_16&#39;)"><span class="hl_tyconref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">show</span></span><span class="mpre"> (</span><a href="#loc_111_19_111_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_19_111_29&#39;)"><span class="hl_conref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> </span><a name="loc_127_22_127_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_22_127_24&#39;)"><span class="hl_vardecl"><span class="mpre">tl</span></span></a><span class="mpre"> </span><a name="loc_127_25_127_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_25_127_27&#39;)"><span class="hl_vardecl"><span class="mpre">br</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_127_22_127_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_22_127_24&#39;)"><span class="hl_varref"><span class="mpre">tl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_127_25_127_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_25_127_27&#39;)"><span class="hl_varref"><span class="mpre">br</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Storable</span></span><span class="mpre"> </span><a href="#loc_111_6_111_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_6_111_16&#39;)"><span class="hl_tyconref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 130, srcSpanStartColumn = 12, srcSpanEndLine = 130, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 130, srcSpanStartColumn = 12, srcSpanEndLine = 130, srcSpanEndColumn = 13}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpa"><span class="mpre">~(SMALL_RECT tl br)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">tl</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">br</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 15, srcSpanEndLine = 131, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 15, srcSpanEndLine = 131, srcSpanEndColumn = 16}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpa"><span class="mpre">~(SMALL_RECT tl _)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">tl</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">peek</span></span><span class="mpre"> </span><a name="loc_132_10_132_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_10_132_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> = do
        let </span><a name="loc_133_13_133_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_13_133_17&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_132_10_132_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_10_132_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre">
        </span><a name="loc_134_9_134_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_9_134_11&#39;)"><span class="hl_vardecl"><span class="mpre">tl</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peekElemOff</span></span><span class="mpre"> </span><a href="#loc_133_13_133_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_13_133_17&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
        </span><a name="loc_135_9_135_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_9_135_11&#39;)"><span class="hl_vardecl"><span class="mpre">br</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peekElemOff</span></span><span class="mpre"> </span><a href="#loc_133_13_133_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_13_133_17&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_111_19_111_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_19_111_29&#39;)"><span class="hl_conref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> </span><a href="#loc_134_9_134_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_9_134_11&#39;)"><span class="hl_varref"><span class="mpre">tl</span></span></a><span class="mpre"> </span><a href="#loc_135_9_135_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_9_135_11&#39;)"><span class="hl_varref"><span class="mpre">br</span></span></a><span class="mpre">)
    </span><span class="hl_fundecl"><span class="mpre">poke</span></span><span class="mpre"> </span><a name="loc_137_10_137_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> (</span><a href="#loc_111_19_111_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_19_111_29&#39;)"><span class="hl_conref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> </span><a name="loc_137_26_137_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_26_137_28&#39;)"><span class="hl_vardecl"><span class="mpre">tl</span></span></a><span class="mpre"> </span><a name="loc_137_29_137_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_29_137_31&#39;)"><span class="hl_vardecl"><span class="mpre">br</span></span></a><span class="mpre">) = do
        let </span><a name="loc_138_13_138_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_13_138_17&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_137_10_137_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">pokeElemOff</span></span><span class="mpre"> </span><a href="#loc_138_13_138_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_13_138_17&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_137_26_137_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_26_137_28&#39;)"><span class="hl_varref"><span class="mpre">tl</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">pokeElemOff</span></span><span class="mpre"> </span><a href="#loc_138_13_138_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_13_138_17&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><a href="#loc_137_29_137_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_29_137_31&#39;)"><span class="hl_varref"><span class="mpre">br</span></span></a><span class="mpre">


data </span><a name="loc_143_6_143_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_6_143_25&#39;)"><span class="hl_tycondecl"><span class="mpre">CONSOLE_CURSOR_INFO</span></span></a><span class="mpre"> = </span><a name="loc_143_28_143_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_28_143_47&#39;)"><span class="hl_condecl"><span class="mpre">CONSOLE_CURSOR_INFO</span></span></a><span class="mpre"> {
        </span><a name="loc_144_9_144_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_9_144_24&#39;)"><span class="hl_fielddecl"><span class="mpre">cci_cursor_size</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">DWORD</span></span><span class="mpre">,
        </span><a name="loc_145_9_145_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_9_145_27&#39;)"><span class="hl_fielddecl"><span class="mpre">cci_cursor_visible</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">BOOL</span></span><span class="mpre">
    }
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 147, srcSpanStartColumn = 5, srcSpanEndLine = 147, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 147, srcSpanStartColumn = 5, srcSpanEndLine = 147, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/a"><span class="mpre">deriving (Show)</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Storable</span></span><span class="mpre"> </span><a href="#loc_143_6_143_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_6_143_25&#39;)"><span class="hl_tyconref"><span class="mpre">CONSOLE_CURSOR_INFO</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 150, srcSpanStartColumn = 12, srcSpanEndLine = 150, srcSpanEndColumn = 47}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 150, srcSpanStartColumn = 12, srcSpanEndLine = 150, srcSpanEndColumn = 13}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpa"><span class="mpre">~(CONSOLE_CURSOR_INFO size visible)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">size</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">visible</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 151, srcSpanStartColumn = 15, srcSpanEndLine = 151, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 151, srcSpanStartColumn = 15, srcSpanEndLine = 151, srcSpanEndColumn = 16}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpa"><span class="mpre">~(CONSOLE_CURSOR_INFO size _)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">size</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">peek</span></span><span class="mpre"> </span><a name="loc_152_10_152_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_10_152_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> = do
        (</span><a name="loc_153_10_153_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_10_153_14&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre">, </span><a name="loc_153_16_153_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_16_153_20&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_79_1_79_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_14&#39;)"><span class="hl_varref"><span class="mpre">peekAndOffset</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_152_10_152_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_10_152_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre">)
        </span><a name="loc_154_9_154_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_9_154_16&#39;)"><span class="hl_vardecl"><span class="mpre">visible</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_153_16_153_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_16_153_20&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_143_28_143_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_28_143_47&#39;)"><span class="hl_conref"><span class="mpre">CONSOLE_CURSOR_INFO</span></span></a><span class="mpre"> </span><a href="#loc_153_10_153_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_10_153_14&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><a href="#loc_154_9_154_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_9_154_16&#39;)"><span class="hl_varref"><span class="mpre">visible</span></span></a><span class="mpre">)
    </span><span class="hl_fundecl"><span class="mpre">poke</span></span><span class="mpre"> </span><a name="loc_156_10_156_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_10_156_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> (</span><a href="#loc_143_28_143_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_28_143_47&#39;)"><span class="hl_conref"><span class="mpre">CONSOLE_CURSOR_INFO</span></span></a><span class="mpre"> </span><a name="loc_156_35_156_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_35_156_39&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> </span><a name="loc_156_40_156_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_40_156_47&#39;)"><span class="hl_vardecl"><span class="mpre">visible</span></span></a><span class="mpre">) = do
        </span><a name="loc_157_9_157_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_9_157_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_84_1_84_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_1_84_14&#39;)"><span class="hl_varref"><span class="mpre">pokeAndOffset</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_156_10_156_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_10_156_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre">) </span><a href="#loc_156_35_156_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_35_156_39&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_157_9_157_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_9_157_13&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><a href="#loc_156_40_156_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_40_156_47&#39;)"><span class="hl_varref"><span class="mpre">visible</span></span></a><span class="mpre">


data </span><a name="loc_161_6_161_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_6_161_32&#39;)"><span class="hl_tycondecl"><span class="mpre">CONSOLE_SCREEN_BUFFER_INFO</span></span></a><span class="mpre"> = </span><a name="loc_161_35_161_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_35_161_61&#39;)"><span class="hl_condecl"><span class="mpre">CONSOLE_SCREEN_BUFFER_INFO</span></span></a><span class="mpre"> {
        </span><a name="loc_162_9_162_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_9_162_18&#39;)"><span class="hl_fielddecl"><span class="mpre">csbi_size</span></span></a><span class="mpre"> :: </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre">,
        </span><a name="loc_163_9_163_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_9_163_29&#39;)"><span class="hl_fielddecl"><span class="mpre">csbi_cursor_position</span></span></a><span class="mpre"> :: </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre">,
        </span><a name="loc_164_9_164_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_9_164_24&#39;)"><span class="hl_fielddecl"><span class="mpre">csbi_attributes</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">WORD</span></span><span class="mpre">,
        </span><a name="loc_165_9_165_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_9_165_20&#39;)"><span class="hl_fielddecl"><span class="mpre">csbi_window</span></span></a><span class="mpre"> :: </span><a href="#loc_111_6_111_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_6_111_16&#39;)"><span class="hl_tyconref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre">,
        </span><a name="loc_166_9_166_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_9_166_33&#39;)"><span class="hl_fielddecl"><span class="mpre">csbi_maximum_window_size</span></span></a><span class="mpre"> :: </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre">
    }
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 168, srcSpanStartColumn = 5, srcSpanEndLine = 168, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 168, srcSpanStartColumn = 5, srcSpanEndLine = 168, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/a"><span class="mpre">deriving (Show)</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Storable</span></span><span class="mpre"> </span><a href="#loc_161_6_161_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_6_161_32&#39;)"><span class="hl_tyconref"><span class="mpre">CONSOLE_SCREEN_BUFFER_INFO</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 171, srcSpanStartColumn = 12, srcSpanEndLine = 171, srcSpanEndColumn = 100}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 171, srcSpanStartColumn = 12, srcSpanEndLine = 171, srcSpanEndColumn = 13}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSp"><span class="mpre">~(CONSOLE_SCREEN_BUFFER_INFO size cursor_position attributes window maximum_window_size)</span></span><span class="mpre">
      = </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">size</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cursor_position</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">attributes</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">window</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">maximum_window_size</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 173, srcSpanStartColumn = 15, srcSpanEndLine = 173, srcSpanEndColumn = 57}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 173, srcSpanStartColumn = 15, srcSpanEndLine = 173, srcSpanEndColumn = 16}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpa"><span class="mpre">~(CONSOLE_SCREEN_BUFFER_INFO size _ _ _ _)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">size</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">peek</span></span><span class="mpre"> </span><a name="loc_174_10_174_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_10_174_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> = do
        (</span><a name="loc_175_10_175_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_10_175_14&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre">, </span><a name="loc_175_16_175_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_16_175_20&#39;)"><span class="hl_vardecl"><span class="mpre">ptr1</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_79_1_79_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_14&#39;)"><span class="hl_varref"><span class="mpre">peekAndOffset</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_174_10_174_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_10_174_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre">)
        (</span><a name="loc_176_10_176_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_10_176_25&#39;)"><span class="hl_vardecl"><span class="mpre">cursor_position</span></span></a><span class="mpre">, </span><a name="loc_176_27_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_27_176_31&#39;)"><span class="hl_vardecl"><span class="mpre">ptr2</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_79_1_79_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_14&#39;)"><span class="hl_varref"><span class="mpre">peekAndOffset</span></span></a><span class="mpre"> </span><a href="#loc_175_16_175_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_16_175_20&#39;)"><span class="hl_varref"><span class="mpre">ptr1</span></span></a><span class="mpre">
        (</span><a name="loc_177_10_177_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_10_177_20&#39;)"><span class="hl_vardecl"><span class="mpre">attributes</span></span></a><span class="mpre">, </span><a name="loc_177_22_177_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_22_177_26&#39;)"><span class="hl_vardecl"><span class="mpre">ptr3</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_79_1_79_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_14&#39;)"><span class="hl_varref"><span class="mpre">peekAndOffset</span></span></a><span class="mpre"> </span><a href="#loc_176_27_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_27_176_31&#39;)"><span class="hl_varref"><span class="mpre">ptr2</span></span></a><span class="mpre">
        (</span><a name="loc_178_10_178_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_10_178_16&#39;)"><span class="hl_vardecl"><span class="mpre">window</span></span></a><span class="mpre">, </span><a name="loc_178_18_178_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_18_178_22&#39;)"><span class="hl_vardecl"><span class="mpre">ptr4</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_79_1_79_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_14&#39;)"><span class="hl_varref"><span class="mpre">peekAndOffset</span></span></a><span class="mpre"> </span><a href="#loc_177_22_177_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_22_177_26&#39;)"><span class="hl_varref"><span class="mpre">ptr3</span></span></a><span class="mpre">
        </span><a name="loc_179_9_179_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_9_179_28&#39;)"><span class="hl_vardecl"><span class="mpre">maximum_window_size</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_178_18_178_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_18_178_22&#39;)"><span class="hl_varref"><span class="mpre">ptr4</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_161_35_161_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_35_161_61&#39;)"><span class="hl_conref"><span class="mpre">CONSOLE_SCREEN_BUFFER_INFO</span></span></a><span class="mpre"> </span><a href="#loc_175_10_175_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_10_175_14&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><a href="#loc_176_10_176_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_10_176_25&#39;)"><span class="hl_varref"><span class="mpre">cursor_position</span></span></a><span class="mpre"> </span><a href="#loc_177_10_177_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_10_177_20&#39;)"><span class="hl_varref"><span class="mpre">attributes</span></span></a><span class="mpre"> </span><a href="#loc_178_10_178_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_10_178_16&#39;)"><span class="hl_varref"><span class="mpre">window</span></span></a><span class="mpre"> </span><a href="#loc_179_9_179_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_9_179_28&#39;)"><span class="hl_varref"><span class="mpre">maximum_window_size</span></span></a><span class="mpre">)
    </span><span class="hl_fundecl"><span class="mpre">poke</span></span><span class="mpre"> </span><a name="loc_181_10_181_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_10_181_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> (</span><a href="#loc_161_35_161_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_35_161_61&#39;)"><span class="hl_conref"><span class="mpre">CONSOLE_SCREEN_BUFFER_INFO</span></span></a><span class="mpre"> </span><a name="loc_181_42_181_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_42_181_46&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> </span><a name="loc_181_47_181_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_47_181_62&#39;)"><span class="hl_vardecl"><span class="mpre">cursor_position</span></span></a><span class="mpre"> </span><a name="loc_181_63_181_73" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_63_181_73&#39;)"><span class="hl_vardecl"><span class="mpre">attributes</span></span></a><span class="mpre"> </span><a name="loc_181_74_181_80" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_74_181_80&#39;)"><span class="hl_vardecl"><span class="mpre">window</span></span></a><span class="mpre"> </span><a name="loc_181_81_181_100" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_81_181_100&#39;)"><span class="hl_vardecl"><span class="mpre">maximum_window_size</span></span></a><span class="mpre">) = do
        </span><a name="loc_182_9_182_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_9_182_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr1</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_84_1_84_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_1_84_14&#39;)"><span class="hl_varref"><span class="mpre">pokeAndOffset</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_181_10_181_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_10_181_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre">) </span><a href="#loc_181_42_181_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_42_181_46&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">
        </span><a name="loc_183_9_183_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_183_9_183_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr2</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_84_1_84_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_1_84_14&#39;)"><span class="hl_varref"><span class="mpre">pokeAndOffset</span></span></a><span class="mpre"> </span><a href="#loc_182_9_182_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_9_182_13&#39;)"><span class="hl_varref"><span class="mpre">ptr1</span></span></a><span class="mpre"> </span><a href="#loc_181_47_181_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_47_181_62&#39;)"><span class="hl_varref"><span class="mpre">cursor_position</span></span></a><span class="mpre">
        </span><a name="loc_184_9_184_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_9_184_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr3</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_84_1_84_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_1_84_14&#39;)"><span class="hl_varref"><span class="mpre">pokeAndOffset</span></span></a><span class="mpre"> </span><a href="#loc_183_9_183_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_183_9_183_13&#39;)"><span class="hl_varref"><span class="mpre">ptr2</span></span></a><span class="mpre"> </span><a href="#loc_181_63_181_73" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_63_181_73&#39;)"><span class="hl_varref"><span class="mpre">attributes</span></span></a><span class="mpre">
        </span><a name="loc_185_9_185_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_9_185_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr4</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_84_1_84_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_1_84_14&#39;)"><span class="hl_varref"><span class="mpre">pokeAndOffset</span></span></a><span class="mpre"> </span><a href="#loc_184_9_184_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_9_184_13&#39;)"><span class="hl_varref"><span class="mpre">ptr3</span></span></a><span class="mpre"> </span><a href="#loc_181_74_181_80" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_74_181_80&#39;)"><span class="hl_varref"><span class="mpre">window</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_185_9_185_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_9_185_13&#39;)"><span class="hl_varref"><span class="mpre">ptr4</span></span></a><span class="mpre"> </span><a href="#loc_181_81_181_100" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_81_181_100&#39;)"><span class="hl_varref"><span class="mpre">maximum_window_size</span></span></a><span class="mpre">


data </span><a name="loc_189_6_189_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_6_189_15&#39;)"><span class="hl_tycondecl"><span class="mpre">CHAR_INFO</span></span></a><span class="mpre"> = </span><a name="loc_189_18_189_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_18_189_27&#39;)"><span class="hl_condecl"><span class="mpre">CHAR_INFO</span></span></a><span class="mpre"> {
        </span><a name="loc_190_9_190_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_9_190_16&#39;)"><span class="hl_fielddecl"><span class="mpre">ci_char</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">WCHAR</span></span><span class="mpre">,
        </span><a name="loc_191_9_191_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_9_191_22&#39;)"><span class="hl_fielddecl"><span class="mpre">ci_attributes</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">WORD</span></span><span class="mpre">
    }
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 193, srcSpanStartColumn = 5, srcSpanEndLine = 193, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 193, srcSpanStartColumn = 5, srcSpanEndLine = 193, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/a"><span class="mpre">deriving (Show)</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Storable</span></span><span class="mpre"> </span><a href="#loc_189_6_189_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_6_189_15&#39;)"><span class="hl_tyconref"><span class="mpre">CHAR_INFO</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 12, srcSpanEndLine = 196, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 12, srcSpanEndLine = 196, srcSpanEndColumn = 13}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpa"><span class="mpre">~(CHAR_INFO char attributes)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">char</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">attributes</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 197, srcSpanStartColumn = 15, srcSpanEndLine = 197, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 197, srcSpanStartColumn = 15, srcSpanEndLine = 197, srcSpanEndColumn = 16}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpa"><span class="mpre">~(CHAR_INFO char _)</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">alignment</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">char</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">peek</span></span><span class="mpre"> </span><a name="loc_198_10_198_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_10_198_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> = do
        (</span><a name="loc_199_10_199_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_10_199_14&#39;)"><span class="hl_vardecl"><span class="mpre">char</span></span></a><span class="mpre">, </span><a name="loc_199_16_199_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_16_199_20&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_79_1_79_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_14&#39;)"><span class="hl_varref"><span class="mpre">peekAndOffset</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_198_10_198_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_10_198_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre">)
        </span><a name="loc_200_9_200_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_200_9_200_19&#39;)"><span class="hl_vardecl"><span class="mpre">attributes</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_199_16_199_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_16_199_20&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_189_18_189_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_18_189_27&#39;)"><span class="hl_conref"><span class="mpre">CHAR_INFO</span></span></a><span class="mpre"> </span><a href="#loc_199_10_199_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_10_199_14&#39;)"><span class="hl_varref"><span class="mpre">char</span></span></a><span class="mpre"> </span><a href="#loc_200_9_200_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_200_9_200_19&#39;)"><span class="hl_varref"><span class="mpre">attributes</span></span></a><span class="mpre">)
    </span><span class="hl_fundecl"><span class="mpre">poke</span></span><span class="mpre"> </span><a name="loc_202_10_202_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_10_202_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> (</span><a href="#loc_189_18_189_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_18_189_27&#39;)"><span class="hl_conref"><span class="mpre">CHAR_INFO</span></span></a><span class="mpre"> </span><a name="loc_202_25_202_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_25_202_29&#39;)"><span class="hl_vardecl"><span class="mpre">char</span></span></a><span class="mpre"> </span><a name="loc_202_30_202_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_30_202_40&#39;)"><span class="hl_vardecl"><span class="mpre">attributes</span></span></a><span class="mpre">) = do
        </span><a name="loc_203_9_203_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_9_203_13&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_84_1_84_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_1_84_14&#39;)"><span class="hl_varref"><span class="mpre">pokeAndOffset</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">castPtr</span></span><span class="mpre"> </span><a href="#loc_202_10_202_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_10_202_13&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre">) </span><a href="#loc_202_25_202_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_25_202_29&#39;)"><span class="hl_varref"><span class="mpre">char</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_203_9_203_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_9_203_13&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><a href="#loc_202_30_202_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_30_202_40&#39;)"><span class="hl_varref"><span class="mpre">attributes</span></span></a><span class="mpre">


</span><a href="#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_1_208_17&#39;)"><span class="mpre">sTD_INPUT_HANDLE</span></a><span class="mpre">, </span><a href="#loc_209_1_209_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_1_209_18&#39;)"><span class="mpre">sTD_OUTPUT_HANDLE</span></a><span class="mpre">, </span><a href="#loc_210_1_210_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_17&#39;)"><span class="mpre">sTD_ERROR_HANDLE</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">DWORD</span></span><span class="mpre">
</span><a name="loc_208_1_208_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_1_208_17&#39;)"><span class="hl_vardecl"><span class="mpre">sTD_INPUT_HANDLE</span></span></a><span class="mpre"> = -</span><span class="hl_num"><span class="mpre">10</span></span><span class="mpre">
</span><a name="loc_209_1_209_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_1_209_18&#39;)"><span class="hl_vardecl"><span class="mpre">sTD_OUTPUT_HANDLE</span></span></a><span class="mpre"> = -</span><span class="hl_num"><span class="mpre">11</span></span><span class="mpre">
</span><a name="loc_210_1_210_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_17&#39;)"><span class="hl_vardecl"><span class="mpre">sTD_ERROR_HANDLE</span></span></a><span class="mpre"> = -</span><span class="hl_num"><span class="mpre">12</span></span><span class="mpre">

</span><a href="#loc_215_1_215_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_215_1_215_16&#39;)"><span class="mpre">fOREGROUND_BLUE</span></a><span class="mpre">, </span><a href="#loc_216_1_216_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_1_216_17&#39;)"><span class="mpre">fOREGROUND_GREEN</span></a><span class="mpre">, </span><a href="#loc_217_1_217_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_15&#39;)"><span class="mpre">fOREGROUND_RED</span></a><span class="mpre">, </span><a href="#loc_218_1_218_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_21&#39;)"><span class="mpre">fOREGROUND_INTENSITY</span></a><span class="mpre">,
  </span><a href="#loc_219_1_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_1_219_16&#39;)"><span class="mpre">bACKGROUND_BLUE</span></a><span class="mpre">, </span><a href="#loc_220_1_220_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_1_220_17&#39;)"><span class="mpre">bACKGROUND_GREEN</span></a><span class="mpre">, </span><a href="#loc_221_1_221_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_1_221_15&#39;)"><span class="mpre">bACKGROUND_RED</span></a><span class="mpre">, </span><a href="#loc_222_1_222_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_1_222_21&#39;)"><span class="mpre">bACKGROUND_INTENSITY</span></a><span class="mpre">,
  </span><a href="#loc_223_1_223_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_223_1_223_25&#39;)"><span class="mpre">cOMMON_LVB_REVERSE_VIDEO</span></a><span class="mpre">, </span><a href="#loc_224_1_224_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_22&#39;)"><span class="mpre">cOMMON_LVB_UNDERSCORE</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">WORD</span></span><span class="mpre">
</span><a name="loc_215_1_215_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_215_1_215_16&#39;)"><span class="hl_vardecl"><span class="mpre">fOREGROUND_BLUE</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x1</span></span><span class="mpre">
</span><a name="loc_216_1_216_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_1_216_17&#39;)"><span class="hl_vardecl"><span class="mpre">fOREGROUND_GREEN</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x2</span></span><span class="mpre">
</span><a name="loc_217_1_217_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_15&#39;)"><span class="hl_vardecl"><span class="mpre">fOREGROUND_RED</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x4</span></span><span class="mpre">
</span><a name="loc_218_1_218_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_21&#39;)"><span class="hl_vardecl"><span class="mpre">fOREGROUND_INTENSITY</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x8</span></span><span class="mpre">
</span><a name="loc_219_1_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_1_219_16&#39;)"><span class="hl_vardecl"><span class="mpre">bACKGROUND_BLUE</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x10</span></span><span class="mpre">
</span><a name="loc_220_1_220_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_1_220_17&#39;)"><span class="hl_vardecl"><span class="mpre">bACKGROUND_GREEN</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x20</span></span><span class="mpre">
</span><a name="loc_221_1_221_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_1_221_15&#39;)"><span class="hl_vardecl"><span class="mpre">bACKGROUND_RED</span></span></a><span class="mpre">= </span><span class="hl_num"><span class="mpre">0x40</span></span><span class="mpre">
</span><a name="loc_222_1_222_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_1_222_21&#39;)"><span class="hl_vardecl"><span class="mpre">bACKGROUND_INTENSITY</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x80</span></span><span class="mpre">
</span><a name="loc_223_1_223_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_223_1_223_25&#39;)"><span class="hl_vardecl"><span class="mpre">cOMMON_LVB_REVERSE_VIDEO</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x4000</span></span><span class="mpre">
</span><a name="loc_224_1_224_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_22&#39;)"><span class="hl_vardecl"><span class="mpre">cOMMON_LVB_UNDERSCORE</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">0x8000</span></span><span class="mpre">

</span><a href="#loc_227_1_227_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_1_227_17&#39;)"><span class="mpre">fOREGROUND_WHITE</span></a><span class="mpre">, </span><a href="#loc_228_1_228_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_1_228_17&#39;)"><span class="mpre">bACKGROUND_WHITE</span></a><span class="mpre">, </span><a href="#loc_229_1_229_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_1_229_25&#39;)"><span class="mpre">fOREGROUND_INTENSE_WHITE</span></a><span class="mpre">, </span><a href="#loc_230_1_230_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_230_1_230_25&#39;)"><span class="mpre">bACKGROUND_INTENSE_WHITE</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">WORD</span></span><span class="mpre">
</span><a name="loc_227_1_227_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_1_227_17&#39;)"><span class="hl_vardecl"><span class="mpre">fOREGROUND_WHITE</span></span></a><span class="mpre"> = </span><a href="#loc_217_1_217_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_15&#39;)"><span class="hl_varref"><span class="mpre">fOREGROUND_RED</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.|.</span></span><span class="mpre"> </span><a href="#loc_216_1_216_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_1_216_17&#39;)"><span class="hl_varref"><span class="mpre">fOREGROUND_GREEN</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.|.</span></span><span class="mpre"> </span><a href="#loc_215_1_215_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_215_1_215_16&#39;)"><span class="hl_varref"><span class="mpre">fOREGROUND_BLUE</span></span></a><span class="mpre">
</span><a name="loc_228_1_228_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_1_228_17&#39;)"><span class="hl_vardecl"><span class="mpre">bACKGROUND_WHITE</span></span></a><span class="mpre"> = </span><a href="#loc_221_1_221_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_1_221_15&#39;)"><span class="hl_varref"><span class="mpre">bACKGROUND_RED</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.|.</span></span><span class="mpre"> </span><a href="#loc_220_1_220_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_1_220_17&#39;)"><span class="hl_varref"><span class="mpre">bACKGROUND_GREEN</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.|.</span></span><span class="mpre"> </span><a href="#loc_219_1_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_1_219_16&#39;)"><span class="hl_varref"><span class="mpre">bACKGROUND_BLUE</span></span></a><span class="mpre">
</span><a name="loc_229_1_229_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_1_229_25&#39;)"><span class="hl_vardecl"><span class="mpre">fOREGROUND_INTENSE_WHITE</span></span></a><span class="mpre"> = </span><a href="#loc_227_1_227_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_1_227_17&#39;)"><span class="hl_varref"><span class="mpre">fOREGROUND_WHITE</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.|.</span></span><span class="mpre"> </span><a href="#loc_218_1_218_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_21&#39;)"><span class="hl_varref"><span class="mpre">fOREGROUND_INTENSITY</span></span></a><span class="mpre">
</span><a name="loc_230_1_230_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_230_1_230_25&#39;)"><span class="hl_vardecl"><span class="mpre">bACKGROUND_INTENSE_WHITE</span></span></a><span class="mpre"> = </span><a href="#loc_228_1_228_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_1_228_17&#39;)"><span class="hl_varref"><span class="mpre">bACKGROUND_WHITE</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.|.</span></span><span class="mpre"> </span><a href="#loc_222_1_222_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_1_222_21&#39;)"><span class="hl_varref"><span class="mpre">bACKGROUND_INTENSITY</span></span></a><span class="mpre">


</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 233, srcSpanStartColumn = 1, srcSpanEndLine = 233, srcSpanEndColumn = 90}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 233, srcSpanStartColumn = 1, srcSpanEndLine = 233, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi"><span class="mpre">foreign import stdcall unsafe &quot;windows.h GetStdHandle&quot; getStdHandle :: DWORD -&gt; IO HANDLE</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 234, srcSpanStartColumn = 1, srcSpanEndLine = 234, srcSpanEndColumn = 152}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 234, srcSpanStartColumn = 1, srcSpanEndLine = 234, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">foreign import stdcall unsafe &quot;windows.h GetConsoleScreenBufferInfo&quot; cGetConsoleScreenBufferInfo :: HANDLE -&gt; Ptr CONSOLE_SCREEN_BUFFER_INFO -&gt; IO BOOL</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 235, srcSpanStartColumn = 1, srcSpanEndLine = 235, srcSpanEndColumn = 133}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 235, srcSpanStartColumn = 1, srcSpanEndLine = 235, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">foreign import stdcall unsafe &quot;windows.h GetConsoleCursorInfo&quot; cGetConsoleCursorInfo :: HANDLE -&gt; Ptr CONSOLE_CURSOR_INFO -&gt; IO BOOL</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 237, srcSpanStartColumn = 1, srcSpanEndLine = 237, srcSpanEndColumn = 120}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 237, srcSpanStartColumn = 1, srcSpanEndLine = 237, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">foreign import stdcall unsafe &quot;windows.h SetConsoleTextAttribute&quot; cSetConsoleTextAttribute :: HANDLE -&gt; WORD -&gt; IO BOOL</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 238, srcSpanStartColumn = 1, srcSpanEndLine = 238, srcSpanEndColumn = 132}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 238, srcSpanStartColumn = 1, srcSpanEndLine = 238, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">foreign import stdcall unsafe &quot;windows.h SetConsoleCursorPosition&quot; cSetConsoleCursorPosition :: HANDLE -&gt; UNPACKED_COORD -&gt; IO BOOL</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 239, srcSpanStartColumn = 1, srcSpanEndLine = 239, srcSpanEndColumn = 133}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 239, srcSpanStartColumn = 1, srcSpanEndLine = 239, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">foreign import stdcall unsafe &quot;windows.h SetConsoleCursorInfo&quot; cSetConsoleCursorInfo :: HANDLE -&gt; Ptr CONSOLE_CURSOR_INFO -&gt; IO BOOL</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 240, srcSpanStartColumn = 1, srcSpanEndLine = 240, srcSpanEndColumn = 98}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 240, srcSpanStartColumn = 1, srcSpanEndLine = 240, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi"><span class="mpre">foreign import stdcall unsafe &quot;windows.h SetConsoleTitleW&quot; cSetConsoleTitle :: LPCTSTR -&gt; IO BOOL</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 242, srcSpanStartColumn = 1, srcSpanEndLine = 242, srcSpanEndColumn = 166}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 242, srcSpanStartColumn = 1, srcSpanEndLine = 242, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">foreign import stdcall unsafe &quot;windows.h FillConsoleOutputAttribute&quot; cFillConsoleOutputAttribute :: HANDLE -&gt; WORD -&gt; DWORD -&gt; UNPACKED_COORD -&gt; Ptr DWORD -&gt; IO BOOL</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 243, srcSpanStartColumn = 1, srcSpanEndLine = 243, srcSpanEndColumn = 168}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 243, srcSpanStartColumn = 1, srcSpanEndLine = 243, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">foreign import stdcall unsafe &quot;windows.h FillConsoleOutputCharacterW&quot; cFillConsoleOutputCharacter :: HANDLE -&gt; TCHAR -&gt; DWORD -&gt; UNPACKED_COORD -&gt; Ptr DWORD -&gt; IO BOOL</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 244, srcSpanStartColumn = 1, srcSpanEndLine = 244, srcSpanEndColumn = 188}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 244, srcSpanStartColumn = 1, srcSpanEndLine = 244, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">foreign import stdcall unsafe &quot;windows.h ScrollConsoleScreenBufferW&quot; cScrollConsoleScreenBuffer :: HANDLE -&gt; Ptr SMALL_RECT -&gt; Ptr SMALL_RECT -&gt; UNPACKED_COORD -&gt; Ptr CHAR_INFO -&gt; IO BOOL</span></span><span class="mpre">


</span><a href="#loc_248_1_248_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_1_248_27&#39;)"><span class="mpre">getConsoleScreenBufferInfo</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_161_6_161_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_6_161_32&#39;)"><span class="hl_tyconref"><span class="mpre">CONSOLE_SCREEN_BUFFER_INFO</span></span></a><span class="mpre">
</span><a name="loc_248_1_248_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_1_248_27&#39;)"><span class="hl_fundecl"><span class="mpre">getConsoleScreenBufferInfo</span></span></a><span class="mpre"> </span><a name="loc_248_28_248_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_28_248_34&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="hl_varref"><span class="mpre">alloca</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_248_47_248_77" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_47_248_77&#39;)"><span class="hl_vardecl"><span class="mpre">ptr_console_screen_buffer_info</span></span></a><span class="mpre"> -&gt; do
    </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;getConsoleScreenBufferInfo&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cGetConsoleScreenBufferInfo</span></span><span class="mpre"> </span><a href="#loc_248_28_248_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_28_248_34&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_248_47_248_77" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_47_248_77&#39;)"><span class="hl_varref"><span class="mpre">ptr_console_screen_buffer_info</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_248_47_248_77" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_47_248_77&#39;)"><span class="hl_varref"><span class="mpre">ptr_console_screen_buffer_info</span></span></a><span class="mpre">

</span><a href="#loc_253_1_253_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_1_253_21&#39;)"><span class="mpre">getConsoleCursorInfo</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_143_6_143_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_6_143_25&#39;)"><span class="hl_tyconref"><span class="mpre">CONSOLE_CURSOR_INFO</span></span></a><span class="mpre">
</span><a name="loc_253_1_253_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_1_253_21&#39;)"><span class="hl_fundecl"><span class="mpre">getConsoleCursorInfo</span></span></a><span class="mpre"> </span><a name="loc_253_22_253_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_22_253_28&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="hl_varref"><span class="mpre">alloca</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_253_41_253_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_41_253_64&#39;)"><span class="hl_vardecl"><span class="mpre">ptr_console_cursor_info</span></span></a><span class="mpre"> -&gt; do
    </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;getConsoleCursorInfo&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cGetConsoleCursorInfo</span></span><span class="mpre"> </span><a href="#loc_253_22_253_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_22_253_28&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_253_41_253_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_41_253_64&#39;)"><span class="hl_varref"><span class="mpre">ptr_console_cursor_info</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_253_41_253_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_41_253_64&#39;)"><span class="hl_varref"><span class="mpre">ptr_console_cursor_info</span></span></a><span class="mpre">


</span><a href="#loc_259_1_259_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_24&#39;)"><span class="mpre">setConsoleTextAttribute</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">WORD</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_259_1_259_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_24&#39;)"><span class="hl_fundecl"><span class="mpre">setConsoleTextAttribute</span></span></a><span class="mpre"> </span><a name="loc_259_25_259_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_25_259_31&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a name="loc_259_32_259_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_32_259_42&#39;)"><span class="hl_vardecl"><span class="mpre">attributes</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;setConsoleTextAttribute&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cSetConsoleTextAttribute</span></span><span class="mpre"> </span><a href="#loc_259_25_259_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_25_259_31&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_259_32_259_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_32_259_42&#39;)"><span class="hl_varref"><span class="mpre">attributes</span></span></a><span class="mpre">

</span><a href="#loc_262_1_262_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_1_262_25&#39;)"><span class="mpre">setConsoleCursorPosition</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_262_1_262_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_1_262_25&#39;)"><span class="hl_fundecl"><span class="mpre">setConsoleCursorPosition</span></span></a><span class="mpre"> </span><a name="loc_262_26_262_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_26_262_32&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a name="loc_262_33_262_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_33_262_48&#39;)"><span class="hl_vardecl"><span class="mpre">cursor_position</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;setConsoleCursorPosition&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cSetConsoleCursorPosition</span></span><span class="mpre"> </span><a href="#loc_262_26_262_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_26_262_32&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> (</span><a href="#loc_75_1_75_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_12&#39;)"><span class="hl_varref"><span class="mpre">unpackCOORD</span></span></a><span class="mpre"> </span><a href="#loc_262_33_262_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_33_262_48&#39;)"><span class="hl_varref"><span class="mpre">cursor_position</span></span></a><span class="mpre">)

</span><a href="#loc_265_1_265_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_1_265_21&#39;)"><span class="mpre">setConsoleCursorInfo</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><a href="#loc_143_6_143_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_6_143_25&#39;)"><span class="hl_tyconref"><span class="mpre">CONSOLE_CURSOR_INFO</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_265_1_265_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_1_265_21&#39;)"><span class="hl_fundecl"><span class="mpre">setConsoleCursorInfo</span></span></a><span class="mpre"> </span><a name="loc_265_22_265_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_22_265_28&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a name="loc_265_29_265_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_29_265_48&#39;)"><span class="hl_vardecl"><span class="mpre">console_cursor_info</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> </span><a href="#loc_265_29_265_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_29_265_48&#39;)"><span class="hl_varref"><span class="mpre">console_cursor_info</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_265_79_265_102" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_79_265_102&#39;)"><span class="hl_vardecl"><span class="mpre">ptr_console_cursor_info</span></span></a><span class="mpre"> -&gt; do
    </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;setConsoleCursorInfo&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cSetConsoleCursorInfo</span></span><span class="mpre"> </span><a href="#loc_265_22_265_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_22_265_28&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_265_79_265_102" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_79_265_102&#39;)"><span class="hl_varref"><span class="mpre">ptr_console_cursor_info</span></span></a><span class="mpre">

</span><a href="#loc_269_1_269_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_1_269_16&#39;)"><span class="mpre">setConsoleTitle</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">LPCTSTR</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_269_1_269_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_1_269_16&#39;)"><span class="hl_fundecl"><span class="mpre">setConsoleTitle</span></span></a><span class="mpre"> </span><a name="loc_269_17_269_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_17_269_22&#39;)"><span class="hl_vardecl"><span class="mpre">title</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;setConsoleTitle&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cSetConsoleTitle</span></span><span class="mpre"> </span><a href="#loc_269_17_269_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_17_269_22&#39;)"><span class="hl_varref"><span class="mpre">title</span></span></a><span class="mpre">


</span><a href="#loc_273_1_273_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_1_273_27&#39;)"><span class="mpre">fillConsoleOutputAttribute</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">WORD</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">DWORD</span></span><span class="mpre"> -&gt; </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">DWORD</span></span><span class="mpre">
</span><a name="loc_273_1_273_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_1_273_27&#39;)"><span class="hl_fundecl"><span class="mpre">fillConsoleOutputAttribute</span></span></a><span class="mpre"> </span><a name="loc_273_28_273_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_28_273_34&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a name="loc_273_35_273_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_35_273_44&#39;)"><span class="hl_vardecl"><span class="mpre">attribute</span></span></a><span class="mpre"> </span><a name="loc_273_45_273_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_45_273_56&#39;)"><span class="hl_vardecl"><span class="mpre">fill_length</span></span></a><span class="mpre"> </span><a name="loc_273_57_273_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_57_273_69&#39;)"><span class="hl_vardecl"><span class="mpre">write_origin</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="hl_varref"><span class="mpre">alloca</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_273_82_273_99" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_82_273_99&#39;)"><span class="hl_vardecl"><span class="mpre">ptr_chars_written</span></span></a><span class="mpre"> -&gt; do
    </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;fillConsoleOutputAttribute&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cFillConsoleOutputAttribute</span></span><span class="mpre"> </span><a href="#loc_273_28_273_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_28_273_34&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_273_35_273_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_35_273_44&#39;)"><span class="hl_varref"><span class="mpre">attribute</span></span></a><span class="mpre"> </span><a href="#loc_273_45_273_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_45_273_56&#39;)"><span class="hl_varref"><span class="mpre">fill_length</span></span></a><span class="mpre"> (</span><a href="#loc_75_1_75_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_12&#39;)"><span class="hl_varref"><span class="mpre">unpackCOORD</span></span></a><span class="mpre"> </span><a href="#loc_273_57_273_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_57_273_69&#39;)"><span class="hl_varref"><span class="mpre">write_origin</span></span></a><span class="mpre">) </span><a href="#loc_273_82_273_99" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_82_273_99&#39;)"><span class="hl_varref"><span class="mpre">ptr_chars_written</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_273_82_273_99" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_82_273_99&#39;)"><span class="hl_varref"><span class="mpre">ptr_chars_written</span></span></a><span class="mpre">

</span><a href="#loc_278_1_278_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_1_278_27&#39;)"><span class="mpre">fillConsoleOutputCharacter</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">TCHAR</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">DWORD</span></span><span class="mpre"> -&gt; </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">DWORD</span></span><span class="mpre">
</span><a name="loc_278_1_278_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_1_278_27&#39;)"><span class="hl_fundecl"><span class="mpre">fillConsoleOutputCharacter</span></span></a><span class="mpre"> </span><a name="loc_278_28_278_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_28_278_34&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a name="loc_278_35_278_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_35_278_39&#39;)"><span class="hl_vardecl"><span class="mpre">char</span></span></a><span class="mpre"> </span><a name="loc_278_40_278_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_40_278_51&#39;)"><span class="hl_vardecl"><span class="mpre">fill_length</span></span></a><span class="mpre"> </span><a name="loc_278_52_278_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_52_278_64&#39;)"><span class="hl_vardecl"><span class="mpre">write_origin</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="hl_varref"><span class="mpre">alloca</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_278_77_278_94" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_77_278_94&#39;)"><span class="hl_vardecl"><span class="mpre">ptr_chars_written</span></span></a><span class="mpre"> -&gt; do
    </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;fillConsoleOutputCharacter&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cFillConsoleOutputCharacter</span></span><span class="mpre"> </span><a href="#loc_278_28_278_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_28_278_34&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_278_35_278_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_35_278_39&#39;)"><span class="hl_varref"><span class="mpre">char</span></span></a><span class="mpre"> </span><a href="#loc_278_40_278_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_40_278_51&#39;)"><span class="hl_varref"><span class="mpre">fill_length</span></span></a><span class="mpre"> (</span><a href="#loc_75_1_75_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_12&#39;)"><span class="hl_varref"><span class="mpre">unpackCOORD</span></span></a><span class="mpre"> </span><a href="#loc_278_52_278_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_52_278_64&#39;)"><span class="hl_varref"><span class="mpre">write_origin</span></span></a><span class="mpre">) </span><a href="#loc_278_77_278_94" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_77_278_94&#39;)"><span class="hl_varref"><span class="mpre">ptr_chars_written</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_278_77_278_94" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_278_77_278_94&#39;)"><span class="hl_varref"><span class="mpre">ptr_chars_written</span></span></a><span class="mpre">

</span><a href="#loc_283_1_283_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_1_283_26&#39;)"><span class="mpre">scrollConsoleScreenBuffer</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><a href="#loc_111_6_111_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_6_111_16&#39;)"><span class="hl_tyconref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><a href="#loc_111_6_111_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_6_111_16&#39;)"><span class="hl_tyconref"><span class="mpre">SMALL_RECT</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">COORD</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_189_6_189_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_6_189_15&#39;)"><span class="hl_tyconref"><span class="mpre">CHAR_INFO</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_283_1_283_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_1_283_26&#39;)"><span class="hl_fundecl"><span class="mpre">scrollConsoleScreenBuffer</span></span></a><span class="mpre"> </span><a name="loc_283_27_283_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_27_283_33&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a name="loc_283_34_283_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_34_283_50&#39;)"><span class="hl_vardecl"><span class="mpre">scroll_rectangle</span></span></a><span class="mpre"> </span><a name="loc_283_51_283_68" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_51_283_68&#39;)"><span class="hl_vardecl"><span class="mpre">mb_clip_rectangle</span></span></a><span class="mpre"> </span><a name="loc_283_69_283_87" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_69_283_87&#39;)"><span class="hl_vardecl"><span class="mpre">destination_origin</span></span></a><span class="mpre"> </span><a name="loc_283_88_283_92" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_88_283_92&#39;)"><span class="hl_vardecl"><span class="mpre">fill</span></span></a><span class="mpre"> 
  = </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> </span><a href="#loc_283_34_283_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_34_283_50&#39;)"><span class="hl_varref"><span class="mpre">scroll_rectangle</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_284_30_284_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_284_30_284_50&#39;)"><span class="hl_vardecl"><span class="mpre">ptr_scroll_rectangle</span></span></a><span class="mpre"> -&gt;
    </span><a href="Foreign.Marshal.Utils.html#loc_122_1_122_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_122_1_122_10&#39;)"><span class="hl_varref"><span class="mpre">maybeWith</span></span></a><span class="mpre"> </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> </span><a href="#loc_283_51_283_68" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_51_283_68&#39;)"><span class="hl_varref"><span class="mpre">mb_clip_rectangle</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_285_41_285_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_41_285_59&#39;)"><span class="hl_vardecl"><span class="mpre">ptr_clip_rectangle</span></span></a><span class="mpre"> -&gt;
    </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> </span><a href="#loc_283_88_283_92" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_88_283_92&#39;)"><span class="hl_varref"><span class="mpre">fill</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_286_18_286_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_18_286_26&#39;)"><span class="hl_vardecl"><span class="mpre">ptr_fill</span></span></a><span class="mpre"> -&gt;
    </span><span class="hl_varref"><span class="mpre">failIfFalse_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;scrollConsoleScreenBuffer&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cScrollConsoleScreenBuffer</span></span><span class="mpre"> </span><a href="#loc_283_27_283_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_27_283_33&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_284_30_284_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_284_30_284_50&#39;)"><span class="hl_varref"><span class="mpre">ptr_scroll_rectangle</span></span></a><span class="mpre"> </span><a href="#loc_285_41_285_59" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_41_285_59&#39;)"><span class="hl_varref"><span class="mpre">ptr_clip_rectangle</span></span></a><span class="mpre"> (</span><a href="#loc_75_1_75_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_12&#39;)"><span class="hl_varref"><span class="mpre">unpackCOORD</span></span></a><span class="mpre"> </span><a href="#loc_283_69_283_87" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_69_283_87&#39;)"><span class="hl_varref"><span class="mpre">destination_origin</span></span></a><span class="mpre">) </span><a href="#loc_286_18_286_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_18_286_26&#39;)"><span class="hl_varref"><span class="mpre">ptr_fill</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- This essential function comes from the C runtime system. It is certainly provided by msvcrt, and also seems to be provided by the mingw C library - hurrah!</span></span><span class="mpre">
#if __GLASGOW_HASKELL__ &gt;= 612
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 292, srcSpanStartColumn = 1, srcSpanEndLine = 292, srcSpanEndColumn = 81}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 292, srcSpanStartColumn = 1, srcSpanEndLine = 292, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi"><span class="mpre">foreign import ccall unsafe &quot;_get_osfhandle&quot; cget_osfhandle :: CInt -&gt; IO HANDLE</span></span><span class="mpre">
#else
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 294, srcSpanStartColumn = 1, srcSpanEndLine = 294, srcSpanEndColumn = 86}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 294, srcSpanStartColumn = 1, srcSpanEndLine = 294, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi"><span class="mpre">foreign import ccall unsafe &quot;_get_osfhandle&quot; cget_osfhandle :: IOBase.FD -&gt; IO HANDLE</span></span><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">-- | This bit is all highly dubious.  The problem is that we want to output ANSI to arbitrary Handles rather than forcing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- people to use stdout.  However, the Windows ANSI emulator needs a Windows HANDLE to work it&#39;s magic, so we need to be able</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to extract one of those from the Haskell Handle.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This code accomplishes this, albeit at the cost of only being compatible with GHC.</span></span><span class="mpre">
</span><a href="#loc_303_1_303_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_1_303_19&#39;)"><span class="mpre">withHandleToHANDLE</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">HANDLE</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_303_1_303_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_1_303_19&#39;)"><span class="hl_fundecl"><span class="mpre">withHandleToHANDLE</span></span></a><span class="mpre"> </span><a name="loc_303_20_303_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_20_303_34&#39;)"><span class="hl_vardecl"><span class="mpre">haskell_handle</span></span></a><span class="mpre"> </span><a name="loc_303_35_303_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_35_303_41&#39;)"><span class="hl_vardecl"><span class="mpre">action</span></span></a><span class="mpre"> = 
    </span><span class="hl_comment"><span class="mpre">-- Create a stable pointer to the Handle. This prevents the garbage collector</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- getting to it while we are doing horrible manipulations with it, and hence</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- stops it being finalized (and closed).</span></span><span class="mpre">
    </span><a href="#loc_328_1_328_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_1_328_14&#39;)"><span class="hl_varref"><span class="mpre">withStablePtr</span></span></a><span class="mpre"> </span><a href="#loc_303_20_303_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_20_303_34&#39;)"><span class="hl_varref"><span class="mpre">haskell_handle</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
        </span><span class="hl_comment"><span class="mpre">-- Grab the write handle variable from the Handle</span></span><span class="mpre">
        let </span><a name="loc_309_13_309_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_13_309_30&#39;)"><span class="hl_vardecl"><span class="mpre">write_handle_mvar</span></span></a><span class="mpre"> = case </span><a href="#loc_303_20_303_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_20_303_34&#39;)"><span class="hl_varref"><span class="mpre">haskell_handle</span></span></a><span class="mpre"> of
                </span><a href="GHC.IO.Handle.Types.html#loc_101_5_101_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_101_5_101_15&#39;)"><span class="hl_conref"><span class="mpre">FileHandle</span></span></a><span class="mpre"> _ </span><a name="loc_310_30_310_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_310_30_310_41&#39;)"><span class="hl_vardecl"><span class="mpre">handle_mvar</span></span></a><span class="mpre">     -&gt; </span><a href="#loc_310_30_310_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_310_30_310_41&#39;)"><span class="hl_varref"><span class="mpre">handle_mvar</span></span></a><span class="mpre">
                </span><a href="GHC.IO.Handle.Types.html#loc_106_5_106_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_106_5_106_17&#39;)"><span class="hl_conref"><span class="mpre">DuplexHandle</span></span></a><span class="mpre"> _ _ </span><a name="loc_311_34_311_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_34_311_45&#39;)"><span class="hl_vardecl"><span class="mpre">handle_mvar</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_311_34_311_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_34_311_45&#39;)"><span class="hl_varref"><span class="mpre">handle_mvar</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- This is &quot;write&quot; MVar, we could also take the &quot;read&quot; one</span></span><span class="mpre">
        
        </span><span class="hl_comment"><span class="mpre">-- Get the FD from the algebraic data type</span></span><span class="mpre">
#if __GLASGOW_HASKELL__ &lt; 612
        </span><span class="hl_vardecl"><span class="mpre">fd</span></span><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">haFD</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.MVar.html#loc_116_1_116_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.MVar.html#loc_116_1_116_9&#39;)"><span class="hl_varref"><span class="mpre">readMVar</span></span></a><span class="mpre"> </span><a href="#loc_309_13_309_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_13_309_30&#39;)"><span class="hl_varref"><span class="mpre">write_handle_mvar</span></span></a><span class="mpre">
#else
        </span><span class="hl_comment"><span class="mpre">--readMVar write_handle_mvar &gt;&gt;= \(Handle__ { haDevice = dev }) -&gt; print (typeOf dev)</span></span><span class="mpre">
        </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_318_14_318_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_14_318_16&#39;)"><span class="hl_vardecl"><span class="mpre">fd</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (\(</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 318, srcSpanStartColumn = 28, srcSpanEndLine = 318, srcSpanEndColumn = 55}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ansi-terminal-0.6.1.1/System/Console/ANSI/Windows/Foreign.hs&quot;, srcSpanStartLine = 318, srcSpanStartColumn = 37, srcSpanEndLine = 318, srcSpanEndColumn = 38},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/ans"><span class="mpre">Handle__ { haDevice = dev }</span></span><span class="mpre">) -&gt; </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fdFD</span></span><span class="mpre"> (</span><a href="Data.Typeable.html#loc_112_1_112_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.html#loc_112_1_112_5&#39;)"><span class="hl_varref"><span class="mpre">cast</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">dev</span></span><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.MVar.html#loc_116_1_116_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.MVar.html#loc_116_1_116_9&#39;)"><span class="hl_varref"><span class="mpre">readMVar</span></span></a><span class="mpre"> </span><a href="#loc_309_13_309_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_13_309_30&#39;)"><span class="hl_varref"><span class="mpre">write_handle_mvar</span></span></a><span class="mpre">
#endif

        </span><span class="hl_comment"><span class="mpre">-- Finally, turn that (C-land) FD into a HANDLE using msvcrt</span></span><span class="mpre">
        </span><a name="loc_322_9_322_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_9_322_23&#39;)"><span class="hl_vardecl"><span class="mpre">windows_handle</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">cget_osfhandle</span></span><span class="mpre"> </span><a href="#loc_318_14_318_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_14_318_16&#39;)"><span class="hl_varref"><span class="mpre">fd</span></span></a><span class="mpre">
        
        </span><span class="hl_comment"><span class="mpre">-- Do what the user originally wanted</span></span><span class="mpre">
        </span><a href="#loc_303_35_303_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_35_303_41&#39;)"><span class="hl_varref"><span class="mpre">action</span></span></a><span class="mpre"> </span><a href="#loc_322_9_322_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_9_322_23&#39;)"><span class="hl_varref"><span class="mpre">windows_handle</span></span></a><span class="mpre">

</span><a href="#loc_328_1_328_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_1_328_14&#39;)"><span class="mpre">withStablePtr</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">StablePtr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_328_1_328_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_1_328_14&#39;)"><span class="hl_fundecl"><span class="mpre">withStablePtr</span></span></a><span class="mpre"> </span><a name="loc_328_15_328_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_15_328_20&#39;)"><span class="hl_vardecl"><span class="mpre">value</span></span></a><span class="mpre"> = </span><a href="Control.Exception.Base.html#loc_259_1_259_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_259_1_259_8&#39;)"><span class="hl_varref"><span class="mpre">bracket</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">newStablePtr</span></span><span class="mpre"> </span><a href="#loc_328_15_328_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_15_328_20&#39;)"><span class="hl_varref"><span class="mpre">value</span></span></a><span class="mpre">) </span><span class="hl_varref"><span class="mpre">freeStablePtr</span></span></div></body></html>