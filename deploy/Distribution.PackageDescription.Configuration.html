<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- -fno-warn-deprecations for use of Map.foldWithKey</span></span><span class="mpre">
{-# OPTIONS_GHC -fno-warn-deprecations #-}
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Distribution.PackageDescription.Configuration</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  Thomas Schilling, 2007</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  cabal-devel@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is about the cabal configurations feature. It exports</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;finalizePackageDescription&#39; and &#39;flattenPackageDescription&#39; which are</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- functions for converting &#39;GenericPackageDescription&#39;s down to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;PackageDescription&#39;s. It has code for working with the tree of conditions</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and resolving or flattening conditions.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.

    * Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the following
      disclaimer in the documentation and/or other materials provided
      with the distribution.

    * Neither the name of Isaac Jones nor the names of other
      contributors may be used to endorse or promote products derived
      from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. -}</span></span><span class="mpre">

module Distribution.PackageDescription.Configuration (
    finalizePackageDescription,
    flattenPackageDescription,

    </span><span class="hl_comment"><span class="mpre">-- Utils</span></span><span class="mpre">
    parseCondition,
    freeVars,
    mapCondTree,
    mapTreeData,
    mapTreeConds,
    mapTreeConstrs,
  ) where

import Distribution.Package
         ( </span><a href="Distribution.Package.html#loc_80_9_80_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_80_9_80_20&#39;)"><a href="Distribution.Package.html#loc_80_23_80_34" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_80_23_80_34&#39;)"><span class="mpre">PackageName</span></a></a><span class="mpre">, </span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="mpre">Dependency</span></a><span class="mpre">(..) )
import Distribution.PackageDescription
         ( </span><a href="Distribution.PackageDescription.html#loc_940_6_940_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_940_6_940_31&#39;)"><span class="mpre">GenericPackageDescription</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="mpre">PackageDescription</span></a><span class="mpre">(..)
         , </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="mpre">Library</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="mpre">Executable</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="mpre">BuildInfo</span></a><span class="mpre">(..)
         , </span><a href="Distribution.PackageDescription.html#loc_958_6_958_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_958_6_958_10&#39;)"><span class="mpre">Flag</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_967_9_967_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_967_9_967_17&#39;)"><span class="mpre">FlagName</span></a><span class="mpre">(..), FlagAssignment
         , </span><a href="Distribution.PackageDescription.html#loc_530_6_530_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_530_6_530_15&#39;)"><span class="mpre">Benchmark</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="mpre">CondTree</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_978_6_978_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_978_6_978_13&#39;)"><span class="mpre">ConfVar</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="mpre">Condition</span></a><span class="mpre">(..)
         , </span><a href="Distribution.PackageDescription.html#loc_395_6_395_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_395_6_395_15&#39;)"><span class="mpre">TestSuite</span></a><span class="mpre">(..) )
import Distribution.PackageDescription.Utils
         ( </span><a href="Distribution.PackageDescription.Utils.html#loc_21_1_21_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_21_1_21_9&#39;)"><span class="mpre">cabalBug</span></a><span class="mpre">, </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="mpre">userBug</span></a><span class="mpre"> )
import Distribution.Version
         ( </span><a href="Distribution.Version.html#loc_113_6_113_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_113_6_113_18&#39;)"><span class="mpre">VersionRange</span></a><span class="mpre">, </span><a href="Distribution.Version.html#loc_143_1_143_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_143_1_143_11&#39;)"><span class="mpre">anyVersion</span></a><span class="mpre">, </span><a href="Distribution.Version.html#loc_212_1_212_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_212_1_212_23&#39;)"><span class="mpre">intersectVersionRanges</span></a><span class="mpre">, </span><a href="Distribution.Version.html#loc_317_1_317_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_317_1_317_12&#39;)"><span class="mpre">withinRange</span></a><span class="mpre"> )
import Distribution.Compiler
         ( </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="mpre">CompilerId</span></a><span class="mpre">(</span><a href="Distribution.Compiler.html#loc_154_19_154_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_19_154_29&#39;)"><span class="mpre">CompilerId</span></a><span class="mpre">) )
import Distribution.System
         ( </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="mpre">Platform</span></a><span class="mpre">(..), </span><a href="Distribution.System.html#loc_66_6_66_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_6_66_8&#39;)"><span class="mpre">OS</span></a><span class="mpre">, </span><a href="Distribution.System.html#loc_118_6_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_118_6_118_10&#39;)"><span class="mpre">Arch</span></a><span class="mpre"> )
import Distribution.Simple.Utils
         ( </span><a href="Distribution.Simple.Utils.html#loc_1101_1_1101_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1101_1_1101_11&#39;)"><span class="mpre">currentDir</span></a><span class="mpre">, </span><a href="Distribution.Simple.Utils.html#loc_1283_1_1283_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1283_1_1283_10&#39;)"><span class="mpre">lowercase</span></a><span class="mpre"> )

import Distribution.Text
         ( </span><a href="Distribution.Text.html#loc_26_7_26_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_26_7_26_11&#39;)"><span class="mpre">Text</span></a><span class="mpre">(</span><a href="Distribution.Text.html#loc_28_3_28_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_28_3_28_8&#39;)"><span class="mpre">parse</span></a><span class="mpre">) )
import Distribution.Compat.ReadP as ReadP hiding ( </span><a href="Distribution.Compat.ReadP.html#loc_243_1_243_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_243_1_243_5&#39;)"><span class="mpre">char</span></a><span class="mpre"> )
import Control.Arrow (</span><a href="Control.Arrow.html#loc_90_5_90_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Arrow.html#loc_90_5_90_10&#39;)"><span class="mpre">first</span></a><span class="mpre">)
import qualified Distribution.Compat.ReadP as ReadP ( </span><a href="Distribution.Compat.ReadP.html#loc_243_1_243_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_243_1_243_5&#39;)"><span class="mpre">char</span></a><span class="mpre"> )

import Data.Char ( </span><a href="GHC.Unicode.html#loc_136_1_136_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_136_1_136_11&#39;)"><span class="mpre">isAlphaNum</span></a><span class="mpre"> )
import Data.Maybe ( </span><a href="Data.Maybe.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_115_1_115_10&#39;)"><span class="mpre">catMaybes</span></a><span class="mpre">, </span><a href="Data.Maybe.html#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_103_1_103_12&#39;)"><span class="mpre">maybeToList</span></a><span class="mpre"> )
import Data.Map ( Map, fromListWith, toList )
import qualified Data.Map as Map
import Data.Monoid

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Simplify the condition and return its free variables.</span></span><span class="mpre">
</span><a href="#loc_97_1_97_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_18&#39;)"><span class="mpre">simplifyCondition</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
                  -&gt; (</span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)   </span><span class="hl_comment"><span class="mpre">-- ^ (partial) variable assignment</span></span><span class="mpre">
                  -&gt; (</span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">, [</span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">])
</span><a name="loc_97_1_97_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_18&#39;)"><span class="hl_fundecl"><span class="mpre">simplifyCondition</span></span></a><span class="mpre"> </span><a name="loc_97_19_97_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_19_97_23&#39;)"><span class="hl_vardecl"><span class="mpre">cond</span></span></a><span class="mpre"> </span><a name="loc_97_24_97_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_24_97_25&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> = </span><a href="#loc_119_5_119_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_5_119_7&#39;)"><span class="hl_varref"><span class="mpre">fv</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_varref"><span class="mpre">walk</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_97_19_97_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_19_97_23&#39;)"><span class="hl_varref"><span class="mpre">cond</span></span></a><span class="mpre">
  where
    </span><a name="loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_fundecl"><span class="mpre">walk</span></span></a><span class="mpre"> </span><a name="loc_99_10_99_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_10_99_13&#39;)"><span class="hl_vardecl"><span class="mpre">cnd</span></span></a><span class="mpre"> = case </span><a href="#loc_99_10_99_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_10_99_13&#39;)"><span class="hl_varref"><span class="mpre">cnd</span></span></a><span class="mpre"> of
      </span><a href="Distribution.PackageDescription.html#loc_992_20_992_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_20_992_23&#39;)"><span class="hl_conref"><span class="mpre">Var</span></span></a><span class="mpre"> </span><a name="loc_100_11_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_11_100_12&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre">   -&gt; </span><span class="hl_varref"><span class="mpre">either</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_992_20_992_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_20_992_23&#39;)"><span class="hl_conref"><span class="mpre">Var</span></span></a><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> (</span><a href="#loc_97_24_97_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_24_97_25&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_100_11_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_11_100_12&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">)
      </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><a name="loc_101_11_101_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_11_101_12&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">   -&gt; </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><a href="#loc_101_11_101_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_11_101_12&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
      </span><a href="Distribution.PackageDescription.html#loc_994_20_994_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_994_20_994_24&#39;)"><span class="hl_conref"><span class="mpre">CNot</span></span></a><span class="mpre"> </span><a name="loc_102_12_102_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_12_102_13&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">  -&gt; case </span><a href="#loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_varref"><span class="mpre">walk</span></span></a><span class="mpre"> </span><a href="#loc_102_12_102_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_12_102_13&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> of
                   </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
                   </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
                   </span><a name="loc_105_20_105_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_22&#39;)"><span class="hl_vardecl"><span class="mpre">c&#39;</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_994_20_994_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_994_20_994_24&#39;)"><span class="hl_conref"><span class="mpre">CNot</span></span></a><span class="mpre"> </span><a href="#loc_105_20_105_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_22&#39;)"><span class="hl_varref"><span class="mpre">c&#39;</span></span></a><span class="mpre">
      </span><a href="Distribution.PackageDescription.html#loc_995_20_995_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_995_20_995_23&#39;)"><span class="hl_conref"><span class="mpre">COr</span></span></a><span class="mpre"> </span><a name="loc_106_11_106_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_11_106_12&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_106_13_106_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_13_106_14&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> -&gt; case (</span><a href="#loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_varref"><span class="mpre">walk</span></span></a><span class="mpre"> </span><a href="#loc_106_11_106_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_11_106_12&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">, </span><a href="#loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_varref"><span class="mpre">walk</span></span></a><span class="mpre"> </span><a href="#loc_106_13_106_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_13_106_14&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) of
                   (</span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">, </span><a name="loc_107_32_107_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_32_107_34&#39;)"><span class="hl_vardecl"><span class="mpre">d&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_107_32_107_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_32_107_34&#39;)"><span class="hl_varref"><span class="mpre">d&#39;</span></span></a><span class="mpre">
                   (</span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">, _)   -&gt; </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
                   (</span><a name="loc_109_21_109_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_21_109_23&#39;)"><span class="hl_vardecl"><span class="mpre">c&#39;</span></span></a><span class="mpre">, </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">) -&gt; </span><a href="#loc_109_21_109_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_21_109_23&#39;)"><span class="hl_varref"><span class="mpre">c&#39;</span></span></a><span class="mpre">
                   (_, </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">)   -&gt; </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
                   (</span><a name="loc_111_21_111_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_21_111_23&#39;)"><span class="hl_vardecl"><span class="mpre">c&#39;</span></span></a><span class="mpre">,</span><a name="loc_111_24_111_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_24_111_26&#39;)"><span class="hl_vardecl"><span class="mpre">d&#39;</span></span></a><span class="mpre">)         -&gt; </span><a href="Distribution.PackageDescription.html#loc_995_20_995_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_995_20_995_23&#39;)"><span class="hl_conref"><span class="mpre">COr</span></span></a><span class="mpre"> </span><a href="#loc_111_21_111_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_21_111_23&#39;)"><span class="hl_varref"><span class="mpre">c&#39;</span></span></a><span class="mpre"> </span><a href="#loc_111_24_111_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_24_111_26&#39;)"><span class="hl_varref"><span class="mpre">d&#39;</span></span></a><span class="mpre">
      </span><a href="Distribution.PackageDescription.html#loc_996_20_996_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_996_20_996_24&#39;)"><span class="hl_conref"><span class="mpre">CAnd</span></span></a><span class="mpre"> </span><a name="loc_112_12_112_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_12_112_13&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_112_14_112_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_14_112_15&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> -&gt; case (</span><a href="#loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_varref"><span class="mpre">walk</span></span></a><span class="mpre"> </span><a href="#loc_112_12_112_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_12_112_13&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">, </span><a href="#loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_varref"><span class="mpre">walk</span></span></a><span class="mpre"> </span><a href="#loc_112_14_112_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_14_112_15&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">) of
                    (</span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">, _) -&gt; </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
                    (</span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">, </span><a name="loc_114_32_114_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_32_114_34&#39;)"><span class="hl_vardecl"><span class="mpre">d&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_114_32_114_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_114_32_114_34&#39;)"><span class="hl_varref"><span class="mpre">d&#39;</span></span></a><span class="mpre">
                    (_, </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">) -&gt; </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
                    (</span><a name="loc_116_22_116_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_22_116_24&#39;)"><span class="hl_vardecl"><span class="mpre">c&#39;</span></span></a><span class="mpre">, </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">) -&gt; </span><a href="#loc_116_22_116_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_22_116_24&#39;)"><span class="hl_varref"><span class="mpre">c&#39;</span></span></a><span class="mpre">
                    (</span><a name="loc_117_22_117_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_22_117_24&#39;)"><span class="hl_vardecl"><span class="mpre">c&#39;</span></span></a><span class="mpre">,</span><a name="loc_117_25_117_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_25_117_27&#39;)"><span class="hl_vardecl"><span class="mpre">d&#39;</span></span></a><span class="mpre">)        -&gt; </span><a href="Distribution.PackageDescription.html#loc_996_20_996_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_996_20_996_24&#39;)"><span class="hl_conref"><span class="mpre">CAnd</span></span></a><span class="mpre"> </span><a href="#loc_117_22_117_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_22_117_24&#39;)"><span class="hl_varref"><span class="mpre">c&#39;</span></span></a><span class="mpre"> </span><a href="#loc_117_25_117_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_25_117_27&#39;)"><span class="hl_varref"><span class="mpre">d&#39;</span></span></a><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- gather free vars</span></span><span class="mpre">
    </span><a name="loc_119_5_119_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_5_119_7&#39;)"><span class="hl_fundecl"><span class="mpre">fv</span></span></a><span class="mpre"> </span><a name="loc_119_8_119_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_8_119_9&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = (</span><a href="#loc_119_8_119_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_8_119_9&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">, </span><a href="#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">fv&#39;</span></span></a><span class="mpre"> </span><a href="#loc_119_8_119_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_8_119_9&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">)
    </span><a name="loc_120_5_120_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_8&#39;)"><span class="hl_fundecl"><span class="mpre">fv&#39;</span></span></a><span class="mpre"> </span><a name="loc_120_9_120_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_9_120_10&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = case </span><a href="#loc_120_9_120_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_9_120_10&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> of
      </span><a href="Distribution.PackageDescription.html#loc_992_20_992_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_20_992_23&#39;)"><span class="hl_conref"><span class="mpre">Var</span></span></a><span class="mpre"> </span><a name="loc_121_11_121_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_11_121_12&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre">     -&gt; [</span><a href="#loc_121_11_121_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_11_121_12&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">]
      </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> _      -&gt; []
      </span><a href="Distribution.PackageDescription.html#loc_994_20_994_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_994_20_994_24&#39;)"><span class="hl_conref"><span class="mpre">CNot</span></span></a><span class="mpre"> </span><a name="loc_123_12_123_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_12_123_14&#39;)"><span class="hl_vardecl"><span class="mpre">c&#39;</span></span></a><span class="mpre">    -&gt; </span><a href="#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">fv&#39;</span></span></a><span class="mpre"> </span><a href="#loc_123_12_123_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_12_123_14&#39;)"><span class="hl_varref"><span class="mpre">c&#39;</span></span></a><span class="mpre">
      </span><a href="Distribution.PackageDescription.html#loc_995_20_995_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_995_20_995_23&#39;)"><span class="hl_conref"><span class="mpre">COr</span></span></a><span class="mpre"> </span><a name="loc_124_11_124_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_11_124_13&#39;)"><span class="hl_vardecl"><span class="mpre">c1</span></span></a><span class="mpre"> </span><a name="loc_124_14_124_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_14_124_16&#39;)"><span class="hl_vardecl"><span class="mpre">c2</span></span></a><span class="mpre">  -&gt; </span><a href="#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">fv&#39;</span></span></a><span class="mpre"> </span><a href="#loc_124_11_124_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_11_124_13&#39;)"><span class="hl_varref"><span class="mpre">c1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">fv&#39;</span></span></a><span class="mpre"> </span><a href="#loc_124_14_124_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_14_124_16&#39;)"><span class="hl_varref"><span class="mpre">c2</span></span></a><span class="mpre">
      </span><a href="Distribution.PackageDescription.html#loc_996_20_996_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_996_20_996_24&#39;)"><span class="hl_conref"><span class="mpre">CAnd</span></span></a><span class="mpre"> </span><a name="loc_125_12_125_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_12_125_14&#39;)"><span class="hl_vardecl"><span class="mpre">c1</span></span></a><span class="mpre"> </span><a name="loc_125_15_125_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_15_125_17&#39;)"><span class="hl_vardecl"><span class="mpre">c2</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">fv&#39;</span></span></a><span class="mpre"> </span><a href="#loc_125_12_125_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_12_125_14&#39;)"><span class="hl_varref"><span class="mpre">c1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">fv&#39;</span></span></a><span class="mpre"> </span><a href="#loc_125_15_125_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_15_125_17&#39;)"><span class="hl_varref"><span class="mpre">c2</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Simplify a configuration condition using the os and arch names.  Returns</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   the names of all the flags occurring in the condition.</span></span><span class="mpre">
</span><a href="#loc_131_1_131_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_1_131_22&#39;)"><span class="mpre">simplifyWithSysParams</span></a><span class="mpre"> :: </span><a href="Distribution.System.html#loc_66_6_66_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_6_66_8&#39;)"><span class="hl_tyconref"><span class="mpre">OS</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.System.html#loc_118_6_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_118_6_118_10&#39;)"><span class="hl_tyconref"><span class="mpre">Arch</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="hl_tyconref"><span class="mpre">CompilerId</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_978_6_978_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_978_6_978_13&#39;)"><span class="hl_tyconref"><span class="mpre">ConfVar</span></span></a><span class="mpre">
                      -&gt; (</span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_967_9_967_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_967_9_967_17&#39;)"><span class="hl_tyconref"><span class="mpre">FlagName</span></span></a><span class="mpre">, [</span><a href="Distribution.PackageDescription.html#loc_967_9_967_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_967_9_967_17&#39;)"><span class="hl_tyconref"><span class="mpre">FlagName</span></span></a><span class="mpre">])
</span><a name="loc_131_1_131_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_1_131_22&#39;)"><span class="hl_fundecl"><span class="mpre">simplifyWithSysParams</span></span></a><span class="mpre"> </span><a name="loc_131_23_131_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_23_131_25&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre"> </span><a name="loc_131_26_131_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_26_131_30&#39;)"><span class="hl_vardecl"><span class="mpre">arch</span></span></a><span class="mpre"> (</span><a href="Distribution.Compiler.html#loc_154_19_154_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_19_154_29&#39;)"><span class="hl_conref"><span class="mpre">CompilerId</span></span></a><span class="mpre"> </span><a name="loc_131_43_131_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_43_131_47&#39;)"><span class="hl_vardecl"><span class="mpre">comp</span></span></a><span class="mpre"> </span><a name="loc_131_48_131_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_48_131_55&#39;)"><span class="hl_vardecl"><span class="mpre">compVer</span></span></a><span class="mpre">) </span><a name="loc_131_57_131_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_57_131_61&#39;)"><span class="hl_vardecl"><span class="mpre">cond</span></span></a><span class="mpre"> = (</span><a href="#loc_133_6_133_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_6_133_11&#39;)"><span class="hl_varref"><span class="mpre">cond&#39;</span></span></a><span class="mpre">, </span><a href="#loc_133_13_133_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_13_133_18&#39;)"><span class="hl_varref"><span class="mpre">flags</span></span></a><span class="mpre">)
  where
    (</span><a name="loc_133_6_133_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_6_133_11&#39;)"><span class="hl_vardecl"><span class="mpre">cond&#39;</span></span></a><span class="mpre">, </span><a name="loc_133_13_133_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_13_133_18&#39;)"><span class="hl_vardecl"><span class="mpre">flags</span></span></a><span class="mpre">) = </span><a href="#loc_97_1_97_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_18&#39;)"><span class="hl_varref"><span class="mpre">simplifyCondition</span></span></a><span class="mpre"> </span><a href="#loc_131_57_131_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_57_131_61&#39;)"><span class="hl_varref"><span class="mpre">cond</span></span></a><span class="mpre"> </span><a href="#loc_134_5_134_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_5_134_11&#39;)"><span class="hl_varref"><span class="mpre">interp</span></span></a><span class="mpre">
    </span><a name="loc_134_5_134_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_5_134_11&#39;)"><span class="hl_fundecl"><span class="mpre">interp</span></span></a><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_978_16_978_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_978_16_978_18&#39;)"><span class="hl_conref"><span class="mpre">OS</span></span></a><span class="mpre"> </span><a name="loc_134_16_134_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_16_134_19&#39;)"><span class="hl_vardecl"><span class="mpre">os&#39;</span></span></a><span class="mpre">)    = </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_134_16_134_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_16_134_19&#39;)"><span class="hl_varref"><span class="mpre">os&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_131_23_131_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_23_131_25&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">
    </span><a href="#loc_134_5_134_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_5_134_11&#39;)"><span class="hl_fundecl"><span class="mpre">interp</span></span></a><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_979_16_979_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_979_16_979_20&#39;)"><span class="hl_conref"><span class="mpre">Arch</span></span></a><span class="mpre"> </span><a name="loc_135_18_135_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_18_135_23&#39;)"><span class="hl_vardecl"><span class="mpre">arch&#39;</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_135_18_135_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_18_135_23&#39;)"><span class="hl_varref"><span class="mpre">arch&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_131_26_131_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_26_131_30&#39;)"><span class="hl_varref"><span class="mpre">arch</span></span></a><span class="mpre">
    </span><a href="#loc_134_5_134_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_5_134_11&#39;)"><span class="hl_fundecl"><span class="mpre">interp</span></span></a><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_981_16_981_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_981_16_981_20&#39;)"><span class="hl_conref"><span class="mpre">Impl</span></span></a><span class="mpre"> </span><a name="loc_136_18_136_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_18_136_23&#39;)"><span class="hl_vardecl"><span class="mpre">comp&#39;</span></span></a><span class="mpre"> </span><a name="loc_136_24_136_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_24_136_26&#39;)"><span class="hl_vardecl"><span class="mpre">vr</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_136_18_136_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_18_136_23&#39;)"><span class="hl_varref"><span class="mpre">comp&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_131_43_131_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_43_131_47&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre">
                                  </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_131_48_131_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_48_131_55&#39;)"><span class="hl_varref"><span class="mpre">compVer</span></span></a><span class="mpre"> </span><a href="Distribution.Version.html#loc_317_1_317_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_317_1_317_12&#39;)"><span class="hl_infix"><span class="mpre">`withinRange`</span></span></a><span class="mpre"> </span><a href="#loc_136_24_136_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_24_136_26&#39;)"><span class="hl_varref"><span class="mpre">vr</span></span></a><span class="mpre">
    </span><a href="#loc_134_5_134_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_5_134_11&#39;)"><span class="hl_fundecl"><span class="mpre">interp</span></span></a><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_980_16_980_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_980_16_980_20&#39;)"><span class="hl_conref"><span class="mpre">Flag</span></span></a><span class="mpre">  </span><a name="loc_138_19_138_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_19_138_20&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">)   = </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a href="#loc_138_19_138_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_19_138_20&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- TODO: Add instances and check</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- prop_sC_idempotent cond a o = cond&#39; == cond&#39;&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   where</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     cond&#39;  = simplifyCondition cond a o</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     cond&#39;&#39; = simplifyCondition cond&#39; a o</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- prop_sC_noLits cond a o = isLit res || not (hasLits res)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   where</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     res = simplifyCondition cond a o</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     hasLits (Lit _) = True</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     hasLits (CNot c) = hasLits c</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     hasLits (COr l r) = hasLits l || hasLits r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     hasLits (CAnd l r) = hasLits l || hasLits r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     hasLits _ = False</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Parse a configuration condition from a string.</span></span><span class="mpre">
</span><a href="#loc_159_1_159_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_1_159_15&#39;)"><span class="mpre">parseCondition</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ReadP</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_978_6_978_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_978_6_978_13&#39;)"><span class="hl_tyconref"><span class="mpre">ConfVar</span></span></a><span class="mpre">)
</span><a name="loc_159_1_159_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_1_159_15&#39;)"><span class="hl_vardecl"><span class="mpre">parseCondition</span></span></a><span class="mpre"> = </span><a href="#loc_161_5_161_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_5_161_11&#39;)"><span class="hl_varref"><span class="mpre">condOr</span></span></a><span class="mpre">
  where
    </span><a name="loc_161_5_161_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_5_161_11&#39;)"><span class="hl_vardecl"><span class="mpre">condOr</span></span></a><span class="mpre">   = </span><a href="Distribution.Compat.ReadP.html#loc_330_1_330_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_330_1_330_7&#39;)"><span class="hl_varref"><span class="mpre">sepBy1</span></span></a><span class="mpre"> </span><a href="#loc_162_5_162_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_5_162_12&#39;)"><span class="hl_varref"><span class="mpre">condAnd</span></span></a><span class="mpre"> (</span><a href="#loc_176_5_176_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_5_176_9&#39;)"><span class="hl_varref"><span class="mpre">oper</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;||&quot;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">foldl1</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_995_20_995_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_995_20_995_23&#39;)"><span class="hl_conref"><span class="mpre">COr</span></span></a><span class="mpre">
    </span><a name="loc_162_5_162_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_5_162_12&#39;)"><span class="hl_vardecl"><span class="mpre">condAnd</span></span></a><span class="mpre">  = </span><a href="Distribution.Compat.ReadP.html#loc_330_1_330_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_330_1_330_7&#39;)"><span class="hl_varref"><span class="mpre">sepBy1</span></span></a><span class="mpre"> </span><a href="#loc_163_5_163_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_5_163_9&#39;)"><span class="hl_varref"><span class="mpre">cond</span></span></a><span class="mpre"> (</span><a href="#loc_176_5_176_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_5_176_9&#39;)"><span class="hl_varref"><span class="mpre">oper</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&amp;&amp;&quot;</span></span><span class="mpre">)</span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">foldl1</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_996_20_996_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_996_20_996_24&#39;)"><span class="hl_conref"><span class="mpre">CAnd</span></span></a><span class="mpre">
    </span><a name="loc_163_5_163_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_5_163_9&#39;)"><span class="hl_vardecl"><span class="mpre">cond</span></span></a><span class="mpre">     = </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> (</span><a href="#loc_171_5_171_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_5_171_16&#39;)"><span class="hl_varref"><span class="mpre">boolLiteral</span></span></a><span class="mpre"> </span><a href="Distribution.Compat.ReadP.html#loc_200_6_200_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_200_6_200_9&#39;)"><span class="hl_infix"><span class="mpre">+++</span></span></a><span class="mpre"> </span><a href="#loc_165_5_165_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_5_165_13&#39;)"><span class="hl_varref"><span class="mpre">inparens</span></span></a><span class="mpre"> </span><a href="#loc_161_5_161_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_5_161_11&#39;)"><span class="hl_varref"><span class="mpre">condOr</span></span></a><span class="mpre"> </span><a href="Distribution.Compat.ReadP.html#loc_200_6_200_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_200_6_200_9&#39;)"><span class="hl_infix"><span class="mpre">+++</span></span></a><span class="mpre"> </span><a href="#loc_166_5_166_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_5_166_12&#39;)"><span class="hl_varref"><span class="mpre">notCond</span></span></a><span class="mpre"> </span><a href="Distribution.Compat.ReadP.html#loc_200_6_200_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_200_6_200_9&#39;)"><span class="hl_infix"><span class="mpre">+++</span></span></a><span class="mpre"> </span><a href="#loc_167_5_167_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_167_5_167_11&#39;)"><span class="hl_varref"><span class="mpre">osCond</span></span></a><span class="mpre">
                      </span><a href="Distribution.Compat.ReadP.html#loc_200_6_200_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_200_6_200_9&#39;)"><span class="hl_infix"><span class="mpre">+++</span></span></a><span class="mpre"> </span><a href="#loc_168_5_168_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_5_168_13&#39;)"><span class="hl_varref"><span class="mpre">archCond</span></span></a><span class="mpre"> </span><a href="Distribution.Compat.ReadP.html#loc_200_6_200_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_200_6_200_9&#39;)"><span class="hl_infix"><span class="mpre">+++</span></span></a><span class="mpre"> </span><a href="#loc_169_5_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_5_169_13&#39;)"><span class="hl_varref"><span class="mpre">flagCond</span></span></a><span class="mpre"> </span><a href="Distribution.Compat.ReadP.html#loc_200_6_200_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_200_6_200_9&#39;)"><span class="hl_infix"><span class="mpre">+++</span></span></a><span class="mpre"> </span><a href="#loc_170_5_170_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_5_170_13&#39;)"><span class="hl_varref"><span class="mpre">implCond</span></span></a><span class="mpre"> )
    </span><a name="loc_165_5_165_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_5_165_13&#39;)"><span class="hl_vardecl"><span class="mpre">inparens</span></span></a><span class="mpre">   = </span><a href="Distribution.Compat.ReadP.html#loc_292_1_292_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_292_1_292_8&#39;)"><span class="hl_varref"><span class="mpre">between</span></span></a><span class="mpre"> (</span><a href="Distribution.Compat.ReadP.html#loc_243_1_243_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_243_1_243_5&#39;)"><span class="hl_varref"><span class="mpre">ReadP.char</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;(&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre">) (</span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="Distribution.Compat.ReadP.html#loc_243_1_243_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_243_1_243_5&#39;)"><span class="hl_varref"><span class="mpre">ReadP.char</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;)&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre">)
    </span><a name="loc_166_5_166_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_5_166_12&#39;)"><span class="hl_vardecl"><span class="mpre">notCond</span></span></a><span class="mpre">  = </span><a href="Distribution.Compat.ReadP.html#loc_243_1_243_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_243_1_243_5&#39;)"><span class="hl_varref"><span class="mpre">ReadP.char</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;!&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_163_5_163_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_5_163_9&#39;)"><span class="hl_varref"><span class="mpre">cond</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_994_20_994_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_994_20_994_24&#39;)"><span class="hl_conref"><span class="mpre">CNot</span></span></a><span class="mpre">
    </span><a name="loc_167_5_167_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_167_5_167_11&#39;)"><span class="hl_vardecl"><span class="mpre">osCond</span></span></a><span class="mpre">   = </span><a href="Distribution.Compat.ReadP.html#loc_247_1_247_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_247_1_247_7&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;os&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_165_5_165_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_5_165_13&#39;)"><span class="hl_varref"><span class="mpre">inparens</span></span></a><span class="mpre"> </span><a href="#loc_173_5_173_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_5_173_12&#39;)"><span class="hl_varref"><span class="mpre">osIdent</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_992_20_992_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_20_992_23&#39;)"><span class="hl_conref"><span class="mpre">Var</span></span></a><span class="mpre">
    </span><a name="loc_168_5_168_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_5_168_13&#39;)"><span class="hl_vardecl"><span class="mpre">archCond</span></span></a><span class="mpre"> = </span><a href="Distribution.Compat.ReadP.html#loc_247_1_247_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_247_1_247_7&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;arch&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_165_5_165_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_5_165_13&#39;)"><span class="hl_varref"><span class="mpre">inparens</span></span></a><span class="mpre"> </span><a href="#loc_172_5_172_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_172_5_172_14&#39;)"><span class="hl_varref"><span class="mpre">archIdent</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_992_20_992_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_20_992_23&#39;)"><span class="hl_conref"><span class="mpre">Var</span></span></a><span class="mpre">
    </span><a name="loc_169_5_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_5_169_13&#39;)"><span class="hl_vardecl"><span class="mpre">flagCond</span></span></a><span class="mpre"> = </span><a href="Distribution.Compat.ReadP.html#loc_247_1_247_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_247_1_247_7&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;flag&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_165_5_165_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_5_165_13&#39;)"><span class="hl_varref"><span class="mpre">inparens</span></span></a><span class="mpre"> </span><a href="#loc_174_5_174_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_5_174_14&#39;)"><span class="hl_varref"><span class="mpre">flagIdent</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_992_20_992_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_20_992_23&#39;)"><span class="hl_conref"><span class="mpre">Var</span></span></a><span class="mpre">
    </span><a name="loc_170_5_170_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_5_170_13&#39;)"><span class="hl_vardecl"><span class="mpre">implCond</span></span></a><span class="mpre"> = </span><a href="Distribution.Compat.ReadP.html#loc_247_1_247_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_247_1_247_7&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;impl&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_165_5_165_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_5_165_13&#39;)"><span class="hl_varref"><span class="mpre">inparens</span></span></a><span class="mpre"> </span><a href="#loc_178_5_178_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_5_178_14&#39;)"><span class="hl_varref"><span class="mpre">implIdent</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_992_20_992_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_20_992_23&#39;)"><span class="hl_conref"><span class="mpre">Var</span></span></a><span class="mpre">
    </span><a name="loc_171_5_171_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_5_171_16&#39;)"><span class="hl_vardecl"><span class="mpre">boolLiteral</span></span></a><span class="mpre">   = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre">  </span><a href="Distribution.Text.html#loc_28_3_28_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_28_3_28_8&#39;)"><span class="hl_varref"><span class="mpre">parse</span></span></a><span class="mpre">
    </span><a name="loc_172_5_172_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_172_5_172_14&#39;)"><span class="hl_vardecl"><span class="mpre">archIdent</span></span></a><span class="mpre">     = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_979_16_979_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_979_16_979_20&#39;)"><span class="hl_conref"><span class="mpre">Arch</span></span></a><span class="mpre"> </span><a href="Distribution.Text.html#loc_28_3_28_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_28_3_28_8&#39;)"><span class="hl_varref"><span class="mpre">parse</span></span></a><span class="mpre">
    </span><a name="loc_173_5_173_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_5_173_12&#39;)"><span class="hl_vardecl"><span class="mpre">osIdent</span></span></a><span class="mpre">       = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_978_16_978_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_978_16_978_18&#39;)"><span class="hl_conref"><span class="mpre">OS</span></span></a><span class="mpre">   </span><a href="Distribution.Text.html#loc_28_3_28_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_28_3_28_8&#39;)"><span class="hl_varref"><span class="mpre">parse</span></span></a><span class="mpre">
    </span><a name="loc_174_5_174_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_5_174_14&#39;)"><span class="hl_vardecl"><span class="mpre">flagIdent</span></span></a><span class="mpre">     = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_980_16_980_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_980_16_980_20&#39;)"><span class="hl_conref"><span class="mpre">Flag</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_967_20_967_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_967_20_967_28&#39;)"><span class="hl_conref"><span class="mpre">FlagName</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.Simple.Utils.html#loc_1283_1_1283_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1283_1_1283_10&#39;)"><span class="hl_varref"><span class="mpre">lowercase</span></span></a><span class="mpre">) (</span><a href="Distribution.Compat.ReadP.html#loc_264_1_264_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_264_1_264_7&#39;)"><span class="hl_varref"><span class="mpre">munch1</span></span></a><span class="mpre"> </span><a href="#loc_175_5_175_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_5_175_16&#39;)"><span class="hl_varref"><span class="mpre">isIdentChar</span></span></a><span class="mpre">)
    </span><a name="loc_175_5_175_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_5_175_16&#39;)"><span class="hl_fundecl"><span class="mpre">isIdentChar</span></span></a><span class="mpre"> </span><a name="loc_175_17_175_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_17_175_18&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = </span><a href="GHC.Unicode.html#loc_136_1_136_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_136_1_136_11&#39;)"><span class="hl_varref"><span class="mpre">isAlphaNum</span></span></a><span class="mpre"> </span><a href="#loc_175_17_175_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_17_175_18&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_175_17_175_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_17_175_18&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;_&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_175_17_175_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_17_175_18&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;-&#39;</span></span><span class="mpre">
    </span><a name="loc_176_5_176_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_5_176_9&#39;)"><span class="hl_fundecl"><span class="mpre">oper</span></span></a><span class="mpre"> </span><a name="loc_176_10_176_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_10_176_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">        = </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="Distribution.Compat.ReadP.html#loc_247_1_247_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_247_1_247_7&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre"> </span><a href="#loc_176_10_176_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_10_176_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre">
    </span><a name="loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_vardecl"><span class="mpre">sp</span></span></a><span class="mpre">            = </span><a href="Distribution.Compat.ReadP.html#loc_277_1_277_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_277_1_277_11&#39;)"><span class="hl_varref"><span class="mpre">skipSpaces</span></span></a><span class="mpre">
    </span><a name="loc_178_5_178_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_5_178_14&#39;)"><span class="hl_vardecl"><span class="mpre">implIdent</span></span></a><span class="mpre">     = do </span><a name="loc_178_24_178_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_24_178_25&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.Text.html#loc_28_3_28_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_28_3_28_8&#39;)"><span class="hl_varref"><span class="mpre">parse</span></span></a><span class="mpre">
                       </span><a name="loc_179_24_179_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_24_179_26&#39;)"><span class="hl_vardecl"><span class="mpre">vr</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_177_5_177_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_7&#39;)"><span class="hl_varref"><span class="mpre">sp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="Distribution.Compat.ReadP.html#loc_300_1_300_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.ReadP.html#loc_300_1_300_7&#39;)"><span class="hl_varref"><span class="mpre">option</span></span></a><span class="mpre"> </span><a href="Distribution.Version.html#loc_143_1_143_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_143_1_143_11&#39;)"><span class="hl_varref"><span class="mpre">anyVersion</span></span></a><span class="mpre"> </span><a href="Distribution.Text.html#loc_28_3_28_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_28_3_28_8&#39;)"><span class="hl_varref"><span class="mpre">parse</span></span></a><span class="mpre">
                       </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_981_16_981_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_981_16_981_20&#39;)"><span class="hl_conref"><span class="mpre">Impl</span></span></a><span class="mpre"> </span><a href="#loc_178_24_178_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_24_178_25&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_179_24_179_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_24_179_26&#39;)"><span class="hl_varref"><span class="mpre">vr</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><a href="#loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="mpre">mapCondTree</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">) -&gt; (</span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">)
            -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="hl_fundecl"><span class="mpre">mapCondTree</span></span></a><span class="mpre"> </span><a name="loc_186_13_186_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_13_186_15&#39;)"><span class="hl_vardecl"><span class="mpre">fa</span></span></a><span class="mpre"> </span><a name="loc_186_16_186_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_16_186_18&#39;)"><span class="hl_vardecl"><span class="mpre">fc</span></span></a><span class="mpre"> </span><a name="loc_186_19_186_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_19_186_23&#39;)"><span class="hl_vardecl"><span class="mpre">fcnd</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">CondNode</span></span><span class="mpre"> </span><a name="loc_186_34_186_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_34_186_35&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_186_36_186_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_36_186_37&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_186_38_186_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_38_186_41&#39;)"><span class="hl_vardecl"><span class="mpre">ifs</span></span></a><span class="mpre">) =
    </span><span class="hl_conref"><span class="mpre">CondNode</span></span><span class="mpre"> (</span><a href="#loc_186_13_186_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_13_186_15&#39;)"><span class="hl_varref"><span class="mpre">fa</span></span></a><span class="mpre"> </span><a href="#loc_186_34_186_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_34_186_35&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="#loc_186_16_186_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_16_186_18&#39;)"><span class="hl_varref"><span class="mpre">fc</span></span></a><span class="mpre"> </span><a href="#loc_186_36_186_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_36_186_37&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="#loc_189_5_189_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_5_189_6&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_186_38_186_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_38_186_41&#39;)"><span class="hl_varref"><span class="mpre">ifs</span></span></a><span class="mpre">)
  where
    </span><a name="loc_189_5_189_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_5_189_6&#39;)"><span class="hl_fundecl"><span class="mpre">g</span></span></a><span class="mpre"> (</span><a name="loc_189_8_189_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_8_189_11&#39;)"><span class="hl_vardecl"><span class="mpre">cnd</span></span></a><span class="mpre">, </span><a name="loc_189_13_189_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_13_189_14&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">, </span><a name="loc_189_16_189_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_16_189_18&#39;)"><span class="hl_vardecl"><span class="mpre">me</span></span></a><span class="mpre">) = (</span><a href="#loc_186_19_186_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_19_186_23&#39;)"><span class="hl_varref"><span class="mpre">fcnd</span></span></a><span class="mpre"> </span><a href="#loc_189_8_189_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_8_189_11&#39;)"><span class="hl_varref"><span class="mpre">cnd</span></span></a><span class="mpre">, </span><a href="#loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="hl_varref"><span class="mpre">mapCondTree</span></span></a><span class="mpre"> </span><a href="#loc_186_13_186_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_13_186_15&#39;)"><span class="hl_varref"><span class="mpre">fa</span></span></a><span class="mpre"> </span><a href="#loc_186_16_186_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_16_186_18&#39;)"><span class="hl_varref"><span class="mpre">fc</span></span></a><span class="mpre"> </span><a href="#loc_186_19_186_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_19_186_23&#39;)"><span class="hl_varref"><span class="mpre">fcnd</span></span></a><span class="mpre"> </span><a href="#loc_189_13_189_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_13_189_14&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">,
                           </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="#loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="hl_varref"><span class="mpre">mapCondTree</span></span></a><span class="mpre"> </span><a href="#loc_186_13_186_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_13_186_15&#39;)"><span class="hl_varref"><span class="mpre">fa</span></span></a><span class="mpre"> </span><a href="#loc_186_16_186_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_16_186_18&#39;)"><span class="hl_varref"><span class="mpre">fc</span></span></a><span class="mpre"> </span><a href="#loc_186_19_186_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_19_186_23&#39;)"><span class="hl_varref"><span class="mpre">fcnd</span></span></a><span class="mpre">) </span><a href="#loc_189_16_189_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_16_189_18&#39;)"><span class="hl_varref"><span class="mpre">me</span></span></a><span class="mpre">)

</span><a href="#loc_193_1_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_1_193_15&#39;)"><span class="mpre">mapTreeConstrs</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">) -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_193_1_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_1_193_15&#39;)"><span class="hl_fundecl"><span class="mpre">mapTreeConstrs</span></span></a><span class="mpre"> </span><a name="loc_193_16_193_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_16_193_17&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="hl_varref"><span class="mpre">mapCondTree</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><a href="#loc_193_16_193_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_16_193_17&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">

</span><a href="#loc_196_1_196_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_1_196_13&#39;)"><span class="mpre">mapTreeConds</span></a><span class="mpre"> :: (</span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_992_6_992_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_6_992_15&#39;)"><span class="hl_tyconref"><span class="mpre">Condition</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_196_1_196_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_1_196_13&#39;)"><span class="hl_fundecl"><span class="mpre">mapTreeConds</span></span></a><span class="mpre"> </span><a name="loc_196_14_196_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_14_196_15&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="hl_varref"><span class="mpre">mapCondTree</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><a href="#loc_196_14_196_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_14_196_15&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">

</span><a href="#loc_199_1_199_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_1_199_12&#39;)"><span class="mpre">mapTreeData</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_199_1_199_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_1_199_12&#39;)"><span class="hl_fundecl"><span class="mpre">mapTreeData</span></span></a><span class="mpre"> </span><a name="loc_199_13_199_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_13_199_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_186_1_186_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_12&#39;)"><span class="hl_varref"><span class="mpre">mapCondTree</span></span></a><span class="mpre"> </span><a href="#loc_199_13_199_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_13_199_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Result of dependency test. Isomorphic to @Maybe d@ but renamed for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   clarity.</span></span><span class="mpre">
data </span><a name="loc_203_6_203_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_6_203_17&#39;)"><span class="hl_tycondecl"><span class="mpre">DepTestRslt</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre"> = </span><a name="loc_203_22_203_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_22_203_27&#39;)"><span class="hl_condecl"><span class="mpre">DepOk</span></span></a><span class="mpre"> | </span><a name="loc_203_30_203_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_30_203_41&#39;)"><span class="hl_condecl"><span class="mpre">MissingDeps</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 205, srcSpanStartColumn = 10, srcSpanEndLine = 205, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 205, srcSpanStartColumn = 19, srcSpanEndLine = 205, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan "><span class="mpre">Monoid d =&gt;</span></span><span class="mpre"> </span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="hl_classref"><span class="mpre">Monoid</span></span></a><span class="mpre"> (</span><a href="#loc_203_6_203_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_6_203_17&#39;)"><span class="hl_tyconref"><span class="mpre">DepTestRslt</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">) where
    </span><a href="Data.Monoid.html#loc_80_9_80_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_80_9_80_15&#39;)"><span class="hl_vardecl"><span class="mpre">mempty</span></span></a><span class="mpre"> = </span><a href="#loc_203_22_203_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_22_203_27&#39;)"><span class="hl_conref"><span class="mpre">DepOk</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">mappend</span></span></a><span class="mpre"> </span><a href="#loc_203_22_203_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_22_203_27&#39;)"><span class="hl_conref"><span class="mpre">DepOk</span></span></a><span class="mpre"> </span><a name="loc_207_19_207_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_19_207_20&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_207_19_207_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_19_207_20&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">mappend</span></span></a><span class="mpre"> </span><a name="loc_208_13_208_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_13_208_14&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="#loc_203_22_203_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_22_203_27&#39;)"><span class="hl_conref"><span class="mpre">DepOk</span></span></a><span class="mpre"> = </span><a href="#loc_208_13_208_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_13_208_14&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">mappend</span></span></a><span class="mpre"> (</span><a href="#loc_203_30_203_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_30_203_41&#39;)"><span class="hl_conref"><span class="mpre">MissingDeps</span></span></a><span class="mpre"> </span><a name="loc_209_26_209_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_26_209_27&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre">) (</span><a href="#loc_203_30_203_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_30_203_41&#39;)"><span class="hl_conref"><span class="mpre">MissingDeps</span></span></a><span class="mpre"> </span><a name="loc_209_42_209_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_42_209_44&#39;)"><span class="hl_vardecl"><span class="mpre">d&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_203_30_203_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_30_203_41&#39;)"><span class="hl_conref"><span class="mpre">MissingDeps</span></span></a><span class="mpre"> (</span><a href="#loc_209_26_209_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_26_209_27&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_209_42_209_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_42_209_44&#39;)"><span class="hl_varref"><span class="mpre">d&#39;</span></span></a><span class="mpre">)


data </span><a name="loc_212_6_212_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_6_212_8&#39;)"><span class="hl_tycondecl"><span class="mpre">BT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_212_13_212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_13_212_16&#39;)"><span class="hl_condecl"><span class="mpre">BTN</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> | </span><a name="loc_212_21_212_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_21_212_24&#39;)"><span class="hl_condecl"><span class="mpre">BTB</span></span></a><span class="mpre"> (</span><a href="#loc_212_6_212_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_6_212_8&#39;)"><span class="hl_tyconref"><span class="mpre">BT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><a href="#loc_212_6_212_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_6_212_8&#39;)"><span class="hl_tyconref"><span class="mpre">BT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)  </span><span class="hl_comment"><span class="mpre">-- very simple binary tree</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | Try to find a flag assignment that satisfies the constraints of all trees.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Returns either the missing dependencies, or a tuple containing the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- resulting data, the associated dependencies, and the chosen flag</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- assignments.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In case of failure, the _smallest_ number of of missing dependencies is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returned. [TODO: Could also be specified with a function argument.]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- TODO: The current algorithm is rather naive.  A better approach would be to:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Rule out possible paths, by taking a look at the associated dependencies.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Infer the required values for the conditions of these paths, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   calculate the required domains for the variables used in these</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   conditions.  Then picking a flag assignment would be linear (I guess).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This would require some sort of SAT solving, though, thus it&#39;s not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- implemented unless we really need it.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_247_1_247_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_1_247_17&#39;)"><span class="mpre">resolveWithFlags</span></a><span class="mpre"> ::
     [(</span><a href="Distribution.PackageDescription.html#loc_967_9_967_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_967_9_967_17&#39;)"><span class="hl_tyconref"><span class="mpre">FlagName</span></span></a><span class="mpre">,[</span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">])]
        </span><span class="hl_comment"><span class="mpre">-- ^ Domain for each flag name, will be tested in order.</span></span><span class="mpre">
  -&gt; </span><a href="Distribution.System.html#loc_66_6_66_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_6_66_8&#39;)"><span class="hl_tyconref"><span class="mpre">OS</span></span></a><span class="mpre">      </span><span class="hl_comment"><span class="mpre">-- ^ OS as returned by Distribution.System.buildOS</span></span><span class="mpre">
  -&gt; </span><a href="Distribution.System.html#loc_118_6_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_118_6_118_10&#39;)"><span class="hl_tyconref"><span class="mpre">Arch</span></span></a><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- ^ Arch as returned by Distribution.System.buildArch</span></span><span class="mpre">
  -&gt; </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="hl_tyconref"><span class="mpre">CompilerId</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ Compiler flavour + version</span></span><span class="mpre">
  -&gt; [</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">]  </span><span class="hl_comment"><span class="mpre">-- ^ Additional constraints</span></span><span class="mpre">
  -&gt; [</span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_978_6_978_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_978_6_978_13&#39;)"><span class="hl_tyconref"><span class="mpre">ConfVar</span></span></a><span class="mpre"> [</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">] </span><a href="#loc_451_6_451_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_6_451_14&#39;)"><span class="hl_tyconref"><span class="mpre">PDTagged</span></span></a><span class="mpre">]
  -&gt; ([</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">] -&gt; </span><a href="#loc_203_6_203_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_6_203_17&#39;)"><span class="hl_tyconref"><span class="mpre">DepTestRslt</span></span></a><span class="mpre"> [</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">])  </span><span class="hl_comment"><span class="mpre">-- ^ Dependency test function.</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> [</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">] (</span><a href="#loc_361_9_361_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_9_361_18&#39;)"><span class="hl_tyconref"><span class="mpre">TargetSet</span></span></a><span class="mpre"> </span><a href="#loc_451_6_451_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_6_451_14&#39;)"><span class="hl_tyconref"><span class="mpre">PDTagged</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">FlagAssignment</span></span><span class="mpre">)
       </span><span class="hl_comment"><span class="mpre">-- ^ Either the missing dependencies (error case), or a pair of</span></span><span class="mpre">
       </span><span class="hl_comment"><span class="mpre">-- (set of build targets with dependencies, chosen flag assignments)</span></span><span class="mpre">
</span><a name="loc_247_1_247_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_1_247_17&#39;)"><span class="hl_fundecl"><span class="mpre">resolveWithFlags</span></span></a><span class="mpre"> </span><a name="loc_247_18_247_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_18_247_21&#39;)"><span class="hl_vardecl"><span class="mpre">dom</span></span></a><span class="mpre"> </span><a name="loc_247_22_247_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_22_247_24&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre"> </span><a name="loc_247_25_247_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_25_247_29&#39;)"><span class="hl_vardecl"><span class="mpre">arch</span></span></a><span class="mpre"> </span><a name="loc_247_30_247_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_30_247_34&#39;)"><span class="hl_vardecl"><span class="mpre">impl</span></span></a><span class="mpre"> </span><a name="loc_247_35_247_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_35_247_42&#39;)"><span class="hl_vardecl"><span class="mpre">constrs</span></span></a><span class="mpre"> </span><a name="loc_247_43_247_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_43_247_48&#39;)"><span class="hl_vardecl"><span class="mpre">trees</span></span></a><span class="mpre"> </span><a name="loc_247_49_247_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_49_247_58&#39;)"><span class="hl_vardecl"><span class="mpre">checkDeps</span></span></a><span class="mpre"> =
    case </span><a href="#loc_264_5_264_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_5_264_8&#39;)"><span class="hl_varref"><span class="mpre">try</span></span></a><span class="mpre"> </span><a href="#loc_247_18_247_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_18_247_21&#39;)"><span class="hl_varref"><span class="mpre">dom</span></span></a><span class="mpre"> [] of
      </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_249_13_249_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_13_249_14&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a href="#loc_249_13_249_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_13_249_14&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
      </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_250_12_250_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_12_250_15&#39;)"><span class="hl_vardecl"><span class="mpre">dbt</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_291_5_291_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_5_291_17&#39;)"><span class="hl_varref"><span class="mpre">findShortest</span></span></a><span class="mpre"> </span><a href="#loc_250_12_250_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_12_250_15&#39;)"><span class="hl_varref"><span class="mpre">dbt</span></span></a><span class="mpre">
  where
    </span><a name="loc_252_5_252_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_252_5_252_17&#39;)"><span class="hl_vardecl"><span class="mpre">extraConstrs</span></span></a><span class="mpre"> = </span><a href="#loc_318_1_318_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_1_318_9&#39;)"><span class="hl_varref"><span class="mpre">toDepMap</span></span></a><span class="mpre"> </span><a href="#loc_247_35_247_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_35_247_42&#39;)"><span class="hl_varref"><span class="mpre">constrs</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- simplify trees by (partially) evaluating all conditions and converting</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- dependencies to dependency maps.</span></span><span class="mpre">
    </span><a name="loc_256_5_256_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_5_256_20&#39;)"><span class="hl_vardecl"><span class="mpre">simplifiedTrees</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> ( </span><a href="#loc_193_1_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_1_193_15&#39;)"><span class="hl_varref"><span class="mpre">mapTreeConstrs</span></span></a><span class="mpre"> </span><a href="#loc_318_1_318_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_1_318_9&#39;)"><span class="hl_varref"><span class="mpre">toDepMap</span></span></a><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- convert to maps</span></span><span class="mpre">
                          </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_196_1_196_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_1_196_13&#39;)"><span class="hl_varref"><span class="mpre">mapTreeConds</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_131_1_131_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_1_131_22&#39;)"><span class="hl_varref"><span class="mpre">simplifyWithSysParams</span></span></a><span class="mpre"> </span><a href="#loc_247_22_247_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_22_247_24&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre"> </span><a href="#loc_247_25_247_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_25_247_29&#39;)"><span class="hl_varref"><span class="mpre">arch</span></span></a><span class="mpre"> </span><a href="#loc_247_30_247_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_30_247_34&#39;)"><span class="hl_varref"><span class="mpre">impl</span></span></a><span class="mpre">))
                          </span><a href="#loc_247_43_247_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_43_247_48&#39;)"><span class="hl_varref"><span class="mpre">trees</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- @try@ recursively tries all possible flag assignments in the domain and</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- either succeeds or returns a binary tree with the missing dependencies</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- encountered in each run.  Since the tree is constructed lazily, we</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- avoid some computation overhead in the successful case.</span></span><span class="mpre">
    </span><a name="loc_264_5_264_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_5_264_8&#39;)"><span class="hl_fundecl"><span class="mpre">try</span></span></a><span class="mpre"> [] </span><a name="loc_264_12_264_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_12_264_17&#39;)"><span class="hl_vardecl"><span class="mpre">flags</span></span></a><span class="mpre"> =
        let </span><a name="loc_265_13_265_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_13_265_22&#39;)"><span class="hl_vardecl"><span class="mpre">targetSet</span></span></a><span class="mpre"> = </span><a href="#loc_361_23_361_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_23_361_32&#39;)"><span class="hl_conref"><span class="mpre">TargetSet</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="#loc_256_5_256_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_5_256_20&#39;)"><span class="hl_varref"><span class="mpre">simplifiedTrees</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                </span><span class="hl_comment"><span class="mpre">-- apply additional constraints to all dependencies</span></span><span class="mpre">
                </span><a href="Control.Arrow.html#loc_90_5_90_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Arrow.html#loc_90_5_90_10&#39;)"><span class="hl_varref"><span class="mpre">first</span></span></a><span class="mpre"> (</span><a href="#loc_383_1_383_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_1_383_12&#39;)"><span class="hl_infix"><span class="mpre">`constrainBy`</span></span></a><span class="mpre"> </span><a href="#loc_252_5_252_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_252_5_252_17&#39;)"><span class="hl_varref"><span class="mpre">extraConstrs</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre">
                </span><a href="#loc_328_1_328_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_1_328_17&#39;)"><span class="hl_varref"><span class="mpre">simplifyCondTree</span></span></a><span class="mpre"> (</span><a href="#loc_287_5_287_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_8&#39;)"><span class="hl_varref"><span class="mpre">env</span></span></a><span class="mpre"> </span><a href="#loc_264_12_264_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_12_264_17&#39;)"><span class="hl_varref"><span class="mpre">flags</span></span></a><span class="mpre">)
            </span><a name="loc_269_13_269_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_13_269_17&#39;)"><span class="hl_vardecl"><span class="mpre">deps</span></span></a><span class="mpre"> = </span><a href="#loc_366_1_366_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_1_366_20&#39;)"><span class="hl_varref"><span class="mpre">overallDependencies</span></span></a><span class="mpre"> </span><a href="#loc_265_13_265_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_13_265_22&#39;)"><span class="hl_varref"><span class="mpre">targetSet</span></span></a><span class="mpre">
        in case </span><a href="#loc_247_49_247_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_49_247_58&#39;)"><span class="hl_varref"><span class="mpre">checkDeps</span></span></a><span class="mpre"> (</span><a href="#loc_322_1_322_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_11&#39;)"><span class="hl_varref"><span class="mpre">fromDepMap</span></span></a><span class="mpre"> </span><a href="#loc_269_13_269_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_13_269_17&#39;)"><span class="hl_varref"><span class="mpre">deps</span></span></a><span class="mpre">) of
             </span><a href="#loc_203_22_203_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_22_203_27&#39;)"><span class="hl_conref"><span class="mpre">DepOk</span></span></a><span class="mpre">           -&gt; </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a href="#loc_265_13_265_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_13_265_22&#39;)"><span class="hl_varref"><span class="mpre">targetSet</span></span></a><span class="mpre">, </span><a href="#loc_264_12_264_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_12_264_17&#39;)"><span class="hl_varref"><span class="mpre">flags</span></span></a><span class="mpre">)
             </span><a href="#loc_203_30_203_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_30_203_41&#39;)"><span class="hl_conref"><span class="mpre">MissingDeps</span></span></a><span class="mpre"> </span><a name="loc_272_26_272_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_26_272_29&#39;)"><span class="hl_vardecl"><span class="mpre">mds</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> (</span><a href="#loc_212_13_212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_13_212_16&#39;)"><span class="hl_conref"><span class="mpre">BTN</span></span></a><span class="mpre"> </span><a href="#loc_272_26_272_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_26_272_29&#39;)"><span class="hl_varref"><span class="mpre">mds</span></span></a><span class="mpre">)

    </span><a href="#loc_264_5_264_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_5_264_8&#39;)"><span class="hl_fundecl"><span class="mpre">try</span></span></a><span class="mpre"> ((</span><a name="loc_274_11_274_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_11_274_12&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre">, </span><a name="loc_274_14_274_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_14_274_18&#39;)"><span class="hl_vardecl"><span class="mpre">vals</span></span></a><span class="mpre">)</span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_274_20_274_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_20_274_24&#39;)"><span class="hl_vardecl"><span class="mpre">rest</span></span></a><span class="mpre">) </span><a name="loc_274_26_274_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_26_274_31&#39;)"><span class="hl_vardecl"><span class="mpre">flags</span></span></a><span class="mpre"> =
        </span><a href="#loc_277_5_277_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_5_277_11&#39;)"><span class="hl_varref"><span class="mpre">tryAll</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (\</span><a name="loc_275_24_275_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_275_24_275_25&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_264_5_264_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_5_264_8&#39;)"><span class="hl_varref"><span class="mpre">try</span></span></a><span class="mpre"> </span><a href="#loc_274_20_274_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_20_274_24&#39;)"><span class="hl_varref"><span class="mpre">rest</span></span></a><span class="mpre"> ((</span><a href="#loc_274_11_274_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_11_274_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">, </span><a href="#loc_275_24_275_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_275_24_275_25&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">)</span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_274_26_274_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_26_274_31&#39;)"><span class="hl_varref"><span class="mpre">flags</span></span></a><span class="mpre">)) </span><a href="#loc_274_14_274_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_14_274_18&#39;)"><span class="hl_varref"><span class="mpre">vals</span></span></a><span class="mpre">

    </span><a name="loc_277_5_277_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_5_277_11&#39;)"><span class="hl_vardecl"><span class="mpre">tryAll</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">foldr</span></span><span class="mpre"> </span><a href="#loc_280_5_280_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_7&#39;)"><span class="hl_varref"><span class="mpre">mp</span></span></a><span class="mpre"> </span><a href="#loc_285_5_285_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_5_285_7&#39;)"><span class="hl_varref"><span class="mpre">mz</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- special version of `mplus&#39; for our local purposes</span></span><span class="mpre">
    </span><a name="loc_280_5_280_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_7&#39;)"><span class="hl_fundecl"><span class="mpre">mp</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_280_14_280_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_14_280_16&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">)   (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_280_26_280_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_26_280_28&#39;)"><span class="hl_vardecl"><span class="mpre">ys</span></span></a><span class="mpre">)   = (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> (</span><a href="#loc_212_21_212_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_21_212_24&#39;)"><span class="hl_conref"><span class="mpre">BTB</span></span></a><span class="mpre"> </span><a href="#loc_280_14_280_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_14_280_16&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> </span><a href="#loc_280_26_280_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_26_280_28&#39;)"><span class="hl_varref"><span class="mpre">ys</span></span></a><span class="mpre">))
    </span><a href="#loc_280_5_280_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_7&#39;)"><span class="hl_fundecl"><span class="mpre">mp</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> _)    </span><a name="loc_281_20_281_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_281_20_281_21&#39;)"><span class="hl_specname"><span class="mpre">m</span></span></a><span class="mpre">@(</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> _) = </span><a href="#loc_281_20_281_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_281_20_281_21&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_7&#39;)"><span class="hl_fundecl"><span class="mpre">mp</span></span></a><span class="mpre"> </span><a name="loc_282_8_282_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_282_8_282_9&#39;)"><span class="hl_specname"><span class="mpre">m</span></span></a><span class="mpre">@(</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> _) _           = </span><a href="#loc_282_8_282_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_282_8_282_9&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- `mzero&#39;</span></span><span class="mpre">
    </span><a name="loc_285_5_285_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_5_285_7&#39;)"><span class="hl_vardecl"><span class="mpre">mz</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> (</span><a href="#loc_212_13_212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_13_212_16&#39;)"><span class="hl_conref"><span class="mpre">BTN</span></span></a><span class="mpre"> [])

    </span><a name="loc_287_5_287_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_8&#39;)"><span class="hl_fundecl"><span class="mpre">env</span></span></a><span class="mpre"> </span><a name="loc_287_9_287_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_9_287_14&#39;)"><span class="hl_vardecl"><span class="mpre">flags</span></span></a><span class="mpre"> </span><a name="loc_287_15_287_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_15_287_19&#39;)"><span class="hl_vardecl"><span class="mpre">flag</span></span></a><span class="mpre"> = (</span><span class="hl_varref"><span class="mpre">maybe</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a href="#loc_287_15_287_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_15_287_19&#39;)"><span class="hl_varref"><span class="mpre">flag</span></span></a><span class="mpre">) </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">lookup</span></span><span class="mpre"> </span><a href="#loc_287_15_287_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_15_287_19&#39;)"><span class="hl_varref"><span class="mpre">flag</span></span></a><span class="mpre">) </span><a href="#loc_287_9_287_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_9_287_14&#39;)"><span class="hl_varref"><span class="mpre">flags</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- for the error case we inspect our lazy tree of missing dependencies and</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- pick the shortest list of missing dependencies</span></span><span class="mpre">
    </span><a name="loc_291_5_291_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_5_291_17&#39;)"><span class="hl_fundecl"><span class="mpre">findShortest</span></span></a><span class="mpre"> (</span><a href="#loc_212_13_212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_13_212_16&#39;)"><span class="hl_conref"><span class="mpre">BTN</span></span></a><span class="mpre"> </span><a name="loc_291_23_291_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_23_291_24&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><a href="#loc_291_23_291_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_23_291_24&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><a href="#loc_291_5_291_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_5_291_17&#39;)"><span class="hl_fundecl"><span class="mpre">findShortest</span></span></a><span class="mpre"> (</span><a href="#loc_212_21_212_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_21_212_24&#39;)"><span class="hl_conref"><span class="mpre">BTB</span></span></a><span class="mpre"> </span><a name="loc_292_23_292_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_23_292_25&#39;)"><span class="hl_vardecl"><span class="mpre">lt</span></span></a><span class="mpre"> </span><a name="loc_292_26_292_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_26_292_28&#39;)"><span class="hl_vardecl"><span class="mpre">rt</span></span></a><span class="mpre">) =
        let </span><a name="loc_293_13_293_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_293_13_293_14&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_291_5_291_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_5_291_17&#39;)"><span class="hl_varref"><span class="mpre">findShortest</span></span></a><span class="mpre"> </span><a href="#loc_292_23_292_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_23_292_25&#39;)"><span class="hl_varref"><span class="mpre">lt</span></span></a><span class="mpre">
            </span><a name="loc_294_13_294_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_294_13_294_14&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><a href="#loc_291_5_291_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_5_291_17&#39;)"><span class="hl_varref"><span class="mpre">findShortest</span></span></a><span class="mpre"> </span><a href="#loc_292_26_292_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_26_292_28&#39;)"><span class="hl_varref"><span class="mpre">rt</span></span></a><span class="mpre">
        in case (</span><a href="#loc_293_13_293_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_293_13_293_14&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">,</span><a href="#loc_294_13_294_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_294_13_294_14&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">) of
             ([], </span><a name="loc_296_19_296_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_19_296_21&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_296_19_296_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_19_296_21&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- [] is too short</span></span><span class="mpre">
             (</span><a name="loc_297_15_297_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_15_297_17&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">, []) -&gt; </span><a href="#loc_297_15_297_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_15_297_17&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">
             ([</span><a name="loc_298_16_298_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_298_16_298_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">], _) -&gt; [</span><a href="#loc_298_16_298_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_298_16_298_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">] </span><span class="hl_comment"><span class="mpre">-- single elem is optimum</span></span><span class="mpre">
             (_, [</span><a name="loc_299_19_299_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_19_299_20&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">]) -&gt; [</span><a href="#loc_299_19_299_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_19_299_20&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">]
             (</span><a name="loc_300_15_300_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_300_15_300_17&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">, </span><a name="loc_300_19_300_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_300_19_300_21&#39;)"><span class="hl_vardecl"><span class="mpre">ys</span></span></a><span class="mpre">) -&gt; if </span><a href="#loc_303_5_303_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_5_303_18&#39;)"><span class="hl_varref"><span class="mpre">lazyLengthCmp</span></span></a><span class="mpre"> </span><a href="#loc_300_15_300_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_300_15_300_17&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> </span><a href="#loc_300_19_300_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_300_19_300_21&#39;)"><span class="hl_varref"><span class="mpre">ys</span></span></a><span class="mpre">
                         then </span><a href="#loc_300_15_300_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_300_15_300_17&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> else </span><a href="#loc_300_19_300_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_300_19_300_21&#39;)"><span class="hl_varref"><span class="mpre">ys</span></span></a><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- lazy variant of @\xs ys -&gt; length xs &lt;= length ys@</span></span><span class="mpre">
    </span><a name="loc_303_5_303_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_5_303_18&#39;)"><span class="hl_fundecl"><span class="mpre">lazyLengthCmp</span></span></a><span class="mpre"> [] _ = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
    </span><a href="#loc_303_5_303_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_5_303_18&#39;)"><span class="hl_fundecl"><span class="mpre">lazyLengthCmp</span></span></a><span class="mpre"> _ [] = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a href="#loc_303_5_303_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_5_303_18&#39;)"><span class="hl_fundecl"><span class="mpre">lazyLengthCmp</span></span></a><span class="mpre"> (_</span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_305_22_305_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_305_22_305_24&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">) (_</span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_305_29_305_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_305_29_305_31&#39;)"><span class="hl_vardecl"><span class="mpre">ys</span></span></a><span class="mpre">) = </span><a href="#loc_303_5_303_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_5_303_18&#39;)"><span class="hl_varref"><span class="mpre">lazyLengthCmp</span></span></a><span class="mpre"> </span><a href="#loc_305_22_305_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_305_22_305_24&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> </span><a href="#loc_305_29_305_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_305_29_305_31&#39;)"><span class="hl_varref"><span class="mpre">ys</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A map of dependencies.  Newtyped since the default monoid instance is not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   appropriate.  The monoid instance uses &#39;intersectVersionRanges&#39;.</span></span><span class="mpre">
newtype </span><a name="loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tycondecl"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> = </span><a name="loc_309_25_309_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_25_309_38&#39;)"><span class="hl_condecl"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> { </span><a name="loc_309_41_309_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_41_309_56&#39;)"><span class="hl_fielddecl"><span class="mpre">unDependencyMap</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Map</span></span><span class="mpre"> </span><a href="Distribution.Package.html#loc_80_9_80_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_80_9_80_20&#39;)"><span class="hl_tyconref"><span class="mpre">PackageName</span></span></a><span class="mpre"> </span><a href="Distribution.Version.html#loc_113_6_113_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_113_6_113_18&#39;)"><span class="hl_tyconref"><span class="mpre">VersionRange</span></span></a><span class="mpre"> }
  </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 310, srcSpanStartColumn = 3, srcSpanEndLine = 310, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 310, srcSpanStartColumn = 3, srcSpanEndLine = 310, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/"><span class="mpre">deriving (Show, Read)</span></span><span class="mpre">

instance </span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="hl_classref"><span class="mpre">Monoid</span></span></a><span class="mpre"> </span><a href="#loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tyconref"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> where
    </span><a href="Data.Monoid.html#loc_80_9_80_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_80_9_80_15&#39;)"><span class="hl_vardecl"><span class="mpre">mempty</span></span></a><span class="mpre"> = </span><a href="#loc_309_25_309_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_25_309_38&#39;)"><span class="hl_conref"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">Map.empty</span></span><span class="mpre">
    (</span><a href="#loc_309_25_309_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_25_309_38&#39;)"><span class="hl_conref"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> </span><a name="loc_314_20_314_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_20_314_21&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">`mappend`</span></span></a><span class="mpre"> (</span><a href="#loc_309_25_309_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_25_309_38&#39;)"><span class="hl_conref"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> </span><a name="loc_314_48_314_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_48_314_49&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">) =
        </span><a href="#loc_309_25_309_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_25_309_38&#39;)"><span class="hl_conref"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">Map.unionWith</span></span><span class="mpre"> </span><a href="Distribution.Version.html#loc_212_1_212_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_212_1_212_23&#39;)"><span class="hl_varref"><span class="mpre">intersectVersionRanges</span></span></a><span class="mpre"> </span><a href="#loc_314_20_314_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_20_314_21&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_314_48_314_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_48_314_49&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)

</span><a href="#loc_318_1_318_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_1_318_9&#39;)"><span class="mpre">toDepMap</span></a><span class="mpre"> :: [</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">] -&gt; </span><a href="#loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tyconref"><span class="mpre">DependencyMap</span></span></a><span class="mpre">
</span><a name="loc_318_1_318_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_1_318_9&#39;)"><span class="hl_fundecl"><span class="mpre">toDepMap</span></span></a><span class="mpre"> </span><a name="loc_318_10_318_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_10_318_12&#39;)"><span class="hl_vardecl"><span class="mpre">ds</span></span></a><span class="mpre"> =
  </span><a href="#loc_309_25_309_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_25_309_38&#39;)"><span class="hl_conref"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromListWith</span></span><span class="mpre"> </span><a href="Distribution.Version.html#loc_212_1_212_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_212_1_212_23&#39;)"><span class="hl_varref"><span class="mpre">intersectVersionRanges</span></span></a><span class="mpre"> [ (</span><a href="#loc_319_77_319_78" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_77_319_78&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">,</span><a href="#loc_319_79_319_81" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_79_319_81&#39;)"><span class="hl_varref"><span class="mpre">vr</span></span></a><span class="mpre">) | </span><a href="Distribution.Package.html#loc_145_19_145_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_19_145_29&#39;)"><span class="hl_conref"><span class="mpre">Dependency</span></span></a><span class="mpre"> </span><a name="loc_319_77_319_78" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_77_319_78&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_319_79_319_81" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_79_319_81&#39;)"><span class="hl_vardecl"><span class="mpre">vr</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_318_10_318_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_318_10_318_12&#39;)"><span class="hl_varref"><span class="mpre">ds</span></span></a><span class="mpre"> ]

</span><a href="#loc_322_1_322_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_11&#39;)"><span class="mpre">fromDepMap</span></a><span class="mpre"> :: </span><a href="#loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tyconref"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> -&gt; [</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">]
</span><a name="loc_322_1_322_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_11&#39;)"><span class="hl_fundecl"><span class="mpre">fromDepMap</span></span></a><span class="mpre"> </span><a name="loc_322_12_322_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_12_322_13&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = [ </span><a href="Distribution.Package.html#loc_145_19_145_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_19_145_29&#39;)"><span class="hl_conref"><span class="mpre">Dependency</span></span></a><span class="mpre"> </span><a href="#loc_322_37_322_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_37_322_38&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_322_39_322_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_39_322_41&#39;)"><span class="hl_varref"><span class="mpre">vr</span></span></a><span class="mpre"> | (</span><a name="loc_322_37_322_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_37_322_38&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">,</span><a name="loc_322_39_322_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_39_322_41&#39;)"><span class="hl_vardecl"><span class="mpre">vr</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">toList</span></span><span class="mpre"> (</span><a href="#loc_309_41_309_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_41_309_56&#39;)"><span class="hl_varref"><span class="mpre">unDependencyMap</span></span></a><span class="mpre"> </span><a href="#loc_322_12_322_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_12_322_13&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) ]

</span><a href="#loc_328_1_328_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_1_328_17&#39;)"><span class="mpre">simplifyCondTree</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 324, srcSpanStartColumn = 21, srcSpanEndLine = 324, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 324, srcSpanStartColumn = 21, srcSpanEndLine = 324, srcSpanEndColumn = 22},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem"><span class="mpre">(Monoid a, Monoid d) =&gt;</span></span><span class="mpre">
                    (</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)
                 -&gt; </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
                 -&gt; (</span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_328_1_328_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_1_328_17&#39;)"><span class="hl_fundecl"><span class="mpre">simplifyCondTree</span></span></a><span class="mpre"> </span><a name="loc_328_18_328_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_18_328_21&#39;)"><span class="hl_vardecl"><span class="mpre">env</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">CondNode</span></span><span class="mpre"> </span><a name="loc_328_32_328_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_32_328_33&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_328_34_328_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_34_328_35&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> </span><a name="loc_328_36_328_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_36_328_39&#39;)"><span class="hl_vardecl"><span class="mpre">ifs</span></span></a><span class="mpre">) =
    </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> (</span><a href="#loc_328_34_328_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_34_328_35&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">, </span><a href="#loc_328_32_328_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_32_328_33&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_115_1_115_10&#39;)"><span class="hl_varref"><span class="mpre">catMaybes</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="#loc_331_5_331_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_5_331_15&#39;)"><span class="hl_varref"><span class="mpre">simplifyIf</span></span></a><span class="mpre"> </span><a href="#loc_328_36_328_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_36_328_39&#39;)"><span class="hl_varref"><span class="mpre">ifs</span></span></a><span class="mpre">)
  where
    </span><a name="loc_331_5_331_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_5_331_15&#39;)"><span class="hl_fundecl"><span class="mpre">simplifyIf</span></span></a><span class="mpre"> (</span><a name="loc_331_17_331_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_17_331_20&#39;)"><span class="hl_vardecl"><span class="mpre">cnd</span></span></a><span class="mpre">, </span><a name="loc_331_22_331_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_22_331_23&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">, </span><a name="loc_331_25_331_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_25_331_27&#39;)"><span class="hl_vardecl"><span class="mpre">me</span></span></a><span class="mpre">) =
        case </span><a href="#loc_97_1_97_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_18&#39;)"><span class="hl_varref"><span class="mpre">simplifyCondition</span></span></a><span class="mpre"> </span><a href="#loc_331_17_331_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_17_331_20&#39;)"><span class="hl_varref"><span class="mpre">cnd</span></span></a><span class="mpre"> </span><a href="#loc_328_18_328_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_18_328_21&#39;)"><span class="hl_varref"><span class="mpre">env</span></span></a><span class="mpre"> of
          (</span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">, _) -&gt; </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_328_1_328_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_1_328_17&#39;)"><span class="hl_varref"><span class="mpre">simplifyCondTree</span></span></a><span class="mpre"> </span><a href="#loc_328_18_328_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_18_328_21&#39;)"><span class="hl_varref"><span class="mpre">env</span></span></a><span class="mpre"> </span><a href="#loc_331_22_331_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_22_331_23&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
          (</span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">, _) -&gt; </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="#loc_328_1_328_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_1_328_17&#39;)"><span class="hl_varref"><span class="mpre">simplifyCondTree</span></span></a><span class="mpre"> </span><a href="#loc_328_18_328_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_328_18_328_21&#39;)"><span class="hl_varref"><span class="mpre">env</span></span></a><span class="mpre">) </span><a href="#loc_331_25_331_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_25_331_27&#39;)"><span class="hl_varref"><span class="mpre">me</span></span></a><span class="mpre">
          _ -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Environment not defined for all free vars&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Flatten a CondTree.  This will resolve the CondTree by taking all</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  possible paths into account.  Note that since branches represent exclusive</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  choices this may not result in a \&quot;sane\&quot; result.</span></span><span class="mpre">
</span><a href="#loc_341_1_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_17&#39;)"><span class="mpre">ignoreConditions</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 340, srcSpanStartColumn = 21, srcSpanEndLine = 340, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 340, srcSpanStartColumn = 21, srcSpanEndLine = 340, srcSpanEndColumn = 22},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem"><span class="mpre">(Monoid a, Monoid c) =&gt;</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">)
</span><a name="loc_341_1_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_17&#39;)"><span class="hl_fundecl"><span class="mpre">ignoreConditions</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">CondNode</span></span><span class="mpre"> </span><a name="loc_341_28_341_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_28_341_29&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_341_30_341_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_30_341_31&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_341_32_341_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_32_341_35&#39;)"><span class="hl_vardecl"><span class="mpre">ifs</span></span></a><span class="mpre">) = (</span><a href="#loc_341_28_341_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_28_341_29&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">, </span><a href="#loc_341_30_341_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_30_341_31&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> </span><a href="#loc_342_9_342_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_342_9_342_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_341_32_341_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_32_341_35&#39;)"><span class="hl_varref"><span class="mpre">ifs</span></span></a><span class="mpre">)
  where </span><a name="loc_342_9_342_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_342_9_342_10&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> (_, </span><a name="loc_342_15_342_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_342_15_342_16&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">, </span><a name="loc_342_18_342_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_342_18_342_20&#39;)"><span class="hl_vardecl"><span class="mpre">me</span></span></a><span class="mpre">) = </span><a href="#loc_341_1_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_17&#39;)"><span class="hl_varref"><span class="mpre">ignoreConditions</span></span></a><span class="mpre"> </span><a href="#loc_342_15_342_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_342_15_342_16&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
                       </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_103_1_103_12&#39;)"><span class="hl_varref"><span class="mpre">maybeToList</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_341_1_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_17&#39;)"><span class="hl_varref"><span class="mpre">ignoreConditions</span></span></a><span class="mpre"> </span><a href="#loc_342_18_342_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_342_18_342_20&#39;)"><span class="hl_varref"><span class="mpre">me</span></span></a><span class="mpre">)

</span><a href="#loc_346_1_346_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_1_346_9&#39;)"><span class="mpre">freeVars</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_1006_6_1006_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_1006_6_1006_14&#39;)"><span class="hl_tyconref"><span class="mpre">CondTree</span></span></a><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_978_6_978_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_978_6_978_13&#39;)"><span class="hl_tyconref"><span class="mpre">ConfVar</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">  -&gt; [</span><a href="Distribution.PackageDescription.html#loc_967_9_967_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_967_9_967_17&#39;)"><span class="hl_tyconref"><span class="mpre">FlagName</span></span></a><span class="mpre">]
</span><a name="loc_346_1_346_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_1_346_9&#39;)"><span class="hl_fundecl"><span class="mpre">freeVars</span></span></a><span class="mpre"> </span><a name="loc_346_10_346_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_10_346_11&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = [ </span><a href="#loc_346_25_346_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_25_346_26&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> | </span><a href="Distribution.PackageDescription.html#loc_980_16_980_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_980_16_980_20&#39;)"><span class="hl_conref"><span class="mpre">Flag</span></span></a><span class="mpre"> </span><a name="loc_346_25_346_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_25_346_26&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_348_5_348_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_5_348_14&#39;)"><span class="hl_varref"><span class="mpre">freeVars&#39;</span></span></a><span class="mpre"> </span><a href="#loc_346_10_346_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_10_346_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> ]
  where
    </span><a name="loc_348_5_348_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_5_348_14&#39;)"><span class="hl_fundecl"><span class="mpre">freeVars&#39;</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">CondNode</span></span><span class="mpre"> _ _ </span><a name="loc_348_29_348_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_29_348_32&#39;)"><span class="hl_vardecl"><span class="mpre">ifs</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> </span><a href="#loc_349_5_349_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_5_349_11&#39;)"><span class="hl_varref"><span class="mpre">compfv</span></span></a><span class="mpre"> </span><a href="#loc_348_29_348_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_29_348_32&#39;)"><span class="hl_varref"><span class="mpre">ifs</span></span></a><span class="mpre">
    </span><a name="loc_349_5_349_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_5_349_11&#39;)"><span class="hl_fundecl"><span class="mpre">compfv</span></span></a><span class="mpre"> (</span><a name="loc_349_13_349_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_13_349_14&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">, </span><a name="loc_349_16_349_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_16_349_18&#39;)"><span class="hl_vardecl"><span class="mpre">ct</span></span></a><span class="mpre">, </span><a name="loc_349_20_349_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_20_349_23&#39;)"><span class="hl_vardecl"><span class="mpre">mct</span></span></a><span class="mpre">) = </span><a href="#loc_350_5_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_5_350_11&#39;)"><span class="hl_varref"><span class="mpre">condfv</span></span></a><span class="mpre"> </span><a href="#loc_349_13_349_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_13_349_14&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_348_5_348_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_5_348_14&#39;)"><span class="hl_varref"><span class="mpre">freeVars&#39;</span></span></a><span class="mpre"> </span><a href="#loc_349_16_349_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_16_349_18&#39;)"><span class="hl_varref"><span class="mpre">ct</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">maybe</span></span><span class="mpre"> [] </span><a href="#loc_348_5_348_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_5_348_14&#39;)"><span class="hl_varref"><span class="mpre">freeVars&#39;</span></span></a><span class="mpre"> </span><a href="#loc_349_20_349_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_20_349_23&#39;)"><span class="hl_varref"><span class="mpre">mct</span></span></a><span class="mpre">
    </span><a name="loc_350_5_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_5_350_11&#39;)"><span class="hl_fundecl"><span class="mpre">condfv</span></span></a><span class="mpre"> </span><a name="loc_350_12_350_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_12_350_13&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = case </span><a href="#loc_350_12_350_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_12_350_13&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> of
      </span><a href="Distribution.PackageDescription.html#loc_992_20_992_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_992_20_992_23&#39;)"><span class="hl_conref"><span class="mpre">Var</span></span></a><span class="mpre"> </span><a name="loc_351_11_351_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_351_11_351_12&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre">      -&gt; [</span><a href="#loc_351_11_351_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_351_11_351_12&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">]
      </span><a href="Distribution.PackageDescription.html#loc_993_20_993_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_993_20_993_23&#39;)"><span class="hl_conref"><span class="mpre">Lit</span></span></a><span class="mpre"> _      -&gt; []
      </span><a href="Distribution.PackageDescription.html#loc_994_20_994_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_994_20_994_24&#39;)"><span class="hl_conref"><span class="mpre">CNot</span></span></a><span class="mpre"> </span><a name="loc_353_12_353_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_12_353_14&#39;)"><span class="hl_vardecl"><span class="mpre">c&#39;</span></span></a><span class="mpre">    -&gt; </span><a href="#loc_350_5_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_5_350_11&#39;)"><span class="hl_varref"><span class="mpre">condfv</span></span></a><span class="mpre"> </span><a href="#loc_353_12_353_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_12_353_14&#39;)"><span class="hl_varref"><span class="mpre">c&#39;</span></span></a><span class="mpre">
      </span><a href="Distribution.PackageDescription.html#loc_995_20_995_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_995_20_995_23&#39;)"><span class="hl_conref"><span class="mpre">COr</span></span></a><span class="mpre"> </span><a name="loc_354_11_354_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_11_354_13&#39;)"><span class="hl_vardecl"><span class="mpre">c1</span></span></a><span class="mpre"> </span><a name="loc_354_14_354_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_14_354_16&#39;)"><span class="hl_vardecl"><span class="mpre">c2</span></span></a><span class="mpre">  -&gt; </span><a href="#loc_350_5_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_5_350_11&#39;)"><span class="hl_varref"><span class="mpre">condfv</span></span></a><span class="mpre"> </span><a href="#loc_354_11_354_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_11_354_13&#39;)"><span class="hl_varref"><span class="mpre">c1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_350_5_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_5_350_11&#39;)"><span class="hl_varref"><span class="mpre">condfv</span></span></a><span class="mpre"> </span><a href="#loc_354_14_354_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_14_354_16&#39;)"><span class="hl_varref"><span class="mpre">c2</span></span></a><span class="mpre">
      </span><a href="Distribution.PackageDescription.html#loc_996_20_996_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_996_20_996_24&#39;)"><span class="hl_conref"><span class="mpre">CAnd</span></span></a><span class="mpre"> </span><a name="loc_355_12_355_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_355_12_355_14&#39;)"><span class="hl_vardecl"><span class="mpre">c1</span></span></a><span class="mpre"> </span><a name="loc_355_15_355_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_355_15_355_17&#39;)"><span class="hl_vardecl"><span class="mpre">c2</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_350_5_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_5_350_11&#39;)"><span class="hl_varref"><span class="mpre">condfv</span></span></a><span class="mpre"> </span><a href="#loc_355_12_355_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_355_12_355_14&#39;)"><span class="hl_varref"><span class="mpre">c1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_350_5_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_5_350_11&#39;)"><span class="hl_varref"><span class="mpre">condfv</span></span></a><span class="mpre"> </span><a href="#loc_355_15_355_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_355_15_355_17&#39;)"><span class="hl_varref"><span class="mpre">c2</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A set of targets with their package dependencies</span></span><span class="mpre">
newtype </span><a name="loc_361_9_361_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_9_361_18&#39;)"><span class="hl_tycondecl"><span class="mpre">TargetSet</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_361_23_361_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_23_361_32&#39;)"><span class="hl_condecl"><span class="mpre">TargetSet</span></span></a><span class="mpre"> [(</span><a href="#loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tyconref"><span class="mpre">DependencyMap</span></span></a><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)]

</span><span class="hl_comment"><span class="mpre">-- | Combine the target-specific dependencies in a TargetSet to give the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- dependencies for the package as a whole.</span></span><span class="mpre">
</span><a href="#loc_366_1_366_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_1_366_20&#39;)"><span class="mpre">overallDependencies</span></a><span class="mpre"> :: </span><a href="#loc_361_9_361_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_9_361_18&#39;)"><span class="hl_tyconref"><span class="mpre">TargetSet</span></span></a><span class="mpre"> </span><a href="#loc_451_6_451_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_6_451_14&#39;)"><span class="hl_tyconref"><span class="mpre">PDTagged</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tyconref"><span class="mpre">DependencyMap</span></span></a><span class="mpre">
</span><a name="loc_366_1_366_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_1_366_20&#39;)"><span class="hl_fundecl"><span class="mpre">overallDependencies</span></span></a><span class="mpre"> (</span><a href="#loc_361_23_361_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_23_361_32&#39;)"><span class="hl_conref"><span class="mpre">TargetSet</span></span></a><span class="mpre"> </span><a name="loc_366_32_366_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_32_366_39&#39;)"><span class="hl_vardecl"><span class="mpre">targets</span></span></a><span class="mpre">) = </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><a href="#loc_368_6_368_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_368_6_368_11&#39;)"><span class="hl_varref"><span class="mpre">depss</span></span></a><span class="mpre">
  where
    (</span><a name="loc_368_6_368_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_368_6_368_11&#39;)"><span class="hl_vardecl"><span class="mpre">depss</span></span></a><span class="mpre">, _) = </span><span class="hl_varref"><span class="mpre">unzip</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> (</span><a href="#loc_370_5_370_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_5_370_27&#39;)"><span class="hl_varref"><span class="mpre">removeDisabledSections</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">snd</span></span><span class="mpre">) </span><a href="#loc_366_32_366_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_32_366_39&#39;)"><span class="hl_varref"><span class="mpre">targets</span></span></a><span class="mpre">
    </span><a href="#loc_370_5_370_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_5_370_27&#39;)"><span class="mpre">removeDisabledSections</span></a><span class="mpre"> :: </span><a href="#loc_451_6_451_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_6_451_14&#39;)"><span class="hl_tyconref"><span class="mpre">PDTagged</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
    </span><a name="loc_370_5_370_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_5_370_27&#39;)"><span class="hl_fundecl"><span class="mpre">removeDisabledSections</span></span></a><span class="mpre"> (</span><a href="#loc_451_17_451_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_17_451_20&#39;)"><span class="hl_conref"><span class="mpre">Lib</span></span></a><span class="mpre"> _) = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
    </span><a href="#loc_370_5_370_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_5_370_27&#39;)"><span class="hl_fundecl"><span class="mpre">removeDisabledSections</span></span></a><span class="mpre"> (</span><a href="#loc_452_17_452_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_17_452_20&#39;)"><span class="hl_conref"><span class="mpre">Exe</span></span></a><span class="mpre"> _ _) = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
    </span><a href="#loc_370_5_370_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_5_370_27&#39;)"><span class="hl_fundecl"><span class="mpre">removeDisabledSections</span></span></a><span class="mpre"> (</span><a href="#loc_453_17_453_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_17_453_21&#39;)"><span class="hl_conref"><span class="mpre">Test</span></span></a><span class="mpre"> _ </span><a name="loc_372_36_372_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_36_372_37&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">) = </span><a href="Distribution.PackageDescription.html#loc_399_9_399_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_399_9_399_20&#39;)"><span class="hl_varref"><span class="mpre">testEnabled</span></span></a><span class="mpre"> </span><a href="#loc_372_36_372_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_36_372_37&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    </span><a href="#loc_370_5_370_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_5_370_27&#39;)"><span class="hl_fundecl"><span class="mpre">removeDisabledSections</span></span></a><span class="mpre"> (</span><a href="#loc_454_17_454_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_22&#39;)"><span class="hl_conref"><span class="mpre">Bench</span></span></a><span class="mpre"> _ </span><a name="loc_373_37_373_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_37_373_38&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">) = </span><a href="Distribution.PackageDescription.html#loc_534_9_534_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_534_9_534_25&#39;)"><span class="hl_varref"><span class="mpre">benchmarkEnabled</span></span></a><span class="mpre"> </span><a href="#loc_373_37_373_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_37_373_38&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
    </span><a href="#loc_370_5_370_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_5_370_27&#39;)"><span class="hl_fundecl"><span class="mpre">removeDisabledSections</span></span></a><span class="mpre"> </span><a href="#loc_455_17_455_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_17_455_23&#39;)"><span class="hl_conref"><span class="mpre">PDNull</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Apply extra constraints to a dependency map.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Combines dependencies where the result will only contain keys from the left</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (first) map.  If a key also exists in the right map, both constraints will</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- be intersected.</span></span><span class="mpre">
</span><a href="#loc_383_1_383_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_1_383_12&#39;)"><span class="mpre">constrainBy</span></a><span class="mpre"> :: </span><a href="#loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tyconref"><span class="mpre">DependencyMap</span></span></a><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^ Input map</span></span><span class="mpre">
            -&gt; </span><a href="#loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tyconref"><span class="mpre">DependencyMap</span></span></a><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^ Extra constraints</span></span><span class="mpre">
            -&gt; </span><a href="#loc_309_9_309_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_9_309_22&#39;)"><span class="hl_tyconref"><span class="mpre">DependencyMap</span></span></a><span class="mpre">
</span><a name="loc_383_1_383_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_1_383_12&#39;)"><span class="hl_fundecl"><span class="mpre">constrainBy</span></span></a><span class="mpre"> </span><a name="loc_383_13_383_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_13_383_17&#39;)"><span class="hl_vardecl"><span class="mpre">left</span></span></a><span class="mpre"> </span><a name="loc_383_18_383_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_18_383_23&#39;)"><span class="hl_vardecl"><span class="mpre">extra</span></span></a><span class="mpre"> =
    </span><a href="#loc_309_25_309_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_25_309_38&#39;)"><span class="hl_conref"><span class="mpre">DependencyMap</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
      </span><a href="Data.Map.html#loc_128_1_128_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Map.html#loc_128_1_128_12&#39;)"><span class="hl_varref"><span class="mpre">Map.foldWithKey</span></span></a><span class="mpre"> </span><a href="#loc_387_9_387_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_9_387_26&#39;)"><span class="hl_varref"><span class="mpre">tightenConstraint</span></span></a><span class="mpre"> (</span><a href="#loc_309_41_309_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_41_309_56&#39;)"><span class="hl_varref"><span class="mpre">unDependencyMap</span></span></a><span class="mpre"> </span><a href="#loc_383_13_383_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_13_383_17&#39;)"><span class="hl_varref"><span class="mpre">left</span></span></a><span class="mpre">)
                                        (</span><a href="#loc_309_41_309_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_309_41_309_56&#39;)"><span class="hl_varref"><span class="mpre">unDependencyMap</span></span></a><span class="mpre"> </span><a href="#loc_383_18_383_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_383_18_383_23&#39;)"><span class="hl_varref"><span class="mpre">extra</span></span></a><span class="mpre">)
  where </span><a name="loc_387_9_387_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_9_387_26&#39;)"><span class="hl_fundecl"><span class="mpre">tightenConstraint</span></span></a><span class="mpre"> </span><a name="loc_387_27_387_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_27_387_28&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_387_29_387_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_29_387_30&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_387_31_387_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_31_387_32&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> =
            case </span><span class="hl_varref"><span class="mpre">Map.lookup</span></span><span class="mpre"> </span><a href="#loc_387_27_387_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_27_387_28&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_387_31_387_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_31_387_32&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> of
              </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; </span><a href="#loc_387_31_387_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_31_387_32&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
              </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_390_20_390_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_20_390_22&#39;)"><span class="hl_vardecl"><span class="mpre">vr</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">Map.insert</span></span><span class="mpre"> </span><a href="#loc_387_27_387_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_27_387_28&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="Distribution.Version.html#loc_212_1_212_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_212_1_212_23&#39;)"><span class="hl_varref"><span class="mpre">intersectVersionRanges</span></span></a><span class="mpre"> </span><a href="#loc_390_20_390_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_20_390_22&#39;)"><span class="hl_varref"><span class="mpre">vr</span></span></a><span class="mpre"> </span><a href="#loc_387_29_387_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_29_387_30&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) </span><a href="#loc_387_31_387_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_31_387_32&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Collect up the targets in a TargetSet of tagged targets, storing the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- dependencies as we go.</span></span><span class="mpre">
</span><a href="#loc_397_1_397_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_1_397_21&#39;)"><span class="mpre">flattenTaggedTargets</span></a><span class="mpre"> :: </span><a href="#loc_361_9_361_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_9_361_18&#39;)"><span class="hl_tyconref"><span class="mpre">TargetSet</span></span></a><span class="mpre"> </span><a href="#loc_451_6_451_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_6_451_14&#39;)"><span class="hl_tyconref"><span class="mpre">PDTagged</span></span></a><span class="mpre"> -&gt;
        (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">, [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="hl_tyconref"><span class="mpre">Executable</span></span></a><span class="mpre">)], [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><a href="Distribution.PackageDescription.html#loc_395_6_395_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_395_6_395_15&#39;)"><span class="hl_tyconref"><span class="mpre">TestSuite</span></span></a><span class="mpre">)]
        , [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><a href="Distribution.PackageDescription.html#loc_530_6_530_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_530_6_530_15&#39;)"><span class="hl_tyconref"><span class="mpre">Benchmark</span></span></a><span class="mpre">)])
</span><a name="loc_397_1_397_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_1_397_21&#39;)"><span class="hl_fundecl"><span class="mpre">flattenTaggedTargets</span></span></a><span class="mpre"> (</span><a href="#loc_361_23_361_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_23_361_32&#39;)"><span class="hl_conref"><span class="mpre">TargetSet</span></span></a><span class="mpre"> </span><a name="loc_397_33_397_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_33_397_40&#39;)"><span class="hl_vardecl"><span class="mpre">targets</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">foldr</span></span><span class="mpre"> </span><a href="#loc_399_5_399_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_5_399_10&#39;)"><span class="hl_varref"><span class="mpre">untag</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">, [], [], []) </span><a href="#loc_397_33_397_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_33_397_40&#39;)"><span class="hl_varref"><span class="mpre">targets</span></span></a><span class="mpre">
  where
    </span><a name="loc_399_5_399_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_5_399_10&#39;)"><span class="hl_fundecl"><span class="mpre">untag</span></span></a><span class="mpre"> (_, </span><a href="#loc_451_17_451_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_17_451_20&#39;)"><span class="hl_conref"><span class="mpre">Lib</span></span></a><span class="mpre"> _) (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> _, _, _, _) = </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Only one library expected&quot;</span></span><span class="mpre">
    </span><a href="#loc_399_5_399_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_5_399_10&#39;)"><span class="hl_fundecl"><span class="mpre">untag</span></span></a><span class="mpre"> (</span><span class="hl_vardecl"><span class="mpre">deps</span></span><span class="mpre">, </span><a href="#loc_451_17_451_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_17_451_20&#39;)"><span class="hl_conref"><span class="mpre">Lib</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">l</span></span><span class="mpre">) (</span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">, </span><a name="loc_400_35_400_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_400_35_400_39&#39;)"><span class="hl_vardecl"><span class="mpre">exes</span></span></a><span class="mpre">, </span><a name="loc_400_41_400_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_400_41_400_46&#39;)"><span class="hl_vardecl"><span class="mpre">tests</span></span></a><span class="mpre">, </span><a name="loc_400_48_400_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_400_48_400_51&#39;)"><span class="hl_vardecl"><span class="mpre">bms</span></span></a><span class="mpre">) =
        (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_403_9_403_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_403_9_403_11&#39;)"><span class="hl_varref"><span class="mpre">l&#39;</span></span></a><span class="mpre">, </span><a href="#loc_400_35_400_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_400_35_400_39&#39;)"><span class="hl_varref"><span class="mpre">exes</span></span></a><span class="mpre">, </span><a href="#loc_400_41_400_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_400_41_400_46&#39;)"><span class="hl_varref"><span class="mpre">tests</span></span></a><span class="mpre">, </span><a href="#loc_400_48_400_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_400_48_400_51&#39;)"><span class="hl_varref"><span class="mpre">bms</span></span></a><span class="mpre">)
      where
        </span><a name="loc_403_9_403_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_403_9_403_11&#39;)"><span class="hl_vardecl"><span class="mpre">l&#39;</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 403, srcSpanStartColumn = 14, srcSpanEndLine = 405, srcSpanEndColumn = 14}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 403, srcSpanStartColumn = 16, srcSpanEndLine = 403, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">l {
                libBuildInfo = (libBuildInfo l) { targetBuildDepends = fromDepMap deps }
            }</span></span><span class="mpre">
    </span><a href="#loc_399_5_399_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_5_399_10&#39;)"><span class="hl_fundecl"><span class="mpre">untag</span></span></a><span class="mpre"> (</span><span class="hl_vardecl"><span class="mpre">deps</span></span><span class="mpre">, </span><a href="#loc_452_17_452_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_17_452_20&#39;)"><span class="hl_conref"><span class="mpre">Exe</span></span></a><span class="mpre"> </span><a name="loc_406_22_406_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_22_406_23&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">e</span></span><span class="mpre">) (</span><a name="loc_406_28_406_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_28_406_32&#39;)"><span class="hl_vardecl"><span class="mpre">mlib</span></span></a><span class="mpre">, </span><a name="loc_406_34_406_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_34_406_38&#39;)"><span class="hl_vardecl"><span class="mpre">exes</span></span></a><span class="mpre">, </span><a name="loc_406_40_406_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_40_406_45&#39;)"><span class="hl_vardecl"><span class="mpre">tests</span></span></a><span class="mpre">, </span><a name="loc_406_47_406_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_47_406_50&#39;)"><span class="hl_vardecl"><span class="mpre">bms</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_406_22_406_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_22_406_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_406_34_406_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_34_406_38&#39;)"><span class="hl_varref"><span class="mpre">exes</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exist several exes with the same name: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_406_22_406_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_22_406_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_406_22_406_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_22_406_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_406_40_406_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_40_406_45&#39;)"><span class="hl_varref"><span class="mpre">tests</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exists a test with the same name as an exe: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_406_22_406_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_22_406_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_406_22_406_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_22_406_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_406_47_406_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_47_406_50&#39;)"><span class="hl_varref"><span class="mpre">bms</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exists a benchmark with the same name as an exe: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_406_22_406_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_22_406_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = (</span><a href="#loc_406_28_406_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_28_406_32&#39;)"><span class="hl_varref"><span class="mpre">mlib</span></span></a><span class="mpre">, (</span><a href="#loc_406_22_406_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_22_406_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">, </span><a href="#loc_415_9_415_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_415_9_415_11&#39;)"><span class="hl_varref"><span class="mpre">e&#39;</span></span></a><span class="mpre">)</span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_406_34_406_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_34_406_38&#39;)"><span class="hl_varref"><span class="mpre">exes</span></span></a><span class="mpre">, </span><a href="#loc_406_40_406_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_40_406_45&#39;)"><span class="hl_varref"><span class="mpre">tests</span></span></a><span class="mpre">, </span><a href="#loc_406_47_406_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_47_406_50&#39;)"><span class="hl_varref"><span class="mpre">bms</span></span></a><span class="mpre">)
      where
        </span><a name="loc_415_9_415_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_415_9_415_11&#39;)"><span class="hl_vardecl"><span class="mpre">e&#39;</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 415, srcSpanStartColumn = 14, srcSpanEndLine = 417, srcSpanEndColumn = 14}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 415, srcSpanStartColumn = 16, srcSpanEndLine = 415, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">e {
                buildInfo = (buildInfo e) { targetBuildDepends = fromDepMap deps }
            }</span></span><span class="mpre">
    </span><a href="#loc_399_5_399_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_5_399_10&#39;)"><span class="hl_fundecl"><span class="mpre">untag</span></span></a><span class="mpre"> (</span><span class="hl_vardecl"><span class="mpre">deps</span></span><span class="mpre">, </span><a href="#loc_453_17_453_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_17_453_21&#39;)"><span class="hl_conref"><span class="mpre">Test</span></span></a><span class="mpre"> </span><a name="loc_418_23_418_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_23_418_24&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">t</span></span><span class="mpre">) (</span><a name="loc_418_29_418_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_29_418_33&#39;)"><span class="hl_vardecl"><span class="mpre">mlib</span></span></a><span class="mpre">, </span><a name="loc_418_35_418_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_35_418_39&#39;)"><span class="hl_vardecl"><span class="mpre">exes</span></span></a><span class="mpre">, </span><a name="loc_418_41_418_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_41_418_46&#39;)"><span class="hl_vardecl"><span class="mpre">tests</span></span></a><span class="mpre">, </span><a name="loc_418_48_418_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_48_418_51&#39;)"><span class="hl_vardecl"><span class="mpre">bms</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_418_23_418_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_23_418_24&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_418_41_418_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_41_418_46&#39;)"><span class="hl_varref"><span class="mpre">tests</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exist several tests with the same name: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_418_23_418_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_23_418_24&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_418_23_418_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_23_418_24&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_418_35_418_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_35_418_39&#39;)"><span class="hl_varref"><span class="mpre">exes</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exists an exe with the same name as the test: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_418_23_418_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_23_418_24&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_418_23_418_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_23_418_24&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_418_48_418_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_48_418_51&#39;)"><span class="hl_varref"><span class="mpre">bms</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exists a benchmark with the same name as the test: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_418_23_418_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_23_418_24&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = (</span><a href="#loc_418_29_418_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_29_418_33&#39;)"><span class="hl_varref"><span class="mpre">mlib</span></span></a><span class="mpre">, </span><a href="#loc_418_35_418_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_35_418_39&#39;)"><span class="hl_varref"><span class="mpre">exes</span></span></a><span class="mpre">, (</span><a href="#loc_418_23_418_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_23_418_24&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">, </span><a href="#loc_427_9_427_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_9_427_11&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">)</span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_418_41_418_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_41_418_46&#39;)"><span class="hl_varref"><span class="mpre">tests</span></span></a><span class="mpre">, </span><a href="#loc_418_48_418_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_48_418_51&#39;)"><span class="hl_varref"><span class="mpre">bms</span></span></a><span class="mpre">)
      where
        </span><a name="loc_427_9_427_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_9_427_11&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 427, srcSpanStartColumn = 14, srcSpanEndLine = 430, srcSpanEndColumn = 14}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 427, srcSpanStartColumn = 16, srcSpanEndLine = 427, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">t {
            testBuildInfo = (testBuildInfo t)
                { targetBuildDepends = fromDepMap deps }
            }</span></span><span class="mpre">
    </span><a href="#loc_399_5_399_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_5_399_10&#39;)"><span class="hl_fundecl"><span class="mpre">untag</span></span></a><span class="mpre"> (</span><span class="hl_vardecl"><span class="mpre">deps</span></span><span class="mpre">, </span><a href="#loc_454_17_454_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_22&#39;)"><span class="hl_conref"><span class="mpre">Bench</span></span></a><span class="mpre"> </span><a name="loc_431_24_431_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_24_431_25&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">b</span></span><span class="mpre">) (</span><a name="loc_431_30_431_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_30_431_34&#39;)"><span class="hl_vardecl"><span class="mpre">mlib</span></span></a><span class="mpre">, </span><a name="loc_431_36_431_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_36_431_40&#39;)"><span class="hl_vardecl"><span class="mpre">exes</span></span></a><span class="mpre">, </span><a name="loc_431_42_431_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_42_431_47&#39;)"><span class="hl_vardecl"><span class="mpre">tests</span></span></a><span class="mpre">, </span><a name="loc_431_49_431_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_49_431_52&#39;)"><span class="hl_vardecl"><span class="mpre">bms</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_431_24_431_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_24_431_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_431_49_431_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_49_431_52&#39;)"><span class="hl_varref"><span class="mpre">bms</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exist several benchmarks with the same name: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_431_24_431_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_24_431_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_431_24_431_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_24_431_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_431_36_431_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_36_431_40&#39;)"><span class="hl_varref"><span class="mpre">exes</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exists an exe with the same name as the benchmark: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_431_24_431_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_24_431_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">any</span></span><span class="mpre"> ((</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_431_24_431_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_24_431_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">) </span><a href="#loc_431_42_431_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_42_431_47&#39;)"><span class="hl_varref"><span class="mpre">tests</span></span></a><span class="mpre"> =
          </span><a href="Distribution.PackageDescription.Utils.html#loc_18_1_18_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_18_1_18_8&#39;)"><span class="hl_varref"><span class="mpre">userBug</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;There exists a test with the same name as the benchmark: &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_431_24_431_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_24_431_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = (</span><a href="#loc_431_30_431_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_30_431_34&#39;)"><span class="hl_varref"><span class="mpre">mlib</span></span></a><span class="mpre">, </span><a href="#loc_431_36_431_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_36_431_40&#39;)"><span class="hl_varref"><span class="mpre">exes</span></span></a><span class="mpre">, </span><a href="#loc_431_42_431_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_42_431_47&#39;)"><span class="hl_varref"><span class="mpre">tests</span></span></a><span class="mpre">, (</span><a href="#loc_431_24_431_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_24_431_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">, </span><a href="#loc_440_9_440_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_440_9_440_11&#39;)"><span class="hl_varref"><span class="mpre">b&#39;</span></span></a><span class="mpre">)</span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_431_49_431_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_49_431_52&#39;)"><span class="hl_varref"><span class="mpre">bms</span></span></a><span class="mpre">)
      where
        </span><a name="loc_440_9_440_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_440_9_440_11&#39;)"><span class="hl_vardecl"><span class="mpre">b&#39;</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 440, srcSpanStartColumn = 14, srcSpanEndLine = 443, srcSpanEndColumn = 14}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 440, srcSpanStartColumn = 16, srcSpanEndLine = 440, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">b {
            benchmarkBuildInfo = (benchmarkBuildInfo b)
                { targetBuildDepends = fromDepMap deps }
            }</span></span><span class="mpre">
    </span><a href="#loc_399_5_399_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_5_399_10&#39;)"><span class="hl_fundecl"><span class="mpre">untag</span></span></a><span class="mpre"> (_, </span><a href="#loc_455_17_455_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_17_455_23&#39;)"><span class="hl_conref"><span class="mpre">PDNull</span></span></a><span class="mpre">) </span><a name="loc_444_23_444_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_23_444_24&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_444_23_444_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_444_23_444_24&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- actually this should not happen, but let&#39;s be liberal</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Convert GenericPackageDescription to PackageDescription</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">

data </span><a name="loc_451_6_451_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_6_451_14&#39;)"><span class="hl_tycondecl"><span class="mpre">PDTagged</span></span></a><span class="mpre"> = </span><a name="loc_451_17_451_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_17_451_20&#39;)"><span class="hl_condecl"><span class="mpre">Lib</span></span></a><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">
              | </span><a name="loc_452_17_452_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_17_452_20&#39;)"><span class="hl_condecl"><span class="mpre">Exe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="hl_tyconref"><span class="mpre">Executable</span></span></a><span class="mpre">
              | </span><a name="loc_453_17_453_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_17_453_21&#39;)"><span class="hl_condecl"><span class="mpre">Test</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_395_6_395_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_395_6_395_15&#39;)"><span class="hl_tyconref"><span class="mpre">TestSuite</span></span></a><span class="mpre">
              | </span><a name="loc_454_17_454_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_22&#39;)"><span class="hl_condecl"><span class="mpre">Bench</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_530_6_530_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_530_6_530_15&#39;)"><span class="hl_tyconref"><span class="mpre">Benchmark</span></span></a><span class="mpre">
              | </span><a name="loc_455_17_455_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_17_455_23&#39;)"><span class="hl_condecl"><span class="mpre">PDNull</span></span></a><span class="mpre">
              </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 456, srcSpanStartColumn = 15, srcSpanEndLine = 456, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 456, srcSpanStartColumn = 15, srcSpanEndLine = 456, srcSpanEndColumn = 23}]}) [IHead (SrcSpanInfo {srcInfoSpan = SrcSpan {"><span class="mpre">deriving Show</span></span><span class="mpre">

instance </span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="hl_classref"><span class="mpre">Monoid</span></span></a><span class="mpre"> </span><a href="#loc_451_6_451_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_6_451_14&#39;)"><span class="hl_tyconref"><span class="mpre">PDTagged</span></span></a><span class="mpre"> where
    </span><a href="Data.Monoid.html#loc_80_9_80_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_80_9_80_15&#39;)"><span class="hl_vardecl"><span class="mpre">mempty</span></span></a><span class="mpre"> = </span><a href="#loc_455_17_455_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_17_455_23&#39;)"><span class="hl_conref"><span class="mpre">PDNull</span></span></a><span class="mpre">
    </span><a href="#loc_455_17_455_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_17_455_23&#39;)"><span class="hl_conref"><span class="mpre">PDNull</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a name="loc_460_22_460_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_22_460_23&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_460_22_460_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_22_460_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><a name="loc_461_5_461_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_5_461_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_455_17_455_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_17_455_23&#39;)"><span class="hl_conref"><span class="mpre">PDNull</span></span></a><span class="mpre"> = </span><a href="#loc_461_5_461_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_461_5_461_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><a href="#loc_451_17_451_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_17_451_20&#39;)"><span class="hl_conref"><span class="mpre">Lib</span></span></a><span class="mpre"> </span><a name="loc_462_9_462_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_462_9_462_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_451_17_451_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_17_451_20&#39;)"><span class="hl_conref"><span class="mpre">Lib</span></span></a><span class="mpre"> </span><a name="loc_462_25_462_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_462_25_462_27&#39;)"><span class="hl_vardecl"><span class="mpre">l&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_451_17_451_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_17_451_20&#39;)"><span class="hl_conref"><span class="mpre">Lib</span></span></a><span class="mpre"> (</span><a href="#loc_462_9_462_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_462_9_462_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_462_25_462_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_462_25_462_27&#39;)"><span class="hl_varref"><span class="mpre">l&#39;</span></span></a><span class="mpre">)
    </span><a href="#loc_452_17_452_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_17_452_20&#39;)"><span class="hl_conref"><span class="mpre">Exe</span></span></a><span class="mpre"> </span><a name="loc_463_9_463_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_9_463_10&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_463_11_463_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_11_463_12&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_452_17_452_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_17_452_20&#39;)"><span class="hl_conref"><span class="mpre">Exe</span></span></a><span class="mpre"> </span><a name="loc_463_27_463_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_27_463_29&#39;)"><span class="hl_vardecl"><span class="mpre">n&#39;</span></span></a><span class="mpre"> </span><a name="loc_463_30_463_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_30_463_32&#39;)"><span class="hl_vardecl"><span class="mpre">e&#39;</span></span></a><span class="mpre"> | </span><a href="#loc_463_9_463_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_9_463_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_463_27_463_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_27_463_29&#39;)"><span class="hl_varref"><span class="mpre">n&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_452_17_452_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_17_452_20&#39;)"><span class="hl_conref"><span class="mpre">Exe</span></span></a><span class="mpre"> </span><a href="#loc_463_9_463_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_9_463_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="#loc_463_11_463_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_11_463_12&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_463_30_463_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_463_30_463_32&#39;)"><span class="hl_varref"><span class="mpre">e&#39;</span></span></a><span class="mpre">)
    </span><a href="#loc_453_17_453_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_17_453_21&#39;)"><span class="hl_conref"><span class="mpre">Test</span></span></a><span class="mpre"> </span><a name="loc_464_10_464_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_10_464_11&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_464_12_464_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_12_464_13&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_453_17_453_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_17_453_21&#39;)"><span class="hl_conref"><span class="mpre">Test</span></span></a><span class="mpre"> </span><a name="loc_464_29_464_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_29_464_31&#39;)"><span class="hl_vardecl"><span class="mpre">n&#39;</span></span></a><span class="mpre"> </span><a name="loc_464_32_464_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_32_464_34&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;</span></span></a><span class="mpre"> | </span><a href="#loc_464_10_464_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_10_464_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_464_29_464_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_29_464_31&#39;)"><span class="hl_varref"><span class="mpre">n&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_453_17_453_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_17_453_21&#39;)"><span class="hl_conref"><span class="mpre">Test</span></span></a><span class="mpre"> </span><a href="#loc_464_10_464_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_10_464_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="#loc_464_12_464_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_12_464_13&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_464_32_464_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_32_464_34&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">)
    </span><a href="#loc_454_17_454_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_22&#39;)"><span class="hl_conref"><span class="mpre">Bench</span></span></a><span class="mpre"> </span><a name="loc_465_11_465_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_11_465_12&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_465_13_465_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_13_465_14&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_454_17_454_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_22&#39;)"><span class="hl_conref"><span class="mpre">Bench</span></span></a><span class="mpre"> </span><a name="loc_465_31_465_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_31_465_33&#39;)"><span class="hl_vardecl"><span class="mpre">n&#39;</span></span></a><span class="mpre"> </span><a name="loc_465_34_465_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_34_465_36&#39;)"><span class="hl_vardecl"><span class="mpre">b&#39;</span></span></a><span class="mpre"> | </span><a href="#loc_465_11_465_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_11_465_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_465_31_465_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_31_465_33&#39;)"><span class="hl_varref"><span class="mpre">n&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_454_17_454_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_22&#39;)"><span class="hl_conref"><span class="mpre">Bench</span></span></a><span class="mpre"> </span><a href="#loc_465_11_465_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_11_465_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="#loc_465_13_465_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_13_465_14&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_465_34_465_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_34_465_36&#39;)"><span class="hl_varref"><span class="mpre">b&#39;</span></span></a><span class="mpre">)
    _ </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_fundecl"><span class="mpre">`mappend`</span></span></a><span class="mpre"> _ = </span><a href="Distribution.PackageDescription.Utils.html#loc_21_1_21_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.Utils.html#loc_21_1_21_9&#39;)"><span class="hl_varref"><span class="mpre">cabalBug</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Cannot combine incompatible tags&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Create a package description with all configurations resolved.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function takes a `GenericPackageDescription` and several environment</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- parameters and tries to generate `PackageDescription` by finding a flag</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- assignment that result in satisfiable dependencies.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It takes as inputs a not necessarily complete specifications of flags</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- assignments, an optional package index as well as platform parameters.  If</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- some flags are not assigned explicitly, this function will try to pick an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- assignment that causes this function to succeed.  The package index is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- optional since on some platforms we cannot determine which packages have</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- been installed before.  When no package index is supplied, every dependency</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is assumed to be satisfiable, therefore all not explicitly assigned flags</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- will get their default values.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function will fail if it cannot find a flag assignment that leads to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- satisfiable dependencies.  (It will not try alternative assignments for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- explicitly specified flags.)  In case of failure it will return a /minimum/</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- number of dependencies that could not be satisfied.  On success, it will</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- return the package description and the full flag assignment chosen.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_501_1_501_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_1_501_27&#39;)"><span class="mpre">finalizePackageDescription</span></a><span class="mpre"> ::
     </span><span class="hl_tyconref"><span class="mpre">FlagAssignment</span></span><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^ Explicitly specified flag assignments</span></span><span class="mpre">
  -&gt; (</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) </span><span class="hl_comment"><span class="mpre">-- ^ Is a given depenency satisfiable from the set of available packages?</span></span><span class="mpre">
                          </span><span class="hl_comment"><span class="mpre">-- If this is unknown then use True.</span></span><span class="mpre">
  -&gt; </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="hl_tyconref"><span class="mpre">Platform</span></span></a><span class="mpre">      </span><span class="hl_comment"><span class="mpre">-- ^ The &#39;Arch&#39; and &#39;OS&#39;</span></span><span class="mpre">
  -&gt; </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="hl_tyconref"><span class="mpre">CompilerId</span></span></a><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- ^ Compiler + Version</span></span><span class="mpre">
  -&gt; [</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">]  </span><span class="hl_comment"><span class="mpre">-- ^ Additional constraints</span></span><span class="mpre">
  -&gt; </span><a href="Distribution.PackageDescription.html#loc_940_6_940_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_940_6_940_31&#39;)"><span class="hl_tyconref"><span class="mpre">GenericPackageDescription</span></span></a><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> [</span><a href="Distribution.Package.html#loc_145_6_145_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_145_6_145_16&#39;)"><span class="hl_tyconref"><span class="mpre">Dependency</span></span></a><span class="mpre">]
            (</span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">FlagAssignment</span></span><span class="mpre">)
             </span><span class="hl_comment"><span class="mpre">-- ^ Either missing dependencies or the resolved package</span></span><span class="mpre">
             </span><span class="hl_comment"><span class="mpre">-- description along with the flag assignments chosen.</span></span><span class="mpre">
</span><a name="loc_501_1_501_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_1_501_27&#39;)"><span class="hl_fundecl"><span class="mpre">finalizePackageDescription</span></span></a><span class="mpre"> </span><a name="loc_501_28_501_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_28_501_37&#39;)"><span class="hl_vardecl"><span class="mpre">userflags</span></span></a><span class="mpre"> </span><a name="loc_501_38_501_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_38_501_48&#39;)"><span class="hl_vardecl"><span class="mpre">satisfyDep</span></span></a><span class="mpre"> (</span><a href="Distribution.System.html#loc_164_17_164_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_17_164_25&#39;)"><span class="hl_conref"><span class="mpre">Platform</span></span></a><span class="mpre"> </span><a name="loc_501_59_501_63" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_59_501_63&#39;)"><span class="hl_vardecl"><span class="mpre">arch</span></span></a><span class="mpre"> </span><a name="loc_501_64_501_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_64_501_66&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre">) </span><a name="loc_501_68_501_72" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_68_501_72&#39;)"><span class="hl_vardecl"><span class="mpre">impl</span></span></a><span class="mpre"> </span><a name="loc_501_73_501_84" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_73_501_84&#39;)"><span class="hl_vardecl"><span class="mpre">constraints</span></span></a><span class="mpre">
        (</span><span class="hl_conref"><span class="mpre">GenericPackageDescription</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">pkg</span></span><span class="mpre"> </span><a name="loc_502_40_502_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_40_502_45&#39;)"><span class="hl_vardecl"><span class="mpre">flags</span></span></a><span class="mpre"> </span><a name="loc_502_46_502_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_46_502_51&#39;)"><span class="hl_vardecl"><span class="mpre">mlib0</span></span></a><span class="mpre"> </span><a name="loc_502_52_502_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_52_502_57&#39;)"><span class="hl_vardecl"><span class="mpre">exes0</span></span></a><span class="mpre"> </span><a name="loc_502_58_502_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_58_502_64&#39;)"><span class="hl_vardecl"><span class="mpre">tests0</span></span></a><span class="mpre"> </span><a name="loc_502_65_502_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_65_502_69&#39;)"><span class="hl_vardecl"><span class="mpre">bms0</span></span></a><span class="mpre">) =
    case </span><a href="#loc_525_5_525_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_525_5_525_17&#39;)"><span class="hl_varref"><span class="mpre">resolveFlags</span></span></a><span class="mpre"> of
      </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> ((</span><span class="hl_vardecl"><span class="mpre">mlib</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">exes&#39;</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">tests&#39;</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">bms&#39;</span></span><span class="mpre">), </span><span class="hl_vardecl"><span class="mpre">targetSet</span></span><span class="mpre">, </span><a name="loc_504_54_504_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_504_54_504_62&#39;)"><span class="hl_vardecl"><span class="mpre">flagVals</span></span></a><span class="mpre">) -&gt;
        </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> ( </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 505, srcSpanStartColumn = 17, srcSpanEndLine = 514, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 505, srcSpanStartColumn = 21, srcSpanEndLine = 505, srcSpanEndColumn = 22},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">pkg { library = mlib
                    , executables = exes&#39;
                    , testSuites = tests&#39;
                    , benchmarks = bms&#39;
                    , buildDepends = fromDepMap (overallDependencies targetSet)
                      </span><span class="hl_comment"><span class="mpre">--TODO: we need to find a way to avoid pulling in deps</span></span><span class="mpre">
                      </span><span class="hl_comment"><span class="mpre">-- for non-buildable components. However cannot simply</span></span><span class="mpre">
                      </span><span class="hl_comment"><span class="mpre">-- filter at this stage, since if the package were not</span></span><span class="mpre">
                      </span><span class="hl_comment"><span class="mpre">-- available we would have failed already.</span></span><span class="mpre">
                    }</span></span><span class="mpre">
              , </span><a href="#loc_504_54_504_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_504_54_504_62&#39;)"><span class="hl_varref"><span class="mpre">flagVals</span></span></a><span class="mpre"> )

      </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_517_12_517_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_517_12_517_19&#39;)"><span class="hl_vardecl"><span class="mpre">missing</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a href="#loc_517_12_517_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_517_12_517_19&#39;)"><span class="hl_varref"><span class="mpre">missing</span></span></a><span class="mpre">
  where
    </span><span class="hl_comment"><span class="mpre">-- Combine lib, exes, and tests into one list of @CondTree@s with tagged data</span></span><span class="mpre">
    </span><a name="loc_520_5_520_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_5_520_14&#39;)"><span class="hl_vardecl"><span class="mpre">condTrees</span></span></a><span class="mpre"> = </span><a href="Data.Maybe.html#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_103_1_103_12&#39;)"><span class="hl_varref"><span class="mpre">maybeToList</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="#loc_199_1_199_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_1_199_12&#39;)"><span class="hl_varref"><span class="mpre">mapTreeData</span></span></a><span class="mpre"> </span><a href="#loc_451_17_451_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_17_451_20&#39;)"><span class="hl_conref"><span class="mpre">Lib</span></span></a><span class="mpre">) </span><a href="#loc_502_46_502_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_46_502_51&#39;)"><span class="hl_varref"><span class="mpre">mlib0</span></span></a><span class="mpre"> )
                </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (\(</span><a name="loc_521_27_521_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_27_521_31&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre">,</span><a name="loc_521_32_521_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_32_521_36&#39;)"><span class="hl_vardecl"><span class="mpre">tree</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_199_1_199_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_1_199_12&#39;)"><span class="hl_varref"><span class="mpre">mapTreeData</span></span></a><span class="mpre"> (</span><a href="#loc_452_17_452_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_17_452_20&#39;)"><span class="hl_conref"><span class="mpre">Exe</span></span></a><span class="mpre"> </span><a href="#loc_521_27_521_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_27_521_31&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre">) </span><a href="#loc_521_32_521_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_32_521_36&#39;)"><span class="hl_varref"><span class="mpre">tree</span></span></a><span class="mpre">) </span><a href="#loc_502_52_502_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_52_502_57&#39;)"><span class="hl_varref"><span class="mpre">exes0</span></span></a><span class="mpre">
                </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (\(</span><a name="loc_522_27_522_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_27_522_31&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre">,</span><a name="loc_522_32_522_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_32_522_36&#39;)"><span class="hl_vardecl"><span class="mpre">tree</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_199_1_199_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_1_199_12&#39;)"><span class="hl_varref"><span class="mpre">mapTreeData</span></span></a><span class="mpre"> (</span><a href="#loc_453_17_453_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_17_453_21&#39;)"><span class="hl_conref"><span class="mpre">Test</span></span></a><span class="mpre"> </span><a href="#loc_522_27_522_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_27_522_31&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre">) </span><a href="#loc_522_32_522_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_32_522_36&#39;)"><span class="hl_varref"><span class="mpre">tree</span></span></a><span class="mpre">) </span><a href="#loc_502_58_502_64" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_58_502_64&#39;)"><span class="hl_varref"><span class="mpre">tests0</span></span></a><span class="mpre">
                </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (\(</span><a name="loc_523_27_523_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_27_523_31&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre">,</span><a name="loc_523_32_523_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_32_523_36&#39;)"><span class="hl_vardecl"><span class="mpre">tree</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_199_1_199_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_1_199_12&#39;)"><span class="hl_varref"><span class="mpre">mapTreeData</span></span></a><span class="mpre"> (</span><a href="#loc_454_17_454_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_22&#39;)"><span class="hl_conref"><span class="mpre">Bench</span></span></a><span class="mpre"> </span><a href="#loc_523_27_523_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_27_523_31&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre">) </span><a href="#loc_523_32_523_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_32_523_36&#39;)"><span class="hl_varref"><span class="mpre">tree</span></span></a><span class="mpre">) </span><a href="#loc_502_65_502_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_65_502_69&#39;)"><span class="hl_varref"><span class="mpre">bms0</span></span></a><span class="mpre">

    </span><a name="loc_525_5_525_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_525_5_525_17&#39;)"><span class="hl_vardecl"><span class="mpre">resolveFlags</span></span></a><span class="mpre"> =
        case </span><a href="#loc_247_1_247_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_1_247_17&#39;)"><span class="hl_varref"><span class="mpre">resolveWithFlags</span></span></a><span class="mpre"> </span><a href="#loc_536_5_536_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_5_536_16&#39;)"><span class="hl_varref"><span class="mpre">flagChoices</span></span></a><span class="mpre"> </span><a href="#loc_501_64_501_66" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_64_501_66&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre"> </span><a href="#loc_501_59_501_63" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_59_501_63&#39;)"><span class="hl_varref"><span class="mpre">arch</span></span></a><span class="mpre"> </span><a href="#loc_501_68_501_72" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_68_501_72&#39;)"><span class="hl_varref"><span class="mpre">impl</span></span></a><span class="mpre"> </span><a href="#loc_501_73_501_84" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_73_501_84&#39;)"><span class="hl_varref"><span class="mpre">constraints</span></span></a><span class="mpre"> </span><a href="#loc_520_5_520_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_520_5_520_14&#39;)"><span class="hl_varref"><span class="mpre">condTrees</span></span></a><span class="mpre"> </span><a href="#loc_543_5_543_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_543_5_543_10&#39;)"><span class="hl_varref"><span class="mpre">check</span></span></a><span class="mpre"> of
          </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_527_18_527_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_18_527_27&#39;)"><span class="hl_vardecl"><span class="mpre">targetSet</span></span></a><span class="mpre">, </span><a name="loc_527_29_527_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_29_527_31&#39;)"><span class="hl_vardecl"><span class="mpre">fs</span></span></a><span class="mpre">) -&gt;
              let (</span><a name="loc_528_20_528_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_20_528_24&#39;)"><span class="hl_vardecl"><span class="mpre">mlib</span></span></a><span class="mpre">, </span><a name="loc_528_26_528_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_26_528_30&#39;)"><span class="hl_vardecl"><span class="mpre">exes</span></span></a><span class="mpre">, </span><a name="loc_528_32_528_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_32_528_37&#39;)"><span class="hl_vardecl"><span class="mpre">tests</span></span></a><span class="mpre">, </span><a name="loc_528_39_528_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_39_528_42&#39;)"><span class="hl_vardecl"><span class="mpre">bms</span></span></a><span class="mpre">) = </span><a href="#loc_397_1_397_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_1_397_21&#39;)"><span class="hl_varref"><span class="mpre">flattenTaggedTargets</span></span></a><span class="mpre"> </span><a href="#loc_527_18_527_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_18_527_27&#39;)"><span class="hl_varref"><span class="mpre">targetSet</span></span></a><span class="mpre"> in
              </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> ( (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_604_1_604_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_1_604_18&#39;)"><span class="hl_varref"><span class="mpre">libFillInDefaults</span></span></a><span class="mpre"> </span><a href="#loc_528_20_528_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_20_528_24&#39;)"><span class="hl_varref"><span class="mpre">mlib</span></span></a><span class="mpre">,
                       </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (\(</span><span class="hl_vardecl"><span class="mpre">n</span></span><span class="mpre">,</span><span class="hl_vardecl"><span class="mpre">e</span></span><span class="mpre">) -&gt; </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 530, srcSpanStartColumn = 39, srcSpanEndLine = 530, srcSpanEndColumn = 76}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 530, srcSpanStartColumn = 61, srcSpanEndLine = 530, srcSpanEndColumn = 62},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">(exeFillInDefaults e) { exeName = n }</span></span><span class="mpre">) </span><a href="#loc_528_26_528_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_26_528_30&#39;)"><span class="hl_varref"><span class="mpre">exes</span></span></a><span class="mpre">,
                       </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (\(</span><span class="hl_vardecl"><span class="mpre">n</span></span><span class="mpre">,</span><span class="hl_vardecl"><span class="mpre">t</span></span><span class="mpre">) -&gt; </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 531, srcSpanStartColumn = 39, srcSpanEndLine = 531, srcSpanEndColumn = 78}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 531, srcSpanStartColumn = 62, srcSpanEndLine = 531, srcSpanEndColumn = 63},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">(testFillInDefaults t) { testName = n }</span></span><span class="mpre">) </span><a href="#loc_528_32_528_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_32_528_37&#39;)"><span class="hl_varref"><span class="mpre">tests</span></span></a><span class="mpre">,
                       </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (\(</span><span class="hl_vardecl"><span class="mpre">n</span></span><span class="mpre">,</span><span class="hl_vardecl"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 532, srcSpanStartColumn = 39, srcSpanEndLine = 532, srcSpanEndColumn = 84}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 532, srcSpanStartColumn = 63, srcSpanEndLine = 532, srcSpanEndColumn = 64},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">(benchFillInDefaults b) { benchmarkName = n }</span></span><span class="mpre">) </span><a href="#loc_528_39_528_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_39_528_42&#39;)"><span class="hl_varref"><span class="mpre">bms</span></span></a><span class="mpre">),
                     </span><a href="#loc_527_18_527_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_18_527_27&#39;)"><span class="hl_varref"><span class="mpre">targetSet</span></span></a><span class="mpre">, </span><a href="#loc_527_29_527_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_29_527_31&#39;)"><span class="hl_varref"><span class="mpre">fs</span></span></a><span class="mpre">)
          </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_534_16_534_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_16_534_23&#39;)"><span class="hl_vardecl"><span class="mpre">missing</span></span></a><span class="mpre">      -&gt; </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a href="#loc_534_16_534_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_16_534_23&#39;)"><span class="hl_varref"><span class="mpre">missing</span></span></a><span class="mpre">

    </span><a name="loc_536_5_536_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_5_536_16&#39;)"><span class="hl_vardecl"><span class="mpre">flagChoices</span></span></a><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (\(</span><span class="hl_conref"><span class="mpre">MkFlag</span></span><span class="mpre"> </span><a name="loc_536_36_536_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_36_536_37&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> _ </span><a name="loc_536_40_536_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_40_536_41&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> </span><a name="loc_536_42_536_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_42_536_48&#39;)"><span class="hl_vardecl"><span class="mpre">manual</span></span></a><span class="mpre">) -&gt; (</span><a href="#loc_536_36_536_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_36_536_37&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">, </span><a href="#loc_537_5_537_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_5_537_8&#39;)"><span class="hl_varref"><span class="mpre">d2c</span></span></a><span class="mpre"> </span><a href="#loc_536_42_536_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_42_536_48&#39;)"><span class="hl_varref"><span class="mpre">manual</span></span></a><span class="mpre"> </span><a href="#loc_536_36_536_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_36_536_37&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_536_40_536_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_40_536_41&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">)) </span><a href="#loc_502_40_502_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_502_40_502_45&#39;)"><span class="hl_varref"><span class="mpre">flags</span></span></a><span class="mpre">
    </span><a name="loc_537_5_537_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_5_537_8&#39;)"><span class="hl_fundecl"><span class="mpre">d2c</span></span></a><span class="mpre"> </span><a name="loc_537_9_537_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_9_537_15&#39;)"><span class="hl_vardecl"><span class="mpre">manual</span></span></a><span class="mpre"> </span><a name="loc_537_16_537_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_16_537_17&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_537_18_537_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_18_537_19&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = case </span><span class="hl_varref"><span class="mpre">lookup</span></span><span class="mpre"> </span><a href="#loc_537_16_537_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_16_537_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_501_28_501_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_28_501_37&#39;)"><span class="hl_varref"><span class="mpre">userflags</span></span></a><span class="mpre"> of
                     </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_538_27_538_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_538_27_538_30&#39;)"><span class="hl_vardecl"><span class="mpre">val</span></span></a><span class="mpre"> -&gt; [</span><a href="#loc_538_27_538_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_538_27_538_30&#39;)"><span class="hl_varref"><span class="mpre">val</span></span></a><span class="mpre">]
                     </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
                      | </span><a href="#loc_537_9_537_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_9_537_15&#39;)"><span class="hl_varref"><span class="mpre">manual</span></span></a><span class="mpre"> -&gt; [</span><a href="#loc_537_18_537_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_18_537_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">]
                      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; [</span><a href="#loc_537_18_537_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_18_537_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">, </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><a href="#loc_537_18_537_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_537_18_537_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">]
    </span><span class="hl_comment"><span class="mpre">--flagDefaults = map (\(n,x:_) -&gt; (n,x)) flagChoices</span></span><span class="mpre">
    </span><a name="loc_543_5_543_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_543_5_543_10&#39;)"><span class="hl_fundecl"><span class="mpre">check</span></span></a><span class="mpre"> </span><a name="loc_543_11_543_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_543_11_543_13&#39;)"><span class="hl_vardecl"><span class="mpre">ds</span></span></a><span class="mpre">     = if </span><span class="hl_varref"><span class="mpre">all</span></span><span class="mpre"> </span><a href="#loc_501_38_501_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_38_501_48&#39;)"><span class="hl_varref"><span class="mpre">satisfyDep</span></span></a><span class="mpre"> </span><a href="#loc_543_11_543_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_543_11_543_13&#39;)"><span class="hl_varref"><span class="mpre">ds</span></span></a><span class="mpre">
                   then </span><a href="#loc_203_22_203_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_22_203_27&#39;)"><span class="hl_conref"><span class="mpre">DepOk</span></span></a><span class="mpre">
                   else </span><a href="#loc_203_30_203_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_203_30_203_41&#39;)"><span class="hl_conref"><span class="mpre">MissingDeps</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_501_38_501_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_38_501_48&#39;)"><span class="hl_varref"><span class="mpre">satisfyDep</span></span></a><span class="mpre">) </span><a href="#loc_543_11_543_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_543_11_543_13&#39;)"><span class="hl_varref"><span class="mpre">ds</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-
let tst_p = (CondNode [1::Int] [Distribution.Package.Dependency &quot;a&quot; AnyVersion] [])
let tst_p2 = (CondNode [1::Int] [Distribution.Package.Dependency &quot;a&quot; (EarlierVersion (Version [1,0] [])), Distribution.Package.Dependency &quot;a&quot; (LaterVersion (Version [2,0] []))] [])

let p_index = Distribution.Simple.PackageIndex.fromList [Distribution.Package.PackageIdentifier &quot;a&quot; (Version [0,5] []), Distribution.Package.PackageIdentifier &quot;a&quot; (Version [2,5] [])]
let look = not . null . Distribution.Simple.PackageIndex.lookupDependency p_index
let looks ds = mconcat $ map (\d -&gt; if look d then DepOk else MissingDeps [d]) ds
resolveWithFlags [] Distribution.System.Linux Distribution.System.I386 (Distribution.Compiler.GHC,Version [6,8,2] []) [tst_p] looks   ===&gt;  Right ...
resolveWithFlags [] Distribution.System.Linux Distribution.System.I386 (Distribution.Compiler.GHC,Version [6,8,2] []) [tst_p2] looks  ===&gt;  Left ...
-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Flatten a generic package description by ignoring all conditions and just</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- join the field descriptors into on package description.  Note, however,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that this may lead to inconsistent field values, since all values are</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- joined into one field, which may not be possible in the original package</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- description, due to the use of exclusive choices (if ... else ...).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- TODO: One particularly tricky case is defaulting.  In the original package</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- description, e.g., the source directory might either be the default or a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- certain, explicitly set path.  Since defaults are filled in only after the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- package has been resolved and when no explicit value has been set, the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- default path will be missing from the package description returned by this</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- function.</span></span><span class="mpre">
</span><a href="#loc_571_1_571_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_1_571_26&#39;)"><span class="mpre">flattenPackageDescription</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_940_6_940_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_940_6_940_31&#39;)"><span class="hl_tyconref"><span class="mpre">GenericPackageDescription</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
</span><a name="loc_571_1_571_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_1_571_26&#39;)"><span class="hl_fundecl"><span class="mpre">flattenPackageDescription</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">GenericPackageDescription</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">pkg</span></span><span class="mpre"> _ </span><a name="loc_571_60_571_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_60_571_65&#39;)"><span class="hl_vardecl"><span class="mpre">mlib0</span></span></a><span class="mpre"> </span><a name="loc_571_66_571_71" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_66_571_71&#39;)"><span class="hl_vardecl"><span class="mpre">exes0</span></span></a><span class="mpre"> </span><a name="loc_571_72_571_78" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_72_571_78&#39;)"><span class="hl_vardecl"><span class="mpre">tests0</span></span></a><span class="mpre"> </span><a name="loc_571_79_571_83" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_79_571_83&#39;)"><span class="hl_vardecl"><span class="mpre">bms0</span></span></a><span class="mpre">) =
    </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 572, srcSpanStartColumn = 5, srcSpanEndLine = 577, srcSpanEndColumn = 10}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 572, srcSpanStartColumn = 9, srcSpanEndLine = 572, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem"><span class="mpre">pkg { library = mlib
        , executables = reverse exes
        , testSuites = reverse tests
        , benchmarks = reverse bms
        , buildDepends = ldeps ++ reverse edeps ++ reverse tdeps ++ reverse bdeps
        }</span></span><span class="mpre">
  where
    (</span><span class="hl_vardecl"><span class="mpre">mlib</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">ldeps</span></span><span class="mpre">) = case </span><a href="#loc_571_60_571_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_60_571_65&#39;)"><span class="hl_varref"><span class="mpre">mlib0</span></span></a><span class="mpre"> of
        </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_580_14_580_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_580_14_580_17&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> -&gt; let (</span><a name="loc_580_26_580_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_580_26_580_27&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">,</span><a name="loc_580_28_580_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_580_28_580_30&#39;)"><span class="hl_vardecl"><span class="mpre">ds</span></span></a><span class="mpre">) = </span><a href="#loc_341_1_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_17&#39;)"><span class="hl_varref"><span class="mpre">ignoreConditions</span></span></a><span class="mpre"> </span><a href="#loc_580_14_580_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_580_14_580_17&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> in
                    (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_604_1_604_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_1_604_18&#39;)"><span class="hl_varref"><span class="mpre">libFillInDefaults</span></span></a><span class="mpre"> </span><a href="#loc_580_26_580_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_580_26_580_27&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">), </span><a href="#loc_580_28_580_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_580_28_580_30&#39;)"><span class="hl_varref"><span class="mpre">ds</span></span></a><span class="mpre">)
        </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; (</span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">, [])
    (</span><span class="hl_vardecl"><span class="mpre">exes</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">edeps</span></span><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">foldr</span></span><span class="mpre"> </span><a href="#loc_586_5_586_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_586_5_586_15&#39;)"><span class="hl_varref"><span class="mpre">flattenExe</span></span></a><span class="mpre"> ([],[]) </span><a href="#loc_571_66_571_71" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_66_571_71&#39;)"><span class="hl_varref"><span class="mpre">exes0</span></span></a><span class="mpre">
    (</span><span class="hl_vardecl"><span class="mpre">tests</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">tdeps</span></span><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">foldr</span></span><span class="mpre"> </span><a href="#loc_589_5_589_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_5_589_15&#39;)"><span class="hl_varref"><span class="mpre">flattenTst</span></span></a><span class="mpre"> ([],[]) </span><a href="#loc_571_72_571_78" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_72_571_78&#39;)"><span class="hl_varref"><span class="mpre">tests0</span></span></a><span class="mpre">
    (</span><span class="hl_vardecl"><span class="mpre">bms</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">bdeps</span></span><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">foldr</span></span><span class="mpre"> </span><a href="#loc_592_5_592_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_5_592_14&#39;)"><span class="hl_varref"><span class="mpre">flattenBm</span></span></a><span class="mpre"> ([],[]) </span><a href="#loc_571_79_571_83" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_79_571_83&#39;)"><span class="hl_varref"><span class="mpre">bms0</span></span></a><span class="mpre">
    </span><a name="loc_586_5_586_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_586_5_586_15&#39;)"><span class="hl_fundecl"><span class="mpre">flattenExe</span></span></a><span class="mpre"> (</span><span class="hl_vardecl"><span class="mpre">n</span></span><span class="mpre">, </span><a name="loc_586_20_586_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_586_20_586_21&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">) (</span><a name="loc_586_24_586_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_586_24_586_26&#39;)"><span class="hl_vardecl"><span class="mpre">es</span></span></a><span class="mpre">, </span><a name="loc_586_28_586_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_586_28_586_30&#39;)"><span class="hl_vardecl"><span class="mpre">ds</span></span></a><span class="mpre">) =
        let (</span><span class="hl_vardecl"><span class="mpre">e</span></span><span class="mpre">, </span><a name="loc_587_17_587_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_587_17_587_20&#39;)"><span class="hl_vardecl"><span class="mpre">ds&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_341_1_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_17&#39;)"><span class="hl_varref"><span class="mpre">ignoreConditions</span></span></a><span class="mpre"> </span><a href="#loc_586_20_586_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_586_20_586_21&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> in
        ( (</span><a href="#loc_608_1_608_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_1_608_18&#39;)"><span class="hl_varref"><span class="mpre">exeFillInDefaults</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 588, srcSpanStartColumn = 32, srcSpanEndLine = 588, srcSpanEndColumn = 49}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 588, srcSpanStartColumn = 34, srcSpanEndLine = 588, srcSpanEndColumn = 35},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">e { exeName = n }</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_586_24_586_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_586_24_586_26&#39;)"><span class="hl_varref"><span class="mpre">es</span></span></a><span class="mpre">, </span><a href="#loc_587_17_587_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_587_17_587_20&#39;)"><span class="hl_varref"><span class="mpre">ds&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_586_28_586_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_586_28_586_30&#39;)"><span class="hl_varref"><span class="mpre">ds</span></span></a><span class="mpre"> )
    </span><a name="loc_589_5_589_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_5_589_15&#39;)"><span class="hl_fundecl"><span class="mpre">flattenTst</span></span></a><span class="mpre"> (</span><span class="hl_vardecl"><span class="mpre">n</span></span><span class="mpre">, </span><a name="loc_589_20_589_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_20_589_21&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">) (</span><a name="loc_589_24_589_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_24_589_26&#39;)"><span class="hl_vardecl"><span class="mpre">es</span></span></a><span class="mpre">, </span><a name="loc_589_28_589_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_28_589_30&#39;)"><span class="hl_vardecl"><span class="mpre">ds</span></span></a><span class="mpre">) =
        let (</span><span class="hl_vardecl"><span class="mpre">e</span></span><span class="mpre">, </span><a name="loc_590_17_590_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_590_17_590_20&#39;)"><span class="hl_vardecl"><span class="mpre">ds&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_341_1_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_17&#39;)"><span class="hl_varref"><span class="mpre">ignoreConditions</span></span></a><span class="mpre"> </span><a href="#loc_589_20_589_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_20_589_21&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> in
        ( (</span><a href="#loc_612_1_612_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_612_1_612_19&#39;)"><span class="hl_varref"><span class="mpre">testFillInDefaults</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 591, srcSpanStartColumn = 33, srcSpanEndLine = 591, srcSpanEndColumn = 51}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 591, srcSpanStartColumn = 35, srcSpanEndLine = 591, srcSpanEndColumn = 36},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">e { testName = n }</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_589_24_589_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_24_589_26&#39;)"><span class="hl_varref"><span class="mpre">es</span></span></a><span class="mpre">, </span><a href="#loc_590_17_590_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_590_17_590_20&#39;)"><span class="hl_varref"><span class="mpre">ds&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_589_28_589_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_28_589_30&#39;)"><span class="hl_varref"><span class="mpre">ds</span></span></a><span class="mpre"> )
    </span><a name="loc_592_5_592_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_5_592_14&#39;)"><span class="hl_fundecl"><span class="mpre">flattenBm</span></span></a><span class="mpre"> (</span><span class="hl_vardecl"><span class="mpre">n</span></span><span class="mpre">, </span><a name="loc_592_19_592_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_19_592_20&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">) (</span><a name="loc_592_23_592_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_23_592_25&#39;)"><span class="hl_vardecl"><span class="mpre">es</span></span></a><span class="mpre">, </span><a name="loc_592_27_592_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_27_592_29&#39;)"><span class="hl_vardecl"><span class="mpre">ds</span></span></a><span class="mpre">) =
        let (</span><span class="hl_vardecl"><span class="mpre">e</span></span><span class="mpre">, </span><a name="loc_593_17_593_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_593_17_593_20&#39;)"><span class="hl_vardecl"><span class="mpre">ds&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_341_1_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_17&#39;)"><span class="hl_varref"><span class="mpre">ignoreConditions</span></span></a><span class="mpre"> </span><a href="#loc_592_19_592_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_19_592_20&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> in
        ( (</span><a href="#loc_616_1_616_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_616_1_616_20&#39;)"><span class="hl_varref"><span class="mpre">benchFillInDefaults</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 594, srcSpanStartColumn = 34, srcSpanEndLine = 594, srcSpanEndColumn = 57}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 594, srcSpanStartColumn = 36, srcSpanEndLine = 594, srcSpanEndColumn = 37},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">e { benchmarkName = n }</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_592_23_592_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_23_592_25&#39;)"><span class="hl_varref"><span class="mpre">es</span></span></a><span class="mpre">, </span><a href="#loc_593_17_593_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_593_17_593_20&#39;)"><span class="hl_varref"><span class="mpre">ds&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_592_27_592_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_27_592_29&#39;)"><span class="hl_varref"><span class="mpre">ds</span></span></a><span class="mpre"> )

</span><span class="hl_comment"><span class="mpre">-- This is in fact rather a hack.  The original version just overrode the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- default values, however, when adding conditions we had to switch to a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- modifier-based approach.  There, nothing is ever overwritten, but only</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- joined together.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is the cleanest way i could think of, that doesn&#39;t require</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- changing all field parsing functions to return modifiers instead.</span></span><span class="mpre">
</span><a href="#loc_604_1_604_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_1_604_18&#39;)"><span class="mpre">libFillInDefaults</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">
</span><a name="loc_604_1_604_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_1_604_18&#39;)"><span class="hl_fundecl"><span class="mpre">libFillInDefaults</span></span></a><span class="mpre"> </span><span class="hl_specname"><span class="mpre">lib</span></span><span class="mpre">@(</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 604, srcSpanStartColumn = 24, srcSpanEndLine = 604, srcSpanEndColumn = 53}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 604, srcSpanStartColumn = 32, srcSpanEndLine = 604, srcSpanEndColumn = 33},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pu"><span class="mpre">Library { libBuildInfo = bi }</span></span><span class="mpre">) =
    </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 605, srcSpanStartColumn = 5, srcSpanEndLine = 605, srcSpanEndColumn = 47}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 605, srcSpanStartColumn = 9, srcSpanEndLine = 605, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem"><span class="mpre">lib { libBuildInfo = biFillInDefaults bi }</span></span><span class="mpre">

</span><a href="#loc_608_1_608_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_1_608_18&#39;)"><span class="mpre">exeFillInDefaults</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="hl_tyconref"><span class="mpre">Executable</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="hl_tyconref"><span class="mpre">Executable</span></span></a><span class="mpre">
</span><a name="loc_608_1_608_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_1_608_18&#39;)"><span class="hl_fundecl"><span class="mpre">exeFillInDefaults</span></span></a><span class="mpre"> </span><span class="hl_specname"><span class="mpre">exe</span></span><span class="mpre">@(</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 608, srcSpanStartColumn = 24, srcSpanEndLine = 608, srcSpanEndColumn = 53}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 608, srcSpanStartColumn = 35, srcSpanEndLine = 608, srcSpanEndColumn = 36},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pu"><span class="mpre">Executable { buildInfo = bi }</span></span><span class="mpre">) =
    </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 609, srcSpanStartColumn = 5, srcSpanEndLine = 609, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 609, srcSpanStartColumn = 9, srcSpanEndLine = 609, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem"><span class="mpre">exe { buildInfo = biFillInDefaults bi }</span></span><span class="mpre">

</span><a href="#loc_612_1_612_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_612_1_612_19&#39;)"><span class="mpre">testFillInDefaults</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_395_6_395_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_395_6_395_15&#39;)"><span class="hl_tyconref"><span class="mpre">TestSuite</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_395_6_395_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_395_6_395_15&#39;)"><span class="hl_tyconref"><span class="mpre">TestSuite</span></span></a><span class="mpre">
</span><a name="loc_612_1_612_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_612_1_612_19&#39;)"><span class="hl_fundecl"><span class="mpre">testFillInDefaults</span></span></a><span class="mpre"> </span><span class="hl_specname"><span class="mpre">tst</span></span><span class="mpre">@(</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 612, srcSpanStartColumn = 25, srcSpanEndLine = 612, srcSpanEndColumn = 57}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 612, srcSpanStartColumn = 35, srcSpanEndLine = 612, srcSpanEndColumn = 36},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pu"><span class="mpre">TestSuite { testBuildInfo = bi }</span></span><span class="mpre">) =
    </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 613, srcSpanStartColumn = 5, srcSpanEndLine = 613, srcSpanEndColumn = 48}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 613, srcSpanStartColumn = 9, srcSpanEndLine = 613, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem"><span class="mpre">tst { testBuildInfo = biFillInDefaults bi }</span></span><span class="mpre">

</span><a href="#loc_616_1_616_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_616_1_616_20&#39;)"><span class="mpre">benchFillInDefaults</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_530_6_530_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_530_6_530_15&#39;)"><span class="hl_tyconref"><span class="mpre">Benchmark</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_530_6_530_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_530_6_530_15&#39;)"><span class="hl_tyconref"><span class="mpre">Benchmark</span></span></a><span class="mpre">
</span><a name="loc_616_1_616_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_616_1_616_20&#39;)"><span class="hl_fundecl"><span class="mpre">benchFillInDefaults</span></span></a><span class="mpre"> </span><span class="hl_specname"><span class="mpre">bm</span></span><span class="mpre">@(</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 616, srcSpanStartColumn = 25, srcSpanEndLine = 616, srcSpanEndColumn = 62}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 616, srcSpanStartColumn = 35, srcSpanEndLine = 616, srcSpanEndColumn = 36},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pu"><span class="mpre">Benchmark { benchmarkBuildInfo = bi }</span></span><span class="mpre">) =
    </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 617, srcSpanStartColumn = 5, srcSpanEndLine = 617, srcSpanEndColumn = 52}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 617, srcSpanStartColumn = 8, srcSpanEndLine = 617, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/"><span class="mpre">bm { benchmarkBuildInfo = biFillInDefaults bi }</span></span><span class="mpre">

</span><a href="#loc_620_1_620_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_1_620_17&#39;)"><span class="mpre">biFillInDefaults</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="hl_tyconref"><span class="mpre">BuildInfo</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="hl_tyconref"><span class="mpre">BuildInfo</span></span></a><span class="mpre">
</span><a name="loc_620_1_620_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_1_620_17&#39;)"><span class="hl_fundecl"><span class="mpre">biFillInDefaults</span></span></a><span class="mpre"> </span><a name="loc_620_18_620_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_18_620_20&#39;)"><span class="hl_vardecl"><span class="mpre">bi</span></span></a><span class="mpre"> =
    if </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_645_9_645_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_645_9_645_21&#39;)"><span class="hl_varref"><span class="mpre">hsSourceDirs</span></span></a><span class="mpre"> </span><a href="#loc_620_18_620_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_18_620_20&#39;)"><span class="hl_varref"><span class="mpre">bi</span></span></a><span class="mpre">)
    then </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 622, srcSpanStartColumn = 10, srcSpanEndLine = 622, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/PackageDescription/Configuration.hs&quot;, srcSpanStartLine = 622, srcSpanStartColumn = 13, srcSpanEndLine = 622, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">bi { hsSourceDirs = [currentDir] }</span></span><span class="mpre">
    else </span><a href="#loc_620_18_620_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_18_620_20&#39;)"><span class="hl_varref"><span class="mpre">bi</span></span></a><span class="mpre">
</span></div></body></html>