<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- (c) 1999 by Martin Erwig</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | Threading Combinators.</span></span><span class="mpre">
module Data.Graph.Inductive.Internal.Thread(
    </span><span class="hl_comment"><span class="mpre">-- * Types</span></span><span class="mpre">
    Split, SplitM, Thread, Collect,
    </span><span class="hl_comment"><span class="mpre">-- * Operations</span></span><span class="mpre">
    threadList&#39;, threadList, threadMaybe&#39;, threadMaybe, splitPar, splitParM
) where

</span><span class="hl_comment"><span class="mpre">-- import Graph</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- import GraphData</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- import qualified Diet as D</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- import ADT</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- CLASSES AND TYPES</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-
class Thread t a b where
  split :: a -&gt; t -&gt; (b,t)
  
  
instance Thread (Graph a b) Node (MContext a b) where
  split = match
  
instance D.Discrete a =&gt; Thread (D.Diet a) a a where
  split x s = (x,D.delete x s)
-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-
   Make clear different notions:
   
   &quot;thread&quot; = data structure + split operation
   ...      = threadable data structure
   ...      = split operation
   
-}</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- THREAD COMBINATORS</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- (A) split along a list of indexes and thread data structure</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- there are different ways to consume the returned elements:</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-
--  (1) simple collect in a list
-- 
foldT1&#39; ys []     d = ys
foldT1&#39; ys (x:xs) d = foldT1&#39; (y:ys) xs d&#39;  where (y,d&#39;) = split x d
foldT1 xs d = foldT1&#39; [] xs d

--  (2) combine by a function
-- 
foldT2&#39; f ys []     d = ys
foldT2&#39; f ys (x:xs) d = foldT2&#39; f (f y ys) xs d&#39;  where (y,d&#39;) = split x d
foldT2 f u xs d = foldT2&#39; f u xs d
-}</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- Mnemonics:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  t : thread type</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  i : index type</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  r : result type</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  c : collection type</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/Inductive/Internal/Thread.hs&quot;, srcSpanStartLine = 73, srcSpanStartColumn = 1, srcSpanEndLine = 73, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/Inductive/Internal/Thread.hs&quot;, srcSpanStartLine = 73, srcSpanStartColumn = 1, srcSpanEndLine = 73, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/I"><span class="mpre">type Split t i r  = i -&gt; t -&gt; (r,t)</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/Inductive/Internal/Thread.hs&quot;, srcSpanStartLine = 74, srcSpanStartColumn = 1, srcSpanEndLine = 74, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/Inductive/Internal/Thread.hs&quot;, srcSpanStartLine = 74, srcSpanStartColumn = 1, srcSpanEndLine = 74, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/I"><span class="mpre">type Thread t i r = (t,Split t i r)</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/Inductive/Internal/Thread.hs&quot;, srcSpanStartLine = 75, srcSpanStartColumn = 1, srcSpanEndLine = 75, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/Inductive/Internal/Thread.hs&quot;, srcSpanStartLine = 75, srcSpanStartColumn = 1, srcSpanEndLine = 75, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/I"><span class="mpre">type Collect r c  = (r -&gt; c -&gt; c,c)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">--  (3) abstract from split</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><a href="#loc_80_1_80_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_1_80_12&#39;)"><span class="mpre">threadList&#39;</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Collect</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; [</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">] -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">)
</span><a name="loc_80_1_80_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_1_80_12&#39;)"><span class="hl_fundecl"><span class="mpre">threadList&#39;</span></span></a><span class="mpre"> (_,</span><a name="loc_80_16_80_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_16_80_17&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">) _ []               </span><a name="loc_80_38_80_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_38_80_39&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = (</span><a href="#loc_80_16_80_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_16_80_17&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">,</span><a href="#loc_80_38_80_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_38_80_39&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><a href="#loc_80_1_80_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_1_80_12&#39;)"><span class="hl_fundecl"><span class="mpre">threadList&#39;</span></span></a><span class="mpre"> (</span><a name="loc_81_14_81_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_14_81_15&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">,</span><a name="loc_81_16_81_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_16_81_17&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">) </span><a name="loc_81_19_81_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_19_81_24&#39;)"><span class="hl_vardecl"><span class="mpre">split</span></span></a><span class="mpre"> (</span><a name="loc_81_26_81_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_26_81_27&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_81_28_81_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_28_81_30&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">) </span><a name="loc_81_32_81_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_32_81_33&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="#loc_80_1_80_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_1_80_12&#39;)"><span class="hl_varref"><span class="mpre">threadList&#39;</span></span></a><span class="mpre"> (</span><a href="#loc_81_14_81_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_14_81_15&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">,</span><a href="#loc_81_14_81_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_14_81_15&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_82_43_82_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_43_82_44&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><a href="#loc_81_16_81_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_16_81_17&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) </span><a href="#loc_81_19_81_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_19_81_24&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> </span><a href="#loc_81_28_81_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_28_81_30&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><a href="#loc_82_45_82_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_45_82_47&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">
                                   where (</span><a name="loc_82_43_82_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_43_82_44&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">,</span><a name="loc_82_45_82_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_45_82_47&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_81_19_81_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_19_81_24&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> </span><a href="#loc_81_26_81_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_26_81_27&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_81_32_81_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_32_81_33&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-  
   Note: threadList&#39; works top-down (or, from left),
         whereas dfs,gfold,... have been defined bottom-up (or from right).
 
   ==&gt; therefore, we define a correpsonding operator for folding
       bottom-up/from right.
-}</span></span><span class="mpre">
</span><a href="#loc_92_1_92_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_11&#39;)"><span class="mpre">threadList</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">Collect</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; [</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">] -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">)
</span><a name="loc_92_1_92_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_11&#39;)"><span class="hl_fundecl"><span class="mpre">threadList</span></span></a><span class="mpre"> (_,</span><a name="loc_92_15_92_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_15_92_16&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">) _ []     </span><a name="loc_92_27_92_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_27_92_28&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">        = (</span><a href="#loc_92_15_92_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_15_92_16&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">,</span><a href="#loc_92_27_92_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_27_92_28&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
</span><a href="#loc_92_1_92_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_11&#39;)"><span class="hl_fundecl"><span class="mpre">threadList</span></span></a><span class="mpre"> (</span><a name="loc_93_13_93_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">,</span><a name="loc_93_15_93_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_15_93_16&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">) </span><a name="loc_93_18_93_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_18_93_23&#39;)"><span class="hl_vardecl"><span class="mpre">split</span></span></a><span class="mpre"> (</span><a name="loc_93_25_93_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_25_93_26&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_93_27_93_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_27_93_29&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">) </span><a name="loc_93_31_93_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_31_93_32&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = (</span><a href="#loc_93_13_93_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_94_42_94_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_42_94_43&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><a href="#loc_95_42_95_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_42_95_44&#39;)"><span class="hl_varref"><span class="mpre">c&#39;</span></span></a><span class="mpre">,</span><a href="#loc_95_45_95_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_45_95_48&#39;)"><span class="hl_varref"><span class="mpre">t&#39;&#39;</span></span></a><span class="mpre">)
                                  where (</span><a name="loc_94_42_94_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_42_94_43&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">,</span><a name="loc_94_44_94_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_44_94_46&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;</span></span></a><span class="mpre">)   = </span><a href="#loc_93_18_93_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_18_93_23&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> </span><a href="#loc_93_25_93_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_25_93_26&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_93_31_93_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_31_93_32&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
                                        (</span><a name="loc_95_42_95_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_42_95_44&#39;)"><span class="hl_vardecl"><span class="mpre">c&#39;</span></span></a><span class="mpre">,</span><a name="loc_95_45_95_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_45_95_48&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_92_1_92_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_11&#39;)"><span class="hl_varref"><span class="mpre">threadList</span></span></a><span class="mpre"> (</span><a href="#loc_93_13_93_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">,</span><a href="#loc_93_15_93_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_15_93_16&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) </span><a href="#loc_93_18_93_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_18_93_23&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> </span><a href="#loc_93_27_93_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_27_93_29&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><a href="#loc_94_44_94_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_44_94_46&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">



</span><span class="hl_comment"><span class="mpre">-- (B) thread &quot;maybes&quot;, ie, apply f to Just-values and continue</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     threading with &quot;continuation&quot; c, and ignore Nothing-values, ie,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     stop threading and return current data structure.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- threadMaybe&#39; :: (r -&gt; b) -&gt; (Split t i r) -&gt; (e -&gt; f -&gt; (Maybe i,t)) </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                 -&gt; e -&gt; f -&gt; (Maybe b,t)</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/Inductive/Internal/Thread.hs&quot;, srcSpanStartLine = 106, srcSpanStartColumn = 1, srcSpanEndLine = 106, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Graph/Inductive/Internal/Thread.hs&quot;, srcSpanStartLine = 106, srcSpanStartColumn = 1, srcSpanEndLine = 106, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fgl-5.5.0.1/Data/Gra"><span class="mpre">type SplitM t i r = Split t i (Maybe r)</span></span><span class="mpre">

</span><a href="#loc_109_1_109_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_1_109_13&#39;)"><span class="mpre">threadMaybe&#39;</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">-&gt;</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)-&gt;</span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">-&gt;</span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">j</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">)-&gt;</span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">j</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_109_1_109_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_1_109_13&#39;)"><span class="hl_fundecl"><span class="mpre">threadMaybe&#39;</span></span></a><span class="mpre"> </span><a name="loc_109_14_109_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_14_109_15&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_109_16_109_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_16_109_20&#39;)"><span class="hl_vardecl"><span class="mpre">cont</span></span></a><span class="mpre"> </span><a name="loc_109_21_109_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_21_109_26&#39;)"><span class="hl_vardecl"><span class="mpre">split</span></span></a><span class="mpre"> </span><a name="loc_109_27_109_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_27_109_28&#39;)"><span class="hl_vardecl"><span class="mpre">j</span></span></a><span class="mpre"> </span><a name="loc_109_29_109_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_29_109_30&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = 
      case </span><a href="#loc_112_14_112_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_14_112_16&#39;)"><span class="hl_varref"><span class="mpre">mi</span></span></a><span class="mpre"> of </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_110_23_110_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_23_110_24&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">  -&gt; (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_109_14_109_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_14_109_15&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_110_53_110_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_53_110_54&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">),</span><a href="#loc_110_55_110_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_55_110_58&#39;)"><span class="hl_varref"><span class="mpre">t&#39;&#39;</span></span></a><span class="mpre">) where (</span><a name="loc_110_53_110_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_53_110_54&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">,</span><a name="loc_110_55_110_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_55_110_58&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_109_16_109_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_16_109_20&#39;)"><span class="hl_varref"><span class="mpre">cont</span></span></a><span class="mpre"> </span><a href="#loc_110_23_110_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_23_110_24&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_112_17_112_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_17_112_19&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">
                 </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; (</span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">,</span><a href="#loc_112_17_112_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_17_112_19&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">)
      where (</span><a name="loc_112_14_112_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_14_112_16&#39;)"><span class="hl_vardecl"><span class="mpre">mi</span></span></a><span class="mpre">,</span><a name="loc_112_17_112_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_17_112_19&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_109_21_109_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_21_109_26&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> </span><a href="#loc_109_27_109_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_27_109_28&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre"> </span><a href="#loc_109_29_109_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_29_109_30&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- extension:  grant f access also to y, the result of split.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- threadMaybe :: (a -&gt; b -&gt; c) -&gt; (a -&gt; d -&gt; (b,d)) -&gt; (e -&gt; f -&gt; (Maybe a,d))</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                -&gt; e -&gt; f -&gt; (Maybe c,d)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- threadMaybe :: (i-&gt;r-&gt;a)-&gt;Split t i r-&gt;Split t j (Maybe i)-&gt;Split t j (Maybe a)</span></span><span class="mpre">
</span><a href="#loc_120_1_120_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_12&#39;)"><span class="mpre">threadMaybe</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">SplitM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">j</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">SplitM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">j</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_120_1_120_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_12&#39;)"><span class="hl_fundecl"><span class="mpre">threadMaybe</span></span></a><span class="mpre"> </span><a name="loc_120_13_120_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_13_120_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_120_15_120_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_15_120_19&#39;)"><span class="hl_vardecl"><span class="mpre">cont</span></span></a><span class="mpre"> </span><a name="loc_120_20_120_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_20_120_25&#39;)"><span class="hl_vardecl"><span class="mpre">split</span></span></a><span class="mpre"> </span><a name="loc_120_26_120_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_26_120_27&#39;)"><span class="hl_vardecl"><span class="mpre">j</span></span></a><span class="mpre"> </span><a name="loc_120_28_120_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_28_120_29&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = 
      case </span><a href="#loc_123_14_123_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_14_123_16&#39;)"><span class="hl_varref"><span class="mpre">mi</span></span></a><span class="mpre"> of </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_121_23_121_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_23_121_24&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">  -&gt; (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_120_13_120_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_13_120_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_121_23_121_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_23_121_24&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_121_55_121_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_55_121_56&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">),</span><a href="#loc_121_57_121_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_57_121_60&#39;)"><span class="hl_varref"><span class="mpre">t&#39;&#39;</span></span></a><span class="mpre">) where (</span><a name="loc_121_55_121_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_55_121_56&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">,</span><a name="loc_121_57_121_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_57_121_60&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_120_15_120_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_15_120_19&#39;)"><span class="hl_varref"><span class="mpre">cont</span></span></a><span class="mpre"> </span><a href="#loc_121_23_121_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_23_121_24&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_123_17_123_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_17_123_19&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">
                 </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; (</span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">,</span><a href="#loc_123_17_123_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_17_123_19&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">)
      where (</span><a name="loc_123_14_123_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_14_123_16&#39;)"><span class="hl_vardecl"><span class="mpre">mi</span></span></a><span class="mpre">,</span><a name="loc_123_17_123_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_17_123_19&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_120_20_120_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_20_120_25&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> </span><a href="#loc_120_26_120_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_26_120_27&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre"> </span><a href="#loc_120_28_120_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_28_120_29&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- (C) compose splits in parallel (is a kind of generalized zip)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- splitPar :: (a -&gt; b -&gt; (c,d)) -&gt; (e -&gt; f -&gt; (g,h)) </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--             -&gt; (a,e) -&gt; (b,f) -&gt; ((c,g),(d,h))</span></span><span class="mpre">
</span><a href="#loc_131_1_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_1_131_9&#39;)"><span class="mpre">splitPar</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">j</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">j</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">)
</span><a name="loc_131_1_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_1_131_9&#39;)"><span class="hl_fundecl"><span class="mpre">splitPar</span></span></a><span class="mpre"> </span><a name="loc_131_10_131_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_10_131_15&#39;)"><span class="hl_vardecl"><span class="mpre">split</span></span></a><span class="mpre"> </span><a name="loc_131_16_131_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_16_131_22&#39;)"><span class="hl_vardecl"><span class="mpre">split&#39;</span></span></a><span class="mpre"> (</span><a name="loc_131_24_131_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_24_131_25&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">,</span><a name="loc_131_26_131_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_26_131_27&#39;)"><span class="hl_vardecl"><span class="mpre">j</span></span></a><span class="mpre">) (</span><a name="loc_131_30_131_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_30_131_31&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">,</span><a name="loc_131_32_131_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_32_131_33&#39;)"><span class="hl_vardecl"><span class="mpre">u</span></span></a><span class="mpre">) = ((</span><a href="#loc_132_44_132_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_44_132_45&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">,</span><a href="#loc_133_44_133_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_44_133_45&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">),(</span><a href="#loc_132_46_132_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_46_132_48&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">,</span><a href="#loc_133_46_133_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_46_133_48&#39;)"><span class="hl_varref"><span class="mpre">u&#39;</span></span></a><span class="mpre">))
                                    where (</span><a name="loc_132_44_132_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_44_132_45&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">,</span><a name="loc_132_46_132_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_46_132_48&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_131_10_131_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_10_131_15&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> </span><a href="#loc_131_24_131_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_24_131_25&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_131_30_131_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_30_131_31&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
                                          (</span><a name="loc_133_44_133_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_44_133_45&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">,</span><a name="loc_133_46_133_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_46_133_48&#39;)"><span class="hl_vardecl"><span class="mpre">u&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_131_16_131_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_16_131_22&#39;)"><span class="hl_varref"><span class="mpre">split&#39;</span></span></a><span class="mpre"> </span><a href="#loc_131_26_131_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_26_131_27&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre"> </span><a href="#loc_131_32_131_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_32_131_33&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre">

</span><a href="#loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="mpre">splitParM</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">SplitM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Split</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">j</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">SplitM</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">j</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">)
</span><a name="loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="hl_fundecl"><span class="mpre">splitParM</span></span></a><span class="mpre"> </span><a name="loc_136_11_136_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_11_136_17&#39;)"><span class="hl_vardecl"><span class="mpre">splitm</span></span></a><span class="mpre"> </span><a name="loc_136_18_136_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_18_136_23&#39;)"><span class="hl_vardecl"><span class="mpre">split</span></span></a><span class="mpre"> (</span><a name="loc_136_25_136_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_25_136_26&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">,</span><a name="loc_136_27_136_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_27_136_28&#39;)"><span class="hl_vardecl"><span class="mpre">j</span></span></a><span class="mpre">) (</span><a name="loc_136_31_136_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_31_136_32&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">,</span><a name="loc_136_33_136_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_33_136_34&#39;)"><span class="hl_vardecl"><span class="mpre">u</span></span></a><span class="mpre">) =
          case </span><a href="#loc_139_18_139_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_18_139_20&#39;)"><span class="hl_varref"><span class="mpre">mr</span></span></a><span class="mpre"> of </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_137_27_137_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_27_137_28&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">  -&gt; (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_137_27_137_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_27_137_28&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">,</span><a href="#loc_140_18_140_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_18_140_19&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">),(</span><a href="#loc_139_21_139_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_21_139_23&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">,</span><a href="#loc_140_20_140_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_20_140_22&#39;)"><span class="hl_varref"><span class="mpre">u&#39;</span></span></a><span class="mpre">))
                     </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; (</span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">,(</span><a href="#loc_139_21_139_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_21_139_23&#39;)"><span class="hl_varref"><span class="mpre">t&#39;</span></span></a><span class="mpre">,</span><a href="#loc_136_33_136_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_33_136_34&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre">))   </span><span class="hl_comment"><span class="mpre">-- ignore 2nd split </span></span><span class="mpre">
          where (</span><a name="loc_139_18_139_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_18_139_20&#39;)"><span class="hl_vardecl"><span class="mpre">mr</span></span></a><span class="mpre">,</span><a name="loc_139_21_139_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_21_139_23&#39;)"><span class="hl_vardecl"><span class="mpre">t&#39;</span></span></a><span class="mpre">) = </span><a href="#loc_136_11_136_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_11_136_17&#39;)"><span class="hl_varref"><span class="mpre">splitm</span></span></a><span class="mpre"> </span><a href="#loc_136_25_136_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_25_136_26&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_136_31_136_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_31_136_32&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
                (</span><a name="loc_140_18_140_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_18_140_19&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">,</span><a name="loc_140_20_140_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_20_140_22&#39;)"><span class="hl_vardecl"><span class="mpre">u&#39;</span></span></a><span class="mpre">)  = </span><a href="#loc_136_18_136_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_18_136_23&#39;)"><span class="hl_varref"><span class="mpre">split</span></span></a><span class="mpre"> </span><a href="#loc_136_27_136_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_27_136_28&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre"> </span><a href="#loc_136_33_136_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_33_136_34&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- (D) merge a thread with/into a computation</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{- 
   Example: assign consecutive numbers to the nodes of a tree
 
   Input: type d, thread (t,split), fold operation on d
-}</span></span><span class="mpre">
</span></div></body></html>