<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP, ForeignFunctionInterface, BangPatterns #-}
#if __GLASGOW_HASKELL__
{-# LANGUAGE DeriveDataTypeable #-}
#if __GLASGOW_HASKELL__ &gt;= 701
{-# LANGUAGE Unsafe #-}
#endif
#endif
{-# OPTIONS_HADDOCK hide #-}

</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      : Data.ByteString.Lazy.Internal</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   : (c) Don Stewart 2006-2008</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--               (c) Duncan Coutts 2006-2011</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     : BSD-style</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  : dons00@gmail.com, duncan@community.haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   : unstable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability : non-portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A module containing semi-public &#39;ByteString&#39; internals. This exposes</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the &#39;ByteString&#39; representation and low level construction functions.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Modules which extend the &#39;ByteString&#39; system will need to use this module</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- while ideally most users will be able to make do with the public interface</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- modules.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
module Data.ByteString.Lazy.Internal (

        </span><span class="hl_comment"><span class="mpre">-- * The lazy @ByteString@ type and representation</span></span><span class="mpre">
        ByteString(..),     </span><span class="hl_comment"><span class="mpre">-- instances: Eq, Ord, Show, Read, Data, Typeable</span></span><span class="mpre">
        chunk,
        foldrChunks,
        foldlChunks,

        </span><span class="hl_comment"><span class="mpre">-- * Data type invariant and abstraction function</span></span><span class="mpre">
        invariant,
        checkInvariant,

        </span><span class="hl_comment"><span class="mpre">-- * Chunk allocation sizes</span></span><span class="mpre">
        defaultChunkSize,
        smallChunkSize,
        chunkOverhead,

        </span><span class="hl_comment"><span class="mpre">-- * Conversion with lists: packing and unpacking</span></span><span class="mpre">
        packBytes, packChars,
        unpackBytes, unpackChars,

  ) where

import Prelude hiding (concat)

import qualified Data.ByteString.Internal as S
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Lazy/Internal.hs&quot;, srcSpanStartLine = 51, srcSpanStartColumn = 18, srcSpanEndLine = 51, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre">          as S (length, take, drop)

import Data.Word        (Word8)
import Foreign.Storable (Storable(sizeOf))

import Data.Monoid      (</span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="mpre">Monoid</span></a><span class="mpre">(..))
import Control.DeepSeq  (</span><a href="Control.DeepSeq.html#loc_110_7_110_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_110_7_110_13&#39;)"><span class="mpre">NFData</span></a><span class="mpre">, </span><a href="Control.DeepSeq.html#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_120_5_120_8&#39;)"><span class="mpre">rnf</span></a><span class="mpre">)

#if MIN_VERSION_base(3,0,0)
import Data.String      (</span><a href="Data.String.html#loc_34_7_34_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_34_7_34_15&#39;)"><span class="mpre">IsString</span></a><span class="mpre">(..))
#endif

import Data.Typeable            (</span><a href="Data.Typeable.Internal.html#loc_196_7_196_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_196_7_196_15&#39;)"><span class="mpre">Typeable</span></a><span class="mpre">)
#if MIN_VERSION_base(4,1,0)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Lazy/Internal.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 8, srcSpanEndLine = 65, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;Data.Data&quot;"><span class="mpre">Data.Data</span></span><span class="mpre">                (Data(..))
#if MIN_VERSION_base(4,2,0)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Lazy/Internal.hs&quot;, srcSpanStartLine = 67, srcSpanStartColumn = 8, srcSpanEndLine = 67, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;Data.Data&quot;"><span class="mpre">Data.Data</span></span><span class="mpre">                (mkNoRepType)
#else
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Lazy/Internal.hs&quot;, srcSpanStartLine = 69, srcSpanStartColumn = 8, srcSpanEndLine = 69, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;Data.Data&quot;"><span class="mpre">Data.Data</span></span><span class="mpre">                (mkNorepType)
#endif
#else
import Data.Generics            (Data(..), mkNorepType)
#endif

</span><span class="hl_comment"><span class="mpre">-- | A space-efficient representation of a &#39;Word8&#39; vector, supporting many</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- efficient operations.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A lazy &#39;ByteString&#39; contains 8-bit bytes, or by using the operations</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- from &quot;Data.ByteString.Lazy.Char8&quot; it can be interpreted as containing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 8-bit characters.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
data </span><a name="loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tycondecl"><span class="mpre">ByteString</span></span></a><span class="mpre"> = </span><a name="loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_condecl"><span class="mpre">Empty</span></span></a><span class="mpre"> | </span><a name="loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_condecl"><span class="mpre">Chunk</span></span></a><span class="mpre"> {-# UNPACK #-} !</span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span></a><span class="mpre"> </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">

#if defined(__GLASGOW_HASKELL__)
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Lazy/Internal.hs&quot;, srcSpanStartLine = 85, srcSpanStartColumn = 5, srcSpanEndLine = 85, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/Data/ByteString/Lazy/Internal.hs&quot;, srcSpanStartLine = 85, srcSpanStartColumn = 5, srcSpanEndLine = 85, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/bytestring-0.10.4.0/D"><span class="mpre">deriving (Typeable)</span></span><span class="mpre">
#endif

instance </span><span class="hl_classref"><span class="mpre">Eq</span></span><span class="mpre">  </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> where
    </span><span class="hl_vardecl"><span class="mpre">(==)</span></span><span class="mpre">    = </span><a href="#loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="hl_varref"><span class="mpre">eq</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Ord</span></span><span class="mpre"> </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> where
    </span><span class="hl_vardecl"><span class="mpre">compare</span></span><span class="mpre"> = </span><a href="#loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="hl_varref"><span class="mpre">cmp</span></span></a><span class="mpre">

instance </span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="hl_classref"><span class="mpre">Monoid</span></span></a><span class="mpre"> </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> where
    </span><a href="Data.Monoid.html#loc_80_9_80_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_80_9_80_15&#39;)"><span class="hl_vardecl"><span class="mpre">mempty</span></span></a><span class="mpre">  = </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_vardecl"><span class="mpre">mappend</span></span></a><span class="mpre"> = </span><a href="#loc_250_1_250_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_1_250_7&#39;)"><span class="hl_varref"><span class="mpre">append</span></span></a><span class="mpre">
    </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_vardecl"><span class="mpre">mconcat</span></span></a><span class="mpre"> = </span><a href="#loc_253_1_253_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_1_253_7&#39;)"><span class="hl_varref"><span class="mpre">concat</span></span></a><span class="mpre">

instance </span><a href="Control.DeepSeq.html#loc_110_7_110_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_110_7_110_13&#39;)"><span class="hl_classref"><span class="mpre">NFData</span></span></a><span class="mpre"> </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> where
    </span><a href="Control.DeepSeq.html#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_120_5_120_8&#39;)"><span class="hl_fundecl"><span class="mpre">rnf</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">       = </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
    </span><a href="Control.DeepSeq.html#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_120_5_120_8&#39;)"><span class="hl_fundecl"><span class="mpre">rnf</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> _ </span><a name="loc_101_18_101_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_18_101_19&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">) = </span><a href="Control.DeepSeq.html#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">rnf</span></span></a><span class="mpre"> </span><a href="#loc_101_18_101_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_18_101_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a name="loc_104_15_104_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_15_104_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_104_17_104_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_17_104_19&#39;)"><span class="hl_vardecl"><span class="mpre">ps</span></span></a><span class="mpre"> </span><a name="loc_104_20_104_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_20_104_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a href="#loc_104_15_104_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_15_104_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="#loc_148_1_148_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_12&#39;)"><span class="hl_varref"><span class="mpre">unpackChars</span></span></a><span class="mpre"> </span><a href="#loc_104_17_104_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_17_104_19&#39;)"><span class="hl_varref"><span class="mpre">ps</span></span></a><span class="mpre">) </span><a href="#loc_104_20_104_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_20_104_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Read</span></span><span class="mpre"> </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">readsPrec</span></span><span class="mpre"> </span><a name="loc_107_15_107_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_15_107_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_107_17_107_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_17_107_20&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> = [ (</span><a href="#loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="hl_varref"><span class="mpre">packChars</span></span></a><span class="mpre"> </span><a href="#loc_107_45_107_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_45_107_46&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">, </span><a href="#loc_107_48_107_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_48_107_49&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">) | (</span><a name="loc_107_45_107_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_45_107_46&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">, </span><a name="loc_107_48_107_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_48_107_49&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">readsPrec</span></span><span class="mpre"> </span><a href="#loc_107_15_107_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_15_107_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_107_17_107_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_17_107_20&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre"> ]

#if MIN_VERSION_base(3,0,0)
instance </span><a href="Data.String.html#loc_34_7_34_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_34_7_34_15&#39;)"><span class="hl_classref"><span class="mpre">IsString</span></span></a><span class="mpre"> </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> where
    </span><a href="Data.String.html#loc_35_5_35_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.String.html#loc_35_5_35_15&#39;)"><span class="hl_vardecl"><span class="mpre">fromString</span></span></a><span class="mpre"> = </span><a href="#loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="hl_varref"><span class="mpre">packChars</span></span></a><span class="mpre">
#endif

instance </span><span class="hl_classref"><span class="mpre">Data</span></span><span class="mpre"> </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> where
  </span><span class="hl_fundecl"><span class="mpre">gfoldl</span></span><span class="mpre"> </span><a name="loc_115_10_115_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_10_115_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_115_12_115_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_12_115_13&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_115_14_115_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_14_115_17&#39;)"><span class="hl_vardecl"><span class="mpre">txt</span></span></a><span class="mpre"> = </span><a href="#loc_115_12_115_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_12_115_13&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> </span><a href="#loc_128_1_128_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_10&#39;)"><span class="hl_varref"><span class="mpre">packBytes</span></span></a><span class="mpre"> </span><a href="#loc_115_10_115_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_10_115_11&#39;)"><span class="hl_infix"><span class="mpre">`f`</span></span></a><span class="mpre"> </span><a href="#loc_144_1_144_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_1_144_12&#39;)"><span class="hl_varref"><span class="mpre">unpackBytes</span></span></a><span class="mpre"> </span><a href="#loc_115_14_115_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_14_115_17&#39;)"><span class="hl_varref"><span class="mpre">txt</span></span></a><span class="mpre">
  </span><span class="hl_fundecl"><span class="mpre">toConstr</span></span><span class="mpre"> _     = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Lazy.ByteString.toConstr&quot;</span></span><span class="mpre">
  </span><span class="hl_fundecl"><span class="mpre">gunfold</span></span><span class="mpre"> _ _    = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Lazy.ByteString.gunfold&quot;</span></span><span class="mpre">
#if MIN_VERSION_base(4,2,0)
  </span><a name="loc_119_3_119_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_3_119_13&#39;)"><span class="hl_fundecl"><span class="mpre">dataTypeOf</span></span></a><span class="mpre"> _   = </span><span class="hl_varref"><span class="mpre">mkNoRepType</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Lazy.ByteString&quot;</span></span><span class="mpre">
#else
  </span><a href="#loc_119_3_119_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_3_119_13&#39;)"><span class="hl_fundecl"><span class="mpre">dataTypeOf</span></span></a><span class="mpre"> _   = </span><span class="hl_varref"><span class="mpre">mkNorepType</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Lazy.ByteString&quot;</span></span><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Packing and unpacking from lists</span></span><span class="mpre">

</span><a href="#loc_128_1_128_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_10&#39;)"><span class="mpre">packBytes</span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">] -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_128_1_128_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_10&#39;)"><span class="hl_fundecl"><span class="mpre">packBytes</span></span></a><span class="mpre"> </span><a name="loc_128_11_128_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_11_128_14&#39;)"><span class="hl_vardecl"><span class="mpre">cs0</span></span></a><span class="mpre"> =
    </span><a href="#loc_131_5_131_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_15&#39;)"><span class="hl_varref"><span class="mpre">packChunks</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">32</span></span><span class="mpre"> </span><a href="#loc_128_11_128_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_11_128_14&#39;)"><span class="hl_varref"><span class="mpre">cs0</span></span></a><span class="mpre">
  where
    </span><a name="loc_131_5_131_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_15&#39;)"><span class="hl_fundecl"><span class="mpre">packChunks</span></span></a><span class="mpre"> </span><a name="loc_131_16_131_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_16_131_17&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_131_18_131_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_18_131_20&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre"> = case </span><a href="Data.ByteString.Internal.html#loc_301_1_301_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_301_1_301_17&#39;)"><span class="hl_varref"><span class="mpre">S.packUptoLenBytes</span></span></a><span class="mpre"> </span><a href="#loc_131_16_131_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_16_131_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_131_18_131_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_18_131_20&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre"> of
      (</span><a name="loc_132_8_132_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_8_132_10&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, [])  -&gt; </span><a href="#loc_173_1_173_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_1_173_6&#39;)"><span class="hl_varref"><span class="mpre">chunk</span></span></a><span class="mpre"> </span><a href="#loc_132_8_132_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_8_132_10&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">
      (</span><a name="loc_133_8_133_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_8_133_10&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_133_12_133_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_12_133_15&#39;)"><span class="hl_vardecl"><span class="mpre">cs&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a href="#loc_133_8_133_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_8_133_10&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> (</span><a href="#loc_131_5_131_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_15&#39;)"><span class="hl_varref"><span class="mpre">packChunks</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">min</span></span><span class="mpre"> (</span><a href="#loc_131_16_131_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_16_131_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">) </span><a href="#loc_213_1_213_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_15&#39;)"><span class="hl_varref"><span class="mpre">smallChunkSize</span></span></a><span class="mpre">) </span><a href="#loc_133_12_133_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_12_133_15&#39;)"><span class="hl_varref"><span class="mpre">cs&#39;</span></span></a><span class="mpre">)

</span><a href="#loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="mpre">packChars</span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">] -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="hl_fundecl"><span class="mpre">packChars</span></span></a><span class="mpre"> </span><a name="loc_136_11_136_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_11_136_14&#39;)"><span class="hl_vardecl"><span class="mpre">cs0</span></span></a><span class="mpre"> =
    </span><a href="#loc_139_5_139_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_5_139_15&#39;)"><span class="hl_varref"><span class="mpre">packChunks</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">32</span></span><span class="mpre"> </span><a href="#loc_136_11_136_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_11_136_14&#39;)"><span class="hl_varref"><span class="mpre">cs0</span></span></a><span class="mpre">
  where
    </span><a name="loc_139_5_139_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_5_139_15&#39;)"><span class="hl_fundecl"><span class="mpre">packChunks</span></span></a><span class="mpre"> </span><a name="loc_139_16_139_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_16_139_17&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_139_18_139_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_18_139_20&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre"> = case </span><a href="Data.ByteString.Internal.html#loc_309_1_309_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_309_1_309_17&#39;)"><span class="hl_varref"><span class="mpre">S.packUptoLenChars</span></span></a><span class="mpre"> </span><a href="#loc_139_16_139_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_16_139_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_139_18_139_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_18_139_20&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre"> of
      (</span><a name="loc_140_8_140_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_8_140_10&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, [])  -&gt; </span><a href="#loc_173_1_173_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_1_173_6&#39;)"><span class="hl_varref"><span class="mpre">chunk</span></span></a><span class="mpre"> </span><a href="#loc_140_8_140_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_8_140_10&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">
      (</span><a name="loc_141_8_141_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_8_141_10&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_141_12_141_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_12_141_15&#39;)"><span class="hl_vardecl"><span class="mpre">cs&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a href="#loc_141_8_141_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_8_141_10&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> (</span><a href="#loc_139_5_139_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_5_139_15&#39;)"><span class="hl_varref"><span class="mpre">packChunks</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">min</span></span><span class="mpre"> (</span><a href="#loc_139_16_139_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_16_139_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">) </span><a href="#loc_213_1_213_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_15&#39;)"><span class="hl_varref"><span class="mpre">smallChunkSize</span></span></a><span class="mpre">) </span><a href="#loc_141_12_141_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_12_141_15&#39;)"><span class="hl_varref"><span class="mpre">cs&#39;</span></span></a><span class="mpre">)

</span><a href="#loc_144_1_144_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_1_144_12&#39;)"><span class="mpre">unpackBytes</span></a><span class="mpre"> :: </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">]
</span><a name="loc_144_1_144_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_1_144_12&#39;)"><span class="hl_fundecl"><span class="mpre">unpackBytes</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">        = []
</span><a href="#loc_144_1_144_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_1_144_12&#39;)"><span class="hl_fundecl"><span class="mpre">unpackBytes</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_145_20_145_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_20_145_21&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_145_22_145_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_22_145_24&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><a href="Data.ByteString.Internal.html#loc_334_1_334_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_334_1_334_22&#39;)"><span class="hl_varref"><span class="mpre">S.unpackAppendBytesLazy</span></span></a><span class="mpre"> </span><a href="#loc_145_20_145_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_20_145_21&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> (</span><a href="#loc_144_1_144_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_1_144_12&#39;)"><span class="hl_varref"><span class="mpre">unpackBytes</span></span></a><span class="mpre"> </span><a href="#loc_145_22_145_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_22_145_24&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">)

</span><a href="#loc_148_1_148_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_12&#39;)"><span class="mpre">unpackChars</span></a><span class="mpre"> :: </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Char</span></span><span class="mpre">]
</span><a name="loc_148_1_148_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_12&#39;)"><span class="hl_fundecl"><span class="mpre">unpackChars</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">        = []
</span><a href="#loc_148_1_148_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_12&#39;)"><span class="hl_fundecl"><span class="mpre">unpackChars</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_149_20_149_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_20_149_21&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_149_22_149_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_22_149_24&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><a href="Data.ByteString.Internal.html#loc_345_1_345_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_345_1_345_22&#39;)"><span class="hl_varref"><span class="mpre">S.unpackAppendCharsLazy</span></span></a><span class="mpre"> </span><a href="#loc_149_20_149_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_20_149_21&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> (</span><a href="#loc_148_1_148_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_12&#39;)"><span class="hl_varref"><span class="mpre">unpackChars</span></span></a><span class="mpre"> </span><a href="#loc_149_22_149_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_22_149_24&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The data type invariant:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Every ByteString is either &#39;Empty&#39; or consists of non-null &#39;S.ByteString&#39;s.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- All functions must preserve this, and the QC properties must check this.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_158_1_158_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_10&#39;)"><span class="mpre">invariant</span></a><span class="mpre"> :: </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_158_1_158_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_10&#39;)"><span class="hl_fundecl"><span class="mpre">invariant</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">                     = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
</span><a href="#loc_158_1_158_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_10&#39;)"><span class="hl_fundecl"><span class="mpre">invariant</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">S.PS</span></span></a><span class="mpre"> _ _ </span><a name="loc_159_28_159_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_28_159_31&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) </span><a name="loc_159_33_159_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_33_159_35&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><a href="#loc_159_28_159_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_28_159_31&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_158_1_158_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_10&#39;)"><span class="hl_varref"><span class="mpre">invariant</span></span></a><span class="mpre"> </span><a href="#loc_159_33_159_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_33_159_35&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | In a form that checks the invariant lazily.</span></span><span class="mpre">
</span><a href="#loc_163_1_163_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_15&#39;)"><span class="mpre">checkInvariant</span></a><span class="mpre"> :: </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_163_1_163_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_15&#39;)"><span class="hl_fundecl"><span class="mpre">checkInvariant</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> = </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">
</span><a href="#loc_163_1_163_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_15&#39;)"><span class="hl_fundecl"><span class="mpre">checkInvariant</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_164_23_164_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_23_164_24&#39;)"><span class="hl_specname"><span class="mpre">c</span></span></a><span class="mpre">@(</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">S.PS</span></span></a><span class="mpre"> _ _ </span><a name="loc_164_35_164_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_35_164_38&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) </span><a name="loc_164_40_164_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_40_164_42&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">)
    | </span><a href="#loc_164_35_164_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_35_164_38&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">   = </span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a href="#loc_164_23_164_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_23_164_24&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> (</span><a href="#loc_163_1_163_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_15&#39;)"><span class="hl_varref"><span class="mpre">checkInvariant</span></span></a><span class="mpre"> </span><a href="#loc_164_40_164_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_40_164_42&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">)
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.ByteString.Lazy: invariant violation:&quot;</span></span><span class="mpre">
               </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a href="#loc_164_23_164_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_23_164_24&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><a href="#loc_164_40_164_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_40_164_42&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Smart constructor for &#39;Chunk&#39;. Guarantees the data type invariant.</span></span><span class="mpre">
</span><a href="#loc_173_1_173_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_1_173_6&#39;)"><span class="mpre">chunk</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_173_1_173_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_1_173_6&#39;)"><span class="hl_fundecl"><span class="mpre">chunk</span></span></a><span class="mpre"> </span><a name="loc_173_7_173_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_7_173_8&#39;)"><span class="hl_specname"><span class="mpre">c</span></span></a><span class="mpre">@(</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">S.PS</span></span></a><span class="mpre"> _ _ </span><a name="loc_173_19_173_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_19_173_22&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) </span><a name="loc_173_24_173_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_24_173_26&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre"> | </span><a href="#loc_173_19_173_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_19_173_22&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">  = </span><a href="#loc_173_24_173_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_24_173_26&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
                          | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a href="#loc_173_7_173_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_7_173_8&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><a href="#loc_173_24_173_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_24_173_26&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_173_1_173_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_1_173_6&#39;)"><span class="mpre">chunk</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Consume the chunks of a lazy ByteString with a natural right fold.</span></span><span class="mpre">
</span><a href="#loc_179_1_179_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_1_179_12&#39;)"><span class="mpre">foldrChunks</span></a><span class="mpre"> :: (</span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_179_1_179_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_1_179_12&#39;)"><span class="hl_fundecl"><span class="mpre">foldrChunks</span></span></a><span class="mpre"> </span><a name="loc_179_13_179_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_13_179_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_179_15_179_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_15_179_16&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> = </span><a href="#loc_180_9_180_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_9_180_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where </span><a name="loc_180_9_180_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_9_180_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">        = </span><a href="#loc_179_15_179_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_15_179_16&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre">
        </span><a href="#loc_180_9_180_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_9_180_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_181_19_181_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_19_181_20&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_181_21_181_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_21_181_23&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><a href="#loc_179_13_179_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_13_179_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_181_19_181_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_19_181_20&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> (</span><a href="#loc_180_9_180_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_9_180_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_181_21_181_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_21_181_23&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_179_1_179_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_1_179_12&#39;)"><span class="mpre">foldrChunks</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Consume the chunks of a lazy ByteString with a strict, tail-recursive,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- accumulating left fold.</span></span><span class="mpre">
</span><a href="#loc_187_1_187_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_12&#39;)"><span class="mpre">foldlChunks</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_187_1_187_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_12&#39;)"><span class="hl_fundecl"><span class="mpre">foldlChunks</span></span></a><span class="mpre"> </span><a name="loc_187_13_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_13_187_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_187_15_187_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_15_187_16&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> = </span><a href="#loc_188_9_188_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_9_188_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_187_15_187_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_15_187_16&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre">
  where </span><a name="loc_188_9_188_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_9_188_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_188_12_188_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_12_188_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> _ | </span><a href="#loc_188_12_188_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_12_188_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_167_1_167_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_167_1_167_4&#39;)"><span class="hl_infix"><span class="mpre">`seq`</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">undefined</span></span><span class="mpre">
        </span><a href="#loc_188_9_188_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_9_188_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_189_12_189_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_12_189_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">        = </span><a href="#loc_189_12_189_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_12_189_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
        </span><a href="#loc_188_9_188_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_9_188_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_190_12_190_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_12_190_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_190_21_190_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_21_190_22&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_190_23_190_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_23_190_25&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><a href="#loc_188_9_188_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_9_188_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_187_13_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_13_187_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_190_12_190_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_12_190_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_190_21_190_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_21_190_22&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) </span><a href="#loc_190_23_190_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_23_190_25&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_187_1_187_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_12&#39;)"><span class="mpre">foldlChunks</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- The representation uses lists of packed chunks. When we have to convert from</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a lazy list to the chunked representation, then by default we use this</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- chunk size. Some functions give you more control over the chunk size.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Measurements here:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  http://www.cse.unsw.edu.au/~dons/tmp/chunksize_v_cache.png</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- indicate that a value around 0.5 to 1 x your L2 cache is best.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The following value assumes people have something greater than 128k,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and need to share the cache with other programs.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The chunk size used for I\/O. Currently set to 32k, less the memory management overhead</span></span><span class="mpre">
</span><a href="#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_1_208_17&#39;)"><span class="mpre">defaultChunkSize</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_208_1_208_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_1_208_17&#39;)"><span class="hl_vardecl"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">32</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><a href="#loc_209_10_209_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_10_209_11&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_218_1_218_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_14&#39;)"><span class="hl_varref"><span class="mpre">chunkOverhead</span></span></a><span class="mpre">
   where </span><a name="loc_209_10_209_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_10_209_11&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">1024</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The recommended chunk size. Currently set to 4k, less the memory management overhead</span></span><span class="mpre">
</span><a href="#loc_213_1_213_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_15&#39;)"><span class="mpre">smallChunkSize</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_213_1_213_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_15&#39;)"><span class="hl_vardecl"><span class="mpre">smallChunkSize</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><a href="#loc_214_10_214_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_10_214_11&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_218_1_218_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_14&#39;)"><span class="hl_varref"><span class="mpre">chunkOverhead</span></span></a><span class="mpre">
   where </span><a name="loc_214_10_214_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_10_214_11&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">1024</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The memory management overhead. Currently this is tuned for GHC only.</span></span><span class="mpre">
</span><a href="#loc_218_1_218_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_14&#39;)"><span class="mpre">chunkOverhead</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_218_1_218_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_14&#39;)"><span class="hl_vardecl"><span class="mpre">chunkOverhead</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">*</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sizeOf</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">undefined</span></span><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Implementations for Eq, Ord and Monoid instances</span></span><span class="mpre">

</span><a href="#loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="mpre">eq</span></a><span class="mpre"> :: </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="hl_fundecl"><span class="mpre">eq</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
</span><a href="#loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="hl_fundecl"><span class="mpre">eq</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> _     = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
</span><a href="#loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="hl_fundecl"><span class="mpre">eq</span></span></a><span class="mpre"> _     </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
</span><a href="#loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="hl_fundecl"><span class="mpre">eq</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_227_11_227_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_12&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_227_13_227_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_13_227_15&#39;)"><span class="hl_vardecl"><span class="mpre">as</span></span></a><span class="mpre">) (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_227_24_227_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_24_227_25&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> </span><a name="loc_227_26_227_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_26_227_28&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">) =
  case </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_227_11_227_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_227_24_227_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_24_227_25&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) of
    </span><span class="hl_conref"><span class="mpre">LT</span></span><span class="mpre"> -&gt; </span><a href="#loc_227_11_227_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.take</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_227_11_227_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_227_24_227_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_24_227_25&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="hl_varref"><span class="mpre">eq</span></span></a><span class="mpre"> </span><a href="#loc_227_13_227_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_13_227_15&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.drop</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_227_11_227_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_227_24_227_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_24_227_25&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) </span><a href="#loc_227_26_227_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_26_227_28&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
    </span><span class="hl_conref"><span class="mpre">EQ</span></span><span class="mpre"> -&gt; </span><a href="#loc_227_11_227_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_227_24_227_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_24_227_25&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">                       </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="hl_varref"><span class="mpre">eq</span></span></a><span class="mpre"> </span><a href="#loc_227_13_227_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_13_227_15&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre"> </span><a href="#loc_227_26_227_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_26_227_28&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">GT</span></span><span class="mpre"> -&gt; (</span><span class="hl_varref"><span class="mpre">S.take</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_227_24_227_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_24_227_25&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) </span><a href="#loc_227_11_227_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_227_24_227_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_24_227_25&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_224_1_224_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_1_224_3&#39;)"><span class="hl_varref"><span class="mpre">eq</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.drop</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_227_24_227_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_24_227_25&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) </span><a href="#loc_227_11_227_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_227_13_227_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_13_227_15&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre">) </span><a href="#loc_227_26_227_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_26_227_28&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">

</span><a href="#loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="mpre">cmp</span></a><span class="mpre"> :: </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ordering</span></span><span class="mpre">
</span><a name="loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="hl_fundecl"><span class="mpre">cmp</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">EQ</span></span><span class="mpre">
</span><a href="#loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="hl_fundecl"><span class="mpre">cmp</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> _     = </span><span class="hl_conref"><span class="mpre">LT</span></span><span class="mpre">
</span><a href="#loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="hl_fundecl"><span class="mpre">cmp</span></span></a><span class="mpre"> _     </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">GT</span></span><span class="mpre">
</span><a href="#loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="hl_fundecl"><span class="mpre">cmp</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_237_12_237_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_12_237_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_237_14_237_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_14_237_16&#39;)"><span class="hl_vardecl"><span class="mpre">as</span></span></a><span class="mpre">) (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_237_25_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_26&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> </span><a name="loc_237_27_237_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_29&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">) =
  case </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_237_12_237_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_12_237_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_237_25_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_26&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) of
    </span><span class="hl_conref"><span class="mpre">LT</span></span><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> </span><a href="#loc_237_12_237_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_12_237_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.take</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_237_12_237_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_12_237_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_237_25_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_26&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) of
            </span><span class="hl_conref"><span class="mpre">EQ</span></span><span class="mpre">     -&gt; </span><a href="#loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="hl_varref"><span class="mpre">cmp</span></span></a><span class="mpre"> </span><a href="#loc_237_14_237_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_14_237_16&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.drop</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_237_12_237_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_12_237_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_237_25_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_26&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) </span><a href="#loc_237_27_237_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_29&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
            </span><a name="loc_241_13_241_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_13_241_19&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_241_13_241_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_13_241_19&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">EQ</span></span><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> </span><a href="#loc_237_12_237_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_12_237_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_237_25_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_26&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">EQ</span></span><span class="mpre">     -&gt; </span><a href="#loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="hl_varref"><span class="mpre">cmp</span></span></a><span class="mpre"> </span><a href="#loc_237_14_237_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_14_237_16&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre"> </span><a href="#loc_237_27_237_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_29&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
            </span><a name="loc_244_13_244_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_244_13_244_19&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_244_13_244_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_244_13_244_19&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">GT</span></span><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.take</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_237_25_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_26&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) </span><a href="#loc_237_12_237_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_12_237_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_237_25_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_26&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">EQ</span></span><span class="mpre">     -&gt; </span><a href="#loc_234_1_234_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_4&#39;)"><span class="hl_varref"><span class="mpre">cmp</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.drop</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.length</span></span><span class="mpre"> </span><a href="#loc_237_25_237_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_26&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) </span><a href="#loc_237_12_237_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_12_237_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><a href="#loc_237_14_237_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_14_237_16&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre">) </span><a href="#loc_237_27_237_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_27_237_29&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
            </span><a name="loc_247_13_247_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_13_247_19&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_247_13_247_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_13_247_19&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">

</span><a href="#loc_250_1_250_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_1_250_7&#39;)"><span class="mpre">append</span></a><span class="mpre"> :: </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_250_1_250_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_1_250_7&#39;)"><span class="hl_fundecl"><span class="mpre">append</span></span></a><span class="mpre"> </span><a name="loc_250_8_250_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_8_250_10&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> </span><a name="loc_250_11_250_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_11_250_13&#39;)"><span class="hl_vardecl"><span class="mpre">ys</span></span></a><span class="mpre"> = </span><a href="#loc_179_1_179_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_1_179_12&#39;)"><span class="hl_varref"><span class="mpre">foldrChunks</span></span></a><span class="mpre"> </span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a href="#loc_250_11_250_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_11_250_13&#39;)"><span class="hl_varref"><span class="mpre">ys</span></span></a><span class="mpre"> </span><a href="#loc_250_8_250_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_8_250_10&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">

</span><a href="#loc_253_1_253_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_1_253_7&#39;)"><span class="mpre">concat</span></a><span class="mpre"> :: [</span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">] -&gt; </span><a href="#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_253_1_253_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_1_253_7&#39;)"><span class="hl_fundecl"><span class="mpre">concat</span></span></a><span class="mpre"> </span><a name="loc_253_8_253_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_8_253_12&#39;)"><span class="hl_vardecl"><span class="mpre">css0</span></span></a><span class="mpre"> = </span><a href="#loc_257_5_257_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_5_257_7&#39;)"><span class="hl_varref"><span class="mpre">to</span></span></a><span class="mpre"> </span><a href="#loc_253_8_253_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_8_253_12&#39;)"><span class="hl_varref"><span class="mpre">css0</span></span></a><span class="mpre">
  where
    </span><a name="loc_255_5_255_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_5_255_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">        </span><a name="loc_255_21_255_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_21_255_24&#39;)"><span class="hl_vardecl"><span class="mpre">css</span></span></a><span class="mpre"> = </span><a href="#loc_257_5_257_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_5_257_7&#39;)"><span class="hl_varref"><span class="mpre">to</span></span></a><span class="mpre"> </span><a href="#loc_255_21_255_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_21_255_24&#39;)"><span class="hl_varref"><span class="mpre">css</span></span></a><span class="mpre">
    </span><a href="#loc_255_5_255_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_5_255_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_256_15_256_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_15_256_16&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_256_17_256_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_17_256_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) </span><a name="loc_256_21_256_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_21_256_24&#39;)"><span class="hl_vardecl"><span class="mpre">css</span></span></a><span class="mpre"> = </span><a href="#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a href="#loc_256_15_256_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_15_256_16&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> (</span><a href="#loc_255_5_255_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_5_255_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_256_17_256_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_17_256_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre"> </span><a href="#loc_256_21_256_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_21_256_24&#39;)"><span class="hl_varref"><span class="mpre">css</span></span></a><span class="mpre">)
    </span><a name="loc_257_5_257_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_5_257_7&#39;)"><span class="hl_fundecl"><span class="mpre">to</span></span></a><span class="mpre"> []               = </span><a href="#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">Empty</span></span></a><span class="mpre">
    </span><a href="#loc_257_5_257_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_5_257_7&#39;)"><span class="hl_fundecl"><span class="mpre">to</span></span></a><span class="mpre"> (</span><a name="loc_258_9_258_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_9_258_11&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_258_12_258_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_12_258_15&#39;)"><span class="hl_vardecl"><span class="mpre">css</span></span></a><span class="mpre">)         = </span><a href="#loc_255_5_255_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_5_255_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_258_9_258_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_9_258_11&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre"> </span><a href="#loc_258_12_258_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_12_258_15&#39;)"><span class="hl_varref"><span class="mpre">css</span></span></a><span class="mpre">
</span></div></body></html>