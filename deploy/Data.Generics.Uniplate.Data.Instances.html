<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE DeriveDataTypeable #-}

</span><span class="hl_comment"><span class="mpre">-- | In some cases, &#39;Data&#39; instances for abstract types are incorrect,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   and fail to work correctly with Uniplate. This module defines three helper</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   types (&#39;Hide&#39;, &#39;Trigger&#39; and &#39;Invariant&#39;) to assist when writing instances</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   for abstract types. The &#39;Hide&#39; type is useful when you want to mark some part</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   of your data type as being ignored by &quot;Data.Generics.Uniplate.Data&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   (and any other &#39;Data&#39; based generics libraries, such as @syb@).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Using the helper types, this module defines wrappers for types in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   the @containers@ package, namely &#39;Map&#39;, &#39;Set&#39;, &#39;IntMap&#39; and &#39;IntSet&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The standard @containers@ &#39;Data&#39; instances all treat the types as abstract,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   but the wrapper types allow you to traverse within the data types, ensuring</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   the necessary invariants are maintained. In particular, if you do not modify</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   the keys reconstruct will be /O(n)/ instead of /O(n log n)/.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   As an example of how to implement your own abstract type wrappers, the &#39;Map&#39; data</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   type is defined as:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   newtype Map k v = Map (&#39;Invariant&#39; (&#39;Trigger&#39; [k], &#39;Trigger&#39; [v], Hide (Map.Map k v)))</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--      deriving (Data, Typeable)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The &#39;Map&#39; type is defined as an &#39;Invariant&#39; of three components - the keys, the values, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   the underlying @Map@. We use &#39;Invariant&#39; to ensure that the keys/values/map always remain in sync.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   We use &#39;Trigger&#39; on the keys and values to ensure that whenever the keys or values change we</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   rebuild the @Map@, but if they don&#39;t, we reuse the previous @Map@. The &#39;fromMap&#39; function is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   implemented by pattern matching on the &#39;Map&#39; type:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &#39;fromMap&#39; (&#39;Map&#39; (&#39;Invariant&#39; _ (_,_,&#39;Hide&#39; x))) = x</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The &#39;toMap&#39; function is slightly harder, as we need to come up with an invariant restoring function:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; toMap :: Ord k =&gt; Map.Map k v -&gt; Map k v</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; toMap x = Map $ Invariant inv $ create x</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;     where</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;         create x = (Trigger False ks, Trigger False vs, Hide x)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;             where (ks,vs) = unzip $ Map.toAscList x</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;         inv (ks,vs,x)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;             | trigger ks = create $ Map.fromList $ zip (fromTrigger ks) (fromTrigger vs)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;             | trigger vs = create $ Map.fromDistinctAscList $ zip (fromTrigger ks) (fromTrigger vs)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;             | otherwise = (ks,vs,x)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The &#39;create&#39; function creates a value from a @Map@, getting the correct keys and values. The &#39;inv&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   function looks at the triggers on the keys/values. If the keys trigger has been tripped, then we</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   reconstruct the @Map@ using @fromList@. If the values trigger has been tripped, but they keys trigger</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   has not, we can use @fromDistinctAscList@, reducing the complexity of constructing the @Map@. If nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   has changed we can reuse the previous value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The end result is that all Uniplate (or @syb@) traversals over &#39;Map&#39; result in a valid value, which has</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   had all appropriate transformations applied.</span></span><span class="mpre">
module Data.Generics.Uniplate.Data.Instances(
    Hide(..), Trigger(..), Invariant(..),
    Map, fromMap, toMap,
    Set, fromSet, toSet,
    IntMap, fromIntMap, toIntMap,
    IntSet, fromIntSet, toIntSet
    ) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 64, srcSpanStartColumn = 8, srcSpanEndLine = 64, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;Data.Data&quot;"><span class="mpre">Data.Data</span></span><span class="mpre">
import qualified Data.Map as Map
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 66, srcSpanStartColumn = 18, srcSpanEndLine = 66, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;Data.Set&quot;"><span class="mpre">Data.Set</span></span><span class="mpre"> as Set
import qualified Data.IntMap as IntMap
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 18, srcSpanEndLine = 68, srcSpanEndColumn = 29}, srcInfoPoints = []}) &quot;Data.IntSet&quot;"><span class="mpre">Data.IntSet</span></span><span class="mpre"> as IntSet


</span><span class="hl_comment"><span class="mpre">---------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- DATA TYPES</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The &#39;Hide&#39; data type has a &#39;Data&#39; instance which reports having no constructors,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   as though the type was defined as using the extension @EmptyDataDecls@:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; data Hide a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   This type is suitable for defining regions that are avoided by Uniplate traversals.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   As an example:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; transformBi (+1) (1, 2, Hide 3, Just 4) == (2, 3, Hide 3, Just 4)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   As a result of having no constructors, any calls to the methods &#39;toConstr&#39; or &#39;gunfold&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   will raise an error.</span></span><span class="mpre">
newtype </span><a name="loc_86_9_86_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_13&#39;)"><span class="hl_tycondecl"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_condecl"><span class="mpre">Hide</span></span></a><span class="mpre"> {</span><a name="loc_86_24_86_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_24_86_32&#39;)"><span class="hl_fielddecl"><span class="mpre">fromHide</span></span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">}
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 5, srcSpanEndLine = 87, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 5, srcSpanEndLine = 87, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6."><span class="mpre">deriving (Read,Ord,Eq,Typeable)</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 89, srcSpanStartColumn = 10, srcSpanEndLine = 89, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 89, srcSpanStartColumn = 17, srcSpanEndLine = 89, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename ="><span class="mpre">Show a =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> (</span><a href="#loc_86_9_86_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_13&#39;)"><span class="hl_tyconref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">show</span></span><span class="mpre"> (</span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a name="loc_90_16_90_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_16_90_17&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;Hide &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_90_16_90_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_16_90_17&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> </span><a href="#loc_86_9_86_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_13&#39;)"><span class="hl_tyconref"><span class="mpre">Hide</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">fmap</span></span><span class="mpre"> </span><a name="loc_93_10_93_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_10_93_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a name="loc_93_18_93_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_18_93_19&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_93_10_93_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_10_93_11&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_93_18_93_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_18_93_19&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">


instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 96, srcSpanStartColumn = 10, srcSpanEndLine = 96, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 96, srcSpanStartColumn = 21, srcSpanEndLine = 96, srcSpanEndColumn = 23}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename ="><span class="mpre">Typeable a =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Data</span></span><span class="mpre"> (</span><a href="#loc_86_9_86_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_13&#39;)"><span class="hl_tyconref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">gfoldl</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">k</span></span><span class="mpre"> </span><a name="loc_97_14_97_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_14_97_15&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><a name="loc_97_16_97_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_16_97_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_97_14_97_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_14_97_15&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> </span><a href="#loc_97_16_97_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_16_97_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">gunfold</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">z</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">c</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Generics.Uniplate.Data.Instances.Hide: gunfold not implemented - data type has no constructors&quot;</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">toConstr</span></span><span class="mpre"> _ = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Generics.Uniplate.Data.Instances.Hide: toConstr not implemented - data type has no constructors&quot;</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">dataTypeOf</span></span><span class="mpre"> _ = </span><a href="#loc_102_1_102_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_1_102_7&#39;)"><span class="hl_varref"><span class="mpre">tyHide</span></span></a><span class="mpre">

</span><a name="loc_102_1_102_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_1_102_7&#39;)"><span class="hl_vardecl"><span class="mpre">tyHide</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkDataType</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Generics.Uniplate.Data.Instances.Hide&quot;</span></span><span class="mpre"> []


</span><span class="hl_comment"><span class="mpre">-- | The &#39;Trigger&#39; data type has a &#39;Data&#39; instance which reports as being defined:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; data Trigger a = Trigger a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   However, whenever a &#39;gfoldl&#39; or &#39;gunfold&#39; constructs a new value, it will have the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &#39;trigger&#39; field set to &#39;True&#39;. The trigger information is useful to indicate whether</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   any invariants have been broken, and thus need fixing. As an example:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; data SortedList a = SortedList (Trigger [a]) deriving (Data,Typeable)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; toSortedList xs = SortedList $ Trigger False $ sort xs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; fromSortedList (SortedList (Trigger t xs)) = if t then sort xs else xs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   This data type represents a sorted list. When constructed the items are initially sorted,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   but operations such as &#39;gmapT&#39; could break that invariant. The &#39;Trigger&#39; type is used to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   detect when the Data operations have been performed, and resort the list.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The &#39;Trigger&#39; type is often used in conjunction with &#39;Invariant&#39;, which fixes the invariants.</span></span><span class="mpre">
data </span><a name="loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tycondecl"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_condecl"><span class="mpre">Trigger</span></span></a><span class="mpre"> {</span><a name="loc_122_27_122_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_34&#39;)"><span class="hl_fielddecl"><span class="mpre">trigger</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">, </span><a name="loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_fielddecl"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">}
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 123, srcSpanStartColumn = 5, srcSpanEndLine = 123, srcSpanEndColumn = 41}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 123, srcSpanStartColumn = 5, srcSpanEndLine = 123, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-"><span class="mpre">deriving (Read,Ord,Eq,Show,Typeable)</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> </span><a href="#loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tyconref"><span class="mpre">Trigger</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">fmap</span></span><span class="mpre"> </span><a name="loc_126_10_126_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_10_126_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><a name="loc_126_21_126_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_22&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_126_23_126_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_23_126_24&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">) = </span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><a href="#loc_126_21_126_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_22&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_126_10_126_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_10_126_11&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_126_23_126_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_23_126_24&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">


instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 129, srcSpanStartColumn = 10, srcSpanEndLine = 129, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 129, srcSpanStartColumn = 10, srcSpanEndLine = 129, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate"><span class="mpre">(Data a, Typeable a) =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Data</span></span><span class="mpre"> (</span><a href="#loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tyconref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">gfoldl</span></span><span class="mpre"> </span><a name="loc_130_12_130_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_12_130_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_130_14_130_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_14_130_15&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> _ </span><a name="loc_130_27_130_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_27_130_28&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><a href="#loc_130_14_130_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_14_130_15&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">) </span><a href="#loc_130_12_130_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_12_130_13&#39;)"><span class="hl_infix"><span class="mpre">`k`</span></span></a><span class="mpre"> </span><a href="#loc_130_27_130_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_27_130_28&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">gunfold</span></span><span class="mpre"> </span><a name="loc_131_13_131_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_13_131_14&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_131_15_131_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_15_131_16&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">c</span></span><span class="mpre"> = </span><a href="#loc_131_13_131_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_13_131_14&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_131_15_131_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_15_131_16&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">toConstr</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 132, srcSpanStartColumn = 14, srcSpanEndLine = 132, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 132, srcSpanStartColumn = 21, srcSpanEndLine = 132, srcSpanEndColumn = 22},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1."><span class="mpre">Trigger{}</span></span><span class="mpre"> = </span><a href="#loc_135_1_135_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_11&#39;)"><span class="hl_varref"><span class="mpre">conTrigger</span></span></a><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">dataTypeOf</span></span><span class="mpre"> _ = </span><a href="#loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="hl_varref"><span class="mpre">tyTrigger</span></span></a><span class="mpre">

</span><a name="loc_135_1_135_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_11&#39;)"><span class="hl_vardecl"><span class="mpre">conTrigger</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkConstr</span></span><span class="mpre"> </span><a href="#loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="hl_varref"><span class="mpre">tyTrigger</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Trigger&quot;</span></span><span class="mpre"> [] </span><span class="hl_conref"><span class="mpre">Prefix</span></span><span class="mpre">
</span><a name="loc_136_1_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_10&#39;)"><span class="hl_vardecl"><span class="mpre">tyTrigger</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkDataType</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Generics.Uniplate.Data.Instances.Trigger&quot;</span></span><span class="mpre"> [</span><a href="#loc_135_1_135_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_1_135_11&#39;)"><span class="hl_varref"><span class="mpre">conTrigger</span></span></a><span class="mpre">]


</span><span class="hl_comment"><span class="mpre">-- | The &#39;Invariant&#39; data type as a &#39;Data&#39; instance which reports as being defined:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; data Invariant a = Invariant a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   However, whenever a &#39;gfoldl&#39; constructs a new value, it will have the function in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   the &#39;invariant&#39; field applied to it. As an example:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; data SortedList a = SortedList (Invariant [a]) deriving (Data,Typeable)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; toSortedList xs = SortedList $ Invariant sort (sort xs)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; fromSortedList (SortedList (Invariant _ xs)) = xs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Any time an operation such as &#39;gmapT&#39; is applied to the data type, the &#39;invariant&#39; function</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   is applied to the result. The @fromSortedList@ function can then rely on this invariant.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The &#39;gunfold&#39; method is partially implemented - all constructed values will have an undefined</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   value for all fields, regardless of which function is passed to &#39;fromConstrB&#39;. If you only use</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &#39;fromConstr&#39; (as Uniplate does) then the &#39;gunfold&#39; method is sufficient.</span></span><span class="mpre">
data </span><a name="loc_156_6_156_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_6_156_15&#39;)"><span class="hl_tycondecl"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_condecl"><span class="mpre">Invariant</span></span></a><span class="mpre"> {</span><a name="loc_156_31_156_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_31_156_40&#39;)"><span class="hl_fielddecl"><span class="mpre">invariant</span></span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><a name="loc_156_52_156_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_52_156_65&#39;)"><span class="hl_fielddecl"><span class="mpre">fromInvariant</span></span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">}
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 157, srcSpanStartColumn = 5, srcSpanEndLine = 157, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 157, srcSpanStartColumn = 5, srcSpanEndLine = 157, srcSpanEndColumn = 13}]}) [IHead (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename "><span class="mpre">deriving Typeable</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 159, srcSpanStartColumn = 10, srcSpanEndLine = 159, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 159, srcSpanStartColumn = 17, srcSpanEndLine = 159, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Show a =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> (</span><a href="#loc_156_6_156_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_6_156_15&#39;)"><span class="hl_tyconref"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">show</span></span><span class="mpre"> (</span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> _ </span><a name="loc_160_23_160_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_23_160_24&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;Invariant &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_160_23_160_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_23_160_24&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 162, srcSpanStartColumn = 10, srcSpanEndLine = 162, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 162, srcSpanStartColumn = 10, srcSpanEndLine = 162, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate"><span class="mpre">(Data a, Typeable a) =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Data</span></span><span class="mpre"> (</span><a href="#loc_156_6_156_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_6_156_15&#39;)"><span class="hl_tyconref"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">gfoldl</span></span><span class="mpre"> </span><a name="loc_163_12_163_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_12_163_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_163_14_163_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_14_163_15&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><a name="loc_163_27_163_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_27_163_28&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_163_29_163_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_29_163_30&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><a href="#loc_163_14_163_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_14_163_15&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> (</span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><a href="#loc_163_27_163_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_27_163_28&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_163_27_163_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_27_163_28&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) </span><a href="#loc_163_12_163_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_12_163_13&#39;)"><span class="hl_infix"><span class="mpre">`k`</span></span></a><span class="mpre"> </span><a href="#loc_163_29_163_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_29_163_30&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">gunfold</span></span><span class="mpre"> </span><a name="loc_164_13_164_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_13_164_14&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_164_15_164_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_15_164_16&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">c</span></span><span class="mpre"> = </span><a href="#loc_164_13_164_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_13_164_14&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_164_15_164_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_15_164_16&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_164_30_164_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_30_164_31&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><a href="#loc_165_15_165_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_15_165_18&#39;)"><span class="hl_varref"><span class="mpre">msg</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><a href="#loc_165_15_165_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_15_165_18&#39;)"><span class="hl_varref"><span class="mpre">msg</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`asTypeOf`</span></span><span class="mpre"> </span><a href="#loc_164_30_164_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_30_164_31&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
        where </span><a name="loc_165_15_165_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_15_165_18&#39;)"><span class="hl_vardecl"><span class="mpre">msg</span></span></a><span class="mpre"> = </span><span class="hl_string"><span class="mpre">&quot;Data.Generics.Uniplate.Data.Instances.Invariant: gunfold only partially implemented&quot;</span></span><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">toConstr</span></span><span class="mpre"> </span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 166, srcSpanStartColumn = 14, srcSpanEndLine = 166, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 166, srcSpanStartColumn = 23, srcSpanEndLine = 166, srcSpanEndColumn = 24},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1."><span class="mpre">Invariant{}</span></span><span class="mpre"> = </span><a href="#loc_169_1_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_13&#39;)"><span class="hl_varref"><span class="mpre">conInvariant</span></span></a><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">dataTypeOf</span></span><span class="mpre"> _ = </span><a href="#loc_170_1_170_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_12&#39;)"><span class="hl_varref"><span class="mpre">tyInvariant</span></span></a><span class="mpre">

</span><a name="loc_169_1_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_13&#39;)"><span class="hl_vardecl"><span class="mpre">conInvariant</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkConstr</span></span><span class="mpre"> </span><a href="#loc_170_1_170_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_12&#39;)"><span class="hl_varref"><span class="mpre">tyInvariant</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Invariant&quot;</span></span><span class="mpre"> [] </span><span class="hl_conref"><span class="mpre">Prefix</span></span><span class="mpre">
</span><a name="loc_170_1_170_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_12&#39;)"><span class="hl_vardecl"><span class="mpre">tyInvariant</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkDataType</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Generics.Uniplate.Data.Instances.Invariant&quot;</span></span><span class="mpre"> [</span><a href="#loc_169_1_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_13&#39;)"><span class="hl_varref"><span class="mpre">conInvariant</span></span></a><span class="mpre">]


</span><span class="hl_comment"><span class="mpre">---------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- DATA TYPES</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Invariant preserving version of @Map@ from the @containers@ packages, suitable for use with &#39;Uniplate&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Use &#39;toMap&#39; to construct values, and &#39;fromMap&#39; to deconstruct values.</span></span><span class="mpre">
newtype </span><a name="loc_178_9_178_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_9_178_12&#39;)"><span class="hl_tycondecl"><span class="mpre">Map</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> = </span><a name="loc_178_19_178_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_19_178_22&#39;)"><span class="hl_condecl"><span class="mpre">Map</span></span></a><span class="mpre"> (</span><a href="#loc_156_6_156_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_6_156_15&#39;)"><span class="hl_tyconref"><span class="mpre">Invariant</span></span></a><span class="mpre"> (</span><a href="#loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tyconref"><span class="mpre">Trigger</span></span></a><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">], </span><a href="#loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tyconref"><span class="mpre">Trigger</span></span></a><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">], </span><a href="#loc_86_9_86_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_13&#39;)"><span class="hl_tyconref"><span class="mpre">Hide</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Map.Map</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">)))
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 179, srcSpanStartColumn = 5, srcSpanEndLine = 179, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 179, srcSpanStartColumn = 5, srcSpanEndLine = 179, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-"><span class="mpre">deriving (Data, Typeable)</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 181, srcSpanStartColumn = 10, srcSpanEndLine = 181, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 181, srcSpanStartColumn = 10, srcSpanEndLine = 181, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate"><span class="mpre">(Show k, Show v) =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> (</span><a href="#loc_178_9_178_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_9_178_12&#39;)"><span class="hl_tyconref"><span class="mpre">Map</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) where; </span><span class="hl_vardecl"><span class="mpre">show</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_187_1_187_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_8&#39;)"><span class="hl_varref"><span class="mpre">fromMap</span></span></a><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 182, srcSpanStartColumn = 10, srcSpanEndLine = 182, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 182, srcSpanStartColumn = 10, srcSpanEndLine = 182, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate"><span class="mpre">(Eq k, Eq v) =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Eq</span></span><span class="mpre"> (</span><a href="#loc_178_9_178_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_9_178_12&#39;)"><span class="hl_tyconref"><span class="mpre">Map</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) where; </span><a name="loc_182_46_182_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_46_182_47&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_fundecl"><span class="mpre">==</span></span><span class="mpre"> </span><a name="loc_182_51_182_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_51_182_52&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_187_1_187_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_8&#39;)"><span class="hl_varref"><span class="mpre">fromMap</span></span></a><span class="mpre"> </span><a href="#loc_182_46_182_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_46_182_47&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_187_1_187_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_8&#39;)"><span class="hl_varref"><span class="mpre">fromMap</span></span></a><span class="mpre"> </span><a href="#loc_182_51_182_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_51_182_52&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 183, srcSpanStartColumn = 10, srcSpanEndLine = 183, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 183, srcSpanStartColumn = 10, srcSpanEndLine = 183, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate"><span class="mpre">(Ord k, Ord v) =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Ord</span></span><span class="mpre"> (</span><a href="#loc_178_9_178_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_9_178_12&#39;)"><span class="hl_tyconref"><span class="mpre">Map</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) where; </span><span class="hl_fundecl"><span class="mpre">compare</span></span><span class="mpre"> </span><a name="loc_183_57_183_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_183_57_183_58&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_183_59_183_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_183_59_183_60&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> (</span><a href="#loc_187_1_187_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_8&#39;)"><span class="hl_varref"><span class="mpre">fromMap</span></span></a><span class="mpre"> </span><a href="#loc_183_57_183_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_183_57_183_58&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="#loc_187_1_187_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_8&#39;)"><span class="hl_varref"><span class="mpre">fromMap</span></span></a><span class="mpre"> </span><a href="#loc_183_59_183_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_183_59_183_60&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Deconstruct a value of type &#39;Map&#39;.</span></span><span class="mpre">
</span><a href="#loc_187_1_187_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_8&#39;)"><span class="mpre">fromMap</span></a><span class="mpre"> :: </span><a href="#loc_178_9_178_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_9_178_12&#39;)"><span class="hl_tyconref"><span class="mpre">Map</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Map.Map</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">
</span><a name="loc_187_1_187_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_1_187_8&#39;)"><span class="hl_fundecl"><span class="mpre">fromMap</span></span></a><span class="mpre"> (</span><a href="#loc_178_19_178_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_19_178_22&#39;)"><span class="hl_conref"><span class="mpre">Map</span></span></a><span class="mpre"> (</span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> _ (_,_,</span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a name="loc_187_37_187_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_37_187_38&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">))) = </span><a href="#loc_187_37_187_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_37_187_38&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct a value of type &#39;Map&#39;.</span></span><span class="mpre">
</span><a href="#loc_191_1_191_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_1_191_6&#39;)"><span class="mpre">toMap</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 190, srcSpanStartColumn = 10, srcSpanEndLine = 190, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 190, srcSpanStartColumn = 16, srcSpanEndLine = 190, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Ord k =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Map.Map</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> -&gt; </span><a href="#loc_178_9_178_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_9_178_12&#39;)"><span class="hl_tyconref"><span class="mpre">Map</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">
</span><a name="loc_191_1_191_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_1_191_6&#39;)"><span class="hl_fundecl"><span class="mpre">toMap</span></span></a><span class="mpre"> </span><a name="loc_191_7_191_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_7_191_8&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_178_19_178_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_19_178_22&#39;)"><span class="hl_conref"><span class="mpre">Map</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><a href="#loc_196_9_196_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_9_196_12&#39;)"><span class="hl_varref"><span class="mpre">inv</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_193_9_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_9_193_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><a href="#loc_191_7_191_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_7_191_8&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    where
        </span><a name="loc_193_9_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_9_193_15&#39;)"><span class="hl_fundecl"><span class="mpre">create</span></span></a><span class="mpre"> </span><a name="loc_193_16_193_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_16_193_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = (</span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><a href="#loc_194_20_194_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_20_194_22&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">, </span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><a href="#loc_194_23_194_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_23_194_25&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre">, </span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a href="#loc_193_16_193_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_16_193_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
            where (</span><a name="loc_194_20_194_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_20_194_22&#39;)"><span class="hl_vardecl"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a name="loc_194_23_194_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_23_194_25&#39;)"><span class="hl_vardecl"><span class="mpre">vs</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">unzip</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">Map.toAscList</span></span><span class="mpre"> </span><a href="#loc_193_16_193_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_16_193_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

        </span><a name="loc_196_9_196_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_9_196_12&#39;)"><span class="hl_fundecl"><span class="mpre">inv</span></span></a><span class="mpre"> (</span><a name="loc_196_14_196_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_14_196_16&#39;)"><span class="hl_vardecl"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a name="loc_196_17_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_17_196_19&#39;)"><span class="hl_vardecl"><span class="mpre">vs</span></span></a><span class="mpre">,</span><a name="loc_196_20_196_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_20_196_21&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">)
            | </span><a href="#loc_122_27_122_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_34&#39;)"><span class="hl_varref"><span class="mpre">trigger</span></span></a><span class="mpre"> </span><a href="#loc_196_14_196_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_14_196_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre"> = </span><a href="#loc_193_9_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_9_193_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">Map.fromList</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> (</span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_196_14_196_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_14_196_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">) (</span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_196_17_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_17_196_19&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre">)
            | </span><a href="#loc_122_27_122_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_34&#39;)"><span class="hl_varref"><span class="mpre">trigger</span></span></a><span class="mpre"> </span><a href="#loc_196_17_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_17_196_19&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre"> = </span><a href="#loc_193_9_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_9_193_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">Map.fromDistinctAscList</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> (</span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_196_14_196_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_14_196_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">) (</span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_196_17_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_17_196_19&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre">) </span><span class="hl_comment"><span class="mpre">-- recreate ks/vs to reduce memory usage</span></span><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = (</span><a href="#loc_196_14_196_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_14_196_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a href="#loc_196_17_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_17_196_19&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre">,</span><a href="#loc_196_20_196_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_20_196_21&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- | Invariant preserving version of @Set@ from the @containers@ packages, suitable for use with &#39;Uniplate&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Use &#39;toSet&#39; to construct values, and &#39;fromSet&#39; to deconstruct values.</span></span><span class="mpre">
newtype </span><a name="loc_204_9_204_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_9_204_12&#39;)"><span class="hl_tycondecl"><span class="mpre">Set</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> = </span><a name="loc_204_17_204_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_17_204_20&#39;)"><span class="hl_condecl"><span class="mpre">Set</span></span></a><span class="mpre"> (</span><a href="#loc_156_6_156_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_6_156_15&#39;)"><span class="hl_tyconref"><span class="mpre">Invariant</span></span></a><span class="mpre"> (</span><a href="#loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tyconref"><span class="mpre">Trigger</span></span></a><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">], </span><a href="#loc_86_9_86_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_13&#39;)"><span class="hl_tyconref"><span class="mpre">Hide</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Set.Set</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">)))
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 205, srcSpanStartColumn = 5, srcSpanEndLine = 205, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 205, srcSpanStartColumn = 5, srcSpanEndLine = 205, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-"><span class="mpre">deriving (Data, Typeable)</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 207, srcSpanStartColumn = 10, srcSpanEndLine = 207, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 207, srcSpanStartColumn = 17, srcSpanEndLine = 207, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Show k =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> (</span><a href="#loc_204_9_204_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_9_204_12&#39;)"><span class="hl_tyconref"><span class="mpre">Set</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">) where; </span><span class="hl_vardecl"><span class="mpre">show</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_213_1_213_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_8&#39;)"><span class="hl_varref"><span class="mpre">fromSet</span></span></a><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 208, srcSpanStartColumn = 10, srcSpanEndLine = 208, srcSpanEndColumn = 17}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 208, srcSpanStartColumn = 15, srcSpanEndLine = 208, srcSpanEndColumn = 17}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Eq k =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Eq</span></span><span class="mpre"> (</span><a href="#loc_204_9_204_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_9_204_12&#39;)"><span class="hl_tyconref"><span class="mpre">Set</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">) where; </span><a name="loc_208_36_208_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_36_208_37&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_fundecl"><span class="mpre">==</span></span><span class="mpre"> </span><a name="loc_208_41_208_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_41_208_42&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_213_1_213_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_8&#39;)"><span class="hl_varref"><span class="mpre">fromSet</span></span></a><span class="mpre"> </span><a href="#loc_208_36_208_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_36_208_37&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_213_1_213_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_8&#39;)"><span class="hl_varref"><span class="mpre">fromSet</span></span></a><span class="mpre"> </span><a href="#loc_208_41_208_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_41_208_42&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 209, srcSpanStartColumn = 10, srcSpanEndLine = 209, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 209, srcSpanStartColumn = 16, srcSpanEndLine = 209, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Ord k =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Ord</span></span><span class="mpre"> (</span><a href="#loc_204_9_204_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_9_204_12&#39;)"><span class="hl_tyconref"><span class="mpre">Set</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">) where; </span><span class="hl_fundecl"><span class="mpre">compare</span></span><span class="mpre"> </span><a name="loc_209_46_209_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_46_209_47&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_209_48_209_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_48_209_49&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> (</span><a href="#loc_213_1_213_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_8&#39;)"><span class="hl_varref"><span class="mpre">fromSet</span></span></a><span class="mpre"> </span><a href="#loc_209_46_209_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_46_209_47&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="#loc_213_1_213_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_8&#39;)"><span class="hl_varref"><span class="mpre">fromSet</span></span></a><span class="mpre"> </span><a href="#loc_209_48_209_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_48_209_49&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Deconstruct a value of type &#39;Set&#39;.</span></span><span class="mpre">
</span><a href="#loc_213_1_213_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_8&#39;)"><span class="mpre">fromSet</span></a><span class="mpre"> :: </span><a href="#loc_204_9_204_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_9_204_12&#39;)"><span class="hl_tyconref"><span class="mpre">Set</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Set.Set</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">
</span><a name="loc_213_1_213_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_8&#39;)"><span class="hl_fundecl"><span class="mpre">fromSet</span></span></a><span class="mpre"> (</span><a href="#loc_204_17_204_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_17_204_20&#39;)"><span class="hl_conref"><span class="mpre">Set</span></span></a><span class="mpre"> (</span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> _ (_,</span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a name="loc_213_35_213_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_35_213_36&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">))) = </span><a href="#loc_213_35_213_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_35_213_36&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct a value of type &#39;Set&#39;.</span></span><span class="mpre">
</span><a href="#loc_217_1_217_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_6&#39;)"><span class="mpre">toSet</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 216, srcSpanStartColumn = 10, srcSpanEndLine = 216, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 216, srcSpanStartColumn = 16, srcSpanEndLine = 216, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Ord k =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Set.Set</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> -&gt; </span><a href="#loc_204_9_204_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_9_204_12&#39;)"><span class="hl_tyconref"><span class="mpre">Set</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">
</span><a name="loc_217_1_217_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_6&#39;)"><span class="hl_fundecl"><span class="mpre">toSet</span></span></a><span class="mpre"> </span><a name="loc_217_7_217_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_7_217_8&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_204_17_204_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_204_17_204_20&#39;)"><span class="hl_conref"><span class="mpre">Set</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><a href="#loc_221_9_221_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_9_221_12&#39;)"><span class="hl_varref"><span class="mpre">inv</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_219_9_219_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_9_219_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><a href="#loc_217_7_217_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_7_217_8&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    where
        </span><a name="loc_219_9_219_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_9_219_15&#39;)"><span class="hl_fundecl"><span class="mpre">create</span></span></a><span class="mpre"> </span><a name="loc_219_16_219_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_16_219_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = (</span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">Set.toList</span></span><span class="mpre"> </span><a href="#loc_219_16_219_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_16_219_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">, </span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a href="#loc_219_16_219_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_16_219_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

        </span><a name="loc_221_9_221_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_9_221_12&#39;)"><span class="hl_fundecl"><span class="mpre">inv</span></span></a><span class="mpre"> (</span><a name="loc_221_14_221_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_14_221_16&#39;)"><span class="hl_vardecl"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a name="loc_221_17_221_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_17_221_18&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">)
            | </span><a href="#loc_122_27_122_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_34&#39;)"><span class="hl_varref"><span class="mpre">trigger</span></span></a><span class="mpre"> </span><a href="#loc_221_14_221_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_14_221_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre"> = </span><a href="#loc_219_9_219_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_9_219_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">Set.fromList</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_221_14_221_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_14_221_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = (</span><a href="#loc_221_14_221_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_14_221_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a href="#loc_221_17_221_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_17_221_18&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- | Invariant preserving version of @IntMap@ from the @containers@ packages, suitable for use with &#39;Uniplate&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Use &#39;toIntMap&#39; to construct values, and &#39;fromIntMap&#39; to deconstruct values.</span></span><span class="mpre">
newtype </span><a name="loc_228_9_228_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_9_228_15&#39;)"><span class="hl_tycondecl"><span class="mpre">IntMap</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> = </span><a name="loc_228_20_228_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_20_228_26&#39;)"><span class="hl_condecl"><span class="mpre">IntMap</span></span></a><span class="mpre"> (</span><a href="#loc_156_6_156_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_6_156_15&#39;)"><span class="hl_tyconref"><span class="mpre">Invariant</span></span></a><span class="mpre"> (</span><a href="#loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tyconref"><span class="mpre">Trigger</span></span></a><span class="mpre"> [</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">], </span><a href="#loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tyconref"><span class="mpre">Trigger</span></span></a><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">], </span><a href="#loc_86_9_86_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_13&#39;)"><span class="hl_tyconref"><span class="mpre">Hide</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">IntMap.IntMap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">)))
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 229, srcSpanStartColumn = 5, srcSpanEndLine = 229, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 229, srcSpanStartColumn = 5, srcSpanEndLine = 229, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-"><span class="mpre">deriving (Data, Typeable)</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 231, srcSpanStartColumn = 10, srcSpanEndLine = 231, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 231, srcSpanStartColumn = 17, srcSpanEndLine = 231, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Show v =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> (</span><a href="#loc_228_9_228_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_9_228_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntMap</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) where; </span><span class="hl_vardecl"><span class="mpre">show</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_237_1_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntMap</span></span></a><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 232, srcSpanStartColumn = 10, srcSpanEndLine = 232, srcSpanEndColumn = 17}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 232, srcSpanStartColumn = 15, srcSpanEndLine = 232, srcSpanEndColumn = 17}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Eq v =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Eq</span></span><span class="mpre"> (</span><a href="#loc_228_9_228_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_9_228_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntMap</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) where; </span><a name="loc_232_39_232_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_39_232_40&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_fundecl"><span class="mpre">==</span></span><span class="mpre"> </span><a name="loc_232_44_232_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_44_232_45&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_237_1_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntMap</span></span></a><span class="mpre"> </span><a href="#loc_232_39_232_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_39_232_40&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_237_1_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntMap</span></span></a><span class="mpre"> </span><a href="#loc_232_44_232_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_44_232_45&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 233, srcSpanStartColumn = 10, srcSpanEndLine = 233, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 233, srcSpanStartColumn = 16, srcSpanEndLine = 233, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilena"><span class="mpre">Ord v =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Ord</span></span><span class="mpre"> (</span><a href="#loc_228_9_228_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_9_228_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntMap</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) where; </span><span class="hl_fundecl"><span class="mpre">compare</span></span><span class="mpre"> </span><a name="loc_233_49_233_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_49_233_50&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_233_51_233_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_51_233_52&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> (</span><a href="#loc_237_1_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntMap</span></span></a><span class="mpre"> </span><a href="#loc_233_49_233_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_49_233_50&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="#loc_237_1_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntMap</span></span></a><span class="mpre"> </span><a href="#loc_233_51_233_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_51_233_52&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Deconstruct a value of type &#39;IntMap&#39;.</span></span><span class="mpre">
</span><a href="#loc_237_1_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_11&#39;)"><span class="mpre">fromIntMap</span></a><span class="mpre"> :: </span><a href="#loc_228_9_228_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_9_228_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntMap</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IntMap.IntMap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">
</span><a name="loc_237_1_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_11&#39;)"><span class="hl_fundecl"><span class="mpre">fromIntMap</span></span></a><span class="mpre"> (</span><a href="#loc_228_20_228_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_20_228_26&#39;)"><span class="hl_conref"><span class="mpre">IntMap</span></span></a><span class="mpre"> (</span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> _ (_,_,</span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a name="loc_237_43_237_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_43_237_44&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">))) = </span><a href="#loc_237_43_237_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_43_237_44&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct a value of type &#39;IntMap&#39;.</span></span><span class="mpre">
</span><a href="#loc_241_1_241_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_1_241_9&#39;)"><span class="mpre">toIntMap</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IntMap.IntMap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> -&gt; </span><a href="#loc_228_9_228_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_9_228_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntMap</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">
</span><a name="loc_241_1_241_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_1_241_9&#39;)"><span class="hl_fundecl"><span class="mpre">toIntMap</span></span></a><span class="mpre"> </span><a name="loc_241_10_241_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_10_241_11&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_228_20_228_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_228_20_228_26&#39;)"><span class="hl_conref"><span class="mpre">IntMap</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><a href="#loc_246_9_246_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_9_246_12&#39;)"><span class="hl_varref"><span class="mpre">inv</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_243_9_243_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_9_243_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><a href="#loc_241_10_241_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_241_10_241_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    where
        </span><a name="loc_243_9_243_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_9_243_15&#39;)"><span class="hl_fundecl"><span class="mpre">create</span></span></a><span class="mpre"> </span><a name="loc_243_16_243_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_16_243_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = (</span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><a href="#loc_244_20_244_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_244_20_244_22&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">, </span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><a href="#loc_244_23_244_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_244_23_244_25&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre">, </span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a href="#loc_243_16_243_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_16_243_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
            where (</span><a name="loc_244_20_244_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_244_20_244_22&#39;)"><span class="hl_vardecl"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a name="loc_244_23_244_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_244_23_244_25&#39;)"><span class="hl_vardecl"><span class="mpre">vs</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">unzip</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">IntMap.toAscList</span></span><span class="mpre"> </span><a href="#loc_243_16_243_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_16_243_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

        </span><a name="loc_246_9_246_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_9_246_12&#39;)"><span class="hl_fundecl"><span class="mpre">inv</span></span></a><span class="mpre"> (</span><a name="loc_246_14_246_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_14_246_16&#39;)"><span class="hl_vardecl"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a name="loc_246_17_246_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_17_246_19&#39;)"><span class="hl_vardecl"><span class="mpre">vs</span></span></a><span class="mpre">,</span><a name="loc_246_20_246_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_20_246_21&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">)
            | </span><a href="#loc_122_27_122_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_34&#39;)"><span class="hl_varref"><span class="mpre">trigger</span></span></a><span class="mpre"> </span><a href="#loc_246_14_246_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_14_246_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre"> = </span><a href="#loc_243_9_243_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_9_243_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">IntMap.fromList</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> (</span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_246_14_246_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_14_246_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">) (</span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_246_17_246_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_17_246_19&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre">)
            | </span><a href="#loc_122_27_122_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_34&#39;)"><span class="hl_varref"><span class="mpre">trigger</span></span></a><span class="mpre"> </span><a href="#loc_246_17_246_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_17_246_19&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre"> = </span><a href="#loc_243_9_243_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_9_243_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">IntMap.fromDistinctAscList</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> (</span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_246_14_246_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_14_246_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">) (</span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_246_17_246_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_17_246_19&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre">) </span><span class="hl_comment"><span class="mpre">-- recreate ks/vs to reduce memory usage</span></span><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = (</span><a href="#loc_246_14_246_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_14_246_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a href="#loc_246_17_246_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_17_246_19&#39;)"><span class="hl_varref"><span class="mpre">vs</span></span></a><span class="mpre">,</span><a href="#loc_246_20_246_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_246_20_246_21&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- | Invariant preserving version of @IntSet@ from the @containers@ packages, suitable for use with &#39;Uniplate&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Use &#39;toIntSet&#39; to construct values, and &#39;fromIntSet&#39; to deconstruct values.</span></span><span class="mpre">
newtype </span><a name="loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_tycondecl"><span class="mpre">IntSet</span></span></a><span class="mpre"> = </span><a name="loc_254_18_254_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_18_254_24&#39;)"><span class="hl_condecl"><span class="mpre">IntSet</span></span></a><span class="mpre"> (</span><a href="#loc_156_6_156_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_6_156_15&#39;)"><span class="hl_tyconref"><span class="mpre">Invariant</span></span></a><span class="mpre"> (</span><a href="#loc_122_6_122_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_6_122_13&#39;)"><span class="hl_tyconref"><span class="mpre">Trigger</span></span></a><span class="mpre"> [</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">], </span><a href="#loc_86_9_86_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_9_86_13&#39;)"><span class="hl_tyconref"><span class="mpre">Hide</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">IntSet.IntSet</span></span><span class="mpre">)))
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 255, srcSpanStartColumn = 5, srcSpanEndLine = 255, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-1.6.12/Data/Generics/Uniplate/Data/Instances.hs&quot;, srcSpanStartLine = 255, srcSpanStartColumn = 5, srcSpanEndLine = 255, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/uniplate-"><span class="mpre">deriving (Data, Typeable)</span></span><span class="mpre">

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntSet</span></span></a><span class="mpre"> where; </span><span class="hl_vardecl"><span class="mpre">show</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_263_1_263_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_1_263_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntSet</span></span></a><span class="mpre">
instance </span><span class="hl_classref"><span class="mpre">Eq</span></span><span class="mpre"> </span><a href="#loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntSet</span></span></a><span class="mpre"> where; </span><a name="loc_258_27_258_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_27_258_28&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_fundecl"><span class="mpre">==</span></span><span class="mpre"> </span><a name="loc_258_32_258_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_32_258_33&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_263_1_263_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_1_263_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntSet</span></span></a><span class="mpre"> </span><a href="#loc_258_27_258_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_27_258_28&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_263_1_263_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_1_263_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntSet</span></span></a><span class="mpre"> </span><a href="#loc_258_32_258_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_32_258_33&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
instance </span><span class="hl_classref"><span class="mpre">Ord</span></span><span class="mpre"> </span><a href="#loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntSet</span></span></a><span class="mpre"> where; </span><span class="hl_fundecl"><span class="mpre">compare</span></span><span class="mpre"> </span><a name="loc_259_36_259_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_36_259_37&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_259_38_259_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_38_259_39&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">compare</span></span><span class="mpre"> (</span><a href="#loc_263_1_263_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_1_263_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntSet</span></span></a><span class="mpre"> </span><a href="#loc_259_36_259_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_36_259_37&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="#loc_263_1_263_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_1_263_11&#39;)"><span class="hl_varref"><span class="mpre">fromIntSet</span></span></a><span class="mpre"> </span><a href="#loc_259_38_259_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_38_259_39&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Deconstruct a value of type &#39;IntSet&#39;.</span></span><span class="mpre">
</span><a href="#loc_263_1_263_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_1_263_11&#39;)"><span class="mpre">fromIntSet</span></a><span class="mpre"> :: </span><a href="#loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntSet</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IntSet.IntSet</span></span><span class="mpre">
</span><a name="loc_263_1_263_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_1_263_11&#39;)"><span class="hl_fundecl"><span class="mpre">fromIntSet</span></span></a><span class="mpre"> (</span><a href="#loc_254_18_254_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_18_254_24&#39;)"><span class="hl_conref"><span class="mpre">IntSet</span></span></a><span class="mpre"> (</span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> _ (_,</span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a name="loc_263_41_263_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_41_263_42&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">))) = </span><a href="#loc_263_41_263_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_41_263_42&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct a value of type &#39;IntSet&#39;.</span></span><span class="mpre">
</span><a href="#loc_267_1_267_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_9&#39;)"><span class="mpre">toIntSet</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IntSet.IntSet</span></span><span class="mpre"> -&gt; </span><a href="#loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_tyconref"><span class="mpre">IntSet</span></span></a><span class="mpre">
</span><a name="loc_267_1_267_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_1_267_9&#39;)"><span class="hl_fundecl"><span class="mpre">toIntSet</span></span></a><span class="mpre"> </span><a name="loc_267_10_267_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_10_267_11&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_254_18_254_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_18_254_24&#39;)"><span class="hl_conref"><span class="mpre">IntSet</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_156_20_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_20_156_29&#39;)"><span class="hl_conref"><span class="mpre">Invariant</span></span></a><span class="mpre"> </span><a href="#loc_271_9_271_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_9_271_12&#39;)"><span class="hl_varref"><span class="mpre">inv</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_269_9_269_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_9_269_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><a href="#loc_267_10_267_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_10_267_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    where
        </span><a name="loc_269_9_269_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_9_269_15&#39;)"><span class="hl_fundecl"><span class="mpre">create</span></span></a><span class="mpre"> </span><a name="loc_269_16_269_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_16_269_17&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = (</span><a href="#loc_122_18_122_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_18_122_25&#39;)"><span class="hl_conref"><span class="mpre">Trigger</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">IntSet.toList</span></span><span class="mpre"> </span><a href="#loc_269_16_269_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_16_269_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">, </span><a href="#loc_86_18_86_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_18_86_22&#39;)"><span class="hl_conref"><span class="mpre">Hide</span></span></a><span class="mpre"> </span><a href="#loc_269_16_269_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_16_269_17&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

        </span><a name="loc_271_9_271_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_9_271_12&#39;)"><span class="hl_fundecl"><span class="mpre">inv</span></span></a><span class="mpre"> (</span><a name="loc_271_14_271_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_14_271_16&#39;)"><span class="hl_vardecl"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a name="loc_271_17_271_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_17_271_18&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">)
            | </span><a href="#loc_122_27_122_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_27_122_34&#39;)"><span class="hl_varref"><span class="mpre">trigger</span></span></a><span class="mpre"> </span><a href="#loc_271_14_271_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_14_271_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre"> = </span><a href="#loc_269_9_269_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_9_269_15&#39;)"><span class="hl_varref"><span class="mpre">create</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">IntSet.fromList</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_122_44_122_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_44_122_55&#39;)"><span class="hl_varref"><span class="mpre">fromTrigger</span></span></a><span class="mpre"> </span><a href="#loc_271_14_271_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_14_271_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = (</span><a href="#loc_271_14_271_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_14_271_16&#39;)"><span class="hl_varref"><span class="mpre">ks</span></span></a><span class="mpre">,</span><a href="#loc_271_17_271_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_17_271_18&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
</span></div></body></html>