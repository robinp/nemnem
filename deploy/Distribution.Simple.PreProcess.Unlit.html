<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Distribution.Simple.PreProcess.Unlit</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  ...</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  cabal-devel@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Remove the \&quot;literal\&quot; markups from a Haskell source file, including</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \&quot;@&gt;@\&quot;, \&quot;@\\begin{code}@\&quot;, \&quot;@\\end{code}@\&quot;, and \&quot;@#@\&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- This version is interesting because instead of striping comment lines, it</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- turns them into &quot;-- &quot; style comments. This allows using haddock markup</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- in literate scripts without having to use &quot;&gt; --&quot; prefix.</span></span><span class="mpre">

module Distribution.Simple.PreProcess.Unlit (unlit,plain) where

import Data.Char
import Data.List

data </span><a name="loc_21_6_21_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_6_21_16&#39;)"><span class="hl_tycondecl"><span class="mpre">Classified</span></span></a><span class="mpre"> = </span><a name="loc_21_19_21_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_28&#39;)"><span class="hl_condecl"><span class="mpre">BirdTrack</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> | </span><a name="loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_condecl"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> | </span><a name="loc_21_53_21_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_53_21_61&#39;)"><span class="hl_condecl"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
                | </span><a name="loc_22_19_22_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_19_22_23&#39;)"><span class="hl_condecl"><span class="mpre">Line</span></span></a><span class="mpre"> !</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> | </span><a name="loc_22_38_22_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_41&#39;)"><span class="hl_condecl"><span class="mpre">CPP</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
                | </span><a name="loc_23_19_23_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_19_23_28&#39;)"><span class="hl_condecl"><span class="mpre">BeginCode</span></span></a><span class="mpre"> | </span><a name="loc_23_31_23_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_31_23_38&#39;)"><span class="hl_condecl"><span class="mpre">EndCode</span></span></a><span class="mpre">
                </span><span class="hl_comment"><span class="mpre">-- output only:</span></span><span class="mpre">
                | </span><a name="loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_condecl"><span class="mpre">Error</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> | </span><a name="loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_condecl"><span class="mpre">Comment</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | No unliteration.</span></span><span class="mpre">
</span><a href="#loc_29_1_29_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_1_29_6&#39;)"><span class="mpre">plain</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_29_1_29_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_1_29_6&#39;)"><span class="hl_fundecl"><span class="mpre">plain</span></span></a><span class="mpre"> _ </span><a name="loc_29_9_29_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_9_29_11&#39;)"><span class="hl_vardecl"><span class="mpre">hs</span></span></a><span class="mpre"> = </span><a href="#loc_29_9_29_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_9_29_11&#39;)"><span class="hl_varref"><span class="mpre">hs</span></span></a><span class="mpre">

</span><a href="#loc_32_1_32_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_9&#39;)"><span class="mpre">classify</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><a href="#loc_21_6_21_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_6_21_16&#39;)"><span class="hl_tyconref"><span class="mpre">Classified</span></span></a><span class="mpre">
</span><a name="loc_32_1_32_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_9&#39;)"><span class="hl_fundecl"><span class="mpre">classify</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;&gt;&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_32_15_32_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_15_32_16&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="#loc_21_19_21_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_28&#39;)"><span class="hl_conref"><span class="mpre">BirdTrack</span></span></a><span class="mpre"> </span><a href="#loc_32_15_32_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_15_32_16&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><a href="#loc_32_1_32_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_9&#39;)"><span class="hl_fundecl"><span class="mpre">classify</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;#&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_33_15_33_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_15_33_16&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = case </span><a href="#loc_40_9_40_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_9_40_15&#39;)"><span class="hl_varref"><span class="mpre">tokens</span></span></a><span class="mpre"> </span><a href="#loc_33_15_33_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_15_33_16&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
                     (</span><a name="loc_34_23_34_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_23_34_27&#39;)"><span class="hl_vardecl"><span class="mpre">line</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_34_28_34_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_28_34_32&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_) | </span><span class="hl_varref"><span class="mpre">all</span></span><span class="mpre"> </span><a href="GHC.Unicode.html#loc_103_1_103_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_103_1_103_8&#39;)"><span class="hl_varref"><span class="mpre">isDigit</span></span></a><span class="mpre"> </span><a href="#loc_34_23_34_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_23_34_27&#39;)"><span class="hl_varref"><span class="mpre">line</span></span></a><span class="mpre">
                                  </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">length</span></span><span class="mpre"> </span><a href="#loc_34_28_34_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_28_34_32&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">
                                  </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">head</span></span><span class="mpre"> </span><a href="#loc_34_28_34_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_28_34_32&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;&quot;&#39;</span></span><span class="mpre">
                                  </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">last</span></span><span class="mpre"> </span><a href="#loc_34_28_34_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_28_34_32&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;&quot;&#39;</span></span><span class="mpre">
                                -&gt; </span><a href="#loc_22_19_22_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_19_22_23&#39;)"><span class="hl_conref"><span class="mpre">Line</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">read</span></span><span class="mpre"> </span><a href="#loc_34_23_34_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_23_34_27&#39;)"><span class="hl_varref"><span class="mpre">line</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">tail</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">init</span></span><span class="mpre"> </span><a href="#loc_34_28_34_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_28_34_32&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre">))
                     _          -&gt; </span><a href="#loc_22_38_22_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_41&#39;)"><span class="hl_conref"><span class="mpre">CPP</span></span></a><span class="mpre"> </span><a href="#loc_33_15_33_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_15_33_16&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
  where </span><a name="loc_40_9_40_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_9_40_15&#39;)"><span class="hl_vardecl"><span class="mpre">tokens</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_984_1_984_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_984_1_984_8&#39;)"><span class="hl_varref"><span class="mpre">unfoldr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_40_29_40_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_29_40_32&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">lex</span></span><span class="mpre"> </span><a href="#loc_40_29_40_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_29_40_32&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre"> of
                                   (</span><a name="loc_41_37_41_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_37_41_38&#39;)"><span class="hl_specname"><span class="mpre">t</span></span></a><span class="mpre">@(_</span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_), </span><a name="loc_41_46_41_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_46_41_50&#39;)"><span class="hl_vardecl"><span class="mpre">str&#39;</span></span></a><span class="mpre">)</span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_ -&gt; </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_41_37_41_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_37_41_38&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">, </span><a href="#loc_41_46_41_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_46_41_50&#39;)"><span class="hl_varref"><span class="mpre">str&#39;</span></span></a><span class="mpre">)
                                   _                 -&gt; </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
</span><a href="#loc_32_1_32_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_9&#39;)"><span class="hl_fundecl"><span class="mpre">classify</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;\\&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_43_16_43_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_16_43_17&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)
  | </span><span class="hl_string"><span class="mpre">&quot;begin{code}&quot;</span></span><span class="mpre"> </span><a href="Data.List.html#loc_286_1_286_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_286_1_286_11&#39;)"><span class="hl_infix"><span class="mpre">`isPrefixOf`</span></span></a><span class="mpre"> </span><a href="#loc_43_16_43_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_16_43_17&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_23_19_23_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_19_23_28&#39;)"><span class="hl_conref"><span class="mpre">BeginCode</span></span></a><span class="mpre">
  | </span><span class="hl_string"><span class="mpre">&quot;end{code}&quot;</span></span><span class="mpre">   </span><a href="Data.List.html#loc_286_1_286_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_286_1_286_11&#39;)"><span class="hl_infix"><span class="mpre">`isPrefixOf`</span></span></a><span class="mpre"> </span><a href="#loc_43_16_43_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_16_43_17&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_23_31_23_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_31_23_38&#39;)"><span class="hl_conref"><span class="mpre">EndCode</span></span></a><span class="mpre">
</span><a href="#loc_32_1_32_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_9&#39;)"><span class="hl_fundecl"><span class="mpre">classify</span></span></a><span class="mpre"> </span><a name="loc_46_10_46_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_10_46_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">all</span></span><span class="mpre"> </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="hl_varref"><span class="mpre">isSpace</span></span></a><span class="mpre"> </span><a href="#loc_46_10_46_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_10_46_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">       = </span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><a href="#loc_46_10_46_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_10_46_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><a href="#loc_32_1_32_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_9&#39;)"><span class="hl_fundecl"><span class="mpre">classify</span></span></a><span class="mpre"> </span><a name="loc_47_10_47_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_10_47_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">                       = </span><a href="#loc_21_53_21_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_53_21_61&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><a href="#loc_47_10_47_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_10_47_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- So the weird exception for comment indenting is to make things work with</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- haddock, see classifyAndCheckForBirdTracks below.</span></span><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="mpre">unclassify</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> -&gt; </span><a href="#loc_21_6_21_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_6_21_16&#39;)"><span class="hl_tyconref"><span class="mpre">Classified</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> _     (</span><a href="#loc_21_19_21_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_28&#39;)"><span class="hl_conref"><span class="mpre">BirdTrack</span></span></a><span class="mpre"> </span><a name="loc_52_29_52_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_29_52_30&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><span class="hl_char"><span class="mpre">&#39; &#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_52_29_52_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_29_52_30&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> _     (</span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><a name="loc_53_25_53_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_25_53_26&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)     = </span><a href="#loc_53_25_53_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_25_53_26&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> _     (</span><a href="#loc_21_53_21_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_53_21_61&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> </span><a name="loc_54_28_54_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_28_54_29&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)  = </span><a href="#loc_54_28_54_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_28_54_29&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> _     (</span><a href="#loc_22_19_22_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_19_22_23&#39;)"><span class="hl_conref"><span class="mpre">Line</span></span></a><span class="mpre"> </span><a name="loc_55_24_55_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_24_55_25&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_55_26_55_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_26_55_30&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;# &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_55_24_55_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_24_55_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_55_26_55_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_26_55_30&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> _     (</span><a href="#loc_22_38_22_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_41&#39;)"><span class="hl_conref"><span class="mpre">CPP</span></span></a><span class="mpre"> </span><a name="loc_56_23_56_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_23_56_24&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)       = </span><span class="hl_char"><span class="mpre">&#39;#&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_56_23_56_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_23_56_24&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">  (</span><a href="#loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_conref"><span class="mpre">Comment</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)  = </span><span class="hl_string"><span class="mpre">&quot;  --&quot;</span></span><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">  (</span><a href="#loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_conref"><span class="mpre">Comment</span></span></a><span class="mpre"> </span><a name="loc_58_27_58_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_27_58_28&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)   = </span><span class="hl_string"><span class="mpre">&quot;  -- &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_58_27_58_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_27_58_28&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> (</span><a href="#loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_conref"><span class="mpre">Comment</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)  = </span><span class="hl_string"><span class="mpre">&quot;--&quot;</span></span><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> (</span><a href="#loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_conref"><span class="mpre">Comment</span></span></a><span class="mpre"> </span><a name="loc_60_27_60_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_27_60_28&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)   = </span><span class="hl_string"><span class="mpre">&quot;-- &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_60_27_60_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_27_60_28&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_fundecl"><span class="mpre">unclassify</span></span></a><span class="mpre"> _     _             = </span><a href="#loc_165_1_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_14&#39;)"><span class="hl_varref"><span class="mpre">internalError</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;unlit&#39; takes a filename (for error reports), and transforms the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   given string, to eliminate the literate comments from the program text.</span></span><span class="mpre">
</span><a href="#loc_66_1_66_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_1_66_6&#39;)"><span class="mpre">unlit</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_66_1_66_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_1_66_6&#39;)"><span class="hl_fundecl"><span class="mpre">unlit</span></span></a><span class="mpre"> </span><a name="loc_66_7_66_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_7_66_11&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre"> </span><a name="loc_66_12_66_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_12_66_17&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> =
  let (</span><a name="loc_67_8_67_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_8_67_22&#39;)"><span class="hl_vardecl"><span class="mpre">usesBirdTracks</span></span></a><span class="mpre">, </span><a name="loc_67_24_67_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_24_67_34&#39;)"><span class="hl_vardecl"><span class="mpre">classified</span></span></a><span class="mpre">) = </span><a href="#loc_89_5_89_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_5_89_34&#39;)"><span class="hl_varref"><span class="mpre">classifyAndCheckForBirdTracks</span></span></a><span class="mpre">
                                   </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_156_1_156_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_1_156_8&#39;)"><span class="hl_varref"><span class="mpre">inlines</span></span></a><span class="mpre">
                                   </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_66_12_66_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_12_66_17&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre">
   in </span><span class="hl_varref"><span class="mpre">either</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.List.html#loc_1060_1_1060_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1060_1_1060_8&#39;)"><span class="hl_varref"><span class="mpre">unlines</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="#loc_52_1_52_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_11&#39;)"><span class="hl_varref"><span class="mpre">unclassify</span></span></a><span class="mpre"> </span><a href="#loc_67_8_67_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_8_67_22&#39;)"><span class="hl_varref"><span class="mpre">usesBirdTracks</span></span></a><span class="mpre">))
              </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre">
    </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_97_5_97_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_5_97_16&#39;)"><span class="hl_varref"><span class="mpre">checkErrors</span></span></a><span class="mpre">
    </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_11&#39;)"><span class="hl_varref"><span class="mpre">reclassify</span></span></a><span class="mpre">
    </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_67_24_67_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_24_67_34&#39;)"><span class="hl_varref"><span class="mpre">classified</span></span></a><span class="mpre">

  where
    </span><span class="hl_comment"><span class="mpre">-- So haddock requires comments and code to align, since it treats comments</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- as following the layout rule. This is a pain for us since bird track</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- style literate code typically gets indented by two since &quot;&gt;&quot; is replaced</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- by &quot; &quot; and people usually use one additional space of indent ie</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- &quot;&gt; then the code&quot;. On the other hand we cannot just go and indent all</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- the comments by two since that does not work for latex style literate</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- code. So the hacky solution we use here is that if we see any bird track</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- style code then we&#39;ll indent all comments by two, otherwise by none.</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- Of course this will not work for mixed latex/bird track .lhs files but</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- nobody does that, it&#39;s silly and specifically recommended against in the</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- H98 unlit spec.</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
    </span><a name="loc_89_5_89_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_5_89_34&#39;)"><span class="hl_vardecl"><span class="mpre">classifyAndCheckForBirdTracks</span></span></a><span class="mpre"> =
      </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="Data.List.html#loc_480_1_480_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_480_1_480_10&#39;)"><span class="hl_varref"><span class="mpre">mapAccumL</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_90_31_90_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_31_90_44&#39;)"><span class="hl_vardecl"><span class="mpre">seenBirdTrack</span></span></a><span class="mpre"> </span><a name="loc_90_45_90_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_45_90_49&#39;)"><span class="hl_vardecl"><span class="mpre">line</span></span></a><span class="mpre"> -&gt;
        let </span><a name="loc_91_13_91_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_13_91_27&#39;)"><span class="hl_vardecl"><span class="mpre">classification</span></span></a><span class="mpre"> = </span><a href="#loc_32_1_32_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_9&#39;)"><span class="hl_varref"><span class="mpre">classify</span></span></a><span class="mpre"> </span><a href="#loc_90_45_90_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_45_90_49&#39;)"><span class="hl_varref"><span class="mpre">line</span></span></a><span class="mpre">
         in (</span><a href="#loc_90_31_90_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_31_90_44&#39;)"><span class="hl_varref"><span class="mpre">seenBirdTrack</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_94_5_94_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_5_94_16&#39;)"><span class="hl_varref"><span class="mpre">isBirdTrack</span></span></a><span class="mpre"> </span><a href="#loc_91_13_91_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_13_91_27&#39;)"><span class="hl_varref"><span class="mpre">classification</span></span></a><span class="mpre">, </span><a href="#loc_91_13_91_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_13_91_27&#39;)"><span class="hl_varref"><span class="mpre">classification</span></span></a><span class="mpre">)

    </span><a name="loc_94_5_94_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_5_94_16&#39;)"><span class="hl_fundecl"><span class="mpre">isBirdTrack</span></span></a><span class="mpre"> (</span><a href="#loc_21_19_21_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_28&#39;)"><span class="hl_conref"><span class="mpre">BirdTrack</span></span></a><span class="mpre"> _) = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
    </span><a href="#loc_94_5_94_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_5_94_16&#39;)"><span class="hl_fundecl"><span class="mpre">isBirdTrack</span></span></a><span class="mpre"> _             = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">

    </span><a name="loc_97_5_97_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_5_97_16&#39;)"><span class="hl_fundecl"><span class="mpre">checkErrors</span></span></a><span class="mpre"> </span><a name="loc_97_17_97_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_17_97_19&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre"> = case [ </span><a href="#loc_97_39_97_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_39_97_40&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> | </span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre"> </span><a name="loc_97_39_97_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_39_97_40&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_97_17_97_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_17_97_19&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre"> ] of
      []          -&gt; </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">  </span><a href="#loc_97_17_97_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_17_97_19&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
      (</span><a name="loc_99_8_99_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_8_99_15&#39;)"><span class="hl_vardecl"><span class="mpre">message</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_) -&gt; </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a href="#loc_100_16_100_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_16_100_17&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;:&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_100_19_100_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_19_100_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_99_8_99_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_8_99_15&#39;)"><span class="hl_varref"><span class="mpre">message</span></span></a><span class="mpre">)
        where (</span><a name="loc_100_16_100_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_16_100_17&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">, </span><a name="loc_100_19_100_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_19_100_20&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre">) = </span><a href="#loc_101_5_101_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_13&#39;)"><span class="hl_varref"><span class="mpre">errorPos</span></span></a><span class="mpre"> </span><a href="#loc_66_7_66_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_7_66_11&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><a href="#loc_97_17_97_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_17_97_19&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a name="loc_101_5_101_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_13&#39;)"><span class="hl_fundecl"><span class="mpre">errorPos</span></span></a><span class="mpre"> </span><a name="loc_101_14_101_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_14_101_15&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_101_16_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_16_101_17&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> []              = (</span><a href="#loc_101_14_101_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_14_101_15&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">, </span><a href="#loc_101_16_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_16_101_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
    </span><a href="#loc_101_5_101_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_13&#39;)"><span class="hl_fundecl"><span class="mpre">errorPos</span></span></a><span class="mpre"> </span><a name="loc_102_14_102_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_14_102_15&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_102_16_102_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_16_102_17&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> (</span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre"> _</span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_)     = (</span><a href="#loc_102_14_102_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_14_102_15&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">, </span><a href="#loc_102_16_102_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_16_102_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
    </span><a href="#loc_101_5_101_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_13&#39;)"><span class="hl_fundecl"><span class="mpre">errorPos</span></span></a><span class="mpre"> _ _ (</span><a href="#loc_22_19_22_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_19_22_23&#39;)"><span class="hl_conref"><span class="mpre">Line</span></span></a><span class="mpre"> </span><a name="loc_103_24_103_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_24_103_26&#39;)"><span class="hl_vardecl"><span class="mpre">n&#39;</span></span></a><span class="mpre"> </span><a name="loc_103_27_103_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_27_103_29&#39;)"><span class="hl_vardecl"><span class="mpre">f&#39;</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_103_30_103_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_30_103_32&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_101_5_101_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_13&#39;)"><span class="hl_varref"><span class="mpre">errorPos</span></span></a><span class="mpre"> </span><a href="#loc_103_27_103_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_27_103_29&#39;)"><span class="hl_varref"><span class="mpre">f&#39;</span></span></a><span class="mpre"> </span><a href="#loc_103_24_103_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_24_103_26&#39;)"><span class="hl_varref"><span class="mpre">n&#39;</span></span></a><span class="mpre"> </span><a href="#loc_103_30_103_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_30_103_32&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_101_5_101_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_13&#39;)"><span class="hl_fundecl"><span class="mpre">errorPos</span></span></a><span class="mpre"> </span><a name="loc_104_14_104_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_14_104_15&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_104_16_104_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_16_104_17&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> (_         </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_104_30_104_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_30_104_32&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_101_5_101_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_13&#39;)"><span class="hl_varref"><span class="mpre">errorPos</span></span></a><span class="mpre"> </span><a href="#loc_104_14_104_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_14_104_15&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">  (</span><a href="#loc_104_16_104_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_16_104_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_104_30_104_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_30_104_32&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Here we model a state machine, with each state represented by</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a local function. We only have four states (well, five,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- if you count the error state), but the rules</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to transition between then are not so simple.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Would it be simpler to have more states?</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Each state represents the type of line that was last read</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- i.e. are we in a comment section, or a latex-code section,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- or a bird-code section, etc?</span></span><span class="mpre">
</span><a href="#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_11&#39;)"><span class="mpre">reclassify</span></a><span class="mpre"> :: [</span><a href="#loc_21_6_21_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_6_21_16&#39;)"><span class="hl_tyconref"><span class="mpre">Classified</span></span></a><span class="mpre">] -&gt; [</span><a href="#loc_21_6_21_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_6_21_16&#39;)"><span class="hl_tyconref"><span class="mpre">Classified</span></span></a><span class="mpre">]
</span><a name="loc_116_1_116_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_11&#39;)"><span class="hl_vardecl"><span class="mpre">reclassify</span></span></a><span class="mpre"> = </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_varref"><span class="mpre">blank</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- begin in blank state</span></span><span class="mpre">
  where
    </span><a name="loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">latex</span></span></a><span class="mpre"> []               = []
    </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">latex</span></span></a><span class="mpre"> (</span><a href="#loc_23_31_23_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_31_23_38&#39;)"><span class="hl_conref"><span class="mpre">EndCode</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_119_24_119_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_24_119_26&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_varref"><span class="mpre">comment</span></span></a><span class="mpre"> </span><a href="#loc_119_24_119_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_24_119_26&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">latex</span></span></a><span class="mpre"> (</span><a href="#loc_23_19_23_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_19_23_28&#39;)"><span class="hl_conref"><span class="mpre">BeginCode</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_ ) = [</span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\\begin{code} in code section&quot;</span></span><span class="mpre">]
    </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">latex</span></span></a><span class="mpre"> (</span><a href="#loc_21_19_21_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_28&#39;)"><span class="hl_conref"><span class="mpre">BirdTrack</span></span></a><span class="mpre"> </span><a name="loc_121_22_121_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_22_121_23&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_121_24_121_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_24_121_26&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_21_53_21_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_53_21_61&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;&gt;&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_121_22_121_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_22_121_23&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_varref"><span class="mpre">latex</span></span></a><span class="mpre"> </span><a href="#loc_121_24_121_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_24_121_26&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">latex</span></span></a><span class="mpre"> (          </span><a name="loc_122_22_122_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_22_122_23&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_122_24_122_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_24_122_26&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_122_22_122_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_22_122_23&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_varref"><span class="mpre">latex</span></span></a><span class="mpre"> </span><a href="#loc_122_24_122_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_24_122_26&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">

    </span><a name="loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_fundecl"><span class="mpre">blank</span></span></a><span class="mpre"> []               = []
    </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_fundecl"><span class="mpre">blank</span></span></a><span class="mpre"> (</span><a href="#loc_23_31_23_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_31_23_38&#39;)"><span class="hl_conref"><span class="mpre">EndCode</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_ ) = [</span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\\end{code} without \\begin{code}&quot;</span></span><span class="mpre">]
    </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_fundecl"><span class="mpre">blank</span></span></a><span class="mpre"> (</span><a href="#loc_23_19_23_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_19_23_28&#39;)"><span class="hl_conref"><span class="mpre">BeginCode</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_126_24_126_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_24_126_26&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">    </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_varref"><span class="mpre">latex</span></span></a><span class="mpre"> </span><a href="#loc_126_24_126_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_24_126_26&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_fundecl"><span class="mpre">blank</span></span></a><span class="mpre"> (</span><a href="#loc_21_19_21_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_28&#39;)"><span class="hl_conref"><span class="mpre">BirdTrack</span></span></a><span class="mpre"> </span><a name="loc_127_22_127_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_22_127_23&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_127_24_127_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_24_127_26&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_21_19_21_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_28&#39;)"><span class="hl_conref"><span class="mpre">BirdTrack</span></span></a><span class="mpre"> </span><a href="#loc_127_22_127_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_22_127_23&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_131_5_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_9&#39;)"><span class="hl_varref"><span class="mpre">bird</span></span></a><span class="mpre"> </span><a href="#loc_127_24_127_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_24_127_26&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_fundecl"><span class="mpre">blank</span></span></a><span class="mpre"> (</span><a href="#loc_21_53_21_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_53_21_61&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre">  </span><a name="loc_128_22_128_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_22_128_23&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_128_24_128_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_24_128_26&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_conref"><span class="mpre">Comment</span></span></a><span class="mpre">   </span><a href="#loc_128_22_128_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_22_128_23&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_varref"><span class="mpre">comment</span></span></a><span class="mpre"> </span><a href="#loc_128_24_128_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_24_128_26&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_fundecl"><span class="mpre">blank</span></span></a><span class="mpre"> (          </span><a name="loc_129_22_129_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_22_129_23&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_129_24_129_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_24_129_26&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) =           </span><a href="#loc_129_22_129_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_22_129_23&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_varref"><span class="mpre">blank</span></span></a><span class="mpre"> </span><a href="#loc_129_24_129_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_24_129_26&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">

    </span><a name="loc_131_5_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_9&#39;)"><span class="hl_fundecl"><span class="mpre">bird</span></span></a><span class="mpre"> []              = []
    </span><a href="#loc_131_5_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_9&#39;)"><span class="hl_fundecl"><span class="mpre">bird</span></span></a><span class="mpre"> (</span><a href="#loc_23_31_23_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_31_23_38&#39;)"><span class="hl_conref"><span class="mpre">EndCode</span></span></a><span class="mpre">   </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_ ) = [</span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\\end{code} without \\begin{code}&quot;</span></span><span class="mpre">]
    </span><a href="#loc_131_5_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_9&#39;)"><span class="hl_fundecl"><span class="mpre">bird</span></span></a><span class="mpre"> (</span><a href="#loc_23_19_23_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_19_23_28&#39;)"><span class="hl_conref"><span class="mpre">BeginCode</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_133_22_133_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_22_133_24&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_varref"><span class="mpre">latex</span></span></a><span class="mpre"> </span><a href="#loc_133_22_133_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_22_133_24&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_131_5_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_9&#39;)"><span class="hl_fundecl"><span class="mpre">bird</span></span></a><span class="mpre"> (</span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><a name="loc_134_17_134_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_17_134_18&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">   </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_134_22_134_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_22_134_24&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><a href="#loc_134_17_134_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_17_134_18&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_varref"><span class="mpre">blank</span></span></a><span class="mpre"> </span><a href="#loc_134_22_134_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_134_22_134_24&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_131_5_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_9&#39;)"><span class="hl_fundecl"><span class="mpre">bird</span></span></a><span class="mpre"> (</span><a href="#loc_21_53_21_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_53_21_61&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre"> _</span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_ ) = [</span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;program line before comment line&quot;</span></span><span class="mpre">]
    </span><a href="#loc_131_5_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_9&#39;)"><span class="hl_fundecl"><span class="mpre">bird</span></span></a><span class="mpre"> (         </span><a name="loc_136_20_136_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_20_136_21&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_136_22_136_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_22_136_24&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_136_20_136_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_20_136_21&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_131_5_131_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_5_131_9&#39;)"><span class="hl_varref"><span class="mpre">bird</span></span></a><span class="mpre"> </span><a href="#loc_136_22_136_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_22_136_24&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">

    </span><a name="loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> []               = []
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_23_31_23_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_31_23_38&#39;)"><span class="hl_conref"><span class="mpre">EndCode</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_ ) = [</span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\\end{code} without \\begin{code}&quot;</span></span><span class="mpre">]
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_23_19_23_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_19_23_28&#39;)"><span class="hl_conref"><span class="mpre">BeginCode</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_140_26_140_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_26_140_28&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_5_118_10&#39;)"><span class="hl_varref"><span class="mpre">latex</span></span></a><span class="mpre"> </span><a href="#loc_140_26_140_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_26_140_28&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_22_38_22_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_41&#39;)"><span class="hl_conref"><span class="mpre">CPP</span></span></a><span class="mpre"> </span><a name="loc_141_18_141_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_18_141_19&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">      </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_141_26_141_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_26_141_28&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_22_38_22_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_41&#39;)"><span class="hl_conref"><span class="mpre">CPP</span></span></a><span class="mpre"> </span><a href="#loc_141_18_141_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_18_141_19&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_varref"><span class="mpre">comment</span></span></a><span class="mpre"> </span><a href="#loc_141_26_141_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_26_141_28&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_21_19_21_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_28&#39;)"><span class="hl_conref"><span class="mpre">BirdTrack</span></span></a><span class="mpre"> _</span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_ ) = [</span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;comment line before program line&quot;</span></span><span class="mpre">]
    </span><span class="hl_comment"><span class="mpre">-- a blank line and another ordinary line following a comment</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- will be treated as continuing the comment. Otherwise it&#39;s</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- then end of the comment, with a blank line.</span></span><span class="mpre">
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre">     </span><a name="loc_146_24_146_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_24_146_25&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_146_26_146_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_26_146_28&#39;)"><span class="hl_specname"><span class="mpre">ls</span></span></a><span class="mpre">@(</span><a href="#loc_21_53_21_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_53_21_61&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre">  _</span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_)) = </span><a href="#loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_conref"><span class="mpre">Comment</span></span></a><span class="mpre"> </span><a href="#loc_146_24_146_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_24_146_25&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_varref"><span class="mpre">comment</span></span></a><span class="mpre"> </span><a href="#loc_146_26_146_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_26_146_28&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre">     </span><a name="loc_147_24_147_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_24_147_25&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_147_26_147_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_26_147_28&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_21_38_21_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_38_21_43&#39;)"><span class="hl_conref"><span class="mpre">Blank</span></span></a><span class="mpre"> </span><a href="#loc_147_24_147_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_24_147_25&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">   </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_124_5_124_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_10&#39;)"><span class="hl_varref"><span class="mpre">blank</span></span></a><span class="mpre"> </span><a href="#loc_147_26_147_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_26_147_28&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_22_19_22_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_19_22_23&#39;)"><span class="hl_conref"><span class="mpre">Line</span></span></a><span class="mpre"> </span><a name="loc_148_19_148_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_19_148_20&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_148_21_148_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_21_148_22&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">   </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_148_26_148_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_26_148_28&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_22_19_22_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_19_22_23&#39;)"><span class="hl_conref"><span class="mpre">Line</span></span></a><span class="mpre"> </span><a href="#loc_148_19_148_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_19_148_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_148_21_148_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_21_148_22&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_varref"><span class="mpre">comment</span></span></a><span class="mpre"> </span><a href="#loc_148_26_148_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_26_148_28&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_21_53_21_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_53_21_61&#39;)"><span class="hl_conref"><span class="mpre">Ordinary</span></span></a><span class="mpre">  </span><a name="loc_149_24_149_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_24_149_25&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_149_26_149_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_26_149_28&#39;)"><span class="hl_vardecl"><span class="mpre">ls</span></span></a><span class="mpre">) = </span><a href="#loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_conref"><span class="mpre">Comment</span></span></a><span class="mpre"> </span><a href="#loc_149_24_149_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_24_149_25&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_varref"><span class="mpre">comment</span></span></a><span class="mpre"> </span><a href="#loc_149_26_149_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_149_26_149_28&#39;)"><span class="hl_varref"><span class="mpre">ls</span></span></a><span class="mpre">
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_25_34_25_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_34_25_41&#39;)"><span class="hl_conref"><span class="mpre">Comment</span></span></a><span class="mpre">   _</span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> _) = </span><a href="#loc_165_1_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_14&#39;)"><span class="hl_varref"><span class="mpre">internalError</span></span></a><span class="mpre">
    </span><a href="#loc_138_5_138_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_5_138_12&#39;)"><span class="hl_fundecl"><span class="mpre">comment</span></span></a><span class="mpre"> (</span><a href="#loc_25_19_25_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_19_25_24&#39;)"><span class="hl_conref"><span class="mpre">Error</span></span></a><span class="mpre">     _</span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> _) = </span><a href="#loc_165_1_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_14&#39;)"><span class="hl_varref"><span class="mpre">internalError</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Re-implementation of &#39;lines&#39;, for better efficiency (but decreased laziness).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Also, importantly, accepts non-standard DOS and Mac line ending characters.</span></span><span class="mpre">
</span><a href="#loc_156_1_156_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_1_156_8&#39;)"><span class="mpre">inlines</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">]
</span><a name="loc_156_1_156_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_1_156_8&#39;)"><span class="hl_fundecl"><span class="mpre">inlines</span></span></a><span class="mpre"> </span><a name="loc_156_9_156_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_9_156_11&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_varref"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> </span><a href="#loc_156_9_156_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_9_156_11&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
  where
  </span><a name="loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_fundecl"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> []             </span><a name="loc_158_25_158_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_25_158_28&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> = [</span><a href="#loc_158_25_158_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_25_158_28&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre"> []]
  </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_fundecl"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;\^M&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_159_22_159_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_22_159_23&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) </span><a name="loc_159_25_159_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_25_159_28&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> = </span><a href="#loc_159_25_159_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_25_159_28&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre"> [] </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_varref"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> </span><a href="#loc_159_22_159_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_159_22_159_23&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- DOS</span></span><span class="mpre">
  </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_fundecl"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;\^M&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_160_17_160_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_17_160_18&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)      </span><a name="loc_160_25_160_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_25_160_28&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> = </span><a href="#loc_160_25_160_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_25_160_28&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre"> [] </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_varref"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> </span><a href="#loc_160_17_160_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_17_160_18&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- MacOS</span></span><span class="mpre">
  </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_fundecl"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_161_16_161_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_16_161_17&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)       </span><a name="loc_161_25_161_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_25_161_28&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> = </span><a href="#loc_161_25_161_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_25_161_28&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre"> [] </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_varref"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> </span><a href="#loc_161_16_161_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_16_161_17&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- Unix</span></span><span class="mpre">
  </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_fundecl"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> (</span><a name="loc_162_11_162_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_11_162_12&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_162_13_162_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_13_162_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">)          </span><a name="loc_162_25_162_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_25_162_28&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> = </span><a href="#loc_158_3_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_3_158_9&#39;)"><span class="hl_varref"><span class="mpre">lines&#39;</span></span></a><span class="mpre"> </span><a href="#loc_162_13_162_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_13_162_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> (</span><a href="#loc_162_25_162_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_25_162_28&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> (</span><a href="#loc_162_11_162_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_11_162_12&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">))

</span><a href="#loc_165_1_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_14&#39;)"><span class="mpre">internalError</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_165_1_165_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_14&#39;)"><span class="hl_vardecl"><span class="mpre">internalError</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;unlit: internal error&quot;</span></span><span class="mpre">
</span></div></body></html>