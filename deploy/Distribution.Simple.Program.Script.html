<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Distribution.Simple.Program.Script</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  Duncan Coutts 2009</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  cabal-devel@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This module provides an library interface to the @hc-pkg@ program.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Currently only GHC and LHC have hc-pkg programs.</span></span><span class="mpre">

module Distribution.Simple.Program.Script (

    invocationAsSystemScript,
    invocationAsShellScript,
    invocationAsBatchFile,
  ) where

import Distribution.Simple.Program.Run
         ( </span><a href="Distribution.Simple.Program.Run.html#loc_51_6_51_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Run.html#loc_51_6_51_23&#39;)"><span class="mpre">ProgramInvocation</span></a><span class="mpre">(..) )
import Distribution.System
         ( </span><a href="Distribution.System.html#loc_66_6_66_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_6_66_8&#39;)"><span class="mpre">OS</span></a><span class="mpre">(..) )

import Data.Maybe
         ( </span><a href="Data.Maybe.html#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_103_1_103_12&#39;)"><span class="mpre">maybeToList</span></a><span class="mpre"> )

</span><span class="hl_comment"><span class="mpre">-- | Generate a system script, either POSIX shell script or Windows batch file</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as appropriate for the given system.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_31_1_31_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_1_31_25&#39;)"><span class="mpre">invocationAsSystemScript</span></a><span class="mpre"> :: </span><a href="Distribution.System.html#loc_66_6_66_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_6_66_8&#39;)"><span class="hl_tyconref"><span class="mpre">OS</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Run.html#loc_51_6_51_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Run.html#loc_51_6_51_23&#39;)"><span class="hl_tyconref"><span class="mpre">ProgramInvocation</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_31_1_31_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_1_31_25&#39;)"><span class="hl_fundecl"><span class="mpre">invocationAsSystemScript</span></span></a><span class="mpre"> </span><a href="Distribution.System.html#loc_66_19_66_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_19_66_26&#39;)"><span class="hl_conref"><span class="mpre">Windows</span></span></a><span class="mpre"> = </span><a href="#loc_69_1_69_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_22&#39;)"><span class="hl_varref"><span class="mpre">invocationAsBatchFile</span></span></a><span class="mpre">
</span><a href="#loc_31_1_31_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_1_31_25&#39;)"><span class="hl_fundecl"><span class="mpre">invocationAsSystemScript</span></span></a><span class="mpre"> _       = </span><a href="#loc_38_1_38_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_24&#39;)"><span class="hl_varref"><span class="mpre">invocationAsShellScript</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | Generate a POSIX shell script that invokes a program.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_38_1_38_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_24&#39;)"><span class="mpre">invocationAsShellScript</span></a><span class="mpre"> :: </span><a href="Distribution.Simple.Program.Run.html#loc_51_6_51_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Run.html#loc_51_6_51_23&#39;)"><span class="hl_tyconref"><span class="mpre">ProgramInvocation</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_38_1_38_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_24&#39;)"><span class="hl_fundecl"><span class="mpre">invocationAsShellScript</span></span></a><span class="mpre">
  </span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Program/Script.hs&quot;, srcSpanStartLine = 39, srcSpanStartColumn = 3, srcSpanEndLine = 45, srcSpanEndColumn = 4}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Program/Script.hs&quot;, srcSpanStartLine = 39, srcSpanStartColumn = 21, srcSpanEndLine = 39, srcSpanEndColumn = 22},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distributi"><span class="mpre">ProgramInvocation {
    progInvokePath  = path,
    progInvokeArgs  = args,
    progInvokeEnv   = envExtra,
    progInvokeCwd   = mcwd,
    progInvokeInput = minput
  }</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">unlines</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
          [ </span><span class="hl_string"><span class="mpre">&quot;#!/bin/sh&quot;</span></span><span class="mpre"> ]
       </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> </span><a href="#loc_55_5_55_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_5_55_11&#39;)"><span class="hl_varref"><span class="mpre">setEnv</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">envExtra</span></span><span class="mpre">
       </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [ </span><span class="hl_string"><span class="mpre">&quot;cd &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_59_5_59_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_5_59_10&#39;)"><span class="hl_varref"><span class="mpre">quote</span></span></a><span class="mpre"> </span><a href="#loc_48_34_48_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_34_48_37&#39;)"><span class="hl_varref"><span class="mpre">cwd</span></span></a><span class="mpre"> | </span><a name="loc_48_34_48_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_34_48_37&#39;)"><span class="hl_vardecl"><span class="mpre">cwd</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Maybe.html#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_103_1_103_12&#39;)"><span class="hl_varref"><span class="mpre">maybeToList</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">mcwd</span></span><span class="mpre"> ]
       </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [ (case </span><span class="hl_varref"><span class="mpre">minput</span></span><span class="mpre"> of
              </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">    -&gt; </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">
              </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_51_20_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_20_51_25&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> -&gt; </span><span class="hl_string"><span class="mpre">&quot;echo &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_59_5_59_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_5_59_10&#39;)"><span class="hl_varref"><span class="mpre">quote</span></span></a><span class="mpre"> </span><a href="#loc_51_20_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_20_51_25&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; | &quot;</span></span><span class="mpre">)
         </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">unwords</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="#loc_59_5_59_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_5_59_10&#39;)"><span class="hl_varref"><span class="mpre">quote</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">path</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">args</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; \&quot;$@\&quot;&quot;</span></span><span class="mpre">]

  where
    </span><a name="loc_55_5_55_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_5_55_11&#39;)"><span class="hl_fundecl"><span class="mpre">setEnv</span></span></a><span class="mpre"> (</span><a name="loc_55_13_55_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_13_55_16&#39;)"><span class="hl_vardecl"><span class="mpre">var</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">)  = [</span><span class="hl_string"><span class="mpre">&quot;unset &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_55_13_55_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_13_55_16&#39;)"><span class="hl_varref"><span class="mpre">var</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;export &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_55_13_55_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_13_55_16&#39;)"><span class="hl_varref"><span class="mpre">var</span></span></a><span class="mpre">]
    </span><a href="#loc_55_5_55_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_5_55_11&#39;)"><span class="hl_fundecl"><span class="mpre">setEnv</span></span></a><span class="mpre"> (</span><a name="loc_56_13_56_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_13_56_16&#39;)"><span class="hl_vardecl"><span class="mpre">var</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_56_23_56_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_23_56_26&#39;)"><span class="hl_vardecl"><span class="mpre">val</span></span></a><span class="mpre">) = [</span><span class="hl_string"><span class="mpre">&quot;export &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_56_13_56_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_13_56_16&#39;)"><span class="hl_varref"><span class="mpre">var</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;=&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_59_5_59_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_5_59_10&#39;)"><span class="hl_varref"><span class="mpre">quote</span></span></a><span class="mpre"> </span><a href="#loc_56_23_56_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_23_56_26&#39;)"><span class="hl_varref"><span class="mpre">val</span></span></a><span class="mpre">]

    </span><a href="#loc_59_5_59_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_5_59_10&#39;)"><span class="mpre">quote</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
    </span><a name="loc_59_5_59_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_5_59_10&#39;)"><span class="hl_fundecl"><span class="mpre">quote</span></span></a><span class="mpre"> </span><a name="loc_59_11_59_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_11_59_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_61_5_61_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_5_61_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_59_11_59_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_11_59_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39;&quot;</span></span><span class="mpre">

    </span><a name="loc_61_5_61_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_5_61_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> []        = []
    </span><a href="#loc_61_5_61_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_5_61_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;\&#39;&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_62_18_62_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_18_62_20&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;&#39;\\&#39;&#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_61_5_61_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_5_61_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_62_18_62_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_18_62_20&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_61_5_61_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_5_61_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><a name="loc_63_13_63_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_14&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">   </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_63_18_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_18_63_20&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><a href="#loc_63_13_63_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_13_63_14&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">        </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_61_5_61_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_5_61_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_63_18_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_18_63_20&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | Generate a Windows batch file that invokes a program.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_69_1_69_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_22&#39;)"><span class="mpre">invocationAsBatchFile</span></a><span class="mpre"> :: </span><a href="Distribution.Simple.Program.Run.html#loc_51_6_51_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Run.html#loc_51_6_51_23&#39;)"><span class="hl_tyconref"><span class="mpre">ProgramInvocation</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_69_1_69_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_22&#39;)"><span class="hl_fundecl"><span class="mpre">invocationAsBatchFile</span></span></a><span class="mpre">
  </span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Program/Script.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 3, srcSpanEndLine = 76, srcSpanEndColumn = 4}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/Program/Script.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 21, srcSpanEndLine = 70, srcSpanEndColumn = 22},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distributi"><span class="mpre">ProgramInvocation {
    progInvokePath  = path,
    progInvokeArgs  = args,
    progInvokeEnv   = envExtra,
    progInvokeCwd   = mcwd,
    progInvokeInput = minput
  }</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">unlines</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
          [ </span><span class="hl_string"><span class="mpre">&quot;@echo off&quot;</span></span><span class="mpre"> ]
       </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="#loc_92_5_92_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_5_92_11&#39;)"><span class="hl_varref"><span class="mpre">setEnv</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">envExtra</span></span><span class="mpre">
       </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [ </span><span class="hl_string"><span class="mpre">&quot;cd \&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_79_38_79_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_38_79_41&#39;)"><span class="hl_varref"><span class="mpre">cwd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\&quot;&quot;</span></span><span class="mpre"> | </span><a name="loc_79_38_79_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_38_79_41&#39;)"><span class="hl_vardecl"><span class="mpre">cwd</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Maybe.html#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_103_1_103_12&#39;)"><span class="hl_varref"><span class="mpre">maybeToList</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">mcwd</span></span><span class="mpre"> ]
       </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> case </span><span class="hl_varref"><span class="mpre">minput</span></span><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">    -&gt;
                [ </span><span class="hl_varref"><span class="mpre">path</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39; &#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">) </span><span class="hl_varref"><span class="mpre">args</span></span><span class="mpre"> ]

            </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_84_18_84_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_18_84_23&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> -&gt;
                [ </span><span class="hl_string"><span class="mpre">&quot;(&quot;</span></span><span class="mpre"> ]
             </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [ </span><span class="hl_string"><span class="mpre">&quot;echo &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_86_44_86_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_44_86_48&#39;)"><span class="hl_varref"><span class="mpre">line</span></span></a><span class="mpre"> | </span><a name="loc_86_44_86_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_44_86_48&#39;)"><span class="hl_vardecl"><span class="mpre">line</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">lines</span></span><span class="mpre"> </span><a href="#loc_84_18_84_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_18_84_23&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre"> ]
             </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [ </span><span class="hl_string"><span class="mpre">&quot;) | &quot;</span></span><span class="mpre">
               </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">path</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\&quot;&quot;</span></span><span class="mpre">
               </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> (\</span><a name="loc_89_31_89_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_31_89_34&#39;)"><span class="hl_vardecl"><span class="mpre">arg</span></span></a><span class="mpre"> -&gt; </span><span class="hl_char"><span class="mpre">&#39; &#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_96_5_96_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_5_96_10&#39;)"><span class="hl_varref"><span class="mpre">quote</span></span></a><span class="mpre"> </span><a href="#loc_89_31_89_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_31_89_34&#39;)"><span class="hl_varref"><span class="mpre">arg</span></span></a><span class="mpre">) </span><span class="hl_varref"><span class="mpre">args</span></span><span class="mpre"> ]

  where
    </span><a name="loc_92_5_92_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_5_92_11&#39;)"><span class="hl_fundecl"><span class="mpre">setEnv</span></span></a><span class="mpre"> (</span><a name="loc_92_13_92_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_13_92_16&#39;)"><span class="hl_vardecl"><span class="mpre">var</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">)  = </span><span class="hl_string"><span class="mpre">&quot;set &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_92_13_92_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_13_92_16&#39;)"><span class="hl_varref"><span class="mpre">var</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;=&quot;</span></span><span class="mpre">
    </span><a href="#loc_92_5_92_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_5_92_11&#39;)"><span class="hl_fundecl"><span class="mpre">setEnv</span></span></a><span class="mpre"> (</span><a name="loc_93_13_93_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_16&#39;)"><span class="hl_vardecl"><span class="mpre">var</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_93_23_93_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_23_93_26&#39;)"><span class="hl_vardecl"><span class="mpre">val</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;set &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_93_13_93_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_16&#39;)"><span class="hl_varref"><span class="mpre">var</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;=&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_93_23_93_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_23_93_26&#39;)"><span class="hl_varref"><span class="mpre">val</span></span></a><span class="mpre">

    </span><a href="#loc_96_5_96_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_5_96_10&#39;)"><span class="mpre">quote</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
    </span><a name="loc_96_5_96_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_5_96_10&#39;)"><span class="hl_fundecl"><span class="mpre">quote</span></span></a><span class="mpre"> </span><a name="loc_96_11_96_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_11_96_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><span class="hl_string"><span class="mpre">&quot;\&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_98_5_98_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_5_98_12&#39;)"><span class="hl_varref"><span class="mpre">escapeQ</span></span></a><span class="mpre"> </span><a href="#loc_96_11_96_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_11_96_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\&quot;&quot;</span></span><span class="mpre">

    </span><a name="loc_98_5_98_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_5_98_12&#39;)"><span class="hl_fundecl"><span class="mpre">escapeQ</span></span></a><span class="mpre"> []       = []
    </span><a href="#loc_98_5_98_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_5_98_12&#39;)"><span class="hl_fundecl"><span class="mpre">escapeQ</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;&quot;&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_99_18_99_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_18_99_20&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;\&quot;\&quot;\&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_98_5_98_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_5_98_12&#39;)"><span class="hl_varref"><span class="mpre">escapeQ</span></span></a><span class="mpre"> </span><a href="#loc_99_18_99_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_18_99_20&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_98_5_98_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_5_98_12&#39;)"><span class="hl_fundecl"><span class="mpre">escapeQ</span></span></a><span class="mpre"> (</span><a name="loc_100_14_100_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_14_100_15&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_100_18_100_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_18_100_20&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><a href="#loc_100_14_100_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_14_100_15&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">         </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_98_5_98_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_5_98_12&#39;)"><span class="hl_varref"><span class="mpre">escapeQ</span></span></a><span class="mpre"> </span><a href="#loc_100_18_100_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_18_100_20&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">

    </span><a name="loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> []        = []
    </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;|&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_103_17_103_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_17_103_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;^|&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_103_17_103_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_17_103_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;&lt;&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_104_17_104_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_17_104_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;^&lt;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_104_17_104_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_17_104_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;&gt;&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_105_17_105_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_17_105_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;^&gt;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_105_17_105_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_17_105_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;&amp;&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_106_17_106_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_17_106_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;^&amp;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_106_17_106_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_17_106_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;(&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_107_17_107_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_17_107_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;^(&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_107_17_107_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_17_107_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;)&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_108_17_108_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_17_108_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;^)&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_108_17_108_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_17_108_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;^&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_109_17_109_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_17_109_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><span class="hl_string"><span class="mpre">&quot;^^&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_109_17_109_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_17_109_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
    </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_fundecl"><span class="mpre">escape</span></span></a><span class="mpre"> (</span><a name="loc_110_13_110_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_13_110_14&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_110_17_110_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_17_110_19&#39;)"><span class="hl_vardecl"><span class="mpre">cs</span></span></a><span class="mpre">) = </span><a href="#loc_110_13_110_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_13_110_14&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">     </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_102_5_102_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_11&#39;)"><span class="hl_varref"><span class="mpre">escape</span></span></a><span class="mpre"> </span><a href="#loc_110_17_110_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_17_110_19&#39;)"><span class="hl_varref"><span class="mpre">cs</span></span></a><span class="mpre">
</span></div></body></html>