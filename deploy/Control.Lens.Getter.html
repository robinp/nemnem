<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE Rank2Types #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FlexibleInstances #-}
#ifdef TRUSTWORTHY
{-# LANGUAGE Trustworthy #-}
#endif
#if __GLASGOW_HASKELL__ &amp;&amp; __GLASGOW_HASKELL__ &gt;= 704
{-# LANGUAGE NoPolyKinds #-}
{-# LANGUAGE NoDataKinds #-}
#endif
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Lens.Getter</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2012-14 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  Rank2Types</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A @&#39;Getter&#39; s a@ is just any function @(s -&gt; a)@, which we&#39;ve flipped</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- into continuation passing style, @(a -&gt; r) -&gt; s -&gt; r@ and decorated</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- with &#39;Const&#39; to obtain:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @type &#39;Getting&#39; r s a = (a -&gt; &#39;Const&#39; r a) -&gt; s -&gt; &#39;Const&#39; r s@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If we restrict access to knowledge about the type &#39;r&#39;, we could get:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @type &#39;Getter&#39; s a = forall r. &#39;Getting&#39; r s a@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- But we actually hide the use of &#39;Const&#39; behind a class &#39;Gettable&#39; to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- report error messages from type class resolution rather than at unification</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- time, where they are much uglier.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @type &#39;Getter&#39; s a = forall f. &#39;Gettable&#39; f =&gt; (a -&gt; f a) -&gt; s -&gt; f s@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Everything you can do with a function, you can do with a &#39;Getter&#39;, but</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- note that because of the continuation passing style (&#39;.&#39;) composes them</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- in the opposite order.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since it is only a function, every &#39;Getter&#39; obviously only retrieves a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- single value for a given input.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Lens.Getter
  (
  </span><span class="hl_comment"><span class="mpre">-- * Getters</span></span><span class="mpre">
    Getter, IndexedGetter
  , Getting, IndexedGetting
  , Accessing
  </span><span class="hl_comment"><span class="mpre">-- * Building Getters</span></span><span class="mpre">
  , to
  , ito
  </span><span class="hl_comment"><span class="mpre">-- * Combinators for Getters and Folds</span></span><span class="mpre">
  , (^.)
  , view, views
  , use, uses
  , listening, listenings
  </span><span class="hl_comment"><span class="mpre">-- * Indexed Getters</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- ** Indexed Getter Combinators</span></span><span class="mpre">
  , (^@.)
  , iview, iviews
  , iuse, iuses
  , ilistening, ilistenings
  </span><span class="hl_comment"><span class="mpre">-- * Implementation Details</span></span><span class="mpre">
  , Contravariant(..)
  , coerce, coerced
  , Const(..)
  , Gettable
  ) where

import Control.Applicative
import Control.Lens.Internal.Getter
import Control.Lens.Internal.Indexed
import Control.Lens.Type
import Control.Monad.Reader.Class as Reader
import Control.Monad.State        as State
import Control.Monad.Writer       as Writer
import Data.Functor.Contravariant
import Data.Profunctor
import Data.Profunctor.Unsafe

</span><span class="hl_comment"><span class="mpre">-- $setup</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; :set -XNoOverloadedStrings</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Control.Lens</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Data.List.Lens</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Debug.SimpleReflect.Expr</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Debug.SimpleReflect.Vars as Vars hiding (f,g)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let f :: Expr -&gt; Expr; f = Debug.SimpleReflect.Vars.f</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let g :: Expr -&gt; Expr; g = Debug.SimpleReflect.Vars.g</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclInfixDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 1, srcSpanEndLine = 93, srcSpanEndColumn = 17}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 8, srcSpanEndLine = 93, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine "><span class="mpre">infixl 8 ^., ^@.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Getters</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Build a &#39;Getter&#39; from an arbitrary Haskell function.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;to&#39; f &#39;.&#39; &#39;to&#39; g ≡ &#39;to&#39; (g &#39;.&#39; f)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a &#39;^.&#39; &#39;to&#39; f ≡ f a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; a ^.to f</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- f a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (&quot;hello&quot;,&quot;world&quot;)^.to snd</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;world&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; 5^.to succ</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 6</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (0, -5)^._2.to abs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 5</span></span><span class="mpre">
</span><a href="#loc_121_1_121_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_1_121_3&#39;)"><span class="mpre">to</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexPreservingGetter</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_121_1_121_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_1_121_3&#39;)"><span class="hl_fundecl"><span class="mpre">to</span></span></a><span class="mpre"> </span><a name="loc_121_4_121_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_4_121_5&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Unsafe.html#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_87_3_87_8&#39;)"><span class="hl_varref"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a href="#loc_121_4_121_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_4_121_5&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Getter.html#loc_57_1_57_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Getter.html#loc_57_1_57_7&#39;)"><span class="hl_varref"><span class="mpre">coerce</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_121_1_121_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_1_121_3&#39;)"><span class="mpre">to</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_125_1_125_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_1_125_4&#39;)"><span class="mpre">ito</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedGetter</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_125_1_125_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_1_125_4&#39;)"><span class="hl_fundecl"><span class="mpre">ito</span></span></a><span class="mpre"> </span><a name="loc_125_5_125_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_5_125_6&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Unsafe.html#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_87_3_87_8&#39;)"><span class="hl_varref"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a href="#loc_125_5_125_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_5_125_6&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Getter.html#loc_57_1_57_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Getter.html#loc_57_1_57_7&#39;)"><span class="hl_varref"><span class="mpre">coerce</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">uncurry</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_125_1_125_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_1_125_4&#39;)"><span class="mpre">ito</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | When you see this in a type signature it indicates that you can</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- pass the function a &#39;Lens&#39;, &#39;Getter&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.Traversal&#39;, &#39;Control.Lens.Fold.Fold&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Prism.Prism&#39;, &#39;Control.Lens.Iso.Iso&#39;, or one of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the indexed variants, and it will just \&quot;do the right thing\&quot;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Most &#39;Getter&#39; combinators are able to be used with both a &#39;Getter&#39; or a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Fold.Fold&#39; in limited situations, to do so, they need to be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- monomorphic in what we are going to extract with &#39;Control.Applicative.Const&#39;. To be compatible</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- with &#39;Lens&#39;, &#39;Control.Lens.Traversal.Traversal&#39; and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Iso.Iso&#39; we also restricted choices of the irrelevant @t@ and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @b@ parameters.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If a function accepts a @&#39;Getting&#39; r s a@, then when @r@ is a &#39;Data.Monoid.Monoid&#39;, then</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- you can pass a &#39;Control.Lens.Fold.Fold&#39; (or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.Traversal&#39;), otherwise you can only pass this a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Getter&#39; or &#39;Lens&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 145, srcSpanStartColumn = 1, srcSpanEndLine = 145, srcSpanEndColumn = 56}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 145, srcSpanStartColumn = 1, srcSpanEndLine = 145, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLi"><span class="mpre">type Getting r s a = (a -&gt; Const r a) -&gt; s -&gt; Const r s</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Used to consume an &#39;Control.Lens.Fold.IndexedFold&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 148, srcSpanStartColumn = 1, srcSpanEndLine = 148, srcSpanEndColumn = 72}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 148, srcSpanStartColumn = 1, srcSpanEndLine = 148, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLi"><span class="mpre">type IndexedGetting i m s a = Indexed i a (Const m a) -&gt; s -&gt; Const m s</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is a convenient alias used when consuming (indexed) getters and (indexed) folds</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- in a highly general fashion.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 152, srcSpanStartColumn = 1, srcSpanEndLine = 152, srcSpanEndColumn = 59}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 152, srcSpanStartColumn = 1, srcSpanEndLine = 152, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLi"><span class="mpre">type Accessing p m s a = p a (Const m a) -&gt; s -&gt; Const m s</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Getting Values</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | View the value pointed to by a &#39;Getter&#39;, &#39;Control.Lens.Iso.Iso&#39; or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Lens&#39; or the result of folding over all the results of a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Fold.Fold&#39; or &#39;Control.Lens.Traversal.Traversal&#39; that points</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- at a monoidal value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; &#39;.&#39; &#39;to&#39; ≡ &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; view (to f) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- f a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; view _2 (1,&quot;hello&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;hello&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; view (to succ) 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 6</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; view (_2._1) (&quot;hello&quot;,(&quot;world&quot;,&quot;!!!&quot;))</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;world&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- As &#39;view&#39; is commonly used to access the target of a &#39;Getter&#39; or obtain a monoidal summary of the targets of a &#39;Fold&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It may be useful to think of it as having one of these more restricted signatures:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; ::             &#39;Getter&#39; s a     -&gt; s -&gt; a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: &#39;Data.Monoid.Monoid&#39; m =&gt; &#39;Control.Lens.Fold.Fold&#39; s m       -&gt; s -&gt; m</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; ::             &#39;Control.Lens.Iso.Iso&#39;&#39; s a       -&gt; s -&gt; a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; ::             &#39;Lens&#39;&#39; s a      -&gt; s -&gt; a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: &#39;Data.Monoid.Monoid&#39; m =&gt; &#39;Control.Lens.Traversal.Traversal&#39;&#39; s m -&gt; s -&gt; m</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In a more general setting, such as when working with a &#39;Monad&#39; transformer stack you can use:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: &#39;MonadReader&#39; s m             =&gt; &#39;Getter&#39; s a     -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: (&#39;MonadReader&#39; s m, &#39;Data.Monoid.Monoid&#39; a) =&gt; &#39;Control.Lens.Fold.Fold&#39; s a       -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: &#39;MonadReader&#39; s m             =&gt; &#39;Control.Lens.Iso.Iso&#39;&#39; s a       -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: &#39;MonadReader&#39; s m             =&gt; &#39;Lens&#39;&#39; s a      -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: (&#39;MonadReader&#39; s m, &#39;Data.Monoid.Monoid&#39; a) =&gt; &#39;Control.Lens.Traversal.Traversal&#39;&#39; s a -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_201_1_201_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_5&#39;)"><span class="mpre">view</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 200, srcSpanStartColumn = 9, srcSpanEndLine = 200, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 200, srcSpanStartColumn = 25, srcSpanEndLine = 200, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/sr"><span class="mpre">MonadReader s m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Getting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_201_1_201_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_5&#39;)"><span class="hl_fundecl"><span class="mpre">view</span></span></a><span class="mpre"> </span><a name="loc_201_6_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_6_201_7&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Reader.Class.html#loc_96_1_96_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_96_1_96_5&#39;)"><span class="hl_varref"><span class="mpre">Reader.asks</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_201_6_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_6_201_7&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_201_1_201_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_5&#39;)"><span class="mpre">view</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | View a function of the value pointed to by a &#39;Getter&#39; or &#39;Lens&#39; or the result of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- folding over the result of mapping the targets of a &#39;Control.Lens.Fold.Fold&#39; or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.Traversal&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;views&#39; l f ≡ &#39;view&#39; (l &#39;.&#39; &#39;to&#39; f)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; views (to f) g a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- g (f a)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; views _2 length (1,&quot;hello&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- As &#39;views&#39; is commonly used to access the target of a &#39;Getter&#39; or obtain a monoidal summary of the targets of a &#39;Fold&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It may be useful to think of it as having one of these more restricted signatures:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;views&#39; ::             &#39;Getter&#39; s a     -&gt; (a -&gt; r) -&gt; s -&gt; r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;views&#39; :: &#39;Data.Monoid.Monoid&#39; m =&gt; &#39;Control.Lens.Fold.Fold&#39; s a       -&gt; (a -&gt; m) -&gt; s -&gt; m</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;views&#39; ::             &#39;Control.Lens.Iso.Iso&#39;&#39; s a       -&gt; (a -&gt; r) -&gt; s -&gt; r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;views&#39; ::             &#39;Lens&#39;&#39; s a      -&gt; (a -&gt; r) -&gt; s -&gt; r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;views&#39; :: &#39;Data.Monoid.Monoid&#39; m =&gt; &#39;Control.Lens.Traversal.Traversal&#39;&#39; s a -&gt; (a -&gt; m) -&gt; s -&gt; m</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In a more general setting, such as when working with a &#39;Monad&#39; transformer stack you can use:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: &#39;MonadReader&#39; s m             =&gt; &#39;Getter&#39; s a     -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: (&#39;MonadReader&#39; s m, &#39;Data.Monoid.Monoid&#39; a) =&gt; &#39;Control.Lens.Fold.Fold&#39; s a       -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: &#39;MonadReader&#39; s m             =&gt; &#39;Control.Lens.Iso.Iso&#39;&#39; s a       -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: &#39;MonadReader&#39; s m             =&gt; &#39;Lens&#39;&#39; s a      -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;view&#39; :: (&#39;MonadReader&#39; s m, &#39;Data.Monoid.Monoid&#39; a) =&gt; &#39;Control.Lens.Traversal.Traversal&#39;&#39; s a -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;views&#39; :: &#39;MonadReader&#39; s m =&gt; &#39;Getting&#39; r s a -&gt; (a -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_243_1_243_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_1_243_6&#39;)"><span class="mpre">views</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 242, srcSpanStartColumn = 10, srcSpanEndLine = 242, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 242, srcSpanStartColumn = 10, srcSpanEndLine = 242, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStart"><span class="mpre">(Profunctor p, MonadReader s m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Optical</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">(-&gt;)</span></span><span class="mpre"> (</span><a href="Control.Applicative.html#loc_236_9_236_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_9_236_14&#39;)"><span class="hl_tyconref"><span class="mpre">Const</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_243_1_243_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_1_243_6&#39;)"><span class="hl_fundecl"><span class="mpre">views</span></span></a><span class="mpre"> </span><a name="loc_243_7_243_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_7_243_8&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_243_9_243_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_9_243_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Reader.Class.html#loc_96_1_96_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_96_1_96_5&#39;)"><span class="hl_varref"><span class="mpre">Reader.asks</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_243_7_243_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_7_243_8&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_243_9_243_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_9_243_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_243_1_243_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_1_243_6&#39;)"><span class="mpre">views</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | View the value pointed to by a &#39;Getter&#39; or &#39;Lens&#39; or the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- result of folding over all the results of a &#39;Control.Lens.Fold.Fold&#39; or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.Traversal&#39; that points at a monoidal values.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is the same operation as &#39;view&#39; with the arguments flipped.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The fixity and semantics are such that subsequent field accesses can be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- performed with (&#39;Prelude..&#39;).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (a,b)^._2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (&quot;hello&quot;,&quot;world&quot;)^._2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;world&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Data.Complex</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; ((0, 1 :+ 2), 3)^._1._2.to magnitude</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 2.23606797749979</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&#39;^.&#39;) ::             s -&gt; &#39;Getter&#39; s a     -&gt; a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&#39;^.&#39;) :: &#39;Data.Monoid.Monoid&#39; m =&gt; s -&gt; &#39;Control.Lens.Fold.Fold&#39; s m       -&gt; m</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&#39;^.&#39;) ::             s -&gt; &#39;Control.Lens.Iso.Iso&#39;&#39; s a       -&gt; a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&#39;^.&#39;) ::             s -&gt; &#39;Lens&#39;&#39; s a      -&gt; a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&#39;^.&#39;) :: &#39;Data.Monoid.Monoid&#39; m =&gt; s -&gt; &#39;Control.Lens.Traversal.Traversal&#39;&#39; s m -&gt; m</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_273_3_273_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_3_273_5&#39;)"><span class="mpre">(^.)</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Getting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_273_1_273_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_1_273_2&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><a name="loc_273_3_273_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_3_273_5&#39;)"><span class="hl_fundecl"><span class="mpre">^.</span></span></a><span class="mpre"> </span><a name="loc_273_6_273_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_6_273_7&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> (</span><a href="#loc_273_6_273_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_6_273_7&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> </span><a href="#loc_273_1_273_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_1_273_2&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_273_3_273_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_3_273_5&#39;)"><span class="mpre">(^.)</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- MonadState</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Use the target of a &#39;Lens&#39;, &#39;Control.Lens.Iso.Iso&#39;, or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Getter&#39; in the current state, or use a summary of a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Fold.Fold&#39; or &#39;Control.Lens.Traversal.Traversal&#39; that points</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to a monoidal value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; evalState (use _1) (a,b)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; evalState (use _1) (&quot;hello&quot;,&quot;world&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;hello&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;use&#39; :: &#39;MonadState&#39; s m             =&gt; &#39;Getter&#39; s a     -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;use&#39; :: (&#39;MonadState&#39; s m, &#39;Data.Monoid.Monoid&#39; r) =&gt; &#39;Control.Lens.Fold.Fold&#39; s r       -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;use&#39; :: &#39;MonadState&#39; s m             =&gt; &#39;Control.Lens.Iso.Iso&#39;&#39; s a       -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;use&#39; :: &#39;MonadState&#39; s m             =&gt; &#39;Lens&#39;&#39; s a      -&gt; m a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;use&#39; :: (&#39;MonadState&#39; s m, &#39;Data.Monoid.Monoid&#39; r) =&gt; &#39;Control.Lens.Traversal.Traversal&#39;&#39; s r -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_1_299_4&#39;)"><span class="mpre">use</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 298, srcSpanStartColumn = 8, srcSpanEndLine = 298, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 298, srcSpanStartColumn = 23, srcSpanEndLine = 298, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/sr"><span class="mpre">MonadState s m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Getting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_299_1_299_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_1_299_4&#39;)"><span class="hl_fundecl"><span class="mpre">use</span></span></a><span class="mpre"> </span><a name="loc_299_5_299_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_5_299_6&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Monad.State.Class.html#loc_95_1_95_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_95_1_95_5&#39;)"><span class="hl_varref"><span class="mpre">State.gets</span></span></a><span class="mpre"> (</span><a href="#loc_201_1_201_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_5&#39;)"><span class="hl_varref"><span class="mpre">view</span></span></a><span class="mpre"> </span><a href="#loc_299_5_299_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_5_299_6&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_299_1_299_4&#39;)"><span class="mpre">use</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Use the target of a &#39;Lens&#39;, &#39;Control.Lens.Iso.Iso&#39; or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Getter&#39; in the current state, or use a summary of a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Fold.Fold&#39; or &#39;Control.Lens.Traversal.Traversal&#39; that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- points to a monoidal value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; evalState (uses _1 length) (&quot;hello&quot;,&quot;world&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;uses&#39; :: &#39;MonadState&#39; s m             =&gt; &#39;Getter&#39; s a     -&gt; (a -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;uses&#39; :: (&#39;MonadState&#39; s m, &#39;Data.Monoid.Monoid&#39; r) =&gt; &#39;Control.Lens.Fold.Fold&#39; s a       -&gt; (a -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;uses&#39; :: &#39;MonadState&#39; s m             =&gt; &#39;Lens&#39;&#39; s a      -&gt; (a -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;uses&#39; :: &#39;MonadState&#39; s m             =&gt; &#39;Control.Lens.Iso.Iso&#39;&#39; s a       -&gt; (a -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;uses&#39; :: (&#39;MonadState&#39; s m, &#39;Data.Monoid.Monoid&#39; r) =&gt; &#39;Control.Lens.Traversal.Traversal&#39;&#39; s a -&gt; (a -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;uses&#39; :: &#39;MonadState&#39; s m =&gt; &#39;Getting&#39; r s t a b -&gt; (a -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_322_1_322_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_5&#39;)"><span class="mpre">uses</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 321, srcSpanStartColumn = 9, srcSpanEndLine = 321, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 321, srcSpanStartColumn = 9, srcSpanEndLine = 321, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLi"><span class="mpre">(Profunctor p, MonadState s m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Optical</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">(-&gt;)</span></span><span class="mpre"> (</span><a href="Control.Applicative.html#loc_236_9_236_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_9_236_14&#39;)"><span class="hl_tyconref"><span class="mpre">Const</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_322_1_322_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_5&#39;)"><span class="hl_fundecl"><span class="mpre">uses</span></span></a><span class="mpre"> </span><a name="loc_322_6_322_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_6_322_7&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_322_8_322_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_8_322_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Control.Monad.State.Class.html#loc_95_1_95_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_95_1_95_5&#39;)"><span class="hl_varref"><span class="mpre">State.gets</span></span></a><span class="mpre"> (</span><a href="#loc_243_1_243_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_1_243_6&#39;)"><span class="hl_varref"><span class="mpre">views</span></span></a><span class="mpre"> </span><a href="#loc_322_6_322_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_6_322_7&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_322_8_322_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_8_322_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_322_1_322_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_5&#39;)"><span class="mpre">uses</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is a generalized form of &#39;listen&#39; that only extracts the portion of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the log that is focused on by a &#39;Getter&#39;. If given a &#39;Fold&#39; or a &#39;Traversal&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- then a monoidal summary of the parts of the log that are visited will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returned.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listening&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;Getter&#39; w u     -&gt; m a -&gt; m (a, u)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listening&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;Lens&#39;&#39; w u      -&gt; m a -&gt; m (a, u)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listening&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;Iso&#39;&#39; w u       -&gt; m a -&gt; m (a, u)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listening&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; u) =&gt; &#39;Fold&#39; w u       -&gt; m a -&gt; m (a, u)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listening&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; u) =&gt; &#39;Traversal&#39;&#39; w u -&gt; m a -&gt; m (a, u)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listening&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; u) =&gt; &#39;Prism&#39;&#39; w u     -&gt; m a -&gt; m (a, u)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_339_1_339_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_1_339_10&#39;)"><span class="mpre">listening</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 338, srcSpanStartColumn = 14, srcSpanEndLine = 338, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 338, srcSpanStartColumn = 30, srcSpanEndLine = 338, srcSpanEndColumn = 32}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadWriter w m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Getting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre">)
</span><a name="loc_339_1_339_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_1_339_10&#39;)"><span class="hl_fundecl"><span class="mpre">listening</span></span></a><span class="mpre"> </span><a name="loc_339_11_339_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_11_339_12&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_339_13_339_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_13_339_14&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = do
  (</span><a name="loc_340_4_340_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_340_4_340_5&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, </span><a name="loc_340_7_340_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_340_7_340_8&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">listen</span></span><span class="mpre"> </span><a href="#loc_339_13_339_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_13_339_14&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_340_4_340_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_340_4_340_5&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">, </span><a href="#loc_201_1_201_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_5&#39;)"><span class="hl_varref"><span class="mpre">view</span></span></a><span class="mpre"> </span><a href="#loc_339_11_339_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_11_339_12&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_340_7_340_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_340_7_340_8&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_339_1_339_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_1_339_10&#39;)"><span class="mpre">listening</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is a generalized form of &#39;listen&#39; that only extracts the portion of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the log that is focused on by a &#39;Getter&#39;. If given a &#39;Fold&#39; or a &#39;Traversal&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- then a monoidal summary of the parts of the log that are visited will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returned.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ilistening&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;IndexedGetter&#39; i w u     -&gt; m a -&gt; m (a, (i, u))</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ilistening&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;IndexedLens&#39;&#39; i w u      -&gt; m a -&gt; m (a, (i, u))</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ilistening&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; u) =&gt; &#39;IndexedFold&#39; i w u       -&gt; m a -&gt; m (a, (i, u))</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ilistening&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; u) =&gt; &#39;IndexedTraversal&#39;&#39; i w u -&gt; m a -&gt; m (a, (i, u))</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_356_1_356_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_1_356_11&#39;)"><span class="mpre">ilistening</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 355, srcSpanStartColumn = 15, srcSpanEndLine = 355, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 355, srcSpanStartColumn = 31, srcSpanEndLine = 355, srcSpanEndColumn = 33}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadWriter w m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedGetting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre">))
</span><a name="loc_356_1_356_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_1_356_11&#39;)"><span class="hl_fundecl"><span class="mpre">ilistening</span></span></a><span class="mpre"> </span><a name="loc_356_12_356_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_12_356_13&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_356_14_356_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_14_356_15&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = do
  (</span><a name="loc_357_4_357_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_4_357_5&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, </span><a name="loc_357_7_357_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_7_357_8&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">listen</span></span><span class="mpre"> </span><a href="#loc_356_14_356_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_14_356_15&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_357_4_357_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_4_357_5&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">, </span><a href="#loc_406_1_406_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_1_406_6&#39;)"><span class="hl_varref"><span class="mpre">iview</span></span></a><span class="mpre"> </span><a href="#loc_356_12_356_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_12_356_13&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_357_7_357_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_7_357_8&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_356_1_356_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_1_356_11&#39;)"><span class="mpre">ilistening</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is a generalized form of &#39;listen&#39; that only extracts the portion of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the log that is focused on by a &#39;Getter&#39;. If given a &#39;Fold&#39; or a &#39;Traversal&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- then a monoidal summary of the parts of the log that are visited will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returned.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listenings&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;Getter&#39; w u     -&gt; (u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listenings&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;Lens&#39;&#39; w u      -&gt; (u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listenings&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;Iso&#39;&#39; w u       -&gt; (u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listenings&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; v) =&gt; &#39;Fold&#39; w u       -&gt; (u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listenings&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; v) =&gt; &#39;Traversal&#39;&#39; w u -&gt; (u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;listenings&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; v) =&gt; &#39;Prism&#39;&#39; w u     -&gt; (u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_375_1_375_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_1_375_11&#39;)"><span class="mpre">listenings</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 374, srcSpanStartColumn = 15, srcSpanEndLine = 374, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 374, srcSpanStartColumn = 31, srcSpanEndLine = 374, srcSpanEndColumn = 33}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadWriter w m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Getting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">)
</span><a name="loc_375_1_375_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_1_375_11&#39;)"><span class="hl_fundecl"><span class="mpre">listenings</span></span></a><span class="mpre"> </span><a name="loc_375_12_375_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_12_375_13&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_375_14_375_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_14_375_16&#39;)"><span class="hl_vardecl"><span class="mpre">uv</span></span></a><span class="mpre"> </span><a name="loc_375_17_375_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_17_375_18&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = do
  (</span><a name="loc_376_4_376_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_376_4_376_5&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, </span><a name="loc_376_7_376_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_376_7_376_8&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">listen</span></span><span class="mpre"> </span><a href="#loc_375_17_375_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_17_375_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_376_4_376_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_376_4_376_5&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">, </span><a href="#loc_243_1_243_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_1_243_6&#39;)"><span class="hl_varref"><span class="mpre">views</span></span></a><span class="mpre"> </span><a href="#loc_375_12_375_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_12_375_13&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_375_14_375_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_14_375_16&#39;)"><span class="hl_varref"><span class="mpre">uv</span></span></a><span class="mpre"> </span><a href="#loc_376_7_376_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_376_7_376_8&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_375_1_375_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_375_1_375_11&#39;)"><span class="mpre">listenings</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is a generalized form of &#39;listen&#39; that only extracts the portion of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the log that is focused on by a &#39;Getter&#39;. If given a &#39;Fold&#39; or a &#39;Traversal&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- then a monoidal summary of the parts of the log that are visited will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returned.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ilistenings&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;IndexedGetter&#39; w u     -&gt; (i -&gt; u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ilistenings&#39; :: &#39;MonadWriter&#39; w m             =&gt; &#39;IndexedLens&#39;&#39; w u      -&gt; (i -&gt; u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ilistenings&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; v) =&gt; &#39;IndexedFold&#39; w u       -&gt; (i -&gt; u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ilistenings&#39; :: (&#39;MonadWriter&#39; w m, &#39;Monoid&#39; v) =&gt; &#39;IndexedTraversal&#39;&#39; w u -&gt; (i -&gt; u -&gt; v) -&gt; m a -&gt; m (a, v)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_392_1_392_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_12&#39;)"><span class="mpre">ilistenings</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 391, srcSpanStartColumn = 16, srcSpanEndLine = 391, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 391, srcSpanStartColumn = 32, srcSpanEndLine = 391, srcSpanEndColumn = 34}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadWriter w m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedGetting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">)
</span><a name="loc_392_1_392_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_12&#39;)"><span class="hl_fundecl"><span class="mpre">ilistenings</span></span></a><span class="mpre"> </span><a name="loc_392_13_392_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_13_392_14&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_392_15_392_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_15_392_18&#39;)"><span class="hl_vardecl"><span class="mpre">iuv</span></span></a><span class="mpre"> </span><a name="loc_392_19_392_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_19_392_20&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = do
  (</span><a name="loc_393_4_393_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_4_393_5&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, </span><a name="loc_393_7_393_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_7_393_8&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">listen</span></span><span class="mpre"> </span><a href="#loc_392_19_392_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_19_392_20&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_393_4_393_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_4_393_5&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">, </span><a href="#loc_417_1_417_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_7&#39;)"><span class="hl_varref"><span class="mpre">iviews</span></span></a><span class="mpre"> </span><a href="#loc_392_13_392_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_13_392_14&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_392_15_392_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_15_392_18&#39;)"><span class="hl_varref"><span class="mpre">iuv</span></span></a><span class="mpre"> </span><a href="#loc_393_7_393_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_7_393_8&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_392_1_392_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_1_392_12&#39;)"><span class="mpre">ilistenings</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Indexed Getters</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | View the index and value of an &#39;IndexedGetter&#39; into the current environment as a pair.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When applied to an &#39;IndexedFold&#39; the result will most likely be a nonsensical monoidal summary of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the indices tupled with a monoidal summary of the values and probably not whatever it is you wanted.</span></span><span class="mpre">
</span><a href="#loc_406_1_406_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_1_406_6&#39;)"><span class="mpre">iview</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 405, srcSpanStartColumn = 10, srcSpanEndLine = 405, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 405, srcSpanStartColumn = 26, srcSpanEndLine = 405, srcSpanEndColumn = 28}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadReader s m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedGetting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_406_1_406_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_1_406_6&#39;)"><span class="hl_fundecl"><span class="mpre">iview</span></span></a><span class="mpre"> </span><a name="loc_406_7_406_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_7_406_8&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Reader.Class.html#loc_96_1_96_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_96_1_96_5&#39;)"><span class="hl_varref"><span class="mpre">asks</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_406_7_406_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_7_406_8&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_406_43_406_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_43_406_44&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">(,)</span></span><span class="mpre"> </span><a href="#loc_406_43_406_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_43_406_44&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_406_1_406_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_1_406_6&#39;)"><span class="mpre">iview</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | View a function of the index and value of an &#39;IndexedGetter&#39; into the current environment.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When applied to an &#39;IndexedFold&#39; the result will be a monoidal summary instead of a single answer.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iviews&#39; ≡ &#39;Control.Lens.Fold.ifoldMapOf&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_417_1_417_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_7&#39;)"><span class="mpre">iviews</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 416, srcSpanStartColumn = 11, srcSpanEndLine = 416, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 416, srcSpanStartColumn = 27, srcSpanEndLine = 416, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadReader s m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedGetting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_417_1_417_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_7&#39;)"><span class="hl_fundecl"><span class="mpre">iviews</span></span></a><span class="mpre"> </span><a name="loc_417_8_417_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_8_417_9&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_243_1_243_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_1_243_6&#39;)"><span class="hl_varref"><span class="mpre">views</span></span></a><span class="mpre"> </span><a href="#loc_417_8_417_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_8_417_9&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_417_1_417_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_1_417_7&#39;)"><span class="mpre">iviews</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Use the index and value of an &#39;IndexedGetter&#39; into the current state as a pair.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When applied to an &#39;IndexedFold&#39; the result will most likely be a nonsensical monoidal summary of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the indices tupled with a monoidal summary of the values and probably not whatever it is you wanted.</span></span><span class="mpre">
</span><a href="#loc_425_1_425_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_1_425_5&#39;)"><span class="mpre">iuse</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 424, srcSpanStartColumn = 9, srcSpanEndLine = 424, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 424, srcSpanStartColumn = 24, srcSpanEndLine = 424, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/sr"><span class="mpre">MonadState s m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedGetting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">,</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_425_1_425_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_1_425_5&#39;)"><span class="hl_fundecl"><span class="mpre">iuse</span></span></a><span class="mpre"> </span><a name="loc_425_6_425_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_6_425_7&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Monad.State.Class.html#loc_95_1_95_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_95_1_95_5&#39;)"><span class="hl_varref"><span class="mpre">gets</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_425_6_425_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_6_425_7&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_425_42_425_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_42_425_43&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">(,)</span></span><span class="mpre"> </span><a href="#loc_425_42_425_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_42_425_43&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_425_1_425_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_1_425_5&#39;)"><span class="mpre">iuse</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Use a function of the index and value of an &#39;IndexedGetter&#39; into the current state.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When applied to an &#39;IndexedFold&#39; the result will be a monoidal summary instead of a single answer.</span></span><span class="mpre">
</span><a href="#loc_432_1_432_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_432_1_432_6&#39;)"><span class="mpre">iuses</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 431, srcSpanStartColumn = 10, srcSpanEndLine = 431, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 431, srcSpanStartColumn = 25, srcSpanEndLine = 431, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadState s m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedGetting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_432_1_432_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_432_1_432_6&#39;)"><span class="hl_fundecl"><span class="mpre">iuses</span></span></a><span class="mpre"> </span><a name="loc_432_7_432_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_432_7_432_8&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_322_1_322_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_322_1_322_5&#39;)"><span class="hl_varref"><span class="mpre">uses</span></span></a><span class="mpre"> </span><a href="#loc_432_7_432_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_432_7_432_8&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_432_1_432_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_432_1_432_6&#39;)"><span class="mpre">iuses</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | View the index and value of an &#39;IndexedGetter&#39; or &#39;IndexedLens&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is the same operation as &#39;iview&#39; with the arguments flipped.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The fixity and semantics are such that subsequent field accesses can be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- performed with (&#39;Prelude..&#39;).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&#39;^@.&#39;) :: s -&gt; &#39;IndexedGetter&#39; i s a -&gt; (i, a)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&#39;^@.&#39;) :: s -&gt; &#39;IndexedLens&#39;&#39; i s a  -&gt; (i, a)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The result probably doesn&#39;t have much meaning when applied to an &#39;IndexedFold&#39;.</span></span><span class="mpre">
</span><a href="#loc_449_3_449_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_3_449_6&#39;)"><span class="mpre">(^@.)</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedGetting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_449_1_449_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_1_449_2&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><a name="loc_449_3_449_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_3_449_6&#39;)"><span class="hl_fundecl"><span class="mpre">^@.</span></span></a><span class="mpre"> </span><a name="loc_449_7_449_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_7_449_8&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_449_7_449_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_7_449_8&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_449_36_449_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_36_449_37&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">(,)</span></span><span class="mpre"> </span><a href="#loc_449_36_449_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_36_449_37&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) </span><a href="#loc_449_1_449_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_1_449_2&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_449_3_449_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_3_449_6&#39;)"><span class="mpre">(^@.)</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Coerce a &#39;Gettable&#39; &#39;LensLike&#39; to a &#39;Simple&#39; &#39;LensLike&#39;. This is useful</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- when using a &#39;Traversal&#39; that is not simple as a &#39;Getter&#39; or a &#39;Fold&#39;.</span></span><span class="mpre">
</span><a href="#loc_455_1_455_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_1_455_8&#39;)"><span class="mpre">coerced</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 454, srcSpanStartColumn = 12, srcSpanEndLine = 454, srcSpanEndColumn = 43}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStartLine = 454, srcSpanStartColumn = 12, srcSpanEndLine = 454, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Getter.hs&quot;, srcSpanStart"><span class="mpre">(Functor f, Contravariant f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">LensLike&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_455_1_455_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_1_455_8&#39;)"><span class="hl_fundecl"><span class="mpre">coerced</span></span></a><span class="mpre"> </span><a name="loc_455_9_455_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_9_455_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_455_11_455_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_11_455_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Getter.html#loc_57_1_57_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Getter.html#loc_57_1_57_7&#39;)"><span class="hl_varref"><span class="mpre">coerce</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_455_9_455_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_9_455_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><a href="Control.Lens.Internal.Getter.html#loc_57_1_57_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Getter.html#loc_57_1_57_7&#39;)"><span class="hl_varref"><span class="mpre">coerce</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_455_11_455_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_11_455_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
</span></div></body></html>