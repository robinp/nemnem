<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE ExistentialQuantification #-}

module System.Console.CmdArgs.Test.Util where

import System.Console.CmdArgs.Explicit
import Data.Maybe
import Data.Typeable


</span><a href="#loc_11_1_11_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_1_11_8&#39;)"><span class="mpre">failure</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)] -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_11_1_11_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_1_11_8&#39;)"><span class="hl_fundecl"><span class="mpre">failure</span></span></a><span class="mpre"> </span><a name="loc_11_9_11_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_9_11_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_11_11_11_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_11_11_13&#39;)"><span class="hl_vardecl"><span class="mpre">ys</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">putStr</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">unlines</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;FAILURE&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_11_9_11_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_9_11_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> [</span><a href="#loc_11_80_11_81" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_80_11_81&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_11_82_11_83" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_82_11_83&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> | (</span><a name="loc_11_80_11_81" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_80_11_81&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">,</span><a name="loc_11_82_11_83" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_82_11_83&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_11_11_11_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_11_11_11_13&#39;)"><span class="hl_varref"><span class="mpre">ys</span></span></a><span class="mpre">]

</span><a href="#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_14_1_14_8&#39;)"><span class="mpre">success</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_14_1_14_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_14_1_14_8&#39;)"><span class="hl_vardecl"><span class="mpre">success</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">putChar</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;.&#39;</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- seq used to obtain better program coverage</span></span><span class="mpre">
</span><a name="loc_18_1_18_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_18_1_18_4&#39;)"><span class="hl_vardecl"><span class="mpre">hpc</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">seq</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- Demo - wrap a demo up hiding the real type of it</span></span><span class="mpre">
data </span><a name="loc_22_6_22_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_6_22_10&#39;)"><span class="hl_tycondecl"><span class="mpre">Demo</span></span></a><span class="mpre"> = forall a . Typeable a =&gt; </span><a name="loc_22_38_22_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_42&#39;)"><span class="hl_condecl"><span class="mpre">Demo</span></span></a><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">

</span><a href="#loc_25_1_25_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_1_25_8&#39;)"><span class="mpre">runDemo</span></a><span class="mpre"> :: </span><a href="#loc_22_6_22_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_6_22_10&#39;)"><span class="hl_tyconref"><span class="mpre">Demo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_25_1_25_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_1_25_8&#39;)"><span class="hl_fundecl"><span class="mpre">runDemo</span></span></a><span class="mpre"> (</span><a href="#loc_22_38_22_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_42&#39;)"><span class="hl_conref"><span class="mpre">Demo</span></span></a><span class="mpre"> </span><a name="loc_25_15_25_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_15_25_16&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_25_17_25_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_17_25_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">) = </span><a href="#loc_25_15_25_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_15_25_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_25_17_25_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_17_25_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Question: Is it possible to do this without the Typeable constraint?</span></span><span class="mpre">
</span><a href="#loc_29_1_29_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_1_29_8&#39;)"><span class="mpre">newDemo</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/cmdargs-0.10.7/System/Console/CmdArgs/Test/Util.hs&quot;, srcSpanStartLine = 28, srcSpanStartColumn = 12, srcSpanEndLine = 28, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/cmdargs-0.10.7/System/Console/CmdArgs/Test/Util.hs&quot;, srcSpanStartLine = 28, srcSpanStartColumn = 23, srcSpanEndLine = 28, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagr"><span class="mpre">Typeable a =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) -&gt; </span><a href="System.Console.CmdArgs.Explicit.Type.html#loc_77_6_77_10" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Console.CmdArgs.Explicit.Type.html#loc_77_6_77_10&#39;)"><span class="hl_tyconref"><span class="mpre">Mode</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="System.Console.CmdArgs.Explicit.Type.html#loc_77_6_77_10" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Console.CmdArgs.Explicit.Type.html#loc_77_6_77_10&#39;)"><span class="hl_tyconref"><span class="mpre">Mode</span></span></a><span class="mpre"> </span><a href="#loc_22_6_22_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_6_22_10&#39;)"><span class="hl_tyconref"><span class="mpre">Demo</span></span></a><span class="mpre">
</span><a name="loc_29_1_29_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_1_29_8&#39;)"><span class="hl_fundecl"><span class="mpre">newDemo</span></span></a><span class="mpre"> </span><a name="loc_29_9_29_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_9_29_12&#39;)"><span class="hl_vardecl"><span class="mpre">act</span></span></a><span class="mpre"> = </span><a href="System.Console.CmdArgs.Explicit.Type.html#loc_182_5_182_10" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Console.CmdArgs.Explicit.Type.html#loc_182_5_182_10&#39;)"><span class="hl_varref"><span class="mpre">remap</span></span></a><span class="mpre"> (</span><a href="#loc_22_38_22_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_42&#39;)"><span class="hl_conref"><span class="mpre">Demo</span></span></a><span class="mpre"> </span><a href="#loc_29_9_29_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_9_29_12&#39;)"><span class="hl_varref"><span class="mpre">act</span></span></a><span class="mpre">) (\(</span><a href="#loc_22_38_22_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_42&#39;)"><span class="hl_conref"><span class="mpre">Demo</span></span></a><span class="mpre"> </span><a name="loc_29_40_29_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_40_29_41&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_29_42_29_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_42_29_43&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) -&gt; (</span><a href="#loc_32_9_32_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_9_32_15&#39;)"><span class="hl_varref"><span class="mpre">coerce</span></span></a><span class="mpre"> </span><a href="#loc_29_42_29_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_42_29_43&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">, </span><a href="#loc_22_38_22_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_42&#39;)"><span class="hl_conref"><span class="mpre">Demo</span></span></a><span class="mpre"> </span><a href="#loc_29_40_29_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_40_29_41&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_32_9_32_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_9_32_15&#39;)"><span class="hl_varref"><span class="mpre">coerce</span></span></a><span class="mpre">))
    where
        </span><a href="#loc_32_9_32_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_9_32_15&#39;)"><span class="mpre">coerce</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/cmdargs-0.10.7/System/Console/CmdArgs/Test/Util.hs&quot;, srcSpanStartLine = 31, srcSpanStartColumn = 19, srcSpanEndLine = 31, srcSpanEndColumn = 46}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/cmdargs-0.10.7/System/Console/CmdArgs/Test/Util.hs&quot;, srcSpanStartLine = 31, srcSpanStartColumn = 19, srcSpanEndLine = 31, srcSpanEndColumn = 20},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/cmdargs-0.10.7/System/Co"><span class="mpre">(Typeable a, Typeable b) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
        </span><a name="loc_32_9_32_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_9_32_15&#39;)"><span class="hl_vardecl"><span class="mpre">coerce</span></span></a><span class="mpre"> = </span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="hl_varref"><span class="mpre">fromMaybe</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Type issue in CmdArgs.coerce&quot;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Typeable.html#loc_112_1_112_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.html#loc_112_1_112_5&#39;)"><span class="hl_varref"><span class="mpre">cast</span></span></a><span class="mpre">
</span></div></body></html>