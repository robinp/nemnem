<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
#if __GLASGOW_HASKELL__ &gt;= 701
{-# LANGUAGE Safe #-}
#endif

module IO (
        Handle, HandlePosn,
        IOMode(ReadMode,WriteMode,AppendMode,ReadWriteMode),
        BufferMode(NoBuffering,LineBuffering,BlockBuffering),
        SeekMode(AbsoluteSeek,RelativeSeek,SeekFromEnd),
        stdin, stdout, stderr,
        openFile, hClose, hFileSize, hIsEOF, isEOF,
        hSetBuffering, hGetBuffering, hFlush,
        hGetPosn, hSetPosn, hSeek,
        hWaitForInput, hReady, hGetChar, hGetLine, hLookAhead, hGetContents,
        hPutChar, hPutStr, hPutStrLn, hPrint,
        hIsOpen, hIsClosed, hIsReadable, hIsWritable, hIsSeekable,
        isAlreadyExistsError, isDoesNotExistError, isAlreadyInUseError,
        isFullError, isEOFError,
        isIllegalOperation, isPermissionError, isUserError,
        ioeGetErrorString, ioeGetHandle, ioeGetFileName,
        try, bracket, bracket_,

        </span><span class="hl_comment"><span class="mpre">-- ...and what the Prelude exports</span></span><span class="mpre">
        IO, FilePath, IOError, ioError, userError, catch, interact,
        putChar, putStr, putStrLn, print, getChar, getLine, getContents,
        readFile, writeFile, appendFile, readIO, readLn
    ) where

import System.IO
import System.IO.Error

</span><span class="hl_comment"><span class="mpre">-- | The &#39;bracket&#39; function captures a common allocate, compute, deallocate</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- idiom in which the deallocation step must occur even in the case of an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- error during computation. This is similar to try-catch-finally in Java.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This version handles only IO errors, as defined by Haskell 98.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The version of @bracket@ in &quot;Control.Exception&quot; handles all exceptions,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and should be used instead.</span></span><span class="mpre">

</span><a href="#loc_42_1_42_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_1_42_8&#39;)"><span class="mpre">bracket</span></a><span class="mpre">        :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
</span><a name="loc_42_1_42_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_1_42_8&#39;)"><span class="hl_fundecl"><span class="mpre">bracket</span></span></a><span class="mpre"> </span><a name="loc_42_9_42_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_9_42_15&#39;)"><span class="hl_vardecl"><span class="mpre">before</span></span></a><span class="mpre"> </span><a name="loc_42_16_42_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_16_42_21&#39;)"><span class="hl_vardecl"><span class="mpre">after</span></span></a><span class="mpre"> </span><a name="loc_42_22_42_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_22_42_23&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = do
        </span><a name="loc_43_9_43_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_9_43_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">  &lt;- </span><a href="#loc_42_9_42_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_9_42_15&#39;)"><span class="hl_varref"><span class="mpre">before</span></span></a><span class="mpre">
        </span><a name="loc_44_9_44_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_9_44_11&#39;)"><span class="hl_vardecl"><span class="mpre">rs</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_71_1_71_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_4&#39;)"><span class="hl_varref"><span class="mpre">try</span></span></a><span class="mpre"> (</span><a href="#loc_42_22_42_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_22_42_23&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="#loc_43_9_43_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_9_43_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
        _ &lt;- </span><a href="#loc_42_16_42_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_16_42_21&#39;)"><span class="hl_varref"><span class="mpre">after</span></span></a><span class="mpre"> </span><a href="#loc_43_9_43_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_9_43_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
        case </span><a href="#loc_44_9_44_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_9_44_11&#39;)"><span class="hl_varref"><span class="mpre">rs</span></span></a><span class="mpre"> of
           </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_47_18_47_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_18_47_19&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_47_18_47_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_18_47_19&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
           </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">  </span><a name="loc_48_18_48_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_18_48_19&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">ioError</span></span><span class="mpre"> </span><a href="#loc_48_18_48_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_18_48_19&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A variant of &#39;bracket&#39; where the middle computation doesn&#39;t want @x@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This version handles only IO errors, as defined by Haskell 98.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The version of @bracket_@ in &quot;Control.Exception&quot; handles all exceptions,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and should be used instead.</span></span><span class="mpre">

</span><a href="#loc_57_1_57_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_1_57_9&#39;)"><span class="mpre">bracket_</span></a><span class="mpre">        :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
</span><a name="loc_57_1_57_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_1_57_9&#39;)"><span class="hl_fundecl"><span class="mpre">bracket_</span></span></a><span class="mpre"> </span><a name="loc_57_10_57_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_10_57_16&#39;)"><span class="hl_vardecl"><span class="mpre">before</span></span></a><span class="mpre"> </span><a name="loc_57_17_57_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_17_57_22&#39;)"><span class="hl_vardecl"><span class="mpre">after</span></span></a><span class="mpre"> </span><a name="loc_57_23_57_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_23_57_24&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = do
         </span><a name="loc_58_10_58_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_10_58_11&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">  &lt;- </span><a href="#loc_57_10_57_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_10_57_16&#39;)"><span class="hl_varref"><span class="mpre">before</span></span></a><span class="mpre">
         </span><a name="loc_59_10_59_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_10_59_12&#39;)"><span class="hl_vardecl"><span class="mpre">rs</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_71_1_71_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_4&#39;)"><span class="hl_varref"><span class="mpre">try</span></span></a><span class="mpre"> </span><a href="#loc_57_23_57_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_23_57_24&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
         _ &lt;- </span><a href="#loc_57_17_57_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_17_57_22&#39;)"><span class="hl_varref"><span class="mpre">after</span></span></a><span class="mpre"> </span><a href="#loc_58_10_58_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_10_58_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
         case </span><a href="#loc_59_10_59_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_10_59_12&#39;)"><span class="hl_varref"><span class="mpre">rs</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_62_19_62_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_19_62_20&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_62_19_62_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_19_62_20&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">  </span><a name="loc_63_19_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_19_63_20&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">ioError</span></span><span class="mpre"> </span><a href="#loc_63_19_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_19_63_20&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The construct &#39;try&#39; @comp@ exposes IO errors which occur within a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- computation, and which are not fully handled.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Non-I\/O exceptions are not caught by this variant; to catch all</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exceptions, use &#39;Control.Exception.try&#39; from &quot;Control.Exception&quot;.</span></span><span class="mpre">
</span><a href="#loc_71_1_71_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_4&#39;)"><span class="mpre">try</span></a><span class="mpre">     :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IOError</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_71_1_71_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_4&#39;)"><span class="hl_fundecl"><span class="mpre">try</span></span></a><span class="mpre"> </span><a name="loc_71_5_71_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_5_71_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">   =  </span><a href="System.IO.Error.html#loc_84_1_84_6" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_84_1_84_6&#39;)"><span class="hl_varref"><span class="mpre">catch</span></span></a><span class="mpre"> (do </span><a name="loc_71_22_71_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_22_71_23&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_71_5_71_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_5_71_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
                     </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a href="#loc_71_22_71_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_22_71_23&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">))
                 (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">)

</span></div></body></html>