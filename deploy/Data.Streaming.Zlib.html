<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE DeriveDataTypeable #-}
</span><span class="hl_comment"><span class="mpre">-- | This is a middle-level wrapper around the zlib C API. It allows you to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- work fully with bytestrings and not touch the FFI at all, but is still</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- low-level enough to allow you to implement high-level abstractions such as</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- enumerators. Significantly, it does not use lazy IO.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- You&#39;ll probably need to reference the docs a bit to understand the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- WindowBits parameters below, but a basic rule of thumb is 15 is for zlib</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- compression, and 31 for gzip compression.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A simple streaming compressor in pseudo-code would look like:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; def &lt;- initDeflate ...</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; popper &lt;- feedDeflate def rawContent</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; pullPopper popper</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; ...</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; finishDeflate def sendCompressedData</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- You can see a more complete example is available in the included</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- file-test.hs.</span></span><span class="mpre">
module Data.Streaming.Zlib
    ( </span><span class="hl_comment"><span class="mpre">-- * Inflate</span></span><span class="mpre">
      Inflate
    , initInflate
    , initInflateWithDictionary
    , feedInflate
    , finishInflate
    , flushInflate
      </span><span class="hl_comment"><span class="mpre">-- * Deflate</span></span><span class="mpre">
    , Deflate
    , initDeflate
    , initDeflateWithDictionary
    , feedDeflate
    , finishDeflate
    , flushDeflate
      </span><span class="hl_comment"><span class="mpre">-- * Data types</span></span><span class="mpre">
    , WindowBits (..)
    , defaultWindowBits
    , ZlibException (..)
    , Popper
    , PopperRes (..)
    ) where

import Data.Streaming.Zlib.Lowlevel
import Foreign.ForeignPtr
import Foreign.C.Types
import Data.ByteString.Unsafe
import Codec.Compression.Zlib (WindowBits(WindowBits), defaultWindowBits)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 49, srcSpanStartColumn = 18, srcSpanEndLine = 49, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as S
import Data.ByteString.Lazy.Internal (</span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="mpre">defaultChunkSize</span></a><span class="mpre">)
import Control.Monad (</span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="mpre">when</span></a><span class="mpre">)
import Data.Typeable (</span><a href="Data.Typeable.Internal.html#loc_196_7_196_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_196_7_196_15&#39;)"><span class="mpre">Typeable</span></a><span class="mpre">)
import Control.Exception (Exception)

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 55, srcSpanStartColumn = 1, srcSpanEndLine = 55, srcSpanEndColumn = 64}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 55, srcSpanStartColumn = 1, srcSpanEndLine = 55, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Strea"><span class="mpre">type ZStreamPair = (ForeignPtr ZStreamStruct, ForeignPtr CChar)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The state of an inflation (eg, decompression) process. All allocated</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- memory is automatically reclaimed by the garbage collector.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Also can contain the inflation dictionary that is used for decompression.</span></span><span class="mpre">
newtype </span><a name="loc_60_9_60_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_9_60_16&#39;)"><span class="hl_tycondecl"><span class="mpre">Inflate</span></span></a><span class="mpre"> = </span><a name="loc_60_19_60_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_19_60_26&#39;)"><span class="hl_condecl"><span class="mpre">Inflate</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">ZStreamPair</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | The state of a deflation (eg, compression) process. All allocated memory</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is automatically reclaimed by the garbage collector.</span></span><span class="mpre">
newtype </span><a name="loc_64_9_64_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_9_64_16&#39;)"><span class="hl_tycondecl"><span class="mpre">Deflate</span></span></a><span class="mpre"> = </span><a name="loc_64_19_64_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_19_64_26&#39;)"><span class="hl_condecl"><span class="mpre">Deflate</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ZStreamPair</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Exception that can be thrown from the FFI code. The parameter is the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- numerical error code from the zlib library. Quoting the zlib.h file</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- directly:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_OK            0</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_STREAM_END    1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_NEED_DICT     2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_ERRNO        (-1)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_STREAM_ERROR (-2)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_DATA_ERROR   (-3)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_MEM_ERROR    (-4)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_BUF_ERROR    (-5)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * #define Z_VERSION_ERROR (-6)</span></span><span class="mpre">

data </span><a name="loc_88_6_88_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_6_88_19&#39;)"><span class="hl_tycondecl"><span class="mpre">ZlibException</span></span></a><span class="mpre"> = </span><a name="loc_88_22_88_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_22_88_35&#39;)"><span class="hl_condecl"><span class="mpre">ZlibException</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 89, srcSpanStartColumn = 5, srcSpanEndLine = 89, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 89, srcSpanStartColumn = 5, srcSpanEndLine = 89, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Stre"><span class="mpre">deriving (Show, Typeable)</span></span><span class="mpre">
instance </span><span class="hl_classref"><span class="mpre">Exception</span></span><span class="mpre"> </span><a href="#loc_88_6_88_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_6_88_19&#39;)"><span class="hl_tyconref"><span class="mpre">ZlibException</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Some constants for the error codes, used internally</span></span><span class="mpre">
</span><a href="#loc_94_1_94_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_1_94_10&#39;)"><span class="mpre">zNeedDict</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre">
</span><a name="loc_94_1_94_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_1_94_10&#39;)"><span class="hl_vardecl"><span class="mpre">zNeedDict</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">

</span><a href="#loc_97_1_97_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_10&#39;)"><span class="mpre">zBufError</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre">
</span><a name="loc_97_1_97_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_10&#39;)"><span class="hl_vardecl"><span class="mpre">zBufError</span></span></a><span class="mpre"> = -</span><span class="hl_num"><span class="mpre">5</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Initialize an inflation process with the given &#39;WindowBits&#39;. You will need</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to call &#39;feedInflate&#39; to feed compressed data to this and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;finishInflate&#39; to extract the final chunk of decompressed data.</span></span><span class="mpre">
</span><a href="#loc_103_1_103_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_1_103_12&#39;)"><span class="mpre">initInflate</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">WindowBits</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_60_9_60_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_9_60_16&#39;)"><span class="hl_tyconref"><span class="mpre">Inflate</span></span></a><span class="mpre">
</span><a name="loc_103_1_103_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_1_103_12&#39;)"><span class="hl_fundecl"><span class="mpre">initInflate</span></span></a><span class="mpre"> </span><a name="loc_103_13_103_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_13_103_14&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> = do
    </span><a name="loc_104_5_104_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_5_104_9&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">zstreamNew</span></span><span class="mpre">
    </span><a href="Data.Streaming.Zlib.Lowlevel.html#loc_57_1_57_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Streaming.Zlib.Lowlevel.html#loc_57_1_57_13&#39;)"><span class="hl_varref"><span class="mpre">inflateInit2</span></span></a><span class="mpre"> </span><a href="#loc_104_5_104_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_5_104_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_103_13_103_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_103_13_103_14&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
    </span><a name="loc_106_5_106_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_5_106_10&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.ForeignPtr.Imp.html#loc_63_1_63_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_63_1_63_14&#39;)"><span class="hl_varref"><span class="mpre">newForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_free_z_stream_inflate</span></span><span class="mpre"> </span><a href="#loc_104_5_104_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_5_104_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">
    </span><a name="loc_107_5_107_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_5_107_10&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">mallocForeignPtrBytes</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
    </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_107_5_107_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_5_107_10&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_108_29_108_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_29_108_33&#39;)"><span class="hl_vardecl"><span class="mpre">buff</span></span></a><span class="mpre"> -&gt;
        </span><span class="hl_varref"><span class="mpre">c_set_avail_out</span></span><span class="mpre"> </span><a href="#loc_104_5_104_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_5_104_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_108_29_108_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_29_108_33&#39;)"><span class="hl_varref"><span class="mpre">buff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_60_19_60_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_19_60_26&#39;)"><span class="hl_conref"><span class="mpre">Inflate</span></span></a><span class="mpre"> ((</span><a href="#loc_106_5_106_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_5_106_10&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a href="#loc_107_5_107_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_5_107_10&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre">), </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Initialize an inflation process with the given &#39;WindowBits&#39;. </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Unlike initInflate a dictionary for inflation is set which must</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- match the one set during compression.</span></span><span class="mpre">
</span><a href="#loc_116_1_116_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_26&#39;)"><span class="mpre">initInflateWithDictionary</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">WindowBits</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_60_9_60_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_9_60_16&#39;)"><span class="hl_tyconref"><span class="mpre">Inflate</span></span></a><span class="mpre">
</span><a name="loc_116_1_116_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_26&#39;)"><span class="hl_fundecl"><span class="mpre">initInflateWithDictionary</span></span></a><span class="mpre"> </span><a name="loc_116_27_116_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_27_116_28&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> </span><a name="loc_116_29_116_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_29_116_31&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = do
    </span><a name="loc_117_5_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_9&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">zstreamNew</span></span><span class="mpre">
    </span><a href="Data.Streaming.Zlib.Lowlevel.html#loc_57_1_57_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Streaming.Zlib.Lowlevel.html#loc_57_1_57_13&#39;)"><span class="hl_varref"><span class="mpre">inflateInit2</span></span></a><span class="mpre"> </span><a href="#loc_117_5_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_116_27_116_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_27_116_28&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
    </span><a name="loc_119_5_119_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_5_119_10&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.ForeignPtr.Imp.html#loc_63_1_63_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_63_1_63_14&#39;)"><span class="hl_varref"><span class="mpre">newForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_free_z_stream_inflate</span></span><span class="mpre"> </span><a href="#loc_117_5_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">
    </span><a name="loc_120_5_120_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_10&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">mallocForeignPtrBytes</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">

    </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_120_5_120_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_10&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_122_29_122_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_29_122_33&#39;)"><span class="hl_vardecl"><span class="mpre">buff</span></span></a><span class="mpre"> -&gt;
        </span><span class="hl_varref"><span class="mpre">c_set_avail_out</span></span><span class="mpre"> </span><a href="#loc_117_5_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_122_29_122_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_29_122_33&#39;)"><span class="hl_varref"><span class="mpre">buff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_60_19_60_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_19_60_26&#39;)"><span class="hl_conref"><span class="mpre">Inflate</span></span></a><span class="mpre"> ((</span><a href="#loc_119_5_119_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_5_119_10&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a href="#loc_120_5_120_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_5_120_10&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre">), </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_116_29_116_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_29_116_31&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Initialize a deflation process with the given compression level and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;WindowBits&#39;. You will need to call &#39;feedDeflate&#39; to feed uncompressed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- data to this and &#39;finishDeflate&#39; to extract the final chunks of compressed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- data.</span></span><span class="mpre">
</span><a href="#loc_132_1_132_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_12&#39;)"><span class="mpre">initDeflate</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ Compression level</span></span><span class="mpre">
            -&gt; </span><span class="hl_tyconref"><span class="mpre">WindowBits</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_64_9_64_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_9_64_16&#39;)"><span class="hl_tyconref"><span class="mpre">Deflate</span></span></a><span class="mpre">
</span><a name="loc_132_1_132_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_12&#39;)"><span class="hl_fundecl"><span class="mpre">initDeflate</span></span></a><span class="mpre"> </span><a name="loc_132_13_132_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_13_132_18&#39;)"><span class="hl_vardecl"><span class="mpre">level</span></span></a><span class="mpre"> </span><a name="loc_132_19_132_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_19_132_20&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> = do
    </span><a name="loc_133_5_133_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_5_133_9&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">zstreamNew</span></span><span class="mpre">
    </span><a href="Data.Streaming.Zlib.Lowlevel.html#loc_48_1_48_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Streaming.Zlib.Lowlevel.html#loc_48_1_48_13&#39;)"><span class="hl_varref"><span class="mpre">deflateInit2</span></span></a><span class="mpre"> </span><a href="#loc_133_5_133_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_5_133_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_132_13_132_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_13_132_18&#39;)"><span class="hl_varref"><span class="mpre">level</span></span></a><span class="mpre"> </span><a href="#loc_132_19_132_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_19_132_20&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">8</span></span><span class="mpre"> </span><a href="Data.Streaming.Zlib.Lowlevel.html#loc_33_7_33_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Streaming.Zlib.Lowlevel.html#loc_33_7_33_22&#39;)"><span class="hl_conref"><span class="mpre">StrategyDefault</span></span></a><span class="mpre">
    </span><a name="loc_135_5_135_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_5_135_10&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.ForeignPtr.Imp.html#loc_63_1_63_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_63_1_63_14&#39;)"><span class="hl_varref"><span class="mpre">newForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_free_z_stream_deflate</span></span><span class="mpre"> </span><a href="#loc_133_5_133_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_5_133_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">
    </span><a name="loc_136_5_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_5_136_10&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">mallocForeignPtrBytes</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
    </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_136_5_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_5_136_10&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_137_29_137_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_29_137_33&#39;)"><span class="hl_vardecl"><span class="mpre">buff</span></span></a><span class="mpre"> -&gt;
        </span><span class="hl_varref"><span class="mpre">c_set_avail_out</span></span><span class="mpre"> </span><a href="#loc_133_5_133_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_5_133_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_137_29_137_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_29_137_33&#39;)"><span class="hl_varref"><span class="mpre">buff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_64_19_64_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_19_64_26&#39;)"><span class="hl_conref"><span class="mpre">Deflate</span></span></a><span class="mpre"> (</span><a href="#loc_135_5_135_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_5_135_10&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a href="#loc_136_5_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_5_136_10&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Initialize an deflation process with the given compression level and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;WindowBits&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Unlike initDeflate a dictionary for deflation is set.</span></span><span class="mpre">
</span><a href="#loc_147_1_147_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_1_147_26&#39;)"><span class="mpre">initDeflateWithDictionary</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ Compression level</span></span><span class="mpre">
                          -&gt; </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ Deflate dictionary</span></span><span class="mpre">
                          -&gt; </span><span class="hl_tyconref"><span class="mpre">WindowBits</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_64_9_64_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_9_64_16&#39;)"><span class="hl_tyconref"><span class="mpre">Deflate</span></span></a><span class="mpre">
</span><a name="loc_147_1_147_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_1_147_26&#39;)"><span class="hl_fundecl"><span class="mpre">initDeflateWithDictionary</span></span></a><span class="mpre"> </span><a name="loc_147_27_147_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_27_147_32&#39;)"><span class="hl_vardecl"><span class="mpre">level</span></span></a><span class="mpre"> </span><a name="loc_147_33_147_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_33_147_35&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a name="loc_147_36_147_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_36_147_37&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> = do
    </span><a name="loc_148_5_148_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_5_148_9&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">zstreamNew</span></span><span class="mpre">
    </span><a href="Data.Streaming.Zlib.Lowlevel.html#loc_48_1_48_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Streaming.Zlib.Lowlevel.html#loc_48_1_48_13&#39;)"><span class="hl_varref"><span class="mpre">deflateInit2</span></span></a><span class="mpre"> </span><a href="#loc_148_5_148_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_5_148_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_147_27_147_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_27_147_32&#39;)"><span class="hl_varref"><span class="mpre">level</span></span></a><span class="mpre"> </span><a href="#loc_147_36_147_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_36_147_37&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">8</span></span><span class="mpre"> </span><a href="Data.Streaming.Zlib.Lowlevel.html#loc_33_7_33_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Streaming.Zlib.Lowlevel.html#loc_33_7_33_22&#39;)"><span class="hl_conref"><span class="mpre">StrategyDefault</span></span></a><span class="mpre">
    </span><a name="loc_150_5_150_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_5_150_10&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.ForeignPtr.Imp.html#loc_63_1_63_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_63_1_63_14&#39;)"><span class="hl_varref"><span class="mpre">newForeignPtr</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_free_z_stream_deflate</span></span><span class="mpre"> </span><a href="#loc_148_5_148_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_5_148_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">
    </span><a name="loc_151_5_151_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_5_151_10&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">mallocForeignPtrBytes</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">

    </span><a href="Data.ByteString.Unsafe.html#loc_311_1_311_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Unsafe.html#loc_311_1_311_22&#39;)"><span class="hl_varref"><span class="mpre">unsafeUseAsCStringLen</span></span></a><span class="mpre"> </span><a href="#loc_147_33_147_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_33_147_35&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \(</span><a name="loc_153_34_153_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_34_153_38&#39;)"><span class="hl_vardecl"><span class="mpre">cstr</span></span></a><span class="mpre">, </span><a name="loc_153_40_153_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_40_153_43&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) -&gt; do
        </span><span class="hl_varref"><span class="mpre">c_call_deflate_set_dictionary</span></span><span class="mpre"> </span><a href="#loc_148_5_148_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_5_148_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_153_34_153_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_34_153_38&#39;)"><span class="hl_varref"><span class="mpre">cstr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_153_40_153_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_40_153_43&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">

    </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_151_5_151_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_5_151_10&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_156_29_156_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_29_156_33&#39;)"><span class="hl_vardecl"><span class="mpre">buff</span></span></a><span class="mpre"> -&gt;
        </span><span class="hl_varref"><span class="mpre">c_set_avail_out</span></span><span class="mpre"> </span><a href="#loc_148_5_148_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_5_148_9&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_156_29_156_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_29_156_33&#39;)"><span class="hl_varref"><span class="mpre">buff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_64_19_64_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_19_64_26&#39;)"><span class="hl_conref"><span class="mpre">Deflate</span></span></a><span class="mpre"> (</span><a href="#loc_150_5_150_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_5_150_10&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a href="#loc_151_5_151_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_5_151_10&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Feed the given &#39;S.ByteString&#39; to the inflater. Return a &#39;Popper&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- an IO action that returns the decompressed data a chunk at a time.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The &#39;Popper&#39; must be called to exhaustion before using the &#39;Inflate&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- object again.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note that this function automatically buffers the output to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;defaultChunkSize&#39;, and therefore you won&#39;t get any data from the popper</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- until that much decompressed data is available. After you have fed all of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the compressed data to this function, you can extract your final chunk of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- decompressed data using &#39;finishInflate&#39;.</span></span><span class="mpre">
</span><a href="#loc_174_1_174_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_1_174_12&#39;)"><span class="mpre">feedInflate</span></a><span class="mpre">
    :: </span><a href="#loc_60_9_60_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_9_60_16&#39;)"><span class="hl_tyconref"><span class="mpre">Inflate</span></span></a><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Popper</span></span><span class="mpre">
</span><a name="loc_174_1_174_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_1_174_12&#39;)"><span class="hl_fundecl"><span class="mpre">feedInflate</span></span></a><span class="mpre"> (</span><a href="#loc_60_19_60_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_19_60_26&#39;)"><span class="hl_conref"><span class="mpre">Inflate</span></span></a><span class="mpre"> ((</span><a name="loc_174_24_174_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_24_174_29&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a name="loc_174_31_174_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_31_174_36&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre">), </span><a name="loc_174_39_174_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_39_174_56&#39;)"><span class="hl_vardecl"><span class="mpre">inflateDictionary</span></span></a><span class="mpre">)) </span><a name="loc_174_59_174_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_59_174_61&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = do
    </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_174_24_174_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_24_174_29&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_175_29_175_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_29_175_33&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> -&gt;
        </span><a href="Data.ByteString.Unsafe.html#loc_311_1_311_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Unsafe.html#loc_311_1_311_22&#39;)"><span class="hl_varref"><span class="mpre">unsafeUseAsCStringLen</span></span></a><span class="mpre"> </span><a href="#loc_174_59_174_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_59_174_61&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \(</span><a name="loc_176_38_176_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_38_176_42&#39;)"><span class="hl_vardecl"><span class="mpre">cstr</span></span></a><span class="mpre">, </span><a name="loc_176_44_176_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_44_176_47&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) -&gt;
            </span><span class="hl_varref"><span class="mpre">c_set_avail_in</span></span><span class="mpre"> </span><a href="#loc_175_29_175_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_29_175_33&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_176_38_176_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_38_176_42&#39;)"><span class="hl_varref"><span class="mpre">cstr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_176_44_176_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_44_176_47&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_210_1_210_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_6&#39;)"><span class="hl_varref"><span class="mpre">drain</span></span></a><span class="mpre"> </span><a href="#loc_174_31_174_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_31_174_36&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><a href="#loc_174_24_174_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_24_174_29&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_174_59_174_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_59_174_61&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) </span><a href="#loc_180_5_180_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_5_180_12&#39;)"><span class="hl_varref"><span class="mpre">inflate</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
  where
    </span><a name="loc_180_5_180_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_5_180_12&#39;)"><span class="hl_fundecl"><span class="mpre">inflate</span></span></a><span class="mpre"> </span><a name="loc_180_13_180_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_13_180_17&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> = do
        </span><a name="loc_181_9_181_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_9_181_12&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">c_call_inflate_noflush</span></span><span class="mpre"> </span><a href="#loc_180_13_180_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_13_180_17&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">
        if (</span><a href="#loc_181_9_181_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_9_181_12&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_94_1_94_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_1_94_10&#39;)"><span class="hl_varref"><span class="mpre">zNeedDict</span></span></a><span class="mpre">)
            then </span><span class="hl_varref"><span class="mpre">maybe</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_94_1_94_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_1_94_10&#39;)"><span class="hl_varref"><span class="mpre">zNeedDict</span></span></a><span class="mpre">)
                       (\</span><a name="loc_184_26_184_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_26_184_30&#39;)"><span class="hl_vardecl"><span class="mpre">dict</span></span></a><span class="mpre"> -&gt; (</span><a href="Data.ByteString.Unsafe.html#loc_311_1_311_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Unsafe.html#loc_311_1_311_22&#39;)"><span class="hl_varref"><span class="mpre">unsafeUseAsCStringLen</span></span></a><span class="mpre"> </span><a href="#loc_184_26_184_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_26_184_30&#39;)"><span class="hl_varref"><span class="mpre">dict</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \(</span><a name="loc_184_66_184_70" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_66_184_70&#39;)"><span class="hl_vardecl"><span class="mpre">cstr</span></span></a><span class="mpre">, </span><a name="loc_184_72_184_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_72_184_75&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) -&gt; do
                                    </span><span class="hl_varref"><span class="mpre">c_call_inflate_set_dictionary</span></span><span class="mpre"> </span><a href="#loc_180_13_180_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_13_180_17&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_184_66_184_70" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_66_184_70&#39;)"><span class="hl_varref"><span class="mpre">cstr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_184_72_184_75" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_72_184_75&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
                                    </span><span class="hl_varref"><span class="mpre">c_call_inflate_noflush</span></span><span class="mpre"> </span><a href="#loc_180_13_180_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_13_180_17&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">))
                       </span><a href="#loc_174_39_174_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_174_39_174_56&#39;)"><span class="hl_varref"><span class="mpre">inflateDictionary</span></span></a><span class="mpre">
            else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_181_9_181_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_9_181_12&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | An IO action that returns the next chunk of data, returning &#39;Nothing&#39; when</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- there is no more data to be popped.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 192, srcSpanStartColumn = 1, srcSpanEndLine = 192, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 192, srcSpanStartColumn = 1, srcSpanEndLine = 192, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/S"><span class="mpre">type Popper = IO PopperRes</span></span><span class="mpre">

data </span><a name="loc_194_6_194_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_6_194_15&#39;)"><span class="hl_tycondecl"><span class="mpre">PopperRes</span></span></a><span class="mpre"> = </span><a name="loc_194_18_194_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_18_194_24&#39;)"><span class="hl_condecl"><span class="mpre">PRDone</span></span></a><span class="mpre">
               | </span><a name="loc_195_18_195_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_18_195_24&#39;)"><span class="hl_condecl"><span class="mpre">PRNext</span></span></a><span class="mpre"> !</span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre">
               | </span><a name="loc_196_18_196_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_18_196_25&#39;)"><span class="hl_condecl"><span class="mpre">PRError</span></span></a><span class="mpre"> !</span><a href="#loc_88_6_88_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_6_88_19&#39;)"><span class="hl_tyconref"><span class="mpre">ZlibException</span></span></a><span class="mpre">
    </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 197, srcSpanStartColumn = 5, srcSpanEndLine = 197, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/Streaming/Zlib.hs&quot;, srcSpanStartLine = 197, srcSpanStartColumn = 5, srcSpanEndLine = 197, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/streaming-commons-0.1.3/Data/"><span class="mpre">deriving (Show, Typeable)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Ensure that the given @ByteString@ is not deallocated.</span></span><span class="mpre">
</span><a href="#loc_201_1_201_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_10&#39;)"><span class="mpre">keepAlive</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_201_1_201_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_10&#39;)"><span class="hl_fundecl"><span class="mpre">keepAlive</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><a href="#loc_201_1_201_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_10&#39;)"><span class="hl_fundecl"><span class="mpre">keepAlive</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_202_17_202_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_17_202_19&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">) = </span><a href="Data.ByteString.Unsafe.html#loc_311_1_311_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Unsafe.html#loc_311_1_311_22&#39;)"><span class="hl_varref"><span class="mpre">unsafeUseAsCStringLen</span></span></a><span class="mpre"> </span><a href="#loc_202_17_202_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_17_202_19&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre">

</span><a href="#loc_210_1_210_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_6&#39;)"><span class="mpre">drain</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CChar</span></span><span class="mpre">
      -&gt; </span><span class="hl_tyconref"><span class="mpre">ForeignPtr</span></span><span class="mpre"> </span><a href="Data.Streaming.Zlib.Lowlevel.html#loc_29_6_29_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Streaming.Zlib.Lowlevel.html#loc_29_6_29_19&#39;)"><span class="hl_tyconref"><span class="mpre">ZStreamStruct</span></span></a><span class="mpre">
      -&gt; </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre">
      -&gt; (</span><span class="hl_tyconref"><span class="mpre">ZStream&#39;</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre">)
      -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
      -&gt; </span><span class="hl_tyconref"><span class="mpre">Popper</span></span><span class="mpre">
</span><a name="loc_210_1_210_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_6&#39;)"><span class="hl_fundecl"><span class="mpre">drain</span></span></a><span class="mpre"> </span><a name="loc_210_7_210_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_7_210_12&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><a name="loc_210_13_210_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_13_210_18&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre"> </span><a name="loc_210_19_210_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_19_210_22&#39;)"><span class="hl_vardecl"><span class="mpre">mbs</span></span></a><span class="mpre"> </span><a name="loc_210_23_210_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_23_210_27&#39;)"><span class="hl_vardecl"><span class="mpre">func</span></span></a><span class="mpre"> </span><a name="loc_210_28_210_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_28_210_36&#39;)"><span class="hl_vardecl"><span class="mpre">isFinish</span></span></a><span class="mpre"> = </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_210_13_210_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_13_210_18&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_210_63_210_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_63_210_67&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_201_1_201_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_10&#39;)"><span class="hl_varref"><span class="mpre">keepAlive</span></span></a><span class="mpre"> </span><a href="#loc_210_19_210_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_19_210_22&#39;)"><span class="hl_varref"><span class="mpre">mbs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    </span><a name="loc_211_5_211_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_5_211_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_210_23_210_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_23_210_27&#39;)"><span class="hl_varref"><span class="mpre">func</span></span></a><span class="mpre"> </span><a href="#loc_210_63_210_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_63_210_67&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">
    if </span><a href="#loc_211_5_211_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_5_211_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_211_5_211_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_5_211_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="#loc_97_1_97_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_10&#39;)"><span class="hl_varref"><span class="mpre">zBufError</span></span></a><span class="mpre">
        then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_196_18_196_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_18_196_25&#39;)"><span class="hl_conref"><span class="mpre">PRError</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_88_22_88_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_22_88_35&#39;)"><span class="hl_conref"><span class="mpre">ZlibException</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_211_5_211_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_5_211_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
        else do
            </span><a name="loc_215_13_215_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_215_13_215_18&#39;)"><span class="hl_vardecl"><span class="mpre">avail</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">c_get_avail_out</span></span><span class="mpre"> </span><a href="#loc_210_63_210_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_63_210_67&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">
            let </span><a name="loc_216_17_216_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_17_216_21&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> = </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_215_13_215_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_215_13_215_18&#39;)"><span class="hl_varref"><span class="mpre">avail</span></span></a><span class="mpre">
                </span><a name="loc_217_17_217_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_17_217_25&#39;)"><span class="hl_vardecl"><span class="mpre">toOutput</span></span></a><span class="mpre"> = </span><a href="#loc_215_13_215_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_215_13_215_18&#39;)"><span class="hl_varref"><span class="mpre">avail</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> (</span><a href="#loc_210_28_210_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_28_210_36&#39;)"><span class="hl_varref"><span class="mpre">isFinish</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_216_17_216_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_17_216_21&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">)
            if </span><a href="#loc_217_17_217_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_17_217_25&#39;)"><span class="hl_varref"><span class="mpre">toOutput</span></span></a><span class="mpre">
                then </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_210_7_210_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_7_210_12&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_219_46_219_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_46_219_50&#39;)"><span class="hl_vardecl"><span class="mpre">buff</span></span></a><span class="mpre"> -&gt; do
                    </span><a name="loc_220_21_220_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_21_220_23&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">S.packCStringLen</span></span><span class="mpre"> (</span><a href="#loc_219_46_219_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_46_219_50&#39;)"><span class="hl_varref"><span class="mpre">buff</span></span></a><span class="mpre">, </span><a href="#loc_216_17_216_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_17_216_21&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">)
                    </span><span class="hl_varref"><span class="mpre">c_set_avail_out</span></span><span class="mpre"> </span><a href="#loc_210_63_210_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_63_210_67&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_219_46_219_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_46_219_50&#39;)"><span class="hl_varref"><span class="mpre">buff</span></span></a><span class="mpre">
                        </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
                    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_195_18_195_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_18_195_24&#39;)"><span class="hl_conref"><span class="mpre">PRNext</span></span></a><span class="mpre"> </span><a href="#loc_220_21_220_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_21_220_23&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_194_18_194_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_18_194_24&#39;)"><span class="hl_conref"><span class="mpre">PRDone</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | As explained in &#39;feedInflate&#39;, inflation buffers your decompressed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- data. After you call &#39;feedInflate&#39; with your last chunk of compressed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- data, you will likely have some data still sitting in the buffer. This</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- function will return it to you.</span></span><span class="mpre">
</span><a href="#loc_232_1_232_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_1_232_14&#39;)"><span class="mpre">finishInflate</span></a><span class="mpre"> :: </span><a href="#loc_60_9_60_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_9_60_16&#39;)"><span class="hl_tyconref"><span class="mpre">Inflate</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre">
</span><a name="loc_232_1_232_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_1_232_14&#39;)"><span class="hl_fundecl"><span class="mpre">finishInflate</span></span></a><span class="mpre"> (</span><a href="#loc_60_19_60_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_19_60_26&#39;)"><span class="hl_conref"><span class="mpre">Inflate</span></span></a><span class="mpre"> ((</span><a name="loc_232_26_232_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_26_232_31&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a name="loc_232_33_232_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_33_232_38&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre">), _)) =
    </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_232_26_232_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_26_232_31&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_233_29_233_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_29_233_33&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> -&gt;
        </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_232_33_232_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_33_232_38&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_234_33_234_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_33_234_37&#39;)"><span class="hl_vardecl"><span class="mpre">buff</span></span></a><span class="mpre"> -&gt; do
            </span><a name="loc_235_13_235_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_18&#39;)"><span class="hl_vardecl"><span class="mpre">avail</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">c_get_avail_out</span></span><span class="mpre"> </span><a href="#loc_233_29_233_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_29_233_33&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre">
            let </span><a name="loc_236_17_236_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_17_236_21&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> = </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_235_13_235_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_13_235_18&#39;)"><span class="hl_varref"><span class="mpre">avail</span></span></a><span class="mpre">
            </span><a name="loc_237_13_237_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_13_237_15&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">S.packCStringLen</span></span><span class="mpre"> (</span><a href="#loc_234_33_234_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_33_234_37&#39;)"><span class="hl_varref"><span class="mpre">buff</span></span></a><span class="mpre">, </span><a href="#loc_236_17_236_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_17_236_21&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">)
            </span><span class="hl_varref"><span class="mpre">c_set_avail_out</span></span><span class="mpre"> </span><a href="#loc_233_29_233_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_29_233_33&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_234_33_234_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_33_234_37&#39;)"><span class="hl_varref"><span class="mpre">buff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_237_13_237_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_13_237_15&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Flush the inflation buffer. Useful for interactive application.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is actually a synonym for &#39;finishInflate&#39;. It is provided for its more</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- semantic name.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 0.0.3</span></span><span class="mpre">
</span><a href="#loc_248_1_248_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_1_248_13&#39;)"><span class="mpre">flushInflate</span></a><span class="mpre"> :: </span><a href="#loc_60_9_60_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_9_60_16&#39;)"><span class="hl_tyconref"><span class="mpre">Inflate</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre">
</span><a name="loc_248_1_248_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_248_1_248_13&#39;)"><span class="hl_vardecl"><span class="mpre">flushInflate</span></span></a><span class="mpre"> = </span><a href="#loc_232_1_232_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_1_232_14&#39;)"><span class="hl_varref"><span class="mpre">finishInflate</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Feed the given &#39;S.ByteString&#39; to the deflater. Return a &#39;Popper&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- an IO action that returns the compressed data a chunk at a time.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The &#39;Popper&#39; must be called to exhaustion before using the &#39;Deflate&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- object again.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note that this function automatically buffers the output to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;defaultChunkSize&#39;, and therefore you won&#39;t get any data from the popper</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- until that much compressed data is available. After you have fed all of the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- decompressed data to this function, you can extract your final chunks of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- compressed data using &#39;finishDeflate&#39;.</span></span><span class="mpre">
</span><a href="#loc_261_1_261_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_1_261_12&#39;)"><span class="mpre">feedDeflate</span></a><span class="mpre"> :: </span><a href="#loc_64_9_64_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_9_64_16&#39;)"><span class="hl_tyconref"><span class="mpre">Deflate</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Popper</span></span><span class="mpre">
</span><a name="loc_261_1_261_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_1_261_12&#39;)"><span class="hl_fundecl"><span class="mpre">feedDeflate</span></span></a><span class="mpre"> (</span><a href="#loc_64_19_64_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_19_64_26&#39;)"><span class="hl_conref"><span class="mpre">Deflate</span></span></a><span class="mpre"> (</span><a name="loc_261_23_261_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_23_261_28&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a name="loc_261_30_261_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_30_261_35&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre">)) </span><a name="loc_261_38_261_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_38_261_40&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = do
    </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_261_23_261_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_23_261_28&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_262_29_262_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_29_262_33&#39;)"><span class="hl_vardecl"><span class="mpre">zstr</span></span></a><span class="mpre"> -&gt;
        </span><a href="Data.ByteString.Unsafe.html#loc_311_1_311_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Unsafe.html#loc_311_1_311_22&#39;)"><span class="hl_varref"><span class="mpre">unsafeUseAsCStringLen</span></span></a><span class="mpre"> </span><a href="#loc_261_38_261_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_38_261_40&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \(</span><a name="loc_263_38_263_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_38_263_42&#39;)"><span class="hl_vardecl"><span class="mpre">cstr</span></span></a><span class="mpre">, </span><a name="loc_263_44_263_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_44_263_47&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) -&gt; do
            </span><span class="hl_varref"><span class="mpre">c_set_avail_in</span></span><span class="mpre"> </span><a href="#loc_262_29_262_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_29_262_33&#39;)"><span class="hl_varref"><span class="mpre">zstr</span></span></a><span class="mpre"> </span><a href="#loc_263_38_263_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_38_263_42&#39;)"><span class="hl_varref"><span class="mpre">cstr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_263_44_263_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_44_263_47&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_210_1_210_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_6&#39;)"><span class="hl_varref"><span class="mpre">drain</span></span></a><span class="mpre"> </span><a href="#loc_261_30_261_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_30_261_35&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><a href="#loc_261_23_261_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_23_261_28&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_261_38_261_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_38_261_40&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) </span><span class="hl_varref"><span class="mpre">c_call_deflate_noflush</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | As explained in &#39;feedDeflate&#39;, deflation buffers your compressed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- data. After you call &#39;feedDeflate&#39; with your last chunk of uncompressed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- data, use this to flush the rest of the data and signal end of input.</span></span><span class="mpre">
</span><a href="#loc_271_1_271_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_1_271_14&#39;)"><span class="mpre">finishDeflate</span></a><span class="mpre"> :: </span><a href="#loc_64_9_64_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_9_64_16&#39;)"><span class="hl_tyconref"><span class="mpre">Deflate</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Popper</span></span><span class="mpre">
</span><a name="loc_271_1_271_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_1_271_14&#39;)"><span class="hl_fundecl"><span class="mpre">finishDeflate</span></span></a><span class="mpre"> (</span><a href="#loc_64_19_64_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_19_64_26&#39;)"><span class="hl_conref"><span class="mpre">Deflate</span></span></a><span class="mpre"> (</span><a name="loc_271_25_271_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_25_271_30&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a name="loc_271_32_271_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_32_271_37&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre">)) =
    </span><a href="#loc_210_1_210_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_6&#39;)"><span class="hl_varref"><span class="mpre">drain</span></span></a><span class="mpre"> </span><a href="#loc_271_32_271_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_32_271_37&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><a href="#loc_271_25_271_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_25_271_30&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_call_deflate_finish</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Flush the deflation buffer. Useful for interactive application.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Internally this passes Z_SYNC_FLUSH to the zlib library.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Unlike &#39;finishDeflate&#39;, &#39;flushDeflate&#39; does not signal end of input,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- meaning you can feed more uncompressed data afterward.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 0.0.3</span></span><span class="mpre">
</span><a href="#loc_282_1_282_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_282_1_282_13&#39;)"><span class="mpre">flushDeflate</span></a><span class="mpre"> :: </span><a href="#loc_64_9_64_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_9_64_16&#39;)"><span class="hl_tyconref"><span class="mpre">Deflate</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Popper</span></span><span class="mpre">
</span><a name="loc_282_1_282_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_282_1_282_13&#39;)"><span class="hl_fundecl"><span class="mpre">flushDeflate</span></span></a><span class="mpre"> (</span><a href="#loc_64_19_64_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_19_64_26&#39;)"><span class="hl_conref"><span class="mpre">Deflate</span></span></a><span class="mpre"> (</span><a name="loc_282_24_282_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_282_24_282_29&#39;)"><span class="hl_vardecl"><span class="mpre">fzstr</span></span></a><span class="mpre">, </span><a name="loc_282_31_282_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_282_31_282_36&#39;)"><span class="hl_vardecl"><span class="mpre">fbuff</span></span></a><span class="mpre">)) =
    </span><a href="#loc_210_1_210_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_1_210_6&#39;)"><span class="hl_varref"><span class="mpre">drain</span></span></a><span class="mpre"> </span><a href="#loc_282_31_282_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_282_31_282_36&#39;)"><span class="hl_varref"><span class="mpre">fbuff</span></span></a><span class="mpre"> </span><a href="#loc_282_24_282_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_282_24_282_29&#39;)"><span class="hl_varref"><span class="mpre">fzstr</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_call_deflate_flush</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
</span></div></body></html>