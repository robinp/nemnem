<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
#ifdef __GLASGOW_HASKELL__
{-# LANGUAGE Trustworthy #-}
#endif

module System.Posix.Process.Internals (
       pPrPr_disableITimers, c_execvpe,
       decipherWaitStatus, ProcessStatus(..) ) where

import Foreign
import Foreign.C
import System.Exit
import System.IO.Error
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 14, srcSpanStartColumn = 8, srcSpanEndLine = 14, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Conc&quot;"><span class="mpre">GHC.Conc</span></span><span class="mpre"> (Signal)

</span><span class="hl_comment"><span class="mpre">-- | The exit status of a process</span></span><span class="mpre">
data </span><a name="loc_17_6_17_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_17_6_17_19&#39;)"><span class="hl_tycondecl"><span class="mpre">ProcessStatus</span></span></a><span class="mpre">
   = </span><a name="loc_18_6_18_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_18_6_18_12&#39;)"><span class="hl_condecl"><span class="mpre">Exited</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ExitCode</span></span><span class="mpre">        </span><span class="hl_comment"><span class="mpre">-- ^ the process exited by calling</span></span><span class="mpre">
                            </span><span class="hl_comment"><span class="mpre">-- @exit()@ or returning from @main@</span></span><span class="mpre">
   | </span><a name="loc_20_6_20_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_20_6_20_16&#39;)"><span class="hl_condecl"><span class="mpre">Terminated</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Signal</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ the process was terminated by a</span></span><span class="mpre">
                            </span><span class="hl_comment"><span class="mpre">-- signal, the @Bool@ is @True@ if a core</span></span><span class="mpre">
                            </span><span class="hl_comment"><span class="mpre">-- dump was produced</span></span><span class="mpre">
                            </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
                            </span><span class="hl_comment"><span class="mpre">-- /Since: 2.7.0.0/</span></span><span class="mpre">
   | </span><a name="loc_25_6_25_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_6_25_13&#39;)"><span class="hl_condecl"><span class="mpre">Stopped</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Signal</span></span><span class="mpre">         </span><span class="hl_comment"><span class="mpre">-- ^ the process was stopped by a signal</span></span><span class="mpre">
   </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 26, srcSpanStartColumn = 4, srcSpanEndLine = 26, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 26, srcSpanStartColumn = 4, srcSpanEndLine = 26, srcSpanEndColumn = 12},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process"><span class="mpre">deriving (Eq, Ord, Show)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- this function disables the itimer, which would otherwise cause confusing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- signals to be sent to the new process.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 30, srcSpanStartColumn = 1, srcSpanEndLine = 31, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 30, srcSpanStartColumn = 1, srcSpanEndLine = 30, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;pPrPr_disableITimers&quot;
  pPrPr_disableITimers :: IO ()</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 33, srcSpanStartColumn = 1, srcSpanEndLine = 34, srcSpanEndColumn = 64}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 33, srcSpanStartColumn = 1, srcSpanEndLine = 33, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;execvpe&quot;
  c_execvpe :: CString -&gt; Ptr CString -&gt; Ptr CString -&gt; IO CInt</span></span><span class="mpre">

</span><a href="#loc_37_1_37_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_1_37_19&#39;)"><span class="mpre">decipherWaitStatus</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_17_6_17_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_17_6_17_19&#39;)"><span class="hl_tyconref"><span class="mpre">ProcessStatus</span></span></a><span class="mpre">
</span><a name="loc_37_1_37_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_1_37_19&#39;)"><span class="hl_fundecl"><span class="mpre">decipherWaitStatus</span></span></a><span class="mpre"> </span><a name="loc_37_20_37_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_20_37_25&#39;)"><span class="hl_vardecl"><span class="mpre">wstat</span></span></a><span class="mpre"> =
  if </span><span class="hl_varref"><span class="mpre">c_WIFEXITED</span></span><span class="mpre"> </span><a href="#loc_37_20_37_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_20_37_25&#39;)"><span class="hl_varref"><span class="mpre">wstat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
      then do
        let </span><a name="loc_40_13_40_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_13_40_23&#39;)"><span class="hl_vardecl"><span class="mpre">exitstatus</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">c_WEXITSTATUS</span></span><span class="mpre"> </span><a href="#loc_37_20_37_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_20_37_25&#39;)"><span class="hl_varref"><span class="mpre">wstat</span></span></a><span class="mpre">
        if </span><a href="#loc_40_13_40_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_13_40_23&#39;)"><span class="hl_varref"><span class="mpre">exitstatus</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
           then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_18_6_18_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_18_6_18_12&#39;)"><span class="hl_conref"><span class="mpre">Exited</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">ExitSuccess</span></span><span class="mpre">)
           else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_18_6_18_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_18_6_18_12&#39;)"><span class="hl_conref"><span class="mpre">Exited</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">ExitFailure</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_40_13_40_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_13_40_23&#39;)"><span class="hl_varref"><span class="mpre">exitstatus</span></span></a><span class="mpre">)))
      else do
        if </span><span class="hl_varref"><span class="mpre">c_WIFSIGNALED</span></span><span class="mpre"> </span><a href="#loc_37_20_37_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_20_37_25&#39;)"><span class="hl_varref"><span class="mpre">wstat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
           then do
                let </span><a name="loc_47_21_47_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_21_47_28&#39;)"><span class="hl_vardecl"><span class="mpre">termsig</span></span></a><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">c_WTERMSIG</span></span><span class="mpre"> </span><a href="#loc_37_20_37_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_20_37_25&#39;)"><span class="hl_varref"><span class="mpre">wstat</span></span></a><span class="mpre">
                let </span><a name="loc_48_21_48_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_21_48_31&#39;)"><span class="hl_vardecl"><span class="mpre">coredumped</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">c_WCOREDUMP</span></span><span class="mpre"> </span><a href="#loc_37_20_37_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_20_37_25&#39;)"><span class="hl_varref"><span class="mpre">wstat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
                </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_20_6_20_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_20_6_20_16&#39;)"><span class="hl_conref"><span class="mpre">Terminated</span></span></a><span class="mpre"> </span><a href="#loc_47_21_47_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_21_47_28&#39;)"><span class="hl_varref"><span class="mpre">termsig</span></span></a><span class="mpre"> </span><a href="#loc_48_21_48_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_21_48_31&#39;)"><span class="hl_varref"><span class="mpre">coredumped</span></span></a><span class="mpre">)
           else do
                if </span><span class="hl_varref"><span class="mpre">c_WIFSTOPPED</span></span><span class="mpre"> </span><a href="#loc_37_20_37_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_20_37_25&#39;)"><span class="hl_varref"><span class="mpre">wstat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
                   then do
                        let </span><a name="loc_53_29_53_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_29_53_36&#39;)"><span class="hl_vardecl"><span class="mpre">stopsig</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">c_WSTOPSIG</span></span><span class="mpre"> </span><a href="#loc_37_20_37_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_20_37_25&#39;)"><span class="hl_varref"><span class="mpre">wstat</span></span></a><span class="mpre">
                        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_25_6_25_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_6_25_13&#39;)"><span class="hl_conref"><span class="mpre">Stopped</span></span></a><span class="mpre"> </span><a href="#loc_53_29_53_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_29_53_36&#39;)"><span class="hl_varref"><span class="mpre">stopsig</span></span></a><span class="mpre">)
                   else do
                        </span><span class="hl_varref"><span class="mpre">ioError</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">mkIOError</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">illegalOperationErrorType</span></span><span class="mpre">
                                   </span><span class="hl_string"><span class="mpre">&quot;waitStatus&quot;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">)

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 59, srcSpanStartColumn = 1, srcSpanEndLine = 60, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 59, srcSpanStartColumn = 1, srcSpanEndLine = 59, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;__hsunix_wifexited&quot;
  c_WIFEXITED :: CInt -&gt; CInt</span></span><span class="mpre"> 

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 62, srcSpanStartColumn = 1, srcSpanEndLine = 63, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 62, srcSpanStartColumn = 1, srcSpanEndLine = 62, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;__hsunix_wexitstatus&quot;
  c_WEXITSTATUS :: CInt -&gt; CInt</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 1, srcSpanEndLine = 66, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 1, srcSpanEndLine = 65, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;__hsunix_wifsignaled&quot;
  c_WIFSIGNALED :: CInt -&gt; CInt</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 1, srcSpanEndLine = 69, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 1, srcSpanEndLine = 68, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;__hsunix_wtermsig&quot;
  c_WTERMSIG :: CInt -&gt; CInt</span></span><span class="mpre"> 

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 71, srcSpanStartColumn = 1, srcSpanEndLine = 72, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 71, srcSpanStartColumn = 1, srcSpanEndLine = 71, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;__hsunix_wifstopped&quot;
  c_WIFSTOPPED :: CInt -&gt; CInt</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 74, srcSpanStartColumn = 1, srcSpanEndLine = 75, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 74, srcSpanStartColumn = 1, srcSpanEndLine = 74, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;__hsunix_wstopsig&quot;
  c_WSTOPSIG :: CInt -&gt; CInt</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 1, srcSpanEndLine = 78, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/Internals.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 1, srcSpanEndLine = 77, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unix-2.7.0.1/System/Posix/Process/In"><span class="mpre">foreign import ccall unsafe &quot;__hsunix_wcoredump&quot;
  c_WCOREDUMP :: CInt -&gt; CInt</span></span><span class="mpre">

</span></div></body></html>