<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE NoImplicitPrelude #-}
{-# LANGUAGE FlexibleContexts #-}

#if __GLASGOW_HASKELL__ &gt;= 702
{-# LANGUAGE Trustworthy #-}
#endif

</span><span class="hl_comment"><span class="mpre">{- |
Module      :  Data.IORef
Copyright   :  Liyang HU, Bas van Dijk
License     :  BSD-style

Maintainer  :  Bas van Dijk &lt;v.dijk.bas@gmail.com&gt;
Stability   :  experimental

This is a wrapped version of &quot;Data.IORef&quot; with types
generalised from &#39;IO&#39; to all monads in &#39;MonadBase&#39;.
-}</span></span><span class="mpre">

module Data.IORef.Lifted
    ( IORef
    , newIORef
    , readIORef
    , writeIORef
    , modifyIORef
#if MIN_VERSION_base(4,6,0)
    , modifyIORef&#39;
#endif
    , atomicModifyIORef
#if MIN_VERSION_base(4,6,0)
    , atomicModifyIORef&#39;
    , atomicWriteIORef
#endif
    , mkWeakIORef
    ) where

</span><span class="hl_comment"><span class="mpre">--------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Imports</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- from base:</span></span><span class="mpre">
import Data.IORef ( </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="mpre">IORef</span></a><span class="mpre"> )
import qualified Data.IORef as R
import System.IO ( IO )
import System.Mem.Weak ( Weak )
import Prelude ( (.) )

</span><span class="hl_comment"><span class="mpre">-- from transformers-base:</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 50, srcSpanStartColumn = 8, srcSpanEndLine = 50, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;Control.Monad.Base&quot;"><span class="mpre">Control.Monad.Base</span></span><span class="mpre"> ( MonadBase, liftBase )

</span><span class="hl_comment"><span class="mpre">-- from monad-control:</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 53, srcSpanStartColumn = 8, srcSpanEndLine = 53, srcSpanEndColumn = 35}, srcInfoPoints = []}) &quot;Control.Monad.Trans.Control&quot;"><span class="mpre">Control.Monad.Trans.Control</span></span><span class="mpre"> ( MonadBaseControl, liftBaseDiscard )

#include &quot;inlinable.h&quot;

</span><span class="hl_comment"><span class="mpre">--------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * IORefs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.newIORef&#39;.</span></span><span class="mpre">
</span><a href="#loc_63_1_63_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_9&#39;)"><span class="mpre">newIORef</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 62, srcSpanStartColumn = 13, srcSpanEndLine = 62, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 62, srcSpanStartColumn = 28, srcSpanEndLine = 62, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lift"><span class="mpre">MonadBase IO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_63_1_63_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_9&#39;)"><span class="hl_vardecl"><span class="mpre">newIORef</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBase</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_42_1_42_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_42_1_42_9&#39;)"><span class="hl_varref"><span class="mpre">R.newIORef</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE newIORef #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.readIORef&#39;.</span></span><span class="mpre">
</span><a href="#loc_68_1_68_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_68_1_68_10&#39;)"><span class="mpre">readIORef</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 67, srcSpanStartColumn = 14, srcSpanEndLine = 67, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 67, srcSpanStartColumn = 29, srcSpanEndLine = 67, srcSpanEndColumn = 31}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lift"><span class="mpre">MonadBase IO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_68_1_68_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_68_1_68_10&#39;)"><span class="hl_vardecl"><span class="mpre">readIORef</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBase</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="hl_varref"><span class="mpre">R.readIORef</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE readIORef #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.writeIORef&#39;.</span></span><span class="mpre">
</span><a href="#loc_73_1_73_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_1_73_11&#39;)"><span class="mpre">writeIORef</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 72, srcSpanStartColumn = 15, srcSpanEndLine = 72, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 72, srcSpanStartColumn = 30, srcSpanEndLine = 72, srcSpanEndColumn = 32}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lift"><span class="mpre">MonadBase IO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_73_1_73_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_1_73_11&#39;)"><span class="hl_fundecl"><span class="mpre">writeIORef</span></span></a><span class="mpre"> </span><a name="loc_73_12_73_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_12_73_13&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBase</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="hl_varref"><span class="mpre">R.writeIORef</span></span></a><span class="mpre"> </span><a href="#loc_73_12_73_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_12_73_13&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE writeIORef #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.modifyIORef&#39;.</span></span><span class="mpre">
</span><a href="#loc_78_1_78_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_12&#39;)"><span class="mpre">modifyIORef</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 16, srcSpanEndLine = 77, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 31, srcSpanEndLine = 77, srcSpanEndColumn = 33}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lift"><span class="mpre">MonadBase IO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_78_1_78_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_1_78_12&#39;)"><span class="hl_fundecl"><span class="mpre">modifyIORef</span></span></a><span class="mpre"> </span><a name="loc_78_13_78_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_13_78_14&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBase</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.IORef.html#loc_70_1_70_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.IORef.html#loc_70_1_70_12&#39;)"><span class="hl_varref"><span class="mpre">R.modifyIORef</span></span></a><span class="mpre"> </span><a href="#loc_78_13_78_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_13_78_14&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE modifyIORef #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.atomicModifyIORef&#39;.</span></span><span class="mpre">
</span><a href="#loc_83_1_83_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_1_83_18&#39;)"><span class="mpre">atomicModifyIORef</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 82, srcSpanStartColumn = 22, srcSpanEndLine = 82, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 82, srcSpanStartColumn = 37, srcSpanEndLine = 82, srcSpanEndColumn = 39}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lift"><span class="mpre">MonadBase IO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_83_1_83_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_1_83_18&#39;)"><span class="hl_fundecl"><span class="mpre">atomicModifyIORef</span></span></a><span class="mpre"> </span><a name="loc_83_19_83_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_19_83_20&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBase</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.IORef.html#loc_101_1_101_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.IORef.html#loc_101_1_101_18&#39;)"><span class="hl_varref"><span class="mpre">R.atomicModifyIORef</span></span></a><span class="mpre"> </span><a href="#loc_83_19_83_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_19_83_20&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE atomicModifyIORef #-}</span></span><span class="mpre">

#if MIN_VERSION_base(4,6,0)
</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.modifyIORef&#39;&#39;.</span></span><span class="mpre">
</span><a href="#loc_89_1_89_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_1_89_13&#39;)"><span class="mpre">modifyIORef&#39;</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 88, srcSpanStartColumn = 17, srcSpanEndLine = 88, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 88, srcSpanStartColumn = 32, srcSpanEndLine = 88, srcSpanEndColumn = 34}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lift"><span class="mpre">MonadBase IO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_89_1_89_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_1_89_13&#39;)"><span class="hl_fundecl"><span class="mpre">modifyIORef&#39;</span></span></a><span class="mpre"> </span><a name="loc_89_14_89_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_14_89_15&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBase</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.IORef.html#loc_76_1_76_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.IORef.html#loc_76_1_76_13&#39;)"><span class="hl_varref"><span class="mpre">R.modifyIORef&#39;</span></span></a><span class="mpre"> </span><a href="#loc_89_14_89_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_14_89_15&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE modifyIORef&#39; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.atomicModifyIORef&#39;&#39;.</span></span><span class="mpre">
</span><a href="#loc_94_1_94_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_1_94_19&#39;)"><span class="mpre">atomicModifyIORef&#39;</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 23, srcSpanEndLine = 93, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 38, srcSpanEndLine = 93, srcSpanEndColumn = 40}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lift"><span class="mpre">MonadBase IO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_94_1_94_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_1_94_19&#39;)"><span class="hl_fundecl"><span class="mpre">atomicModifyIORef&#39;</span></span></a><span class="mpre"> </span><a name="loc_94_20_94_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_20_94_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBase</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.IORef.html#loc_108_1_108_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.IORef.html#loc_108_1_108_19&#39;)"><span class="hl_varref"><span class="mpre">R.atomicModifyIORef&#39;</span></span></a><span class="mpre"> </span><a href="#loc_94_20_94_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_20_94_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE atomicModifyIORef&#39; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.atomicWriteIORef&#39;.</span></span><span class="mpre">
</span><a href="#loc_99_1_99_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_17&#39;)"><span class="mpre">atomicWriteIORef</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 98, srcSpanStartColumn = 21, srcSpanEndLine = 98, srcSpanEndColumn = 38}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 98, srcSpanStartColumn = 36, srcSpanEndLine = 98, srcSpanEndColumn = 38}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lift"><span class="mpre">MonadBase IO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_99_1_99_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_17&#39;)"><span class="hl_fundecl"><span class="mpre">atomicWriteIORef</span></span></a><span class="mpre"> </span><a name="loc_99_18_99_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_18_99_19&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBase</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.IORef.html#loc_119_1_119_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.IORef.html#loc_119_1_119_17&#39;)"><span class="hl_varref"><span class="mpre">R.atomicWriteIORef</span></span></a><span class="mpre"> </span><a href="#loc_99_18_99_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_18_99_19&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">-- | Generalized version of &#39;R.mkWeakIORef&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note any monadic side effects in @m@ of the \&quot;finalizer\&quot; computation</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- are discarded.</span></span><span class="mpre">
</span><a href="#loc_107_1_107_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_1_107_12&#39;)"><span class="mpre">mkWeakIORef</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 106, srcSpanStartColumn = 16, srcSpanEndLine = 106, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lifted-base-0.2.3.0/Data/IORef/Lifted.hs&quot;, srcSpanStartLine = 106, srcSpanStartColumn = 38, srcSpanEndLine = 106, srcSpanEndColumn = 40}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">MonadBaseControl IO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Weak</span></span><span class="mpre"> (</span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">))
</span><a name="loc_107_1_107_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_1_107_12&#39;)"><span class="hl_vardecl"><span class="mpre">mkWeakIORef</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftBaseDiscard</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.IORef.html#loc_52_1_52_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.IORef.html#loc_52_1_52_12&#39;)"><span class="hl_varref"><span class="mpre">R.mkWeakIORef</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE mkWeakIORef #-}</span></span><span class="mpre">
</span></div></body></html>