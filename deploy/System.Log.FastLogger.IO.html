<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE BangPatterns, CPP #-}

module System.Log.FastLogger.IO where

#if MIN_VERSION_bytestring(0,10,2)
import Data.ByteString.Builder.Extra (</span><a href="Data.ByteString.Builder.Extra.html#loc_100_6_100_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Extra.html#loc_100_6_100_10&#39;)"><span class="mpre">Next</span></a><span class="mpre">(..))
import qualified Data.ByteString.Builder.Extra as BBE
#else
import Blaze.ByteString.Builder.Internal.Types (</span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16&#39;)"><span class="mpre">Builder</span></a><span class="mpre">(..), </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_37_6_37_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_37_6_37_17&#39;)"><span class="mpre">BuildSignal</span></a><span class="mpre">(..), </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_35_6_35_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_35_6_35_14&#39;)"><span class="mpre">BufRange</span></a><span class="mpre">(..), </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_49_17_49_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_49_17_49_29&#39;)"><span class="mpre">runBuildStep</span></a><span class="mpre">, </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_63_1_63_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_63_1_63_10&#39;)"><span class="mpre">buildStep</span></a><span class="mpre">)
import Foreign.Ptr (minusPtr)
#endif
import Data.ByteString.Internal (</span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="mpre">ByteString</span></a><span class="mpre">(..))
import Data.Word (Word8)
import Foreign.ForeignPtr (</span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="mpre">withForeignPtr</span></a><span class="mpre">)
import Foreign.Marshal.Alloc (</span><a href="Foreign.Marshal.Alloc.html#loc_96_1_96_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_96_1_96_12&#39;)"><span class="mpre">mallocBytes</span></a><span class="mpre">, </span><a href="Foreign.Marshal.Alloc.html#loc_184_1_184_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_184_1_184_5&#39;)"><span class="mpre">free</span></a><span class="mpre">)
import Foreign.Ptr (Ptr, plusPtr)
import System.Log.FastLogger.LogStr

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fast-logger-2.1.5/System/Log/FastLogger/IO.hs&quot;, srcSpanStartLine = 19, srcSpanStartColumn = 1, srcSpanEndLine = 19, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fast-logger-2.1.5/System/Log/FastLogger/IO.hs&quot;, srcSpanStartLine = 19, srcSpanStartColumn = 1, srcSpanEndLine = 19, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fast-logger-2.1.5/System/Log/FastLog"><span class="mpre">type Buffer = Ptr Word8</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The type for buffer size of each core.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fast-logger-2.1.5/System/Log/FastLogger/IO.hs&quot;, srcSpanStartLine = 22, srcSpanStartColumn = 1, srcSpanEndLine = 22, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fast-logger-2.1.5/System/Log/FastLogger/IO.hs&quot;, srcSpanStartLine = 22, srcSpanStartColumn = 1, srcSpanEndLine = 22, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/fast-logger-2.1.5/System/Log/FastLog"><span class="mpre">type BufSize = Int</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The default buffer size (4,096 bytes).</span></span><span class="mpre">
</span><a href="#loc_26_1_26_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_1_26_15&#39;)"><span class="mpre">defaultBufSize</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">BufSize</span></span><span class="mpre">
</span><a name="loc_26_1_26_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_1_26_15&#39;)"><span class="hl_vardecl"><span class="mpre">defaultBufSize</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">4096</span></span><span class="mpre">

</span><a href="#loc_29_1_29_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_1_29_10&#39;)"><span class="mpre">getBuffer</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">BufSize</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Buffer</span></span><span class="mpre">
</span><a name="loc_29_1_29_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_1_29_10&#39;)"><span class="hl_vardecl"><span class="mpre">getBuffer</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Alloc.html#loc_96_1_96_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_96_1_96_12&#39;)"><span class="hl_varref"><span class="mpre">mallocBytes</span></span></a><span class="mpre">

</span><a href="#loc_32_1_32_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_11&#39;)"><span class="mpre">freeBuffer</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Buffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_32_1_32_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_11&#39;)"><span class="hl_vardecl"><span class="mpre">freeBuffer</span></span></a><span class="mpre"> = </span><a href="Foreign.Marshal.Alloc.html#loc_184_1_184_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_184_1_184_5&#39;)"><span class="hl_varref"><span class="mpre">free</span></span></a><span class="mpre">

#if MIN_VERSION_bytestring(0,10,2)
</span><a href="#loc_36_1_36_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_12&#39;)"><span class="mpre">toBufIOWith</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Buffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">BufSize</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">Buffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) -&gt; </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16&#39;)"><span class="hl_tyconref"><span class="mpre">Builder</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_36_1_36_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_12&#39;)"><span class="hl_fundecl"><span class="mpre">toBufIOWith</span></span></a><span class="mpre"> </span><a name="loc_36_13_36_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_13_36_16&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre"> !</span><a name="loc_36_18_36_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_18_36_22&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> </span><a name="loc_36_23_36_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_23_36_25&#39;)"><span class="hl_vardecl"><span class="mpre">io</span></span></a><span class="mpre"> </span><a name="loc_36_26_36_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_26_36_33&#39;)"><span class="hl_vardecl"><span class="mpre">builder</span></span></a><span class="mpre"> = </span><a href="#loc_38_5_38_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_5_38_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.ByteString.Builder.Extra.html#loc_121_1_121_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Extra.html#loc_121_1_121_11&#39;)"><span class="hl_varref"><span class="mpre">BBE.runBuilder</span></span></a><span class="mpre"> </span><a href="#loc_36_26_36_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_26_36_33&#39;)"><span class="hl_varref"><span class="mpre">builder</span></span></a><span class="mpre">
  where
    </span><a name="loc_38_5_38_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_5_38_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_38_10_38_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_10_38_16&#39;)"><span class="hl_vardecl"><span class="mpre">writer</span></span></a><span class="mpre"> = do
        (</span><a name="loc_39_10_39_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_10_39_13&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">, </span><a name="loc_39_15_39_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_15_39_19&#39;)"><span class="hl_vardecl"><span class="mpre">next</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_38_10_38_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_10_38_16&#39;)"><span class="hl_varref"><span class="mpre">writer</span></span></a><span class="mpre"> </span><a href="#loc_36_13_36_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_13_36_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> </span><a href="#loc_36_18_36_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_18_36_22&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">
        </span><a href="#loc_36_23_36_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_23_36_25&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> </span><a href="#loc_36_13_36_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_13_36_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> </span><a href="#loc_39_10_39_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_10_39_13&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
        case </span><a href="#loc_39_15_39_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_15_39_19&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> of
             </span><a href="Data.ByteString.Builder.Extra.html#loc_102_6_102_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Extra.html#loc_102_6_102_10&#39;)"><span class="hl_conref"><span class="mpre">Done</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
             </span><a href="Data.ByteString.Builder.Extra.html#loc_109_6_109_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Extra.html#loc_109_6_109_10&#39;)"><span class="hl_conref"><span class="mpre">More</span></span></a><span class="mpre"> </span><a name="loc_43_19_43_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_19_43_26&#39;)"><span class="hl_vardecl"><span class="mpre">minSize</span></span></a><span class="mpre"> </span><a name="loc_43_27_43_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_27_43_34&#39;)"><span class="hl_vardecl"><span class="mpre">writer&#39;</span></span></a><span class="mpre">
               | </span><a href="#loc_36_18_36_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_18_36_22&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_43_19_43_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_19_43_26&#39;)"><span class="hl_varref"><span class="mpre">minSize</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;toBufIOWith: More: minSize&quot;</span></span><span class="mpre">
               | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">      -&gt; </span><a href="#loc_38_5_38_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_5_38_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_43_27_43_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_27_43_34&#39;)"><span class="hl_varref"><span class="mpre">writer&#39;</span></span></a><span class="mpre">
             </span><a href="Data.ByteString.Builder.Extra.html#loc_116_6_116_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Extra.html#loc_116_6_116_11&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a name="loc_46_24_46_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_24_46_28&#39;)"><span class="hl_vardecl"><span class="mpre">fptr</span></span></a><span class="mpre"> </span><a name="loc_46_29_46_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_29_46_32&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_46_33_46_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_33_46_36&#39;)"><span class="hl_vardecl"><span class="mpre">siz</span></span></a><span class="mpre">) </span><a name="loc_46_38_46_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_38_46_45&#39;)"><span class="hl_vardecl"><span class="mpre">writer&#39;</span></span></a><span class="mpre">
               | </span><a href="#loc_39_10_39_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_10_39_13&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">  -&gt; </span><a href="#loc_38_5_38_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_5_38_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_46_38_46_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_38_46_45&#39;)"><span class="hl_varref"><span class="mpre">writer&#39;</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- flushing</span></span><span class="mpre">
               | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_46_24_46_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_24_46_28&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_48_54_48_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_54_48_57&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_36_23_36_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_23_36_25&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> (</span><a href="#loc_48_54_48_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_54_48_57&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_46_29_46_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_29_46_32&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) </span><a href="#loc_46_33_46_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_33_46_36&#39;)"><span class="hl_varref"><span class="mpre">siz</span></span></a><span class="mpre">
#else
</span><a href="#loc_36_1_36_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_36_1_36_12&#39;)"><span class="mpre">toBufIOWith</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Buffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">BufSize</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">Buffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) -&gt; </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16&#39;)"><span class="hl_tyconref"><span class="mpre">Builder</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><span class="hl_fundecl"><span class="mpre">toBufIOWith</span></span><span class="mpre"> </span><a name="loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre"> !</span><a name="loc_51_18_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_18_51_22&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> </span><a name="loc_51_23_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_23_51_25&#39;)"><span class="hl_vardecl"><span class="mpre">io</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Builder</span></span><span class="mpre"> </span><a name="loc_51_35_51_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_35_51_40&#39;)"><span class="hl_vardecl"><span class="mpre">build</span></span></a><span class="mpre">) = </span><a href="#loc_56_5_56_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_5_56_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_53_5_53_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_5_53_14&#39;)"><span class="hl_varref"><span class="mpre">firstStep</span></span></a><span class="mpre">
  where
    </span><a name="loc_53_5_53_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_5_53_14&#39;)"><span class="hl_vardecl"><span class="mpre">firstStep</span></span></a><span class="mpre"> = </span><a href="#loc_51_35_51_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_35_51_40&#39;)"><span class="hl_varref"><span class="mpre">build</span></span></a><span class="mpre"> (</span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_63_1_63_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_63_1_63_10&#39;)"><span class="hl_varref"><span class="mpre">buildStep</span></span></a><span class="mpre"> </span><a href="#loc_54_5_54_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_5_54_14&#39;)"><span class="hl_varref"><span class="mpre">finalStep</span></span></a><span class="mpre">)
    </span><a name="loc_54_5_54_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_5_54_14&#39;)"><span class="hl_fundecl"><span class="mpre">finalStep</span></span></a><span class="mpre"> (</span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_35_17_35_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_35_17_35_25&#39;)"><span class="hl_conref"><span class="mpre">BufRange</span></span></a><span class="mpre"> </span><a name="loc_54_25_54_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_25_54_26&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> _) = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.ByteString.Builder.Extra.html#loc_102_6_102_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Extra.html#loc_102_6_102_10&#39;)"><span class="hl_conref"><span class="mpre">Done</span></span></a><span class="mpre"> </span><a href="#loc_54_25_54_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_25_54_26&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
    </span><a name="loc_55_5_55_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_5_55_13&#39;)"><span class="hl_vardecl"><span class="mpre">bufRange</span></span></a><span class="mpre"> = </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_35_17_35_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_35_17_35_25&#39;)"><span class="hl_conref"><span class="mpre">BufRange</span></span></a><span class="mpre"> </span><a href="#loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> (</span><a href="#loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_51_18_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_18_51_22&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">)
    </span><a name="loc_56_5_56_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_5_56_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_56_10_56_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_10_56_14&#39;)"><span class="hl_vardecl"><span class="mpre">step</span></span></a><span class="mpre"> = do
        </span><a name="loc_57_9_57_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_9_57_15&#39;)"><span class="hl_vardecl"><span class="mpre">signal</span></span></a><span class="mpre"> &lt;- </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_49_17_49_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_49_17_49_29&#39;)"><span class="hl_varref"><span class="mpre">runBuildStep</span></span></a><span class="mpre"> </span><a href="#loc_56_10_56_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_10_56_14&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_55_5_55_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_5_55_13&#39;)"><span class="hl_varref"><span class="mpre">bufRange</span></span></a><span class="mpre">
        case </span><a href="#loc_57_9_57_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_9_57_15&#39;)"><span class="hl_varref"><span class="mpre">signal</span></span></a><span class="mpre"> of
             </span><a href="Data.ByteString.Builder.Extra.html#loc_102_6_102_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Extra.html#loc_102_6_102_10&#39;)"><span class="hl_conref"><span class="mpre">Done</span></span></a><span class="mpre"> </span><a name="loc_59_19_59_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_19_59_22&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> _ -&gt; </span><a href="#loc_51_23_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_23_51_25&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> </span><a href="#loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> (</span><a href="#loc_59_19_59_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_19_59_22&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`minusPtr`</span></span><span class="mpre"> </span><a href="#loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">)
             </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_39_5_39_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_39_5_39_15&#39;)"><span class="hl_conref"><span class="mpre">BufferFull</span></span></a><span class="mpre"> </span><a name="loc_60_25_60_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_25_60_32&#39;)"><span class="hl_vardecl"><span class="mpre">minSize</span></span></a><span class="mpre"> </span><a name="loc_60_33_60_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_33_60_36&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><a name="loc_60_37_60_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_37_60_41&#39;)"><span class="hl_vardecl"><span class="mpre">next</span></span></a><span class="mpre">
               | </span><a href="#loc_51_18_51_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_18_51_22&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_60_25_60_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_25_60_32&#39;)"><span class="hl_varref"><span class="mpre">minSize</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;toBufIOWith: BufferFull: minSize&quot;</span></span><span class="mpre">
               | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">      -&gt; do
                   </span><a href="#loc_51_23_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_23_51_25&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> </span><a href="#loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> (</span><a href="#loc_60_33_60_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_33_60_36&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`minusPtr`</span></span><span class="mpre"> </span><a href="#loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">)
                   </span><a href="#loc_56_5_56_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_5_56_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_60_37_60_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_37_60_41&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre">
             </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_43_5_43_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_43_5_43_21&#39;)"><span class="hl_conref"><span class="mpre">InsertByteString</span></span></a><span class="mpre"> </span><a name="loc_65_31_65_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_31_65_34&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a name="loc_65_39_65_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_39_65_43&#39;)"><span class="hl_vardecl"><span class="mpre">fptr</span></span></a><span class="mpre"> </span><a name="loc_65_44_65_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_44_65_47&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_65_48_65_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_48_65_51&#39;)"><span class="hl_vardecl"><span class="mpre">siz</span></span></a><span class="mpre">) </span><a name="loc_65_53_65_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_53_65_57&#39;)"><span class="hl_vardecl"><span class="mpre">next</span></span></a><span class="mpre"> -&gt; do
                 </span><a href="#loc_51_23_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_23_51_25&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> </span><a href="#loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> (</span><a href="#loc_65_31_65_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_31_65_34&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`minusPtr`</span></span><span class="mpre"> </span><a href="#loc_51_13_51_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_13_51_16&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">)
                 </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_65_39_65_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_39_65_43&#39;)"><span class="hl_varref"><span class="mpre">fptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_67_41_67_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_41_67_42&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_51_23_51_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_23_51_25&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> (</span><a href="#loc_67_41_67_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_41_67_42&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_65_44_65_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_44_65_47&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) </span><a href="#loc_65_48_65_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_48_65_51&#39;)"><span class="hl_varref"><span class="mpre">siz</span></span></a><span class="mpre">
                 </span><a href="#loc_56_5_56_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_5_56_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_65_53_65_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_53_65_57&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre">
#endif

</span></div></body></html>