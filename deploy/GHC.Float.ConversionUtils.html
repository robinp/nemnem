<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE Trustworthy #-}
{-# LANGUAGE CPP, MagicHash, UnboxedTuples, NoImplicitPrelude #-}
{-# OPTIONS_GHC -O2 #-}
{-# OPTIONS_HADDOCK hide #-}

</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  GHC.Float.ConversionUtils</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (c) Daniel Fischer 2010</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  see libraries/base/LICENSE</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  cvs-ghc@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  internal</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable (GHC Extensions)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Utilities for conversion between Double/Float and Rational</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">

#include &quot;MachDeps.h&quot;

module GHC.Float.ConversionUtils ( elimZerosInteger, elimZerosInt# ) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/ConversionUtils.hs&quot;, srcSpanStartLine = 24, srcSpanStartColumn = 8, srcSpanEndLine = 24, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/ConversionUtils.hs&quot;, srcSpanStartLine = 25, srcSpanStartColumn = 8, srcSpanEndLine = 25, srcSpanEndColumn = 19}, srcInfoPoints = []}) &quot;GHC.Integer&quot;"><span class="mpre">GHC.Integer</span></span><span class="mpre">
#if WORD_SIZE_IN_BITS &lt; 64
import GHC.IntWord64
#endif

</span><span class="warning" data-warning="DeclDefaultDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/ConversionUtils.hs&quot;, srcSpanStartLine = 30, srcSpanStartColumn = 1, srcSpanEndLine = 30, srcSpanEndColumn = 11}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/ConversionUtils.hs&quot;, srcSpanStartLine = 30, srcSpanStartColumn = 1, srcSpanEndLine = 30, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/GHC/Float/ConversionUtils.hs"><span class="mpre">default ()</span></span><span class="mpre">

#if WORD_SIZE_IN_BITS &lt; 64

#define TO64    integerToInt64

</span><a href="#loc_37_1_37_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_1_37_10&#39;)"><span class="mpre">toByte64#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int64#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre">
</span><a name="loc_37_1_37_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_1_37_10&#39;)"><span class="hl_fundecl"><span class="mpre">toByte64#</span></span></a><span class="mpre"> </span><a name="loc_37_11_37_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_11_37_12&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">word2Int#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">and#</span></span><span class="mpre"> 255## (</span><span class="hl_varref"><span class="mpre">int2Word#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">int64ToInt#</span></span><span class="mpre"> </span><a href="#loc_37_11_37_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_11_37_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">)))

</span><span class="hl_comment"><span class="mpre">-- Double mantissae have 53 bits, too much for Int#</span></span><span class="mpre">
</span><a href="#loc_41_1_41_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_1_41_8&#39;)"><span class="mpre">elim64#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int64#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; (# </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> #)
</span><a name="loc_41_1_41_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_1_41_8&#39;)"><span class="hl_fundecl"><span class="mpre">elim64#</span></span></a><span class="mpre"> </span><a name="loc_41_9_41_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_10&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_41_11_41_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_11_41_12&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> =
    case </span><a href="#loc_70_1_70_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_1_70_10&#39;)"><span class="hl_varref"><span class="mpre">zeroCount</span></span></a><span class="mpre"> (</span><a href="#loc_37_1_37_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_1_37_10&#39;)"><span class="hl_varref"><span class="mpre">toByte64#</span></span></a><span class="mpre"> </span><a href="#loc_41_9_41_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) of
      </span><a name="loc_43_7_43_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_7_43_8&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_41_11_41_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_11_41_12&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=#</span></span><span class="mpre"> </span><a href="#loc_43_7_43_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_7_43_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">) -&gt; (# </span><span class="hl_varref"><span class="mpre">int64ToInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">uncheckedIShiftRA64#</span></span><span class="mpre"> </span><a href="#loc_41_9_41_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_41_11_41_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_11_41_12&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">), 0# #)
        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_43_7_43_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_7_43_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 8#) -&gt; (# </span><span class="hl_varref"><span class="mpre">int64ToInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">uncheckedIShiftRA64#</span></span><span class="mpre"> </span><a href="#loc_41_9_41_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_43_7_43_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_7_43_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">), </span><a href="#loc_41_11_41_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_11_41_12&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-#</span></span><span class="mpre"> </span><a href="#loc_43_7_43_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_7_43_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> #)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">         -&gt; </span><a href="#loc_41_1_41_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_1_41_8&#39;)"><span class="hl_varref"><span class="mpre">elim64#</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">uncheckedIShiftRA64#</span></span><span class="mpre"> </span><a href="#loc_41_9_41_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_10&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> 8#) (</span><a href="#loc_41_11_41_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_11_41_12&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-#</span></span><span class="mpre"> 8#)

#else

#define TO64    integerToInt

</span><span class="hl_comment"><span class="mpre">-- Double mantissae fit it Int#</span></span><span class="mpre">
</span><a href="#loc_41_1_41_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_1_41_8&#39;)"><span class="mpre">elim64#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; (# </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> #)
</span><span class="hl_vardecl"><span class="mpre">elim64#</span></span><span class="mpre"> = </span><a href="#loc_62_1_62_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_14&#39;)"><span class="hl_varref"><span class="mpre">elimZerosInt#</span></span></a><span class="mpre">

#endif

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_59_1_59_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_1_59_17&#39;)"><span class="mpre">elimZerosInteger</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_59_1_59_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_1_59_17&#39;)"><span class="mpre">elimZerosInteger</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; (# </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> #)
</span><a name="loc_59_1_59_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_1_59_17&#39;)"><span class="hl_fundecl"><span class="mpre">elimZerosInteger</span></span></a><span class="mpre"> </span><a name="loc_59_18_59_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_18_59_19&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> </span><a name="loc_59_20_59_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_20_59_21&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> = </span><a href="#loc_41_1_41_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_1_41_8&#39;)"><span class="hl_varref"><span class="mpre">elim64#</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">TO64</span></span><span class="mpre"> </span><a href="#loc_59_18_59_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_18_59_19&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) </span><a href="#loc_59_20_59_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_20_59_21&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><a href="#loc_62_1_62_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_14&#39;)"><span class="mpre">elimZerosInt#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; (# </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> #)
</span><a name="loc_62_1_62_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_14&#39;)"><span class="hl_fundecl"><span class="mpre">elimZerosInt#</span></span></a><span class="mpre"> </span><a name="loc_62_15_62_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_16&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_62_17_62_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_17_62_18&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> =
    case </span><a href="#loc_70_1_70_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_1_70_10&#39;)"><span class="hl_varref"><span class="mpre">zeroCount</span></span></a><span class="mpre"> (</span><a href="#loc_75_1_75_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_8&#39;)"><span class="hl_varref"><span class="mpre">toByte#</span></span></a><span class="mpre"> </span><a href="#loc_62_15_62_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_16&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) of
      </span><a name="loc_64_7_64_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_8&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_62_17_62_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_17_62_18&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=#</span></span><span class="mpre"> </span><a href="#loc_64_7_64_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">) -&gt; (# </span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">uncheckedIShiftRA#</span></span><span class="mpre"> </span><a href="#loc_62_15_62_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_16&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_62_17_62_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_17_62_18&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">), 0# #)
        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_64_7_64_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 8#) -&gt; (# </span><span class="hl_varref"><span class="mpre">smallInteger</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">uncheckedIShiftRA#</span></span><span class="mpre"> </span><a href="#loc_62_15_62_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_16&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_64_7_64_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">), </span><a href="#loc_62_17_62_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_17_62_18&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-#</span></span><span class="mpre"> </span><a href="#loc_64_7_64_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_8&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> #)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">         -&gt; </span><a href="#loc_62_1_62_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_14&#39;)"><span class="hl_varref"><span class="mpre">elimZerosInt#</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">uncheckedIShiftRA#</span></span><span class="mpre"> </span><a href="#loc_62_15_62_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_16&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> 8#) (</span><a href="#loc_62_17_62_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_17_62_18&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-#</span></span><span class="mpre"> 8#)

</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_70_1_70_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_1_70_10&#39;)"><span class="mpre">zeroCount</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><a href="#loc_70_1_70_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_1_70_10&#39;)"><span class="mpre">zeroCount</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre">
</span><a name="loc_70_1_70_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_1_70_10&#39;)"><span class="hl_fundecl"><span class="mpre">zeroCount</span></span></a><span class="mpre"> </span><a name="loc_70_11_70_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_11_70_12&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> =
    case </span><a href="#loc_82_1_82_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_13&#39;)"><span class="hl_varref"><span class="mpre">zeroCountArr</span></span></a><span class="mpre"> of
      </span><a href="#loc_78_11_78_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_11_78_13&#39;)"><span class="hl_conref"><span class="mpre">BA</span></span></a><span class="mpre"> </span><a name="loc_72_10_72_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_10_72_12&#39;)"><span class="hl_vardecl"><span class="mpre">ba</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">indexInt8Array#</span></span><span class="mpre"> </span><a href="#loc_72_10_72_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_10_72_12&#39;)"><span class="hl_varref"><span class="mpre">ba</span></span></a><span class="mpre"> </span><a href="#loc_70_11_70_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_70_11_70_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">

</span><a href="#loc_75_1_75_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_8&#39;)"><span class="mpre">toByte#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int#</span></span><span class="mpre">
</span><a name="loc_75_1_75_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_8&#39;)"><span class="hl_fundecl"><span class="mpre">toByte#</span></span></a><span class="mpre"> </span><a name="loc_75_9_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_9_75_10&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">word2Int#</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">and#</span></span><span class="mpre"> 255## (</span><span class="hl_varref"><span class="mpre">int2Word#</span></span><span class="mpre"> </span><a href="#loc_75_9_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_9_75_10&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">))


data </span><a name="loc_78_6_78_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_6_78_8&#39;)"><span class="hl_tycondecl"><span class="mpre">BA</span></span></a><span class="mpre"> = </span><a name="loc_78_11_78_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_11_78_13&#39;)"><span class="hl_condecl"><span class="mpre">BA</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteArray#</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Number of trailing zero bits in a byte</span></span><span class="mpre">
</span><a href="#loc_82_1_82_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_13&#39;)"><span class="mpre">zeroCountArr</span></a><span class="mpre"> :: </span><a href="#loc_78_6_78_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_6_78_8&#39;)"><span class="hl_tyconref"><span class="mpre">BA</span></span></a><span class="mpre">
</span><a name="loc_82_1_82_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_13&#39;)"><span class="hl_vardecl"><span class="mpre">zeroCountArr</span></span></a><span class="mpre"> =
    let </span><a name="loc_83_9_83_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_9_83_14&#39;)"><span class="hl_fundecl"><span class="mpre">mkArr</span></span></a><span class="mpre"> </span><a name="loc_83_15_83_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_15_83_16&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> =
          case </span><span class="hl_varref"><span class="mpre">newByteArray#</span></span><span class="mpre"> 256# </span><a href="#loc_83_15_83_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_15_83_16&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
            (# </span><a name="loc_85_16_85_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_16_85_18&#39;)"><span class="hl_vardecl"><span class="mpre">s1</span></span></a><span class="mpre">, </span><a name="loc_85_20_85_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_20_85_23&#39;)"><span class="hl_vardecl"><span class="mpre">mba</span></span></a><span class="mpre"> #) -&gt;
              case </span><span class="hl_varref"><span class="mpre">writeInt8Array#</span></span><span class="mpre"> </span><a href="#loc_85_20_85_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_20_85_23&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> 0# 8# </span><a href="#loc_85_16_85_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_16_85_18&#39;)"><span class="hl_varref"><span class="mpre">s1</span></span></a><span class="mpre"> of
                </span><a name="loc_87_17_87_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_17_87_19&#39;)"><span class="hl_vardecl"><span class="mpre">s2</span></span></a><span class="mpre"> -&gt;
                  let </span><a name="loc_88_23_88_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_23_88_28&#39;)"><span class="hl_fundecl"><span class="mpre">fillA</span></span></a><span class="mpre"> </span><a name="loc_88_29_88_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_29_88_33&#39;)"><span class="hl_vardecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_88_34_88_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_34_88_37&#39;)"><span class="hl_vardecl"><span class="mpre">val</span></span></a><span class="mpre"> </span><a name="loc_88_38_88_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_38_88_41&#39;)"><span class="hl_vardecl"><span class="mpre">idx</span></span></a><span class="mpre"> </span><a name="loc_88_42_88_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_42_88_44&#39;)"><span class="hl_vardecl"><span class="mpre">st</span></span></a><span class="mpre">
                        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_88_38_88_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_38_88_41&#39;)"><span class="hl_varref"><span class="mpre">idx</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 256#) =
                                        case </span><span class="hl_varref"><span class="mpre">writeInt8Array#</span></span><span class="mpre"> </span><a href="#loc_85_20_85_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_20_85_23&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><a href="#loc_88_38_88_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_38_88_41&#39;)"><span class="hl_varref"><span class="mpre">idx</span></span></a><span class="mpre"> </span><a href="#loc_88_34_88_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_34_88_37&#39;)"><span class="hl_varref"><span class="mpre">val</span></span></a><span class="mpre"> </span><a href="#loc_88_42_88_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_42_88_44&#39;)"><span class="hl_varref"><span class="mpre">st</span></span></a><span class="mpre"> of
                                          </span><a name="loc_91_43_91_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_43_91_45&#39;)"><span class="hl_vardecl"><span class="mpre">nx</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_88_23_88_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_23_88_28&#39;)"><span class="hl_varref"><span class="mpre">fillA</span></span></a><span class="mpre"> </span><a href="#loc_88_29_88_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_29_88_33&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_88_34_88_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_34_88_37&#39;)"><span class="hl_varref"><span class="mpre">val</span></span></a><span class="mpre"> (</span><a href="#loc_88_38_88_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_38_88_41&#39;)"><span class="hl_varref"><span class="mpre">idx</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+#</span></span><span class="mpre"> </span><a href="#loc_88_29_88_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_29_88_33&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre">) </span><a href="#loc_91_43_91_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_43_91_45&#39;)"><span class="hl_varref"><span class="mpre">nx</span></span></a><span class="mpre">
                        | </span><span class="hl_varref"><span class="mpre">isTrue#</span></span><span class="mpre"> (</span><a href="#loc_88_29_88_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_29_88_33&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;#</span></span><span class="mpre"> 256#) =
                                        </span><a href="#loc_88_23_88_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_23_88_28&#39;)"><span class="hl_varref"><span class="mpre">fillA</span></span></a><span class="mpre"> (2# </span><span class="hl_infix"><span class="mpre">*#</span></span><span class="mpre"> </span><a href="#loc_88_29_88_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_29_88_33&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre">) (</span><a href="#loc_88_34_88_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_34_88_37&#39;)"><span class="hl_varref"><span class="mpre">val</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+#</span></span><span class="mpre"> 1#) </span><a href="#loc_88_29_88_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_29_88_33&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre">  </span><a href="#loc_88_42_88_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_42_88_44&#39;)"><span class="hl_varref"><span class="mpre">st</span></span></a><span class="mpre">
                        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">   = </span><a href="#loc_88_42_88_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_42_88_44&#39;)"><span class="hl_varref"><span class="mpre">st</span></span></a><span class="mpre">
                  in case </span><a href="#loc_88_23_88_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_23_88_28&#39;)"><span class="hl_varref"><span class="mpre">fillA</span></span></a><span class="mpre"> 2# 0# 1# </span><a href="#loc_87_17_87_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_17_87_19&#39;)"><span class="hl_varref"><span class="mpre">s2</span></span></a><span class="mpre"> of
                       </span><a name="loc_96_24_96_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_24_96_26&#39;)"><span class="hl_vardecl"><span class="mpre">s3</span></span></a><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">unsafeFreezeByteArray#</span></span><span class="mpre"> </span><a href="#loc_85_20_85_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_20_85_23&#39;)"><span class="hl_varref"><span class="mpre">mba</span></span></a><span class="mpre"> </span><a href="#loc_96_24_96_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_24_96_26&#39;)"><span class="hl_varref"><span class="mpre">s3</span></span></a><span class="mpre"> of
                                (# _, </span><a name="loc_97_39_97_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_39_97_41&#39;)"><span class="hl_vardecl"><span class="mpre">ba</span></span></a><span class="mpre"> #) -&gt; </span><a href="#loc_97_39_97_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_39_97_41&#39;)"><span class="hl_varref"><span class="mpre">ba</span></span></a><span class="mpre">
    in case </span><a href="#loc_83_9_83_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_9_83_14&#39;)"><span class="hl_varref"><span class="mpre">mkArr</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">realWorld#</span></span><span class="mpre"> of
        </span><a name="loc_99_9_99_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_9_99_10&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_78_11_78_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_11_78_13&#39;)"><span class="hl_conref"><span class="mpre">BA</span></span></a><span class="mpre"> </span><a href="#loc_99_9_99_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_9_99_10&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">

</span></div></body></html>