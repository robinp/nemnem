<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE MagicHash, UnliftedFFITypes #-}

</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Data.Array.IO</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (c) The University of Glasgow 2001</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file libraries/base/LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  libraries@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable (uses Data.Array.MArray)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Mutable boxed and unboxed arrays in the IO monad.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">

module Data.Array.IO (
    </span><span class="hl_comment"><span class="mpre">-- * @IO@ arrays with boxed elements</span></span><span class="mpre">
    IOArray,             </span><span class="hl_comment"><span class="mpre">-- instance of: Eq, Typeable</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- * @IO@ arrays with unboxed elements</span></span><span class="mpre">
    IOUArray,            </span><span class="hl_comment"><span class="mpre">-- instance of: Eq, Typeable</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- * Overloaded mutable array interface</span></span><span class="mpre">
    module Data.Array.MArray,

    </span><span class="hl_comment"><span class="mpre">-- * Doing I\/O with @IOUArray@s</span></span><span class="mpre">
    hGetArray,           </span><span class="hl_comment"><span class="mpre">-- :: Handle -&gt; IOUArray Int Word8 -&gt; Int -&gt; IO Int</span></span><span class="mpre">
    hPutArray,           </span><span class="hl_comment"><span class="mpre">-- :: Handle -&gt; IOUArray Int Word8 -&gt; Int -&gt; IO ()</span></span><span class="mpre">
  ) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/array-0.5.0.0/Data/Array/IO.hs&quot;, srcSpanStartLine = 32, srcSpanStartColumn = 8, srcSpanEndLine = 32, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Data.Array.Base&quot;"><span class="mpre">Data.Array.Base</span></span><span class="mpre">
import Data.Array.IO.Internals
import Data.Array.MArray
import System.IO.Error

import Foreign
import Foreign.C

import GHC.Exts  (</span><a href="GHC.Prim.html#loc_1951_6_1951_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1951_6_1951_23&#39;)"><span class="mpre">MutableByteArray#</span></a><span class="mpre">, </span><a href="GHC.Prim.html#loc_2653_6_2653_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_2653_6_2653_15&#39;)"><span class="mpre">RealWorld</span></a><span class="mpre">)
import GHC.IO.Handle
import GHC.IO.Exception

</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- hGetArray</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Reads a number of &#39;Word8&#39;s from the specified &#39;Handle&#39; directly</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- into an array.</span></span><span class="mpre">
</span><a href="#loc_58_1_58_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_10&#39;)"><span class="mpre">hGetArray</span></a><span class="mpre">
        :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre">               </span><span class="hl_comment"><span class="mpre">-- ^ Handle to read from</span></span><span class="mpre">
        -&gt; </span><a href="Data.Array.IO.Internals.html#loc_48_9_48_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Array.IO.Internals.html#loc_48_9_48_17&#39;)"><span class="hl_tyconref"><span class="mpre">IOUArray</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">   </span><span class="hl_comment"><span class="mpre">-- ^ Array in which to place the values</span></span><span class="mpre">
        -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">                  </span><span class="hl_comment"><span class="mpre">-- ^ Number of &#39;Word8&#39;s to read</span></span><span class="mpre">
        -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
                </span><span class="hl_comment"><span class="mpre">-- ^ Returns: the number of &#39;Word8&#39;s actually</span></span><span class="mpre">
                </span><span class="hl_comment"><span class="mpre">-- read, which might be smaller than the number requested</span></span><span class="mpre">
                </span><span class="hl_comment"><span class="mpre">-- if the end of file was reached.</span></span><span class="mpre">

</span><a name="loc_58_1_58_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_10&#39;)"><span class="hl_fundecl"><span class="mpre">hGetArray</span></span></a><span class="mpre"> </span><a name="loc_58_11_58_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_11_58_17&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> (</span><a href="Data.Array.IO.Internals.html#loc_48_24_48_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Array.IO.Internals.html#loc_48_24_48_32&#39;)"><span class="hl_conref"><span class="mpre">IOUArray</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">STUArray</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_l</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_u</span></span><span class="mpre"> </span><a name="loc_58_44_58_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_44_58_45&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_58_46_58_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_46_58_49&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre">)) </span><a name="loc_58_52_58_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_52_58_57&#39;)"><span class="hl_vardecl"><span class="mpre">count</span></span></a><span class="mpre">
  | </span><a href="#loc_58_52_58_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_52_58_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">              = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  | </span><a href="#loc_58_52_58_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_52_58_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_58_52_58_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_52_58_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><a href="#loc_58_44_58_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_44_58_45&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">  = </span><a href="#loc_100_1_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_1_100_18&#39;)"><span class="hl_varref"><span class="mpre">illegalBufferSize</span></span></a><span class="mpre"> </span><a href="#loc_58_11_58_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_11_58_17&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hGetArray&quot;</span></span><span class="mpre"> </span><a href="#loc_58_52_58_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_52_58_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = do
      </span><span class="hl_comment"><span class="mpre">-- we would like to read directly into the buffer, but we can&#39;t</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- be sure that the MutableByteArray# is pinned, so we have to</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- allocate a separate area of memory and copy.</span></span><span class="mpre">
      </span><span class="hl_varref"><span class="mpre">allocaBytes</span></span><span class="mpre"> </span><a href="#loc_58_52_58_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_52_58_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_65_28_65_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_28_65_29&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt; do
        </span><a name="loc_66_9_66_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_9_66_10&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.Handle.Text.html#loc_788_1_788_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_788_1_788_8&#39;)"><span class="hl_varref"><span class="mpre">hGetBuf</span></span></a><span class="mpre"> </span><a href="#loc_58_11_58_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_11_58_17&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_65_28_65_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_28_65_29&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_58_52_58_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_52_58_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre">
        _ &lt;- </span><span class="hl_varref"><span class="mpre">memcpy_ba_ptr</span></span><span class="mpre"> </span><a href="#loc_58_46_58_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_46_58_49&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><a href="#loc_65_28_65_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_28_65_29&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_66_9_66_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_9_66_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_66_9_66_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_9_66_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/array-0.5.0.0/Data/Array/IO.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 1, srcSpanEndLine = 71, srcSpanEndColumn = 81}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/array-0.5.0.0/Data/Array/IO.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 1, srcSpanEndLine = 70, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/array-0.5.0.0/Data/Array/IO.hs&quot;, srcSpanStartLine = 70, srcSpanStart"><span class="mpre">foreign import ccall unsafe &quot;memcpy&quot;
   memcpy_ba_ptr :: MutableByteArray# RealWorld -&gt; Ptr a -&gt; CSize -&gt; IO (Ptr ())</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- hPutArray</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Writes an array of &#39;Word8&#39; to the specified &#39;Handle&#39;.</span></span><span class="mpre">
</span><a href="#loc_83_1_83_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_1_83_10&#39;)"><span class="mpre">hPutArray</span></a><span class="mpre">
        :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre">                       </span><span class="hl_comment"><span class="mpre">-- ^ Handle to write to</span></span><span class="mpre">
        -&gt; </span><a href="Data.Array.IO.Internals.html#loc_48_9_48_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Array.IO.Internals.html#loc_48_9_48_17&#39;)"><span class="hl_tyconref"><span class="mpre">IOUArray</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">           </span><span class="hl_comment"><span class="mpre">-- ^ Array to write from</span></span><span class="mpre">
        -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">                          </span><span class="hl_comment"><span class="mpre">-- ^ Number of &#39;Word8&#39;s to write</span></span><span class="mpre">
        -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">

</span><a name="loc_83_1_83_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_1_83_10&#39;)"><span class="hl_fundecl"><span class="mpre">hPutArray</span></span></a><span class="mpre"> </span><a name="loc_83_11_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_11_83_17&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> (</span><a href="Data.Array.IO.Internals.html#loc_48_24_48_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Array.IO.Internals.html#loc_48_24_48_32&#39;)"><span class="hl_conref"><span class="mpre">IOUArray</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">STUArray</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_l</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_u</span></span><span class="mpre"> </span><a name="loc_83_44_83_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_44_83_45&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_83_46_83_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_46_83_49&#39;)"><span class="hl_vardecl"><span class="mpre">raw</span></span></a><span class="mpre">)) </span><a name="loc_83_52_83_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_52_83_57&#39;)"><span class="hl_vardecl"><span class="mpre">count</span></span></a><span class="mpre">
  | </span><a href="#loc_83_52_83_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_52_83_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">              = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
  | </span><a href="#loc_83_52_83_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_52_83_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_83_52_83_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_52_83_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><a href="#loc_83_44_83_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_44_83_45&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">  = </span><a href="#loc_100_1_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_1_100_18&#39;)"><span class="hl_varref"><span class="mpre">illegalBufferSize</span></span></a><span class="mpre"> </span><a href="#loc_83_11_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_11_83_17&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hPutArray&quot;</span></span><span class="mpre"> </span><a href="#loc_83_52_83_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_52_83_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = do
      </span><span class="hl_comment"><span class="mpre">-- as in hGetArray, we would like to use the array directly, but</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- we can&#39;t be sure that the MutableByteArray# is pinned.</span></span><span class="mpre">
     </span><span class="hl_varref"><span class="mpre">allocaBytes</span></span><span class="mpre"> </span><a href="#loc_83_52_83_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_52_83_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_89_27_89_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_27_89_28&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt; do
       _ &lt;- </span><span class="hl_varref"><span class="mpre">memcpy_ptr_ba</span></span><span class="mpre"> </span><a href="#loc_89_27_89_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_27_89_28&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_83_46_83_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_46_83_49&#39;)"><span class="hl_varref"><span class="mpre">raw</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_83_52_83_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_52_83_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre">)
       </span><a href="GHC.IO.Handle.Text.html#loc_698_1_698_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_698_1_698_8&#39;)"><span class="hl_varref"><span class="mpre">hPutBuf</span></span></a><span class="mpre"> </span><a href="#loc_83_11_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_11_83_17&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_89_27_89_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_27_89_28&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_83_52_83_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_52_83_57&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/array-0.5.0.0/Data/Array/IO.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 1, srcSpanEndLine = 94, srcSpanEndColumn = 81}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/array-0.5.0.0/Data/Array/IO.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 1, srcSpanEndLine = 93, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/array-0.5.0.0/Data/Array/IO.hs&quot;, srcSpanStartLine = 93, srcSpanStart"><span class="mpre">foreign import ccall unsafe &quot;memcpy&quot;
   memcpy_ptr_ba :: Ptr a -&gt; MutableByteArray# RealWorld -&gt; CSize -&gt; IO (Ptr ())</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Internal Utils</span></span><span class="mpre">

</span><a href="#loc_100_1_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_1_100_18&#39;)"><span class="mpre">illegalBufferSize</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_100_1_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_1_100_18&#39;)"><span class="hl_fundecl"><span class="mpre">illegalBufferSize</span></span></a><span class="mpre"> </span><a name="loc_100_19_100_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_19_100_25&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a name="loc_100_26_100_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_26_100_28&#39;)"><span class="hl_vardecl"><span class="mpre">fn</span></span></a><span class="mpre"> </span><a name="loc_100_29_100_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_29_100_31&#39;)"><span class="hl_vardecl"><span class="mpre">sz</span></span></a><span class="mpre"> =
        </span><a href="GHC.IO.Exception.html#loc_217_1_217_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_217_1_217_12&#39;)"><span class="hl_varref"><span class="mpre">ioException</span></span></a><span class="mpre"> (</span><a href="System.IO.Error.html#loc_289_1_289_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_289_1_289_18&#39;)"><span class="hl_varref"><span class="mpre">ioeSetErrorString</span></span></a><span class="mpre">
                     (</span><a href="System.IO.Error.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_115_1_115_10&#39;)"><span class="hl_varref"><span class="mpre">mkIOError</span></span></a><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_272_5_272_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_272_5_272_20&#39;)"><span class="hl_conref"><span class="mpre">InvalidArgument</span></span></a><span class="mpre"> </span><a href="#loc_100_26_100_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_26_100_28&#39;)"><span class="hl_varref"><span class="mpre">fn</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_100_19_100_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_19_100_25&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre">) </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">)
                     (</span><span class="hl_string"><span class="mpre">&quot;illegal buffer size &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">9</span></span><span class="mpre"> (</span><a href="#loc_100_29_100_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_29_100_31&#39;)"><span class="hl_varref"><span class="mpre">sz</span></span></a><span class="mpre">::</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">) []))
</span></div></body></html>