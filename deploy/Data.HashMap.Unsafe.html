<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE MagicHash, Rank2Types, UnboxedTuples #-}

</span><span class="hl_comment"><span class="mpre">-- | This module exports a workaround for this bug:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    http://hackage.haskell.org/trac/ghc/ticket/5916</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Please read the comments in ghc/libraries/base/GHC/ST.lhs to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- understand what&#39;s going on here.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Code that uses this module should be compiled with -fno-full-laziness</span></span><span class="mpre">
module Data.HashMap.Unsafe
    ( runST
    ) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unordered-containers-0.2.4.0/Data/HashMap/Unsafe.hs&quot;, srcSpanStartLine = 15, srcSpanStartColumn = 8, srcSpanEndLine = 15, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre"> (realWorld#)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/unordered-containers-0.2.4.0/Data/HashMap/Unsafe.hs&quot;, srcSpanStartLine = 16, srcSpanStartColumn = 8, srcSpanEndLine = 16, srcSpanEndColumn = 14}, srcInfoPoints = []}) &quot;GHC.ST&quot;"><span class="mpre">GHC.ST</span></span><span class="mpre"> hiding (runST, runSTRep)

</span><span class="hl_comment"><span class="mpre">-- | Return the value computed by a state transformer computation.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The @forall@ ensures that the internal state used by the &#39;ST&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- computation is inaccessible to the rest of the program.</span></span><span class="mpre">
</span><a href="#loc_22_1_22_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_1_22_6&#39;)"><span class="mpre">runST</span></a><span class="mpre"> :: (forall </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">. </span><span class="hl_tyconref"><span class="mpre">ST</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_22_1_22_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_1_22_6&#39;)"><span class="hl_fundecl"><span class="mpre">runST</span></span></a><span class="mpre"> </span><a name="loc_22_7_22_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_7_22_9&#39;)"><span class="hl_vardecl"><span class="mpre">st</span></span></a><span class="mpre"> = </span><a href="#loc_26_1_26_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_1_26_9&#39;)"><span class="hl_varref"><span class="mpre">runSTRep</span></span></a><span class="mpre"> (case </span><a href="#loc_22_7_22_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_7_22_9&#39;)"><span class="hl_varref"><span class="mpre">st</span></span></a><span class="mpre"> of { </span><span class="hl_conref"><span class="mpre">ST</span></span><span class="mpre"> </span><a name="loc_22_38_22_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_44&#39;)"><span class="hl_vardecl"><span class="mpre">st_rep</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_22_38_22_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_38_22_44&#39;)"><span class="hl_varref"><span class="mpre">st_rep</span></span></a><span class="mpre"> })
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_22_1_22_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_1_22_6&#39;)"><span class="mpre">runST</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_26_1_26_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_1_26_9&#39;)"><span class="mpre">runSTRep</span></a><span class="mpre"> :: (forall </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">. </span><span class="hl_tyconref"><span class="mpre">STRep</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_26_1_26_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_1_26_9&#39;)"><span class="hl_fundecl"><span class="mpre">runSTRep</span></span></a><span class="mpre"> </span><a name="loc_26_10_26_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_10_26_16&#39;)"><span class="hl_vardecl"><span class="mpre">st_rep</span></span></a><span class="mpre"> = case </span><a href="#loc_26_10_26_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_10_26_16&#39;)"><span class="hl_varref"><span class="mpre">st_rep</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">realWorld#</span></span><span class="mpre"> of
                        (# _, </span><a name="loc_27_31_27_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_31_27_32&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> #) -&gt; </span><a href="#loc_27_31_27_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_31_27_32&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE [0] </span><a href="#loc_26_1_26_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_1_26_9&#39;)"><span class="mpre">runSTRep</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>