<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- | This was previously known as the Resource monad. However, that term is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- confusing next to the ResourceT transformer, so it has been renamed.</span></span><span class="mpre">
module Data.Acquire
    ( Acquire
    , with
    , mkAcquire
    , mkAcquireType
    , allocateAcquire
    , ReleaseType (..)
    ) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire.hs&quot;, srcSpanStartLine = 12, srcSpanStartColumn = 8, srcSpanEndLine = 12, srcSpanEndColumn = 45}, srcInfoPoints = []}) &quot;Control.Monad.Trans.Resource.Internal&quot;"><span class="mpre">Control.Monad.Trans.Resource.Internal</span></span><span class="mpre">
import Control.Monad.Trans.Resource
import Data.Acquire.Internal
import Control.Applicative (</span><a href="Control.Applicative.html#loc_113_20_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_113_20_113_31&#39;)"><span class="mpre">Applicative</span></a><span class="mpre"> (..))
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire.hs&quot;, srcSpanStartLine = 16, srcSpanStartColumn = 8, srcSpanEndLine = 16, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;Control.Monad.Base&quot;"><span class="mpre">Control.Monad.Base</span></span><span class="mpre"> (MonadBase (..))
import Control.Monad.IO.Class (</span><a href="Control.Monad.IO.Class.html#loc_30_20_30_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_30_20_30_27&#39;)"><span class="mpre">MonadIO</span></a><span class="mpre"> (..))
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire.hs&quot;, srcSpanStartLine = 18, srcSpanStartColumn = 8, srcSpanEndLine = 18, srcSpanEndColumn = 35}, srcInfoPoints = []}) &quot;Control.Monad.Trans.Control&quot;"><span class="mpre">Control.Monad.Trans.Control</span></span><span class="mpre"> (MonadBaseControl, control)
import qualified Control.Exception.Lifted as E
import Data.Typeable (</span><a href="Data.Typeable.Internal.html#loc_196_7_196_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_196_7_196_15&#39;)"><span class="mpre">Typeable</span></a><span class="mpre">)
import Control.Monad (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="mpre">liftM</span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_312_1_312_3" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_312_1_312_3&#39;)"><span class="mpre">ap</span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Allocate a resource and register an action with the @MonadResource@ to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- free the resource.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 1.1.0</span></span><span class="mpre">
</span><a href="#loc_28_1_28_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_1_28_16&#39;)"><span class="mpre">allocateAcquire</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire.hs&quot;, srcSpanStartLine = 27, srcSpanStartColumn = 20, srcSpanEndLine = 27, srcSpanEndColumn = 38}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/Data/Acquire.hs&quot;, srcSpanStartLine = 27, srcSpanStartColumn = 36, srcSpanEndLine = 27, srcSpanEndColumn = 38}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/resourcet-1.1.2.2/"><span class="mpre">MonadResource m =&gt;</span></span><span class="mpre"> </span><a href="Data.Acquire.Internal.html#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Acquire.Internal.html#loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">ReleaseKey</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_28_1_28_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_1_28_16&#39;)"><span class="hl_vardecl"><span class="mpre">allocateAcquire</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">liftResourceT</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_31_1_31_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_1_31_19&#39;)"><span class="hl_varref"><span class="mpre">allocateAcquireRIO</span></span></a><span class="mpre">

</span><a href="#loc_31_1_31_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_1_31_19&#39;)"><span class="mpre">allocateAcquireRIO</span></a><span class="mpre"> :: </span><a href="Data.Acquire.Internal.html#loc_45_9_45_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Acquire.Internal.html#loc_45_9_45_16&#39;)"><span class="hl_tyconref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ResourceT</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">ReleaseKey</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_31_1_31_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_1_31_19&#39;)"><span class="hl_fundecl"><span class="mpre">allocateAcquireRIO</span></span></a><span class="mpre"> (</span><a href="Data.Acquire.Internal.html#loc_45_21_45_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Acquire.Internal.html#loc_45_21_45_28&#39;)"><span class="hl_conref"><span class="mpre">Acquire</span></span></a><span class="mpre"> </span><a name="loc_31_29_31_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_29_31_30&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">ResourceT</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_31_47_31_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_47_31_53&#39;)"><span class="hl_vardecl"><span class="mpre">istate</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Exception.Lifted.html#loc_268_1_268_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Lifted.html#loc_268_1_268_5&#39;)"><span class="hl_varref"><span class="mpre">E.mask</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_31_76_31_83" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_76_31_83&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
    </span><a href="Data.Acquire.Internal.html#loc_31_20_31_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Acquire.Internal.html#loc_31_20_31_29&#39;)"><span class="hl_conref"><span class="mpre">Allocated</span></span></a><span class="mpre"> </span><a name="loc_32_15_32_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_15_32_16&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_32_17_32_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_17_32_21&#39;)"><span class="hl_vardecl"><span class="mpre">free</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_31_29_31_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_29_31_30&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_31_76_31_83" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_76_31_83&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre">
    </span><a name="loc_33_5_33_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_5_33_8&#39;)"><span class="hl_vardecl"><span class="mpre">key</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">registerType</span></span><span class="mpre"> </span><a href="#loc_31_47_31_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_47_31_53&#39;)"><span class="hl_varref"><span class="mpre">istate</span></span></a><span class="mpre"> </span><a href="#loc_32_17_32_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_17_32_21&#39;)"><span class="hl_varref"><span class="mpre">free</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_33_5_33_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_5_33_8&#39;)"><span class="hl_varref"><span class="mpre">key</span></span></a><span class="mpre">, </span><a href="#loc_32_15_32_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_15_32_16&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
</span></div></body></html>