<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
#if __GLASGOW_HASKELL__ &gt;= 707
{-# LANGUAGE StandaloneDeriving, DeriveDataTypeable #-}
#endif
#if defined(__GLASGOW_HASKELL__) &amp;&amp; __GLASGOW_HASKELL__ &gt;= 702
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Comonad.Trans.Store</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2008-2013 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The store comonad holds a constant value along with a modifiable /accessor/</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- function, which maps the /stored value/ to the /focus/.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This module defines the strict store (aka state-in-context/costate) comonad</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- transformer.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @stored value = (1, 5)@, @accessor = fst@, @resulting focus = 1@:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; :{</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  let</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    storeTuple :: Store (Int, Int) Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    storeTuple = store fst (1, 5)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- :}</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Add something to the focus:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; :{</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  let</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    addToFocus :: Int -&gt; Store (Int, Int) Int -&gt; Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    addToFocus x wa = x + extract wa</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- :}</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; :{</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   let</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     added3 :: Store (Int, Int) Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     added3 = extend (addToFocus 3) storeTuple</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- :}</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The focus of added3 is now @1 + 3 = 4@. However, this action changed only</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the accessor function and therefore the focus but not the stored value:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; pos added3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (1,5)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; extract added3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 4</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The strict store (state-in-context/costate) comonad transformer is subject</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to the laws:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; x = seek (pos x) x</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; y = pos (seek y x)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; seek y x = seek y (seek z x)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Thanks go to Russell O&#39;Connor and Daniel Peebles for their help formulating</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and proving the laws for this comonad transformer.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Comonad.Trans.Store
  (
  </span><span class="hl_comment"><span class="mpre">-- * The Store comonad</span></span><span class="mpre">
    Store, store, runStore
  </span><span class="hl_comment"><span class="mpre">-- * The Store comonad transformer</span></span><span class="mpre">
  , StoreT(..), runStoreT
  </span><span class="hl_comment"><span class="mpre">-- * Operations</span></span><span class="mpre">
  , pos
  , seek, seeks
  , peek, peeks
  , experiment
  ) where

import Control.Applicative
import Control.Comonad
import Control.Comonad.Hoist.Class
import Control.Comonad.Trans.Class
import Data.Functor.Identity
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 84, srcSpanStartColumn = 8, srcSpanEndLine = 84, srcSpanEndColumn = 22}, srcInfoPoints = []}) &quot;Data.Semigroup&quot;"><span class="mpre">Data.Semigroup</span></span><span class="mpre">

#ifdef __GLASGOW_HASKELL__
import Data.Typeable

</span><span class="hl_comment"><span class="mpre">-- $setup</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Data.Tuple (swap)</span></span><span class="mpre">

#if __GLASGOW_HASKELL__ &gt;= 707
</span><span class="warning" data-warning="DeclDerivDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 1, srcSpanEndLine = 93, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 1, srcSpanEndLine = 93, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/T"><span class="mpre">deriving instance Typeable StoreT</span></span><span class="mpre">
#else
instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 95, srcSpanStartColumn = 10, srcSpanEndLine = 95, srcSpanEndColumn = 38}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 95, srcSpanStartColumn = 10, srcSpanEndLine = 95, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/"><span class="mpre">(Typeable s, Typeable1 w) =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Typeable1</span></span><span class="mpre"> (</span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="Data.Typeable.Internal.html#loc_212_1_212_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_212_1_212_8&#39;)"><span class="hl_fundecl"><span class="mpre">typeOf1</span></span></a><span class="mpre"> </span><a name="loc_96_11_96_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_11_96_15&#39;)"><span class="hl_vardecl"><span class="mpre">dswa</span></span></a><span class="mpre"> = </span><a href="Data.Typeable.Internal.html#loc_122_1_122_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_122_1_122_11&#39;)"><span class="hl_varref"><span class="mpre">mkTyConApp</span></span></a><span class="mpre"> </span><a href="#loc_108_1_108_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_1_108_12&#39;)"><span class="hl_varref"><span class="mpre">storeTTyCon</span></span></a><span class="mpre"> [</span><a href="Data.Typeable.Internal.html#loc_209_1_209_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_209_1_209_7&#39;)"><span class="hl_varref"><span class="mpre">typeOf</span></span></a><span class="mpre"> (</span><a href="#loc_99_7_99_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_7_99_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><a href="#loc_96_11_96_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_11_96_15&#39;)"><span class="hl_varref"><span class="mpre">dswa</span></span></a><span class="mpre">), </span><a href="Data.Typeable.Internal.html#loc_212_1_212_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_212_1_212_8&#39;)"><span class="hl_varref"><span class="mpre">typeOf1</span></span></a><span class="mpre"> (</span><a href="#loc_101_7_101_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_7_101_8&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><a href="#loc_96_11_96_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_11_96_15&#39;)"><span class="hl_varref"><span class="mpre">dswa</span></span></a><span class="mpre">)]
    where
      </span><a href="#loc_99_7_99_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_7_99_8&#39;)"><span class="mpre">s</span></a><span class="mpre"> :: </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">
      </span><a name="loc_99_7_99_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_7_99_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">undefined</span></span><span class="mpre">
      </span><a href="#loc_101_7_101_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_7_101_8&#39;)"><span class="mpre">w</span></a><span class="mpre"> :: </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
      </span><a name="loc_101_7_101_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_7_101_8&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">undefined</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 103, srcSpanStartColumn = 10, srcSpanEndLine = 103, srcSpanEndColumn = 50}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 103, srcSpanStartColumn = 10, srcSpanEndLine = 103, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Como"><span class="mpre">(Typeable s, Typeable1 w, Typeable a) =&gt;</span></span><span class="mpre"> </span><a href="Data.Typeable.Internal.html#loc_196_7_196_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_196_7_196_15&#39;)"><span class="hl_classref"><span class="mpre">Typeable</span></span></a><span class="mpre"> (</span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) where
  </span><a href="Data.Typeable.Internal.html#loc_209_1_209_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_209_1_209_7&#39;)"><span class="hl_vardecl"><span class="mpre">typeOf</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">typeOfDefault</span></span><span class="mpre">

</span><a href="#loc_108_1_108_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_1_108_12&#39;)"><span class="mpre">storeTTyCon</span></a><span class="mpre"> :: </span><a href="Data.Typeable.Internal.html#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">TyCon</span></span></a><span class="mpre">
#if __GLASGOW_HASKELL__ &lt; 704
</span><a name="loc_108_1_108_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_1_108_12&#39;)"><span class="hl_vardecl"><span class="mpre">storeTTyCon</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkTyCon</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Control.Comonad.Trans.Store.StoreT&quot;</span></span><span class="mpre">
#else
</span><span class="hl_vardecl"><span class="mpre">storeTTyCon</span></span><span class="mpre"> = </span><a href="Data.Typeable.Internal.html#loc_170_1_170_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_170_1_170_9&#39;)"><span class="hl_varref"><span class="mpre">mkTyCon3</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;comonad-transformers&quot;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Control.Comonad.Trans.Store&quot;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;StoreT&quot;</span></span><span class="mpre">
#endif
</span><span class="hl_pragma"><span class="mpre">{-# NOINLINE </span><a href="#loc_108_1_108_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_108_1_108_12&#39;)"><span class="mpre">storeTTyCon</span></a><span class="mpre"> #-}</span></span><span class="mpre">
#endif

#endif

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 117, srcSpanStartColumn = 1, srcSpanEndLine = 117, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 117, srcSpanStartColumn = 1, srcSpanEndLine = 117, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comona"><span class="mpre">type Store s = StoreT s Identity</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Create a Store using an accessor function and a stored value</span></span><span class="mpre">
</span><a href="#loc_121_1_121_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_1_121_6&#39;)"><span class="mpre">store</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Store</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_121_1_121_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_1_121_6&#39;)"><span class="hl_fundecl"><span class="mpre">store</span></span></a><span class="mpre"> </span><a name="loc_121_7_121_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_7_121_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_121_9_121_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_9_121_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre"> </span><a href="#loc_121_7_121_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_7_121_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) </span><a href="#loc_121_9_121_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_9_121_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><a href="#loc_124_1_124_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_1_124_9&#39;)"><span class="mpre">runStore</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Store</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">)
</span><a name="loc_124_1_124_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_1_124_9&#39;)"><span class="hl_fundecl"><span class="mpre">runStore</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre"> </span><a name="loc_124_28_124_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_28_124_29&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">) </span><a name="loc_124_31_124_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_31_124_32&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = (</span><a href="#loc_124_28_124_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_28_124_29&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">, </span><a href="#loc_124_31_124_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_31_124_32&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)

data </span><a name="loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tycondecl"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> = </span><a name="loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_condecl"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">

</span><a href="#loc_129_1_129_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_10&#39;)"><span class="mpre">runStoreT</span></a><span class="mpre"> :: </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">), </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">)
</span><a name="loc_129_1_129_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_1_129_10&#39;)"><span class="hl_fundecl"><span class="mpre">runStoreT</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_129_19_129_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_19_129_21&#39;)"><span class="hl_vardecl"><span class="mpre">wf</span></span></a><span class="mpre"> </span><a name="loc_129_22_129_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_22_129_23&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = (</span><a href="#loc_129_19_129_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_19_129_21&#39;)"><span class="hl_varref"><span class="mpre">wf</span></span></a><span class="mpre">, </span><a href="#loc_129_22_129_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_22_129_23&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 10, srcSpanEndLine = 131, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 20, srcSpanEndLine = 131, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Functor w =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> (</span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><span class="hl_fundecl"><span class="mpre">fmap</span></span><span class="mpre"> </span><a name="loc_132_8_132_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_8_132_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_132_18_132_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_18_132_20&#39;)"><span class="hl_vardecl"><span class="mpre">wf</span></span></a><span class="mpre"> </span><a name="loc_132_21_132_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_21_132_22&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="#loc_132_8_132_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_8_132_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre">) </span><a href="#loc_132_18_132_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_18_132_20&#39;)"><span class="hl_varref"><span class="mpre">wf</span></span></a><span class="mpre">) </span><a href="#loc_132_21_132_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_21_132_22&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 134, srcSpanStartColumn = 10, srcSpanEndLine = 134, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 134, srcSpanStartColumn = 10, srcSpanEndLine = 134, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Como"><span class="mpre">(ComonadApply w, Semigroup s) =&gt;</span></span><span class="mpre"> </span><a href="Control.Comonad.html#loc_213_20_213_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_213_20_213_32&#39;)"><span class="hl_classref"><span class="mpre">ComonadApply</span></span></a><span class="mpre"> (</span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_135_10_135_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_10_135_12&#39;)"><span class="hl_vardecl"><span class="mpre">ff</span></span></a><span class="mpre"> </span><a name="loc_135_13_135_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_13_135_14&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="Control.Comonad.html#loc_214_3_214_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_214_3_214_8&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;@&gt;</span></span></a><span class="mpre"> </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_135_26_135_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_26_135_28&#39;)"><span class="hl_vardecl"><span class="mpre">fa</span></span></a><span class="mpre"> </span><a name="loc_135_29_135_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_29_135_30&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_varref"><span class="mpre">(&lt;*&gt;)</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_135_10_135_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_10_135_12&#39;)"><span class="hl_varref"><span class="mpre">ff</span></span></a><span class="mpre"> </span><a href="Control.Comonad.html#loc_214_3_214_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_214_3_214_8&#39;)"><span class="hl_infix"><span class="mpre">&lt;@&gt;</span></span></a><span class="mpre"> </span><a href="#loc_135_26_135_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_26_135_28&#39;)"><span class="hl_varref"><span class="mpre">fa</span></span></a><span class="mpre">) (</span><a href="#loc_135_13_135_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_13_135_14&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;&gt;</span></span><span class="mpre"> </span><a href="#loc_135_29_135_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_29_135_30&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 137, srcSpanStartColumn = 10, srcSpanEndLine = 137, srcSpanEndColumn = 38}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 137, srcSpanStartColumn = 10, srcSpanEndLine = 137, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Como"><span class="mpre">(Applicative w, Monoid s) =&gt;</span></span><span class="mpre"> </span><a href="Control.Applicative.html#loc_113_20_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_113_20_113_31&#39;)"><span class="hl_classref"><span class="mpre">Applicative</span></span></a><span class="mpre"> (</span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_fundecl"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a name="loc_138_8_138_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_8_138_9&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><a href="#loc_138_8_138_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_8_138_9&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)) </span><span class="hl_varref"><span class="mpre">mempty</span></span><span class="mpre">
  </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_139_10_139_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_10_139_12&#39;)"><span class="hl_vardecl"><span class="mpre">ff</span></span></a><span class="mpre"> </span><a name="loc_139_13_139_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_13_139_14&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;*&gt;</span></span></a><span class="mpre"> </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_139_26_139_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_26_139_28&#39;)"><span class="hl_vardecl"><span class="mpre">fa</span></span></a><span class="mpre"> </span><a name="loc_139_29_139_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_29_139_30&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_varref"><span class="mpre">(&lt;*&gt;)</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_139_10_139_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_10_139_12&#39;)"><span class="hl_varref"><span class="mpre">ff</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;*&gt;</span></span></a><span class="mpre"> </span><a href="#loc_139_26_139_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_26_139_28&#39;)"><span class="hl_varref"><span class="mpre">fa</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">mappend</span></span><span class="mpre"> </span><a href="#loc_139_13_139_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_13_139_14&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="#loc_139_29_139_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_139_29_139_30&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 141, srcSpanStartColumn = 10, srcSpanEndLine = 141, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 141, srcSpanStartColumn = 20, srcSpanEndLine = 141, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Comonad w =&gt;</span></span><span class="mpre"> </span><a href="Control.Comonad.html#loc_120_20_120_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_120_20_120_27&#39;)"><span class="hl_classref"><span class="mpre">Comonad</span></span></a><span class="mpre"> (</span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="Control.Comonad.html#loc_132_3_132_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_132_3_132_12&#39;)"><span class="hl_fundecl"><span class="mpre">duplicate</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_142_21_142_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_21_142_23&#39;)"><span class="hl_vardecl"><span class="mpre">wf</span></span></a><span class="mpre"> </span><a name="loc_142_24_142_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_24_142_25&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><a href="Control.Comonad.html#loc_139_3_139_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_139_3_139_9&#39;)"><span class="hl_varref"><span class="mpre">extend</span></span></a><span class="mpre"> </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a href="#loc_142_21_142_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_21_142_23&#39;)"><span class="hl_varref"><span class="mpre">wf</span></span></a><span class="mpre">) </span><a href="#loc_142_24_142_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_24_142_25&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
  </span><a href="Control.Comonad.html#loc_139_3_139_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_139_3_139_9&#39;)"><span class="hl_fundecl"><span class="mpre">extend</span></span></a><span class="mpre"> </span><a name="loc_143_10_143_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_10_143_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_143_20_143_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_20_143_22&#39;)"><span class="hl_vardecl"><span class="mpre">wf</span></span></a><span class="mpre"> </span><a name="loc_143_23_143_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_23_143_24&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><a href="Control.Comonad.html#loc_139_3_139_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_139_3_139_9&#39;)"><span class="hl_varref"><span class="mpre">extend</span></span></a><span class="mpre"> (\</span><a name="loc_143_45_143_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_45_143_48&#39;)"><span class="hl_vardecl"><span class="mpre">wf&#39;</span></span></a><span class="mpre"> </span><a name="loc_143_49_143_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_49_143_51&#39;)"><span class="hl_vardecl"><span class="mpre">s&#39;</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_143_10_143_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_10_143_11&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a href="#loc_143_45_143_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_45_143_48&#39;)"><span class="hl_varref"><span class="mpre">wf&#39;</span></span></a><span class="mpre"> </span><a href="#loc_143_49_143_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_49_143_51&#39;)"><span class="hl_varref"><span class="mpre">s&#39;</span></span></a><span class="mpre">)) </span><a href="#loc_143_20_143_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_20_143_22&#39;)"><span class="hl_varref"><span class="mpre">wf</span></span></a><span class="mpre">) </span><a href="#loc_143_23_143_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_23_143_24&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
  </span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_fundecl"><span class="mpre">extract</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_144_19_144_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_19_144_21&#39;)"><span class="hl_vardecl"><span class="mpre">wf</span></span></a><span class="mpre"> </span><a name="loc_144_22_144_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_22_144_23&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_144_19_144_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_19_144_21&#39;)"><span class="hl_varref"><span class="mpre">wf</span></span></a><span class="mpre"> </span><a href="#loc_144_22_144_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_22_144_23&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

instance </span><a href="Control.Comonad.Trans.Class.html#loc_21_7_21_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Class.html#loc_21_7_21_19&#39;)"><span class="hl_classref"><span class="mpre">ComonadTrans</span></span></a><span class="mpre"> (</span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) where
  </span><a href="Control.Comonad.Trans.Class.html#loc_22_3_22_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Class.html#loc_22_3_22_8&#39;)"><span class="hl_fundecl"><span class="mpre">lower</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_147_17_147_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_17_147_18&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_147_19_147_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_19_147_20&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_147_19_147_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_19_147_20&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) </span><a href="#loc_147_17_147_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_17_147_18&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">

instance </span><a href="Control.Comonad.Hoist.Class.html#loc_19_7_19_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Hoist.Class.html#loc_19_7_19_19&#39;)"><span class="hl_classref"><span class="mpre">ComonadHoist</span></span></a><span class="mpre"> (</span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) where
  </span><a href="Control.Comonad.Hoist.Class.html#loc_22_3_22_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Hoist.Class.html#loc_22_3_22_10&#39;)"><span class="hl_fundecl"><span class="mpre">cohoist</span></span></a><span class="mpre"> </span><a name="loc_150_11_150_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_11_150_12&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_150_21_150_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_21_150_22&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_150_23_150_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_23_150_24&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> (</span><a href="#loc_150_11_150_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_11_150_12&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_150_21_150_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_21_150_22&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) </span><a href="#loc_150_23_150_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_23_150_24&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Read the stored value</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; pos $ store fst (1,5)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (1,5)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_158_1_158_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_4&#39;)"><span class="mpre">pos</span></a><span class="mpre"> :: </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">
</span><a name="loc_158_1_158_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_4&#39;)"><span class="hl_fundecl"><span class="mpre">pos</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> _ </span><a name="loc_158_15_158_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_15_158_16&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="#loc_158_15_158_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_15_158_16&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set the stored value</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; pos . seek (3,7) $ store fst (1,5)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (3,7)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Seek satisfies the law</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; seek s = peek s . duplicate</span></span><span class="mpre">
</span><a href="#loc_169_1_169_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_5&#39;)"><span class="mpre">seek</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_169_1_169_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_1_169_5&#39;)"><span class="hl_fundecl"><span class="mpre">seek</span></span></a><span class="mpre"> </span><a name="loc_169_6_169_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_6_169_7&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 169, srcSpanStartColumn = 8, srcSpanEndLine = 169, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 169, srcSpanStartColumn = 8, srcSpanEndLine = 169, srcSpanEndColumn = 9}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">~(StoreT f _)</span></span><span class="mpre"> = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">f</span></span><span class="mpre"> </span><a href="#loc_169_6_169_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_6_169_7&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Modify the stored value</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; pos . seeks swap $ store fst (1,5)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (5,1)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Seeks satisfies the law</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; seeks f = peeks f . duplicate</span></span><span class="mpre">
</span><a href="#loc_180_1_180_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_1_180_6&#39;)"><span class="mpre">seeks</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) -&gt; </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_180_1_180_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_1_180_6&#39;)"><span class="hl_fundecl"><span class="mpre">seeks</span></span></a><span class="mpre"> </span><a name="loc_180_7_180_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_7_180_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 180, srcSpanStartColumn = 9, srcSpanEndLine = 180, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 180, srcSpanStartColumn = 9, srcSpanEndLine = 180, srcSpanEndColumn = 10}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nem"><span class="mpre">~(StoreT g s)</span></span><span class="mpre"> = </span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">g</span></span><span class="mpre"> (</span><a href="#loc_180_7_180_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_7_180_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">s</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Peek at what the current focus would be for a different stored value</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Peek satisfies the law</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; peek x . extend (peek y) = peek y</span></span><span class="mpre">
</span><a href="#loc_188_1_188_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_5&#39;)"><span class="mpre">peek</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 187, srcSpanStartColumn = 9, srcSpanEndLine = 187, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 187, srcSpanStartColumn = 19, srcSpanEndLine = 187, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Comonad w =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_188_1_188_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_1_188_5&#39;)"><span class="hl_fundecl"><span class="mpre">peek</span></span></a><span class="mpre"> </span><a name="loc_188_6_188_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_6_188_7&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_188_16_188_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_16_188_17&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> _) = </span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_188_16_188_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_16_188_17&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_188_6_188_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_6_188_7&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | Peek at what the current focus would be if the stored value was</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   modified by some function</span></span><span class="mpre">
</span><a href="#loc_194_1_194_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_1_194_6&#39;)"><span class="mpre">peeks</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 193, srcSpanStartColumn = 10, srcSpanEndLine = 193, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 193, srcSpanStartColumn = 20, srcSpanEndLine = 193, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Comonad w =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) -&gt; </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_194_1_194_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_1_194_6&#39;)"><span class="hl_fundecl"><span class="mpre">peeks</span></span></a><span class="mpre"> </span><a name="loc_194_7_194_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_7_194_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="warning" data-warning="PatPIrrPat (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 194, srcSpanStartColumn = 9, srcSpanEndLine = 194, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 194, srcSpanStartColumn = 9, srcSpanEndLine = 194, srcSpanEndColumn = 10}]}) (PParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nem"><span class="mpre">~(StoreT g s)</span></span><span class="mpre"> = </span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">g</span></span><span class="mpre"> (</span><a href="#loc_194_7_194_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_194_7_194_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">s</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Applies a functor-valued function to the stored value, and then uses the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   new accessor to read the resulting focus.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &gt;&gt;&gt; let f x = if x &gt; 0 then Just (x^2) else Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &gt;&gt;&gt; experiment f $ store (+1) 2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Just 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &gt;&gt;&gt; experiment f $ store (+1) (-2)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Nothing</span></span><span class="mpre">
</span><a href="#loc_205_1_205_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_1_205_11&#39;)"><span class="mpre">experiment</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 204, srcSpanStartColumn = 15, srcSpanEndLine = 204, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Comonad/Trans/Store.hs&quot;, srcSpanStartLine = 204, srcSpanStartColumn = 15, srcSpanEndLine = 204, srcSpanEndColumn = 16},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/comonad-4.2/src/Control/Como"><span class="mpre">(Comonad w, Functor f) =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) -&gt; </span><a href="#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_205_1_205_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_1_205_11&#39;)"><span class="hl_fundecl"><span class="mpre">experiment</span></span></a><span class="mpre"> </span><a name="loc_205_12_205_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_12_205_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_205_22_205_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_22_205_24&#39;)"><span class="hl_vardecl"><span class="mpre">wf</span></span></a><span class="mpre"> </span><a name="loc_205_25_205_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_25_205_26&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_205_22_205_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_22_205_24&#39;)"><span class="hl_varref"><span class="mpre">wf</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_205_12_205_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_12_205_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_205_25_205_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_25_205_26&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span></div></body></html>