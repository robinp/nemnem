<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE RankNTypes #-}
{-# LANGUAGE ScopedTypeVariables #-}
{-# LANGUAGE CPP #-}
module Data.Conduit.Network
    ( </span><span class="hl_comment"><span class="mpre">-- * Basic utilities</span></span><span class="mpre">
      sourceSocket
    , sinkSocket
      </span><span class="hl_comment"><span class="mpre">-- * Simple TCP server/client interface.</span></span><span class="mpre">
    , SN.AppData
    , appSource
    , appSink
    , SN.appSockAddr
    , SN.appLocalAddr
      </span><span class="hl_comment"><span class="mpre">-- ** Server</span></span><span class="mpre">
    , SN.ServerSettings
    , serverSettings
    , SN.runTCPServer
    , SN.runTCPServerWithHandle
      </span><span class="hl_comment"><span class="mpre">-- ** Client</span></span><span class="mpre">
    , SN.ClientSettings
    , clientSettings
    , SN.runTCPClient
      </span><span class="hl_comment"><span class="mpre">-- ** Getters</span></span><span class="mpre">
    , SN.getPort
    , SN.getHost
    , SN.getAfterBind
    , SN.getNeedLocalAddr
      </span><span class="hl_comment"><span class="mpre">-- ** Setters</span></span><span class="mpre">
    , SN.setPort
    , SN.setHost
    , SN.setAfterBind
    , SN.setNeedLocalAddr
      </span><span class="hl_comment"><span class="mpre">-- * Types</span></span><span class="mpre">
    , SN.HostPreference
    ) where

import Prelude hiding (catch)
import Data.Conduit
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 40, srcSpanStartColumn = 18, srcSpanEndLine = 40, srcSpanEndColumn = 32}, srcInfoPoints = []}) &quot;Network.Socket&quot;"><span class="mpre">Network.Socket</span></span><span class="mpre"> as NS
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 41, srcSpanStartColumn = 8, srcSpanEndLine = 41, srcSpanEndColumn = 22}, srcInfoPoints = []}) &quot;Network.Socket&quot;"><span class="mpre">Network.Socket</span></span><span class="mpre"> (Socket)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 42, srcSpanStartColumn = 8, srcSpanEndLine = 42, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Network.Socket.ByteString&quot;"><span class="mpre">Network.Socket.ByteString</span></span><span class="mpre"> (sendAll, recv)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 8, srcSpanEndLine = 43, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> (ByteString)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 44, srcSpanStartColumn = 18, srcSpanEndLine = 44, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;GHC.Conc&quot;"><span class="mpre">GHC.Conc</span></span><span class="mpre"> as Conc (yield)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 45, srcSpanStartColumn = 18, srcSpanEndLine = 45, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as S
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 18, srcSpanEndLine = 46, srcSpanEndColumn = 39}, srcInfoPoints = []}) &quot;Data.ByteString.Char8&quot;"><span class="mpre">Data.ByteString.Char8</span></span><span class="mpre"> as S8
import Control.Monad.IO.Class (</span><a href="Control.Monad.IO.Class.html#loc_30_20_30_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_30_20_30_27&#39;)"><span class="mpre">MonadIO</span></a><span class="mpre"> (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="mpre">liftIO</span></a><span class="mpre">))
import Control.Exception (</span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="mpre">throwIO</span></a><span class="mpre">, SomeException, </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="mpre">try</span></a><span class="mpre">, </span><a href="Control.Exception.Base.html#loc_273_3_273_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_273_3_273_12&#39;)"><span class="mpre">finally</span></a><span class="mpre">, </span><a href="Control.Exception.Base.html#loc_259_1_259_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_259_1_259_8&#39;)"><span class="mpre">bracket</span></a><span class="mpre">, </span><a href="GHC.IO.Exception.html#loc_238_6_238_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_238_6_238_17&#39;)"><span class="mpre">IOException</span></a><span class="mpre">, </span><a href="Control.Exception.Base.html#loc_150_1_150_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_150_1_150_6&#39;)"><span class="mpre">catch</span></a><span class="mpre">)
import Control.Monad (</span><a href="Control.Monad.html#loc_189_1_189_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_189_1_189_8&#39;)"><span class="mpre">forever</span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="mpre">unless</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 50, srcSpanStartColumn = 8, srcSpanEndLine = 50, srcSpanEndColumn = 35}, srcInfoPoints = []}) &quot;Control.Monad.Trans.Control&quot;"><span class="mpre">Control.Monad.Trans.Control</span></span><span class="mpre"> (MonadBaseControl, control)
import Control.Monad.Trans.Class (</span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="mpre">lift</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 52, srcSpanStartColumn = 8, srcSpanEndLine = 52, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;Control.Concurrent&quot;"><span class="mpre">Control.Concurrent</span></span><span class="mpre"> (forkIO, threadDelay, newEmptyMVar, putMVar, takeMVar)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 53, srcSpanStartColumn = 18, srcSpanEndLine = 53, srcSpanEndColumn = 40}, srcInfoPoints = []}) &quot;Data.Streaming.Network&quot;"><span class="mpre">Data.Streaming.Network</span></span><span class="mpre"> as SN

</span><span class="hl_comment"><span class="mpre">-- | Stream data from the socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function does /not/ automatically close the socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 0.0.0</span></span><span class="mpre">
</span><a href="#loc_61_1_61_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_1_61_13&#39;)"><span class="mpre">sourceSocket</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 60, srcSpanStartColumn = 17, srcSpanEndLine = 60, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 60, srcSpanStartColumn = 27, srcSpanEndLine = 60, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">
</span><a name="loc_61_1_61_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_1_61_13&#39;)"><span class="hl_fundecl"><span class="mpre">sourceSocket</span></span></a><span class="mpre"> </span><a name="loc_61_14_61_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_14_61_20&#39;)"><span class="hl_vardecl"><span class="mpre">socket</span></span></a><span class="mpre"> =
    </span><a href="#loc_64_5_64_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_5_64_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
  where
    </span><a name="loc_64_5_64_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_5_64_9&#39;)"><span class="hl_vardecl"><span class="mpre">loop</span></span></a><span class="mpre"> = do
        </span><a name="loc_65_9_65_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_9_65_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">SN.safeRecv</span></span><span class="mpre"> </span><a href="#loc_61_14_61_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_14_61_20&#39;)"><span class="hl_varref"><span class="mpre">socket</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">4096</span></span><span class="mpre">
        if </span><span class="hl_varref"><span class="mpre">S.null</span></span><span class="mpre"> </span><a href="#loc_65_9_65_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_9_65_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
            then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            else </span><a href="Data.Conduit.html#loc_180_1_180_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_180_1_180_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_65_9_65_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_9_65_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_64_5_64_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_5_64_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Stream data to the socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function does /not/ automatically close the socket.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since 0.0.0</span></span><span class="mpre">
</span><a href="#loc_76_1_76_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_11&#39;)"><span class="mpre">sinkSocket</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 75, srcSpanStartColumn = 15, srcSpanEndLine = 75, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 75, srcSpanStartColumn = 25, srcSpanEndLine = 75, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pul"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Socket</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_76_1_76_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_11&#39;)"><span class="hl_fundecl"><span class="mpre">sinkSocket</span></span></a><span class="mpre"> </span><a name="loc_76_12_76_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_12_76_18&#39;)"><span class="hl_vardecl"><span class="mpre">socket</span></span></a><span class="mpre"> =
    </span><a href="#loc_79_5_79_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_5_79_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
  where
    </span><a name="loc_79_5_79_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_5_79_9&#39;)"><span class="hl_vardecl"><span class="mpre">loop</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.html#loc_168_1_168_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_168_1_168_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_74_1_74_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_74_1_74_6&#39;)"><span class="hl_varref"><span class="mpre">maybe</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) (\</span><a name="loc_79_42_79_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_42_79_44&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sendAll</span></span><span class="mpre"> </span><a href="#loc_76_12_76_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_12_76_18&#39;)"><span class="hl_varref"><span class="mpre">socket</span></span></a><span class="mpre"> </span><a href="#loc_79_42_79_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_42_79_44&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_79_5_79_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_5_79_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">)

</span><a name="loc_81_1_81_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_1_81_15&#39;)"><span class="hl_vardecl"><span class="mpre">serverSettings</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">SN.serverSettingsTCP</span></span><span class="mpre">
</span><a name="loc_82_1_82_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_1_82_15&#39;)"><span class="hl_vardecl"><span class="mpre">clientSettings</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">SN.clientSettingsTCP</span></span><span class="mpre">

</span><a href="#loc_85_1_85_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_10&#39;)"><span class="mpre">appSource</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 84, srcSpanStartColumn = 14, srcSpanEndLine = 84, srcSpanEndColumn = 48}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 84, srcSpanStartColumn = 14, srcSpanEndLine = 84, srcSpanEndColumn = 15},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Netwo"><span class="mpre">(SN.HasReadWrite ad, MonadIO m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ad</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">
</span><a name="loc_85_1_85_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_10&#39;)"><span class="hl_fundecl"><span class="mpre">appSource</span></span></a><span class="mpre"> </span><a name="loc_85_11_85_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_11_85_13&#39;)"><span class="hl_vardecl"><span class="mpre">ad</span></span></a><span class="mpre"> =
    </span><a href="#loc_89_5_89_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_5_89_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
  where
    </span><a name="loc_88_5_88_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_5_88_10&#39;)"><span class="hl_vardecl"><span class="mpre">read&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">SN.appRead</span></span><span class="mpre"> </span><a href="#loc_85_11_85_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_11_85_13&#39;)"><span class="hl_varref"><span class="mpre">ad</span></span></a><span class="mpre">
    </span><a name="loc_89_5_89_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_5_89_9&#39;)"><span class="hl_vardecl"><span class="mpre">loop</span></span></a><span class="mpre"> = do
        </span><a name="loc_90_9_90_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_9_90_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><a href="#loc_88_5_88_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_5_88_10&#39;)"><span class="hl_varref"><span class="mpre">read&#39;</span></span></a><span class="mpre">
        </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">S.null</span></span><span class="mpre"> </span><a href="#loc_90_9_90_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_9_90_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            </span><a href="Data.Conduit.html#loc_180_1_180_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_180_1_180_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_90_9_90_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_9_90_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
            </span><a href="#loc_89_5_89_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_89_5_89_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">

</span><a href="#loc_96_1_96_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_1_96_8&#39;)"><span class="mpre">appSink</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 95, srcSpanStartColumn = 12, srcSpanEndLine = 95, srcSpanEndColumn = 46}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Network.hs&quot;, srcSpanStartLine = 95, srcSpanStartColumn = 12, srcSpanEndLine = 95, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/Data/Conduit/Netwo"><span class="mpre">(SN.HasReadWrite ad, MonadIO m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ad</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_96_1_96_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_1_96_8&#39;)"><span class="hl_fundecl"><span class="mpre">appSink</span></span></a><span class="mpre"> </span><a name="loc_96_9_96_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_9_96_11&#39;)"><span class="hl_vardecl"><span class="mpre">ad</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.html#loc_263_1_263_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_263_1_263_13&#39;)"><span class="hl_varref"><span class="mpre">awaitForever</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_96_30_96_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_30_96_31&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">SN.appWrite</span></span><span class="mpre"> </span><a href="#loc_96_9_96_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_9_96_11&#39;)"><span class="hl_varref"><span class="mpre">ad</span></span></a><span class="mpre"> </span><a href="#loc_96_30_96_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_30_96_31&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">Conc.yield</span></span><span class="mpre">
</span></div></body></html>