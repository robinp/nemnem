<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module         : Data.ByteString.Search.Substitution</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright      : Daniel Fischer</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Licence        : BSD3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer     : Daniel Fischer &lt;daniel.is.fischer@googlemail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability      : Provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability    : portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Class for values to be substituted into strict and lazy &#39;S.ByteString&#39;s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- by the @replace@ functions defined in this package.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
module Data.ByteString.Search.Substitution ( Substitution(..)) where

import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/stringsearch-0.3.6.5/Data/ByteString/Search/Substitution.hs&quot;, srcSpanStartLine = 14, srcSpanStartColumn = 18, srcSpanEndLine = 14, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as S
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/stringsearch-0.3.6.5/Data/ByteString/Search/Substitution.hs&quot;, srcSpanStartLine = 15, srcSpanStartColumn = 18, srcSpanEndLine = 15, srcSpanEndColumn = 38}, srcInfoPoints = []}) &quot;Data.ByteString.Lazy&quot;"><span class="mpre">Data.ByteString.Lazy</span></span><span class="mpre"> as L
import qualified Data.ByteString.Lazy.Internal as LI

</span><span class="hl_comment"><span class="mpre">-- | Type class of meaningful substitutions for replace functions</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   on ByteStrings. Instances for strict and lazy ByteStrings are</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   provided here.</span></span><span class="mpre">
class </span><a name="loc_21_7_21_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_7_21_19&#39;)"><span class="hl_classdecl"><span class="mpre">Substitution</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> where
    </span><span class="hl_comment"><span class="mpre">-- | @&#39;substitution&#39;@ transforms a value to a substitution function.</span></span><span class="mpre">
    </span><a name="loc_23_5_23_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_5_23_17&#39;)"><span class="mpre">substitution</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; ([</span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre">] -&gt; [</span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre">])
    </span><span class="hl_comment"><span class="mpre">-- | @&#39;prependCycle&#39; sub lazyBS@ shall prepend infinitely many copies</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--   of @sub@ to @lazyBS@ without entering an infinite loop in case</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--   of an empty @sub@, so e.g.</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--   &#39;prependCycle&#39; \&quot;\&quot; \&quot;ab\&quot; == \&quot;ab\&quot;</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- shall (quickly) evaluate to &#39;True&#39;.</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- For non-empty @sub@, the cycle shall be constructed efficiently.</span></span><span class="mpre">
    </span><a name="loc_34_5_34_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_17&#39;)"><span class="mpre">prependCycle</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">L.ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">L.ByteString</span></span><span class="mpre">)

instance </span><a href="#loc_21_7_21_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_7_21_19&#39;)"><span class="hl_classref"><span class="mpre">Substitution</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">S.ByteString</span></span><span class="mpre"> where
    </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_23_5_23_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_5_23_17&#39;)"><span class="mpre">substitution</span></a><span class="mpre"> #-}</span></span><span class="mpre">
    </span><a href="#loc_23_5_23_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_5_23_17&#39;)"><span class="hl_fundecl"><span class="mpre">substitution</span></span></a><span class="mpre"> </span><a name="loc_38_18_38_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_18_38_21&#39;)"><span class="hl_vardecl"><span class="mpre">sub</span></span></a><span class="mpre"> = if </span><span class="hl_varref"><span class="mpre">S.null</span></span><span class="mpre"> </span><a href="#loc_38_18_38_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_18_38_21&#39;)"><span class="hl_varref"><span class="mpre">sub</span></span></a><span class="mpre"> then </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> else (</span><a href="#loc_38_18_38_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_18_38_21&#39;)"><span class="hl_varref"><span class="mpre">sub</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">)
    </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_34_5_34_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_17&#39;)"><span class="mpre">prependCycle</span></a><span class="mpre"> #-}</span></span><span class="mpre">
    </span><a href="#loc_34_5_34_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_17&#39;)"><span class="hl_fundecl"><span class="mpre">prependCycle</span></span></a><span class="mpre"> </span><a name="loc_40_18_40_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_18_40_21&#39;)"><span class="hl_vardecl"><span class="mpre">sub</span></span></a><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">S.null</span></span><span class="mpre"> </span><a href="#loc_40_18_40_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_18_40_21&#39;)"><span class="hl_varref"><span class="mpre">sub</span></span></a><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">     = let </span><a name="loc_42_31_42_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_31_42_32&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = </span><a href="Data.ByteString.Lazy.Internal.html#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">LI.Chunk</span></span></a><span class="mpre"> </span><a href="#loc_40_18_40_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_18_40_21&#39;)"><span class="hl_varref"><span class="mpre">sub</span></span></a><span class="mpre"> </span><a href="#loc_42_31_42_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_31_42_32&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> in </span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><a href="#loc_42_31_42_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_31_42_32&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">

instance </span><a href="#loc_21_7_21_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_7_21_19&#39;)"><span class="hl_classref"><span class="mpre">Substitution</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">L.ByteString</span></span><span class="mpre"> where
    </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_23_5_23_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_5_23_17&#39;)"><span class="mpre">substitution</span></a><span class="mpre"> #-}</span></span><span class="mpre">
    </span><a href="#loc_23_5_23_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_5_23_17&#39;)"><span class="hl_fundecl"><span class="mpre">substitution</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_82_19_82_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_82_19_82_24&#39;)"><span class="hl_conref"><span class="mpre">LI.Empty</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
    </span><a href="#loc_23_5_23_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_5_23_17&#39;)"><span class="hl_fundecl"><span class="mpre">substitution</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Lazy.Internal.html#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">LI.Chunk</span></span></a><span class="mpre"> </span><a name="loc_47_28_47_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_28_47_29&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_47_30_47_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_30_47_31&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">) = (</span><a href="#loc_47_28_47_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_28_47_29&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> (</span><a href="Data.ByteString.Lazy.Internal.html#loc_179_1_179_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_179_1_179_12&#39;)"><span class="hl_varref"><span class="mpre">LI.foldrChunks</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">(:)</span></span><span class="mpre">) </span><a href="#loc_47_30_47_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_30_47_31&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
    </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_34_5_34_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_17&#39;)"><span class="mpre">prependCycle</span></a><span class="mpre"> #-}</span></span><span class="mpre">
    </span><a href="#loc_34_5_34_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_17&#39;)"><span class="hl_fundecl"><span class="mpre">prependCycle</span></span></a><span class="mpre"> </span><a name="loc_49_18_49_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_18_49_21&#39;)"><span class="hl_vardecl"><span class="mpre">sub</span></span></a><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">L.null</span></span><span class="mpre"> </span><a href="#loc_49_18_49_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_18_49_21&#39;)"><span class="hl_varref"><span class="mpre">sub</span></span></a><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
    </span><a href="#loc_34_5_34_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_5_34_17&#39;)"><span class="hl_fundecl"><span class="mpre">prependCycle</span></span></a><span class="mpre"> </span><a name="loc_51_18_51_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_18_51_21&#39;)"><span class="hl_vardecl"><span class="mpre">sub</span></span></a><span class="mpre"> = let </span><a name="loc_51_28_51_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_28_51_31&#39;)"><span class="hl_vardecl"><span class="mpre">cyc</span></span></a><span class="mpre"> = </span><a href="Data.ByteString.Lazy.Internal.html#loc_179_1_179_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_179_1_179_12&#39;)"><span class="hl_varref"><span class="mpre">LI.foldrChunks</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">LI.Chunk</span></span></a><span class="mpre"> </span><a href="#loc_51_28_51_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_28_51_31&#39;)"><span class="hl_varref"><span class="mpre">cyc</span></span></a><span class="mpre"> </span><a href="#loc_51_18_51_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_18_51_21&#39;)"><span class="hl_varref"><span class="mpre">sub</span></span></a><span class="mpre"> in </span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><a href="#loc_51_28_51_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_28_51_31&#39;)"><span class="hl_varref"><span class="mpre">cyc</span></span></a><span class="mpre">
</span></div></body></html>