<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE MagicHash, UnboxedTuples, NoImplicitPrelude #-}
module GHC.Integer.Logarithms
    ( integerLogBase#
    , integerLog2#
    , wordLog2#
    ) where

import GHC.Prim
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/integer-gmp-0.5.1.0/GHC/Integer/Logarithms.hs&quot;, srcSpanStartLine = 9, srcSpanStartColumn = 8, srcSpanEndLine = 9, srcSpanEndColumn = 19}, srcInfoPoints = []}) &quot;GHC.Integer&quot;"><span class="mpre">GHC.Integer</span></span><span class="mpre">
import qualified GHC.Integer.Logarithms.Internals as I

</span><span class="hl_comment"><span class="mpre">-- | Calculate the integer logarithm for an arbitrary base.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The base must be greater than 1, the second argument, the number</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   whose logarithm is sought, should be positive, otherwise the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   result is meaningless.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; base ^ integerLogBase# base m &lt;= m &lt; base ^ (integerLogBase# base m + 1)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- for @base &gt; 1@ and @m &gt; 0@.</span></span><span class="mpre">
</span><a href="#loc_21_1_21_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_1_21_16&#39;)"><span class="mpre">integerLogBase#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
</span><a name="loc_21_1_21_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_1_21_16&#39;)"><span class="hl_fundecl"><span class="mpre">integerLogBase#</span></span></a><span class="mpre"> </span><a name="loc_21_17_21_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_17_21_18&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> </span><a name="loc_21_19_21_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_20&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = case </span><a href="#loc_24_5_24_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_5_24_9&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_21_17_21_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_17_21_18&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
                        (# _, </span><a name="loc_22_31_22_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_31_22_32&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> #) -&gt; </span><a href="#loc_22_31_22_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_31_22_32&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">
  where
    </span><a name="loc_24_5_24_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_5_24_9&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_24_10_24_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_10_24_12&#39;)"><span class="hl_vardecl"><span class="mpre">pw</span></span></a><span class="mpre"> =
      if </span><a href="#loc_21_19_21_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_20&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`ltInteger`</span></span><span class="mpre"> </span><a href="#loc_24_10_24_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_10_24_12&#39;)"><span class="hl_varref"><span class="mpre">pw</span></span></a><span class="mpre">
        then (# </span><a href="#loc_21_19_21_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_21_19_21_20&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">, 0# #)
        else case </span><a href="#loc_24_5_24_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_5_24_9&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> (</span><a href="#loc_24_10_24_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_10_24_12&#39;)"><span class="hl_varref"><span class="mpre">pw</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`timesInteger`</span></span><span class="mpre"> </span><a href="#loc_24_10_24_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_10_24_12&#39;)"><span class="hl_varref"><span class="mpre">pw</span></span></a><span class="mpre">) of
               (# </span><a name="loc_28_19_28_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_19_28_20&#39;)"><span class="hl_vardecl"><span class="mpre">q</span></span></a><span class="mpre">, </span><a name="loc_28_22_28_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_22_28_23&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> #) -&gt;
                 if </span><a href="#loc_28_19_28_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_19_28_20&#39;)"><span class="hl_varref"><span class="mpre">q</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`ltInteger`</span></span><span class="mpre"> </span><a href="#loc_24_10_24_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_10_24_12&#39;)"><span class="hl_varref"><span class="mpre">pw</span></span></a><span class="mpre">
                   then (# </span><a href="#loc_28_19_28_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_19_28_20&#39;)"><span class="hl_varref"><span class="mpre">q</span></span></a><span class="mpre">, 2# </span><a href="GHC.Prim.html#loc_1398_1_1398_5" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1398_1_1398_5&#39;)"><span class="hl_infix"><span class="mpre">*#</span></span></a><span class="mpre"> </span><a href="#loc_28_22_28_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_22_28_23&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> #)
                   else (# </span><a href="#loc_28_19_28_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_19_28_20&#39;)"><span class="hl_varref"><span class="mpre">q</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`quotInteger`</span></span><span class="mpre"> </span><a href="#loc_24_10_24_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_10_24_12&#39;)"><span class="hl_varref"><span class="mpre">pw</span></span></a><span class="mpre">, 2# </span><a href="GHC.Prim.html#loc_1398_1_1398_5" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1398_1_1398_5&#39;)"><span class="hl_infix"><span class="mpre">*#</span></span></a><span class="mpre"> </span><a href="#loc_28_22_28_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_28_22_28_23&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><a href="GHC.Prim.html#loc_1388_1_1388_5" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1388_1_1388_5&#39;)"><span class="hl_infix"><span class="mpre">+#</span></span></a><span class="mpre"> 1# #)

</span><span class="hl_comment"><span class="mpre">-- | Calculate the integer base 2 logarithm of an &#39;Integer&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   The calculation is more efficient than for the general case,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   on platforms with 32- or 64-bit words much more efficient.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  The argument must be strictly positive, that condition is /not/ checked.</span></span><span class="mpre">
</span><a href="#loc_39_1_39_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_1_39_13&#39;)"><span class="mpre">integerLog2#</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
</span><a name="loc_39_1_39_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_1_39_13&#39;)"><span class="hl_vardecl"><span class="mpre">integerLog2#</span></span></a><span class="mpre"> = </span><a href="GHC.Integer.Logarithms.Internals.html#loc_48_1_48_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Integer.Logarithms.Internals.html#loc_48_1_48_13&#39;)"><span class="hl_varref"><span class="mpre">I.integerLog2#</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This function calculates the integer base 2 logarithm of a &#39;Word#&#39;.</span></span><span class="mpre">
</span><a href="#loc_43_1_43_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_1_43_10&#39;)"><span class="mpre">wordLog2#</span></a><span class="mpre"> :: </span><a href="GHC.Prim.html#loc_1526_6_1526_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1526_6_1526_11&#39;)"><span class="hl_tyconref"><span class="mpre">Word#</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.Prim.html#loc_1384_6_1384_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Prim.html#loc_1384_6_1384_10&#39;)"><span class="hl_tyconref"><span class="mpre">Int#</span></span></a><span class="mpre">
</span><a name="loc_43_1_43_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_1_43_10&#39;)"><span class="hl_vardecl"><span class="mpre">wordLog2#</span></span></a><span class="mpre"> = </span><a href="GHC.Integer.Logarithms.Internals.html#loc_39_1_39_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Integer.Logarithms.Internals.html#loc_39_1_39_10&#39;)"><span class="hl_varref"><span class="mpre">I.wordLog2#</span></span></a><span class="mpre">
</span></div></body></html>