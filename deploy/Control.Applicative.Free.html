<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE Rank2Types #-}
{-# LANGUAGE GADTs #-}
#if __GLASGOW_HASKELL__ &gt;= 707
{-# LANGUAGE DeriveDataTypeable #-}
#endif
{-# OPTIONS_GHC -Wall #-}
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Applicative.Free</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2012-2013 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  GADTs, Rank2Types</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Applicative&#39; functors for free</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Applicative.Free
  (
  </span><span class="hl_comment"><span class="mpre">-- | Compared to the free monad, they are less expressive. However, they are also more</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- flexible to inspect and interpret, as the number of ways in which</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- the values can be nested is more limited.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- See &lt;http://paolocapriotti.com/assets/applicative.pdf Free Applicative Functors&gt;,</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- by Paolo Capriotti and Ambrus Kaposi, for some applications.</span></span><span class="mpre">

    Ap(..)
  , runAp
  , runAp_
  , liftAp
  , hoistAp
  , retractAp

  </span><span class="hl_comment"><span class="mpre">-- * Examples</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- $examples</span></span><span class="mpre">
  ) where

import Control.Applicative
import Data.Functor.Apply
import Data.Typeable
import Data.Monoid

</span><span class="hl_comment"><span class="mpre">-- | The free &#39;Applicative&#39; for a &#39;Functor&#39; @f@.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclGDataDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 1, srcSpanEndLine = 50, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 13, srcSpanEndLine = 46, srcSpanEndColumn = 18},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, "><span class="mpre">data Ap f a where
  Pure :: a -&gt; Ap f a
  Ap   :: f a -&gt; Ap f (a -&gt; b) -&gt; Ap f b
#if __GLASGOW_HASKELL__ &gt;= 707
  deriving Typeable</span></span><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">-- | Given a natural transformation from @f@ to @g@, this gives a canonical monoidal natural transformation from @&#39;Ap&#39; f@ to @g@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- prop&gt; runAp t == retractApp . hoistApp t</span></span><span class="mpre">
</span><a href="#loc_57_1_57_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_1_57_6&#39;)"><span class="mpre">runAp</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 56, srcSpanStartColumn = 10, srcSpanEndLine = 56, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 56, srcSpanStartColumn = 24, srcSpanEndLine = 56, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free"><span class="mpre">Applicative g =&gt;</span></span><span class="mpre"> (forall </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">. </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">g</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">g</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_57_1_57_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_1_57_6&#39;)"><span class="hl_fundecl"><span class="mpre">runAp</span></span></a><span class="mpre"> _ (</span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> </span><a name="loc_57_15_57_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_15_57_16&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a href="#loc_57_15_57_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_15_57_16&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
</span><a href="#loc_57_1_57_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_1_57_6&#39;)"><span class="hl_fundecl"><span class="mpre">runAp</span></span></a><span class="mpre"> </span><a name="loc_58_7_58_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_7_58_8&#39;)"><span class="hl_vardecl"><span class="mpre">u</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a name="loc_58_13_58_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_13_58_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_58_15_58_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_15_58_16&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_58_7_58_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_7_58_8&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre"> </span><a href="#loc_58_13_58_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_13_58_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;*&gt;</span></span></a><span class="mpre"> </span><a href="#loc_57_1_57_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_1_57_6&#39;)"><span class="hl_varref"><span class="mpre">runAp</span></span></a><span class="mpre"> </span><a href="#loc_58_7_58_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_7_58_8&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre"> </span><a href="#loc_58_15_58_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_15_58_16&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform a monoidal analysis over free applicative value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Example:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- count :: Ap f a -&gt; Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- count = getSum . runAp_ (\\_ -&gt; Sum 1)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_69_1_69_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_7&#39;)"><span class="mpre">runAp_</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 11, srcSpanEndLine = 68, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 20, srcSpanEndLine = 68, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free"><span class="mpre">Monoid m =&gt;</span></span><span class="mpre"> (forall </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">. </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">
</span><a name="loc_69_1_69_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_7&#39;)"><span class="hl_fundecl"><span class="mpre">runAp_</span></span></a><span class="mpre"> </span><a name="loc_69_8_69_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_8_69_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_57_1_57_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_1_57_6&#39;)"><span class="hl_varref"><span class="mpre">runAp</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_69_8_69_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_8_69_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)

instance </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><a name="loc_72_3_72_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_3_72_7&#39;)"><span class="hl_fundecl"><span class="mpre">fmap</span></span></a><span class="mpre"> </span><a name="loc_72_8_72_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_8_72_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> </span><a name="loc_72_16_72_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_16_72_17&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">)   = </span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> (</span><a href="#loc_72_8_72_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_8_72_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_72_16_72_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_16_72_17&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
  </span><a href="#loc_72_3_72_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_3_72_7&#39;)"><span class="hl_fundecl"><span class="mpre">fmap</span></span></a><span class="mpre"> </span><a name="loc_73_8_73_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_8_73_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a name="loc_73_14_73_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_14_73_15&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_73_16_73_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_16_73_17&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">)   = </span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a href="#loc_73_14_73_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_14_73_15&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> ((</span><a href="#loc_73_8_73_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_8_73_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre">) </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_73_16_73_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_16_73_17&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">)

instance </span><a href="Data.Functor.Bind.html#loc_98_20_98_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Bind.html#loc_98_20_98_25&#39;)"><span class="hl_classref"><span class="mpre">Apply</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> </span><a name="loc_76_8_76_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_8_76_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_76_10_76_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_10_76_13&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;.&gt;</span></span></a><span class="mpre"> </span><a name="loc_76_14_76_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_14_76_15&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_76_8_76_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_8_76_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_76_14_76_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_14_76_15&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">
  </span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a name="loc_77_6_77_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_6_77_7&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_77_8_77_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_8_77_9&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre"> </span><a href="#loc_76_10_76_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_10_76_13&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;.&gt;</span></span></a><span class="mpre"> </span><a name="loc_77_14_77_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_14_77_15&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a href="#loc_77_6_77_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_6_77_7&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_77_8_77_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_8_77_9&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="#loc_77_14_77_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_14_77_15&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre">)

instance </span><a href="Control.Applicative.html#loc_113_20_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_113_20_113_31&#39;)"><span class="hl_classref"><span class="mpre">Applicative</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_vardecl"><span class="mpre">pure</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre">
  </span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> </span><a name="loc_81_8_81_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_8_81_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;*&gt;</span></span></a><span class="mpre"> </span><a name="loc_81_14_81_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_14_81_15&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_81_8_81_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_8_81_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_81_14_81_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_14_81_15&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">
  </span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a name="loc_82_6_82_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_7&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_82_8_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_8_82_9&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;*&gt;</span></span></a><span class="mpre"> </span><a name="loc_82_14_82_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_14_82_15&#39;)"><span class="hl_vardecl"><span class="mpre">z</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a href="#loc_82_6_82_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_6_82_7&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_82_8_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_8_82_9&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_infix"><span class="mpre">&lt;*&gt;</span></span></a><span class="mpre"> </span><a href="#loc_82_14_82_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_14_82_15&#39;)"><span class="hl_varref"><span class="mpre">z</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | A version of &#39;lift&#39; that can be used with just a &#39;Functor&#39; for @f@.</span></span><span class="mpre">
</span><a href="#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_1_86_7&#39;)"><span class="mpre">liftAp</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_86_1_86_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_1_86_7&#39;)"><span class="hl_fundecl"><span class="mpre">liftAp</span></span></a><span class="mpre"> </span><a name="loc_86_8_86_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_8_86_9&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a href="#loc_86_8_86_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_8_86_9&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_1_86_7&#39;)"><span class="mpre">liftAp</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Given a natural transformation from @f@ to @g@ this gives a monoidal natural transformation from @Ap f@ to @Ap g@.</span></span><span class="mpre">
</span><a href="#loc_91_1_91_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_8&#39;)"><span class="mpre">hoistAp</span></a><span class="mpre"> :: (forall </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">. </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">g</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">g</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_91_1_91_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_8&#39;)"><span class="hl_fundecl"><span class="mpre">hoistAp</span></span></a><span class="mpre"> _ (</span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> </span><a name="loc_91_17_91_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_17_91_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> </span><a href="#loc_91_17_91_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_17_91_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
</span><a href="#loc_91_1_91_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_8&#39;)"><span class="hl_fundecl"><span class="mpre">hoistAp</span></span></a><span class="mpre"> </span><a name="loc_92_9_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_9_92_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a name="loc_92_15_92_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_15_92_16&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_92_17_92_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_17_92_18&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> (</span><a href="#loc_92_9_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_9_92_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_92_15_92_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_15_92_16&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) (</span><a href="#loc_91_1_91_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_8&#39;)"><span class="hl_varref"><span class="mpre">hoistAp</span></span></a><span class="mpre"> </span><a href="#loc_92_9_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_9_92_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_92_17_92_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_17_92_18&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Interprets the free applicative functor over f using the semantics for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   `pure` and `&lt;*&gt;` given by the Applicative instance for f.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   prop&gt; retractApp == runAp id</span></span><span class="mpre">
</span><a href="#loc_99_1_99_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_10&#39;)"><span class="mpre">retractAp</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 98, srcSpanStartColumn = 14, srcSpanEndLine = 98, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 98, srcSpanStartColumn = 28, srcSpanEndLine = 98, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free"><span class="mpre">Applicative f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_99_1_99_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_10&#39;)"><span class="hl_fundecl"><span class="mpre">retractAp</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Pure</span></span><span class="mpre"> </span><a name="loc_99_17_99_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_17_99_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">) = </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a href="#loc_99_17_99_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_17_99_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
</span><a href="#loc_99_1_99_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_10&#39;)"><span class="hl_fundecl"><span class="mpre">retractAp</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Ap</span></span><span class="mpre"> </span><a name="loc_100_15_100_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_15_100_16&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_100_17_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_17_100_18&#39;)"><span class="hl_vardecl"><span class="mpre">y</span></span></a><span class="mpre">) = </span><a href="#loc_100_15_100_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_15_100_16&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_308_1_308_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_308_1_308_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;**&gt;</span></span></a><span class="mpre"> </span><a href="#loc_99_1_99_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_1_99_10&#39;)"><span class="hl_varref"><span class="mpre">retractAp</span></span></a><span class="mpre"> </span><a href="#loc_100_17_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_17_100_18&#39;)"><span class="hl_varref"><span class="mpre">y</span></span></a><span class="mpre">

#if __GLASGOW_HASKELL__ &lt; 707
instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 103, srcSpanStartColumn = 10, srcSpanEndLine = 103, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Applicative/Free.hs&quot;, srcSpanStartLine = 103, srcSpanStartColumn = 22, srcSpanEndLine = 103, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Typeable1 f =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Typeable1</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) where
  </span><a href="Data.Typeable.Internal.html#loc_212_1_212_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_212_1_212_8&#39;)"><span class="hl_fundecl"><span class="mpre">typeOf1</span></span></a><span class="mpre"> </span><a name="loc_104_11_104_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_11_104_12&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Typeable.Internal.html#loc_122_1_122_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_122_1_122_11&#39;)"><span class="hl_varref"><span class="mpre">mkTyConApp</span></span></a><span class="mpre"> </span><a href="#loc_110_1_110_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_1_110_8&#39;)"><span class="hl_varref"><span class="mpre">apTyCon</span></span></a><span class="mpre"> [</span><a href="Data.Typeable.Internal.html#loc_212_1_212_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_212_1_212_8&#39;)"><span class="hl_varref"><span class="mpre">typeOf1</span></span></a><span class="mpre"> (</span><a href="#loc_106_5_106_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_5_106_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_104_11_104_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_11_104_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)] where
    </span><a href="#loc_106_5_106_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_5_106_6&#39;)"><span class="mpre">f</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Ap</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
    </span><a name="loc_106_5_106_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_5_106_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">undefined</span></span><span class="mpre">

</span><a href="#loc_110_1_110_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_1_110_8&#39;)"><span class="mpre">apTyCon</span></a><span class="mpre"> :: </span><a href="Data.Typeable.Internal.html#loc_89_6_89_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_89_6_89_11&#39;)"><span class="hl_tyconref"><span class="mpre">TyCon</span></span></a><span class="mpre">
#if __GLASGOW_HASKELL__ &lt; 704
</span><a name="loc_110_1_110_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_1_110_8&#39;)"><span class="hl_vardecl"><span class="mpre">apTyCon</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">mkTyCon</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Control.Applicative.Free.Ap&quot;</span></span><span class="mpre">
#else
</span><span class="hl_vardecl"><span class="mpre">apTyCon</span></span><span class="mpre"> = </span><a href="Data.Typeable.Internal.html#loc_170_1_170_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Typeable.Internal.html#loc_170_1_170_9&#39;)"><span class="hl_varref"><span class="mpre">mkTyCon3</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;free&quot;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Control.Applicative.Free&quot;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Ap&quot;</span></span><span class="mpre">
#endif
</span><span class="hl_pragma"><span class="mpre">{-# NOINLINE </span><a href="#loc_110_1_110_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_1_110_8&#39;)"><span class="mpre">apTyCon</span></a><span class="mpre"> #-}</span></span><span class="mpre">

#endif

</span><span class="hl_comment"><span class="mpre">{- $examples

&lt;examples/ValidationForm.hs Validation form&gt;

-}</span></span><span class="mpre">
</span></div></body></html>