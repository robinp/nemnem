<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE OverloadedStrings #-}

module System.IO.Streams.Tests.Builder (tests) where

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
import           Blaze.ByteString.Builder
import           Blaze.ByteString.Builder.Internal.Buffer
import           Control.Monad
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/io-streams-1.1.4.6/test/System/IO/Streams/Tests/Builder.hs&quot;, srcSpanStartLine = 9, srcSpanStartColumn = 18, srcSpanEndLine = 9, srcSpanEndColumn = 39}, srcInfoPoints = []}) &quot;Data.ByteString.Char8&quot;"><span class="mpre">Data.ByteString.Char8</span></span><span class="mpre">                    as S
import           Data.List
import           Data.Monoid
import           System.IO.Streams                        hiding
                                                           (</span><a href="System.IO.Streams.ByteString.html#loc_99_1_99_15" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.ByteString.html#loc_99_1_99_15&#39;)"><span class="mpre">fromByteString</span></a><span class="mpre">,
                                                           </span><a href="System.IO.Streams.Combinators.html#loc_502_1_502_12" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Combinators.html#loc_502_1_502_12&#39;)"><span class="mpre">intersperse</span></a><span class="mpre">, </span><a href="System.IO.Streams.Combinators.html#loc_319_1_319_4" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Combinators.html#loc_319_1_319_4&#39;)"><span class="mpre">map</span></a><span class="mpre">,
                                                           </span><a href="System.IO.Streams.Combinators.html#loc_672_1_672_5" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Combinators.html#loc_672_1_672_5&#39;)"><span class="mpre">take</span></a><span class="mpre">)
import           </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/io-streams-1.1.4.6/test/System/IO/Streams/Tests/Builder.hs&quot;, srcSpanStartLine = 16, srcSpanStartColumn = 18, srcSpanEndLine = 16, srcSpanEndColumn = 32}, srcInfoPoints = []}) &quot;Test.Framework&quot;"><span class="mpre">Test.Framework</span></span><span class="mpre">
import           </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/io-streams-1.1.4.6/test/System/IO/Streams/Tests/Builder.hs&quot;, srcSpanStartLine = 17, srcSpanStartColumn = 18, srcSpanEndLine = 17, srcSpanEndColumn = 48}, srcInfoPoints = []}) &quot;Test.Framework.Providers.HUnit&quot;"><span class="mpre">Test.Framework.Providers.HUnit</span></span><span class="mpre">
import           </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/io-streams-1.1.4.6/test/System/IO/Streams/Tests/Builder.hs&quot;, srcSpanStartLine = 18, srcSpanStartColumn = 18, srcSpanEndLine = 18, srcSpanEndColumn = 28}, srcInfoPoints = []}) &quot;Test.HUnit&quot;"><span class="mpre">Test.HUnit</span></span><span class="mpre">                               hiding (Test)
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><a href="#loc_22_1_22_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_1_22_6&#39;)"><span class="mpre">tests</span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">Test</span></span><span class="mpre">]
</span><a name="loc_22_1_22_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_1_22_6&#39;)"><span class="hl_vardecl"><span class="mpre">tests</span></span></a><span class="mpre"> = [ </span><a href="#loc_32_1_32_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_18&#39;)"><span class="hl_varref"><span class="mpre">testBuilderStream</span></span></a><span class="mpre">
        , </span><a href="#loc_53_1_53_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_1_53_24&#39;)"><span class="hl_varref"><span class="mpre">testUnsafeBuilderStream</span></span></a><span class="mpre">
        , </span><a href="#loc_75_1_75_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_16&#39;)"><span class="hl_varref"><span class="mpre">testSmallBuffer</span></span></a><span class="mpre">
        , </span><a href="#loc_92_1_92_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_31&#39;)"><span class="hl_varref"><span class="mpre">testSmallBufferWithLargeOutput</span></span></a><span class="mpre">
        , </span><a href="#loc_120_1_120_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_15&#39;)"><span class="hl_varref"><span class="mpre">testNullStream</span></span></a><span class="mpre">
        ]


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><a href="#loc_32_1_32_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_18&#39;)"><span class="mpre">testBuilderStream</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Test</span></span><span class="mpre">
</span><a name="loc_32_1_32_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_1_32_18&#39;)"><span class="hl_vardecl"><span class="mpre">testBuilderStream</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">testCase</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;builder/builderStream&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    let </span><a name="loc_33_9_33_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_9_33_11&#39;)"><span class="hl_vardecl"><span class="mpre">l1</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_427_1_427_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_427_1_427_12&#39;)"><span class="hl_varref"><span class="mpre">intersperse</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; &quot;</span></span><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;the&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;quick&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;brown&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;fox&quot;</span></span><span class="mpre">]
    let </span><a name="loc_34_9_34_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_9_34_11&#39;)"><span class="hl_vardecl"><span class="mpre">l2</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_427_1_427_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_427_1_427_12&#39;)"><span class="hl_varref"><span class="mpre">intersperse</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; &quot;</span></span><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;jumped&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;over&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;the&quot;</span></span><span class="mpre">]
    let </span><a name="loc_35_9_35_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_9_35_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">  = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><a href="#loc_33_9_33_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_9_33_11&#39;)"><span class="hl_varref"><span class="mpre">l1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [</span><a href="Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6&#39;)"><span class="hl_varref"><span class="mpre">flush</span></span></a><span class="mpre">] </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><a href="#loc_34_9_34_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_9_34_11&#39;)"><span class="hl_varref"><span class="mpre">l2</span></span></a><span class="mpre">

    </span><a name="loc_37_5_37_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_5_37_7&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">          &lt;- </span><a href="System.IO.Streams.List.html#loc_36_1_36_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_36_1_36_9&#39;)"><span class="hl_varref"><span class="mpre">fromList</span></span></a><span class="mpre"> </span><a href="#loc_35_9_35_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_9_35_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
    (</span><a name="loc_38_6_38_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_6_38_9&#39;)"><span class="hl_vardecl"><span class="mpre">os0</span></span></a><span class="mpre">, </span><a name="loc_38_11_38_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_11_38_15&#39;)"><span class="hl_vardecl"><span class="mpre">grab</span></span></a><span class="mpre">) &lt;- </span><a href="System.IO.Streams.List.html#loc_65_1_65_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_65_1_65_17&#39;)"><span class="hl_varref"><span class="mpre">listOutputStream</span></span></a><span class="mpre">
    </span><a name="loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre">          &lt;- </span><a href="System.IO.Streams.Builder.html#loc_94_1_94_14" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Builder.html#loc_94_1_94_14&#39;)"><span class="hl_varref"><span class="mpre">builderStream</span></span></a><span class="mpre"> </span><a href="#loc_38_6_38_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_6_38_9&#39;)"><span class="hl_varref"><span class="mpre">os0</span></span></a><span class="mpre">

    </span><a href="System.IO.Streams.Internal.html#loc_188_1_188_8" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_188_1_188_8&#39;)"><span class="hl_varref"><span class="mpre">connect</span></span></a><span class="mpre"> </span><a href="#loc_37_5_37_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_37_5_37_7&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><a href="#loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">
    </span><a name="loc_42_5_42_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_5_42_11&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_38_11_38_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_11_38_15&#39;)"><span class="hl_varref"><span class="mpre">grab</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertEqual</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;properly buffered&quot;</span></span><span class="mpre">
                [ </span><span class="hl_string"><span class="mpre">&quot;the quick brown fox&quot;</span></span><span class="mpre">
                , </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">
                , </span><span class="hl_string"><span class="mpre">&quot;jumped over the&quot;</span></span><span class="mpre">
                ]
                </span><a href="#loc_42_5_42_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_5_42_11&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><a href="#loc_53_1_53_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_1_53_24&#39;)"><span class="mpre">testUnsafeBuilderStream</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Test</span></span><span class="mpre">
</span><a name="loc_53_1_53_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_1_53_24&#39;)"><span class="hl_vardecl"><span class="mpre">testUnsafeBuilderStream</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">testCase</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;builder/unsafeBuilderStream&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    let </span><a name="loc_54_9_54_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_9_54_11&#39;)"><span class="hl_vardecl"><span class="mpre">l1</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_427_1_427_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_427_1_427_12&#39;)"><span class="hl_varref"><span class="mpre">intersperse</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; &quot;</span></span><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;the&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;quick&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;brown&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;fox&quot;</span></span><span class="mpre">]
    let </span><a name="loc_55_9_55_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_9_55_11&#39;)"><span class="hl_vardecl"><span class="mpre">l2</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_427_1_427_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_427_1_427_12&#39;)"><span class="hl_varref"><span class="mpre">intersperse</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; &quot;</span></span><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;jumped&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;over&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;the&quot;</span></span><span class="mpre">]
    let </span><a name="loc_56_9_56_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_9_56_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">  = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><a href="#loc_54_9_54_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_9_54_11&#39;)"><span class="hl_varref"><span class="mpre">l1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [</span><a href="Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6&#39;)"><span class="hl_varref"><span class="mpre">flush</span></span></a><span class="mpre">] </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><a href="#loc_55_9_55_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_9_55_11&#39;)"><span class="hl_varref"><span class="mpre">l2</span></span></a><span class="mpre">

    </span><a name="loc_58_5_58_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_5_58_7&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">          &lt;- </span><a href="System.IO.Streams.List.html#loc_36_1_36_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_36_1_36_9&#39;)"><span class="hl_varref"><span class="mpre">fromList</span></span></a><span class="mpre"> </span><a href="#loc_56_9_56_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_9_56_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
    (</span><a name="loc_59_6_59_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_6_59_9&#39;)"><span class="hl_vardecl"><span class="mpre">os0</span></span></a><span class="mpre">, </span><a name="loc_59_11_59_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_11_59_15&#39;)"><span class="hl_vardecl"><span class="mpre">grab</span></span></a><span class="mpre">) &lt;- </span><a href="System.IO.Streams.List.html#loc_65_1_65_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_65_1_65_17&#39;)"><span class="hl_varref"><span class="mpre">listOutputStream</span></span></a><span class="mpre">
    </span><a name="loc_60_5_60_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_5_60_8&#39;)"><span class="hl_vardecl"><span class="mpre">os1</span></span></a><span class="mpre">         &lt;- </span><a href="System.IO.Streams.Combinators.html#loc_398_1_398_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Combinators.html#loc_398_1_398_11&#39;)"><span class="hl_varref"><span class="mpre">contramapM</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">S.copy</span></span><span class="mpre">) </span><a href="#loc_59_6_59_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_6_59_9&#39;)"><span class="hl_varref"><span class="mpre">os0</span></span></a><span class="mpre">

    </span><a name="loc_62_5_62_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_5_62_7&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre">          &lt;- </span><a href="System.IO.Streams.Builder.html#loc_118_1_118_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Builder.html#loc_118_1_118_20&#39;)"><span class="hl_varref"><span class="mpre">unsafeBuilderStream</span></span></a><span class="mpre"> (</span><a href="Blaze.ByteString.Builder.Internal.Buffer.html#loc_92_1_92_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Buffer.html#loc_92_1_92_12&#39;)"><span class="hl_varref"><span class="mpre">allocBuffer</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1024</span></span><span class="mpre">) </span><a href="#loc_60_5_60_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_5_60_8&#39;)"><span class="hl_varref"><span class="mpre">os1</span></span></a><span class="mpre">

    </span><a href="System.IO.Streams.Internal.html#loc_188_1_188_8" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_188_1_188_8&#39;)"><span class="hl_varref"><span class="mpre">connect</span></span></a><span class="mpre"> </span><a href="#loc_58_5_58_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_5_58_7&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><a href="#loc_62_5_62_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_5_62_7&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">
    </span><a name="loc_65_5_65_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_5_65_11&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_59_11_59_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_11_59_15&#39;)"><span class="hl_varref"><span class="mpre">grab</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertEqual</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;properly buffered&quot;</span></span><span class="mpre">
                [ </span><span class="hl_string"><span class="mpre">&quot;the quick brown fox&quot;</span></span><span class="mpre">
                , </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">
                , </span><span class="hl_string"><span class="mpre">&quot;jumped over the&quot;</span></span><span class="mpre">
                ]
                </span><a href="#loc_65_5_65_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_5_65_11&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><a href="#loc_75_1_75_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_16&#39;)"><span class="mpre">testSmallBuffer</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Test</span></span><span class="mpre">
</span><a name="loc_75_1_75_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_16&#39;)"><span class="hl_vardecl"><span class="mpre">testSmallBuffer</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">testCase</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;builder/smallBuffer&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    (</span><a name="loc_76_6_76_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_6_76_9&#39;)"><span class="hl_vardecl"><span class="mpre">os0</span></span></a><span class="mpre">, </span><a name="loc_76_11_76_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_11_76_15&#39;)"><span class="hl_vardecl"><span class="mpre">grab</span></span></a><span class="mpre">) &lt;- </span><a href="System.IO.Streams.List.html#loc_65_1_65_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_65_1_65_17&#39;)"><span class="hl_varref"><span class="mpre">listOutputStream</span></span></a><span class="mpre">
    </span><a name="loc_77_5_77_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_5_77_7&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre">          &lt;- </span><a href="System.IO.Streams.Builder.html#loc_127_1_127_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Builder.html#loc_127_1_127_18&#39;)"><span class="hl_varref"><span class="mpre">builderStreamWith</span></span></a><span class="mpre"> (</span><a href="Blaze.ByteString.Builder.Internal.Buffer.html#loc_167_1_167_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Buffer.html#loc_167_1_167_22&#39;)"><span class="hl_varref"><span class="mpre">allNewBuffersStrategy</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">10</span></span><span class="mpre">) </span><a href="#loc_76_6_76_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_6_76_9&#39;)"><span class="hl_varref"><span class="mpre">os0</span></span></a><span class="mpre">
    let </span><a name="loc_78_9_78_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_9_78_11&#39;)"><span class="hl_vardecl"><span class="mpre">l1</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_427_1_427_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_427_1_427_12&#39;)"><span class="hl_varref"><span class="mpre">intersperse</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; &quot;</span></span><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;the&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;quick&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;brown&quot;</span></span><span class="mpre">]
    let </span><a name="loc_79_9_79_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_9_79_11&#39;)"><span class="hl_vardecl"><span class="mpre">l2</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot; fooooooooooooooooox&quot;</span></span><span class="mpre">]
    let </span><a name="loc_80_9_80_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_9_80_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><a href="#loc_78_9_78_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_9_78_11&#39;)"><span class="hl_varref"><span class="mpre">l1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [</span><a href="Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6&#39;)"><span class="hl_varref"><span class="mpre">flush</span></span></a><span class="mpre">, </span><a href="Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6&#39;)"><span class="hl_varref"><span class="mpre">flush</span></span></a><span class="mpre">, </span><a href="Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6&#39;)"><span class="hl_varref"><span class="mpre">flush</span></span></a><span class="mpre">]
              </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><a href="#loc_79_9_79_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_9_79_11&#39;)"><span class="hl_varref"><span class="mpre">l2</span></span></a><span class="mpre">

    </span><a name="loc_83_5_83_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_5_83_7&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">          &lt;- </span><a href="System.IO.Streams.List.html#loc_36_1_36_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_36_1_36_9&#39;)"><span class="hl_varref"><span class="mpre">fromList</span></span></a><span class="mpre"> </span><a href="#loc_80_9_80_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_80_9_80_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
    </span><a href="System.IO.Streams.Internal.html#loc_188_1_188_8" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_188_1_188_8&#39;)"><span class="hl_varref"><span class="mpre">connect</span></span></a><span class="mpre"> </span><a href="#loc_83_5_83_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_5_83_7&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><a href="#loc_77_5_77_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_5_77_7&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">
    </span><a name="loc_85_5_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_5_85_11&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">S.concat</span></span><span class="mpre"> </span><a href="#loc_76_11_76_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_11_76_15&#39;)"><span class="hl_varref"><span class="mpre">grab</span></span></a><span class="mpre">

    </span><span class="hl_varref"><span class="mpre">assertEqual</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;short buffer&quot;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;the quick brown fooooooooooooooooox&quot;</span></span><span class="mpre"> </span><a href="#loc_85_5_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_5_85_11&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><a href="#loc_92_1_92_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_31&#39;)"><span class="mpre">testSmallBufferWithLargeOutput</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Test</span></span><span class="mpre">
</span><a name="loc_92_1_92_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_31&#39;)"><span class="hl_vardecl"><span class="mpre">testSmallBufferWithLargeOutput</span></span></a><span class="mpre"> =
    </span><span class="hl_varref"><span class="mpre">testCase</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;builder/smallBufferWithLargeOutput&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
        (</span><a name="loc_94_10_94_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_10_94_13&#39;)"><span class="hl_vardecl"><span class="mpre">os0</span></span></a><span class="mpre">, </span><a name="loc_94_15_94_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_15_94_19&#39;)"><span class="hl_vardecl"><span class="mpre">grab</span></span></a><span class="mpre">) &lt;- </span><a href="System.IO.Streams.List.html#loc_65_1_65_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_65_1_65_17&#39;)"><span class="hl_varref"><span class="mpre">listOutputStream</span></span></a><span class="mpre">
        </span><a name="loc_95_9_95_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_9_95_12&#39;)"><span class="hl_vardecl"><span class="mpre">os1</span></span></a><span class="mpre">         &lt;- </span><a href="System.IO.Streams.Combinators.html#loc_398_1_398_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Combinators.html#loc_398_1_398_11&#39;)"><span class="hl_varref"><span class="mpre">contramapM</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">S.copy</span></span><span class="mpre">) </span><a href="#loc_94_10_94_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_10_94_13&#39;)"><span class="hl_varref"><span class="mpre">os0</span></span></a><span class="mpre">
        </span><a name="loc_96_9_96_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_9_96_11&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre">          &lt;- </span><a href="System.IO.Streams.Builder.html#loc_118_1_118_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Builder.html#loc_118_1_118_20&#39;)"><span class="hl_varref"><span class="mpre">unsafeBuilderStream</span></span></a><span class="mpre"> (</span><a href="Blaze.ByteString.Builder.Internal.Buffer.html#loc_92_1_92_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Buffer.html#loc_92_1_92_12&#39;)"><span class="hl_varref"><span class="mpre">allocBuffer</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">10</span></span><span class="mpre">) </span><a href="#loc_95_9_95_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_9_95_12&#39;)"><span class="hl_varref"><span class="mpre">os1</span></span></a><span class="mpre">

        let </span><a name="loc_98_13_98_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_13_98_14&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">take</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">3000</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cycle</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                </span><span class="hl_varref"><span class="mpre">replicate</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">20</span></span><span class="mpre"> (</span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;bloooooooort&quot;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [</span><a href="Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6&#39;)"><span class="hl_varref"><span class="mpre">flush</span></span></a><span class="mpre">]

        </span><a name="loc_101_9_101_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_9_101_11&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre"> &lt;- </span><a href="System.IO.Streams.List.html#loc_36_1_36_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_36_1_36_9&#39;)"><span class="hl_varref"><span class="mpre">fromList</span></span></a><span class="mpre"> </span><a href="#loc_98_13_98_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_13_98_14&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
        let </span><a name="loc_102_13_102_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_13_102_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="Blaze.ByteString.Builder.Internal.html#loc_299_1_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_299_1_299_13&#39;)"><span class="hl_varref"><span class="mpre">toByteString</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><a href="#loc_98_13_98_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_13_98_14&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">

        </span><a href="System.IO.Streams.Internal.html#loc_188_1_188_8" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_188_1_188_8&#39;)"><span class="hl_varref"><span class="mpre">connect</span></span></a><span class="mpre"> </span><a href="#loc_101_9_101_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_9_101_11&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><a href="#loc_96_9_96_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_9_96_11&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">
        </span><a name="loc_105_9_105_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_9_105_15&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">S.concat</span></span><span class="mpre"> </span><a href="#loc_94_15_94_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_15_94_19&#39;)"><span class="hl_varref"><span class="mpre">grab</span></span></a><span class="mpre">

        </span><span class="hl_varref"><span class="mpre">assertEqual</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;short buffer 2&quot;</span></span><span class="mpre"> </span><a href="#loc_102_13_102_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_13_102_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><a href="#loc_105_9_105_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_9_105_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">

        </span><a href="System.IO.Streams.Internal.html#loc_147_1_147_6" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_147_1_147_6&#39;)"><span class="hl_varref"><span class="mpre">write</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;ok&quot;</span></span><span class="mpre">) </span><a href="#loc_96_9_96_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_9_96_11&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">
        </span><a href="System.IO.Streams.Internal.html#loc_147_1_147_6" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_147_1_147_6&#39;)"><span class="hl_varref"><span class="mpre">write</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> </span><a href="#loc_96_9_96_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_9_96_11&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">

        </span><a name="loc_112_9_112_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_13&#39;)"><span class="hl_vardecl"><span class="mpre">fout</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_94_15_94_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_15_94_19&#39;)"><span class="hl_varref"><span class="mpre">grab</span></span></a><span class="mpre">

        </span><span class="hl_comment"><span class="mpre">-- no output should be sent because of nullSink</span></span><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">assertEqual</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;nullSink&quot;</span></span><span class="mpre"> [] </span><a href="#loc_112_9_112_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_13&#39;)"><span class="hl_varref"><span class="mpre">fout</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><a href="#loc_120_1_120_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_15&#39;)"><span class="mpre">testNullStream</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Test</span></span><span class="mpre">
</span><a name="loc_120_1_120_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_120_1_120_15&#39;)"><span class="hl_vardecl"><span class="mpre">testNullStream</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">testCase</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;builder/nullStream&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    (</span><a name="loc_121_6_121_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_6_121_9&#39;)"><span class="hl_vardecl"><span class="mpre">os0</span></span></a><span class="mpre">, </span><a name="loc_121_11_121_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_11_121_15&#39;)"><span class="hl_vardecl"><span class="mpre">grab</span></span></a><span class="mpre">) &lt;- </span><a href="System.IO.Streams.List.html#loc_65_1_65_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_65_1_65_17&#39;)"><span class="hl_varref"><span class="mpre">listOutputStream</span></span></a><span class="mpre">
    </span><a name="loc_122_5_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_5_122_7&#39;)"><span class="hl_vardecl"><span class="mpre">os</span></span></a><span class="mpre"> &lt;- </span><a href="System.IO.Streams.Builder.html#loc_94_1_94_14" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Builder.html#loc_94_1_94_14&#39;)"><span class="hl_varref"><span class="mpre">builderStream</span></span></a><span class="mpre"> </span><a href="#loc_121_6_121_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_6_121_9&#39;)"><span class="hl_varref"><span class="mpre">os0</span></span></a><span class="mpre">

    </span><a name="loc_124_5_124_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_7&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre"> &lt;- </span><a href="System.IO.Streams.List.html#loc_36_1_36_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.List.html#loc_36_1_36_9&#39;)"><span class="hl_varref"><span class="mpre">fromList</span></span></a><span class="mpre"> []
    </span><a href="System.IO.Streams.Internal.html#loc_188_1_188_8" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Streams.Internal.html#loc_188_1_188_8&#39;)"><span class="hl_varref"><span class="mpre">connect</span></span></a><span class="mpre"> </span><a href="#loc_124_5_124_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_5_124_7&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> </span><a href="#loc_122_5_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_5_122_7&#39;)"><span class="hl_varref"><span class="mpre">os</span></span></a><span class="mpre">

    </span><a name="loc_127_5_127_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_5_127_6&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_121_11_121_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_121_11_121_15&#39;)"><span class="hl_varref"><span class="mpre">grab</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertEqual</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;null stream&quot;</span></span><span class="mpre"> [] </span><a href="#loc_127_5_127_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_5_127_6&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
</span></div></body></html>