<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE BangPatterns, CPP, RecordWildCards #-}
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      : Data.Text.Internal.IO</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   : (c) 2009, 2010 Bryan O&#39;Sullivan,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--               (c) 2009 Simon Marlow</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     : BSD-style</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  : bos@serpentine.com</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   : experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability : GHC</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Warning/: this is an internal module, and does not have a stable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- API or name. Functions in this module may not check or enforce</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- preconditions expected by public modules. Use at your own risk!</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Low-level support for text I\/O.</span></span><span class="mpre">

module Data.Text.Internal.IO
    (
      hGetLineWith
    , readChunk
    ) where

import qualified Control.Exception as E
import Data.IORef (</span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="mpre">readIORef</span></a><span class="mpre">, </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="mpre">writeIORef</span></a><span class="mpre">)
import Data.Text (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="mpre">Text</span></a><span class="mpre">)
import Data.Text.Internal.Fusion (</span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="mpre">unstream</span></a><span class="mpre">)
import Data.Text.Internal.Fusion.Types (</span><a href="Data.Text.Internal.Fusion.Types.html#loc_59_6_59_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_59_6_59_10&#39;)"><span class="mpre">Step</span></a><span class="mpre">(..), </span><a href="Data.Text.Internal.Fusion.Types.html#loc_88_6_88_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_88_6_88_12&#39;)"><span class="mpre">Stream</span></a><span class="mpre">(..))
import Data.Text.Internal.Fusion.Size (</span><a href="Data.Text.Internal.Fusion.Size.html#loc_49_1_49_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Size.html#loc_49_1_49_10&#39;)"><span class="mpre">exactSize</span></a><span class="mpre">, </span><a href="Data.Text.Internal.Fusion.Size.html#loc_57_1_57_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Size.html#loc_57_1_57_8&#39;)"><span class="mpre">maxSize</span></a><span class="mpre">)
import Data.Text.Unsafe (</span><a href="Data.Text.Internal.Unsafe.html#loc_39_1_39_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.html#loc_39_1_39_16&#39;)"><span class="mpre">inlinePerformIO</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 30, srcSpanStartColumn = 8, srcSpanEndLine = 30, srcSpanEndColumn = 24}, srcInfoPoints = []}) &quot;Foreign.Storable&quot;"><span class="mpre">Foreign.Storable</span></span><span class="mpre"> (peekElemOff)
import GHC.IO.Buffer (</span><a href="GHC.IO.Buffer.html#loc_180_6_180_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_180_6_180_12&#39;)"><span class="mpre">Buffer</span></a><span class="mpre">(..), CharBuffer, RawCharBuffer, </span><a href="GHC.IO.Buffer.html#loc_232_1_232_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_232_1_232_14&#39;)"><span class="mpre">bufferAdjustL</span></a><span class="mpre">,
                      </span><a href="GHC.IO.Buffer.html#loc_223_1_223_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_223_1_223_12&#39;)"><span class="mpre">bufferElems</span></a><span class="mpre">, </span><a href="GHC.IO.Buffer.html#loc_157_1_157_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_157_1_157_9&#39;)"><span class="mpre">charSize</span></a><span class="mpre">, </span><a href="GHC.IO.Buffer.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_204_1_204_14&#39;)"><span class="mpre">isEmptyBuffer</span></a><span class="mpre">, </span><a href="GHC.IO.Buffer.html#loc_119_1_119_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_119_1_119_12&#39;)"><span class="mpre">readCharBuf</span></a><span class="mpre">,
                      </span><a href="GHC.IO.Buffer.html#loc_201_1_201_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_201_1_201_14&#39;)"><span class="mpre">withRawBuffer</span></a><span class="mpre">, </span><a href="GHC.IO.Buffer.html#loc_123_1_123_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_123_1_123_13&#39;)"><span class="mpre">writeCharBuf</span></a><span class="mpre">)
import GHC.IO.Handle.Internals (</span><a href="GHC.IO.Handle.Internals.html#loc_327_1_327_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_327_1_327_8&#39;)"><span class="mpre">ioe_EOF</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.Internals.html#loc_825_1_825_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_825_1_825_15&#39;)"><span class="mpre">readTextDevice</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.Internals.html#loc_264_1_264_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_264_1_264_20&#39;)"><span class="mpre">wantReadableHandle_</span></a><span class="mpre">)
import GHC.IO.Handle.Types (</span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="mpre">Handle__</span></a><span class="mpre">(..), </span><a href="GHC.IO.Handle.Types.html#loc_354_6_354_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_354_6_354_13&#39;)"><span class="mpre">Newline</span></a><span class="mpre">(..))
import System.IO (Handle)
import System.IO.Error (</span><a href="System.IO.Error.html#loc_152_1_152_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_152_1_152_11&#39;)"><span class="mpre">isEOFError</span></a><span class="mpre">)
import qualified Data.Text as T

</span><span class="hl_comment"><span class="mpre">-- | Read a single line of input from a handle, constructing a list of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- decoded chunks as we go.  When we&#39;re done, transform them into the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- destination type.</span></span><span class="mpre">
</span><a href="#loc_44_1_44_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_1_44_13&#39;)"><span class="mpre">hGetLineWith</span></a><span class="mpre"> :: ([</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">] -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_44_1_44_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_1_44_13&#39;)"><span class="hl_fundecl"><span class="mpre">hGetLineWith</span></span></a><span class="mpre"> </span><a name="loc_44_14_44_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_14_44_15&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_44_16_44_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_16_44_17&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="GHC.IO.Handle.Internals.html#loc_264_1_264_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_264_1_264_20&#39;)"><span class="hl_varref"><span class="mpre">wantReadableHandle_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hGetLine&quot;</span></span><span class="mpre"> </span><a href="#loc_44_16_44_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_16_44_17&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_46_5_46_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_5_46_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_46_5_46_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_5_46_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_46_8_46_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_8_46_10&#39;)"><span class="hl_specname"><span class="mpre">hh</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 11, srcSpanEndLine = 46, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 19, srcSpanEndLine = 46, srcSpanEndColumn = 20},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartL"><span class="mpre">Handle__{..}</span></span><span class="mpre"> = </span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="hl_varref"><span class="mpre">readIORef</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_132_7_132_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_132_7_132_19&#39;)"><span class="hl_varref"><span class="mpre">haCharBuffer</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_44_14_44_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_14_44_15&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_49_1_49_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_13&#39;)"><span class="hl_varref"><span class="mpre">hGetLineLoop</span></span></a><span class="mpre"> </span><a href="#loc_46_8_46_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_8_46_10&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre"> []

</span><a href="#loc_49_1_49_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_13&#39;)"><span class="mpre">hGetLineLoop</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="hl_tyconref"><span class="mpre">Handle__</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">CharBuffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> [</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">]
</span><a name="loc_49_1_49_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_13&#39;)"><span class="hl_fundecl"><span class="mpre">hGetLineLoop</span></span></a><span class="mpre"> </span><a name="loc_49_14_49_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_14_49_16&#39;)"><span class="hl_specname"><span class="mpre">hh</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 49, srcSpanStartColumn = 17, srcSpanEndLine = 49, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 49, srcSpanStartColumn = 25, srcSpanEndLine = 49, srcSpanEndColumn = 26},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartL"><span class="mpre">Handle__{..}</span></span><span class="mpre"> = </span><a href="#loc_50_2_50_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_2_50_4&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> where
 </span><a name="loc_50_2_50_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_2_50_4&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_50_5_50_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_5_50_7&#39;)"><span class="hl_vardecl"><span class="mpre">ts</span></span></a><span class="mpre"> </span><a name="loc_50_8_50_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_8_50_11&#39;)"><span class="hl_specname"><span class="mpre">buf</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 50, srcSpanStartColumn = 12, srcSpanEndLine = 50, srcSpanEndColumn = 50}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 50, srcSpanStartColumn = 18, srcSpanEndLine = 50, srcSpanEndColumn = 19},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartL"><span class="mpre">Buffer{ bufL=r0, bufR=w, bufRaw=raw0 }</span></span><span class="mpre"> = do
  let </span><a name="loc_51_7_51_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_7_51_14&#39;)"><span class="hl_fundecl"><span class="mpre">findEOL</span></span></a><span class="mpre"> </span><a name="loc_51_15_51_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_15_51_18&#39;)"><span class="hl_vardecl"><span class="mpre">raw</span></span></a><span class="mpre"> </span><a name="loc_51_19_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_19_51_20&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> | </span><a href="#loc_51_19_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_19_51_20&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">w</span></span><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">, </span><span class="hl_varref"><span class="mpre">w</span></span><span class="mpre">)
                    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = do
        (</span><a name="loc_53_10_53_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_10_53_11&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">,</span><a name="loc_53_12_53_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_12_53_14&#39;)"><span class="hl_vardecl"><span class="mpre">r&#39;</span></span></a><span class="mpre">) &lt;- </span><a href="GHC.IO.Buffer.html#loc_119_1_119_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_119_1_119_12&#39;)"><span class="hl_varref"><span class="mpre">readCharBuf</span></span></a><span class="mpre"> </span><a href="#loc_51_15_51_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_15_51_18&#39;)"><span class="hl_varref"><span class="mpre">raw</span></span></a><span class="mpre"> </span><a href="#loc_51_19_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_19_51_20&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
        if </span><a href="#loc_53_10_53_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_10_53_11&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="mpre">
          then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">, </span><a href="#loc_51_19_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_19_51_20&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
          else </span><a href="#loc_51_7_51_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_7_51_14&#39;)"><span class="hl_varref"><span class="mpre">findEOL</span></span></a><span class="mpre"> </span><a href="#loc_51_15_51_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_15_51_18&#39;)"><span class="hl_varref"><span class="mpre">raw</span></span></a><span class="mpre"> </span><a href="#loc_53_12_53_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_12_53_14&#39;)"><span class="hl_varref"><span class="mpre">r&#39;</span></span></a><span class="mpre">
  (</span><a name="loc_57_4_57_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_4_57_7&#39;)"><span class="hl_vardecl"><span class="mpre">eol</span></span></a><span class="mpre">, </span><a name="loc_57_9_57_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_9_57_12&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_51_7_51_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_7_51_14&#39;)"><span class="hl_varref"><span class="mpre">findEOL</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">raw0</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">r0</span></span><span class="mpre">
  (</span><a name="loc_58_4_58_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_4_58_5&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">,</span><a name="loc_58_6_58_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_6_58_8&#39;)"><span class="hl_vardecl"><span class="mpre">r&#39;</span></span></a><span class="mpre">) &lt;- if </span><a href="GHC.IO.Handle.Types.html#loc_137_7_137_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_137_7_137_16&#39;)"><span class="hl_varref"><span class="mpre">haInputNL</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_355_16_355_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_355_16_355_20&#39;)"><span class="hl_conref"><span class="mpre">CRLF</span></span></a><span class="mpre">
            then </span><a href="#loc_105_1_105_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_10&#39;)"><span class="hl_varref"><span class="mpre">unpack_nl</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">raw0</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">r0</span></span><span class="mpre"> </span><a href="#loc_57_9_57_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_9_57_12&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">
            else do </span><a name="loc_60_21_60_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_21_60_22&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_93_1_93_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_1_93_7&#39;)"><span class="hl_varref"><span class="mpre">unpack</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">raw0</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">r0</span></span><span class="mpre"> </span><a href="#loc_57_9_57_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_9_57_12&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">
                    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_60_21_60_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_21_60_22&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">,</span><a href="#loc_57_9_57_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_9_57_12&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">)
  if </span><a href="#loc_57_4_57_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_4_57_7&#39;)"><span class="hl_varref"><span class="mpre">eol</span></span></a><span class="mpre">
    then do </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="hl_varref"><span class="mpre">writeIORef</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_132_7_132_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_132_7_132_19&#39;)"><span class="hl_varref"><span class="mpre">haCharBuffer</span></span></a><span class="mpre"> (</span><a href="GHC.IO.Buffer.html#loc_232_1_232_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_232_1_232_14&#39;)"><span class="hl_varref"><span class="mpre">bufferAdjustL</span></span></a><span class="mpre"> (</span><a href="#loc_57_9_57_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_9_57_12&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><a href="#loc_50_8_50_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_8_50_11&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">)
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> (</span><a href="#loc_58_4_58_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_4_58_5&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_50_5_50_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_5_50_7&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">)
    else do
      let </span><a name="loc_66_11_66_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_11_66_15&#39;)"><span class="hl_vardecl"><span class="mpre">buf1</span></span></a><span class="mpre"> = </span><a href="GHC.IO.Buffer.html#loc_232_1_232_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_232_1_232_14&#39;)"><span class="hl_varref"><span class="mpre">bufferAdjustL</span></span></a><span class="mpre"> </span><a href="#loc_58_6_58_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_6_58_8&#39;)"><span class="hl_varref"><span class="mpre">r&#39;</span></span></a><span class="mpre"> </span><a href="#loc_50_8_50_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_8_50_11&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">
      </span><a name="loc_67_7_67_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_7_67_16&#39;)"><span class="hl_vardecl"><span class="mpre">maybe_buf</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_86_1_86_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_1_86_20&#39;)"><span class="hl_varref"><span class="mpre">maybeFillReadBuffer</span></span></a><span class="mpre"> </span><a href="#loc_49_14_49_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_14_49_16&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre"> </span><a href="#loc_66_11_66_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_11_66_15&#39;)"><span class="hl_varref"><span class="mpre">buf1</span></span></a><span class="mpre">
      case </span><a href="#loc_67_7_67_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_7_67_16&#39;)"><span class="hl_varref"><span class="mpre">maybe_buf</span></span></a><span class="mpre"> of
         </span><span class="hl_comment"><span class="mpre">-- Nothing indicates we caught an EOF, and we may have a</span></span><span class="mpre">
         </span><span class="hl_comment"><span class="mpre">-- partial line to return.</span></span><span class="mpre">
         </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; do
              </span><span class="hl_comment"><span class="mpre">-- we reached EOF.  There might be a lone \r left</span></span><span class="mpre">
              </span><span class="hl_comment"><span class="mpre">-- in the buffer, so check for that and</span></span><span class="mpre">
              </span><span class="hl_comment"><span class="mpre">-- append it to the line if necessary.</span></span><span class="mpre">
              let </span><a name="loc_75_19_75_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_19_75_22&#39;)"><span class="hl_vardecl"><span class="mpre">pre</span></span></a><span class="mpre"> | </span><a href="GHC.IO.Buffer.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_204_1_204_14&#39;)"><span class="hl_varref"><span class="mpre">isEmptyBuffer</span></span></a><span class="mpre"> </span><a href="#loc_66_11_66_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_11_66_15&#39;)"><span class="hl_varref"><span class="mpre">buf1</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">T.empty</span></span></a><span class="mpre">
                      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">          = </span><a href="Data.Text.html#loc_411_1_411_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.html#loc_411_1_411_10&#39;)"><span class="hl_varref"><span class="mpre">T.singleton</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\r&#39;</span></span><span class="mpre">
              </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="hl_varref"><span class="mpre">writeIORef</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_132_7_132_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_132_7_132_19&#39;)"><span class="hl_varref"><span class="mpre">haCharBuffer</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 39, srcSpanEndLine = 77, srcSpanEndColumn = 61}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 43, srcSpanEndLine = 77, srcSpanEndColumn = 44},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanS"><span class="mpre">buf1{ bufL=0, bufR=0 }</span></span><span class="mpre">
              let </span><a name="loc_78_19_78_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_19_78_22&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.html#loc_531_1_531_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.html#loc_531_1_531_5&#39;)"><span class="hl_varref"><span class="mpre">T.null</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_75_19_75_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_19_75_22&#39;)"><span class="hl_varref"><span class="mpre">pre</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_58_4_58_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_4_58_5&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_50_5_50_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_5_50_7&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">
              if </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> </span><a href="#loc_78_19_78_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_19_78_22&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">
                then </span><a href="GHC.IO.Handle.Internals.html#loc_327_1_327_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_327_1_327_8&#39;)"><span class="hl_varref"><span class="mpre">ioe_EOF</span></span></a><span class="mpre">
                else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_78_19_78_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_19_78_22&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">
         </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_82_15_82_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_15_82_22&#39;)"><span class="hl_vardecl"><span class="mpre">new_buf</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_50_2_50_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_2_50_4&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_58_4_58_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_4_58_5&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_50_5_50_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_5_50_7&#39;)"><span class="hl_varref"><span class="mpre">ts</span></span></a><span class="mpre">) </span><a href="#loc_82_15_82_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_15_82_22&#39;)"><span class="hl_varref"><span class="mpre">new_buf</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- This function is lifted almost verbatim from GHC.IO.Handle.Text.</span></span><span class="mpre">
</span><a href="#loc_86_1_86_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_1_86_20&#39;)"><span class="mpre">maybeFillReadBuffer</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="hl_tyconref"><span class="mpre">Handle__</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">CharBuffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CharBuffer</span></span><span class="mpre">)
</span><a name="loc_86_1_86_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_1_86_20&#39;)"><span class="hl_fundecl"><span class="mpre">maybeFillReadBuffer</span></span></a><span class="mpre"> </span><a name="loc_86_21_86_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_21_86_28&#39;)"><span class="hl_vardecl"><span class="mpre">handle_</span></span></a><span class="mpre"> </span><a name="loc_86_29_86_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_29_86_32&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre">
  = </span><a href="Control.Exception.Base.html#loc_150_1_150_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_150_1_150_6&#39;)"><span class="hl_varref"><span class="mpre">E.catch</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`fmap`</span></span><span class="mpre"> </span><a href="#loc_130_1_130_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_1_130_18&#39;)"><span class="hl_varref"><span class="mpre">getSomeCharacters</span></span></a><span class="mpre"> </span><a href="#loc_86_21_86_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_21_86_28&#39;)"><span class="hl_varref"><span class="mpre">handle_</span></span></a><span class="mpre"> </span><a href="#loc_86_29_86_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_29_86_32&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_87_60_87_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_60_87_61&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt;
      if </span><a href="System.IO.Error.html#loc_152_1_152_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_152_1_152_11&#39;)"><span class="hl_varref"><span class="mpre">isEOFError</span></span></a><span class="mpre"> </span><a href="#loc_87_60_87_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_60_87_61&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">
      then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
      else </span><span class="hl_varref"><span class="mpre">ioError</span></span><span class="mpre"> </span><a href="#loc_87_60_87_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_60_87_61&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><a href="#loc_93_1_93_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_1_93_7&#39;)"><span class="mpre">unpack</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">RawCharBuffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_93_1_93_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_1_93_7&#39;)"><span class="hl_fundecl"><span class="mpre">unpack</span></span></a><span class="mpre"> !</span><a name="loc_93_9_93_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_9_93_12&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre"> !</span><a name="loc_93_14_93_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_14_93_15&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> !</span><a name="loc_93_17_93_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_17_93_18&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre">
 | </span><a href="GHC.IO.Buffer.html#loc_157_1_157_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_157_1_157_9&#39;)"><span class="hl_varref"><span class="mpre">charSize</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre"> = </span><a href="#loc_166_1_166_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_10&#39;)"><span class="hl_varref"><span class="mpre">sizeError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;unpack&quot;</span></span><span class="mpre">
 | </span><a href="#loc_93_14_93_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_14_93_15&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_93_17_93_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_17_93_18&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">        = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">T.empty</span></span></a><span class="mpre">
 | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">     = </span><a href="GHC.IO.Buffer.html#loc_201_1_201_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_201_1_201_14&#39;)"><span class="hl_varref"><span class="mpre">withRawBuffer</span></span></a><span class="mpre"> </span><a href="#loc_93_9_93_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_9_93_12&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> </span><a href="#loc_98_3_98_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_3_98_5&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
 where
  </span><a name="loc_98_3_98_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_3_98_5&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_98_6_98_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_6_98_10&#39;)"><span class="hl_vardecl"><span class="mpre">pbuf</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Types.html#loc_89_15_89_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_89_15_89_21&#39;)"><span class="hl_conref"><span class="mpre">Stream</span></span></a><span class="mpre"> </span><a href="#loc_100_5_100_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_5_100_9&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_93_14_93_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_14_93_15&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Size.html#loc_49_1_49_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Size.html#loc_49_1_49_10&#39;)"><span class="hl_varref"><span class="mpre">exactSize</span></span></a><span class="mpre"> (</span><a href="#loc_93_17_93_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_17_93_18&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_93_14_93_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_14_93_15&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)))
   where
    </span><a name="loc_100_5_100_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_5_100_9&#39;)"><span class="hl_fundecl"><span class="mpre">next</span></span></a><span class="mpre"> !</span><a name="loc_100_11_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_11_100_12&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> | </span><a href="#loc_100_11_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_11_100_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_93_17_93_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_17_93_18&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">    = </span><a href="Data.Text.Internal.Fusion.Types.html#loc_59_17_59_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_59_17_59_21&#39;)"><span class="hl_conref"><span class="mpre">Done</span></span></a><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Types.html#loc_61_17_61_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_61_17_61_22&#39;)"><span class="hl_conref"><span class="mpre">Yield</span></span></a><span class="mpre"> (</span><a href="#loc_102_5_102_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_7&#39;)"><span class="hl_varref"><span class="mpre">ix</span></span></a><span class="mpre"> </span><a href="#loc_100_11_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_11_100_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) (</span><a href="#loc_100_11_100_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_11_100_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
    </span><a name="loc_102_5_102_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_5_102_7&#39;)"><span class="hl_fundecl"><span class="mpre">ix</span></span></a><span class="mpre"> </span><a name="loc_102_8_102_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_8_102_9&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Unsafe.html#loc_39_1_39_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.html#loc_39_1_39_16&#39;)"><span class="hl_varref"><span class="mpre">inlinePerformIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">peekElemOff</span></span><span class="mpre"> </span><a href="#loc_98_6_98_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_6_98_10&#39;)"><span class="hl_varref"><span class="mpre">pbuf</span></span></a><span class="mpre"> </span><a href="#loc_102_8_102_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_8_102_9&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">

</span><a href="#loc_105_1_105_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_10&#39;)"><span class="mpre">unpack_nl</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">RawCharBuffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">)
</span><a name="loc_105_1_105_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_10&#39;)"><span class="hl_fundecl"><span class="mpre">unpack_nl</span></span></a><span class="mpre"> !</span><a name="loc_105_12_105_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_12_105_15&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre"> !</span><a name="loc_105_17_105_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_17_105_18&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> !</span><a name="loc_105_20_105_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_21&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre">
 | </span><a href="GHC.IO.Buffer.html#loc_157_1_157_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_157_1_157_9&#39;)"><span class="hl_varref"><span class="mpre">charSize</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre"> = </span><a href="#loc_166_1_166_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_10&#39;)"><span class="hl_varref"><span class="mpre">sizeError</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;unpack_nl&quot;</span></span><span class="mpre">
 | </span><a href="#loc_105_17_105_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_17_105_18&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_105_20_105_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_21&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">        = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_72_1_72_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_72_1_72_6&#39;)"><span class="hl_varref"><span class="mpre">T.empty</span></span></a><span class="mpre">, </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">)
 | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">     = </span><a href="GHC.IO.Buffer.html#loc_201_1_201_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_201_1_201_14&#39;)"><span class="hl_varref"><span class="mpre">withRawBuffer</span></span></a><span class="mpre"> </span><a href="#loc_105_12_105_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_12_105_15&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_110_3_110_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_3_110_5&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
 where
  </span><a name="loc_110_3_110_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_3_110_5&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_110_6_110_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_6_110_10&#39;)"><span class="hl_vardecl"><span class="mpre">pbuf</span></span></a><span class="mpre"> = do
    let !</span><a name="loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Types.html#loc_89_15_89_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_89_15_89_21&#39;)"><span class="hl_conref"><span class="mpre">Stream</span></span></a><span class="mpre"> </span><a href="#loc_117_5_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_9&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_105_17_105_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_17_105_18&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.Size.html#loc_57_1_57_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Size.html#loc_57_1_57_8&#39;)"><span class="hl_varref"><span class="mpre">maxSize</span></span></a><span class="mpre"> (</span><a href="#loc_105_20_105_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_21&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="hl_infix"><span class="mpre">-</span></span><a href="#loc_105_17_105_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_17_105_18&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)))
        </span><a name="loc_112_9_112_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_11&#39;)"><span class="hl_vardecl"><span class="mpre">w&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_105_20_105_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_21&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> if </span><a href="#loc_126_5_126_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_5_126_7&#39;)"><span class="hl_varref"><span class="mpre">ix</span></span></a><span class="mpre"> </span><a href="#loc_112_9_112_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_11&#39;)"><span class="hl_varref"><span class="mpre">w&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\r&#39;</span></span><span class="mpre">
             then (</span><a href="#loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">,</span><a href="#loc_112_9_112_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_112_9_112_11&#39;)"><span class="hl_varref"><span class="mpre">w&#39;</span></span></a><span class="mpre">)
             else (</span><a href="#loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">,</span><a href="#loc_105_20_105_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_21&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">)
   where
    </span><a name="loc_117_5_117_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_9&#39;)"><span class="hl_fundecl"><span class="mpre">next</span></span></a><span class="mpre"> !</span><a name="loc_117_11_117_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_11_117_12&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> | </span><a href="#loc_117_11_117_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_11_117_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_105_20_105_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_21&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Types.html#loc_59_17_59_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_59_17_59_21&#39;)"><span class="hl_conref"><span class="mpre">Done</span></span></a><span class="mpre">
            | </span><a href="#loc_125_19_125_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_19_125_20&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\r&#39;</span></span><span class="mpre"> = let </span><a name="loc_118_31_118_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_31_118_33&#39;)"><span class="hl_vardecl"><span class="mpre">i&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_117_11_117_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_11_117_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
                          in if </span><a href="#loc_118_31_118_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_31_118_33&#39;)"><span class="hl_varref"><span class="mpre">i&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_105_20_105_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_20_105_21&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
                             then if </span><a href="#loc_126_5_126_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_5_126_7&#39;)"><span class="hl_varref"><span class="mpre">ix</span></span></a><span class="mpre"> </span><a href="#loc_118_31_118_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_31_118_33&#39;)"><span class="hl_varref"><span class="mpre">i&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="mpre">
                                  then </span><a href="Data.Text.Internal.Fusion.Types.html#loc_61_17_61_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_61_17_61_22&#39;)"><span class="hl_conref"><span class="mpre">Yield</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="mpre"> (</span><a href="#loc_117_11_117_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_11_117_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">)
                                  else </span><a href="Data.Text.Internal.Fusion.Types.html#loc_61_17_61_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_61_17_61_22&#39;)"><span class="hl_conref"><span class="mpre">Yield</span></span></a><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="mpre"> </span><a href="#loc_118_31_118_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_118_31_118_33&#39;)"><span class="hl_varref"><span class="mpre">i&#39;</span></span></a><span class="mpre">
                             else </span><a href="Data.Text.Internal.Fusion.Types.html#loc_59_17_59_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_59_17_59_21&#39;)"><span class="hl_conref"><span class="mpre">Done</span></span></a><span class="mpre">
            | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.Types.html#loc_61_17_61_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.Types.html#loc_61_17_61_22&#39;)"><span class="hl_conref"><span class="mpre">Yield</span></span></a><span class="mpre"> </span><a href="#loc_125_19_125_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_19_125_20&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> (</span><a href="#loc_117_11_117_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_11_117_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
            where </span><a name="loc_125_19_125_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_19_125_20&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = </span><a href="#loc_126_5_126_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_5_126_7&#39;)"><span class="hl_varref"><span class="mpre">ix</span></span></a><span class="mpre"> </span><a href="#loc_117_11_117_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_11_117_12&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
    </span><a name="loc_126_5_126_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_5_126_7&#39;)"><span class="hl_fundecl"><span class="mpre">ix</span></span></a><span class="mpre"> </span><a name="loc_126_8_126_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_8_126_9&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Unsafe.html#loc_39_1_39_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.html#loc_39_1_39_16&#39;)"><span class="hl_varref"><span class="mpre">inlinePerformIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">peekElemOff</span></span><span class="mpre"> </span><a href="#loc_110_6_110_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_6_110_10&#39;)"><span class="hl_varref"><span class="mpre">pbuf</span></span></a><span class="mpre"> </span><a href="#loc_126_8_126_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_8_126_9&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- This function is completely lifted from GHC.IO.Handle.Text.</span></span><span class="mpre">
</span><a href="#loc_130_1_130_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_1_130_18&#39;)"><span class="mpre">getSomeCharacters</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="hl_tyconref"><span class="mpre">Handle__</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">CharBuffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CharBuffer</span></span><span class="mpre">
</span><a name="loc_130_1_130_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_1_130_18&#39;)"><span class="hl_fundecl"><span class="mpre">getSomeCharacters</span></span></a><span class="mpre"> </span><a name="loc_130_19_130_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_19_130_26&#39;)"><span class="hl_specname"><span class="mpre">handle_</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 130, srcSpanStartColumn = 27, srcSpanEndLine = 130, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 130, srcSpanStartColumn = 35, srcSpanEndLine = 130, srcSpanEndColumn = 36},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanSt"><span class="mpre">Handle__{..}</span></span><span class="mpre"> </span><a name="loc_130_40_130_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_40_130_43&#39;)"><span class="hl_specname"><span class="mpre">buf</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 130, srcSpanStartColumn = 44, srcSpanEndLine = 130, srcSpanEndColumn = 54}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 130, srcSpanStartColumn = 50, srcSpanEndLine = 130, srcSpanEndColumn = 51},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanSt"><span class="mpre">Buffer{..}</span></span><span class="mpre"> =
  case </span><a href="GHC.IO.Buffer.html#loc_223_1_223_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_223_1_223_12&#39;)"><span class="hl_varref"><span class="mpre">bufferElems</span></span></a><span class="mpre"> </span><a href="#loc_130_40_130_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_40_130_43&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre"> of
    </span><span class="hl_comment"><span class="mpre">-- buffer empty: read some more</span></span><span class="mpre">
    </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> -&gt; </span><span class="warning" data-warning="ExpSCCPragma (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 133, srcSpanStartColumn = 10, srcSpanEndLine = 133, srcSpanEndColumn = 65}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 133, srcSpanStartColumn = 18, srcSpanEndLine = 133, srcSpanEndColumn = 34},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcS"><span class="mpre">{-# SCC &quot;readTextDevice&quot; #-} readTextDevice handle_ buf</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- if the buffer has a single &#39;\r&#39; in it and we&#39;re doing newline</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- translation: read some more</span></span><span class="mpre">
    </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> | </span><a href="GHC.IO.Handle.Types.html#loc_137_7_137_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_137_7_137_16&#39;)"><span class="hl_varref"><span class="mpre">haInputNL</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_355_16_355_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_355_16_355_20&#39;)"><span class="hl_conref"><span class="mpre">CRLF</span></span></a><span class="mpre"> -&gt; do
      (</span><a name="loc_138_8_138_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_8_138_9&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">,_) &lt;- </span><a href="GHC.IO.Buffer.html#loc_119_1_119_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_119_1_119_12&#39;)"><span class="hl_varref"><span class="mpre">readCharBuf</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_182_9_182_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_182_9_182_15&#39;)"><span class="hl_varref"><span class="mpre">bufRaw</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_185_9_185_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_185_9_185_13&#39;)"><span class="hl_varref"><span class="mpre">bufL</span></span></a><span class="mpre">
      if </span><a href="#loc_138_8_138_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_8_138_9&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\r&#39;</span></span><span class="mpre">
         then do </span><span class="hl_comment"><span class="mpre">-- shuffle the &#39;\r&#39; to the beginning.  This is only safe</span></span><span class="mpre">
                 </span><span class="hl_comment"><span class="mpre">-- if we&#39;re about to call readTextDevice, otherwise it</span></span><span class="mpre">
                 </span><span class="hl_comment"><span class="mpre">-- would mess up flushCharBuffer.</span></span><span class="mpre">
                 </span><span class="hl_comment"><span class="mpre">-- See [note Buffer Flushing], GHC.IO.Handle.Types</span></span><span class="mpre">
                 _ &lt;- </span><a href="GHC.IO.Buffer.html#loc_123_1_123_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_123_1_123_13&#39;)"><span class="hl_varref"><span class="mpre">writeCharBuf</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_182_9_182_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_182_9_182_15&#39;)"><span class="hl_varref"><span class="mpre">bufRaw</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\r&#39;</span></span><span class="mpre">
                 let </span><a name="loc_145_22_145_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_22_145_26&#39;)"><span class="hl_vardecl"><span class="mpre">buf&#39;</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 145, srcSpanStartColumn = 29, srcSpanEndLine = 145, srcSpanEndColumn = 50}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 145, srcSpanStartColumn = 32, srcSpanEndLine = 145, srcSpanEndColumn = 33},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcS"><span class="mpre">buf{ bufL=0, bufR=1 }</span></span><span class="mpre">
                 </span><a href="GHC.IO.Handle.Internals.html#loc_825_1_825_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Internals.html#loc_825_1_825_15&#39;)"><span class="hl_varref"><span class="mpre">readTextDevice</span></span></a><span class="mpre"> </span><a href="#loc_130_19_130_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_19_130_26&#39;)"><span class="hl_varref"><span class="mpre">handle_</span></span></a><span class="mpre"> </span><a href="#loc_145_22_145_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_22_145_26&#39;)"><span class="hl_varref"><span class="mpre">buf&#39;</span></span></a><span class="mpre">
         else do
                 </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_130_40_130_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_40_130_43&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- buffer has some chars in it already: just return it</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">_otherwise</span></span><span class="mpre"> -&gt; </span><span class="warning" data-warning="ExpSCCPragma (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 151, srcSpanStartColumn = 19, srcSpanEndLine = 151, srcSpanEndColumn = 53}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 151, srcSpanStartColumn = 27, srcSpanEndLine = 151, srcSpanEndColumn = 38},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcS"><span class="mpre">{-# SCC &quot;otherwise&quot; #-} return buf</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Read a single chunk of strict text from a buffer. Used by both</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the strict and lazy implementations of hGetContents.</span></span><span class="mpre">
</span><a href="#loc_156_1_156_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_1_156_10&#39;)"><span class="mpre">readChunk</span></a><span class="mpre"> :: </span><a href="GHC.IO.Handle.Types.html#loc_124_6_124_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_124_6_124_14&#39;)"><span class="hl_tyconref"><span class="mpre">Handle__</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">CharBuffer</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_156_1_156_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_1_156_10&#39;)"><span class="hl_fundecl"><span class="mpre">readChunk</span></span></a><span class="mpre"> </span><a name="loc_156_11_156_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_11_156_13&#39;)"><span class="hl_specname"><span class="mpre">hh</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 156, srcSpanStartColumn = 14, srcSpanEndLine = 156, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 156, srcSpanStartColumn = 22, srcSpanEndLine = 156, srcSpanEndColumn = 23},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanSt"><span class="mpre">Handle__{..}</span></span><span class="mpre"> </span><a name="loc_156_27_156_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_27_156_30&#39;)"><span class="hl_vardecl"><span class="mpre">buf</span></span></a><span class="mpre"> = do
  </span><a name="loc_157_3_157_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_3_157_7&#39;)"><span class="hl_specname"><span class="mpre">buf&#39;</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 157, srcSpanStartColumn = 8, srcSpanEndLine = 157, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanStartLine = 157, srcSpanStartColumn = 14, srcSpanEndLine = 157, srcSpanEndColumn = 15},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Internal/IO.hs&quot;, srcSpanSta"><span class="mpre">Buffer{..}</span></span><span class="mpre"> &lt;- </span><a href="#loc_130_1_130_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_1_130_18&#39;)"><span class="hl_varref"><span class="mpre">getSomeCharacters</span></span></a><span class="mpre"> </span><a href="#loc_156_11_156_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_11_156_13&#39;)"><span class="hl_varref"><span class="mpre">hh</span></span></a><span class="mpre"> </span><a href="#loc_156_27_156_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_27_156_30&#39;)"><span class="hl_varref"><span class="mpre">buf</span></span></a><span class="mpre">
  (</span><a name="loc_158_4_158_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_4_158_5&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">,</span><a name="loc_158_6_158_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_6_158_7&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">) &lt;- if </span><a href="GHC.IO.Handle.Types.html#loc_137_7_137_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_137_7_137_16&#39;)"><span class="hl_varref"><span class="mpre">haInputNL</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_355_16_355_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_355_16_355_20&#39;)"><span class="hl_conref"><span class="mpre">CRLF</span></span></a><span class="mpre">
           then </span><a href="#loc_105_1_105_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_105_1_105_10&#39;)"><span class="hl_varref"><span class="mpre">unpack_nl</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_182_9_182_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_182_9_182_15&#39;)"><span class="hl_varref"><span class="mpre">bufRaw</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_185_9_185_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_185_9_185_13&#39;)"><span class="hl_varref"><span class="mpre">bufL</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_186_9_186_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_186_9_186_13&#39;)"><span class="hl_varref"><span class="mpre">bufR</span></span></a><span class="mpre">
           else do </span><a name="loc_160_20_160_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_20_160_21&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_93_1_93_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_1_93_7&#39;)"><span class="hl_varref"><span class="mpre">unpack</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_182_9_182_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_182_9_182_15&#39;)"><span class="hl_varref"><span class="mpre">bufRaw</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_185_9_185_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_185_9_185_13&#39;)"><span class="hl_varref"><span class="mpre">bufL</span></span></a><span class="mpre"> </span><a href="GHC.IO.Buffer.html#loc_186_9_186_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_186_9_186_13&#39;)"><span class="hl_varref"><span class="mpre">bufR</span></span></a><span class="mpre">
                   </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_160_20_160_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_20_160_21&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">,</span><a href="GHC.IO.Buffer.html#loc_186_9_186_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_186_9_186_13&#39;)"><span class="hl_varref"><span class="mpre">bufR</span></span></a><span class="mpre">)
  </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="hl_varref"><span class="mpre">writeIORef</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_132_7_132_19" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_132_7_132_19&#39;)"><span class="hl_varref"><span class="mpre">haCharBuffer</span></span></a><span class="mpre"> (</span><a href="GHC.IO.Buffer.html#loc_232_1_232_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Buffer.html#loc_232_1_232_14&#39;)"><span class="hl_varref"><span class="mpre">bufferAdjustL</span></span></a><span class="mpre"> </span><a href="#loc_158_6_158_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_6_158_7&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><a href="#loc_157_3_157_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_3_157_7&#39;)"><span class="hl_varref"><span class="mpre">buf&#39;</span></span></a><span class="mpre">)
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_158_4_158_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_4_158_5&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">

</span><a href="#loc_166_1_166_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_10&#39;)"><span class="mpre">sizeError</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_166_1_166_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_10&#39;)"><span class="hl_fundecl"><span class="mpre">sizeError</span></span></a><span class="mpre"> </span><a name="loc_166_11_166_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_11_166_14&#39;)"><span class="hl_vardecl"><span class="mpre">loc</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Text.IO.&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_166_11_166_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_11_166_14&#39;)"><span class="hl_varref"><span class="mpre">loc</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;: bad internal buffer size&quot;</span></span><span class="mpre">
</span></div></body></html>