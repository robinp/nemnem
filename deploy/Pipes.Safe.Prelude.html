<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- | Simple resource management functions</span></span><span class="mpre">

{-# LANGUAGE RankNTypes #-}

module Pipes.Safe.Prelude (
    </span><span class="hl_comment"><span class="mpre">-- * Handle management</span></span><span class="mpre">
    withFile,

    </span><span class="hl_comment"><span class="mpre">-- * String I/O</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $strings</span></span><span class="mpre">
    readFile,
    writeFile
    ) where

import Control.Monad.IO.Class (</span><a href="Control.Monad.IO.Class.html#loc_30_20_30_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_30_20_30_27&#39;)"><span class="mpre">MonadIO</span></a><span class="mpre">(</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="mpre">liftIO</span></a><span class="mpre">))
import Pipes (Producer&#39;, Consumer&#39;)
import Pipes.Safe (</span><a href="Pipes.Safe.html#loc_408_1_408_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Safe.html#loc_408_1_408_8&#39;)"><span class="mpre">bracket</span></a><span class="mpre">, </span><a href="Pipes.Safe.html#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Safe.html#loc_260_67_260_76&#39;)"><span class="mpre">MonadSafe</span></a><span class="mpre">)
import qualified Pipes.Prelude as P
import qualified System.IO as IO
import Prelude hiding (readFile, writeFile)

</span><span class="hl_comment"><span class="mpre">-- | Acquire a &#39;IO.Handle&#39; within &#39;MonadSafe&#39;</span></span><span class="mpre">
</span><a href="#loc_24_1_24_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_1_24_9&#39;)"><span class="mpre">withFile</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude.hs&quot;, srcSpanStartLine = 23, srcSpanStartColumn = 13, srcSpanEndLine = 23, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude.hs&quot;, srcSpanStartLine = 23, srcSpanStartColumn = 13, srcSpanEndLine = 23, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude."><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><a href="GHC.IO.IOMode.html#loc_28_6_28_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_6_28_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.IOMode</span></span></a><span class="mpre"> -&gt; (</span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_24_1_24_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_1_24_9&#39;)"><span class="hl_fundecl"><span class="mpre">withFile</span></span></a><span class="mpre"> </span><a name="loc_24_10_24_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_10_24_14&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre"> </span><a name="loc_24_15_24_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_15_24_21&#39;)"><span class="hl_vardecl"><span class="mpre">ioMode</span></span></a><span class="mpre"> = </span><a href="Pipes.Safe.html#loc_408_1_408_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Safe.html#loc_408_1_408_8&#39;)"><span class="hl_varref"><span class="mpre">bracket</span></span></a><span class="mpre"> (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_150_1_150_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_150_1_150_9&#39;)"><span class="hl_varref"><span class="mpre">IO.openFile</span></span></a><span class="mpre"> </span><a href="#loc_24_10_24_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_10_24_14&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><a href="#loc_24_15_24_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_15_24_21&#39;)"><span class="hl_varref"><span class="mpre">ioMode</span></span></a><span class="mpre">) (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">IO.hClose</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE withFile #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- $strings
    Note that &#39;String&#39;s are very inefficient, and I will release future separate
    packages with &#39;Data.ByteString.ByteString&#39; and &#39;Data.Text.Text&#39; operations.
    I only provide these to allow users to test simple I/O without requiring any
    additional library dependencies.
-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Read lines from a file, automatically opening and closing the file as
    necessary
-}</span></span><span class="mpre">
</span><a href="#loc_38_1_38_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_9&#39;)"><span class="mpre">readFile</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude.hs&quot;, srcSpanStartLine = 37, srcSpanStartColumn = 13, srcSpanEndLine = 37, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude.hs&quot;, srcSpanStartLine = 37, srcSpanStartColumn = 13, srcSpanEndLine = 37, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude."><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_38_1_38_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_9&#39;)"><span class="hl_fundecl"><span class="mpre">readFile</span></span></a><span class="mpre"> </span><a name="loc_38_10_38_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_10_38_14&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre"> = </span><a href="#loc_24_1_24_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_1_24_9&#39;)"><span class="hl_varref"><span class="mpre">withFile</span></span></a><span class="mpre"> </span><a href="#loc_38_10_38_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_10_38_14&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><a href="GHC.IO.IOMode.html#loc_28_21_28_29" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_21_28_29&#39;)"><span class="hl_conref"><span class="mpre">IO.ReadMode</span></span></a><span class="mpre"> </span><a href="Pipes.Prelude.html#loc_173_1_173_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_173_1_173_11&#39;)"><span class="hl_varref"><span class="mpre">P.fromHandle</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE readFile #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Write lines to a file, automatically opening and closing the file as
    necessary
-}</span></span><span class="mpre">
</span><a href="#loc_45_1_45_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_1_45_10&#39;)"><span class="mpre">writeFile</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude.hs&quot;, srcSpanStartLine = 44, srcSpanStartColumn = 14, srcSpanEndLine = 44, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude.hs&quot;, srcSpanStartLine = 44, srcSpanStartColumn = 14, srcSpanEndLine = 44, srcSpanEndColumn = 15},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe/Prelude."><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_45_1_45_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_1_45_10&#39;)"><span class="hl_fundecl"><span class="mpre">writeFile</span></span></a><span class="mpre"> </span><a name="loc_45_11_45_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_11_45_15&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre"> = </span><a href="#loc_24_1_24_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_1_24_9&#39;)"><span class="hl_varref"><span class="mpre">withFile</span></span></a><span class="mpre"> </span><a href="#loc_45_11_45_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_11_45_15&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><a href="GHC.IO.IOMode.html#loc_28_32_28_41" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_32_28_41&#39;)"><span class="hl_conref"><span class="mpre">IO.WriteMode</span></span></a><span class="mpre"> </span><a href="Pipes.Prelude.html#loc_245_1_245_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_245_1_245_9&#39;)"><span class="hl_varref"><span class="mpre">P.toHandle</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE writeFile #-}</span></span><span class="mpre">
</span></div></body></html>