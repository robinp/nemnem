<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# OPTIONS_HADDOCK hide #-}
module Distribution.Compat.CopyFile (
  copyFile,
  copyOrdinaryFile,
  copyExecutableFile,
  setFileOrdinary,
  setFileExecutable,
  setDirOrdinary,
  ) where


import Control.Monad
         ( </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="mpre">when</span></a><span class="mpre"> )
import Control.Exception
         ( </span><a href="Control.Exception.Base.html#loc_259_1_259_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_259_1_259_8&#39;)"><span class="mpre">bracket</span></a><span class="mpre">, </span><a href="Control.Exception.Base.html#loc_291_1_291_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_291_1_291_15&#39;)"><span class="mpre">bracketOnError</span></a><span class="mpre">, </span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="mpre">throwIO</span></a><span class="mpre"> )
import Distribution.Compat.Exception
         ( </span><a href="Distribution.Compat.Exception.html#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_14_1_14_8&#39;)"><span class="mpre">catchIO</span></a><span class="mpre"> )
import System.IO.Error
         ( </span><a href="System.IO.Error.html#loc_290_1_290_15" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_290_1_290_15&#39;)"><span class="mpre">ioeSetLocation</span></a><span class="mpre"> )
import System.Directory
         ( </span><a href="System.Directory.html#loc_510_1_510_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_510_1_510_11&#39;)"><span class="mpre">renameFile</span></a><span class="mpre">, </span><a href="System.Directory.html#loc_400_1_400_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_400_1_400_11&#39;)"><span class="mpre">removeFile</span></a><span class="mpre"> )
import Distribution.Compat.TempFile
         ( openBinaryTempFile )
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Compat/CopyFile.hs&quot;, srcSpanStartLine = 25, srcSpanStartColumn = 8, srcSpanEndLine = 25, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;System.FilePath&quot;"><span class="mpre">System.FilePath</span></span><span class="mpre">
         ( takeDirectory )
import System.IO
         ( openBinaryFile, IOMode(ReadMode), hClose, hGetBuf, hPutBuf )
import Foreign
         ( allocaBytes )

#ifndef mingw32_HOST_OS
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Compat/CopyFile.hs&quot;, srcSpanStartLine = 33, srcSpanStartColumn = 8, srcSpanEndLine = 33, srcSpanEndColumn = 30}, srcInfoPoints = []}) &quot;System.Posix.Internals&quot;"><span class="mpre">System.Posix.Internals</span></span><span class="mpre"> (withFilePath)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Compat/CopyFile.hs&quot;, srcSpanStartLine = 34, srcSpanStartColumn = 8, srcSpanEndLine = 34, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;System.Posix.Types&quot;"><span class="mpre">System.Posix.Types</span></span><span class="mpre">
         ( FileMode )
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Compat/CopyFile.hs&quot;, srcSpanStartLine = 36, srcSpanStartColumn = 8, srcSpanEndLine = 36, srcSpanEndColumn = 30}, srcInfoPoints = []}) &quot;System.Posix.Internals&quot;"><span class="mpre">System.Posix.Internals</span></span><span class="mpre">
         ( c_chmod )
import Foreign.C
         ( throwErrnoPathIfMinus1_ )
#endif /* mingw32_HOST_OS */

</span><a href="#loc_43_1_43_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_1_43_17&#39;)"><span class="mpre">copyOrdinaryFile</span></a><span class="mpre">, </span><a href="#loc_44_1_44_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_1_44_19&#39;)"><span class="mpre">copyExecutableFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_43_1_43_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_1_43_17&#39;)"><span class="hl_fundecl"><span class="mpre">copyOrdinaryFile</span></span></a><span class="mpre">   </span><a name="loc_43_20_43_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_20_43_23&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_43_24_43_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_24_43_28&#39;)"><span class="hl_vardecl"><span class="mpre">dest</span></span></a><span class="mpre"> = </span><a href="#loc_63_1_63_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_9&#39;)"><span class="hl_varref"><span class="mpre">copyFile</span></span></a><span class="mpre"> </span><a href="#loc_43_20_43_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_20_43_23&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><a href="#loc_43_24_43_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_24_43_28&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_48_1_48_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_1_48_16&#39;)"><span class="hl_varref"><span class="mpre">setFileOrdinary</span></span></a><span class="mpre">   </span><a href="#loc_43_24_43_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_24_43_28&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre">
</span><a name="loc_44_1_44_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_1_44_19&#39;)"><span class="hl_fundecl"><span class="mpre">copyExecutableFile</span></span></a><span class="mpre"> </span><a name="loc_44_20_44_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_20_44_23&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_44_24_44_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_24_44_28&#39;)"><span class="hl_vardecl"><span class="mpre">dest</span></span></a><span class="mpre"> = </span><a href="#loc_63_1_63_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_9&#39;)"><span class="hl_varref"><span class="mpre">copyFile</span></span></a><span class="mpre"> </span><a href="#loc_44_20_44_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_20_44_23&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><a href="#loc_44_24_44_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_24_44_28&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_49_1_49_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_18&#39;)"><span class="hl_varref"><span class="mpre">setFileExecutable</span></span></a><span class="mpre"> </span><a href="#loc_44_24_44_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_24_44_28&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre">

</span><a href="#loc_48_1_48_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_1_48_16&#39;)"><span class="mpre">setFileOrdinary</span></a><span class="mpre">,  </span><a href="#loc_49_1_49_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_18&#39;)"><span class="mpre">setFileExecutable</span></a><span class="mpre">, </span><a href="#loc_60_1_60_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_15&#39;)"><span class="mpre">setDirOrdinary</span></a><span class="mpre">  :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
#ifndef mingw32_HOST_OS
</span><a name="loc_48_1_48_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_1_48_16&#39;)"><span class="hl_fundecl"><span class="mpre">setFileOrdinary</span></span></a><span class="mpre">   </span><a name="loc_48_19_48_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_19_48_23&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> = </span><a href="#loc_52_1_52_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_12&#39;)"><span class="hl_varref"><span class="mpre">setFileMode</span></span></a><span class="mpre"> </span><a href="#loc_48_19_48_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_48_19_48_23&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0o644</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- file perms -rw-r--r--</span></span><span class="mpre">
</span><a name="loc_49_1_49_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_18&#39;)"><span class="hl_fundecl"><span class="mpre">setFileExecutable</span></span></a><span class="mpre"> </span><a name="loc_49_19_49_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_19_49_23&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> = </span><a href="#loc_52_1_52_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_12&#39;)"><span class="hl_varref"><span class="mpre">setFileMode</span></span></a><span class="mpre"> </span><a href="#loc_49_19_49_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_19_49_23&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0o755</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- file perms -rwxr-xr-x</span></span><span class="mpre">

</span><a href="#loc_52_1_52_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_12&#39;)"><span class="mpre">setFileMode</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FileMode</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_52_1_52_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_1_52_12&#39;)"><span class="hl_fundecl"><span class="mpre">setFileMode</span></span></a><span class="mpre"> </span><a name="loc_52_13_52_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_13_52_17&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre"> </span><a name="loc_52_18_52_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_18_52_19&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> =
  </span><span class="hl_varref"><span class="mpre">withFilePath</span></span><span class="mpre"> </span><a href="#loc_52_13_52_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_13_52_17&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_53_24_53_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_24_53_25&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; do
    </span><span class="hl_varref"><span class="mpre">throwErrnoPathIfMinus1_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;setFileMode&quot;</span></span><span class="mpre"> </span><a href="#loc_52_13_52_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_13_52_17&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">c_chmod</span></span><span class="mpre"> </span><a href="#loc_53_24_53_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_24_53_25&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><a href="#loc_52_18_52_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_18_52_19&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">)
#else
</span><span class="hl_fundecl"><span class="mpre">setFileOrdinary</span></span><span class="mpre">   _ = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
</span><span class="hl_fundecl"><span class="mpre">setFileExecutable</span></span><span class="mpre"> _ = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
#endif
</span><span class="hl_comment"><span class="mpre">-- This happens to be true on Unix and currently on Windows too:</span></span><span class="mpre">
</span><a name="loc_60_1_60_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_15&#39;)"><span class="hl_vardecl"><span class="mpre">setDirOrdinary</span></span></a><span class="mpre"> = </span><a href="#loc_49_1_49_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_1_49_18&#39;)"><span class="hl_varref"><span class="mpre">setFileExecutable</span></span></a><span class="mpre">

</span><a href="#loc_63_1_63_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_9&#39;)"><span class="mpre">copyFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_63_1_63_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_1_63_9&#39;)"><span class="hl_fundecl"><span class="mpre">copyFile</span></span></a><span class="mpre"> </span><a name="loc_63_10_63_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_10_63_19&#39;)"><span class="hl_vardecl"><span class="mpre">fromFPath</span></span></a><span class="mpre"> </span><a name="loc_63_20_63_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_20_63_27&#39;)"><span class="hl_vardecl"><span class="mpre">toFPath</span></span></a><span class="mpre"> =
  </span><a href="#loc_66_11_66_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_11_66_15&#39;)"><span class="hl_varref"><span class="mpre">copy</span></span></a><span class="mpre">
    </span><a href="Distribution.Compat.Exception.html#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_14_1_14_8&#39;)"><span class="hl_infix"><span class="mpre">`catchIO`</span></span></a><span class="mpre"> (\</span><a name="loc_65_17_65_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_17_65_20&#39;)"><span class="hl_vardecl"><span class="mpre">ioe</span></span></a><span class="mpre"> -&gt; </span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="hl_varref"><span class="mpre">throwIO</span></span></a><span class="mpre"> (</span><a href="System.IO.Error.html#loc_290_1_290_15" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_290_1_290_15&#39;)"><span class="hl_varref"><span class="mpre">ioeSetLocation</span></span></a><span class="mpre"> </span><a href="#loc_65_17_65_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_17_65_20&#39;)"><span class="hl_varref"><span class="mpre">ioe</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;copyFile&quot;</span></span><span class="mpre">))
    where </span><a name="loc_66_11_66_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_11_66_15&#39;)"><span class="hl_vardecl"><span class="mpre">copy</span></span></a><span class="mpre"> = </span><a href="Control.Exception.Base.html#loc_259_1_259_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_259_1_259_8&#39;)"><span class="hl_varref"><span class="mpre">bracket</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">openBinaryFile</span></span><span class="mpre"> </span><a href="#loc_63_10_63_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_10_63_19&#39;)"><span class="hl_varref"><span class="mpre">fromFPath</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">ReadMode</span></span><span class="mpre">) </span><span class="hl_varref"><span class="mpre">hClose</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_66_72_66_77" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_72_66_77&#39;)"><span class="hl_vardecl"><span class="mpre">hFrom</span></span></a><span class="mpre"> -&gt;
                 </span><a href="Control.Exception.Base.html#loc_291_1_291_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_291_1_291_15&#39;)"><span class="hl_varref"><span class="mpre">bracketOnError</span></span></a><span class="mpre"> </span><a href="#loc_71_11_71_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_11_71_18&#39;)"><span class="hl_varref"><span class="mpre">openTmp</span></span></a><span class="mpre"> </span><a href="#loc_72_11_72_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_11_72_19&#39;)"><span class="hl_varref"><span class="mpre">cleanTmp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \(</span><a name="loc_67_54_67_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_54_67_62&#39;)"><span class="hl_vardecl"><span class="mpre">tmpFPath</span></span></a><span class="mpre">, </span><a name="loc_67_64_67_68" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_64_67_68&#39;)"><span class="hl_vardecl"><span class="mpre">hTmp</span></span></a><span class="mpre">) -&gt;
                 do </span><span class="hl_varref"><span class="mpre">allocaBytes</span></span><span class="mpre"> </span><a href="#loc_75_11_75_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_11_75_21&#39;)"><span class="hl_varref"><span class="mpre">bufferSize</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_77_11_77_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_11_77_23&#39;)"><span class="hl_varref"><span class="mpre">copyContents</span></span></a><span class="mpre"> </span><a href="#loc_66_72_66_77" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_72_66_77&#39;)"><span class="hl_varref"><span class="mpre">hFrom</span></span></a><span class="mpre"> </span><a href="#loc_67_64_67_68" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_64_67_68&#39;)"><span class="hl_varref"><span class="mpre">hTmp</span></span></a><span class="mpre">
                    </span><span class="hl_varref"><span class="mpre">hClose</span></span><span class="mpre"> </span><a href="#loc_67_64_67_68" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_64_67_68&#39;)"><span class="hl_varref"><span class="mpre">hTmp</span></span></a><span class="mpre">
                    </span><a href="System.Directory.html#loc_510_1_510_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_510_1_510_11&#39;)"><span class="hl_varref"><span class="mpre">renameFile</span></span></a><span class="mpre"> </span><a href="#loc_67_54_67_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_54_67_62&#39;)"><span class="hl_varref"><span class="mpre">tmpFPath</span></span></a><span class="mpre"> </span><a href="#loc_63_20_63_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_20_63_27&#39;)"><span class="hl_varref"><span class="mpre">toFPath</span></span></a><span class="mpre">
          </span><a name="loc_71_11_71_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_11_71_18&#39;)"><span class="hl_vardecl"><span class="mpre">openTmp</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">openBinaryTempFile</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">takeDirectory</span></span><span class="mpre"> </span><a href="#loc_63_20_63_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_20_63_27&#39;)"><span class="hl_varref"><span class="mpre">toFPath</span></span></a><span class="mpre">) </span><span class="hl_string"><span class="mpre">&quot;.copyFile.tmp&quot;</span></span><span class="mpre">
          </span><a name="loc_72_11_72_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_11_72_19&#39;)"><span class="hl_fundecl"><span class="mpre">cleanTmp</span></span></a><span class="mpre"> (</span><a name="loc_72_21_72_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_21_72_29&#39;)"><span class="hl_vardecl"><span class="mpre">tmpFPath</span></span></a><span class="mpre">, </span><a name="loc_72_31_72_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_31_72_35&#39;)"><span class="hl_vardecl"><span class="mpre">hTmp</span></span></a><span class="mpre">) = do
            </span><span class="hl_varref"><span class="mpre">hClose</span></span><span class="mpre"> </span><a href="#loc_72_31_72_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_31_72_35&#39;)"><span class="hl_varref"><span class="mpre">hTmp</span></span></a><span class="mpre">          </span><a href="Distribution.Compat.Exception.html#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_14_1_14_8&#39;)"><span class="hl_infix"><span class="mpre">`catchIO`</span></span></a><span class="mpre"> \_ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            </span><a href="System.Directory.html#loc_400_1_400_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_400_1_400_11&#39;)"><span class="hl_varref"><span class="mpre">removeFile</span></span></a><span class="mpre"> </span><a href="#loc_72_21_72_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_72_21_72_29&#39;)"><span class="hl_varref"><span class="mpre">tmpFPath</span></span></a><span class="mpre">  </span><a href="Distribution.Compat.Exception.html#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_14_1_14_8&#39;)"><span class="hl_infix"><span class="mpre">`catchIO`</span></span></a><span class="mpre"> \_ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
          </span><a name="loc_75_11_75_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_11_75_21&#39;)"><span class="hl_vardecl"><span class="mpre">bufferSize</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">4096</span></span><span class="mpre">

          </span><a name="loc_77_11_77_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_11_77_23&#39;)"><span class="hl_fundecl"><span class="mpre">copyContents</span></span></a><span class="mpre"> </span><a name="loc_77_24_77_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_24_77_29&#39;)"><span class="hl_vardecl"><span class="mpre">hFrom</span></span></a><span class="mpre"> </span><a name="loc_77_30_77_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_30_77_33&#39;)"><span class="hl_vardecl"><span class="mpre">hTo</span></span></a><span class="mpre"> </span><a name="loc_77_34_77_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_34_77_40&#39;)"><span class="hl_vardecl"><span class="mpre">buffer</span></span></a><span class="mpre"> = do
                  </span><a name="loc_78_19_78_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_19_78_24&#39;)"><span class="hl_vardecl"><span class="mpre">count</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">hGetBuf</span></span><span class="mpre"> </span><a href="#loc_77_24_77_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_24_77_29&#39;)"><span class="hl_varref"><span class="mpre">hFrom</span></span></a><span class="mpre"> </span><a href="#loc_77_34_77_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_34_77_40&#39;)"><span class="hl_varref"><span class="mpre">buffer</span></span></a><span class="mpre"> </span><a href="#loc_75_11_75_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_11_75_21&#39;)"><span class="hl_varref"><span class="mpre">bufferSize</span></span></a><span class="mpre">
                  </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_78_19_78_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_19_78_24&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
                          </span><span class="hl_varref"><span class="mpre">hPutBuf</span></span><span class="mpre"> </span><a href="#loc_77_30_77_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_30_77_33&#39;)"><span class="hl_varref"><span class="mpre">hTo</span></span></a><span class="mpre"> </span><a href="#loc_77_34_77_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_34_77_40&#39;)"><span class="hl_varref"><span class="mpre">buffer</span></span></a><span class="mpre"> </span><a href="#loc_78_19_78_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_78_19_78_24&#39;)"><span class="hl_varref"><span class="mpre">count</span></span></a><span class="mpre">
                          </span><a href="#loc_77_11_77_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_11_77_23&#39;)"><span class="hl_varref"><span class="mpre">copyContents</span></span></a><span class="mpre"> </span><a href="#loc_77_24_77_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_24_77_29&#39;)"><span class="hl_varref"><span class="mpre">hFrom</span></span></a><span class="mpre"> </span><a href="#loc_77_30_77_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_30_77_33&#39;)"><span class="hl_varref"><span class="mpre">hTo</span></span></a><span class="mpre"> </span><a href="#loc_77_34_77_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_34_77_40&#39;)"><span class="hl_varref"><span class="mpre">buffer</span></span></a><span class="mpre">
</span></div></body></html>