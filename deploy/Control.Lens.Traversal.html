<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE Rank2Types #-}
{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FunctionalDependencies #-}
{-# LANGUAGE ScopedTypeVariables #-}

#ifdef TRUSTWORTHY
{-# LANGUAGE Trustworthy #-}
#endif

#ifndef MIN_VERSION_containers
#define MIN_VERSION_containers(x,y,z) 1
#endif
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Lens.Traversal</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2012-14 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  Rank2Types</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A @&#39;Traversal&#39; s t a b@ is a generalization of &#39;traverse&#39; from</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Traversable&#39;. It allows you to &#39;traverse&#39; over a structure and change out</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- its contents with monadic or &#39;Applicative&#39; side-effects. Starting from</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;traverse&#39; :: (&#39;Traversable&#39; t, &#39;Applicative&#39; f) =&gt; (a -&gt; f b) -&gt; t a -&gt; f (t b)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- we monomorphize the contents and result to obtain</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- type &#39;Traversal&#39; s t a b = forall f. &#39;Applicative&#39; f =&gt; (a -&gt; f b) -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- While a &#39;Traversal&#39; isn&#39;t quite a &#39;Fold&#39;, it _can_ be used for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Getter.Getting&#39; like a &#39;Fold&#39;, because given a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Data.Monoid.Monoid&#39; @m@, we have an &#39;Applicative&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- for @(&#39;Const&#39; m)@. Everything you know how to do with a &#39;Traversable&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- container, you can with with a &#39;Traversal&#39;, and here we provide</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- combinators that generalize the usual &#39;Traversable&#39; operations.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Lens.Traversal
  (
  </span><span class="hl_comment"><span class="mpre">-- * Traversals</span></span><span class="mpre">
    Traversal, Traversal&#39;
  , Traversal1, Traversal1&#39;
  , IndexedTraversal, IndexedTraversal&#39;
  , IndexedTraversal1, IndexedTraversal1&#39;
  , ATraversal, ATraversal&#39;
  , ATraversal1, ATraversal1&#39;
  , AnIndexedTraversal, AnIndexedTraversal&#39;
  , AnIndexedTraversal1, AnIndexedTraversal1&#39;
  , Traversing, Traversing&#39;
  , Traversing1, Traversing1&#39;

  </span><span class="hl_comment"><span class="mpre">-- * Traversing and Lensing</span></span><span class="mpre">
  , traverseOf, forOf, sequenceAOf
  , mapMOf, forMOf, sequenceOf
  , transposeOf
  , mapAccumLOf, mapAccumROf
  , scanr1Of, scanl1Of
  , failover, ifailover

  </span><span class="hl_comment"><span class="mpre">-- * Monomorphic Traversals</span></span><span class="mpre">
  , cloneTraversal
  , cloneIndexPreservingTraversal
  , cloneIndexedTraversal
  , cloneTraversal1
  , cloneIndexPreservingTraversal1
  , cloneIndexedTraversal1

  </span><span class="hl_comment"><span class="mpre">-- * Parts and Holes</span></span><span class="mpre">
  , partsOf, partsOf&#39;
  , unsafePartsOf, unsafePartsOf&#39;
  , holesOf
  , singular, unsafeSingular

  </span><span class="hl_comment"><span class="mpre">-- * Common Traversals</span></span><span class="mpre">
  , Traversable(traverse)
  , Traversable1(traverse1)
  , both
  , beside
  , taking
  , dropping
  , failing
  , deepOf

  </span><span class="hl_comment"><span class="mpre">-- * Indexed Traversals</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- ** Common</span></span><span class="mpre">
  , ignored
  , TraverseMin(..)
  , TraverseMax(..)
  , traversed
  , traversed1
  , traversed64
  , elementOf
  , element
  , elementsOf
  , elements

  </span><span class="hl_comment"><span class="mpre">-- ** Combinators</span></span><span class="mpre">
  , ipartsOf
  , ipartsOf&#39;
  , iunsafePartsOf
  , iunsafePartsOf&#39;
  , itraverseOf
  , iforOf
  , imapMOf
  , iforMOf
  , imapAccumROf
  , imapAccumLOf

  </span><span class="hl_comment"><span class="mpre">-- * Implementation Details</span></span><span class="mpre">
  , Bazaar(..), Bazaar&#39;
  , Bazaar1(..), Bazaar1&#39;
  , loci
  , iloci
  ) where

import Control.Applicative as Applicative
import Control.Applicative.Backwards
import Control.Category
import Control.Comonad
import Control.Lens.Fold
import Control.Lens.Getter (</span><a href="Control.Lens.Getter.html#loc_455_1_455_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Getter.html#loc_455_1_455_8&#39;)"><span class="mpre">coerced</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 132, srcSpanStartColumn = 8, srcSpanEndLine = 132, srcSpanEndColumn = 36}, srcInfoPoints = []}) &quot;Control.Lens.Internal.Bazaar&quot;"><span class="mpre">Control.Lens.Internal.Bazaar</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 133, srcSpanStartColumn = 8, srcSpanEndLine = 133, srcSpanEndColumn = 37}, srcInfoPoints = []}) &quot;Control.Lens.Internal.Context&quot;"><span class="mpre">Control.Lens.Internal.Context</span></span><span class="mpre">
import Control.Lens.Internal.Indexed
import Control.Lens.Lens
import Control.Lens.Type
import Control.Monad
import Control.Monad.Trans.State.Lazy
import Data.Bitraversable
import Data.Functor.Compose
import Data.Int
import Data.IntMap as IntMap
import Data.Map as Map
import Data.Monoid
import Data.Profunctor
import Data.Profunctor.Rep
import Data.Profunctor.Unsafe
import Data.Semigroup.Traversable
import Data.Tagged
import Data.Traversable
import Data.Tuple (</span><a href="Data.Tuple.html#loc_64_1_64_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tuple.html#loc_64_1_64_5&#39;)"><span class="mpre">swap</span></a><span class="mpre">)
import GHC.Magic (</span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="mpre">inline</span></a><span class="mpre">)
import Prelude hiding ((.),id)

</span><span class="hl_comment"><span class="mpre">-- $setup</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; :set -XNoOverloadedStrings</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Control.Lens</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Control.DeepSeq (NFData (..), force)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Control.Exception (evaluate)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Data.Maybe (fromMaybe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Debug.SimpleReflect.Vars</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Data.Void</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import System.Timeout (timeout)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let timingOut :: NFData a =&gt; a -&gt; IO a; timingOut = fmap (fromMaybe (error &quot;timeout&quot;)) . timeout (5*10^6) . evaluate . force</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Traversals</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | When you see this as an argument to a function, it expects a &#39;Traversal&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 171, srcSpanStartColumn = 1, srcSpanEndLine = 171, srcSpanEndColumn = 61}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 171, srcSpanStartColumn = 1, srcSpanEndLine = 171, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type ATraversal s t a b = LensLike (Bazaar (-&gt;) a b) s t a b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- type &#39;ATraversal&#39;&#39; = &#39;Simple&#39; &#39;ATraversal&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 176, srcSpanStartColumn = 1, srcSpanEndLine = 176, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 176, srcSpanStartColumn = 1, srcSpanEndLine = 176, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type ATraversal&#39; s a = ATraversal s s a a</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | When you see this as an argument to a function, it expects a &#39;Traversal1&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 180, srcSpanStartColumn = 1, srcSpanEndLine = 180, srcSpanEndColumn = 63}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 180, srcSpanStartColumn = 1, srcSpanEndLine = 180, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type ATraversal1 s t a b = LensLike (Bazaar1 (-&gt;) a b) s t a b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- type &#39;ATraversal1&#39;&#39; = &#39;Simple&#39; &#39;ATraversal1&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 185, srcSpanStartColumn = 1, srcSpanEndLine = 185, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 185, srcSpanStartColumn = 1, srcSpanEndLine = 185, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type ATraversal1&#39; s a = ATraversal1 s s a a</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | When you see this as an argument to a function, it expects an &#39;IndexedTraversal&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 188, srcSpanStartColumn = 1, srcSpanEndLine = 188, srcSpanEndColumn = 86}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 188, srcSpanStartColumn = 1, srcSpanEndLine = 188, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type AnIndexedTraversal i s t a b = Over (Indexed i) (Bazaar (Indexed i) a b) s t a b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | When you see this as an argument to a function, it expects an &#39;IndexedTraversal1&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 191, srcSpanStartColumn = 1, srcSpanEndLine = 191, srcSpanEndColumn = 88}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 191, srcSpanStartColumn = 1, srcSpanEndLine = 191, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type AnIndexedTraversal1 i s t a b = Over (Indexed i) (Bazaar1 (Indexed i) a b) s t a b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- type &#39;AnIndexedTraversal&#39;&#39; = &#39;Simple&#39; (&#39;AnIndexedTraversal&#39; i)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 1, srcSpanEndLine = 196, srcSpanEndColumn = 62}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 1, srcSpanEndLine = 196, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type AnIndexedTraversal&#39; i s a = AnIndexedTraversal i s s a a</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- type &#39;AnIndexedTraversal1&#39;&#39; = &#39;Simple&#39; (&#39;AnIndexedTraversal1&#39; i)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 201, srcSpanStartColumn = 1, srcSpanEndLine = 201, srcSpanEndColumn = 64}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 201, srcSpanStartColumn = 1, srcSpanEndLine = 201, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type AnIndexedTraversal1&#39; i s a = AnIndexedTraversal1 i s s a a</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | When you see this as an argument to a function, it expects</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  * to be indexed if @p@ is an instance of &#39;Indexed&#39; i,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  * to be unindexed if @p@ is @(-&gt;)@,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  * a &#39;Traversal&#39; if @f@ is &#39;Applicative&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  * a &#39;Getter&#39; if  @f@ is only &#39;Gettable&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  * a &#39;Lens&#39; if @p@ is only a &#39;Functor&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  * a &#39;Fold&#39; if &#39;f&#39; is &#39;Gettable&#39; and &#39;Applicative&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 217, srcSpanStartColumn = 1, srcSpanEndLine = 217, srcSpanEndColumn = 63}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 217, srcSpanStartColumn = 1, srcSpanEndLine = 217, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type Traversing p f s t a b = Over p (BazaarT p f a b) s t a b</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 219, srcSpanStartColumn = 1, srcSpanEndLine = 219, srcSpanEndColumn = 65}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 219, srcSpanStartColumn = 1, srcSpanEndLine = 219, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type Traversing1 p f s t a b = Over p (BazaarT1 p f a b) s t a b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- type &#39;Traversing&#39;&#39; f = &#39;Simple&#39; (&#39;Traversing&#39; f)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 224, srcSpanStartColumn = 1, srcSpanEndLine = 224, srcSpanEndColumn = 50}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 224, srcSpanStartColumn = 1, srcSpanEndLine = 224, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type Traversing&#39; p f s a = Traversing p f s s a a</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 225, srcSpanStartColumn = 1, srcSpanEndLine = 225, srcSpanEndColumn = 52}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 225, srcSpanStartColumn = 1, srcSpanEndLine = 225, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">type Traversing1&#39; p f s a = Traversing1 p f s s a a</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">--------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Traversal Combinators</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Map each element of a structure targeted by a &#39;Lens&#39; or &#39;Traversal&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- evaluate these actions from left to right, and collect the results.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function is only provided for consistency, &#39;id&#39; is strictly more general.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; traverseOf each print (1,2,3)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ((),(),())</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;traverseOf&#39; ≡ &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;itraverseOf&#39; l ≡ &#39;traverseOf&#39; l &#39;.&#39; &#39;Indexed&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;itraverseOf&#39; &#39;itraversed&#39; ≡ &#39;itraverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This yields the obvious law:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;traverse&#39; ≡ &#39;traverseOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;traverseOf&#39; :: &#39;Functor&#39; f =&gt; &#39;Iso&#39; s t a b       -&gt; (a -&gt; f b) -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;traverseOf&#39; :: &#39;Functor&#39; f =&gt; &#39;Lens&#39; s t a b      -&gt; (a -&gt; f b) -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;traverseOf&#39; :: &#39;Applicative&#39; f =&gt; &#39;Traversal&#39; s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_261_1_261_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_1_261_11&#39;)"><span class="mpre">traverseOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_261_1_261_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_1_261_11&#39;)"><span class="hl_vardecl"><span class="mpre">traverseOf</span></span></a><span class="mpre"> = </span><a href="Control.Category.html#loc_34_5_34_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_34_5_34_7&#39;)"><span class="hl_varref"><span class="mpre">id</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_261_1_261_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_1_261_11&#39;)"><span class="mpre">traverseOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A version of &#39;traverseOf&#39; with the arguments flipped, such that:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; forOf each (1,2,3) print</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ((),(),())</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function is only provided for consistency, &#39;flip&#39; is strictly more general.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forOf&#39; ≡ &#39;flip&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forOf&#39; ≡ &#39;flip&#39; . &#39;traverseOf&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;for&#39; ≡ &#39;forOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Indexed.ifor&#39; l s ≡ &#39;for&#39; l s &#39;.&#39; &#39;Indexed&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forOf&#39; :: &#39;Functor&#39; f =&gt; &#39;Iso&#39; s t a b -&gt; s -&gt; (a -&gt; f b) -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forOf&#39; :: &#39;Functor&#39; f =&gt; &#39;Lens&#39; s t a b -&gt; s -&gt; (a -&gt; f b) -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forOf&#39; :: &#39;Applicative&#39; f =&gt; &#39;Traversal&#39; s t a b -&gt; s -&gt; (a -&gt; f b) -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_290_1_290_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_1_290_6&#39;)"><span class="mpre">forOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_290_1_290_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_1_290_6&#39;)"><span class="hl_vardecl"><span class="mpre">forOf</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_290_1_290_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_1_290_6&#39;)"><span class="mpre">forOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Evaluate each action in the structure from left to right, and collect</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the results.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; sequenceAOf both ([1,2],[3,4])</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [(1,3),(1,4),(2,3),(2,4)]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceA&#39; ≡ &#39;sequenceAOf&#39; &#39;traverse&#39; ≡ &#39;traverse&#39; &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceAOf&#39; l ≡ &#39;traverseOf&#39; l &#39;id&#39; ≡ l &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceAOf&#39; :: &#39;Functor&#39; f =&gt; &#39;Iso&#39; s t (f b) b       -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceAOf&#39; :: &#39;Functor&#39; f =&gt; &#39;Lens&#39; s t (f b) b      -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceAOf&#39; :: &#39;Applicative&#39; f =&gt; &#39;Traversal&#39; s t (f b) b -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_310_1_310_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_310_1_310_12&#39;)"><span class="mpre">sequenceAOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_310_1_310_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_310_1_310_12&#39;)"><span class="hl_fundecl"><span class="mpre">sequenceAOf</span></span></a><span class="mpre"> </span><a name="loc_310_13_310_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_310_13_310_14&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_310_13_310_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_310_13_310_14&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_34_5_34_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_34_5_34_7&#39;)"><span class="hl_varref"><span class="mpre">id</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_310_1_310_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_310_1_310_12&#39;)"><span class="mpre">sequenceAOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Map each element of a structure targeted by a &#39;Lens&#39; to a monadic action,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- evaluate these actions from left to right, and collect the results.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; mapMOf both (\x -&gt; [x, x + 1]) (1,3)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [(1,3),(1,4),(2,3),(2,4)]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapM&#39; ≡ &#39;mapMOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapMOf&#39; l ≡ &#39;forM&#39; l &#39;.&#39; &#39;Indexed&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Iso&#39; s t a b       -&gt; (a -&gt; m b) -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Lens&#39; s t a b      -&gt; (a -&gt; m b) -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Traversal&#39; s t a b -&gt; (a -&gt; m b) -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_330_1_330_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_1_330_7&#39;)"><span class="mpre">mapMOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 329, srcSpanStartColumn = 11, srcSpanEndLine = 329, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 329, srcSpanStartColumn = 24, srcSpanEndLine = 329, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Profunctor p =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> (</span><a href="Control.Applicative.html#loc_251_9_251_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_9_251_21&#39;)"><span class="hl_tyconref"><span class="mpre">WrappedMonad</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_330_1_330_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_1_330_7&#39;)"><span class="hl_fundecl"><span class="mpre">mapMOf</span></span></a><span class="mpre"> </span><a name="loc_330_8_330_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_8_330_9&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_330_10_330_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_10_330_13&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_251_40_251_51" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_40_251_51&#39;)"><span class="hl_varref"><span class="mpre">unwrapMonad</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_330_8_330_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_8_330_9&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">WrapMonad</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_330_10_330_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_10_330_13&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_330_1_330_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_1_330_7&#39;)"><span class="mpre">mapMOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;forMOf&#39; is a flipped version of &#39;mapMOf&#39;, consistent with the definition of &#39;forM&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; forMOf both (1,3) $ \x -&gt; [x, x + 1]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [(1,3),(1,4),(2,3),(2,4)]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forM&#39; ≡ &#39;forMOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forMOf&#39; l ≡ &#39;flip&#39; (&#39;mapMOf&#39; l)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iforMOf&#39; l s ≡ &#39;forM&#39; l s &#39;.&#39; &#39;Indexed&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Iso&#39; s t a b       -&gt; s -&gt; (a -&gt; m b) -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Lens&#39; s t a b      -&gt; s -&gt; (a -&gt; m b) -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;forMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Traversal&#39; s t a b -&gt; s -&gt; (a -&gt; m b) -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_350_1_350_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_1_350_7&#39;)"><span class="mpre">forMOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 349, srcSpanStartColumn = 11, srcSpanEndLine = 349, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 349, srcSpanStartColumn = 24, srcSpanEndLine = 349, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Profunctor p =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> (</span><a href="Control.Applicative.html#loc_251_9_251_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_9_251_21&#39;)"><span class="hl_tyconref"><span class="mpre">WrappedMonad</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_350_1_350_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_1_350_7&#39;)"><span class="hl_fundecl"><span class="mpre">forMOf</span></span></a><span class="mpre"> </span><a name="loc_350_8_350_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_8_350_9&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_350_10_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_10_350_11&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_350_12_350_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_12_350_15&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_251_40_251_51" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_40_251_51&#39;)"><span class="hl_varref"><span class="mpre">unwrapMonad</span></span></a><span class="mpre"> (</span><a href="#loc_350_8_350_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_8_350_9&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">WrapMonad</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_350_12_350_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_12_350_15&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre">) </span><a href="#loc_350_10_350_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_10_350_11&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_350_1_350_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_1_350_7&#39;)"><span class="mpre">forMOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Sequence the (monadic) effects targeted by a &#39;Lens&#39; in a container from left to right.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; sequenceOf each ([1,2],[3,4],[5,6])</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [(1,3,5),(1,3,6),(1,4,5),(1,4,6),(2,3,5),(2,3,6),(2,4,5),(2,4,6)]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequence&#39; ≡ &#39;sequenceOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceOf&#39; l ≡ &#39;mapMOf&#39; l &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceOf&#39; l ≡ &#39;unwrapMonad&#39; &#39;.&#39; l &#39;WrapMonad&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Iso&#39; s t (m b) b       -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Lens&#39; s t (m b) b      -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;sequenceOf&#39; :: &#39;Monad&#39; m =&gt; &#39;Traversal&#39; s t (m b) b -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_370_1_370_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_11&#39;)"><span class="mpre">sequenceOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> (</span><a href="Control.Applicative.html#loc_251_9_251_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_9_251_21&#39;)"><span class="hl_tyconref"><span class="mpre">WrappedMonad</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_370_1_370_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_11&#39;)"><span class="hl_fundecl"><span class="mpre">sequenceOf</span></span></a><span class="mpre"> </span><a name="loc_370_12_370_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_12_370_13&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_251_40_251_51" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_40_251_51&#39;)"><span class="hl_varref"><span class="mpre">unwrapMonad</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_370_12_370_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_12_370_13&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">WrapMonad</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_370_1_370_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_11&#39;)"><span class="mpre">sequenceOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This generalizes &#39;Data.List.transpose&#39; to an arbitrary &#39;Traversal&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: &#39;Data.List.transpose&#39; handles ragged inputs more intelligently, but for non-ragged inputs:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; transposeOf traverse [[1,2,3],[4,5,6]]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [[1,4],[2,5],[3,6]]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Data.List.transpose&#39; ≡ &#39;transposeOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Since every &#39;Lens&#39; is a &#39;Traversal&#39;, we can use this as a form of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- monadic strength as well:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;transposeOf&#39; &#39;Control.Lens.Tuple._2&#39; :: (b, [a]) -&gt; [(b, a)]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_391_1_391_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_1_391_12&#39;)"><span class="mpre">transposeOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><a href="Control.Applicative.html#loc_288_9_288_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_288_9_288_16&#39;)"><span class="hl_tyconref"><span class="mpre">ZipList</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">]
</span><a name="loc_391_1_391_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_1_391_12&#39;)"><span class="hl_fundecl"><span class="mpre">transposeOf</span></span></a><span class="mpre"> </span><a name="loc_391_13_391_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_13_391_14&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_288_31_288_41" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_288_31_288_41&#39;)"><span class="hl_varref"><span class="mpre">getZipList</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_391_13_391_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_13_391_14&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">ZipList</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_391_1_391_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_1_391_12&#39;)"><span class="mpre">transposeOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This generalizes &#39;Data.Traversable.mapAccumR&#39; to an arbitrary &#39;Traversal&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumR&#39; ≡ &#39;mapAccumROf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumROf&#39; accumulates &#39;State&#39; from right to left.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumROf&#39; :: &#39;Iso&#39; s t a b       -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumROf&#39; :: &#39;Lens&#39; s t a b      -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumROf&#39; :: &#39;Traversal&#39; s t a b -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumROf&#39; :: &#39;LensLike&#39; (&#39;Backwards&#39; (&#39;State&#39; acc)) s t a b -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_412_1_412_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_412_1_412_12&#39;)"><span class="mpre">mapAccumROf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 411, srcSpanStartColumn = 16, srcSpanEndLine = 411, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 411, srcSpanStartColumn = 28, srcSpanEndLine = 411, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Conjoined p =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> (</span><a href="Control.Applicative.Backwards.html#loc_26_9_26_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.Backwards.html#loc_26_9_26_18&#39;)"><span class="hl_tyconref"><span class="mpre">Backwards</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">State</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">)) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">)
</span><a name="loc_412_1_412_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_412_1_412_12&#39;)"><span class="hl_vardecl"><span class="mpre">mapAccumROf</span></span></a><span class="mpre"> = </span><a href="#loc_435_1_435_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_12&#39;)"><span class="hl_varref"><span class="mpre">mapAccumLOf</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="Control.Lens.Fold.html#loc_1925_1_1925_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Fold.html#loc_1925_1_1925_10&#39;)"><span class="hl_varref"><span class="mpre">backwards</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_412_1_412_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_412_1_412_12&#39;)"><span class="mpre">mapAccumROf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This generalizes &#39;Data.Traversable.mapAccumL&#39; to an arbitrary &#39;Traversal&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumL&#39; ≡ &#39;mapAccumLOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumLOf&#39; accumulates &#39;State&#39; from left to right.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumLOf&#39; :: &#39;Iso&#39; s t a b       -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumLOf&#39; :: &#39;Lens&#39; s t a b      -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumLOf&#39; :: &#39;Traversal&#39; s t a b -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumLOf&#39; :: &#39;LensLike&#39; (&#39;State&#39; acc) s t a b -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;mapAccumLOf&#39; l f acc0 s = &#39;swap&#39; (&#39;runState&#39; (l (\a -&gt; &#39;state&#39; (\acc -&gt; &#39;swap&#39; (f acc a))) s) acc0)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_435_1_435_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_12&#39;)"><span class="mpre">mapAccumLOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 434, srcSpanStartColumn = 16, srcSpanEndLine = 434, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 434, srcSpanStartColumn = 28, srcSpanEndLine = 434, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Conjoined p =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">State</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">)
</span><a name="loc_435_1_435_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_12&#39;)"><span class="hl_fundecl"><span class="mpre">mapAccumLOf</span></span></a><span class="mpre"> </span><a name="loc_435_13_435_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_13_435_14&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_435_15_435_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_15_435_16&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_435_17_435_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_17_435_21&#39;)"><span class="hl_vardecl"><span class="mpre">acc0</span></span></a><span class="mpre"> </span><a name="loc_435_22_435_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_22_435_23&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="Data.Tuple.html#loc_64_1_64_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tuple.html#loc_64_1_64_5&#39;)"><span class="hl_varref"><span class="mpre">swap</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.State.Lazy.html#loc_98_1_98_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Lazy.html#loc_98_1_98_9&#39;)"><span class="hl_varref"><span class="mpre">runState</span></span></a><span class="mpre"> (</span><a href="#loc_435_13_435_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_13_435_14&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_436_4_436_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_4_436_5&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="#loc_435_22_435_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_22_435_23&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) </span><a href="#loc_435_17_435_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_17_435_21&#39;)"><span class="hl_varref"><span class="mpre">acc0</span></span></a><span class="mpre">) where
   </span><a name="loc_436_4_436_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_4_436_5&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Rep.html#loc_83_3_83_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_83_3_83_13&#39;)"><span class="hl_varref"><span class="mpre">cotabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_436_22_436_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_22_436_24&#39;)"><span class="hl_vardecl"><span class="mpre">wa</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.Trans.State.Lazy.html#loc_91_1_91_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Lazy.html#loc_91_1_91_6&#39;)"><span class="hl_varref"><span class="mpre">state</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_436_37_436_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_37_436_40&#39;)"><span class="hl_vardecl"><span class="mpre">acc</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Tuple.html#loc_64_1_64_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tuple.html#loc_64_1_64_5&#39;)"><span class="hl_varref"><span class="mpre">swap</span></span></a><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_435_15_435_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_15_435_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_436_37_436_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_37_436_40&#39;)"><span class="hl_varref"><span class="mpre">acc</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;$</span></span><span class="mpre"> </span><a href="#loc_436_22_436_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_22_436_24&#39;)"><span class="hl_varref"><span class="mpre">wa</span></span></a><span class="mpre">) (</span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_436_22_436_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_22_436_24&#39;)"><span class="hl_varref"><span class="mpre">wa</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">-- This would be much cleaner if the argument order for the function was swapped.</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_435_1_435_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_12&#39;)"><span class="mpre">mapAccumLOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This permits the use of &#39;scanr1&#39; over an arbitrary &#39;Traversal&#39; or &#39;Lens&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;scanr1&#39; ≡ &#39;scanr1Of&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;scanr1Of&#39; :: &#39;Iso&#39; s t a a       -&gt; (a -&gt; a -&gt; a) -&gt; s -&gt; t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;scanr1Of&#39; :: &#39;Lens&#39; s t a a      -&gt; (a -&gt; a -&gt; a) -&gt; s -&gt; t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;scanr1Of&#39; :: &#39;Traversal&#39; s t a a -&gt; (a -&gt; a -&gt; a) -&gt; s -&gt; t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_452_1_452_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_1_452_9&#39;)"><span class="mpre">scanr1Of</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> (</span><a href="Control.Applicative.Backwards.html#loc_26_9_26_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.Backwards.html#loc_26_9_26_18&#39;)"><span class="hl_tyconref"><span class="mpre">Backwards</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">State</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">))) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_452_1_452_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_1_452_9&#39;)"><span class="hl_fundecl"><span class="mpre">scanr1Of</span></span></a><span class="mpre"> </span><a name="loc_452_10_452_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_10_452_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_452_12_452_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_12_452_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Data.Tuple.html#loc_52_1_52_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tuple.html#loc_52_1_52_4&#39;)"><span class="hl_varref"><span class="mpre">snd</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_412_1_412_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_412_1_412_12&#39;)"><span class="hl_varref"><span class="mpre">mapAccumROf</span></span></a><span class="mpre"> </span><a href="#loc_452_10_452_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_10_452_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_453_3_453_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_3_453_7&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> where
  </span><a name="loc_453_3_453_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_3_453_7&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><a name="loc_453_16_453_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_16_453_17&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">  = (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_453_16_453_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_16_453_17&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">, </span><a href="#loc_453_16_453_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_16_453_17&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
  </span><a href="#loc_453_3_453_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_3_453_7&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_454_14_454_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_14_454_15&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) </span><a name="loc_454_17_454_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_454_39_454_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_39_454_40&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">, </span><a href="#loc_454_39_454_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_39_454_40&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">) where </span><a name="loc_454_39_454_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_39_454_40&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><a href="#loc_452_12_452_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_12_452_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_454_17_454_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_454_14_454_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_14_454_15&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_452_1_452_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_1_452_9&#39;)"><span class="mpre">scanr1Of</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This permits the use of &#39;scanl1&#39; over an arbitrary &#39;Traversal&#39; or &#39;Lens&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;scanl1&#39; ≡ &#39;scanl1Of&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;scanl1Of&#39; :: &#39;Iso&#39; s t a a       -&gt; (a -&gt; a -&gt; a) -&gt; s -&gt; t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;scanl1Of&#39; :: &#39;Lens&#39; s t a a      -&gt; (a -&gt; a -&gt; a) -&gt; s -&gt; t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;scanl1Of&#39; :: &#39;Traversal&#39; s t a a -&gt; (a -&gt; a -&gt; a) -&gt; s -&gt; t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_469_1_469_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_1_469_9&#39;)"><span class="mpre">scanl1Of</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">State</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_469_1_469_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_1_469_9&#39;)"><span class="hl_fundecl"><span class="mpre">scanl1Of</span></span></a><span class="mpre"> </span><a name="loc_469_10_469_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_10_469_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_469_12_469_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_12_469_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Data.Tuple.html#loc_52_1_52_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tuple.html#loc_52_1_52_4&#39;)"><span class="hl_varref"><span class="mpre">snd</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_435_1_435_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_12&#39;)"><span class="hl_varref"><span class="mpre">mapAccumLOf</span></span></a><span class="mpre"> </span><a href="#loc_469_10_469_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_10_469_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_470_3_470_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_3_470_7&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> where
  </span><a name="loc_470_3_470_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_3_470_7&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><a name="loc_470_16_470_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_16_470_17&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">  = (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_470_16_470_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_16_470_17&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">, </span><a href="#loc_470_16_470_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_16_470_17&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
  </span><a href="#loc_470_3_470_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_3_470_7&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_471_14_471_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_14_471_15&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) </span><a name="loc_471_17_471_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_17_471_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_471_39_471_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_39_471_40&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">, </span><a href="#loc_471_39_471_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_39_471_40&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">) where </span><a name="loc_471_39_471_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_39_471_40&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><a href="#loc_469_12_469_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_12_469_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_471_14_471_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_14_471_15&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><a href="#loc_471_17_471_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_17_471_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_469_1_469_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_1_469_9&#39;)"><span class="mpre">scanl1Of</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This &#39;Traversal&#39; allows you to &#39;traverse&#39; the individual stores in a &#39;Bazaar&#39;.</span></span><span class="mpre">
</span><a href="#loc_476_1_476_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_5&#39;)"><span class="mpre">loci</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Traversal</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Bazaar</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">(-&gt;)</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Bazaar</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">(-&gt;)</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_476_1_476_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_5&#39;)"><span class="hl_fundecl"><span class="mpre">loci</span></span></a><span class="mpre"> </span><a name="loc_476_6_476_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_6_476_7&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_476_8_476_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_8_476_9&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> = </span><a href="Data.Functor.Compose.html#loc_27_35_27_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Compose.html#loc_27_35_27_45&#39;)"><span class="hl_varref"><span class="mpre">getCompose</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">runBazaar</span></span><span class="mpre"> </span><a href="#loc_476_8_476_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_8_476_9&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Compose</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_476_6_476_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_6_476_7&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_476_1_476_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_5&#39;)"><span class="mpre">loci</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This &#39;IndexedTraversal&#39; allows you to &#39;traverse&#39; the individual stores in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a &#39;Bazaar&#39; with access to their indices.</span></span><span class="mpre">
</span><a href="#loc_482_1_482_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_1_482_6&#39;)"><span class="mpre">iloci</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Bazaar</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Bazaar</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_482_1_482_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_1_482_6&#39;)"><span class="hl_fundecl"><span class="mpre">iloci</span></span></a><span class="mpre"> </span><a name="loc_482_7_482_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_7_482_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_482_9_482_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_9_482_10&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> = </span><a href="Data.Functor.Compose.html#loc_27_35_27_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Compose.html#loc_27_35_27_45&#39;)"><span class="hl_varref"><span class="mpre">getCompose</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">runBazaar</span></span><span class="mpre"> </span><a href="#loc_482_9_482_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_9_482_10&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Compose</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> (\</span><a name="loc_482_59_482_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_59_482_60&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_482_59_482_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_59_482_60&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_482_7_482_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_7_482_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_482_59_482_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_59_482_60&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">)))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_482_1_482_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_1_482_6&#39;)"><span class="mpre">iloci</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Parts and Holes</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;partsOf&#39; turns a &#39;Traversal&#39; into a &#39;Lens&#39; that resembles an early version of the &#39;Data.Data.Lens.uniplate&#39; (or &#39;Data.Data.Lens.biplate&#39;) type.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Note:/ You should really try to maintain the invariant of the number of children in the list.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (a,b,c) &amp; partsOf each .~ [x,y,z]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (x,y,z)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Any extras will be lost. If you do not supply enough, then the remainder will come from the original structure.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (a,b,c) &amp; partsOf each .~ [w,x,y,z]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (w,x,y)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (a,b,c) &amp; partsOf each .~ [x,y]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (x,y,c)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- So technically, this is only a &#39;Lens&#39; if you do not change the number of results it returns.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When applied to a &#39;Fold&#39; the result is merely a &#39;Getter&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;partsOf&#39; :: &#39;Iso&#39;&#39; s a       -&gt; &#39;Lens&#39;&#39; s [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;partsOf&#39; :: &#39;Lens&#39;&#39; s a      -&gt; &#39;Lens&#39;&#39; s [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;partsOf&#39; :: &#39;Traversal&#39;&#39; s a -&gt; &#39;Lens&#39;&#39; s [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;partsOf&#39; :: &#39;Fold&#39; s a       -&gt; &#39;Getter&#39; s [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;partsOf&#39; :: &#39;Getter&#39; s a     -&gt; &#39;Getter&#39; s [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_516_1_516_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_1_516_8&#39;)"><span class="mpre">partsOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 515, srcSpanStartColumn = 12, srcSpanEndLine = 515, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 515, srcSpanStartColumn = 22, srcSpanEndLine = 515, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Functor f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">(-&gt;)</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_516_1_516_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_1_516_8&#39;)"><span class="hl_fundecl"><span class="mpre">partsOf</span></span></a><span class="mpre"> </span><a name="loc_516_9_516_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_9_516_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_516_11_516_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_11_516_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_516_13_516_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_13_516_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_varref"><span class="mpre">outs</span></span></a><span class="mpre"> </span><a href="#loc_516_44_516_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_44_516_45&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_516_11_516_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_11_516_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_varref"><span class="mpre">ins</span></span></a><span class="mpre"> </span><a href="#loc_516_44_516_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_44_516_45&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) where </span><a name="loc_516_44_516_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_44_516_45&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_516_9_516_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_9_516_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_516_13_516_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_13_516_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_516_1_516_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_1_516_8&#39;)"><span class="mpre">partsOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | An indexed version of &#39;partsOf&#39; that receives the entire list of indices as its index.</span></span><span class="mpre">
</span><a href="#loc_521_1_521_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_1_521_9&#39;)"><span class="mpre">ipartsOf</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">. </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 520, srcSpanStartColumn = 33, srcSpanEndLine = 520, srcSpanEndColumn = 64}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 520, srcSpanStartColumn = 33, srcSpanEndLine = 520, srcSpanEndColumn = 34},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Indexable [i] p, Functor f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_521_1_521_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_1_521_9&#39;)"><span class="hl_fundecl"><span class="mpre">ipartsOf</span></span></a><span class="mpre"> </span><a name="loc_521_10_521_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_10_521_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre">
  (\</span><a name="loc_522_5_522_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_5_522_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_522_7_522_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_7_522_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_522_16_522_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_16_522_17&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_521_10_521_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_10_521_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_522_7_522_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_7_522_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">                            in </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_varref"><span class="mpre">outs</span></span></a><span class="mpre"> </span><a href="#loc_522_16_522_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_16_522_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_522_5_522_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_5_522_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_681_1_681_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_1_681_5&#39;)"><span class="hl_varref"><span class="mpre">wins</span></span></a><span class="mpre"> </span><a href="#loc_522_16_522_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_16_522_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">))
  (\</span><a name="loc_523_5_523_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_5_523_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_523_7_523_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_7_523_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_523_16_523_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_16_523_17&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_521_10_521_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_10_521_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_523_7_523_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_7_523_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">; (</span><a name="loc_523_38_523_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_38_523_40&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">, </span><a name="loc_523_42_523_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_42_523_44&#39;)"><span class="hl_vardecl"><span class="mpre">as</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">unzip</span></span><span class="mpre"> (</span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_523_16_523_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_16_523_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) in </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_varref"><span class="mpre">outs</span></span></a><span class="mpre"> </span><a href="#loc_523_16_523_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_16_523_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_523_5_523_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_5_523_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_523_38_523_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_38_523_40&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> :: [</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">]) </span><a href="#loc_523_42_523_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_523_42_523_44&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_521_1_521_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_1_521_9&#39;)"><span class="mpre">ipartsOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A type-restricted version of &#39;partsOf&#39; that can only be used with a &#39;Traversal&#39;.</span></span><span class="mpre">
</span><a href="#loc_528_1_528_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_1_528_9&#39;)"><span class="mpre">partsOf&#39;</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ATraversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_528_1_528_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_1_528_9&#39;)"><span class="hl_fundecl"><span class="mpre">partsOf&#39;</span></span></a><span class="mpre"> </span><a name="loc_528_10_528_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_10_528_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_528_12_528_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_12_528_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_528_14_528_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_14_528_15&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_varref"><span class="mpre">outs</span></span></a><span class="mpre"> </span><a href="#loc_528_45_528_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_45_528_46&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_528_12_528_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_12_528_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_varref"><span class="mpre">ins</span></span></a><span class="mpre"> </span><a href="#loc_528_45_528_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_45_528_46&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) where </span><a name="loc_528_45_528_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_45_528_46&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_528_10_528_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_10_528_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_528_14_528_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_14_528_15&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_528_1_528_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_1_528_9&#39;)"><span class="mpre">partsOf&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A type-restricted version of &#39;ipartsOf&#39; that can only be used with an &#39;IndexedTraversal&#39;.</span></span><span class="mpre">
</span><a href="#loc_533_1_533_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_1_533_10&#39;)"><span class="mpre">ipartsOf&#39;</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">. </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 532, srcSpanStartColumn = 34, srcSpanEndLine = 532, srcSpanEndColumn = 65}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 532, srcSpanStartColumn = 34, srcSpanEndLine = 532, srcSpanEndColumn = 35},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Indexable [i] p, Functor f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Bazaar&#39;</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_533_1_533_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_1_533_10&#39;)"><span class="hl_fundecl"><span class="mpre">ipartsOf&#39;</span></span></a><span class="mpre"> </span><a name="loc_533_11_533_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_11_533_12&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre">
  (\</span><a name="loc_534_5_534_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_5_534_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_534_7_534_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_7_534_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_534_16_534_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_16_534_17&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_533_11_533_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_11_533_12&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_534_7_534_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_7_534_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">                            in </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_varref"><span class="mpre">outs</span></span></a><span class="mpre"> </span><a href="#loc_534_16_534_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_16_534_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_534_5_534_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_5_534_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_681_1_681_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_1_681_5&#39;)"><span class="hl_varref"><span class="mpre">wins</span></span></a><span class="mpre"> </span><a href="#loc_534_16_534_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_534_16_534_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">))
  (\</span><a name="loc_535_5_535_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_5_535_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_535_7_535_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_7_535_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_535_16_535_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_16_535_17&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_533_11_533_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_11_533_12&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_535_7_535_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_7_535_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">; (</span><a name="loc_535_38_535_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_38_535_40&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">, </span><a name="loc_535_42_535_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_42_535_44&#39;)"><span class="hl_vardecl"><span class="mpre">as</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">unzip</span></span><span class="mpre"> (</span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_535_16_535_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_16_535_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) in </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_varref"><span class="mpre">outs</span></span></a><span class="mpre"> </span><a href="#loc_535_16_535_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_16_535_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_535_5_535_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_5_535_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_535_38_535_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_38_535_40&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> :: [</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">]) </span><a href="#loc_535_42_535_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_535_42_535_44&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_533_1_533_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_1_533_10&#39;)"><span class="mpre">ipartsOf&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;unsafePartsOf&#39; turns a &#39;Traversal&#39; into a &#39;Data.Data.Lens.uniplate&#39; (or &#39;Data.Data.Lens.biplate&#39;) family.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you do not need the types of @s@ and @t@ to be different, it is recommended that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- you use &#39;partsOf&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It is generally safer to traverse with the &#39;Bazaar&#39; rather than use this</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- combinator. However, it is sometimes convenient.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is unsafe because if you don&#39;t supply at least as many @b@&#39;s as you were</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- given @a@&#39;s, then the reconstruction of @t@ /will/ result in an error!</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When applied to a &#39;Fold&#39; the result is merely a &#39;Getter&#39; (and becomes safe).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafePartsOf&#39; :: &#39;Iso&#39; s t a b       -&gt; &#39;Lens&#39; s t [a] [b]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafePartsOf&#39; :: &#39;Lens&#39; s t a b      -&gt; &#39;Lens&#39; s t [a] [b]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafePartsOf&#39; :: &#39;Traversal&#39; s t a b -&gt; &#39;Lens&#39; s t [a] [b]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafePartsOf&#39; :: &#39;Fold&#39; s a          -&gt; &#39;Getter&#39; s [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafePartsOf&#39; :: &#39;Getter&#39; s a        -&gt; &#39;Getter&#39; s [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_559_1_559_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_1_559_14&#39;)"><span class="mpre">unsafePartsOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 558, srcSpanStartColumn = 18, srcSpanEndLine = 558, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 558, srcSpanStartColumn = 28, srcSpanEndLine = 558, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Functor f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">(-&gt;)</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] [</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">]
</span><a name="loc_559_1_559_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_1_559_14&#39;)"><span class="hl_fundecl"><span class="mpre">unsafePartsOf</span></span></a><span class="mpre"> </span><a name="loc_559_15_559_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_15_559_16&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_559_17_559_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_17_559_18&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_559_19_559_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_19_559_20&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_559_56_559_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_56_559_57&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_559_17_559_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_17_559_18&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_varref"><span class="mpre">ins</span></span></a><span class="mpre"> </span><a href="#loc_559_56_559_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_56_559_57&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) where </span><a name="loc_559_56_559_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_56_559_57&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_559_15_559_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_15_559_16&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_559_19_559_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_19_559_20&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_559_1_559_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_559_1_559_14&#39;)"><span class="mpre">unsafePartsOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | An indexed version of &#39;unsafePartsOf&#39; that receives the entire list of indices as its index.</span></span><span class="mpre">
</span><a href="#loc_564_1_564_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_15&#39;)"><span class="mpre">iunsafePartsOf</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">. </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 563, srcSpanStartColumn = 41, srcSpanEndLine = 563, srcSpanEndColumn = 72}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 563, srcSpanStartColumn = 41, srcSpanEndLine = 563, srcSpanEndColumn = 42},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Indexable [i] p, Functor f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] [</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">]
</span><a name="loc_564_1_564_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_15&#39;)"><span class="hl_fundecl"><span class="mpre">iunsafePartsOf</span></span></a><span class="mpre"> </span><a name="loc_564_16_564_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_16_564_17&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre">
  (\</span><a name="loc_565_5_565_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_5_565_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_565_7_565_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_7_565_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_565_16_565_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_16_565_17&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_564_16_564_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_16_564_17&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_565_7_565_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_7_565_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">                           in </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_565_16_565_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_16_565_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_565_5_565_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_5_565_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_681_1_681_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_1_681_5&#39;)"><span class="hl_varref"><span class="mpre">wins</span></span></a><span class="mpre"> </span><a href="#loc_565_16_565_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_16_565_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">))
  (\</span><a name="loc_566_5_566_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_5_566_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_566_7_566_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_7_566_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_566_16_566_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_16_566_17&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_564_16_564_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_16_564_17&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_566_7_566_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_7_566_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">; (</span><a name="loc_566_38_566_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_38_566_40&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">,</span><a name="loc_566_41_566_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_41_566_43&#39;)"><span class="hl_vardecl"><span class="mpre">as</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">unzip</span></span><span class="mpre"> (</span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_566_16_566_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_16_566_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) in </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_566_16_566_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_16_566_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_566_5_566_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_5_566_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_566_38_566_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_38_566_40&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> :: [</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">]) </span><a href="#loc_566_41_566_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_566_41_566_43&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_564_1_564_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_15&#39;)"><span class="mpre">iunsafePartsOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_570_1_570_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_15&#39;)"><span class="mpre">unsafePartsOf&#39;</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ATraversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] [</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">]
</span><a name="loc_570_1_570_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_15&#39;)"><span class="hl_fundecl"><span class="mpre">unsafePartsOf&#39;</span></span></a><span class="mpre"> </span><a name="loc_570_16_570_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_16_570_17&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_570_18_570_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_18_570_19&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_570_20_570_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_20_570_21&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_570_57_570_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_57_570_58&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_570_18_570_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_18_570_19&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_varref"><span class="mpre">ins</span></span></a><span class="mpre"> </span><a href="#loc_570_57_570_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_57_570_58&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) where </span><a name="loc_570_57_570_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_57_570_58&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_570_16_570_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_16_570_17&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_570_20_570_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_20_570_21&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_570_1_570_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_570_1_570_15&#39;)"><span class="mpre">unsafePartsOf&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_574_1_574_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_1_574_16&#39;)"><span class="mpre">iunsafePartsOf&#39;</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">. </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Bazaar</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedLens</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">] </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] [</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">]
</span><a name="loc_574_1_574_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_1_574_16&#39;)"><span class="hl_fundecl"><span class="mpre">iunsafePartsOf&#39;</span></span></a><span class="mpre"> </span><a name="loc_574_17_574_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_17_574_18&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre">
  (\</span><a name="loc_575_5_575_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_5_575_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_575_7_575_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_7_575_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_575_16_575_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_16_575_17&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_574_17_574_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_17_574_18&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_575_7_575_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_7_575_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">                            in </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_575_16_575_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_16_575_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_575_5_575_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_5_575_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_681_1_681_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_1_681_5&#39;)"><span class="hl_varref"><span class="mpre">wins</span></span></a><span class="mpre"> </span><a href="#loc_575_16_575_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_16_575_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">))
  (\</span><a name="loc_576_5_576_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_5_576_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_576_7_576_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_7_576_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_576_16_576_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_16_576_17&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_574_17_574_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_17_574_18&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_576_7_576_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_7_576_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">; (</span><a name="loc_576_38_576_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_38_576_40&#39;)"><span class="hl_vardecl"><span class="mpre">is</span></span></a><span class="mpre">, </span><a name="loc_576_42_576_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_42_576_44&#39;)"><span class="hl_vardecl"><span class="mpre">as</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">unzip</span></span><span class="mpre"> (</span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_576_16_576_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_16_576_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) in </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_576_16_576_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_16_576_17&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_576_5_576_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_5_576_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_576_38_576_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_38_576_40&#39;)"><span class="hl_varref"><span class="mpre">is</span></span></a><span class="mpre"> :: [</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">]) </span><a href="#loc_576_42_576_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_42_576_44&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_574_1_574_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_1_574_16&#39;)"><span class="mpre">iunsafePartsOf&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The one-level version of &#39;Control.Lens.Plated.contextsOf&#39;. This extracts a list of the immediate children according to a given &#39;Traversal&#39; as editable contexts.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Given a context you can use &#39;Control.Comonad.Store.Class.pos&#39; to see the values, &#39;Control.Comonad.Store.Class.peek&#39; at what the structure would be like with an edited result, or simply &#39;extract&#39; the original structure.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- propChildren l x = childrenOf l x &#39;==&#39; &#39;map&#39; &#39;Control.Comonad.Store.Class.pos&#39; (&#39;holesOf&#39; l x)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- propId l x = &#39;all&#39; (&#39;==&#39; x) [&#39;extract&#39; w | w &lt;- &#39;holesOf&#39; l x]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;holesOf&#39; :: &#39;Iso&#39;&#39; s a                -&gt; s -&gt; [&#39;Pretext&#39;&#39; (-&gt;) a s]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;holesOf&#39; :: &#39;Lens&#39;&#39; s a               -&gt; s -&gt; [&#39;Pretext&#39;&#39; (-&gt;) a s]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;holesOf&#39; :: &#39;Traversal&#39;&#39; s a          -&gt; s -&gt; [&#39;Pretext&#39;&#39; (-&gt;) a s]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;holesOf&#39; :: &#39;IndexedLens&#39;&#39; i s a      -&gt; s -&gt; [&#39;Pretext&#39;&#39; (&#39;Indexed&#39; i) a s]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;holesOf&#39; :: &#39;IndexedTraversal&#39;&#39; i s a -&gt; s -&gt; [&#39;Pretext&#39;&#39; (&#39;Indexed&#39; i) a s]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_596_1_596_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_1_596_8&#39;)"><span class="mpre">holesOf</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">. </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 595, srcSpanStartColumn = 28, srcSpanEndLine = 595, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 595, srcSpanStartColumn = 40, srcSpanEndLine = 595, srcSpanEndColumn = 42}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens"><span class="mpre">Conjoined p =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Bazaar</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Pretext</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">]
</span><a name="loc_596_1_596_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_1_596_8&#39;)"><span class="hl_fundecl"><span class="mpre">holesOf</span></span></a><span class="mpre"> </span><a name="loc_596_9_596_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_9_596_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_596_11_596_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_11_596_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="Data.Tagged.html#loc_59_31_59_39" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_31_59_39&#39;)"><span class="hl_varref"><span class="mpre">unTagged</span></span></a><span class="mpre">
  ( </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre">
     (</span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> let
        </span><a name="loc_599_9_599_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_599_9_599_10&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> [] _ = []
        </span><a href="#loc_599_9_599_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_599_9_599_10&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a name="loc_600_12_600_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_12_600_13&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_600_14_600_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_14_600_16&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">) </span><a name="loc_600_18_600_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_18_600_19&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Pretext</span></span><span class="mpre"> (\</span><a name="loc_600_32_600_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_32_600_35&#39;)"><span class="hl_vardecl"><span class="mpre">xfy</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_600_18_600_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_18_600_19&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_600_14_600_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_14_600_16&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">) </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_600_32_600_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_32_600_35&#39;)"><span class="hl_varref"><span class="mpre">xfy</span></span></a><span class="mpre"> </span><a href="#loc_600_12_600_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_12_600_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_599_9_599_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_599_9_599_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_600_14_600_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_14_600_16&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> (</span><a href="#loc_600_18_600_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_18_600_19&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> (</span><a href="#loc_600_12_600_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_12_600_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">))
      in </span><a href="#loc_599_9_599_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_599_9_599_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_varref"><span class="mpre">ins</span></span></a><span class="mpre"> </span><a href="#loc_607_11_607_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_607_11_607_12&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) (</span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_607_11_607_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_607_11_607_12&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">))
     (</span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> let
        </span><a name="loc_603_9_603_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_603_9_603_10&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> [] _ = []
        </span><a href="#loc_603_9_603_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_603_9_603_10&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a name="loc_604_12_604_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_12_604_14&#39;)"><span class="hl_vardecl"><span class="mpre">wx</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_604_15_604_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_15_604_17&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">) </span><a name="loc_604_19_604_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_19_604_20&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Pretext</span></span><span class="mpre"> (\</span><a name="loc_604_33_604_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_33_604_37&#39;)"><span class="hl_vardecl"><span class="mpre">wxfy</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_604_19_604_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_19_604_20&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_varref"><span class="mpre">Prelude.map</span></span><span class="mpre"> </span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_604_15_604_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_15_604_17&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">) </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_604_33_604_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_33_604_37&#39;)"><span class="hl_varref"><span class="mpre">wxfy</span></span></a><span class="mpre"> </span><a href="#loc_604_12_604_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_12_604_14&#39;)"><span class="hl_varref"><span class="mpre">wx</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_603_9_603_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_603_9_603_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_604_15_604_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_15_604_17&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> (</span><a href="#loc_604_19_604_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_19_604_20&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> (</span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_604_12_604_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_12_604_14&#39;)"><span class="hl_varref"><span class="mpre">wx</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">))
      in </span><a href="#loc_603_9_603_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_603_9_603_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_607_11_607_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_607_11_607_12&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">) (</span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_607_11_607_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_607_11_607_12&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">))
    :: </span><a href="Data.Tagged.html#loc_59_9_59_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_9_59_15&#39;)"><span class="hl_tyconref"><span class="mpre">Tagged</span></span></a><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) [</span><span class="hl_tyconref"><span class="mpre">Pretext</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">]
  ) where </span><a name="loc_607_11_607_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_607_11_607_12&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_596_9_596_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_9_596_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_596_11_596_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_11_596_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_596_1_596_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_1_596_8&#39;)"><span class="mpre">holesOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This converts a &#39;Traversal&#39; that you \&quot;know\&quot; will target one or more elements to a &#39;Lens&#39;. It can</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- also be used to transform a non-empty &#39;Fold&#39; into a &#39;Getter&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The resulting &#39;Lens&#39; or &#39;Getter&#39; will be partial if the supplied &#39;Traversal&#39; returns</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- no results.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [1,2,3] ^. singular _head</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [] ^. singular _head</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- *** Exception: singular: empty traversal</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Left 4 ^. singular _Left</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 4</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [1..10] ^. singular (ix 7)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 8</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;singular&#39; :: &#39;Traversal&#39; s t a a          -&gt; &#39;Lens&#39; s t a a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;singular&#39; :: &#39;Fold&#39; s a                   -&gt; &#39;Getter&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;singular&#39; :: &#39;IndexedTraversal&#39; i s t a a -&gt; &#39;IndexedLens&#39; i s t a a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;singular&#39; :: &#39;IndexedFold&#39; i s a          -&gt; &#39;IndexedGetter&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_637_1_637_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_1_637_9&#39;)"><span class="mpre">singular</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 634, srcSpanStartColumn = 13, srcSpanEndLine = 635, srcSpanEndColumn = 12}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 634, srcSpanStartColumn = 13, srcSpanEndLine = 634, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Conjoined p, Functor f)
         =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
         -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_637_1_637_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_1_637_9&#39;)"><span class="hl_fundecl"><span class="mpre">singular</span></span></a><span class="mpre"> </span><a name="loc_637_10_637_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_10_637_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre">
  (\</span><a name="loc_638_5_638_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_5_638_8&#39;)"><span class="hl_vardecl"><span class="mpre">afb</span></span></a><span class="mpre"> </span><a name="loc_638_9_638_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_9_638_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_638_18_638_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_18_638_19&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_637_10_637_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_10_637_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_638_9_638_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_9_638_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> in case </span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_varref"><span class="mpre">ins</span></span></a><span class="mpre"> </span><a href="#loc_638_18_638_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_18_638_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
    (</span><a name="loc_639_6_639_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_639_6_639_7&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_639_8_639_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_639_8_639_10&#39;)"><span class="hl_vardecl"><span class="mpre">ws</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_638_18_638_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_18_638_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_639_8_639_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_639_8_639_10&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">) </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_638_5_638_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_5_638_8&#39;)"><span class="hl_varref"><span class="mpre">afb</span></span></a><span class="mpre"> </span><a href="#loc_639_6_639_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_639_6_639_7&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
    []     -&gt; </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_638_18_638_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_18_638_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_638_5_638_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_5_638_8&#39;)"><span class="hl_varref"><span class="mpre">afb</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;singular: empty traversal&quot;</span></span><span class="mpre">))
  (\</span><a name="loc_641_5_641_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_5_641_9&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a name="loc_641_10_641_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_10_641_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_641_19_641_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_19_641_20&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_637_10_637_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_10_637_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_641_10_641_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_10_641_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> in case </span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_641_19_641_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_19_641_20&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
    (</span><a name="loc_642_6_642_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_642_6_642_7&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_642_8_642_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_642_8_642_10&#39;)"><span class="hl_vardecl"><span class="mpre">ws</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_641_19_641_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_19_641_20&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_varref"><span class="mpre">Prelude.map</span></span><span class="mpre"> </span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_642_8_642_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_642_8_642_10&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">) </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_641_5_641_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_5_641_9&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a href="#loc_642_6_642_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_642_6_642_7&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
    []     -&gt; </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_641_19_641_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_19_641_20&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">                    </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_641_5_641_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_5_641_9&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;singular: empty traversal&quot;</span></span><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_637_1_637_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_1_637_9&#39;)"><span class="mpre">singular</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This converts a &#39;Traversal&#39; that you \&quot;know\&quot; will target only one element to a &#39;Lens&#39;. It can also be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- used to transform a &#39;Fold&#39; into a &#39;Getter&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The resulting &#39;Lens&#39; or &#39;Getter&#39; will be partial if the &#39;Traversal&#39; targets nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- or more than one element.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafeSingular&#39; :: &#39;Traversal&#39; s t a b          -&gt; &#39;Lens&#39; s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafeSingular&#39; :: &#39;Fold&#39; s a                   -&gt; &#39;Getter&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafeSingular&#39; :: &#39;IndexedTraversal&#39; i s t a b -&gt; &#39;IndexedLens&#39; i s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unsafeSingular&#39; :: &#39;IndexedFold&#39; i s a          -&gt; &#39;IndexedGetter&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_661_1_661_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_1_661_15&#39;)"><span class="mpre">unsafeSingular</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 658, srcSpanStartColumn = 19, srcSpanEndLine = 659, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 658, srcSpanStartColumn = 19, srcSpanEndLine = 658, srcSpanEndColumn = 20},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Conjoined p, Functor f)
               =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
               -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_661_1_661_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_1_661_15&#39;)"><span class="hl_fundecl"><span class="mpre">unsafeSingular</span></span></a><span class="mpre"> </span><a name="loc_661_16_661_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_16_661_17&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre">
  (\</span><a name="loc_662_5_662_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_662_5_662_8&#39;)"><span class="hl_vardecl"><span class="mpre">afb</span></span></a><span class="mpre"> </span><a name="loc_662_9_662_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_662_9_662_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_662_18_662_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_662_18_662_19&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_661_16_661_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_16_661_17&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_662_9_662_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_662_9_662_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> in case </span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_varref"><span class="mpre">ins</span></span></a><span class="mpre"> </span><a href="#loc_662_18_662_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_662_18_662_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
    [</span><a name="loc_663_6_663_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_663_6_663_7&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre">] -&gt; </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_662_18_662_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_662_18_662_19&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_662_5_662_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_662_5_662_8&#39;)"><span class="hl_varref"><span class="mpre">afb</span></span></a><span class="mpre"> </span><a href="#loc_663_6_663_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_663_6_663_7&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
    []  -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;unsafeSingular: empty traversal&quot;</span></span><span class="mpre">
    _   -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;unsafeSingular: traversing multiple results&quot;</span></span><span class="mpre">)
  (\</span><a name="loc_666_5_666_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_5_666_9&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a name="loc_666_10_666_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_10_666_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_666_19_666_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_19_666_20&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_661_16_661_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_16_661_17&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_666_10_666_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_10_666_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> in case </span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_666_19_666_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_19_666_20&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
    [</span><a name="loc_667_6_667_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_667_6_667_7&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre">] -&gt; </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_666_19_666_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_19_666_20&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_666_5_666_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_5_666_9&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a href="#loc_667_6_667_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_667_6_667_7&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">
    []  -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;unsafeSingular: empty traversal&quot;</span></span><span class="mpre">
    _   -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;unsafeSingular: traversing multiple results&quot;</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_661_1_661_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_1_661_15&#39;)"><span class="mpre">unsafeSingular</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Internal functions used by &#39;partsOf&#39;, &#39;holesOf&#39;, etc.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="mpre">ins</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 676, srcSpanStartColumn = 8, srcSpanEndLine = 676, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 676, srcSpanStartColumn = 23, srcSpanEndLine = 676, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-"><span class="mpre">Bizarre (-&gt;) w =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_vardecl"><span class="mpre">ins</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Fold.html#loc_543_1_543_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Fold.html#loc_543_1_543_9&#39;)"><span class="hl_varref"><span class="mpre">toListOf</span></span></a><span class="mpre"> (</span><a href="Control.Lens.Getter.html#loc_455_1_455_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Getter.html#loc_455_1_455_8&#39;)"><span class="hl_varref"><span class="mpre">coerced</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">bazaar</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="mpre">ins</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_681_1_681_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_1_681_5&#39;)"><span class="mpre">wins</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 680, srcSpanStartColumn = 9, srcSpanEndLine = 680, srcSpanEndColumn = 63}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 680, srcSpanStartColumn = 9, srcSpanEndLine = 680, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">(Bizarre p w, Corepresentable p, Comonad (Corep p)) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_681_1_681_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_1_681_5&#39;)"><span class="hl_vardecl"><span class="mpre">wins</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">bazaar</span></span><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_83_3_83_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_83_3_83_13&#39;)"><span class="hl_varref"><span class="mpre">cotabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_681_42_681_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_42_681_44&#39;)"><span class="hl_vardecl"><span class="mpre">ra</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> [</span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_681_42_681_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_42_681_44&#39;)"><span class="hl_varref"><span class="mpre">ra</span></span></a><span class="mpre">])
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_681_1_681_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_1_681_5&#39;)"><span class="mpre">wins</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="mpre">pins</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 684, srcSpanStartColumn = 9, srcSpanEndLine = 684, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 684, srcSpanStartColumn = 9, srcSpanEndLine = 684, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">(Bizarre p w, Corepresentable p) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Corep</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_vardecl"><span class="mpre">pins</span></span></a><span class="mpre"> = </span><a href="Control.Applicative.html#loc_236_29_236_37" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_29_236_37&#39;)"><span class="hl_varref"><span class="mpre">getConst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">bazaar</span></span><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_83_3_83_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_83_3_83_13&#39;)"><span class="hl_varref"><span class="mpre">cotabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_685_42_685_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_42_685_44&#39;)"><span class="hl_vardecl"><span class="mpre">ra</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> [</span><a href="#loc_685_42_685_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_42_685_44&#39;)"><span class="hl_varref"><span class="mpre">ra</span></span></a><span class="mpre">])
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="mpre">pins</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_689_1_689_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_1_689_5&#39;)"><span class="mpre">parr</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 688, srcSpanStartColumn = 9, srcSpanEndLine = 688, srcSpanEndColumn = 38}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 688, srcSpanStartColumn = 9, srcSpanEndLine = 688, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">(Profunctor p, Category p) =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_689_1_689_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_1_689_5&#39;)"><span class="hl_fundecl"><span class="mpre">parr</span></span></a><span class="mpre"> </span><a name="loc_689_6_689_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_6_689_7&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Unsafe.html#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_94_3_94_7&#39;)"><span class="hl_varref"><span class="mpre">lmap</span></span></a><span class="mpre"> </span><a href="#loc_689_6_689_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_6_689_7&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_34_5_34_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_34_5_34_7&#39;)"><span class="hl_varref"><span class="mpre">id</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_689_1_689_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_1_689_5&#39;)"><span class="mpre">parr</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="mpre">outs</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 692, srcSpanStartColumn = 9, srcSpanEndLine = 692, srcSpanEndColumn = 37}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 692, srcSpanStartColumn = 9, srcSpanEndLine = 692, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSp"><span class="mpre">(Bizarre p w, Category p) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_vardecl"><span class="mpre">outs</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.State.Lazy.html#loc_107_1_107_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Lazy.html#loc_107_1_107_10&#39;)"><span class="hl_varref"><span class="mpre">evalState</span></span></a><span class="mpre"> </span><a href="Data.Profunctor.Unsafe.html#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_101_3_101_7&#39;)"><span class="hl_infix"><span class="mpre">`rmap`</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">bazaar</span></span><span class="mpre"> (</span><a href="#loc_689_1_689_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_1_689_5&#39;)"><span class="hl_varref"><span class="mpre">parr</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.State.Lazy.html#loc_91_1_91_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Lazy.html#loc_91_1_91_6&#39;)"><span class="hl_varref"><span class="mpre">state</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_702_1_702_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_1_702_18&#39;)"><span class="hl_varref"><span class="mpre">unconsWithDefault</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="mpre">outs</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="mpre">unsafeOuts</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 696, srcSpanStartColumn = 15, srcSpanEndLine = 696, srcSpanEndColumn = 50}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 696, srcSpanStartColumn = 15, srcSpanEndLine = 696, srcSpanEndColumn = 16},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Bizarre p w, Corepresentable p) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">] -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_vardecl"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.State.Lazy.html#loc_107_1_107_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Lazy.html#loc_107_1_107_10&#39;)"><span class="hl_varref"><span class="mpre">evalState</span></span></a><span class="mpre"> </span><a href="Data.Profunctor.Unsafe.html#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_101_3_101_7&#39;)"><span class="hl_infix"><span class="mpre">`rmap`</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">bazaar</span></span><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_83_3_83_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_83_3_83_13&#39;)"><span class="hl_varref"><span class="mpre">cotabulate</span></span></a><span class="mpre"> (\_ -&gt; </span><a href="Control.Monad.Trans.State.Lazy.html#loc_91_1_91_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Lazy.html#loc_91_1_91_6&#39;)"><span class="hl_varref"><span class="mpre">state</span></span></a><span class="mpre"> (</span><a href="#loc_702_1_702_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_1_702_18&#39;)"><span class="hl_varref"><span class="mpre">unconsWithDefault</span></span></a><span class="mpre"> </span><a href="#loc_698_9_698_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_9_698_16&#39;)"><span class="hl_varref"><span class="mpre">fakeVal</span></span></a><span class="mpre">)))
  where </span><a name="loc_698_9_698_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_9_698_16&#39;)"><span class="hl_vardecl"><span class="mpre">fakeVal</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;unsafePartsOf&#39;: not enough elements were supplied&quot;</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="mpre">unsafeOuts</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><a href="#loc_702_1_702_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_1_702_18&#39;)"><span class="mpre">unconsWithDefault</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">,[</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">])
</span><a name="loc_702_1_702_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_1_702_18&#39;)"><span class="hl_fundecl"><span class="mpre">unconsWithDefault</span></span></a><span class="mpre"> </span><a name="loc_702_19_702_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_19_702_20&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> []     = (</span><a href="#loc_702_19_702_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_19_702_20&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre">,[])
</span><a href="#loc_702_1_702_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_1_702_18&#39;)"><span class="hl_fundecl"><span class="mpre">unconsWithDefault</span></span></a><span class="mpre"> _ (</span><a name="loc_703_22_703_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_703_22_703_23&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_703_24_703_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_703_24_703_26&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre">) = (</span><a href="#loc_703_22_703_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_703_22_703_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">,</span><a href="#loc_703_24_703_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_703_24_703_26&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_702_1_702_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_1_702_18&#39;)"><span class="mpre">unconsWithDefault</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Traversals</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse both parts of a &#39;Bitraversable&#39; container with matching types.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Usually that type will be a pair.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (1,2) &amp; both *~ 10</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (10,20)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; over both length (&quot;hello&quot;,&quot;world&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (5,5)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (&quot;hello&quot;,&quot;world&quot;)^.both</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;helloworld&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;both&#39; :: &#39;Traversal&#39; (a, a)       (b, b)       a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;both&#39; :: &#39;Traversal&#39; (&#39;Either&#39; a a) (&#39;Either&#39; b b) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_728_1_728_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_728_1_728_5&#39;)"><span class="mpre">both</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 727, srcSpanStartColumn = 9, srcSpanEndLine = 727, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 727, srcSpanStartColumn = 25, srcSpanEndLine = 727, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-"><span class="mpre">Bitraversable r =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Traversal</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_728_1_728_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_728_1_728_5&#39;)"><span class="hl_fundecl"><span class="mpre">both</span></span></a><span class="mpre"> </span><a name="loc_728_6_728_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_728_6_728_7&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Data.Bitraversable.html#loc_115_3_115_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Bitraversable.html#loc_115_3_115_13&#39;)"><span class="hl_varref"><span class="mpre">bitraverse</span></span></a><span class="mpre"> </span><a href="#loc_728_6_728_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_728_6_728_7&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_728_6_728_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_728_6_728_7&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_728_1_728_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_728_1_728_5&#39;)"><span class="mpre">both</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Apply a different &#39;Traversal&#39; or &#39;Fold&#39; to each side of a &#39;Bitraversable&#39; container.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;Traversal&#39; s t a b                -&gt; &#39;Traversal&#39; s&#39; t&#39; a b                -&gt; &#39;Traversal&#39; (r s s&#39;) (r t t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexedTraversal&#39; i s t a b       -&gt; &#39;IndexedTraversal&#39; i s&#39; t&#39; a b       -&gt; &#39;IndexedTraversal&#39; i (r s s&#39;) (r t t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexPreservingTraversal&#39; s t a b -&gt; &#39;IndexPreservingTraversal&#39; s&#39; t&#39; a b -&gt; &#39;IndexPreservingTraversal&#39; (r s s&#39;) (r t t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;Traversal&#39; s t a b                -&gt; &#39;Traversal&#39; s&#39; t&#39; a b                -&gt; &#39;Traversal&#39; (s,s&#39;) (t,t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;Lens&#39; s t a b                     -&gt; &#39;Lens&#39; s&#39; t&#39; a b                     -&gt; &#39;Traversal&#39; (s,s&#39;) (t,t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;Fold&#39; s a                         -&gt; &#39;Fold&#39; s&#39; a                          -&gt; &#39;Fold&#39; (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;Getter&#39; s a                       -&gt; &#39;Getter&#39; s&#39; a                        -&gt; &#39;Fold&#39; (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;Action&#39; m s a                     -&gt; &#39;Action&#39; m s&#39; a                      -&gt; &#39;MonadicFold&#39; m (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;MonadicFold&#39; m s a                -&gt; &#39;MonadicFold&#39; m s&#39; a                 -&gt; &#39;MonadicFold&#39; m (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexedTraversal&#39; i s t a b       -&gt; &#39;IndexedTraversal&#39; i s&#39; t&#39; a b       -&gt; &#39;IndexedTraversal&#39; i (s,s&#39;) (t,t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexedLens&#39; i s t a b            -&gt; &#39;IndexedLens&#39; i s&#39; t&#39; a b            -&gt; &#39;IndexedTraversal&#39; i (s,s&#39;) (t,t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexedFold&#39; i s a                -&gt; &#39;IndexedFold&#39; i s&#39; a                 -&gt; &#39;IndexedFold&#39; i (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexedGetter&#39; i s a              -&gt; &#39;IndexedGetter&#39; i s&#39; a               -&gt; &#39;IndexedFold&#39; i (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexedAction&#39; i m s a            -&gt; &#39;IndexedAction&#39; i m s&#39; a             -&gt; &#39;IndexedMonadicFold&#39; i m (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexedMonadicFold&#39; i m s a       -&gt; &#39;IndexedMonadicFold&#39; i m s&#39; a        -&gt; &#39;IndexedMonadicFold&#39; i m (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexPreservingTraversal&#39; s t a b -&gt; &#39;IndexPreservingTraversal&#39; s&#39; t&#39; a b -&gt; &#39;IndexPreservingTraversal&#39; (s,s&#39;) (t,t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexPreservingLens&#39; s t a b      -&gt; &#39;IndexPreservingLens&#39; s&#39; t&#39; a b      -&gt; &#39;IndexPreservingTraversal&#39; (s,s&#39;) (t,t&#39;) a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexPreservingFold&#39; s a          -&gt; &#39;IndexPreservingFold&#39; s&#39; a           -&gt; &#39;IndexPreservingFold&#39; (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexPreservingGetter&#39; s a        -&gt; &#39;IndexPreservingGetter&#39; s&#39; a         -&gt; &#39;IndexPreservingFold&#39; (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexPreservingAction&#39; m s a      -&gt; &#39;IndexPreservingAction&#39; m s&#39; a       -&gt; &#39;IndexPreservingMonadicFold&#39; m (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;beside&#39; :: &#39;IndexPreservingMonadicFold&#39; m s a -&gt; &#39;IndexPreservingMonadicFold&#39; m s&#39; a  -&gt; &#39;IndexPreservingMonadicFold&#39; m (s,s&#39;) a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (&quot;hello&quot;,[&quot;world&quot;,&quot;!!!&quot;])^..beside id traverse</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [&quot;hello&quot;,&quot;world&quot;,&quot;!!!&quot;]</span></span><span class="mpre">
</span><a href="#loc_772_1_772_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_1_772_7&#39;)"><span class="mpre">beside</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 768, srcSpanStartColumn = 11, srcSpanEndLine = 769, srcSpanEndColumn = 10}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 768, srcSpanStartColumn = 11, srcSpanEndLine = 768, srcSpanEndColumn = 12},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Representable q, Applicative (Rep q), Applicative f, Bitraversable r)
       =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Optical</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">q</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
       -&gt; </span><span class="hl_tyconref"><span class="mpre">Optical</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">q</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
       -&gt; </span><span class="hl_tyconref"><span class="mpre">Optical</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">q</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s&#39;</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t&#39;</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_772_1_772_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_1_772_7&#39;)"><span class="hl_fundecl"><span class="mpre">beside</span></span></a><span class="mpre"> </span><a name="loc_772_8_772_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_8_772_9&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_772_10_772_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_10_772_11&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> </span><a name="loc_772_12_772_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_12_772_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Rep.html#loc_42_3_42_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_42_3_42_11&#39;)"><span class="hl_varref"><span class="mpre">tabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Functor.Compose.html#loc_27_35_27_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Compose.html#loc_27_35_27_45&#39;)"><span class="hl_varref"><span class="mpre">getCompose</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Bitraversable.html#loc_115_3_115_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Bitraversable.html#loc_115_3_115_13&#39;)"><span class="hl_varref"><span class="mpre">bitraverse</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Compose</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Profunctor.Rep.html#loc_43_3_43_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_43_3_43_6&#39;)"><span class="hl_varref"><span class="mpre">rep</span></span></a><span class="mpre"> (</span><a href="#loc_772_8_772_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_8_772_9&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_772_12_772_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_12_772_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)) (</span><span class="hl_conref"><span class="mpre">Compose</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Profunctor.Rep.html#loc_43_3_43_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_43_3_43_6&#39;)"><span class="hl_varref"><span class="mpre">rep</span></span></a><span class="mpre"> (</span><a href="#loc_772_10_772_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_10_772_11&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><a href="#loc_772_12_772_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_12_772_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_772_1_772_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_1_772_7&#39;)"><span class="mpre">beside</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Visit the first /n/ targets of a &#39;Traversal&#39;, &#39;Fold&#39;, &#39;Getter&#39; or &#39;Lens&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [(&quot;hello&quot;,&quot;world&quot;),(&quot;!!!&quot;,&quot;!!!&quot;)]^.. taking 2 (traverse.both)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [&quot;hello&quot;,&quot;world&quot;]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; timingOut $ [1..] ^.. taking 3 traverse</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [1,2,3]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; over (taking 5 traverse) succ &quot;hello world&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;ifmmp world&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;Traversal&#39;&#39; s a                   -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;Lens&#39;&#39; s a                        -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;Iso&#39;&#39; s a                         -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;Prism&#39;&#39; s a                       -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;Getter&#39; s a                       -&gt; &#39;Fold&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;Fold&#39; s a                         -&gt; &#39;Fold&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;IndexedTraversal&#39;&#39; i s a          -&gt; &#39;IndexedTraversal&#39;&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;IndexedLens&#39;&#39; i s a               -&gt; &#39;IndexedTraversal&#39;&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;IndexedGetter&#39; i s a              -&gt; &#39;IndexedFold&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;taking&#39; :: &#39;Int&#39; -&gt; &#39;IndexedFold&#39; i s a                -&gt; &#39;IndexedFold&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_802_1_802_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_1_802_7&#39;)"><span class="mpre">taking</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 798, srcSpanStartColumn = 11, srcSpanEndLine = 799, srcSpanEndColumn = 11}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 798, srcSpanStartColumn = 11, srcSpanEndLine = 798, srcSpanEndColumn = 12},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Conjoined p, Applicative f)
        =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
       -&gt; </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
       -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_802_1_802_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_1_802_7&#39;)"><span class="hl_fundecl"><span class="mpre">taking</span></span></a><span class="mpre"> </span><a name="loc_802_8_802_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_8_802_9&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_802_10_802_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_10_802_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre">
  (\ </span><a name="loc_803_6_803_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_6_803_9&#39;)"><span class="hl_vardecl"><span class="mpre">afb</span></span></a><span class="mpre"> </span><a name="loc_803_10_803_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_10_803_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">  -&gt; let </span><a name="loc_803_20_803_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_20_803_21&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_802_10_802_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_10_802_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_803_10_803_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_10_803_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> in </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_varref"><span class="mpre">outs</span></span></a><span class="mpre"> </span><a href="#loc_803_20_803_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_20_803_21&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre"> </span><a href="#loc_803_6_803_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_6_803_9&#39;)"><span class="hl_varref"><span class="mpre">afb</span></span></a><span class="mpre">          (</span><span class="hl_varref"><span class="mpre">take</span></span><span class="mpre"> </span><a href="#loc_802_8_802_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_8_802_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_677_1_677_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_1_677_4&#39;)"><span class="hl_varref"><span class="mpre">ins</span></span></a><span class="mpre"> </span><a href="#loc_803_20_803_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_20_803_21&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">))
  (\ </span><a name="loc_804_6_804_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_6_804_10&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a name="loc_804_11_804_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_11_804_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_804_20_804_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_20_804_21&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="GHC.Magic.html#loc_39_1_39_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Magic.html#loc_39_1_39_7&#39;)"><span class="hl_varref"><span class="mpre">inline</span></span></a><span class="mpre"> </span><a href="#loc_802_10_802_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_10_802_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_804_11_804_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_11_804_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> in </span><a href="#loc_693_1_693_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_5&#39;)"><span class="hl_varref"><span class="mpre">outs</span></span></a><span class="mpre"> </span><a href="#loc_804_20_804_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_20_804_21&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_804_6_804_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_6_804_10&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">take</span></span><span class="mpre"> </span><a href="#loc_802_8_802_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_8_802_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_804_20_804_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_20_804_21&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_802_1_802_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_1_802_7&#39;)"><span class="mpre">taking</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Visit all but the first /n/ targets of a &#39;Traversal&#39;, &#39;Fold&#39;, &#39;Getter&#39; or &#39;Lens&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (&quot;hello&quot;,&quot;world&quot;) ^? dropping 1 both</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just &quot;world&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Dropping works on infinite traversals as well:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [1..] ^? dropping 1 folded</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just 2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;Traversal&#39;&#39; s a                   -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;Lens&#39;&#39; s a                        -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;Iso&#39;&#39; s a                         -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;Prism&#39;&#39; s a                       -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;Getter&#39; s a                       -&gt; &#39;Fold&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;Fold&#39; s a                         -&gt; &#39;Fold&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;IndexedTraversal&#39;&#39; i s a          -&gt; &#39;IndexedTraversal&#39;&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;IndexedLens&#39;&#39; i s a               -&gt; &#39;IndexedTraversal&#39;&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;IndexedGetter&#39; i s a              -&gt; &#39;IndexedFold&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dropping&#39; :: &#39;Int&#39; -&gt; &#39;IndexedFold&#39; i s a                -&gt; &#39;IndexedFold&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_830_1_830_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_1_830_9&#39;)"><span class="mpre">dropping</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 829, srcSpanStartColumn = 13, srcSpanEndLine = 829, srcSpanEndColumn = 44}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 829, srcSpanStartColumn = 13, srcSpanEndLine = 829, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, src"><span class="mpre">(Conjoined p, Applicative f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_228_9_228_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_228_9_228_17&#39;)"><span class="hl_tyconref"><span class="mpre">Indexing</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_830_1_830_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_1_830_9&#39;)"><span class="hl_fundecl"><span class="mpre">dropping</span></span></a><span class="mpre"> </span><a name="loc_830_10_830_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_10_830_11&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_830_12_830_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_12_830_13&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_830_14_830_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_14_830_18&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a name="loc_830_19_830_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_19_830_20&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="Data.Tuple.html#loc_52_1_52_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tuple.html#loc_52_1_52_4&#39;)"><span class="hl_varref"><span class="mpre">snd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Lens.Internal.Indexed.html#loc_228_35_228_46" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_228_35_228_46&#39;)"><span class="hl_varref"><span class="mpre">runIndexing</span></span></a><span class="mpre"> (</span><a href="#loc_830_12_830_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_12_830_13&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_831_3_831_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_3_831_8&#39;)"><span class="hl_varref"><span class="mpre">paifb</span></span></a><span class="mpre"> </span><a href="#loc_830_19_830_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_19_830_20&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> where
  </span><a name="loc_831_3_831_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_3_831_8&#39;)"><span class="hl_vardecl"><span class="mpre">paifb</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Rep.html#loc_83_3_83_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_83_3_83_13&#39;)"><span class="hl_varref"><span class="mpre">cotabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_831_25_831_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_25_831_27&#39;)"><span class="hl_vardecl"><span class="mpre">wa</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Indexing</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_831_43_831_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_43_831_44&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; let </span><a name="loc_831_52_831_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_52_831_54&#39;)"><span class="hl_vardecl"><span class="mpre">i&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_831_43_831_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_43_831_44&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> in </span><a href="#loc_831_52_831_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_52_831_54&#39;)"><span class="hl_varref"><span class="mpre">i&#39;</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_167_1_167_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_167_1_167_4&#39;)"><span class="hl_infix"><span class="mpre">`seq`</span></span></a><span class="mpre"> (</span><a href="#loc_831_52_831_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_52_831_54&#39;)"><span class="hl_varref"><span class="mpre">i&#39;</span></span></a><span class="mpre">, if </span><a href="#loc_831_43_831_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_43_831_44&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_830_10_830_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_10_830_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> then </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> (</span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_831_25_831_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_25_831_27&#39;)"><span class="hl_varref"><span class="mpre">wa</span></span></a><span class="mpre">) else </span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_830_14_830_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_14_830_18&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a href="#loc_831_25_831_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_831_25_831_27&#39;)"><span class="hl_varref"><span class="mpre">wa</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_830_1_830_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_830_1_830_9&#39;)"><span class="mpre">dropping</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Cloning Traversals</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A &#39;Traversal&#39; is completely characterized by its behavior on a &#39;Bazaar&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Cloning a &#39;Traversal&#39; is one way to make sure you aren&#39;t given</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- something weaker, such as a &#39;Fold&#39; and can be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- used as a way to pass around traversals that have to be monomorphic in @f@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: This only accepts a proper &#39;Traversal&#39; (or &#39;Lens&#39;). To clone a &#39;Lens&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as such, use &#39;Control.Lens.Lens.cloneLens&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: It is usually better to use &#39;Control.Lens.Reified.ReifiedTraversal&#39; and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Reified.reflectTraversal&#39; than to &#39;cloneTraversal&#39;. The</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- former can execute at full speed, while the latter needs to round trip through</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the &#39;Bazaar&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let foo l a = (view (coerced (cloneTraversal l)) a, set (cloneTraversal l) 10 a)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; foo both (&quot;hello&quot;,&quot;world&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (&quot;helloworld&quot;,(10,10))</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;cloneTraversal&#39; :: &#39;LensLike&#39; (&#39;Bazaar&#39; (-&gt;) a b) s t a b -&gt; &#39;Traversal&#39; s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_860_1_860_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_1_860_15&#39;)"><span class="mpre">cloneTraversal</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ATraversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Traversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_860_1_860_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_1_860_15&#39;)"><span class="hl_fundecl"><span class="mpre">cloneTraversal</span></span></a><span class="mpre"> </span><a name="loc_860_16_860_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_16_860_17&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_860_18_860_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_18_860_19&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">bazaar</span></span><span class="mpre"> </span><a href="#loc_860_18_860_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_18_860_19&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_860_16_860_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_16_860_17&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_860_1_860_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_1_860_15&#39;)"><span class="mpre">cloneTraversal</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Clone a &#39;Traversal&#39; yielding an &#39;IndexPreservingTraversal&#39; that passes through</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- whatever index it is composed with.</span></span><span class="mpre">
</span><a href="#loc_866_1_866_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_1_866_30&#39;)"><span class="mpre">cloneIndexPreservingTraversal</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ATraversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexPreservingTraversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_866_1_866_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_1_866_30&#39;)"><span class="hl_fundecl"><span class="mpre">cloneIndexPreservingTraversal</span></span></a><span class="mpre"> </span><a name="loc_866_31_866_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_31_866_32&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_866_33_866_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_33_866_37&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Rep.html#loc_83_3_83_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_83_3_83_13&#39;)"><span class="hl_varref"><span class="mpre">cotabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_866_54_866_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_54_866_56&#39;)"><span class="hl_vardecl"><span class="mpre">ws</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">runBazaar</span></span><span class="mpre"> (</span><a href="#loc_866_31_866_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_31_866_32&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> (</span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_866_54_866_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_54_866_56&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_866_95_866_96" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_95_866_96&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_866_33_866_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_33_866_37&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre"> (</span><a href="#loc_866_95_866_96" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_95_866_96&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;$</span></span><span class="mpre"> </span><a href="#loc_866_54_866_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_54_866_56&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_866_1_866_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_866_1_866_30&#39;)"><span class="mpre">cloneIndexPreservingTraversal</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Clone an &#39;IndexedTraversal&#39; yielding an &#39;IndexedTraversal&#39; with the same index.</span></span><span class="mpre">
</span><a href="#loc_871_1_871_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_1_871_22&#39;)"><span class="mpre">cloneIndexedTraversal</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">AnIndexedTraversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_871_1_871_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_1_871_22&#39;)"><span class="hl_fundecl"><span class="mpre">cloneIndexedTraversal</span></span></a><span class="mpre"> </span><a name="loc_871_23_871_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_23_871_24&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_871_25_871_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_25_871_26&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">bazaar</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_871_25_871_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_25_871_26&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)) </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_871_23_871_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_23_871_24&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_871_1_871_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_871_1_871_22&#39;)"><span class="mpre">cloneIndexedTraversal</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A &#39;Traversal1&#39; is completely characterized by its behavior on a &#39;Bazaar1&#39;.</span></span><span class="mpre">
</span><a href="#loc_876_1_876_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_876_1_876_16&#39;)"><span class="mpre">cloneTraversal1</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ATraversal1</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Traversal1</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_876_1_876_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_876_1_876_16&#39;)"><span class="hl_fundecl"><span class="mpre">cloneTraversal1</span></span></a><span class="mpre"> </span><a name="loc_876_17_876_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_876_17_876_18&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_876_19_876_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_876_19_876_20&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">bazaar1</span></span><span class="mpre"> </span><a href="#loc_876_19_876_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_876_19_876_20&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_876_17_876_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_876_17_876_18&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_876_1_876_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_876_1_876_16&#39;)"><span class="mpre">cloneTraversal1</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Clone a &#39;Traversal1&#39; yielding an &#39;IndexPreservingTraversal1&#39; that passes through</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- whatever index it is composed with.</span></span><span class="mpre">
</span><a href="#loc_882_1_882_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_1_882_31&#39;)"><span class="mpre">cloneIndexPreservingTraversal1</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ATraversal1</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexPreservingTraversal1</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_882_1_882_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_1_882_31&#39;)"><span class="hl_fundecl"><span class="mpre">cloneIndexPreservingTraversal1</span></span></a><span class="mpre"> </span><a name="loc_882_32_882_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_32_882_33&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_882_34_882_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_34_882_38&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Rep.html#loc_83_3_83_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_83_3_83_13&#39;)"><span class="hl_varref"><span class="mpre">cotabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_882_55_882_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_55_882_57&#39;)"><span class="hl_vardecl"><span class="mpre">ws</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">runBazaar1</span></span><span class="mpre"> (</span><a href="#loc_882_32_882_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_32_882_33&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> (</span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_882_55_882_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_55_882_57&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_882_97_882_98" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_97_882_98&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_882_34_882_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_34_882_38&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre"> (</span><a href="#loc_882_97_882_98" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_97_882_98&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;$</span></span><span class="mpre"> </span><a href="#loc_882_55_882_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_55_882_57&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_882_1_882_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_882_1_882_31&#39;)"><span class="mpre">cloneIndexPreservingTraversal1</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Clone an &#39;IndexedTraversal1&#39; yielding an &#39;IndexedTraversal1&#39; with the same index.</span></span><span class="mpre">
</span><a href="#loc_887_1_887_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_887_1_887_23&#39;)"><span class="mpre">cloneIndexedTraversal1</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">AnIndexedTraversal1</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal1</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_887_1_887_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_887_1_887_23&#39;)"><span class="hl_fundecl"><span class="mpre">cloneIndexedTraversal1</span></span></a><span class="mpre"> </span><a name="loc_887_24_887_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_887_24_887_25&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_887_26_887_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_887_26_887_27&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">bazaar1</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_887_26_887_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_887_26_887_27&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)) </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_887_24_887_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_887_24_887_25&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_887_1_887_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_887_1_887_23&#39;)"><span class="mpre">cloneIndexedTraversal1</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Indexed Traversals</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traversal with an index.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /NB:/ When you don&#39;t need access to the index then you can just apply your &#39;IndexedTraversal&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- directly as a function!</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;itraverseOf&#39; ≡ &#39;Control.Lens.Indexed.withIndex&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.traverseOf&#39; l = &#39;itraverseOf&#39; l &#39;.&#39; &#39;const&#39; = &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;itraverseOf&#39; :: &#39;Functor&#39; f     =&gt; &#39;IndexedLens&#39; i s t a b       -&gt; (i -&gt; a -&gt; f b) -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;itraverseOf&#39; :: &#39;Applicative&#39; f =&gt; &#39;IndexedTraversal&#39; i s t a b  -&gt; (i -&gt; a -&gt; f b) -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;itraverseOf&#39; :: &#39;Apply&#39; f       =&gt; &#39;IndexedTraversal1&#39; i s t a b -&gt; (i -&gt; a -&gt; f b) -&gt; s -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_910_1_910_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_910_1_910_12&#39;)"><span class="mpre">itraverseOf</span></a><span class="mpre"> :: (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_910_1_910_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_910_1_910_12&#39;)"><span class="hl_fundecl"><span class="mpre">itraverseOf</span></span></a><span class="mpre"> </span><a name="loc_910_13_910_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_910_13_910_14&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_910_13_910_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_910_13_910_14&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_910_1_910_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_910_1_910_12&#39;)"><span class="mpre">itraverseOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse with an index (and the arguments flipped).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.forOf&#39; l a ≡ &#39;iforOf&#39; l a &#39;.&#39; &#39;const&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iforOf&#39; ≡ &#39;flip&#39; &#39;.&#39; &#39;itraverseOf&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iforOf&#39; :: &#39;Functor&#39; f     =&gt; &#39;IndexedLens&#39; i s t a b       -&gt; s -&gt; (i -&gt; a -&gt; f b) -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iforOf&#39; :: &#39;Applicative&#39; f =&gt; &#39;IndexedTraversal&#39; i s t a b  -&gt; s -&gt; (i -&gt; a -&gt; f b) -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iforOf&#39; :: &#39;Apply&#39; f       =&gt; &#39;IndexedTraversal1&#39; i s t a b -&gt; s -&gt; (i -&gt; a -&gt; f b) -&gt; f t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_926_1_926_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_1_926_7&#39;)"><span class="mpre">iforOf</span></a><span class="mpre"> :: (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_926_1_926_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_1_926_7&#39;)"><span class="hl_vardecl"><span class="mpre">iforOf</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_910_1_910_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_910_1_910_12&#39;)"><span class="hl_varref"><span class="mpre">itraverseOf</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_926_1_926_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_1_926_7&#39;)"><span class="mpre">iforOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Map each element of a structure targeted by a &#39;Lens&#39; to a monadic action,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- evaluate these actions from left to right, and collect the results, with access</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- its position.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When you don&#39;t need access to the index &#39;mapMOf&#39; is more liberal in what it can accept.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.mapMOf&#39; l ≡ &#39;imapMOf&#39; l &#39;.&#39; &#39;const&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;IndexedLens&#39;       i s t a b -&gt; (i -&gt; a -&gt; m b) -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;IndexedTraversal&#39;  i s t a b -&gt; (i -&gt; a -&gt; m b) -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapMOf&#39; :: &#39;Bind&#39;  m =&gt; &#39;IndexedTraversal1&#39; i s t a b -&gt; (i -&gt; a -&gt; m b) -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_945_1_945_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_1_945_8&#39;)"><span class="mpre">imapMOf</span></a><span class="mpre"> :: (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> (</span><a href="Control.Applicative.html#loc_251_9_251_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_9_251_21&#39;)"><span class="hl_tyconref"><span class="mpre">WrappedMonad</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><a href="Control.Applicative.html#loc_251_9_251_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_9_251_21&#39;)"><span class="hl_tyconref"><span class="mpre">WrappedMonad</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_945_1_945_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_1_945_8&#39;)"><span class="hl_fundecl"><span class="mpre">imapMOf</span></span></a><span class="mpre"> </span><a name="loc_945_9_945_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_9_945_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_330_1_330_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_330_1_330_7&#39;)"><span class="hl_varref"><span class="mpre">mapMOf</span></span></a><span class="mpre"> </span><a href="#loc_945_9_945_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_9_945_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_945_1_945_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_1_945_8&#39;)"><span class="mpre">imapMOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Map each element of a structure targeted by a &#39;Lens&#39; to a monadic action,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- evaluate these actions from left to right, and collect the results, with access</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- its position (and the arguments flipped).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.forMOf&#39; l a ≡ &#39;iforMOf&#39; l a &#39;.&#39; &#39;const&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iforMOf&#39; ≡ &#39;flip&#39; &#39;.&#39; &#39;imapMOf&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iforMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;IndexedLens&#39; i s t a b      -&gt; s -&gt; (i -&gt; a -&gt; m b) -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iforMOf&#39; :: &#39;Monad&#39; m =&gt; &#39;IndexedTraversal&#39; i s t a b -&gt; s -&gt; (i -&gt; a -&gt; m b) -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_962_1_962_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_1_962_8&#39;)"><span class="mpre">iforMOf</span></a><span class="mpre"> :: (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> (</span><a href="Control.Applicative.html#loc_251_9_251_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_9_251_21&#39;)"><span class="hl_tyconref"><span class="mpre">WrappedMonad</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><a href="Control.Applicative.html#loc_251_9_251_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_251_9_251_21&#39;)"><span class="hl_tyconref"><span class="mpre">WrappedMonad</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_962_1_962_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_1_962_8&#39;)"><span class="hl_vardecl"><span class="mpre">iforMOf</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_945_1_945_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_1_945_8&#39;)"><span class="hl_varref"><span class="mpre">imapMOf</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_962_1_962_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_962_1_962_8&#39;)"><span class="mpre">iforMOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalizes &#39;Data.Traversable.mapAccumR&#39; to an arbitrary &#39;IndexedTraversal&#39; with access to the index.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapAccumROf&#39; accumulates state from right to left.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.mapAccumROf&#39; l ≡ &#39;imapAccumROf&#39; l &#39;.&#39; &#39;const&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapAccumROf&#39; :: &#39;IndexedLens&#39; i s t a b      -&gt; (i -&gt; acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapAccumROf&#39; :: &#39;IndexedTraversal&#39; i s t a b -&gt; (i -&gt; acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_978_1_978_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_978_1_978_13&#39;)"><span class="mpre">imapAccumROf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) (</span><a href="Control.Applicative.Backwards.html#loc_26_9_26_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.Backwards.html#loc_26_9_26_18&#39;)"><span class="hl_tyconref"><span class="mpre">Backwards</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">State</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">)) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">)
</span><a name="loc_978_1_978_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_978_1_978_13&#39;)"><span class="hl_fundecl"><span class="mpre">imapAccumROf</span></span></a><span class="mpre"> </span><a name="loc_978_14_978_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_978_14_978_15&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_412_1_412_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_412_1_412_12&#39;)"><span class="hl_varref"><span class="mpre">mapAccumROf</span></span></a><span class="mpre"> </span><a href="#loc_978_14_978_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_978_14_978_15&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_978_1_978_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_978_1_978_13&#39;)"><span class="mpre">imapAccumROf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Generalizes &#39;Data.Traversable.mapAccumL&#39; to an arbitrary &#39;IndexedTraversal&#39; with access to the index.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapAccumLOf&#39; accumulates state from left to right.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Control.Lens.Traversal.mapAccumLOf&#39; l ≡ &#39;imapAccumLOf&#39; l &#39;.&#39; &#39;const&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapAccumLOf&#39; :: &#39;IndexedLens&#39; i s t a b      -&gt; (i -&gt; acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;imapAccumLOf&#39; :: &#39;IndexedTraversal&#39; i s t a b -&gt; (i -&gt; acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_994_1_994_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_994_1_994_13&#39;)"><span class="mpre">imapAccumLOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">State</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">acc</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">)
</span><a name="loc_994_1_994_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_994_1_994_13&#39;)"><span class="hl_fundecl"><span class="mpre">imapAccumLOf</span></span></a><span class="mpre"> </span><a name="loc_994_14_994_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_994_14_994_15&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_435_1_435_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_1_435_12&#39;)"><span class="hl_varref"><span class="mpre">mapAccumLOf</span></span></a><span class="mpre"> </span><a href="#loc_994_14_994_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_994_14_994_15&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_994_1_994_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_994_1_994_13&#39;)"><span class="mpre">imapAccumLOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Common Indexed Traversals</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse any &#39;Traversable&#39; container. This is an &#39;IndexedTraversal&#39; that is indexed by ordinal position.</span></span><span class="mpre">
</span><a href="#loc_1003_1_1003_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1003_1_1003_10&#39;)"><span class="mpre">traversed</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1002, srcSpanStartColumn = 14, srcSpanEndLine = 1002, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1002, srcSpanStartColumn = 28, srcSpanEndLine = 1002, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Traversable f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_1003_1_1003_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1003_1_1003_10&#39;)"><span class="hl_vardecl"><span class="mpre">traversed</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_268_1_268_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_268_1_268_9&#39;)"><span class="hl_varref"><span class="mpre">indexing</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1003_1_1003_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1003_1_1003_10&#39;)"><span class="mpre">traversed</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse any &#39;Traversable1&#39; container. This is an &#39;IndexedTraversal1&#39; that is indexed by ordinal position.</span></span><span class="mpre">
</span><a href="#loc_1008_1_1008_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1008_1_1008_11&#39;)"><span class="mpre">traversed1</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1007, srcSpanStartColumn = 15, srcSpanEndLine = 1007, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1007, srcSpanStartColumn = 30, srcSpanEndLine = 1007, srcSpanEndColumn = 32}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Traversable1 f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal1</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_1008_1_1008_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1008_1_1008_11&#39;)"><span class="hl_vardecl"><span class="mpre">traversed1</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre"> </span><a href="Data.Semigroup.Traversable.html#loc_32_3_32_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Semigroup.Traversable.html#loc_32_3_32_12&#39;)"><span class="hl_varref"><span class="mpre">traverse1</span></span></a><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_268_1_268_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_268_1_268_9&#39;)"><span class="hl_varref"><span class="mpre">indexing</span></span></a><span class="mpre"> </span><a href="Data.Semigroup.Traversable.html#loc_32_3_32_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Semigroup.Traversable.html#loc_32_3_32_12&#39;)"><span class="hl_varref"><span class="mpre">traverse1</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1008_1_1008_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1008_1_1008_11&#39;)"><span class="mpre">traversed1</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse any &#39;Traversable&#39; container. This is an &#39;IndexedTraversal&#39; that is indexed by ordinal position.</span></span><span class="mpre">
</span><a href="#loc_1013_1_1013_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1013_1_1013_12&#39;)"><span class="mpre">traversed64</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1012, srcSpanStartColumn = 16, srcSpanEndLine = 1012, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1012, srcSpanStartColumn = 30, srcSpanEndLine = 1012, srcSpanEndColumn = 32}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Traversable f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal</span></span><span class="mpre"> </span><a href="GHC.Int.html#loc_551_30_551_35" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Int.html#loc_551_30_551_35&#39;)"><span class="hl_tyconref"><span class="mpre">Int64</span></span></a><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_1013_1_1013_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1013_1_1013_12&#39;)"><span class="hl_vardecl"><span class="mpre">traversed64</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Indexed.html#loc_80_3_80_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_80_3_80_12&#39;)"><span class="hl_varref"><span class="mpre">conjoined</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_319_1_319_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_319_1_319_11&#39;)"><span class="hl_varref"><span class="mpre">indexing64</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1013_1_1013_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1013_1_1013_12&#39;)"><span class="mpre">traversed64</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is the trivial empty &#39;Traversal&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ignored&#39; :: &#39;IndexedTraversal&#39; i s s a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ignored&#39; ≡ &#39;const&#39; &#39;pure&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; 6 &amp; ignored %~ absurd</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 6</span></span><span class="mpre">
</span><a href="#loc_1029_1_1029_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1029_1_1029_8&#39;)"><span class="mpre">ignored</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1028, srcSpanStartColumn = 12, srcSpanEndLine = 1028, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1028, srcSpanStartColumn = 26, srcSpanEndLine = 1028, srcSpanEndColumn = 28}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Applicative f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">pafb</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">
</span><a name="loc_1029_1_1029_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1029_1_1029_8&#39;)"><span class="hl_fundecl"><span class="mpre">ignored</span></span></a><span class="mpre"> _ = </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1029_1_1029_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1029_1_1029_8&#39;)"><span class="mpre">ignored</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Allows &#39;IndexedTraversal&#39; the value at the smallest index.</span></span><span class="mpre">
class </span><span class="warning" data-warning="ClassDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1033, srcSpanStartColumn = 7, srcSpanEndLine = 1033, srcSpanEndColumn = 15}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1033, srcSpanStartColumn = 13, srcSpanEndLine = 1033, srcSpanEndColumn = 15}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/l"><span class="mpre">Ord k =&gt;</span></span><span class="mpre"> </span><a name="loc_1033_16_1033_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1033_16_1033_27&#39;)"><span class="hl_classdecl"><span class="mpre">TraverseMin</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> | </span><span class="warning" data-warning="FundepFunDep (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1033, srcSpanStartColumn = 34, srcSpanEndLine = 1033, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1033, srcSpanStartColumn = 36, srcSpanEndLine = 1033, srcSpanEndColumn = 38}]}) [Ident (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/len"><span class="mpre">m -&gt; k</span></span><span class="mpre"> where
  </span><span class="hl_comment"><span class="mpre">-- | &#39;IndexedTraversal&#39; of the element with the smallest index.</span></span><span class="mpre">
  </span><a name="loc_1035_3_1035_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1035_3_1035_14&#39;)"><span class="mpre">traverseMin</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">

instance </span><a href="#loc_1033_16_1033_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1033_16_1033_27&#39;)"><span class="hl_classref"><span class="mpre">TraverseMin</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IntMap</span></span><span class="mpre"> where
  </span><a href="#loc_1035_3_1035_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1035_3_1035_14&#39;)"><span class="hl_fundecl"><span class="mpre">traverseMin</span></span></a><span class="mpre"> </span><a name="loc_1038_15_1038_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1038_15_1038_16&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_1038_17_1038_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1038_17_1038_18&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = case </span><span class="hl_varref"><span class="mpre">IntMap.minViewWithKey</span></span><span class="mpre"> </span><a href="#loc_1038_17_1038_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1038_17_1038_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> of
#if MIN_VERSION_containers(0,5,0)
    </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> ((</span><a name="loc_1040_12_1040_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1040_12_1040_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre">,</span><a name="loc_1040_14_1040_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1040_14_1040_15&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">), _) -&gt; </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_1038_15_1038_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1038_15_1038_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_1040_12_1040_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1040_12_1040_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_1040_14_1040_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1040_14_1040_15&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="Control.Lens.Lens.html#loc_343_4_343_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Lens.html#loc_343_4_343_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;&amp;&gt;</span></span></a><span class="mpre"> \</span><a name="loc_1040_43_1040_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1040_43_1040_44&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">IntMap.updateMin</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_1040_43_1040_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1040_43_1040_44&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">)) </span><a href="#loc_1038_17_1038_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1038_17_1038_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
#else
    </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> ((</span><a name="loc_1042_12_1042_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1042_12_1042_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre">,</span><a name="loc_1042_14_1042_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1042_14_1042_15&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">), _) -&gt; </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_1038_15_1038_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1038_15_1038_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_1042_12_1042_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1042_12_1042_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_1042_14_1042_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1042_14_1042_15&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="Control.Lens.Lens.html#loc_343_4_343_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Lens.html#loc_343_4_343_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;&amp;&gt;</span></span></a><span class="mpre"> \</span><a name="loc_1042_43_1042_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1042_43_1042_44&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">IntMap.updateMin</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><a href="#loc_1042_43_1042_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1042_43_1042_44&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">) </span><a href="#loc_1038_17_1038_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1038_17_1038_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
#endif
    </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">     -&gt; </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a href="#loc_1038_17_1038_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1038_17_1038_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1035_3_1035_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1035_3_1035_14&#39;)"><span class="mpre">traverseMin</span></a><span class="mpre"> #-}</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1047, srcSpanStartColumn = 10, srcSpanEndLine = 1047, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1047, srcSpanStartColumn = 16, srcSpanEndLine = 1047, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Ord k =&gt;</span></span><span class="mpre"> </span><a href="#loc_1033_16_1033_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1033_16_1033_27&#39;)"><span class="hl_classref"><span class="mpre">TraverseMin</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Map</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">) where
  </span><a href="#loc_1035_3_1035_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1035_3_1035_14&#39;)"><span class="hl_fundecl"><span class="mpre">traverseMin</span></span></a><span class="mpre"> </span><a name="loc_1048_15_1048_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_15_1048_16&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_1048_17_1048_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_17_1048_18&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = case </span><span class="hl_varref"><span class="mpre">Map.minViewWithKey</span></span><span class="mpre"> </span><a href="#loc_1048_17_1048_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_17_1048_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> of
    </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> ((</span><a name="loc_1049_12_1049_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1049_12_1049_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre">, </span><a name="loc_1049_15_1049_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1049_15_1049_16&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">), _) -&gt; </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_1048_15_1048_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_15_1048_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_1049_12_1049_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1049_12_1049_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_1049_15_1049_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1049_15_1049_16&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="Control.Lens.Lens.html#loc_343_4_343_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Lens.html#loc_343_4_343_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;&amp;&gt;</span></span></a><span class="mpre"> \</span><a name="loc_1049_44_1049_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1049_44_1049_45&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">Map.updateMin</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_1049_44_1049_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1049_44_1049_45&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">)) </span><a href="#loc_1048_17_1048_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_17_1048_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
    </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">          -&gt; </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a href="#loc_1048_17_1048_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1048_17_1048_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1035_3_1035_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1035_3_1035_14&#39;)"><span class="mpre">traverseMin</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Allows &#39;IndexedTraversal&#39; of the value at the largest index.</span></span><span class="mpre">
class </span><span class="warning" data-warning="ClassDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1054, srcSpanStartColumn = 7, srcSpanEndLine = 1054, srcSpanEndColumn = 15}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1054, srcSpanStartColumn = 13, srcSpanEndLine = 1054, srcSpanEndColumn = 15}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/l"><span class="mpre">Ord k =&gt;</span></span><span class="mpre"> </span><a name="loc_1054_16_1054_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1054_16_1054_27&#39;)"><span class="hl_classdecl"><span class="mpre">TraverseMax</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> | </span><span class="warning" data-warning="FundepFunDep (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1054, srcSpanStartColumn = 34, srcSpanEndLine = 1054, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1054, srcSpanStartColumn = 36, srcSpanEndLine = 1054, srcSpanEndColumn = 38}]}) [Ident (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/len"><span class="mpre">m -&gt; k</span></span><span class="mpre"> where
  </span><span class="hl_comment"><span class="mpre">-- | &#39;IndexedTraversal&#39; of the element at the largest index.</span></span><span class="mpre">
  </span><a name="loc_1056_3_1056_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1056_3_1056_14&#39;)"><span class="mpre">traverseMax</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">

instance </span><a href="#loc_1054_16_1054_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1054_16_1054_27&#39;)"><span class="hl_classref"><span class="mpre">TraverseMax</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IntMap</span></span><span class="mpre"> where
  </span><a href="#loc_1056_3_1056_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1056_3_1056_14&#39;)"><span class="hl_fundecl"><span class="mpre">traverseMax</span></span></a><span class="mpre"> </span><a name="loc_1059_15_1059_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1059_15_1059_16&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_1059_17_1059_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1059_17_1059_18&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = case </span><span class="hl_varref"><span class="mpre">IntMap.maxViewWithKey</span></span><span class="mpre"> </span><a href="#loc_1059_17_1059_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1059_17_1059_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> of
#if MIN_VERSION_containers(0,5,0)
    </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> ((</span><a name="loc_1061_12_1061_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1061_12_1061_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre">,</span><a name="loc_1061_14_1061_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1061_14_1061_15&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">), _) -&gt; </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_1059_15_1059_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1059_15_1059_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_1061_12_1061_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1061_12_1061_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_1061_14_1061_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1061_14_1061_15&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="Control.Lens.Lens.html#loc_343_4_343_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Lens.html#loc_343_4_343_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;&amp;&gt;</span></span></a><span class="mpre"> \</span><a name="loc_1061_43_1061_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1061_43_1061_44&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">IntMap.updateMax</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_1061_43_1061_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1061_43_1061_44&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">)) </span><a href="#loc_1059_17_1059_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1059_17_1059_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
#else
    </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> ((</span><a name="loc_1063_12_1063_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_12_1063_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre">,</span><a name="loc_1063_14_1063_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_14_1063_15&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">), _) -&gt; </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_1059_15_1059_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1059_15_1059_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_1063_12_1063_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_12_1063_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_1063_14_1063_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_14_1063_15&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="Control.Lens.Lens.html#loc_343_4_343_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Lens.html#loc_343_4_343_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;&amp;&gt;</span></span></a><span class="mpre"> \</span><a name="loc_1063_43_1063_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_43_1063_44&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">IntMap.updateMax</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><a href="#loc_1063_43_1063_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_43_1063_44&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">) </span><a href="#loc_1059_17_1059_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1059_17_1059_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
#endif
    </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">     -&gt; </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a href="#loc_1059_17_1059_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1059_17_1059_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1056_3_1056_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1056_3_1056_14&#39;)"><span class="mpre">traverseMax</span></a><span class="mpre"> #-}</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1068, srcSpanStartColumn = 10, srcSpanEndLine = 1068, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1068, srcSpanStartColumn = 16, srcSpanEndLine = 1068, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Ord k =&gt;</span></span><span class="mpre"> </span><a href="#loc_1054_16_1054_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1054_16_1054_27&#39;)"><span class="hl_classref"><span class="mpre">TraverseMax</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Map</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">k</span></span><span class="mpre">) where
  </span><a href="#loc_1056_3_1056_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1056_3_1056_14&#39;)"><span class="hl_fundecl"><span class="mpre">traverseMax</span></span></a><span class="mpre"> </span><a name="loc_1069_15_1069_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1069_15_1069_16&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_1069_17_1069_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1069_17_1069_18&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = case </span><span class="hl_varref"><span class="mpre">Map.maxViewWithKey</span></span><span class="mpre"> </span><a href="#loc_1069_17_1069_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1069_17_1069_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> of
    </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> ((</span><a name="loc_1070_12_1070_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1070_12_1070_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre">, </span><a name="loc_1070_15_1070_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1070_15_1070_16&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">), _) -&gt; </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_1069_15_1069_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1069_15_1069_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_1070_12_1070_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1070_12_1070_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_1070_15_1070_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1070_15_1070_16&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="Control.Lens.Lens.html#loc_343_4_343_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Lens.html#loc_343_4_343_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;&amp;&gt;</span></span></a><span class="mpre"> \</span><a name="loc_1070_44_1070_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1070_44_1070_45&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">Map.updateMax</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_1070_44_1070_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1070_44_1070_45&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">)) </span><a href="#loc_1069_17_1069_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1069_17_1069_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
    </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">          -&gt; </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a href="#loc_1069_17_1069_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1069_17_1069_18&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1056_3_1056_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1056_3_1056_14&#39;)"><span class="mpre">traverseMax</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse the /nth/ element &#39;elementOf&#39; a &#39;Traversal&#39;, &#39;Lens&#39; or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Iso&#39; if it exists.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [[1],[3,4]] &amp; elementOf (traverse.traverse) 1 .~ 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [[1],[5,4]]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [[1],[3,4]] ^? elementOf (folded.folded) 1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just 3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; timingOut $ [&#39;a&#39;..] ^?! elementOf folded 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;f&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; timingOut $ take 10 $ elementOf traverse 3 .~ 16 $ [0..]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [0,1,2,16,4,5,6,7,8,9]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;elementOf&#39; :: &#39;Traversal&#39;&#39; s a -&gt; &#39;Int&#39; -&gt; &#39;IndexedTraversal&#39;&#39; &#39;Int&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;elementOf&#39; :: &#39;Fold&#39; s a       -&gt; &#39;Int&#39; -&gt; &#39;IndexedFold&#39; &#39;Int&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_1097_1_1097_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1097_1_1097_10&#39;)"><span class="mpre">elementOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1093, srcSpanStartColumn = 14, srcSpanEndLine = 1094, srcSpanEndColumn = 13}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1094, srcSpanStartColumn = 11, srcSpanEndLine = 1094, srcSpanEndColumn = 13}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Applicative f
          =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_228_9_228_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_228_9_228_17&#39;)"><span class="hl_tyconref"><span class="mpre">Indexing</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
          -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
          -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedLensLike</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_1097_1_1097_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1097_1_1097_10&#39;)"><span class="hl_fundecl"><span class="mpre">elementOf</span></span></a><span class="mpre"> </span><a name="loc_1097_11_1097_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1097_11_1097_12&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_1097_13_1097_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1097_13_1097_14&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_1119_1_1119_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_1_1119_11&#39;)"><span class="hl_varref"><span class="mpre">elementsOf</span></span></a><span class="mpre"> </span><a href="#loc_1097_11_1097_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1097_11_1097_12&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><a href="#loc_1097_13_1097_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1097_13_1097_14&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1097_1_1097_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1097_1_1097_10&#39;)"><span class="mpre">elementOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse the /nth/ element of a &#39;Traversable&#39; container.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;element&#39; ≡ &#39;elementOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_1106_1_1106_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1106_1_1106_8&#39;)"><span class="mpre">element</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1105, srcSpanStartColumn = 12, srcSpanEndLine = 1105, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1105, srcSpanStartColumn = 26, srcSpanEndLine = 1105, srcSpanEndColumn = 28}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Traversable t =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_1106_1_1106_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1106_1_1106_8&#39;)"><span class="hl_vardecl"><span class="mpre">element</span></span></a><span class="mpre"> = </span><a href="#loc_1097_1_1097_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1097_1_1097_10&#39;)"><span class="hl_varref"><span class="mpre">elementOf</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1106_1_1106_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1106_1_1106_8&#39;)"><span class="mpre">element</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse (or fold) selected elements of a &#39;Traversal&#39; (or &#39;Fold&#39;) where their ordinal positions match a predicate.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;elementsOf&#39; :: &#39;Traversal&#39;&#39; s a -&gt; (&#39;Int&#39; -&gt; &#39;Bool&#39;) -&gt; &#39;IndexedTraversal&#39;&#39; &#39;Int&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;elementsOf&#39; :: &#39;Fold&#39; s a       -&gt; (&#39;Int&#39; -&gt; &#39;Bool&#39;) -&gt; &#39;IndexedFold&#39; &#39;Int&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_1119_1_1119_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_1_1119_11&#39;)"><span class="mpre">elementsOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1115, srcSpanStartColumn = 15, srcSpanEndLine = 1116, srcSpanEndColumn = 14}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1116, srcSpanStartColumn = 12, srcSpanEndLine = 1116, srcSpanEndColumn = 14}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Applicative f
           =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_228_9_228_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_228_9_228_17&#39;)"><span class="hl_tyconref"><span class="mpre">Indexing</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
           -&gt; (</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)
           -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedLensLike</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_1119_1_1119_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_1_1119_11&#39;)"><span class="hl_fundecl"><span class="mpre">elementsOf</span></span></a><span class="mpre"> </span><a name="loc_1119_12_1119_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_12_1119_13&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_1119_14_1119_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_14_1119_15&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1119_16_1119_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_16_1119_20&#39;)"><span class="hl_vardecl"><span class="mpre">iafb</span></span></a><span class="mpre"> </span><a name="loc_1119_21_1119_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_21_1119_22&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="Data.Tuple.html#loc_52_1_52_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tuple.html#loc_52_1_52_4&#39;)"><span class="hl_varref"><span class="mpre">snd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Lens.Internal.Indexed.html#loc_228_35_228_46" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_228_35_228_46&#39;)"><span class="hl_varref"><span class="mpre">runIndexing</span></span></a><span class="mpre"> (</span><a href="#loc_1119_12_1119_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_12_1119_13&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (\</span><a name="loc_1119_48_1119_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_48_1119_49&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Indexing</span></span><span class="mpre"> (\</span><a name="loc_1119_64_1119_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_64_1119_65&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_1119_64_1119_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_64_1119_65&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_167_1_167_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_167_1_167_4&#39;)"><span class="hl_infix"><span class="mpre">`seq`</span></span></a><span class="mpre"> (</span><a href="#loc_1119_64_1119_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_64_1119_65&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">, if </span><a href="#loc_1119_14_1119_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_14_1119_15&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1119_64_1119_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_64_1119_65&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> then </span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_1119_16_1119_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_16_1119_20&#39;)"><span class="hl_varref"><span class="mpre">iafb</span></span></a><span class="mpre"> </span><a href="#loc_1119_64_1119_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_64_1119_65&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_1119_48_1119_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_48_1119_49&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> else </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a href="#loc_1119_48_1119_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_48_1119_49&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">))) </span><a href="#loc_1119_21_1119_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_21_1119_22&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1119_1_1119_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_1_1119_11&#39;)"><span class="mpre">elementsOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Traverse elements of a &#39;Traversable&#39; container where their ordinal positions matches a predicate.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;elements&#39; ≡ &#39;elementsOf&#39; &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_1128_1_1128_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1128_1_1128_9&#39;)"><span class="mpre">elements</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1127, srcSpanStartColumn = 13, srcSpanEndLine = 1127, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1127, srcSpanStartColumn = 27, srcSpanEndLine = 1127, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Traversable t =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedTraversal&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_1128_1_1128_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1128_1_1128_9&#39;)"><span class="hl_vardecl"><span class="mpre">elements</span></span></a><span class="mpre"> = </span><a href="#loc_1119_1_1119_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1119_1_1119_11&#39;)"><span class="hl_varref"><span class="mpre">elementsOf</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1128_1_1128_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1128_1_1128_9&#39;)"><span class="mpre">elements</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Try to map a function over this &#39;Traversal&#39;, failing if the &#39;Traversal&#39; has no targets.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; failover (element 3) (*2) [1,2] :: Maybe [Int]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; failover _Left (*2) (Right 4) :: Maybe (Either Int Int)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; failover _Right (*2) (Right 4) :: Maybe (Either Int Int)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just (Right 8)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failover&#39; :: Alternative m =&gt; Traversal s t a b -&gt; (a -&gt; b) -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_1146_1_1146_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_1_1146_9&#39;)"><span class="mpre">failover</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1145, srcSpanStartColumn = 13, srcSpanEndLine = 1145, srcSpanEndColumn = 45}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1145, srcSpanStartColumn = 13, srcSpanEndLine = 1145, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;,"><span class="mpre">(Profunctor p, Alternative m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">(,)</span></span><span class="mpre"> </span><a href="Data.Monoid.html#loc_178_9_178_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_178_9_178_12&#39;)"><span class="hl_tyconref"><span class="mpre">Any</span></span></a><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_1146_1_1146_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_1_1146_9&#39;)"><span class="hl_fundecl"><span class="mpre">failover</span></span></a><span class="mpre"> </span><a name="loc_1146_10_1146_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_10_1146_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_1146_12_1146_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_12_1146_16&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a name="loc_1146_17_1146_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_17_1146_18&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = case </span><a href="#loc_1146_10_1146_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_10_1146_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">(,)</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Any</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">) </span><a href="Data.Profunctor.Unsafe.html#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_101_3_101_7&#39;)"><span class="hl_infix"><span class="mpre">`rmap`</span></span></a><span class="mpre"> </span><a href="#loc_1146_12_1146_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_12_1146_16&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre">) </span><a href="#loc_1146_17_1146_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_17_1146_18&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
  (</span><span class="hl_conref"><span class="mpre">Any</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">, </span><a name="loc_1147_14_1147_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1147_14_1147_15&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">)  -&gt; </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a href="#loc_1147_14_1147_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1147_14_1147_15&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
  (</span><span class="hl_conref"><span class="mpre">Any</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">, _) -&gt; </span><a href="Control.Applicative.html#loc_140_5_140_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_140_5_140_10&#39;)"><span class="hl_varref"><span class="mpre">Applicative.empty</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1146_1_1146_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_1_1146_9&#39;)"><span class="mpre">failover</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Try to map a function which uses the index over this &#39;IndexedTraversal&#39;, failing if the &#39;IndexedTraversal&#39; has no targets.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ifailover&#39; :: Alternative m =&gt; IndexedTraversal i s t a b -&gt; (i -&gt; a -&gt; b) -&gt; s -&gt; m t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_1157_1_1157_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1157_1_1157_10&#39;)"><span class="mpre">ifailover</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1156, srcSpanStartColumn = 14, srcSpanEndLine = 1156, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1156, srcSpanStartColumn = 28, srcSpanEndLine = 1156, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Alternative m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_112_9_112_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_112_9_112_16&#39;)"><span class="hl_tyconref"><span class="mpre">Indexed</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">(,)</span></span><span class="mpre"> </span><a href="Data.Monoid.html#loc_178_9_178_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_178_9_178_12&#39;)"><span class="hl_tyconref"><span class="mpre">Any</span></span></a><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_1157_1_1157_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1157_1_1157_10&#39;)"><span class="hl_fundecl"><span class="mpre">ifailover</span></span></a><span class="mpre"> </span><a name="loc_1157_11_1157_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1157_11_1157_12&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_1157_13_1157_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1157_13_1157_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_1146_1_1146_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1146_1_1146_9&#39;)"><span class="hl_varref"><span class="mpre">failover</span></span></a><span class="mpre"> </span><a href="#loc_1157_11_1157_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1157_11_1157_12&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> </span><a href="#loc_1157_13_1157_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1157_13_1157_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_1157_1_1157_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1157_1_1157_10&#39;)"><span class="mpre">ifailover</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Try the first &#39;Traversal&#39; (or &#39;Fold&#39;), falling back on the second &#39;Traversal&#39; (or &#39;Fold&#39;) if it returns no entries.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is only a valid &#39;Traversal&#39; if the second &#39;Traversal&#39; is disjoint from the result of the first or returns</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exactly the same results. These conditions are trivially met when given a &#39;Lens&#39;, &#39;Iso&#39;, &#39;Getter&#39;, &#39;Prism&#39; or \&quot;affine\&quot; Traversal -- one that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- has 0 or 1 target.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Mutatis mutandis for &#39;Fold&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;Traversal&#39; s t a b -&gt; &#39;Traversal&#39; s t a b -&gt; &#39;Traversal&#39; s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;Prism&#39; s t a b     -&gt; &#39;Prism&#39; s t a b     -&gt; &#39;Traversal&#39; s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;Fold&#39; s a          -&gt; &#39;Fold&#39; s a          -&gt; &#39;Fold&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- These cases are also supported, trivially, but are boring, because the left hand side always succeeds.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;Lens&#39; s t a b      -&gt; &#39;Traversal&#39; s t a b -&gt; &#39;Traversal&#39; s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;Iso&#39; s t a b       -&gt; &#39;Traversal&#39; s t a b -&gt; &#39;Traversal&#39; s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;Equality&#39; s t a b  -&gt; &#39;Traversal&#39; s t a b -&gt; &#39;Traversal&#39; s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;Getter&#39; s a        -&gt; &#39;Fold&#39; s a          -&gt; &#39;Fold&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If both of the inputs are indexed, the result is also indexed, so you can apply this to a pair of indexed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- traversals or indexed folds, obtaining an indexed traversal or indexed fold.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;IndexedTraversal&#39; i s t a b -&gt; &#39;IndexedTraversal&#39; i s t a b -&gt; &#39;IndexedTraversal&#39; i s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;IndexedFold&#39; i s a          -&gt; &#39;IndexedFold&#39; i s a          -&gt; &#39;IndexedFold&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- These cases are also supported, trivially, but are boring, because the left hand side always succeeds.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;IndexedLens&#39; i s t a b      -&gt; &#39;IndexedTraversal&#39; i s t a b -&gt; &#39;IndexedTraversal&#39; i s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;failing&#39; :: &#39;IndexedGetter&#39; i s a        -&gt; &#39;IndexedGetter&#39; i s a        -&gt; &#39;IndexedFold&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_1198_1_1198_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_1_1198_8&#39;)"><span class="mpre">failing</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1197, srcSpanStartColumn = 12, srcSpanEndLine = 1197, srcSpanEndColumn = 43}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1197, srcSpanStartColumn = 12, srcSpanEndLine = 1197, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;,"><span class="mpre">(Conjoined p, Applicative f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_1198_1_1198_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_1_1198_8&#39;)"><span class="hl_fundecl"><span class="mpre">failing</span></span></a><span class="mpre"> </span><a name="loc_1198_9_1198_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_9_1198_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_1198_11_1198_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_11_1198_12&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> </span><a name="loc_1198_13_1198_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_13_1198_17&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> </span><a name="loc_1198_18_1198_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_18_1198_19&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = case </span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_1201_9_1201_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1201_9_1201_10&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
  [] -&gt; </span><span class="hl_varref"><span class="mpre">runBazaarT</span></span><span class="mpre"> (</span><a href="#loc_1198_11_1198_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_11_1198_12&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_1198_18_1198_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_18_1198_19&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) </span><a href="#loc_1198_13_1198_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_13_1198_17&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre">
  </span><a name="loc_1200_3_1200_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1200_3_1200_5&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_1201_9_1201_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1201_9_1201_10&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_1198_13_1198_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_13_1198_17&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre">) </span><a href="#loc_1200_3_1200_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1200_3_1200_5&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">
  where </span><a name="loc_1201_9_1201_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1201_9_1201_10&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_1198_9_1198_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_9_1198_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_1198_18_1198_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1198_18_1198_19&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="warning" data-warning="DeclInfixDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1202, srcSpanStartColumn = 1, srcSpanEndLine = 1202, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1202, srcSpanStartColumn = 8, srcSpanEndLine = 1202, srcSpanEndColumn = 9}]}) (AssocLeft (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull"><span class="mpre">infixl 5 `failing`</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Try the second traversal. If it returns no entries, try again with for all entries from the first traversal, recursively.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;deepOf&#39; :: &#39;Fold&#39; s s          -&gt; &#39;Fold&#39; s a                   -&gt; &#39;Fold&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;deepOf&#39; :: &#39;Traversal&#39;&#39; s s    -&gt; &#39;Traversal&#39;&#39; s a             -&gt; &#39;Traversal&#39;&#39; s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;deepOf&#39; :: &#39;Traversal&#39; s t s t -&gt; &#39;Traversal&#39; s t a b          -&gt; &#39;Traversal&#39; s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;deepOf&#39; :: &#39;Fold&#39; s s          -&gt; &#39;IndexedFold&#39; i s a          -&gt; &#39;IndexedFold&#39; i s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;deepOf&#39; :: &#39;Traversal&#39; s t s t -&gt; &#39;IndexedTraversal&#39; i s t a b -&gt; &#39;IndexedTraversal&#39; i s t a b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_1214_1_1214_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1214_1_1214_7&#39;)"><span class="mpre">deepOf</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1213, srcSpanStartColumn = 11, srcSpanEndLine = 1213, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;, srcSpanStartLine = 1213, srcSpanStartColumn = 11, srcSpanEndLine = 1213, srcSpanEndColumn = 12},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Traversal.hs&quot;,"><span class="mpre">(Conjoined p, Applicative f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Traversing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_1214_1_1214_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1214_1_1214_7&#39;)"><span class="hl_fundecl"><span class="mpre">deepOf</span></span></a><span class="mpre"> </span><a name="loc_1214_8_1214_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1214_8_1214_9&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> </span><a name="loc_1214_10_1214_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1214_10_1214_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_1214_12_1214_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1214_12_1214_16&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> = </span><a href="#loc_1215_9_1215_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_9_1215_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where </span><a name="loc_1215_9_1215_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_9_1215_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_1215_12_1215_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_12_1215_13&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = case </span><a href="#loc_685_1_685_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_1_685_5&#39;)"><span class="hl_varref"><span class="mpre">pins</span></span></a><span class="mpre"> </span><a href="#loc_1218_17_1218_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1218_17_1218_18&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
          [] -&gt; </span><a href="#loc_1214_8_1214_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1214_8_1214_9&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> </span><a href="#loc_1215_9_1215_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_9_1215_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_1215_12_1215_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_12_1215_13&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
          </span><a name="loc_1217_11_1217_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1217_11_1217_13&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_697_1_697_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_697_1_697_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeOuts</span></span></a><span class="mpre"> </span><a href="#loc_1218_17_1218_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1218_17_1218_18&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_1214_12_1214_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1214_12_1214_16&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre">) </span><a href="#loc_1217_11_1217_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1217_11_1217_13&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">
          where </span><a name="loc_1218_17_1218_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1218_17_1218_18&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> = </span><a href="#loc_1214_10_1214_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1214_10_1214_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sell</span></span><span class="mpre"> </span><a href="#loc_1215_12_1215_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1215_12_1215_13&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span></div></body></html>