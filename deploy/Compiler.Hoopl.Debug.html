<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP, RankNTypes, GADTs, ScopedTypeVariables, FlexibleContexts #-}
#if __GLASGOW_HASKELL__ &gt;= 701
{-# LANGUAGE Safe #-}
#endif

module Compiler.Hoopl.Debug 
  ( TraceFn , debugFwdJoins , debugBwdJoins
  , debugFwdTransfers , debugBwdTransfers
  )
where

import Compiler.Hoopl.Dataflow
import Compiler.Hoopl.Show

</span><span class="hl_comment"><span class="mpre">--------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- | Debugging combinators:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Each combinator takes a dataflow pass and produces</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a dataflow pass that can output debugging messages.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- You provide the function, we call it with the applicable message.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The most common use case is probably to:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   1. import &#39;Debug.Trace&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   2. pass &#39;trace&#39; as the 1st argument to the debug combinator</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   3. pass &#39;const true&#39; as the 2nd argument to the debug combinator</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- There are two kinds of debugging messages for a join,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- depending on whether the join is higher in the lattice than the old fact:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   1. If the join is higher, we show:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--         + Join@L: f1 `join` f2 = f&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--      where:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        + indicates a change</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        L is the label where the join takes place</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        f1 is the old fact at the label</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        f2 is the new fact we are joining to f1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        f&#39; is the result of the join</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   2. _ Join@L: f2 &lt;= f1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--      where:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        _ indicates no change</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        L is the label where the join takes place</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        f1 is the old fact at the label (which remains unchanged)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--        f2 is the new fact we joined with f1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--------------------------------------------------------------------------------</span></span><span class="mpre">


</span><a href="#loc_54_1_54_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_14&#39;)"><span class="mpre">debugFwdJoins</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> . </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 48, srcSpanStartColumn = 33, srcSpanEndLine = 48, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 48, srcSpanStartColumn = 40, srcSpanEndLine = 48, srcSpanEndColumn = 42}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Show f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">TraceFn</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ChangePred</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_89_6_89_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_89_6_89_13&#39;)"><span class="hl_tyconref"><span class="mpre">FwdPass</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_89_6_89_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_89_6_89_13&#39;)"><span class="hl_tyconref"><span class="mpre">FwdPass</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">
</span><a href="#loc_55_1_55_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_1_55_14&#39;)"><span class="mpre">debugBwdJoins</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> . </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 49, srcSpanStartColumn = 33, srcSpanEndLine = 49, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 49, srcSpanStartColumn = 40, srcSpanEndLine = 49, srcSpanEndColumn = 42}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Show f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">TraceFn</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ChangePred</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_325_6_325_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_325_6_325_13&#39;)"><span class="hl_tyconref"><span class="mpre">BwdPass</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_325_6_325_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_325_6_325_13&#39;)"><span class="hl_tyconref"><span class="mpre">BwdPass</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 51, srcSpanStartColumn = 1, srcSpanEndLine = 51, srcSpanEndColumn = 46}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 51, srcSpanStartColumn = 1, srcSpanEndLine = 51, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs"><span class="mpre">type TraceFn    = forall a . String -&gt; a -&gt; a</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 52, srcSpanStartColumn = 1, srcSpanEndLine = 52, srcSpanEndColumn = 37}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 52, srcSpanStartColumn = 1, srcSpanEndLine = 52, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs"><span class="mpre">type ChangePred = ChangeFlag -&gt; Bool</span></span><span class="mpre">

</span><a name="loc_54_1_54_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_14&#39;)"><span class="hl_fundecl"><span class="mpre">debugFwdJoins</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">trace</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">pred</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">p</span></span><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 30, srcSpanEndLine = 54, srcSpanEndColumn = 85}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 32, srcSpanEndLine = 54, srcSpanEndColumn = 33},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debu"><span class="mpre">p { fp_lattice = debugJoins trace pred $ fp_lattice p }</span></span><span class="mpre">
</span><a name="loc_55_1_55_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_1_55_14&#39;)"><span class="hl_fundecl"><span class="mpre">debugBwdJoins</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">trace</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">pred</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">p</span></span><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 55, srcSpanStartColumn = 30, srcSpanEndLine = 55, srcSpanEndColumn = 85}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 55, srcSpanStartColumn = 32, srcSpanEndLine = 55, srcSpanEndColumn = 33},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debu"><span class="mpre">p { bp_lattice = debugJoins trace pred $ bp_lattice p }</span></span><span class="mpre">

</span><a href="#loc_58_1_58_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_11&#39;)"><span class="mpre">debugJoins</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 57, srcSpanStartColumn = 15, srcSpanEndLine = 57, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 57, srcSpanStartColumn = 22, srcSpanEndLine = 57, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Show f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">TraceFn</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ChangePred</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_50_6_50_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_50_6_50_21&#39;)"><span class="hl_tyconref"><span class="mpre">DataflowLattice</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_50_6_50_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_50_6_50_21&#39;)"><span class="hl_tyconref"><span class="mpre">DataflowLattice</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">
</span><a name="loc_58_1_58_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_11&#39;)"><span class="hl_fundecl"><span class="mpre">debugJoins</span></span></a><span class="mpre"> </span><a name="loc_58_12_58_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_12_58_17&#39;)"><span class="hl_vardecl"><span class="mpre">trace</span></span></a><span class="mpre"> </span><a name="loc_58_18_58_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_18_58_26&#39;)"><span class="hl_vardecl"><span class="mpre">showPred</span></span></a><span class="mpre"> </span><span class="hl_specname"><span class="mpre">l</span></span><span class="mpre">@(</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 58, srcSpanStartColumn = 30, srcSpanEndLine = 58, srcSpanEndColumn = 64}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 58, srcSpanStartColumn = 46, srcSpanEndLine = 58, srcSpanEndColumn = 47},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;"><span class="mpre">DataflowLattice {fact_join = join}</span></span><span class="mpre">) = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 58, srcSpanStartColumn = 68, srcSpanEndLine = 58, srcSpanEndColumn = 89}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 58, srcSpanStartColumn = 70, srcSpanEndLine = 58, srcSpanEndColumn = 71},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debu"><span class="mpre">l {fact_join = join&#39;}</span></span><span class="mpre">
  where
   </span><span class="hl_fundecl"><span class="mpre">join&#39;</span></span><span class="mpre"> </span><a name="loc_60_10_60_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_10_60_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_60_12_60_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_12_60_14&#39;)"><span class="hl_specname"><span class="mpre">f1</span></span></a><span class="mpre">@(</span><a href="Compiler.Hoopl.Dataflow.html#loc_63_21_63_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_63_21_63_28&#39;)"><span class="hl_conref"><span class="mpre">OldFact</span></span></a><span class="mpre"> </span><a name="loc_60_24_60_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_24_60_27&#39;)"><span class="hl_vardecl"><span class="mpre">of1</span></span></a><span class="mpre">) </span><a name="loc_60_29_60_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_29_60_31&#39;)"><span class="hl_specname"><span class="mpre">f2</span></span></a><span class="mpre">@(</span><a href="Compiler.Hoopl.Dataflow.html#loc_64_21_64_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_64_21_64_28&#39;)"><span class="hl_conref"><span class="mpre">NewFact</span></span></a><span class="mpre"> </span><a name="loc_60_41_60_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_41_60_44&#39;)"><span class="hl_vardecl"><span class="mpre">nf2</span></span></a><span class="mpre">) =
     if </span><a href="#loc_58_18_58_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_18_58_26&#39;)"><span class="hl_varref"><span class="mpre">showPred</span></span></a><span class="mpre"> </span><a href="#loc_62_19_62_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_19_62_20&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> then </span><a href="#loc_58_12_58_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_12_58_17&#39;)"><span class="hl_varref"><span class="mpre">trace</span></span></a><span class="mpre"> </span><a href="#loc_63_14_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_14_63_20&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre"> </span><a href="#loc_62_14_62_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_14_62_17&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> else </span><a href="#loc_62_14_62_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_14_62_17&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
       where </span><a name="loc_62_14_62_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_14_62_17&#39;)"><span class="hl_specname"><span class="mpre">res</span></span></a><span class="mpre">@(</span><a name="loc_62_19_62_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_19_62_20&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre">, </span><a name="loc_62_22_62_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_22_62_24&#39;)"><span class="hl_vardecl"><span class="mpre">f&#39;</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">join</span></span><span class="mpre"> </span><a href="#loc_60_10_60_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_10_60_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_60_12_60_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_12_60_14&#39;)"><span class="hl_varref"><span class="mpre">f1</span></span></a><span class="mpre"> </span><a href="#loc_60_29_60_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_29_60_31&#39;)"><span class="hl_varref"><span class="mpre">f2</span></span></a><span class="mpre">
             </span><a name="loc_63_14_63_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_14_63_20&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> = case </span><a href="#loc_62_19_62_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_19_62_20&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> of
                        </span><a href="Compiler.Hoopl.Dataflow.html#loc_66_30_66_40" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_66_30_66_40&#39;)"><span class="hl_conref"><span class="mpre">SomeChange</span></span></a><span class="mpre"> -&gt; </span><span class="hl_string"><span class="mpre">&quot;+ Join@&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_60_10_60_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_10_60_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_60_24_60_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_24_60_27&#39;)"><span class="hl_varref"><span class="mpre">of1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; `join` &quot;</span></span><span class="mpre">
                                                                  </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_60_41_60_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_41_60_44&#39;)"><span class="hl_varref"><span class="mpre">nf2</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; = &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_62_22_62_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_22_62_24&#39;)"><span class="hl_varref"><span class="mpre">f&#39;</span></span></a><span class="mpre">
                        </span><a href="Compiler.Hoopl.Dataflow.html#loc_66_19_66_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_66_19_66_27&#39;)"><span class="hl_conref"><span class="mpre">NoChange</span></span></a><span class="mpre">   -&gt; </span><span class="hl_string"><span class="mpre">&quot;_ Join@&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_60_10_60_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_10_60_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_60_41_60_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_41_60_44&#39;)"><span class="hl_varref"><span class="mpre">nf2</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; &lt;= &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_60_24_60_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_24_60_27&#39;)"><span class="hl_varref"><span class="mpre">of1</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">--------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Functions we&#39;d like to have, but don&#39;t know how to implement generically:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 72, srcSpanStartColumn = 1, srcSpanEndLine = 72, srcSpanEndColumn = 51}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 72, srcSpanStartColumn = 1, srcSpanEndLine = 72, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs"><span class="mpre">type ShowN n   = forall e x . n e x -&gt;      String</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 73, srcSpanStartColumn = 1, srcSpanEndLine = 73, srcSpanEndColumn = 56}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 73, srcSpanStartColumn = 1, srcSpanEndLine = 73, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs"><span class="mpre">type FPred n f = forall e x . n e x -&gt; f        -&gt; Bool</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 74, srcSpanStartColumn = 1, srcSpanEndLine = 74, srcSpanEndColumn = 56}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 74, srcSpanStartColumn = 1, srcSpanEndLine = 74, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs"><span class="mpre">type BPred n f = forall e x . n e x -&gt; Fact x f -&gt; Bool</span></span><span class="mpre">
</span><a href="#loc_77_1_77_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_1_77_18&#39;)"><span class="mpre">debugFwdTransfers</span></a><span class="mpre">::
  forall </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> . </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 76, srcSpanStartColumn = 18, srcSpanEndLine = 76, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 76, srcSpanStartColumn = 25, srcSpanEndLine = 76, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Show f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">TraceFn</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ShowN</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FPred</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_89_6_89_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_89_6_89_13&#39;)"><span class="hl_tyconref"><span class="mpre">FwdPass</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_89_6_89_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_89_6_89_13&#39;)"><span class="hl_tyconref"><span class="mpre">FwdPass</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">
</span><a name="loc_77_1_77_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_1_77_18&#39;)"><span class="hl_fundecl"><span class="mpre">debugFwdTransfers</span></span></a><span class="mpre"> </span><a name="loc_77_19_77_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_19_77_24&#39;)"><span class="hl_vardecl"><span class="mpre">trace</span></span></a><span class="mpre"> </span><a name="loc_77_25_77_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_25_77_30&#39;)"><span class="hl_vardecl"><span class="mpre">showN</span></span></a><span class="mpre"> </span><a name="loc_77_31_77_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_31_77_39&#39;)"><span class="hl_vardecl"><span class="mpre">showPred</span></span></a><span class="mpre"> </span><a name="loc_77_40_77_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_40_77_44&#39;)"><span class="hl_vardecl"><span class="mpre">pass</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 47, srcSpanEndLine = 77, srcSpanEndColumn = 80}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 77, srcSpanStartColumn = 52, srcSpanEndLine = 77, srcSpanEndColumn = 53},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debu"><span class="mpre">pass { fp_transfer = transfers&#39; }</span></span><span class="mpre">
  where
    (</span><a name="loc_79_6_79_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_6_79_7&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">, </span><a name="loc_79_9_79_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_9_79_10&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">, </span><a name="loc_79_12_79_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_12_79_13&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">) = </span><a href="Compiler.Hoopl.Dataflow.html#loc_95_20_95_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_95_20_95_33&#39;)"><span class="hl_varref"><span class="mpre">getFTransfer3</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Compiler.Hoopl.Dataflow.html#loc_91_15_91_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_91_15_91_26&#39;)"><span class="hl_varref"><span class="mpre">fp_transfer</span></span></a><span class="mpre"> </span><a href="#loc_77_40_77_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_40_77_44&#39;)"><span class="hl_varref"><span class="mpre">pass</span></span></a><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">transfers&#39;</span></span><span class="mpre"> = </span><a href="Compiler.Hoopl.Dataflow.html#loc_137_1_137_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_137_1_137_13&#39;)"><span class="hl_varref"><span class="mpre">mkFTransfer3</span></span></a><span class="mpre"> (</span><a href="#loc_82_5_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_5_82_9&#39;)"><span class="hl_varref"><span class="mpre">wrap</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_79_6_79_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_6_79_7&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) (</span><a href="#loc_82_5_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_5_82_9&#39;)"><span class="hl_varref"><span class="mpre">wrap</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_79_9_79_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_9_79_10&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) (</span><a href="#loc_82_5_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_5_82_9&#39;)"><span class="hl_varref"><span class="mpre">wrap</span></span></a><span class="mpre"> </span><a href="Compiler.Hoopl.Show.html#loc_46_1_46_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Show.html#loc_46_1_46_13&#39;)"><span class="hl_varref"><span class="mpre">showFactBase</span></span></a><span class="mpre"> </span><a href="#loc_79_12_79_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_12_79_13&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">)
    </span><a href="#loc_82_5_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_5_82_9&#39;)"><span class="mpre">wrap</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> . (</span><span class="hl_tyconref"><span class="mpre">Fact</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Fact</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Fact</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">
    </span><a name="loc_82_5_82_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_5_82_9&#39;)"><span class="hl_fundecl"><span class="mpre">wrap</span></span></a><span class="mpre"> </span><a name="loc_82_10_82_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_10_82_18&#39;)"><span class="hl_vardecl"><span class="mpre">showOutF</span></span></a><span class="mpre"> </span><a name="loc_82_19_82_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_21&#39;)"><span class="hl_vardecl"><span class="mpre">ft</span></span></a><span class="mpre"> </span><a name="loc_82_22_82_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_22_82_23&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_82_24_82_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_24_82_25&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = if </span><a href="#loc_77_31_77_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_31_77_39&#39;)"><span class="hl_varref"><span class="mpre">showPred</span></span></a><span class="mpre"> </span><a href="#loc_82_22_82_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_22_82_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_82_24_82_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_24_82_25&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> then </span><a href="#loc_77_19_77_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_19_77_24&#39;)"><span class="hl_varref"><span class="mpre">trace</span></span></a><span class="mpre"> </span><a href="#loc_85_9_85_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_9_85_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre"> </span><a href="#loc_84_9_84_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_12&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> else </span><a href="#loc_84_9_84_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_12&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
      where
        </span><a name="loc_84_9_84_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_12&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre">    = </span><a href="#loc_82_19_82_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_19_82_21&#39;)"><span class="hl_varref"><span class="mpre">ft</span></span></a><span class="mpre"> </span><a href="#loc_82_22_82_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_22_82_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_82_24_82_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_24_82_25&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
        </span><a name="loc_85_9_85_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_9_85_15&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> = </span><a href="#loc_86_5_86_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_5_86_9&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; transfer: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_82_24_82_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_24_82_25&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; -&gt; &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_77_25_77_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_25_77_30&#39;)"><span class="hl_varref"><span class="mpre">showN</span></span></a><span class="mpre"> </span><a href="#loc_82_22_82_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_22_82_23&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; -&gt; &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_82_10_82_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_82_10_82_18&#39;)"><span class="hl_varref"><span class="mpre">showOutF</span></span></a><span class="mpre"> </span><a href="#loc_84_9_84_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_84_9_84_12&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
    </span><a name="loc_86_5_86_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_5_86_9&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre"> = </span><a href="Compiler.Hoopl.Dataflow.html#loc_51_4_51_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_51_4_51_13&#39;)"><span class="hl_varref"><span class="mpre">fact_name</span></span></a><span class="mpre"> (</span><a href="Compiler.Hoopl.Dataflow.html#loc_90_15_90_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_90_15_90_25&#39;)"><span class="hl_varref"><span class="mpre">fp_lattice</span></span></a><span class="mpre"> </span><a href="#loc_77_40_77_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_40_77_44&#39;)"><span class="hl_varref"><span class="mpre">pass</span></span></a><span class="mpre">)
    
</span><a href="#loc_90_1_90_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_1_90_18&#39;)"><span class="mpre">debugBwdTransfers</span></a><span class="mpre">::
  forall </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> . </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 89, srcSpanStartColumn = 18, srcSpanEndLine = 89, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 89, srcSpanStartColumn = 25, srcSpanEndLine = 89, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/"><span class="mpre">Show f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">TraceFn</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ShowN</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">BPred</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_325_6_325_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_325_6_325_13&#39;)"><span class="hl_tyconref"><span class="mpre">BwdPass</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><a href="Compiler.Hoopl.Dataflow.html#loc_325_6_325_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_325_6_325_13&#39;)"><span class="hl_tyconref"><span class="mpre">BwdPass</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">
</span><a name="loc_90_1_90_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_1_90_18&#39;)"><span class="hl_fundecl"><span class="mpre">debugBwdTransfers</span></span></a><span class="mpre"> </span><a name="loc_90_19_90_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_19_90_24&#39;)"><span class="hl_vardecl"><span class="mpre">trace</span></span></a><span class="mpre"> </span><a name="loc_90_25_90_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_25_90_30&#39;)"><span class="hl_vardecl"><span class="mpre">showN</span></span></a><span class="mpre"> </span><a name="loc_90_31_90_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_31_90_39&#39;)"><span class="hl_vardecl"><span class="mpre">showPred</span></span></a><span class="mpre"> </span><a name="loc_90_40_90_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_40_90_44&#39;)"><span class="hl_vardecl"><span class="mpre">pass</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 90, srcSpanStartColumn = 47, srcSpanEndLine = 90, srcSpanEndColumn = 80}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debug.hs&quot;, srcSpanStartLine = 90, srcSpanStartColumn = 52, srcSpanEndLine = 90, srcSpanEndColumn = 53},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/hoopl-3.10.0.1/src/Compiler/Hoopl/Debu"><span class="mpre">pass { bp_transfer = transfers&#39; }</span></span><span class="mpre">
  where
    (</span><a name="loc_92_6_92_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_6_92_7&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">, </span><a name="loc_92_9_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_9_92_10&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">, </span><a name="loc_92_12_92_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_12_92_13&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre">) = </span><a href="Compiler.Hoopl.Dataflow.html#loc_331_20_331_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_331_20_331_33&#39;)"><span class="hl_varref"><span class="mpre">getBTransfer3</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Compiler.Hoopl.Dataflow.html#loc_327_15_327_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_327_15_327_26&#39;)"><span class="hl_varref"><span class="mpre">bp_transfer</span></span></a><span class="mpre"> </span><a href="#loc_90_40_90_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_40_90_44&#39;)"><span class="hl_varref"><span class="mpre">pass</span></span></a><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">transfers&#39;</span></span><span class="mpre"> = </span><a href="Compiler.Hoopl.Dataflow.html#loc_373_1_373_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_373_1_373_13&#39;)"><span class="hl_varref"><span class="mpre">mkBTransfer3</span></span></a><span class="mpre"> (</span><a href="#loc_95_5_95_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_5_95_9&#39;)"><span class="hl_varref"><span class="mpre">wrap</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_92_6_92_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_6_92_7&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">) (</span><a href="#loc_95_5_95_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_5_95_9&#39;)"><span class="hl_varref"><span class="mpre">wrap</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_92_9_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_9_92_10&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) (</span><a href="#loc_95_5_95_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_5_95_9&#39;)"><span class="hl_varref"><span class="mpre">wrap</span></span></a><span class="mpre"> </span><a href="Compiler.Hoopl.Show.html#loc_46_1_46_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Show.html#loc_46_1_46_13&#39;)"><span class="hl_varref"><span class="mpre">showFactBase</span></span></a><span class="mpre"> </span><a href="#loc_92_12_92_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_12_92_13&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">)
    </span><a href="#loc_95_5_95_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_5_95_9&#39;)"><span class="mpre">wrap</span></a><span class="mpre"> :: forall </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> . (</span><span class="hl_tyconref"><span class="mpre">Fact</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Fact</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Fact</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre">
    </span><a name="loc_95_5_95_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_5_95_9&#39;)"><span class="hl_fundecl"><span class="mpre">wrap</span></span></a><span class="mpre"> </span><a name="loc_95_10_95_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_10_95_17&#39;)"><span class="hl_vardecl"><span class="mpre">showInF</span></span></a><span class="mpre"> </span><a name="loc_95_18_95_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_18_95_20&#39;)"><span class="hl_vardecl"><span class="mpre">ft</span></span></a><span class="mpre"> </span><a name="loc_95_21_95_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_21_95_22&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_95_23_95_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_23_95_24&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = if </span><a href="#loc_90_31_90_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_31_90_39&#39;)"><span class="hl_varref"><span class="mpre">showPred</span></span></a><span class="mpre"> </span><a href="#loc_95_21_95_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_21_95_22&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_95_23_95_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_23_95_24&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> then </span><a href="#loc_90_19_90_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_19_90_24&#39;)"><span class="hl_varref"><span class="mpre">trace</span></span></a><span class="mpre"> </span><a href="#loc_98_9_98_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_9_98_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre"> </span><a href="#loc_97_9_97_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_9_97_12&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> else </span><a href="#loc_97_9_97_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_9_97_12&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
      where
        </span><a name="loc_97_9_97_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_9_97_12&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre">    = </span><a href="#loc_95_18_95_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_18_95_20&#39;)"><span class="hl_varref"><span class="mpre">ft</span></span></a><span class="mpre"> </span><a href="#loc_95_21_95_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_21_95_22&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_95_23_95_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_23_95_24&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">
        </span><a name="loc_98_9_98_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_98_9_98_15&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> = </span><a href="#loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; transfer: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_95_10_95_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_10_95_17&#39;)"><span class="hl_varref"><span class="mpre">showInF</span></span></a><span class="mpre"> </span><a href="#loc_95_23_95_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_23_95_24&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; -&gt; &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_90_25_90_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_25_90_30&#39;)"><span class="hl_varref"><span class="mpre">showN</span></span></a><span class="mpre"> </span><a href="#loc_95_21_95_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_21_95_22&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; -&gt; &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_97_9_97_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_9_97_12&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
    </span><a name="loc_99_5_99_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_99_5_99_9&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre"> = </span><a href="Compiler.Hoopl.Dataflow.html#loc_51_4_51_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_51_4_51_13&#39;)"><span class="hl_varref"><span class="mpre">fact_name</span></span></a><span class="mpre"> (</span><a href="Compiler.Hoopl.Dataflow.html#loc_326_15_326_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Compiler.Hoopl.Dataflow.html#loc_326_15_326_25&#39;)"><span class="hl_varref"><span class="mpre">bp_lattice</span></span></a><span class="mpre"> </span><a href="#loc_90_40_90_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_40_90_44&#39;)"><span class="hl_varref"><span class="mpre">pass</span></span></a><span class="mpre">)
    

</span><span class="hl_comment"><span class="mpre">-- debugFwdTransfers, debugFwdRewrites, debugFwdAll ::</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   forall m n f . Show f =&gt; TraceFn -&gt; ShowN n -&gt; FwdPass m n f -&gt; FwdPass m n f</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- debugBwdTransfers, debugBwdRewrites, debugBwdAll ::</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   forall m n f . Show f =&gt; TraceFn -&gt; ShowN n -&gt; BwdPass m n f -&gt; BwdPass m n f</span></span><span class="mpre">

</span></div></body></html>