<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-- | UTF-8 encode a text</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Tested in this benchmark:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Replicating a string a number of times</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * UTF-8 encoding it</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
module Benchmarks.EncodeUtf8
    ( benchmark
    ) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/EncodeUtf8.hs&quot;, srcSpanStartLine = 13, srcSpanStartColumn = 8, srcSpanEndLine = 13, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;Criterion&quot;"><span class="mpre">Criterion</span></span><span class="mpre"> (Benchmark, bgroup, bench, whnf)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/EncodeUtf8.hs&quot;, srcSpanStartLine = 14, srcSpanStartColumn = 18, srcSpanEndLine = 14, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as B
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/EncodeUtf8.hs&quot;, srcSpanStartLine = 15, srcSpanStartColumn = 18, srcSpanEndLine = 15, srcSpanEndColumn = 38}, srcInfoPoints = []}) &quot;Data.ByteString.Lazy&quot;"><span class="mpre">Data.ByteString.Lazy</span></span><span class="mpre"> as BL
import qualified Data.Text as T
import qualified Data.Text.Encoding as T
import qualified Data.Text.Lazy as TL
import qualified Data.Text.Lazy.Encoding as TL

</span><a href="#loc_22_1_22_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_1_22_10&#39;)"><span class="mpre">benchmark</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Benchmark</span></span><span class="mpre">
</span><a name="loc_22_1_22_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_1_22_10&#39;)"><span class="hl_fundecl"><span class="mpre">benchmark</span></span></a><span class="mpre"> </span><a name="loc_22_11_22_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_11_22_17&#39;)"><span class="hl_vardecl"><span class="mpre">string</span></span></a><span class="mpre"> = do
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">bgroup</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;EncodeUtf8&quot;</span></span><span class="mpre">
        [ </span><span class="hl_varref"><span class="mpre">bench</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Text&quot;</span></span><span class="mpre">     </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">whnf</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">B.length</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Encoding.html#loc_386_1_386_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.html#loc_386_1_386_11&#39;)"><span class="hl_varref"><span class="mpre">T.encodeUtf8</span></span></a><span class="mpre">)   </span><a href="#loc_29_5_29_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_5_29_9&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre">
        , </span><span class="hl_varref"><span class="mpre">bench</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;LazyText&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">whnf</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BL.length</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Lazy.Encoding.html#loc_153_1_153_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.Encoding.html#loc_153_1_153_11&#39;)"><span class="hl_varref"><span class="mpre">TL.encodeUtf8</span></span></a><span class="mpre">) </span><a href="#loc_30_5_30_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_5_30_13&#39;)"><span class="hl_varref"><span class="mpre">lazyText</span></span></a><span class="mpre">
        ]
  where
    </span><span class="hl_comment"><span class="mpre">-- The string in different formats</span></span><span class="mpre">
    </span><a name="loc_29_5_29_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_5_29_9&#39;)"><span class="hl_vardecl"><span class="mpre">text</span></span></a><span class="mpre"> = </span><a href="Data.Text.html#loc_962_1_962_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.html#loc_962_1_962_10&#39;)"><span class="hl_varref"><span class="mpre">T.replicate</span></span></a><span class="mpre"> </span><a href="#loc_33_5_33_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_5_33_6&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Text.html#loc_387_1_387_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.html#loc_387_1_387_5&#39;)"><span class="hl_varref"><span class="mpre">T.pack</span></span></a><span class="mpre"> </span><a href="#loc_22_11_22_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_11_22_17&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre">
    </span><a name="loc_30_5_30_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_30_5_30_13&#39;)"><span class="hl_vardecl"><span class="mpre">lazyText</span></span></a><span class="mpre"> = </span><a href="Data.Text.Lazy.html#loc_879_1_879_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.html#loc_879_1_879_10&#39;)"><span class="hl_varref"><span class="mpre">TL.replicate</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_33_5_33_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_5_33_6&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Text.Lazy.html#loc_348_1_348_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.html#loc_348_1_348_5&#39;)"><span class="hl_varref"><span class="mpre">TL.pack</span></span></a><span class="mpre"> </span><a href="#loc_22_11_22_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_11_22_17&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- Amount</span></span><span class="mpre">
    </span><a name="loc_33_5_33_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_5_33_6&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">100000</span></span><span class="mpre">
</span></div></body></html>