<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
#ifdef TRUSTWORTHY
{-# LANGUAGE Trustworthy #-}
#endif
#ifndef MIN_VERSION_parallel
#define MIN_VERSION_parallel(x,y,z) (defined(__GLASGOW_HASKELL__) &amp;&amp; __GLASGOW_HASKELL &gt; 700)
#endif
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Parallel.Strategies.Lens</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2012-2014 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A &#39;Lens&#39; or &#39;Traversal&#39; can be used to take the role of &#39;Traversable&#39; in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @Control.Parallel.Strategies@, enabling those combinators to work with</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- monomorphic containers.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Parallel.Strategies.Lens
  ( evalOf
  , parOf
  , after
  , throughout
  ) where

import Control.Lens
import Control.Parallel.Strategies

</span><span class="hl_comment"><span class="mpre">-- | Evaluate the targets of a &#39;Lens&#39; or &#39;Traversal&#39; into a data structure</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- according to the given &#39;Strategy&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;evalTraversable&#39; = &#39;evalOf&#39; &#39;traverse&#39; = &#39;traverse&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;evalOf&#39; = &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;evalOf&#39; :: &#39;Lens&#39;&#39; s a -&gt; &#39;Strategy&#39; a -&gt; &#39;Strategy&#39; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;evalOf&#39; :: &#39;Traversal&#39;&#39; s a -&gt; &#39;Strategy&#39; a -&gt; &#39;Strategy&#39; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;evalOf&#39; :: (a -&gt; &#39;Eval&#39; a) -&gt; s -&gt; &#39;Eval&#39; s) -&gt; &#39;Strategy&#39; a -&gt; &#39;Strategy&#39; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_45_1_45_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_1_45_7&#39;)"><span class="mpre">evalOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">LensLike&#39;</span></span><span class="mpre"> </span><a href="Control.Parallel.Strategies.html#loc_193_9_193_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Parallel.Strategies.html#loc_193_9_193_13&#39;)"><span class="hl_tyconref"><span class="mpre">Eval</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Strategy</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Strategy</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">
</span><a name="loc_45_1_45_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_1_45_7&#39;)"><span class="hl_fundecl"><span class="mpre">evalOf</span></span></a><span class="mpre"> </span><a name="loc_45_8_45_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_8_45_9&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_45_8_45_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_8_45_9&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_45_1_45_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_1_45_7&#39;)"><span class="mpre">evalOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Evaluate the targets of a &#39;Lens&#39; or &#39;Traversal&#39; according into a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- data structure according to a given &#39;Strategy&#39; in parallel.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @&#39;parTraversable&#39; = &#39;parOf&#39; &#39;traverse&#39;@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;parOf&#39; :: &#39;Lens&#39;&#39; s a -&gt; &#39;Strategy&#39; a -&gt; &#39;Strategy&#39; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;parOf&#39; :: &#39;Traversal&#39;&#39; s a -&gt; &#39;Strategy&#39; a -&gt; &#39;Strategy&#39; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;parOf&#39; :: ((a -&gt; &#39;Eval&#39; a) -&gt; s -&gt; &#39;Eval&#39; s) -&gt; &#39;Strategy&#39; a -&gt; &#39;Strategy&#39; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_60_1_60_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_6&#39;)"><span class="mpre">parOf</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">LensLike&#39;</span></span><span class="mpre"> </span><a href="Control.Parallel.Strategies.html#loc_193_9_193_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Parallel.Strategies.html#loc_193_9_193_13&#39;)"><span class="hl_tyconref"><span class="mpre">Eval</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Strategy</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Strategy</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">
#if MIN_VERSION_parallel(3,2,0)
</span><a name="loc_60_1_60_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_6&#39;)"><span class="hl_fundecl"><span class="mpre">parOf</span></span></a><span class="mpre"> </span><a name="loc_60_7_60_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_7_60_8&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_60_9_60_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_9_60_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_60_7_60_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_7_60_8&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><a href="Control.Parallel.Strategies.html#loc_401_1_401_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Parallel.Strategies.html#loc_401_1_401_9&#39;)"><span class="hl_varref"><span class="mpre">rparWith</span></span></a><span class="mpre"> </span><a href="#loc_60_9_60_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_9_60_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
#else
</span><a href="#loc_60_1_60_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_6&#39;)"><span class="hl_fundecl"><span class="mpre">parOf</span></span></a><span class="mpre"> </span><a name="loc_62_7_62_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_7_62_8&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_62_9_62_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_9_62_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_62_7_62_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_7_62_8&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><a href="Control.Parallel.Strategies.html#loc_383_1_383_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Parallel.Strategies.html#loc_383_1_383_5&#39;)"><span class="hl_varref"><span class="mpre">rpar</span></span></a><span class="mpre"> </span><a href="Control.Parallel.Strategies.html#loc_294_8_294_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Parallel.Strategies.html#loc_294_8_294_13&#39;)"><span class="hl_infix"><span class="mpre">`dot`</span></span></a><span class="mpre"> </span><a href="#loc_62_9_62_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_9_62_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
#endif
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_60_1_60_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_1_60_6&#39;)"><span class="mpre">parOf</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Transform a &#39;Lens&#39;, &#39;Fold&#39;, &#39;Getter&#39;, &#39;Setter&#39; or &#39;Traversal&#39; to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- first evaluates its argument according to a given &#39;Strategy&#39; /before/ proceeding.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;after&#39; &#39;rdeepseq&#39; &#39;traverse&#39; :: &#39;Traversable&#39; t =&gt; &#39;Strategy&#39; a -&gt; &#39;Strategy&#39; [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_73_1_73_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_1_73_6&#39;)"><span class="mpre">after</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Strategy</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_73_1_73_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_1_73_6&#39;)"><span class="hl_fundecl"><span class="mpre">after</span></span></a><span class="mpre"> </span><a name="loc_73_7_73_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_7_73_8&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><a name="loc_73_9_73_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_9_73_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_73_11_73_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_11_73_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_73_9_73_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_9_73_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_73_11_73_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_11_73_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Parallel.Strategies.html#loc_664_3_664_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Parallel.Strategies.html#loc_664_3_664_5&#39;)"><span class="hl_infix"><span class="mpre">$|</span></span></a><span class="mpre"> </span><a href="#loc_73_7_73_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_7_73_8&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_73_1_73_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_1_73_6&#39;)"><span class="mpre">after</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Transform a &#39;Lens&#39;, &#39;Fold&#39;, &#39;Getter&#39;, &#39;Setter&#39; or &#39;Traversal&#39; to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- evaluate its argument according to a given &#39;Strategy&#39; /in parallel with/ evaluating.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;throughout&#39; &#39;rdeepseq&#39; &#39;traverse&#39; :: &#39;Traversable&#39; t =&gt; &#39;Strategy&#39; a -&gt; &#39;Strategy&#39; [a]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_83_1_83_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_1_83_11&#39;)"><span class="mpre">throughout</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Strategy</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">LensLike</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_83_1_83_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_1_83_11&#39;)"><span class="hl_fundecl"><span class="mpre">throughout</span></span></a><span class="mpre"> </span><a name="loc_83_12_83_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_12_83_13&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><a name="loc_83_14_83_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_14_83_15&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_83_16_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_16_83_17&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_83_14_83_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_14_83_15&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><a href="#loc_83_16_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_16_83_17&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Parallel.Strategies.html#loc_669_3_669_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Parallel.Strategies.html#loc_669_3_669_6&#39;)"><span class="hl_infix"><span class="mpre">$||</span></span></a><span class="mpre"> </span><a href="#loc_83_12_83_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_12_83_13&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_83_1_83_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_1_83_11&#39;)"><span class="mpre">throughout</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>