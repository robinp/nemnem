<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
#if __GLASGOW_HASKELL__ &gt;= 701
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  System.IO.UTF8</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (c) Eric Mertens 2007</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD3-style (see LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer:    emertens@galois.com</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- String IO preserving UTF8 encoding.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">

module System.IO.UTF8 (
      print
    , putStr
    , putStrLn
    , getLine
    , readLn
    , openBinaryFile
    , withBinaryFile
    , readFile
    , writeFile
    , appendFile
    , interact
    , getContents
    , hGetLine
    , hGetContents
    , hPutStr
    , hPutStrLn
  ) where

import Control.Monad (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="mpre">liftM</span></a><span class="mpre">)
import Data.Word (Word8)
import Prelude (String, </span><a href="Control.Monad.html#loc_92_3_92_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_92_3_92_6&#39;)"><span class="mpre">(=&lt;&lt;)</span></a><span class="mpre">, (.), map, Enum(toEnum, fromEnum), Read,
                Show(..))
import System.IO (Handle, IO, FilePath, </span><a href="GHC.IO.IOMode.html#loc_28_6_28_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_6_28_12&#39;)"><span class="mpre">IOMode</span></a><span class="mpre">(</span><a href="GHC.IO.IOMode.html#loc_28_44_28_54" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_44_28_54&#39;)"><span class="mpre">AppendMode</span></a><span class="mpre">, </span><a href="GHC.IO.IOMode.html#loc_28_21_28_29" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_21_28_29&#39;)"><span class="mpre">ReadMode</span></a><span class="mpre">, </span><a href="GHC.IO.IOMode.html#loc_28_32_28_41" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_32_28_41&#39;)"><span class="mpre">WriteMode</span></a><span class="mpre">))
import qualified System.IO as IO
import Control.Exception (</span><a href="Control.Exception.Base.html#loc_259_1_259_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_259_1_259_8&#39;)"><span class="mpre">bracket</span></a><span class="mpre">)

import Codec.Binary.UTF8.String (</span><a href="Codec.Binary.UTF8.String.html#loc_72_1_72_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Codec.Binary.UTF8.String.html#loc_72_1_72_7&#39;)"><span class="mpre">encode</span></a><span class="mpre">, </span><a href="Codec.Binary.UTF8.String.html#loc_78_1_78_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Codec.Binary.UTF8.String.html#loc_78_1_78_7&#39;)"><span class="mpre">decode</span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- | Encode a string in UTF8 form.</span></span><span class="mpre">
</span><a href="#loc_50_1_50_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_1_50_13&#39;)"><span class="mpre">encodeString</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_50_1_50_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_1_50_13&#39;)"><span class="hl_fundecl"><span class="mpre">encodeString</span></span></a><span class="mpre"> </span><a name="loc_50_14_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_14_50_16&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><a href="#loc_58_1_58_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_14&#39;)"><span class="hl_varref"><span class="mpre">bytesToString</span></span></a><span class="mpre"> (</span><a href="Codec.Binary.UTF8.String.html#loc_72_1_72_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Codec.Binary.UTF8.String.html#loc_72_1_72_7&#39;)"><span class="hl_varref"><span class="mpre">encode</span></span></a><span class="mpre"> </span><a href="#loc_50_14_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_14_50_16&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Decode a string from UTF8</span></span><span class="mpre">
</span><a href="#loc_54_1_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_13&#39;)"><span class="mpre">decodeString</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_54_1_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_13&#39;)"><span class="hl_fundecl"><span class="mpre">decodeString</span></span></a><span class="mpre"> </span><a name="loc_54_14_54_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_14_54_16&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><a href="Codec.Binary.UTF8.String.html#loc_78_1_78_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Codec.Binary.UTF8.String.html#loc_78_1_78_7&#39;)"><span class="hl_varref"><span class="mpre">decode</span></span></a><span class="mpre"> (</span><a href="#loc_62_1_62_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_14&#39;)"><span class="hl_varref"><span class="mpre">stringToBytes</span></span></a><span class="mpre"> </span><a href="#loc_54_14_54_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_14_54_16&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Convert a list of bytes to a String</span></span><span class="mpre">
</span><a href="#loc_58_1_58_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_14&#39;)"><span class="mpre">bytesToString</span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_58_1_58_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_14&#39;)"><span class="hl_fundecl"><span class="mpre">bytesToString</span></span></a><span class="mpre"> </span><a name="loc_58_15_58_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_15_58_17&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">toEnum</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromEnum</span></span><span class="mpre">) </span><a href="#loc_58_15_58_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_15_58_17&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | String to list of bytes.</span></span><span class="mpre">
</span><a href="#loc_62_1_62_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_14&#39;)"><span class="mpre">stringToBytes</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">]
</span><a name="loc_62_1_62_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_14&#39;)"><span class="hl_fundecl"><span class="mpre">stringToBytes</span></span></a><span class="mpre"> </span><a name="loc_62_15_62_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_17&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">toEnum</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromEnum</span></span><span class="mpre">) </span><a href="#loc_62_15_62_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_17&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The &#39;print&#39; function outputs a value of any printable type to the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- standard output device. This function differs from the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- System.IO.print in that it preserves any UTF8 encoding of the shown value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_69_1_69_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_6&#39;)"><span class="mpre">print</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/utf8-string-0.3.8/System/IO/UTF8.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 10, srcSpanEndLine = 68, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/utf8-string-0.3.8/System/IO/UTF8.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 17, srcSpanEndLine = 68, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/utf8-string-0."><span class="mpre">Show a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_69_1_69_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_6&#39;)"><span class="hl_fundecl"><span class="mpre">print</span></span></a><span class="mpre"> </span><a name="loc_69_7_69_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_7_69_8&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_77_1_77_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_1_77_9&#39;)"><span class="hl_varref"><span class="mpre">putStrLn</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_69_7_69_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_7_69_8&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Write a UTF8 string to the standard output device</span></span><span class="mpre">
</span><a href="#loc_73_1_73_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_1_73_7&#39;)"><span class="mpre">putStr</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_73_1_73_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_1_73_7&#39;)"><span class="hl_fundecl"><span class="mpre">putStr</span></span></a><span class="mpre"> </span><a name="loc_73_8_73_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_8_73_9&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="System.IO.html#loc_262_1_262_7" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_262_1_262_7&#39;)"><span class="hl_varref"><span class="mpre">IO.putStr</span></span></a><span class="mpre"> (</span><a href="#loc_50_1_50_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_1_50_13&#39;)"><span class="hl_varref"><span class="mpre">encodeString</span></span></a><span class="mpre"> </span><a href="#loc_73_8_73_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_73_8_73_9&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | The same as &#39;putStr&#39;, but adds a newline character.</span></span><span class="mpre">
</span><a href="#loc_77_1_77_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_1_77_9&#39;)"><span class="mpre">putStrLn</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_77_1_77_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_1_77_9&#39;)"><span class="hl_fundecl"><span class="mpre">putStrLn</span></span></a><span class="mpre"> </span><a name="loc_77_10_77_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_10_77_11&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="System.IO.html#loc_267_1_267_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_267_1_267_9&#39;)"><span class="hl_varref"><span class="mpre">IO.putStrLn</span></span></a><span class="mpre"> (</span><a href="#loc_50_1_50_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_1_50_13&#39;)"><span class="hl_varref"><span class="mpre">encodeString</span></span></a><span class="mpre"> </span><a href="#loc_77_10_77_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_77_10_77_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Read a UTF8 line from the standard input device</span></span><span class="mpre">
</span><a href="#loc_81_1_81_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_1_81_8&#39;)"><span class="mpre">getLine</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_81_1_81_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_1_81_8&#39;)"><span class="hl_vardecl"><span class="mpre">getLine</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="#loc_54_1_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_13&#39;)"><span class="hl_varref"><span class="mpre">decodeString</span></span></a><span class="mpre"> </span><a href="System.IO.html#loc_293_1_293_8" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_293_1_293_8&#39;)"><span class="hl_varref"><span class="mpre">IO.getLine</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The &#39;readLn&#39; function combines &#39;getLine&#39; and &#39;readIO&#39;, preserving UTF8</span></span><span class="mpre">
</span><a href="#loc_85_1_85_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_7&#39;)"><span class="mpre">readLn</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/utf8-string-0.3.8/System/IO/UTF8.hs&quot;, srcSpanStartLine = 84, srcSpanStartColumn = 11, srcSpanEndLine = 84, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/utf8-string-0.3.8/System/IO/UTF8.hs&quot;, srcSpanStartLine = 84, srcSpanStartColumn = 18, srcSpanEndLine = 84, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/utf8-string-0."><span class="mpre">Read a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_85_1_85_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_7&#39;)"><span class="hl_vardecl"><span class="mpre">readLn</span></span></a><span class="mpre"> = </span><a href="System.IO.html#loc_346_1_346_7" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_346_1_346_7&#39;)"><span class="hl_varref"><span class="mpre">IO.readIO</span></span></a><span class="mpre"> </span><a href="Control.Monad.html#loc_92_3_92_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_92_3_92_6&#39;)"><span class="hl_infix"><span class="mpre">=&lt;&lt;</span></span></a><span class="mpre"> </span><a href="#loc_81_1_81_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_1_81_8&#39;)"><span class="hl_varref"><span class="mpre">getLine</span></span></a><span class="mpre">

</span><a href="#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_15&#39;)"><span class="mpre">openBinaryFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><a href="GHC.IO.IOMode.html#loc_28_6_28_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_6_28_12&#39;)"><span class="hl_tyconref"><span class="mpre">IOMode</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">
</span><a name="loc_88_1_88_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_15&#39;)"><span class="hl_fundecl"><span class="mpre">openBinaryFile</span></span></a><span class="mpre"> </span><a name="loc_88_16_88_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_16_88_17&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_88_18_88_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_18_88_19&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="GHC.IO.Handle.FD.html#loc_177_1_177_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_177_1_177_15&#39;)"><span class="hl_varref"><span class="mpre">IO.openBinaryFile</span></span></a><span class="mpre"> (</span><a href="#loc_50_1_50_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_1_50_13&#39;)"><span class="hl_varref"><span class="mpre">encodeString</span></span></a><span class="mpre"> </span><a href="#loc_88_16_88_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_16_88_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><a href="#loc_88_18_88_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_18_88_19&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">

</span><a href="#loc_91_1_91_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_15&#39;)"><span class="mpre">withBinaryFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><a href="GHC.IO.IOMode.html#loc_28_6_28_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_6_28_12&#39;)"><span class="hl_tyconref"><span class="mpre">IOMode</span></span></a><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_91_1_91_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_15&#39;)"><span class="hl_fundecl"><span class="mpre">withBinaryFile</span></span></a><span class="mpre"> </span><a name="loc_91_16_91_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_16_91_17&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_91_18_91_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_18_91_19&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> </span><a name="loc_91_20_91_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_20_91_21&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Control.Exception.Base.html#loc_259_1_259_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_259_1_259_8&#39;)"><span class="hl_varref"><span class="mpre">bracket</span></span></a><span class="mpre"> (</span><a href="#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">openBinaryFile</span></span></a><span class="mpre"> </span><a href="#loc_91_16_91_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_16_91_17&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_91_18_91_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_18_91_19&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">) </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">IO.hClose</span></span></a><span class="mpre"> </span><a href="#loc_91_20_91_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_20_91_21&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The &#39;readFile&#39; function reads a file and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returns the contents of the file as a UTF8 string.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The file is read lazily, on demand, as with &#39;getContents&#39;.</span></span><span class="mpre">
</span><a href="#loc_97_1_97_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_9&#39;)"><span class="mpre">readFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_97_1_97_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_1_97_9&#39;)"><span class="hl_fundecl"><span class="mpre">readFile</span></span></a><span class="mpre"> </span><a name="loc_97_10_97_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_10_97_11&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = </span><a href="#loc_115_1_115_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_1_115_13&#39;)"><span class="hl_varref"><span class="mpre">hGetContents</span></span></a><span class="mpre"> </span><a href="Control.Monad.html#loc_92_3_92_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_92_3_92_6&#39;)"><span class="hl_infix"><span class="mpre">=&lt;&lt;</span></span></a><span class="mpre"> </span><a href="#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">openBinaryFile</span></span></a><span class="mpre"> </span><a href="#loc_97_10_97_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_97_10_97_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="GHC.IO.IOMode.html#loc_28_21_28_29" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_21_28_29&#39;)"><span class="hl_conref"><span class="mpre">ReadMode</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | The computation &#39;writeFile&#39; @file str@ function writes the UTF8 string @str@,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to the file @file@.</span></span><span class="mpre">
</span><a href="#loc_102_1_102_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_1_102_10&#39;)"><span class="mpre">writeFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_102_1_102_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_1_102_10&#39;)"><span class="hl_fundecl"><span class="mpre">writeFile</span></span></a><span class="mpre"> </span><a name="loc_102_11_102_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_11_102_12&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_102_13_102_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_13_102_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_91_1_91_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_15&#39;)"><span class="hl_varref"><span class="mpre">withBinaryFile</span></span></a><span class="mpre"> </span><a href="#loc_102_11_102_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_11_102_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="GHC.IO.IOMode.html#loc_28_32_28_41" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_32_28_41&#39;)"><span class="hl_conref"><span class="mpre">WriteMode</span></span></a><span class="mpre"> (\ </span><a name="loc_102_47_102_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_47_102_48&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_119_1_119_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_8&#39;)"><span class="hl_varref"><span class="mpre">hPutStr</span></span></a><span class="mpre"> </span><a href="#loc_102_47_102_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_47_102_48&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_102_13_102_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_102_13_102_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | The computation &#39;appendFile&#39; @file str@ function appends the UTF8 string @str@,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to the file @file@.</span></span><span class="mpre">
</span><a href="#loc_107_1_107_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_1_107_11&#39;)"><span class="mpre">appendFile</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_107_1_107_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_1_107_11&#39;)"><span class="hl_fundecl"><span class="mpre">appendFile</span></span></a><span class="mpre"> </span><a name="loc_107_12_107_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_12_107_13&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_107_14_107_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_14_107_15&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="#loc_91_1_91_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_15&#39;)"><span class="hl_varref"><span class="mpre">withBinaryFile</span></span></a><span class="mpre"> </span><a href="#loc_107_12_107_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_12_107_13&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="GHC.IO.IOMode.html#loc_28_44_28_54" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.IOMode.html#loc_28_44_28_54&#39;)"><span class="hl_conref"><span class="mpre">AppendMode</span></span></a><span class="mpre"> (\ </span><a name="loc_107_49_107_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_49_107_50&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_119_1_119_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_8&#39;)"><span class="hl_varref"><span class="mpre">hPutStr</span></span></a><span class="mpre"> </span><a href="#loc_107_49_107_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_49_107_50&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_107_14_107_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_14_107_15&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Read a UTF8 line from a Handle</span></span><span class="mpre">
</span><a href="#loc_111_1_111_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_1_111_9&#39;)"><span class="mpre">hGetLine</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_111_1_111_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_1_111_9&#39;)"><span class="hl_fundecl"><span class="mpre">hGetLine</span></span></a><span class="mpre"> </span><a name="loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="#loc_54_1_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_13&#39;)"><span class="hl_varref"><span class="mpre">decodeString</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">IO.hGetLine</span></span><span class="mpre"> </span><a href="#loc_111_10_111_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_10_111_11&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Lazily read a UTF8 string from a Handle</span></span><span class="mpre">
</span><a href="#loc_115_1_115_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_1_115_13&#39;)"><span class="mpre">hGetContents</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_115_1_115_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_1_115_13&#39;)"><span class="hl_fundecl"><span class="mpre">hGetContents</span></span></a><span class="mpre"> </span><a name="loc_115_14_115_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_14_115_15&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="#loc_54_1_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_13&#39;)"><span class="hl_varref"><span class="mpre">decodeString</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">IO.hGetContents</span></span><span class="mpre"> </span><a href="#loc_115_14_115_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_14_115_15&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Write a UTF8 string to a Handle.</span></span><span class="mpre">
</span><a href="#loc_119_1_119_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_8&#39;)"><span class="mpre">hPutStr</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_119_1_119_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_8&#39;)"><span class="hl_fundecl"><span class="mpre">hPutStr</span></span></a><span class="mpre"> </span><a name="loc_119_9_119_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_9_119_10&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> </span><a name="loc_119_11_119_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_11_119_12&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">IO.hPutStr</span></span><span class="mpre"> </span><a href="#loc_119_9_119_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_9_119_10&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> (</span><a href="#loc_50_1_50_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_1_50_13&#39;)"><span class="hl_varref"><span class="mpre">encodeString</span></span></a><span class="mpre"> </span><a href="#loc_119_11_119_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_11_119_12&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Write a UTF8 string to a Handle, appending a newline.</span></span><span class="mpre">
</span><a href="#loc_123_1_123_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_1_123_10&#39;)"><span class="mpre">hPutStrLn</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_123_1_123_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_1_123_10&#39;)"><span class="hl_fundecl"><span class="mpre">hPutStrLn</span></span></a><span class="mpre"> </span><a name="loc_123_11_123_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_11_123_12&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> </span><a name="loc_123_13_123_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_13_123_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">IO.hPutStrLn</span></span><span class="mpre"> </span><a href="#loc_123_11_123_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_11_123_12&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> (</span><a href="#loc_50_1_50_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_1_50_13&#39;)"><span class="hl_varref"><span class="mpre">encodeString</span></span></a><span class="mpre"> </span><a href="#loc_123_13_123_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_13_123_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Lazily read stdin as a UTF8 string.</span></span><span class="mpre">
</span><a href="#loc_127_1_127_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_1_127_12&#39;)"><span class="mpre">getContents</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_127_1_127_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_127_1_127_12&#39;)"><span class="hl_vardecl"><span class="mpre">getContents</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="#loc_54_1_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_13&#39;)"><span class="hl_varref"><span class="mpre">decodeString</span></span></a><span class="mpre"> </span><a href="System.IO.html#loc_300_1_300_12" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_300_1_300_12&#39;)"><span class="hl_varref"><span class="mpre">IO.getContents</span></span></a><span class="mpre">

</span><a href="#loc_130_1_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_1_130_9&#39;)"><span class="mpre">interact</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_130_1_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_1_130_9&#39;)"><span class="hl_fundecl"><span class="mpre">interact</span></span></a><span class="mpre"> </span><a name="loc_130_10_130_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_10_130_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="System.IO.html#loc_308_1_308_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_308_1_308_9&#39;)"><span class="hl_varref"><span class="mpre">IO.interact</span></span></a><span class="mpre"> (</span><a href="#loc_50_1_50_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_1_50_13&#39;)"><span class="hl_varref"><span class="mpre">encodeString</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_130_10_130_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_10_130_11&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_54_1_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_1_54_13&#39;)"><span class="hl_varref"><span class="mpre">decodeString</span></span></a><span class="mpre">)
</span></div></body></html>