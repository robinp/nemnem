<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE BangPatterns, CPP, ForeignFunctionInterface, GeneralizedNewtypeDeriving, MagicHash,
    UnliftedFFITypes #-}
#if __GLASGOW_HASKELL__ &gt;= 702
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      : Data.Text.Encoding</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   : (c) 2009, 2010, 2011 Bryan O&#39;Sullivan,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--               (c) 2009 Duncan Coutts,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--               (c) 2008, 2009 Tom Harper</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     : BSD-style</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  : bos@serpentine.com</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   : experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability : portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Functions for converting &#39;Text&#39; values to and from &#39;ByteString&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- using several standard encodings.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- To gain access to a much larger family of encodings, use the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @text-icu@ package: &lt;http://hackage.haskell.org/package/text-icu&gt;</span></span><span class="mpre">

module Data.Text.Encoding
    (
    </span><span class="hl_comment"><span class="mpre">-- * Decoding ByteStrings to Text</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $strict</span></span><span class="mpre">
      decodeASCII
    , decodeLatin1
    , decodeUtf8
    , decodeUtf16LE
    , decodeUtf16BE
    , decodeUtf32LE
    , decodeUtf32BE

    </span><span class="hl_comment"><span class="mpre">-- ** Catchable failure</span></span><span class="mpre">
    , decodeUtf8&#39;

    </span><span class="hl_comment"><span class="mpre">-- ** Controllable error handling</span></span><span class="mpre">
    , decodeUtf8With
    , decodeUtf16LEWith
    , decodeUtf16BEWith
    , decodeUtf32LEWith
    , decodeUtf32BEWith

    </span><span class="hl_comment"><span class="mpre">-- ** Stream oriented decoding</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $stream</span></span><span class="mpre">
    , streamDecodeUtf8
    , streamDecodeUtf8With
    , Decoding(..)

    </span><span class="hl_comment"><span class="mpre">-- * Encoding Text to ByteStrings</span></span><span class="mpre">
    , encodeUtf8
    , encodeUtf16LE
    , encodeUtf16BE
    , encodeUtf32LE
    , encodeUtf32BE

#if MIN_VERSION_bytestring(0,10,4)
    </span><span class="hl_comment"><span class="mpre">-- * Encoding Text using ByteString Builders</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- | /Note/ that these functions are only available if built against</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- @bytestring &gt;= 0.10.4.0@.</span></span><span class="mpre">
    , encodeUtf8Builder
    , encodeUtf8BuilderEscaped
#endif
    ) where

#if __GLASGOW_HASKELL__ &gt;= 702
import Control.Monad.ST.Unsafe (</span><a href="GHC.IO.html#loc_100_1_100_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_100_1_100_13&#39;)"><span class="mpre">unsafeIOToST</span></a><span class="mpre">, </span><a href="GHC.IO.html#loc_103_1_103_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_103_1_103_13&#39;)"><span class="mpre">unsafeSTToIO</span></a><span class="mpre">)
#else
import Control.Monad.ST (unsafeIOToST, unsafeSTToIO)
#endif

#if MIN_VERSION_bytestring(0,10,4)
import Data.Bits ((.&amp;.))
import Data.Text.Internal.Unsafe.Char (</span><a href="Data.Text.Internal.Unsafe.Char.html#loc_40_1_40_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Char.html#loc_40_1_40_4&#39;)"><span class="mpre">ord</span></a><span class="mpre">)
import qualified Data.ByteString.Builder as B
import qualified Data.ByteString.Builder.Internal as B hiding (</span><a href="Data.ByteString.Builder.Internal.html#loc_388_1_388_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Internal.html#loc_388_1_388_6&#39;)"><span class="mpre">empty</span></a><span class="mpre">, </span><a href="Data.ByteString.Builder.Internal.html#loc_394_1_394_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Internal.html#loc_394_1_394_7&#39;)"><span class="mpre">append</span></a><span class="mpre">)
import qualified Data.ByteString.Builder.Prim as BP
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 79, srcSpanStartColumn = 18, srcSpanEndLine = 79, srcSpanEndColumn = 55}, srcInfoPoints = []}) &quot;Data.ByteString.Builder.Prim.Internal&quot;"><span class="mpre">Data.ByteString.Builder.Prim.Internal</span></span><span class="mpre"> as BP
import qualified Data.Text.Internal.Encoding.Utf16 as U16
#endif

import Control.Exception (</span><a href="GHC.IO.html#loc_480_1_480_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_480_1_480_9&#39;)"><span class="mpre">evaluate</span></a><span class="mpre">, </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="mpre">try</span></a><span class="mpre">)
import Control.Monad.ST (runST)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 85, srcSpanStartColumn = 8, srcSpanEndLine = 85, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as B
import Data.ByteString.Internal as B hiding (</span><a href="Data.ByteString.Internal.html#loc_554_1_554_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_554_1_554_4&#39;)"><span class="mpre">c2w</span></a><span class="mpre">)
import Data.Text ()
import Data.Text.Encoding.Error (OnDecodeError, </span><a href="Data.Text.Encoding.Error.html#loc_72_6_72_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_72_6_72_22&#39;)"><span class="mpre">UnicodeException</span></a><span class="mpre">, </span><a href="Data.Text.Encoding.Error.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_102_1_102_13&#39;)"><span class="mpre">strictDecode</span></a><span class="mpre">)
import Data.Text.Internal (</span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="mpre">Text</span></a><span class="mpre">(..), </span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="mpre">safe</span></a><span class="mpre">, </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="mpre">text</span></a><span class="mpre">)
import Data.Text.Internal.Private (</span><a href="Data.Text.Internal.Private.html#loc_34_1_34_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Private.html#loc_34_1_34_8&#39;)"><span class="mpre">runText</span></a><span class="mpre">)
import Data.Text.Internal.Unsafe.Char (</span><a href="Data.Text.Internal.Unsafe.Char.html#loc_58_1_58_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Char.html#loc_58_1_58_12&#39;)"><span class="mpre">unsafeWrite</span></a><span class="mpre">)
import Data.Text.Internal.Unsafe.Shift (</span><a href="Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11&#39;)"><span class="mpre">shiftR</span></a><span class="mpre">)
import Data.Text.Unsafe (</span><a href="GHC.IO.html#loc_182_1_182_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_182_1_182_23&#39;)"><span class="mpre">unsafeDupablePerformIO</span></a><span class="mpre">)
import Data.Word (Word8, Word32)
import Foreign.C.Types (CSize(..))
import Foreign.ForeignPtr (</span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="mpre">withForeignPtr</span></a><span class="mpre">)
import Foreign.Marshal.Utils (</span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="mpre">with</span></a><span class="mpre">)
import Foreign.Ptr (Ptr, minusPtr, nullPtr, plusPtr)
import Foreign.Storable (Storable, peek, poke)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 8, srcSpanEndLine = 100, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre"> (ByteArray#, MutableByteArray#)
import qualified Data.Text.Array as A
import qualified Data.Text.Internal.Encoding.Fusion as E
import qualified Data.Text.Internal.Fusion as F

#include &quot;text_cbits.h&quot;

</span><span class="hl_comment"><span class="mpre">-- $strict</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- All of the single-parameter functions for decoding bytestrings</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- encoded in one of the Unicode Transformation Formats (UTF) operate</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- in a /strict/ mode: each will throw an exception if given invalid</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- input.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Each function has a variant, whose name is suffixed with -&#39;With&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that gives greater control over the handling of decoding errors.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- For instance, &#39;decodeUtf8&#39; will throw an exception, but</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;decodeUtf8With&#39; allows the programmer to determine what to do on a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- decoding error.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | /Deprecated/.  Decode a &#39;ByteString&#39; containing 7-bit ASCII</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- encoded text.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function is deprecated.  Use &#39;decodeLatin1&#39; instead.</span></span><span class="mpre">
</span><a href="#loc_125_1_125_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_1_125_12&#39;)"><span class="mpre">decodeASCII</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_125_1_125_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_1_125_12&#39;)"><span class="hl_vardecl"><span class="mpre">decodeASCII</span></span></a><span class="mpre"> = </span><a href="#loc_307_1_307_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_1_307_11&#39;)"><span class="hl_varref"><span class="mpre">decodeUtf8</span></span></a><span class="mpre">
</span><span class="warning" data-warning="DeclDeprPragmaDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 126, srcSpanStartColumn = 1, srcSpanEndLine = 126, srcSpanEndColumn = 56}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 126, srcSpanStartColumn = 1, srcSpanEndLine = 126, srcSpanEndColumn = 15},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanSta"><span class="mpre">{-# DEPRECATED decodeASCII &quot;Use decodeUtf8 instead&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode a &#39;ByteString&#39; containing Latin-1 (aka ISO-8859-1) encoded text.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;decodeLatin1&#39; is semantically equivalent to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--  @Data.Text.pack . Data.ByteString.Char8.unpack@</span></span><span class="mpre">
</span><a href="#loc_133_1_133_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_1_133_13&#39;)"><span class="mpre">decodeLatin1</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_133_1_133_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_1_133_13&#39;)"><span class="hl_fundecl"><span class="mpre">decodeLatin1</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a name="loc_133_18_133_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_18_133_20&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="mpre"> </span><a name="loc_133_21_133_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_21_133_24&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_133_25_133_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_25_133_28&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_135_3_135_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_3_135_4&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_133_25_133_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_25_133_28&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
 where
  </span><a name="loc_135_3_135_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_135_3_135_4&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="Data.Text.Array.html#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">A.run</span></span></a><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_115_1_115_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_115_1_115_4&#39;)"><span class="hl_varref"><span class="mpre">A.new</span></span></a><span class="mpre"> </span><a href="#loc_133_25_133_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_25_133_28&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a href="GHC.IO.html#loc_100_1_100_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_100_1_100_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeIOToST</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_136_3_136_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_3_136_5&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">)
  </span><a name="loc_136_3_136_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_3_136_5&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_136_6_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_6_136_10&#39;)"><span class="hl_vardecl"><span class="mpre">dest</span></span></a><span class="mpre"> = </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_133_18_133_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_18_133_20&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_136_34_136_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_34_136_37&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> -&gt; do
    </span><span class="hl_varref"><span class="mpre">c_decode_latin1</span></span><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_92_7_92_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_92_7_92_11&#39;)"><span class="hl_varref"><span class="mpre">A.maBA</span></span></a><span class="mpre"> </span><a href="#loc_136_6_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_6_136_10&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre">) (</span><a href="#loc_136_34_136_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_34_136_37&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_133_21_133_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_21_133_24&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) (</span><a href="#loc_136_34_136_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_34_136_37&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> (</span><a href="#loc_133_21_133_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_21_133_24&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><a href="#loc_133_25_133_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_25_133_28&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">))
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_136_6_136_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_6_136_10&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode a &#39;ByteString&#39; containing UTF-8 encoded text.</span></span><span class="mpre">
</span><a href="#loc_142_1_142_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_1_142_15&#39;)"><span class="mpre">decodeUtf8With</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">OnDecodeError</span></span><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_142_1_142_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_1_142_15&#39;)"><span class="hl_fundecl"><span class="mpre">decodeUtf8With</span></span></a><span class="mpre"> </span><a name="loc_142_16_142_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_16_142_21&#39;)"><span class="hl_vardecl"><span class="mpre">onErr</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a name="loc_142_26_142_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_26_142_28&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="mpre"> </span><a name="loc_142_29_142_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_29_142_32&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_142_33_142_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_33_142_36&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="Data.Text.Internal.Private.html#loc_34_1_34_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Private.html#loc_34_1_34_8&#39;)"><span class="hl_varref"><span class="mpre">runText</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_142_51_142_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_51_142_55&#39;)"><span class="hl_vardecl"><span class="mpre">done</span></span></a><span class="mpre"> -&gt; do
  let </span><a name="loc_143_7_143_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_7_143_9&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_143_10_143_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_10_143_14&#39;)"><span class="hl_vardecl"><span class="mpre">dest</span></span></a><span class="mpre"> = </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_142_26_142_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_26_142_28&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_143_38_143_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_38_143_41&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> -&gt;
        </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> (</span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">::</span><span class="hl_tyconref"><span class="mpre">CSize</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_144_28_144_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_28_144_38&#39;)"><span class="hl_vardecl"><span class="mpre">destOffPtr</span></span></a><span class="mpre"> -&gt; do
          let </span><a name="loc_145_15_145_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_15_145_18&#39;)"><span class="hl_vardecl"><span class="mpre">end</span></span></a><span class="mpre"> = </span><a href="#loc_143_38_143_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_38_143_41&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> (</span><a href="#loc_142_29_142_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_29_142_32&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_142_33_142_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_33_142_36&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
              </span><a name="loc_146_15_146_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_15_146_19&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_146_20_146_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_20_146_26&#39;)"><span class="hl_vardecl"><span class="mpre">curPtr</span></span></a><span class="mpre"> = do
                </span><a name="loc_147_17_147_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_17_147_24&#39;)"><span class="hl_vardecl"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">c_decode_utf8</span></span><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_92_7_92_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_92_7_92_11&#39;)"><span class="hl_varref"><span class="mpre">A.maBA</span></span></a><span class="mpre"> </span><a href="#loc_143_10_143_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_10_143_14&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre">) </span><a href="#loc_144_28_144_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_28_144_38&#39;)"><span class="hl_varref"><span class="mpre">destOffPtr</span></span></a><span class="mpre"> </span><a href="#loc_146_20_146_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_20_146_26&#39;)"><span class="hl_varref"><span class="mpre">curPtr</span></span></a><span class="mpre"> </span><a href="#loc_145_15_145_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_15_145_18&#39;)"><span class="hl_varref"><span class="mpre">end</span></span></a><span class="mpre">
                if </span><a href="#loc_147_17_147_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_17_147_24&#39;)"><span class="hl_varref"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_145_15_145_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_15_145_18&#39;)"><span class="hl_varref"><span class="mpre">end</span></span></a><span class="mpre">
                  then do
                    </span><a name="loc_150_21_150_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_21_150_22&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_144_28_144_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_28_144_38&#39;)"><span class="hl_varref"><span class="mpre">destOffPtr</span></span></a><span class="mpre">
                    </span><a href="GHC.IO.html#loc_103_1_103_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_103_1_103_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeSTToIO</span></span></a><span class="mpre"> (</span><a href="#loc_142_51_142_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_51_142_55&#39;)"><span class="hl_varref"><span class="mpre">done</span></span></a><span class="mpre"> </span><a href="#loc_143_10_143_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_10_143_14&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_150_21_150_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_21_150_22&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">))
                  else do
                    </span><a name="loc_153_21_153_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_21_153_22&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_147_17_147_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_17_147_24&#39;)"><span class="hl_varref"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre">
                    case </span><a href="#loc_142_16_142_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_16_142_21&#39;)"><span class="hl_varref"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a href="#loc_165_3_165_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_3_165_7&#39;)"><span class="hl_varref"><span class="mpre">desc</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_153_21_153_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_21_153_22&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) of
                      </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; </span><a href="#loc_146_15_146_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_15_146_19&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_147_17_147_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_17_147_24&#39;)"><span class="hl_varref"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
                      </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_156_28_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_28_156_29&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> -&gt; do
                        </span><a name="loc_157_25_157_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_25_157_32&#39;)"><span class="hl_vardecl"><span class="mpre">destOff</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_144_28_144_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_28_144_38&#39;)"><span class="hl_varref"><span class="mpre">destOffPtr</span></span></a><span class="mpre">
                        </span><a name="loc_158_25_158_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_25_158_26&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.html#loc_103_1_103_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_103_1_103_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeSTToIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                             </span><a href="Data.Text.Internal.Unsafe.Char.html#loc_58_1_58_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Char.html#loc_58_1_58_12&#39;)"><span class="hl_varref"><span class="mpre">unsafeWrite</span></span></a><span class="mpre"> </span><a href="#loc_143_10_143_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_10_143_14&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_157_25_157_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_25_157_32&#39;)"><span class="hl_varref"><span class="mpre">destOff</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><a href="#loc_156_28_156_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_28_156_29&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">)
                        </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_144_28_144_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_28_144_38&#39;)"><span class="hl_varref"><span class="mpre">destOffPtr</span></span></a><span class="mpre"> (</span><a href="#loc_157_25_157_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_25_157_32&#39;)"><span class="hl_varref"><span class="mpre">destOff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_158_25_158_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_25_158_26&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">)
                        </span><a href="#loc_146_15_146_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_15_146_19&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_147_17_147_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_17_147_24&#39;)"><span class="hl_varref"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
          </span><a href="#loc_146_15_146_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_15_146_19&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_143_38_143_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_38_143_41&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_142_29_142_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_29_142_32&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">)
  (</span><a href="GHC.IO.html#loc_100_1_100_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_100_1_100_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeIOToST</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_143_7_143_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_7_143_9&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">=&lt;&lt;</span></span><span class="mpre"> </span><a href="Data.Text.Array.html#loc_115_1_115_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_115_1_115_4&#39;)"><span class="hl_varref"><span class="mpre">A.new</span></span></a><span class="mpre"> </span><a href="#loc_142_33_142_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_33_142_36&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">
 where
  </span><a name="loc_165_3_165_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_3_165_7&#39;)"><span class="hl_vardecl"><span class="mpre">desc</span></span></a><span class="mpre"> = </span><span class="hl_string"><span class="mpre">&quot;Data.Text.Internal.Encoding.decodeUtf8: Invalid UTF-8 stream&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{- INLINE[0] decodeUtf8With #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- $stream</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The &#39;streamDecodeUtf8&#39; and &#39;streamDecodeUtf8With&#39; functions accept</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a &#39;ByteString&#39; that represents a possibly incomplete input (e.g. a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- packet from a network stream) that may not end on a UTF-8 boundary.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 1. The maximal prefix of &#39;Text&#39; that could be decoded from the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    given input.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 2. The suffix of the &#39;ByteString&#39; that could not be decoded due to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    insufficient input.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 3. A function that accepts another &#39;ByteString&#39;.  That string will</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    be assumed to directly follow the string that was passed as</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--    input to the original function, and it will in turn be decoded.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- To help understand the use of these functions, consider the Unicode</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- string @\&quot;hi &amp;#9731;\&quot;@. If encoded as UTF-8, this becomes @\&quot;hi</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \\xe2\\x98\\x83\&quot;@; the final @\&#39;&amp;#9731;\&#39;@ is encoded as 3 bytes.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Now suppose that we receive this encoded string as 3 packets that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- are split up on untidy boundaries: @[\&quot;hi \\xe2\&quot;, \&quot;\\x98\&quot;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \&quot;\\x83\&quot;]@. We cannot decode the entire Unicode string until we</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- have received all three packets, but we would like to make progress</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as we receive each one.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ghci&gt; let s0\@(&#39;Some&#39; _ _ f0) = &#39;streamDecodeUtf8&#39; \&quot;hi \\xe2\&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ghci&gt; s0</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Some&#39; \&quot;hi \&quot; \&quot;\\xe2\&quot; _</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- We use the continuation @f0@ to decode our second packet.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ghci&gt; let s1\@(&#39;Some&#39; _ _ f1) = f0 \&quot;\\x98\&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ghci&gt; s1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Some&#39; \&quot;\&quot; \&quot;\\xe2\\x98\&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- We could not give @f0@ enough input to decode anything, so it</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returned an empty string. Once we feed our second continuation @f1@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the last byte of input, it will make progress.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ghci&gt; let s2\@(&#39;Some&#39; _ _ f2) = f1 \&quot;\\x83\&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ghci&gt; s2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Some&#39; \&quot;\\x2603\&quot; \&quot;\&quot; _</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If given invalid input, an exception will be thrown by the function</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- or continuation where it is encountered.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A stream oriented decoding result.</span></span><span class="mpre">
data </span><a name="loc_222_6_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_6_222_14&#39;)"><span class="hl_tycondecl"><span class="mpre">Decoding</span></span></a><span class="mpre"> = </span><a name="loc_222_17_222_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_17_222_21&#39;)"><span class="hl_condecl"><span class="mpre">Some</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_222_6_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_6_222_14&#39;)"><span class="hl_tyconref"><span class="mpre">Decoding</span></span></a><span class="mpre">)

instance </span><span class="hl_classref"><span class="mpre">Show</span></span><span class="mpre"> </span><a href="#loc_222_6_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_6_222_14&#39;)"><span class="hl_tyconref"><span class="mpre">Decoding</span></span></a><span class="mpre"> where
    </span><span class="hl_fundecl"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a name="loc_225_15_225_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_15_225_16&#39;)"><span class="hl_vardecl"><span class="mpre">d</span></span></a><span class="mpre"> (</span><a href="#loc_222_17_222_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_17_222_21&#39;)"><span class="hl_conref"><span class="mpre">Some</span></span></a><span class="mpre"> </span><a name="loc_225_23_225_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_23_225_24&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> </span><a name="loc_225_25_225_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_25_225_27&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> _) = </span><span class="hl_varref"><span class="mpre">showParen</span></span><span class="mpre"> (</span><a href="#loc_225_15_225_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_15_225_16&#39;)"><span class="hl_varref"><span class="mpre">d</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><a href="#loc_229_13_229_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_13_229_17&#39;)"><span class="hl_varref"><span class="mpre">prec</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                                </span><span class="hl_varref"><span class="mpre">showString</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Some &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a href="#loc_229_24_229_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_24_229_29&#39;)"><span class="hl_varref"><span class="mpre">prec&#39;</span></span></a><span class="mpre"> </span><a href="#loc_225_23_225_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_23_225_24&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre">
                                </span><span class="hl_varref"><span class="mpre">showChar</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39; &#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">showsPrec</span></span><span class="mpre"> </span><a href="#loc_229_24_229_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_24_229_29&#39;)"><span class="hl_varref"><span class="mpre">prec&#39;</span></span></a><span class="mpre"> </span><a href="#loc_225_25_225_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_25_225_27&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre">
                                </span><span class="hl_varref"><span class="mpre">showString</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; _&quot;</span></span><span class="mpre">
      where </span><a name="loc_229_13_229_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_13_229_17&#39;)"><span class="hl_vardecl"><span class="mpre">prec</span></span></a><span class="mpre"> = </span><span class="hl_num"><span class="mpre">10</span></span><span class="mpre">; </span><a name="loc_229_24_229_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_24_229_29&#39;)"><span class="hl_vardecl"><span class="mpre">prec&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_229_13_229_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_13_229_17&#39;)"><span class="hl_varref"><span class="mpre">prec</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">

newtype </span><a name="loc_231_9_231_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_9_231_18&#39;)"><span class="hl_tycondecl"><span class="mpre">CodePoint</span></span></a><span class="mpre"> = </span><span class="hl_condecl"><span class="mpre">CodePoint</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word32</span></span><span class="mpre"> </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 231, srcSpanStartColumn = 38, srcSpanEndLine = 231, srcSpanEndColumn = 72}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 231, srcSpanStartColumn = 38, srcSpanEndLine = 231, srcSpanEndColumn = 46},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLi"><span class="mpre">deriving (Eq, Show, Num, Storable)</span></span><span class="mpre">
newtype </span><a name="loc_232_9_232_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_9_232_21&#39;)"><span class="hl_tycondecl"><span class="mpre">DecoderState</span></span></a><span class="mpre"> = </span><span class="hl_condecl"><span class="mpre">DecoderState</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word32</span></span><span class="mpre"> </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 232, srcSpanStartColumn = 44, srcSpanEndLine = 232, srcSpanEndColumn = 78}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 232, srcSpanStartColumn = 44, srcSpanEndLine = 232, srcSpanEndColumn = 52},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLi"><span class="mpre">deriving (Eq, Show, Num, Storable)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode, in a stream oriented way, a &#39;ByteString&#39; containing UTF-8</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- encoded text that is known to be valid.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the input contains any invalid UTF-8 data, an exception will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- thrown (either by this function or a continuation) that cannot be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- caught in pure code.  For more control over the handling of invalid</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- data, use &#39;streamDecodeUtf8With&#39;.</span></span><span class="mpre">
</span><a href="#loc_242_1_242_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_242_1_242_17&#39;)"><span class="mpre">streamDecodeUtf8</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_222_6_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_6_222_14&#39;)"><span class="hl_tyconref"><span class="mpre">Decoding</span></span></a><span class="mpre">
</span><a name="loc_242_1_242_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_242_1_242_17&#39;)"><span class="hl_vardecl"><span class="mpre">streamDecodeUtf8</span></span></a><span class="mpre"> = </span><a href="#loc_247_1_247_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_1_247_21&#39;)"><span class="hl_varref"><span class="mpre">streamDecodeUtf8With</span></span></a><span class="mpre"> </span><a href="Data.Text.Encoding.Error.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_102_1_102_13&#39;)"><span class="hl_varref"><span class="mpre">strictDecode</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode, in a stream oriented way, a &#39;ByteString&#39; containing UTF-8</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- encoded text.</span></span><span class="mpre">
</span><a href="#loc_247_1_247_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_1_247_21&#39;)"><span class="mpre">streamDecodeUtf8With</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">OnDecodeError</span></span><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_222_6_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_6_222_14&#39;)"><span class="hl_tyconref"><span class="mpre">Decoding</span></span></a><span class="mpre">
</span><a name="loc_247_1_247_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_1_247_21&#39;)"><span class="hl_fundecl"><span class="mpre">streamDecodeUtf8With</span></span></a><span class="mpre"> </span><a name="loc_247_22_247_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_22_247_27&#39;)"><span class="hl_vardecl"><span class="mpre">onErr</span></span></a><span class="mpre"> = </span><a href="#loc_253_3_253_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_3_253_14&#39;)"><span class="hl_varref"><span class="mpre">decodeChunk</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">B.empty</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
 where
  </span><span class="hl_comment"><span class="mpre">-- We create a slightly larger than necessary buffer to accommodate a</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- potential surrogate pair started in the last buffer</span></span><span class="mpre">
  </span><a href="#loc_253_3_253_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_3_253_14&#39;)"><span class="mpre">decodeChunk</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_231_9_231_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_9_231_18&#39;)"><span class="hl_tyconref"><span class="mpre">CodePoint</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_232_9_232_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_232_9_232_21&#39;)"><span class="hl_tyconref"><span class="mpre">DecoderState</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
              -&gt; </span><a href="#loc_222_6_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_6_222_14&#39;)"><span class="hl_tyconref"><span class="mpre">Decoding</span></span></a><span class="mpre">
  </span><a name="loc_253_3_253_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_3_253_14&#39;)"><span class="hl_fundecl"><span class="mpre">decodeChunk</span></span></a><span class="mpre"> </span><a name="loc_253_15_253_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_15_253_25&#39;)"><span class="hl_vardecl"><span class="mpre">undecoded0</span></span></a><span class="mpre"> </span><a name="loc_253_26_253_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_26_253_36&#39;)"><span class="hl_vardecl"><span class="mpre">codepoint0</span></span></a><span class="mpre"> </span><a name="loc_253_37_253_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_37_253_43&#39;)"><span class="hl_vardecl"><span class="mpre">state0</span></span></a><span class="mpre"> </span><a name="loc_253_44_253_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_44_253_46&#39;)"><span class="hl_specname"><span class="mpre">bs</span></span></a><span class="mpre">@(</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a name="loc_253_51_253_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_51_253_53&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="mpre"> </span><a name="loc_253_54_253_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_54_253_57&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_253_58_253_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_58_253_61&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) =
    </span><span class="hl_varref"><span class="mpre">runST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> (</span><a href="GHC.IO.html#loc_100_1_100_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_100_1_100_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeIOToST</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_257_5_257_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_5_257_24&#39;)"><span class="hl_varref"><span class="mpre">decodeChunkToBuffer</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">=&lt;&lt;</span></span><span class="mpre"> </span><a href="Data.Text.Array.html#loc_115_1_115_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_115_1_115_4&#39;)"><span class="hl_varref"><span class="mpre">A.new</span></span></a><span class="mpre"> (</span><a href="#loc_253_58_253_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_58_253_61&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
   where
    </span><a href="#loc_257_5_257_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_5_257_24&#39;)"><span class="mpre">decodeChunkToBuffer</span></a><span class="mpre"> :: </span><a href="Data.Text.Array.html#loc_91_6_91_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_91_6_91_12&#39;)"><span class="hl_tyconref"><span class="mpre">A.MArray</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_222_6_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_6_222_14&#39;)"><span class="hl_tyconref"><span class="mpre">Decoding</span></span></a><span class="mpre">
    </span><a name="loc_257_5_257_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_5_257_24&#39;)"><span class="hl_fundecl"><span class="mpre">decodeChunkToBuffer</span></span></a><span class="mpre"> </span><a name="loc_257_25_257_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_25_257_29&#39;)"><span class="hl_vardecl"><span class="mpre">dest</span></span></a><span class="mpre"> = </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_253_51_253_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_51_253_53&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_257_53_257_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_53_257_56&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> -&gt;
      </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> (</span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">::</span><span class="hl_tyconref"><span class="mpre">CSize</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_258_26_258_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_26_258_36&#39;)"><span class="hl_vardecl"><span class="mpre">destOffPtr</span></span></a><span class="mpre"> -&gt;
      </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> </span><a href="#loc_253_26_253_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_26_253_36&#39;)"><span class="hl_varref"><span class="mpre">codepoint0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_259_26_259_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_26_259_38&#39;)"><span class="hl_vardecl"><span class="mpre">codepointPtr</span></span></a><span class="mpre"> -&gt;
      </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> </span><a href="#loc_253_37_253_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_37_253_43&#39;)"><span class="hl_varref"><span class="mpre">state0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_260_22_260_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_22_260_30&#39;)"><span class="hl_vardecl"><span class="mpre">statePtr</span></span></a><span class="mpre"> -&gt;
      </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nullPtr</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_261_23_261_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_23_261_32&#39;)"><span class="hl_vardecl"><span class="mpre">curPtrPtr</span></span></a><span class="mpre"> -&gt;
        let </span><a name="loc_262_13_262_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_13_262_16&#39;)"><span class="hl_vardecl"><span class="mpre">end</span></span></a><span class="mpre"> = </span><a href="#loc_257_53_257_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_53_257_56&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> (</span><a href="#loc_253_54_253_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_54_253_57&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_253_58_253_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_58_253_61&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
            </span><a name="loc_263_13_263_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_13_263_17&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_263_18_263_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_18_263_24&#39;)"><span class="hl_vardecl"><span class="mpre">curPtr</span></span></a><span class="mpre"> = do
              </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_261_23_261_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_23_261_32&#39;)"><span class="hl_varref"><span class="mpre">curPtrPtr</span></span></a><span class="mpre"> </span><a href="#loc_263_18_263_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_18_263_24&#39;)"><span class="hl_varref"><span class="mpre">curPtr</span></span></a><span class="mpre">
              </span><a name="loc_265_15_265_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_15_265_22&#39;)"><span class="hl_vardecl"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">c_decode_utf8_with_state</span></span><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_92_7_92_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_92_7_92_11&#39;)"><span class="hl_varref"><span class="mpre">A.maBA</span></span></a><span class="mpre"> </span><a href="#loc_257_25_257_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_25_257_29&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre">) </span><a href="#loc_258_26_258_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_26_258_36&#39;)"><span class="hl_varref"><span class="mpre">destOffPtr</span></span></a><span class="mpre">
                         </span><a href="#loc_261_23_261_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_23_261_32&#39;)"><span class="hl_varref"><span class="mpre">curPtrPtr</span></span></a><span class="mpre"> </span><a href="#loc_262_13_262_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_13_262_16&#39;)"><span class="hl_varref"><span class="mpre">end</span></span></a><span class="mpre"> </span><a href="#loc_259_26_259_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_26_259_38&#39;)"><span class="hl_varref"><span class="mpre">codepointPtr</span></span></a><span class="mpre"> </span><a href="#loc_260_22_260_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_22_260_30&#39;)"><span class="hl_varref"><span class="mpre">statePtr</span></span></a><span class="mpre">
              </span><a name="loc_267_15_267_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_15_267_20&#39;)"><span class="hl_vardecl"><span class="mpre">state</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_260_22_260_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_22_260_30&#39;)"><span class="hl_varref"><span class="mpre">statePtr</span></span></a><span class="mpre">
              case </span><a href="#loc_267_15_267_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_15_267_20&#39;)"><span class="hl_varref"><span class="mpre">state</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">UTF8_REJECT</span></span><span class="mpre"> -&gt; do
                  </span><span class="hl_comment"><span class="mpre">-- We encountered an encoding error</span></span><span class="mpre">
                  </span><a name="loc_271_19_271_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_19_271_20&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_265_15_265_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_15_265_22&#39;)"><span class="hl_varref"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre">
                  case </span><a href="#loc_247_22_247_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_247_22_247_27&#39;)"><span class="hl_varref"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a href="#loc_297_3_297_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_3_297_7&#39;)"><span class="hl_varref"><span class="mpre">desc</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_271_19_271_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_19_271_20&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) of
                    </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; </span><a href="#loc_263_13_263_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_13_263_17&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_265_15_265_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_15_265_22&#39;)"><span class="hl_varref"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
                    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_274_26_274_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_26_274_27&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> -&gt; do
                      </span><a name="loc_275_23_275_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_275_23_275_30&#39;)"><span class="hl_vardecl"><span class="mpre">destOff</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_258_26_258_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_26_258_36&#39;)"><span class="hl_varref"><span class="mpre">destOffPtr</span></span></a><span class="mpre">
                      </span><a name="loc_276_23_276_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_276_23_276_24&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.html#loc_103_1_103_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_103_1_103_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeSTToIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                           </span><a href="Data.Text.Internal.Unsafe.Char.html#loc_58_1_58_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Char.html#loc_58_1_58_12&#39;)"><span class="hl_varref"><span class="mpre">unsafeWrite</span></span></a><span class="mpre"> </span><a href="#loc_257_25_257_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_25_257_29&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_275_23_275_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_275_23_275_30&#39;)"><span class="hl_varref"><span class="mpre">destOff</span></span></a><span class="mpre">) (</span><a href="Data.Text.Internal.html#loc_101_1_101_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_101_1_101_5&#39;)"><span class="hl_varref"><span class="mpre">safe</span></span></a><span class="mpre"> </span><a href="#loc_274_26_274_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_26_274_27&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">)
                      </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_258_26_258_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_26_258_36&#39;)"><span class="hl_varref"><span class="mpre">destOffPtr</span></span></a><span class="mpre"> (</span><a href="#loc_275_23_275_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_275_23_275_30&#39;)"><span class="hl_varref"><span class="mpre">destOff</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_276_23_276_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_276_23_276_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">)
                      </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> </span><a href="#loc_260_22_260_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_22_260_30&#39;)"><span class="hl_varref"><span class="mpre">statePtr</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
                      </span><a href="#loc_263_13_263_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_13_263_17&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_265_15_265_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_265_15_265_22&#39;)"><span class="hl_varref"><span class="mpre">curPtr&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">

                _ -&gt; do
                  </span><span class="hl_comment"><span class="mpre">-- We encountered the end of the buffer while decoding</span></span><span class="mpre">
                  </span><a name="loc_284_19_284_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_284_19_284_20&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_258_26_258_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_26_258_36&#39;)"><span class="hl_varref"><span class="mpre">destOffPtr</span></span></a><span class="mpre">
                  </span><a name="loc_285_19_285_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_19_285_28&#39;)"><span class="hl_vardecl"><span class="mpre">codepoint</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_259_26_259_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_26_259_38&#39;)"><span class="hl_varref"><span class="mpre">codepointPtr</span></span></a><span class="mpre">
                  </span><a name="loc_286_19_286_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_19_286_28&#39;)"><span class="hl_vardecl"><span class="mpre">chunkText</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.html#loc_103_1_103_13" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_103_1_103_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeSTToIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
                      </span><a name="loc_287_23_287_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_23_287_26&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> &lt;- </span><a href="Data.Text.Array.html#loc_133_1_133_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_133_1_133_13&#39;)"><span class="hl_varref"><span class="mpre">A.unsafeFreeze</span></span></a><span class="mpre"> </span><a href="#loc_257_25_257_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_25_257_29&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre">
                      </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_78_1_78_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_78_1_78_5&#39;)"><span class="hl_varref"><span class="mpre">text</span></span></a><span class="mpre"> </span><a href="#loc_287_23_287_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_23_287_26&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_284_19_284_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_284_19_284_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
                  </span><a name="loc_289_19_289_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_289_19_289_26&#39;)"><span class="hl_vardecl"><span class="mpre">lastPtr</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_261_23_261_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_23_261_32&#39;)"><span class="hl_varref"><span class="mpre">curPtrPtr</span></span></a><span class="mpre">
                  let </span><a name="loc_290_23_290_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_23_290_27&#39;)"><span class="hl_vardecl"><span class="mpre">left</span></span></a><span class="mpre"> = </span><a href="#loc_289_19_289_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_289_19_289_26&#39;)"><span class="hl_varref"><span class="mpre">lastPtr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`minusPtr`</span></span><span class="mpre"> </span><a href="#loc_263_18_263_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_18_263_24&#39;)"><span class="hl_varref"><span class="mpre">curPtr</span></span></a><span class="mpre">
                      </span><a name="loc_291_23_291_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_23_291_32&#39;)"><span class="hl_vardecl"><span class="mpre">undecoded</span></span></a><span class="mpre"> = case </span><a href="#loc_267_15_267_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_15_267_20&#39;)"><span class="hl_varref"><span class="mpre">state</span></span></a><span class="mpre"> of
                        </span><span class="hl_conref"><span class="mpre">UTF8_ACCEPT</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">B.empty</span></span><span class="mpre">
                        _           -&gt; </span><span class="hl_varref"><span class="mpre">B.append</span></span><span class="mpre"> </span><a href="#loc_253_15_253_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_15_253_25&#39;)"><span class="hl_varref"><span class="mpre">undecoded0</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">B.drop</span></span><span class="mpre"> </span><a href="#loc_290_23_290_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_23_290_27&#39;)"><span class="hl_varref"><span class="mpre">left</span></span></a><span class="mpre"> </span><a href="#loc_253_44_253_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_44_253_46&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
                  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_222_17_222_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_17_222_21&#39;)"><span class="hl_conref"><span class="mpre">Some</span></span></a><span class="mpre"> </span><a href="#loc_286_19_286_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_19_286_28&#39;)"><span class="hl_varref"><span class="mpre">chunkText</span></span></a><span class="mpre"> </span><a href="#loc_291_23_291_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_23_291_32&#39;)"><span class="hl_varref"><span class="mpre">undecoded</span></span></a><span class="mpre">
                           (</span><a href="#loc_253_3_253_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_3_253_14&#39;)"><span class="hl_varref"><span class="mpre">decodeChunk</span></span></a><span class="mpre"> </span><a href="#loc_291_23_291_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_23_291_32&#39;)"><span class="hl_varref"><span class="mpre">undecoded</span></span></a><span class="mpre"> </span><a href="#loc_285_19_285_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_19_285_28&#39;)"><span class="hl_varref"><span class="mpre">codepoint</span></span></a><span class="mpre"> </span><a href="#loc_267_15_267_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_15_267_20&#39;)"><span class="hl_varref"><span class="mpre">state</span></span></a><span class="mpre">)
        in </span><a href="#loc_263_13_263_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_263_13_263_17&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_257_53_257_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_53_257_56&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_253_54_253_57" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_54_253_57&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">)
  </span><a name="loc_297_3_297_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_3_297_7&#39;)"><span class="hl_vardecl"><span class="mpre">desc</span></span></a><span class="mpre"> = </span><span class="hl_string"><span class="mpre">&quot;Data.Text.Internal.Encoding.streamDecodeUtf8With: Invalid UTF-8 stream&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode a &#39;ByteString&#39; containing UTF-8 encoded text that is known</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to be valid.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the input contains any invalid UTF-8 data, an exception will be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- thrown that cannot be caught in pure code.  For more control over</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the handling of invalid data, use &#39;decodeUtf8&#39;&#39; or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;decodeUtf8With&#39;.</span></span><span class="mpre">
</span><a href="#loc_307_1_307_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_1_307_11&#39;)"><span class="mpre">decodeUtf8</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_307_1_307_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_1_307_11&#39;)"><span class="hl_vardecl"><span class="mpre">decodeUtf8</span></span></a><span class="mpre"> = </span><a href="#loc_142_1_142_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_1_142_15&#39;)"><span class="hl_varref"><span class="mpre">decodeUtf8With</span></span></a><span class="mpre"> </span><a href="Data.Text.Encoding.Error.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_102_1_102_13&#39;)"><span class="hl_varref"><span class="mpre">strictDecode</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE[0] </span><a href="#loc_307_1_307_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_307_1_307_11&#39;)"><span class="mpre">decodeUtf8</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# RULES &quot;STREAM stream/decodeUtf8 fusion&quot; [1]
    forall bs. F.stream (decodeUtf8 bs) = E.streamUtf8 strictDecode bs #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode a &#39;ByteString&#39; containing UTF-8 encoded text.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the input contains any invalid UTF-8 data, the relevant</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exception will be returned, otherwise the decoded text.</span></span><span class="mpre">
</span><a href="#loc_317_1_317_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_1_317_12&#39;)"><span class="mpre">decodeUtf8&#39;</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><a href="Data.Text.Encoding.Error.html#loc_72_6_72_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_72_6_72_22&#39;)"><span class="hl_tyconref"><span class="mpre">UnicodeException</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_317_1_317_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_1_317_12&#39;)"><span class="hl_vardecl"><span class="mpre">decodeUtf8&#39;</span></span></a><span class="mpre"> = </span><a href="GHC.IO.html#loc_182_1_182_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_182_1_182_23&#39;)"><span class="hl_varref"><span class="mpre">unsafeDupablePerformIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="hl_varref"><span class="mpre">try</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="GHC.IO.html#loc_480_1_480_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_480_1_480_9&#39;)"><span class="hl_varref"><span class="mpre">evaluate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_142_1_142_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_1_142_15&#39;)"><span class="hl_varref"><span class="mpre">decodeUtf8With</span></span></a><span class="mpre"> </span><a href="Data.Text.Encoding.Error.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_102_1_102_13&#39;)"><span class="hl_varref"><span class="mpre">strictDecode</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_317_1_317_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_317_1_317_12&#39;)"><span class="mpre">decodeUtf8&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">

#if MIN_VERSION_bytestring(0,10,4)

</span><span class="hl_comment"><span class="mpre">-- | Encode text to a ByteString &#39;B.Builder&#39; using UTF-8 encoding.</span></span><span class="mpre">
</span><a href="#loc_324_1_324_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_1_324_18&#39;)"><span class="mpre">encodeUtf8Builder</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Builder.Internal.html#loc_344_9_344_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Internal.html#loc_344_9_344_16&#39;)"><span class="hl_tyconref"><span class="mpre">B.Builder</span></span></a><span class="mpre">
</span><a name="loc_324_1_324_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_324_1_324_18&#39;)"><span class="hl_vardecl"><span class="mpre">encodeUtf8Builder</span></span></a><span class="mpre"> = </span><a href="#loc_335_1_335_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_1_335_25&#39;)"><span class="hl_varref"><span class="mpre">encodeUtf8BuilderEscaped</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BP.liftFixedToBounded</span></span><span class="mpre"> </span><a href="Data.ByteString.Builder.Prim.Binary.html#loc_73_1_73_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Prim.Binary.html#loc_73_1_73_6&#39;)"><span class="hl_varref"><span class="mpre">BP.word8</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Encode text using UTF-8 encoding and escape the ASCII characters using</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a &#39;BP.BoundedPrim&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Use this function is to implement efficient encoders for text-based formats</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- like JSON or HTML.</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_335_1_335_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_1_335_25&#39;)"><span class="mpre">encodeUtf8BuilderEscaped</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- TODO: Extend documentation with references to source code in @blaze-html@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- or @aeson@ that uses this function.</span></span><span class="mpre">
</span><a href="#loc_335_1_335_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_1_335_25&#39;)"><span class="mpre">encodeUtf8BuilderEscaped</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">BP.BoundedPrim</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Builder.Internal.html#loc_344_9_344_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Internal.html#loc_344_9_344_16&#39;)"><span class="hl_tyconref"><span class="mpre">B.Builder</span></span></a><span class="mpre">
</span><a name="loc_335_1_335_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_1_335_25&#39;)"><span class="hl_fundecl"><span class="mpre">encodeUtf8BuilderEscaped</span></span></a><span class="mpre"> </span><a name="loc_335_26_335_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_26_335_28&#39;)"><span class="hl_vardecl"><span class="mpre">be</span></span></a><span class="mpre"> =
    </span><span class="hl_comment"><span class="mpre">-- manual eta-expansion to ensure inlining works as expected</span></span><span class="mpre">
    \</span><a name="loc_337_6_337_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_337_6_337_9&#39;)"><span class="hl_vardecl"><span class="mpre">txt</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Builder.Internal.html#loc_364_1_364_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Internal.html#loc_364_1_364_8&#39;)"><span class="hl_varref"><span class="mpre">B.builder</span></span></a><span class="mpre"> (</span><a href="#loc_341_5_341_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_5_341_16&#39;)"><span class="hl_varref"><span class="mpre">mkBuildstep</span></span></a><span class="mpre"> </span><a href="#loc_337_6_337_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_337_6_337_9&#39;)"><span class="hl_varref"><span class="mpre">txt</span></span></a><span class="mpre">)
  where
    </span><a name="loc_339_5_339_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_5_339_10&#39;)"><span class="hl_vardecl"><span class="mpre">bound</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">max</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BP.sizeBound</span></span><span class="mpre"> </span><a href="#loc_335_26_335_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_26_335_28&#39;)"><span class="hl_varref"><span class="mpre">be</span></span></a><span class="mpre">

    </span><a name="loc_341_5_341_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_5_341_16&#39;)"><span class="hl_fundecl"><span class="mpre">mkBuildstep</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_341_23_341_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_23_341_26&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_341_27_341_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_27_341_30&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_341_31_341_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_31_341_34&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) !</span><a name="loc_341_37_341_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_37_341_38&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> =
        </span><a href="#loc_346_9_346_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_9_346_18&#39;)"><span class="hl_varref"><span class="mpre">outerLoop</span></span></a><span class="mpre"> </span><a href="#loc_341_27_341_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_27_341_30&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">
      where
        </span><a name="loc_344_9_344_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_9_344_13&#39;)"><span class="hl_vardecl"><span class="mpre">iend</span></span></a><span class="mpre"> = </span><a href="#loc_341_27_341_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_27_341_30&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><a href="#loc_341_31_341_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_31_341_34&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">

        </span><a name="loc_346_9_346_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_9_346_18&#39;)"><span class="hl_fundecl"><span class="mpre">outerLoop</span></span></a><span class="mpre"> !</span><a name="loc_346_20_346_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_20_346_22&#39;)"><span class="hl_vardecl"><span class="mpre">i0</span></span></a><span class="mpre"> !</span><a name="loc_346_24_346_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_24_346_26&#39;)"><span class="hl_specname"><span class="mpre">br</span></span></a><span class="mpre">@(</span><a href="Data.ByteString.Builder.Internal.html#loc_170_20_170_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Internal.html#loc_170_20_170_31&#39;)"><span class="hl_conref"><span class="mpre">B.BufferRange</span></span></a><span class="mpre"> </span><a name="loc_346_42_346_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_42_346_45&#39;)"><span class="hl_vardecl"><span class="mpre">op0</span></span></a><span class="mpre"> </span><a name="loc_346_46_346_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_46_346_49&#39;)"><span class="hl_vardecl"><span class="mpre">ope</span></span></a><span class="mpre">)
          | </span><a href="#loc_346_20_346_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_20_346_22&#39;)"><span class="hl_varref"><span class="mpre">i0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_344_9_344_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_9_344_13&#39;)"><span class="hl_varref"><span class="mpre">iend</span></span></a><span class="mpre">       = </span><a href="#loc_341_37_341_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_37_341_38&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_346_24_346_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_24_346_26&#39;)"><span class="hl_varref"><span class="mpre">br</span></span></a><span class="mpre">
          | </span><a href="#loc_353_13_353_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_13_353_25&#39;)"><span class="hl_varref"><span class="mpre">outRemaining</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> = </span><a href="#loc_356_13_356_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_13_356_22&#39;)"><span class="hl_varref"><span class="mpre">goPartial</span></span></a><span class="mpre"> (</span><a href="#loc_346_20_346_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_20_346_22&#39;)"><span class="hl_varref"><span class="mpre">i0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">min</span></span><span class="mpre"> </span><a href="#loc_353_13_353_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_13_353_25&#39;)"><span class="hl_varref"><span class="mpre">outRemaining</span></span></a><span class="mpre"> </span><a href="#loc_354_13_354_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_13_354_25&#39;)"><span class="hl_varref"><span class="mpre">inpRemaining</span></span></a><span class="mpre">)
          </span><span class="hl_comment"><span class="mpre">-- TODO: Use a loop with an integrated bound&#39;s check if outRemaining</span></span><span class="mpre">
          </span><span class="hl_comment"><span class="mpre">-- is smaller than 8, as this will save on divisions.</span></span><span class="mpre">
          | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">        = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.ByteString.Builder.Internal.html#loc_298_1_298_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Internal.html#loc_298_1_298_11&#39;)"><span class="hl_varref"><span class="mpre">B.bufferFull</span></span></a><span class="mpre"> </span><a href="#loc_339_5_339_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_5_339_10&#39;)"><span class="hl_varref"><span class="mpre">bound</span></span></a><span class="mpre"> </span><a href="#loc_346_42_346_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_42_346_45&#39;)"><span class="hl_varref"><span class="mpre">op0</span></span></a><span class="mpre"> (</span><a href="#loc_346_9_346_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_9_346_18&#39;)"><span class="hl_varref"><span class="mpre">outerLoop</span></span></a><span class="mpre"> </span><a href="#loc_346_20_346_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_20_346_22&#39;)"><span class="hl_varref"><span class="mpre">i0</span></span></a><span class="mpre">)
          where
            </span><a name="loc_353_13_353_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_353_13_353_25&#39;)"><span class="hl_vardecl"><span class="mpre">outRemaining</span></span></a><span class="mpre"> = (</span><a href="#loc_346_46_346_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_46_346_49&#39;)"><span class="hl_varref"><span class="mpre">ope</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`minusPtr`</span></span><span class="mpre"> </span><a href="#loc_346_42_346_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_42_346_45&#39;)"><span class="hl_varref"><span class="mpre">op0</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">`div`</span></span><span class="mpre"> </span><a href="#loc_339_5_339_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_339_5_339_10&#39;)"><span class="hl_varref"><span class="mpre">bound</span></span></a><span class="mpre">
            </span><a name="loc_354_13_354_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_354_13_354_25&#39;)"><span class="hl_vardecl"><span class="mpre">inpRemaining</span></span></a><span class="mpre"> = </span><a href="#loc_344_9_344_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_344_9_344_13&#39;)"><span class="hl_varref"><span class="mpre">iend</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_346_20_346_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_20_346_22&#39;)"><span class="hl_varref"><span class="mpre">i0</span></span></a><span class="mpre">

            </span><a name="loc_356_13_356_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_13_356_22&#39;)"><span class="hl_fundecl"><span class="mpre">goPartial</span></span></a><span class="mpre"> !</span><a name="loc_356_24_356_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_24_356_31&#39;)"><span class="hl_vardecl"><span class="mpre">iendTmp</span></span></a><span class="mpre"> = </span><a href="#loc_358_17_358_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_17_358_19&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_346_20_346_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_20_346_22&#39;)"><span class="hl_varref"><span class="mpre">i0</span></span></a><span class="mpre"> </span><a href="#loc_346_42_346_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_42_346_45&#39;)"><span class="hl_varref"><span class="mpre">op0</span></span></a><span class="mpre">
              where
                </span><a name="loc_358_17_358_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_17_358_19&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> !</span><a name="loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> !</span><a name="loc_358_24_358_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_24_358_26&#39;)"><span class="hl_vardecl"><span class="mpre">op</span></span></a><span class="mpre">
                  | </span><a href="#loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><a href="#loc_356_24_356_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_356_24_356_31&#39;)"><span class="hl_varref"><span class="mpre">iendTmp</span></span></a><span class="mpre"> = case </span><a href="Data.Text.Array.html#loc_150_1_150_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_150_1_150_12&#39;)"><span class="hl_varref"><span class="mpre">A.unsafeIndex</span></span></a><span class="mpre"> </span><a href="#loc_341_23_341_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_23_341_26&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a href="#loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> of
                      </span><a name="loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_vardecl"><span class="mpre">w</span></span></a><span class="mpre"> | </span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x7F</span></span><span class="mpre"> -&gt; do
                            </span><span class="hl_varref"><span class="mpre">BP.runB</span></span><span class="mpre"> </span><a href="#loc_335_26_335_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_26_335_28&#39;)"><span class="hl_varref"><span class="mpre">be</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre">) </span><a href="#loc_358_24_358_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_24_358_26&#39;)"><span class="hl_varref"><span class="mpre">op</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a href="#loc_358_17_358_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_17_358_19&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">)
                        | </span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x7FF</span></span><span class="mpre"> -&gt; do
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> (</span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11&#39;)"><span class="hl_infix"><span class="mpre">`shiftR`</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0xC0</span></span><span class="mpre">
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> (</span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.&amp;.</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x3f</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x80</span></span><span class="mpre">
                            </span><a href="#loc_358_17_358_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_17_358_19&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><a href="#loc_358_24_358_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_24_358_26&#39;)"><span class="hl_varref"><span class="mpre">op</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">)
                        | </span><span class="hl_num"><span class="mpre">0xD800</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0xDBFF</span></span><span class="mpre"> -&gt; do
                            let </span><a name="loc_367_33_367_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_367_33_367_34&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Unsafe.Char.html#loc_40_1_40_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Char.html#loc_40_1_40_4&#39;)"><span class="hl_varref"><span class="mpre">ord</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Encoding.Utf16.html#loc_30_1_30_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Utf16.html#loc_30_1_30_5&#39;)"><span class="hl_varref"><span class="mpre">U16.chr2</span></span></a><span class="mpre"> </span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_150_1_150_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_150_1_150_12&#39;)"><span class="hl_varref"><span class="mpre">A.unsafeIndex</span></span></a><span class="mpre"> </span><a href="#loc_341_23_341_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_23_341_26&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre"> (</span><a href="#loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="hl_infix"><span class="mpre">+</span></span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">))
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> (</span><a href="#loc_367_33_367_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_367_33_367_34&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11&#39;)"><span class="hl_infix"><span class="mpre">`shiftR`</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">18</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0xF0</span></span><span class="mpre">
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> ((</span><a href="#loc_367_33_367_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_367_33_367_34&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11&#39;)"><span class="hl_infix"><span class="mpre">`shiftR`</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">12</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.&amp;.</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x3F</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x80</span></span><span class="mpre">
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> ((</span><a href="#loc_367_33_367_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_367_33_367_34&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11&#39;)"><span class="hl_infix"><span class="mpre">`shiftR`</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.&amp;.</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x3F</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x80</span></span><span class="mpre">
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">3</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> (</span><a href="#loc_367_33_367_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_367_33_367_34&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.&amp;.</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x3F</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x80</span></span><span class="mpre">
                            </span><a href="#loc_358_17_358_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_17_358_19&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">) (</span><a href="#loc_358_24_358_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_24_358_26&#39;)"><span class="hl_varref"><span class="mpre">op</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre">)
                        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> -&gt; do
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> (</span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11&#39;)"><span class="hl_infix"><span class="mpre">`shiftR`</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">12</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0xE0</span></span><span class="mpre">
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> ((</span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11&#39;)"><span class="hl_infix"><span class="mpre">`shiftR`</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.&amp;.</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x3F</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x80</span></span><span class="mpre">
                            </span><a href="#loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_varref"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> (</span><a href="#loc_360_23_360_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_23_360_24&#39;)"><span class="hl_varref"><span class="mpre">w</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.&amp;.</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x3F</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0x80</span></span><span class="mpre">
                            </span><a href="#loc_358_17_358_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_17_358_19&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><a href="#loc_358_24_358_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_24_358_26&#39;)"><span class="hl_varref"><span class="mpre">op</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">3</span></span><span class="mpre">)
                  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> =
                      </span><a href="#loc_346_9_346_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_9_346_18&#39;)"><span class="hl_varref"><span class="mpre">outerLoop</span></span></a><span class="mpre"> </span><a href="#loc_358_21_358_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_21_358_22&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Builder.Internal.html#loc_170_20_170_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Builder.Internal.html#loc_170_20_170_31&#39;)"><span class="hl_conref"><span class="mpre">B.BufferRange</span></span></a><span class="mpre"> </span><a href="#loc_358_24_358_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_24_358_26&#39;)"><span class="hl_varref"><span class="mpre">op</span></span></a><span class="mpre"> </span><a href="#loc_346_46_346_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_46_346_49&#39;)"><span class="hl_varref"><span class="mpre">ope</span></span></a><span class="mpre">)
                  where
                    </span><a name="loc_381_21_381_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_21_381_26&#39;)"><span class="hl_fundecl"><span class="mpre">poke8</span></span></a><span class="mpre"> </span><a name="loc_381_27_381_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_27_381_28&#39;)"><span class="hl_vardecl"><span class="mpre">j</span></span></a><span class="mpre"> </span><a name="loc_381_29_381_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_29_381_30&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">poke</span></span><span class="mpre"> (</span><a href="#loc_358_24_358_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_24_358_26&#39;)"><span class="hl_varref"><span class="mpre">op</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_381_27_381_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_27_381_28&#39;)"><span class="hl_varref"><span class="mpre">j</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_381_29_381_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_29_381_30&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
#endif

</span><span class="hl_comment"><span class="mpre">-- | Encode text using UTF-8 encoding.</span></span><span class="mpre">
</span><a href="#loc_386_1_386_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_1_386_11&#39;)"><span class="mpre">encodeUtf8</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_386_1_386_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_1_386_11&#39;)"><span class="hl_fundecl"><span class="mpre">encodeUtf8</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.html#loc_50_13_50_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_13_50_17&#39;)"><span class="hl_conref"><span class="mpre">Text</span></span></a><span class="mpre"> </span><a name="loc_386_18_386_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_18_386_21&#39;)"><span class="hl_vardecl"><span class="mpre">arr</span></span></a><span class="mpre"> </span><a name="loc_386_22_386_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_22_386_25&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_386_26_386_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_26_386_29&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">)
  | </span><a href="#loc_386_26_386_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_26_386_29&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">  = </span><span class="hl_varref"><span class="mpre">B.empty</span></span><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="GHC.IO.html#loc_182_1_182_23" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_182_1_182_23&#39;)"><span class="hl_varref"><span class="mpre">unsafeDupablePerformIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
  </span><a name="loc_389_3_389_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_3_389_5&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="mpre"> &lt;- </span><a href="Data.ByteString.Internal.html#loc_489_1_489_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_489_1_489_17&#39;)"><span class="hl_varref"><span class="mpre">mallocByteString</span></span></a><span class="mpre"> (</span><a href="#loc_386_26_386_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_26_386_29&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="hl_infix"><span class="mpre">*</span></span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre">)
  </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_389_3_389_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_3_389_5&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_390_24_390_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_24_390_27&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> -&gt;
    </span><a href="Foreign.Marshal.Utils.html#loc_84_1_84_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Utils.html#loc_84_1_84_5&#39;)"><span class="hl_varref"><span class="mpre">with</span></span></a><span class="mpre"> </span><a href="#loc_390_24_390_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_24_390_27&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_391_17_391_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_17_391_24&#39;)"><span class="hl_vardecl"><span class="mpre">destPtr</span></span></a><span class="mpre"> -&gt; do
      </span><span class="hl_varref"><span class="mpre">c_encode_utf8</span></span><span class="mpre"> </span><a href="#loc_391_17_391_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_17_391_24&#39;)"><span class="hl_varref"><span class="mpre">destPtr</span></span></a><span class="mpre"> (</span><a href="Data.Text.Array.html#loc_84_7_84_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Array.html#loc_84_7_84_10&#39;)"><span class="hl_varref"><span class="mpre">A.aBA</span></span></a><span class="mpre"> </span><a href="#loc_386_18_386_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_18_386_21&#39;)"><span class="hl_varref"><span class="mpre">arr</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_386_22_386_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_22_386_25&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_386_26_386_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_26_386_29&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
      </span><a name="loc_393_7_393_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_7_393_14&#39;)"><span class="hl_vardecl"><span class="mpre">newDest</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_391_17_391_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_391_17_391_24&#39;)"><span class="hl_varref"><span class="mpre">destPtr</span></span></a><span class="mpre">
      let </span><a name="loc_394_11_394_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_11_394_18&#39;)"><span class="hl_vardecl"><span class="mpre">utf8len</span></span></a><span class="mpre"> = </span><a href="#loc_393_7_393_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_7_393_14&#39;)"><span class="hl_varref"><span class="mpre">newDest</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`minusPtr`</span></span><span class="mpre"> </span><a href="#loc_390_24_390_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_24_390_27&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre">
      if </span><a href="#loc_394_11_394_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_11_394_18&#39;)"><span class="hl_varref"><span class="mpre">utf8len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="#loc_386_26_386_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_26_386_29&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><a href="Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Unsafe.Shift.html#loc_35_5_35_11&#39;)"><span class="hl_infix"><span class="mpre">`shiftR`</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
        then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a href="#loc_389_3_389_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_3_389_5&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_394_11_394_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_11_394_18&#39;)"><span class="hl_varref"><span class="mpre">utf8len</span></span></a><span class="mpre">)
        else do
          </span><a name="loc_398_11_398_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_11_398_14&#39;)"><span class="hl_vardecl"><span class="mpre">fp&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="Data.ByteString.Internal.html#loc_489_1_489_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_489_1_489_17&#39;)"><span class="hl_varref"><span class="mpre">mallocByteString</span></span></a><span class="mpre"> </span><a href="#loc_394_11_394_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_11_394_18&#39;)"><span class="hl_varref"><span class="mpre">utf8len</span></span></a><span class="mpre">
          </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_398_11_398_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_11_398_14&#39;)"><span class="hl_varref"><span class="mpre">fp&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_399_33_399_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_33_399_37&#39;)"><span class="hl_vardecl"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> -&gt; do
            </span><a href="Data.ByteString.Internal.html#loc_624_1_624_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_624_1_624_7&#39;)"><span class="hl_varref"><span class="mpre">memcpy</span></span></a><span class="mpre"> </span><a href="#loc_399_33_399_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_399_33_399_37&#39;)"><span class="hl_varref"><span class="mpre">ptr&#39;</span></span></a><span class="mpre"> </span><a href="#loc_390_24_390_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_24_390_27&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_394_11_394_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_11_394_18&#39;)"><span class="hl_varref"><span class="mpre">utf8len</span></span></a><span class="mpre">)
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a href="#loc_398_11_398_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_11_398_14&#39;)"><span class="hl_varref"><span class="mpre">fp&#39;</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><a href="#loc_394_11_394_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_11_394_18&#39;)"><span class="hl_varref"><span class="mpre">utf8len</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Decode text from little endian UTF-16 encoding.</span></span><span class="mpre">
</span><a href="#loc_405_1_405_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_1_405_18&#39;)"><span class="mpre">decodeUtf16LEWith</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">OnDecodeError</span></span><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_405_1_405_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_1_405_18&#39;)"><span class="hl_fundecl"><span class="mpre">decodeUtf16LEWith</span></span></a><span class="mpre"> </span><a name="loc_405_19_405_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_19_405_24&#39;)"><span class="hl_vardecl"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a name="loc_405_25_405_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_25_405_27&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">F.unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Encoding.Fusion.html#loc_94_1_94_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.html#loc_94_1_94_14&#39;)"><span class="hl_varref"><span class="mpre">E.streamUtf16LE</span></span></a><span class="mpre"> </span><a href="#loc_405_19_405_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_19_405_24&#39;)"><span class="hl_varref"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a href="#loc_405_25_405_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_25_405_27&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_405_1_405_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_1_405_18&#39;)"><span class="mpre">decodeUtf16LEWith</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode text from little endian UTF-16 encoding.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the input contains any invalid little endian UTF-16 data, an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exception will be thrown.  For more control over the handling of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid data, use &#39;decodeUtf16LEWith&#39;.</span></span><span class="mpre">
</span><a href="#loc_414_1_414_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_414_1_414_14&#39;)"><span class="mpre">decodeUtf16LE</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_414_1_414_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_414_1_414_14&#39;)"><span class="hl_vardecl"><span class="mpre">decodeUtf16LE</span></span></a><span class="mpre"> = </span><a href="#loc_405_1_405_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_405_1_405_18&#39;)"><span class="hl_varref"><span class="mpre">decodeUtf16LEWith</span></span></a><span class="mpre"> </span><a href="Data.Text.Encoding.Error.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_102_1_102_13&#39;)"><span class="hl_varref"><span class="mpre">strictDecode</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_414_1_414_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_414_1_414_14&#39;)"><span class="mpre">decodeUtf16LE</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode text from big endian UTF-16 encoding.</span></span><span class="mpre">
</span><a href="#loc_419_1_419_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_1_419_18&#39;)"><span class="mpre">decodeUtf16BEWith</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">OnDecodeError</span></span><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_419_1_419_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_1_419_18&#39;)"><span class="hl_fundecl"><span class="mpre">decodeUtf16BEWith</span></span></a><span class="mpre"> </span><a name="loc_419_19_419_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_19_419_24&#39;)"><span class="hl_vardecl"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a name="loc_419_25_419_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_25_419_27&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">F.unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Encoding.Fusion.html#loc_112_1_112_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.html#loc_112_1_112_14&#39;)"><span class="hl_varref"><span class="mpre">E.streamUtf16BE</span></span></a><span class="mpre"> </span><a href="#loc_419_19_419_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_19_419_24&#39;)"><span class="hl_varref"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a href="#loc_419_25_419_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_25_419_27&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_419_1_419_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_1_419_18&#39;)"><span class="mpre">decodeUtf16BEWith</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode text from big endian UTF-16 encoding.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the input contains any invalid big endian UTF-16 data, an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exception will be thrown.  For more control over the handling of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid data, use &#39;decodeUtf16BEWith&#39;.</span></span><span class="mpre">
</span><a href="#loc_428_1_428_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_428_1_428_14&#39;)"><span class="mpre">decodeUtf16BE</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_428_1_428_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_428_1_428_14&#39;)"><span class="hl_vardecl"><span class="mpre">decodeUtf16BE</span></span></a><span class="mpre"> = </span><a href="#loc_419_1_419_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_1_419_18&#39;)"><span class="hl_varref"><span class="mpre">decodeUtf16BEWith</span></span></a><span class="mpre"> </span><a href="Data.Text.Encoding.Error.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_102_1_102_13&#39;)"><span class="hl_varref"><span class="mpre">strictDecode</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_428_1_428_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_428_1_428_14&#39;)"><span class="mpre">decodeUtf16BE</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Encode text using little endian UTF-16 encoding.</span></span><span class="mpre">
</span><a href="#loc_433_1_433_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_433_1_433_14&#39;)"><span class="mpre">encodeUtf16LE</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_433_1_433_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_433_1_433_14&#39;)"><span class="hl_fundecl"><span class="mpre">encodeUtf16LE</span></span></a><span class="mpre"> </span><a name="loc_433_15_433_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_433_15_433_18&#39;)"><span class="hl_vardecl"><span class="mpre">txt</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Encoding.Fusion.html#loc_169_1_169_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.html#loc_169_1_169_9&#39;)"><span class="hl_varref"><span class="mpre">E.unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Encoding.Fusion.Common.html#loc_64_1_64_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.Common.html#loc_64_1_64_16&#39;)"><span class="hl_varref"><span class="mpre">E.restreamUtf16LE</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">F.stream</span></span></a><span class="mpre"> </span><a href="#loc_433_15_433_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_433_15_433_18&#39;)"><span class="hl_varref"><span class="mpre">txt</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_433_1_433_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_433_1_433_14&#39;)"><span class="mpre">encodeUtf16LE</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Encode text using big endian UTF-16 encoding.</span></span><span class="mpre">
</span><a href="#loc_438_1_438_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_1_438_14&#39;)"><span class="mpre">encodeUtf16BE</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_438_1_438_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_1_438_14&#39;)"><span class="hl_fundecl"><span class="mpre">encodeUtf16BE</span></span></a><span class="mpre"> </span><a name="loc_438_15_438_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_15_438_18&#39;)"><span class="hl_vardecl"><span class="mpre">txt</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Encoding.Fusion.html#loc_169_1_169_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.html#loc_169_1_169_9&#39;)"><span class="hl_varref"><span class="mpre">E.unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Encoding.Fusion.Common.html#loc_40_1_40_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.Common.html#loc_40_1_40_16&#39;)"><span class="hl_varref"><span class="mpre">E.restreamUtf16BE</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">F.stream</span></span></a><span class="mpre"> </span><a href="#loc_438_15_438_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_15_438_18&#39;)"><span class="hl_varref"><span class="mpre">txt</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_438_1_438_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_1_438_14&#39;)"><span class="mpre">encodeUtf16BE</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode text from little endian UTF-32 encoding.</span></span><span class="mpre">
</span><a href="#loc_443_1_443_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_1_443_18&#39;)"><span class="mpre">decodeUtf32LEWith</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">OnDecodeError</span></span><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_443_1_443_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_1_443_18&#39;)"><span class="hl_fundecl"><span class="mpre">decodeUtf32LEWith</span></span></a><span class="mpre"> </span><a name="loc_443_19_443_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_19_443_24&#39;)"><span class="hl_vardecl"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a name="loc_443_25_443_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_25_443_27&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">F.unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Encoding.Fusion.html#loc_150_1_150_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.html#loc_150_1_150_14&#39;)"><span class="hl_varref"><span class="mpre">E.streamUtf32LE</span></span></a><span class="mpre"> </span><a href="#loc_443_19_443_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_19_443_24&#39;)"><span class="hl_varref"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a href="#loc_443_25_443_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_25_443_27&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_443_1_443_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_1_443_18&#39;)"><span class="mpre">decodeUtf32LEWith</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode text from little endian UTF-32 encoding.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the input contains any invalid little endian UTF-32 data, an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exception will be thrown.  For more control over the handling of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid data, use &#39;decodeUtf32LEWith&#39;.</span></span><span class="mpre">
</span><a href="#loc_452_1_452_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_1_452_14&#39;)"><span class="mpre">decodeUtf32LE</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_452_1_452_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_1_452_14&#39;)"><span class="hl_vardecl"><span class="mpre">decodeUtf32LE</span></span></a><span class="mpre"> = </span><a href="#loc_443_1_443_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_443_1_443_18&#39;)"><span class="hl_varref"><span class="mpre">decodeUtf32LEWith</span></span></a><span class="mpre"> </span><a href="Data.Text.Encoding.Error.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_102_1_102_13&#39;)"><span class="hl_varref"><span class="mpre">strictDecode</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_452_1_452_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_452_1_452_14&#39;)"><span class="mpre">decodeUtf32LE</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode text from big endian UTF-32 encoding.</span></span><span class="mpre">
</span><a href="#loc_457_1_457_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_1_457_18&#39;)"><span class="mpre">decodeUtf32BEWith</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">OnDecodeError</span></span><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_457_1_457_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_1_457_18&#39;)"><span class="hl_fundecl"><span class="mpre">decodeUtf32BEWith</span></span></a><span class="mpre"> </span><a name="loc_457_19_457_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_19_457_24&#39;)"><span class="hl_vardecl"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a name="loc_457_25_457_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_25_457_27&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Fusion.html#loc_100_1_100_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_100_1_100_9&#39;)"><span class="hl_varref"><span class="mpre">F.unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Encoding.Fusion.html#loc_130_1_130_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.html#loc_130_1_130_14&#39;)"><span class="hl_varref"><span class="mpre">E.streamUtf32BE</span></span></a><span class="mpre"> </span><a href="#loc_457_19_457_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_19_457_24&#39;)"><span class="hl_varref"><span class="mpre">onErr</span></span></a><span class="mpre"> </span><a href="#loc_457_25_457_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_25_457_27&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_457_1_457_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_1_457_18&#39;)"><span class="mpre">decodeUtf32BEWith</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Decode text from big endian UTF-32 encoding.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the input contains any invalid big endian UTF-32 data, an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exception will be thrown.  For more control over the handling of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- invalid data, use &#39;decodeUtf32BEWith&#39;.</span></span><span class="mpre">
</span><a href="#loc_466_1_466_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_1_466_14&#39;)"><span class="mpre">decodeUtf32BE</span></a><span class="mpre"> :: </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">
</span><a name="loc_466_1_466_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_1_466_14&#39;)"><span class="hl_vardecl"><span class="mpre">decodeUtf32BE</span></span></a><span class="mpre"> = </span><a href="#loc_457_1_457_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_457_1_457_18&#39;)"><span class="hl_varref"><span class="mpre">decodeUtf32BEWith</span></span></a><span class="mpre"> </span><a href="Data.Text.Encoding.Error.html#loc_102_1_102_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.Error.html#loc_102_1_102_13&#39;)"><span class="hl_varref"><span class="mpre">strictDecode</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_466_1_466_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_1_466_14&#39;)"><span class="mpre">decodeUtf32BE</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Encode text using little endian UTF-32 encoding.</span></span><span class="mpre">
</span><a href="#loc_471_1_471_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_1_471_14&#39;)"><span class="mpre">encodeUtf32LE</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_471_1_471_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_1_471_14&#39;)"><span class="hl_fundecl"><span class="mpre">encodeUtf32LE</span></span></a><span class="mpre"> </span><a name="loc_471_15_471_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_15_471_18&#39;)"><span class="hl_vardecl"><span class="mpre">txt</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Encoding.Fusion.html#loc_169_1_169_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.html#loc_169_1_169_9&#39;)"><span class="hl_varref"><span class="mpre">E.unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Encoding.Fusion.Common.html#loc_107_1_107_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.Common.html#loc_107_1_107_16&#39;)"><span class="hl_varref"><span class="mpre">E.restreamUtf32LE</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">F.stream</span></span></a><span class="mpre"> </span><a href="#loc_471_15_471_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_15_471_18&#39;)"><span class="hl_varref"><span class="mpre">txt</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_471_1_471_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_471_1_471_14&#39;)"><span class="mpre">encodeUtf32LE</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Encode text using big endian UTF-32 encoding.</span></span><span class="mpre">
</span><a href="#loc_476_1_476_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_14&#39;)"><span class="mpre">encodeUtf32BE</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.html#loc_50_6_50_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.html#loc_50_6_50_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="hl_tyconref"><span class="mpre">ByteString</span></span></a><span class="mpre">
</span><a name="loc_476_1_476_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_14&#39;)"><span class="hl_fundecl"><span class="mpre">encodeUtf32BE</span></span></a><span class="mpre"> </span><a name="loc_476_15_476_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_15_476_18&#39;)"><span class="hl_vardecl"><span class="mpre">txt</span></span></a><span class="mpre"> = </span><a href="Data.Text.Internal.Encoding.Fusion.html#loc_169_1_169_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.html#loc_169_1_169_9&#39;)"><span class="hl_varref"><span class="mpre">E.unstream</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Encoding.Fusion.Common.html#loc_88_1_88_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Encoding.Fusion.Common.html#loc_88_1_88_16&#39;)"><span class="hl_varref"><span class="mpre">E.restreamUtf32BE</span></span></a><span class="mpre"> (</span><a href="Data.Text.Internal.Fusion.html#loc_71_1_71_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Fusion.html#loc_71_1_71_7&#39;)"><span class="hl_varref"><span class="mpre">F.stream</span></span></a><span class="mpre"> </span><a href="#loc_476_15_476_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_15_476_18&#39;)"><span class="hl_varref"><span class="mpre">txt</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_476_1_476_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_476_1_476_14&#39;)"><span class="mpre">encodeUtf32BE</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 479, srcSpanStartColumn = 1, srcSpanEndLine = 481, srcSpanEndColumn = 48}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 479, srcSpanStartColumn = 1, srcSpanEndLine = 479, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = "><span class="mpre">foreign import ccall unsafe &quot;_hs_text_decode_utf8&quot; c_decode_utf8
    :: MutableByteArray# s -&gt; Ptr CSize
    -&gt; Ptr Word8 -&gt; Ptr Word8 -&gt; IO (Ptr Word8)</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 483, srcSpanStartColumn = 1, srcSpanEndLine = 486, srcSpanEndColumn = 59}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 483, srcSpanStartColumn = 1, srcSpanEndLine = 483, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = "><span class="mpre">foreign import ccall unsafe &quot;_hs_text_decode_utf8_state&quot; c_decode_utf8_with_state
    :: MutableByteArray# s -&gt; Ptr CSize
    -&gt; Ptr (Ptr Word8) -&gt; Ptr Word8
    -&gt; Ptr CodePoint -&gt; Ptr DecoderState -&gt; IO (Ptr Word8)</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 488, srcSpanStartColumn = 1, srcSpanEndLine = 489, srcSpanEndColumn = 62}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 488, srcSpanStartColumn = 1, srcSpanEndLine = 488, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = "><span class="mpre">foreign import ccall unsafe &quot;_hs_text_decode_latin1&quot; c_decode_latin1
    :: MutableByteArray# s -&gt; Ptr Word8 -&gt; Ptr Word8 -&gt; IO ()</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 491, srcSpanStartColumn = 1, srcSpanEndLine = 492, srcSpanEndColumn = 64}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = 491, srcSpanStartColumn = 1, srcSpanEndLine = 491, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/Data/Text/Encoding.hs&quot;, srcSpanStartLine = "><span class="mpre">foreign import ccall unsafe &quot;_hs_text_encode_utf8&quot; c_encode_utf8
    :: Ptr (Ptr Word8) -&gt; ByteArray# -&gt; CSize -&gt; CSize -&gt; IO ()</span></span><span class="mpre">
</span></div></body></html>