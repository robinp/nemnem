<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE Trustworthy #-}
{-# LANGUAGE CPP, NoImplicitPrelude #-}

</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Foreign.Marshal.Error</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (c) The FFI task force 2001</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file libraries/base/LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  ffi@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Routines for testing return values and raising a &#39;userError&#39; exception</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- in case of values indicating an error state.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">

module Foreign.Marshal.Error (
  throwIf,
  throwIf_,
  throwIfNeg,
  throwIfNeg_,
  throwIfNull,

  </span><span class="hl_comment"><span class="mpre">-- Discard return value</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  void
) where

import Foreign.Ptr

#ifdef __HADDOCK__
import Data.Bool
import System.IO.Error
#endif
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanStartLine = 37, srcSpanStartColumn = 8, srcSpanEndLine = 37, srcSpanEndColumn = 16}, srcInfoPoints = []}) &quot;GHC.Base&quot;"><span class="mpre">GHC.Base</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanStartLine = 38, srcSpanStartColumn = 8, srcSpanEndLine = 38, srcSpanEndColumn = 15}, srcInfoPoints = []}) &quot;GHC.Num&quot;"><span class="mpre">GHC.Num</span></span><span class="mpre">
import GHC.IO.Exception

</span><span class="hl_comment"><span class="mpre">-- exported functions</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- |Execute an &#39;IO&#39; action, throwing a &#39;userError&#39; if the predicate yields</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;True&#39; when applied to the result returned by the &#39;IO&#39; action.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If no exception is raised, return the result of the computation.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_53_1_53_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_1_53_8&#39;)"><span class="mpre">throwIf</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)  </span><span class="hl_comment"><span class="mpre">-- ^ error condition on the result of the &#39;IO&#39; action</span></span><span class="mpre">
        -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) </span><span class="hl_comment"><span class="mpre">-- ^ computes an error message from erroneous results</span></span><span class="mpre">
                        </span><span class="hl_comment"><span class="mpre">-- of the &#39;IO&#39; action</span></span><span class="mpre">
        -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">         </span><span class="hl_comment"><span class="mpre">-- ^ the &#39;IO&#39; action to be executed</span></span><span class="mpre">
        -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_53_1_53_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_1_53_8&#39;)"><span class="hl_fundecl"><span class="mpre">throwIf</span></span></a><span class="mpre"> </span><a name="loc_53_9_53_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_9_53_13&#39;)"><span class="hl_vardecl"><span class="mpre">pred</span></span></a><span class="mpre"> </span><a name="loc_53_14_53_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_14_53_20&#39;)"><span class="hl_vardecl"><span class="mpre">msgfct</span></span></a><span class="mpre"> </span><a name="loc_53_21_53_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_21_53_24&#39;)"><span class="hl_vardecl"><span class="mpre">act</span></span></a><span class="mpre">  = 
  do
    </span><a name="loc_55_5_55_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_5_55_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_53_21_53_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_21_53_24&#39;)"><span class="hl_varref"><span class="mpre">act</span></span></a><span class="mpre">
    (if </span><a href="#loc_53_9_53_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_9_53_13&#39;)"><span class="hl_varref"><span class="mpre">pred</span></span></a><span class="mpre"> </span><a href="#loc_55_5_55_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_5_55_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> then </span><a href="GHC.IO.Exception.html#loc_221_1_221_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_221_1_221_8&#39;)"><span class="hl_varref"><span class="mpre">ioError</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_316_1_316_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_316_1_316_10&#39;)"><span class="hl_varref"><span class="mpre">userError</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_53_14_53_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_14_53_20&#39;)"><span class="hl_varref"><span class="mpre">msgfct</span></span></a><span class="mpre"> else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">) </span><a href="#loc_55_5_55_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_5_55_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- |Like &#39;throwIf&#39;, but discarding the result</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_61_1_61_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_1_61_9&#39;)"><span class="mpre">throwIf_</span></a><span class="mpre">                 :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_61_1_61_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_1_61_9&#39;)"><span class="hl_fundecl"><span class="mpre">throwIf_</span></span></a><span class="mpre"> </span><a name="loc_61_10_61_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_10_61_14&#39;)"><span class="hl_vardecl"><span class="mpre">pred</span></span></a><span class="mpre"> </span><a name="loc_61_15_61_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_15_61_21&#39;)"><span class="hl_vardecl"><span class="mpre">msgfct</span></span></a><span class="mpre"> </span><a name="loc_61_22_61_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_22_61_25&#39;)"><span class="hl_vardecl"><span class="mpre">act</span></span></a><span class="mpre">  = </span><a href="#loc_81_1_81_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_1_81_5&#39;)"><span class="hl_varref"><span class="mpre">void</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_53_1_53_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_1_53_8&#39;)"><span class="hl_varref"><span class="mpre">throwIf</span></span></a><span class="mpre"> </span><a href="#loc_61_10_61_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_10_61_14&#39;)"><span class="hl_varref"><span class="mpre">pred</span></span></a><span class="mpre"> </span><a href="#loc_61_15_61_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_15_61_21&#39;)"><span class="hl_varref"><span class="mpre">msgfct</span></span></a><span class="mpre"> </span><a href="#loc_61_22_61_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_22_61_25&#39;)"><span class="hl_varref"><span class="mpre">act</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- |Guards against negative result values</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_66_1_66_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_1_66_11&#39;)"><span class="mpre">throwIfNeg</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 15, srcSpanEndLine = 65, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 15, srcSpanEndLine = 65, srcSpanEndColumn = 16},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanSta"><span class="mpre">(Ord a, Num a) =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_66_1_66_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_66_1_66_11&#39;)"><span class="hl_vardecl"><span class="mpre">throwIfNeg</span></span></a><span class="mpre">  = </span><a href="#loc_53_1_53_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_1_53_8&#39;)"><span class="hl_varref"><span class="mpre">throwIf</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- |Like &#39;throwIfNeg&#39;, but discarding the result</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_71_1_71_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_12&#39;)"><span class="mpre">throwIfNeg_</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 16, srcSpanEndLine = 70, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanStartLine = 70, srcSpanStartColumn = 16, srcSpanEndLine = 70, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanSta"><span class="mpre">(Ord a, Num a) =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_71_1_71_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_71_1_71_12&#39;)"><span class="hl_vardecl"><span class="mpre">throwIfNeg_</span></span></a><span class="mpre">  = </span><a href="#loc_61_1_61_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_1_61_9&#39;)"><span class="hl_varref"><span class="mpre">throwIf_</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- |Guards against null pointers</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_76_1_76_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_12&#39;)"><span class="mpre">throwIfNull</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Ptr</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_76_1_76_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_12&#39;)"><span class="hl_vardecl"><span class="mpre">throwIfNull</span></span></a><span class="mpre">  = </span><a href="#loc_53_1_53_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_1_53_8&#39;)"><span class="hl_varref"><span class="mpre">throwIf</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nullPtr</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- |Discard the return value of an &#39;IO&#39; action</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_81_1_81_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_1_81_5&#39;)"><span class="mpre">void</span></a><span class="mpre">     :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_81_1_81_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_1_81_5&#39;)"><span class="hl_fundecl"><span class="mpre">void</span></span></a><span class="mpre"> </span><a name="loc_81_6_81_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_6_81_9&#39;)"><span class="hl_vardecl"><span class="mpre">act</span></span></a><span class="mpre">  = </span><a href="#loc_81_6_81_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_81_6_81_9&#39;)"><span class="hl_varref"><span class="mpre">act</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclDeprPragmaDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanStartLine = 82, srcSpanStartColumn = 1, srcSpanEndLine = 82, srcSpanEndColumn = 59}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSpanStartLine = 82, srcSpanStartColumn = 1, srcSpanEndLine = 82, srcSpanEndColumn = 15},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/base-4.7.0.0/Foreign/Marshal/Error.hs&quot;, srcSp"><span class="mpre">{-# DEPRECATED void &quot;use &#39;Control.Monad.void&#39; instead&quot; #-}</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- deprecated in 7.6</span></span><span class="mpre">
</span></div></body></html>