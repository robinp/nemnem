<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Distribution.Simple.GHC</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  Isaac Jones 2003-2007</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  cabal-devel@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is a fairly large module. It contains most of the GHC-specific code for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- configuring, building and installing packages. It also exports a function</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- for finding out what packages are already installed. Configuring involves</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- finding the @ghc@ and @ghc-pkg@ programs, finding what language extensions</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- this version of ghc supports and returning a &#39;Compiler&#39; value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;getInstalledPackages&#39; involves calling the @ghc-pkg@ program to find out</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- what packages are installed.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Building is somewhat complex as there is quite a bit of information to take</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- into account. We have to build libs and programs, possibly for profiling and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- shared libs. We have to support building libraries that will be usable by</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- GHCi and also ghc&#39;s @-split-objs@ feature. We have to compile any C files</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- using ghc. Linking, especially for @split-objs@ is remarkably complex,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- partly because there tend to be 1,000&#39;s of @.o@ files and this can often be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- more than we can pass to the @ld@ or @ar@ programs in one go.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Installing for libs and exes involves finding the right files and copying</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- them to the right places. One of the more tricky things about this module is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- remembering the layout of files in the build directory (which is not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- explicitly documented) and thus what search dirs are used for various kinds</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of files.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- Copyright (c) 2003-2005, Isaac Jones
All rights reserved.

Redistribution and use in source and binary forms, with or without
modiication, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.

    * Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the following
      disclaimer in the documentation and/or other materials provided
      with the distribution.

    * Neither the name of Isaac Jones nor the names of other
      contributors may be used to endorse or promote products derived
      from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. -}</span></span><span class="mpre">

module Distribution.Simple.GHC (
        getGhcInfo,
        configure, getInstalledPackages, getPackageDBContents,
        buildLib, buildExe,
        replLib, replExe,
        installLib, installExe,
        libAbiHash,
        initPackageDB,
        invokeHcPkg,
        registerPackage,
        componentGhcOptions,
        ghcLibDir,
        ghcDynamic,
 ) where

import qualified Distribution.Simple.GHC.IPI641 as IPI641
import qualified Distribution.Simple.GHC.IPI642 as IPI642
import Distribution.PackageDescription as PD
         ( </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="mpre">PackageDescription</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="mpre">BuildInfo</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="mpre">Executable</span></a><span class="mpre">(..)
         , </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="mpre">Library</span></a><span class="mpre">(..), </span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="mpre">libModules</span></a><span class="mpre">, </span><a href="Distribution.PackageDescription.html#loc_388_1_388_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_388_1_388_11&#39;)"><span class="mpre">exeModules</span></a><span class="mpre">, </span><a href="Distribution.PackageDescription.html#loc_778_1_778_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_778_1_778_10&#39;)"><span class="mpre">hcOptions</span></a><span class="mpre">
         , </span><a href="Distribution.PackageDescription.html#loc_768_1_768_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_768_1_768_15&#39;)"><span class="mpre">usedExtensions</span></a><span class="mpre">, </span><a href="Distribution.PackageDescription.html#loc_762_1_762_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_762_1_762_14&#39;)"><span class="mpre">allExtensions</span></a><span class="mpre"> )
import Distribution.InstalledPackageInfo
         ( InstalledPackageInfo )
import qualified Distribution.InstalledPackageInfo as InstalledPackageInfo
                                ( </span><a href="Distribution.InstalledPackageInfo.html#loc_92_6_92_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.InstalledPackageInfo.html#loc_92_6_92_27&#39;)"><span class="mpre">InstalledPackageInfo_</span></a><span class="mpre">(..) )
import Distribution.Simple.PackageIndex (</span><a href="Distribution.Simple.PackageIndex.html#loc_94_6_94_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.PackageIndex.html#loc_94_6_94_18&#39;)"><span class="mpre">PackageIndex</span></a><span class="mpre">)
import qualified Distribution.Simple.PackageIndex as PackageIndex
import Distribution.Simple.LocalBuildInfo
         ( </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="mpre">LocalBuildInfo</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="mpre">ComponentLocalBuildInfo</span></a><span class="mpre">(..)
         , </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_234_6_234_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_234_6_234_17&#39;)"><span class="mpre">LibraryName</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20&#39;)"><span class="mpre">absoluteInstallDirs</span></a><span class="mpre"> )
import Distribution.Simple.InstallDirs hiding ( </span><a href="Distribution.Simple.InstallDirs.html#loc_318_1_318_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_318_1_318_20&#39;)"><span class="mpre">absoluteInstallDirs</span></a><span class="mpre"> )
import Distribution.Simple.BuildPaths
import Distribution.Simple.Utils
import Distribution.Package
         ( </span><a href="Distribution.Package.html#loc_183_7_183_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_183_7_183_14&#39;)"><span class="mpre">Package</span></a><span class="mpre">(..), </span><a href="Distribution.Package.html#loc_80_9_80_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_80_9_80_20&#39;)"><span class="mpre">PackageName</span></a><span class="mpre">(..) )
import qualified Distribution.ModuleName as ModuleName
import Distribution.Simple.Program
         ( </span><a href="Distribution.Simple.Program.Types.html#loc_46_6_46_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_46_6_46_13&#39;)"><span class="mpre">Program</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="mpre">ConfiguredProgram</span></a><span class="mpre">(..), ProgramConfiguration
         , </span><a href="Distribution.Simple.Program.Types.html#loc_105_6_105_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_105_6_105_21&#39;)"><span class="mpre">ProgramLocation</span></a><span class="mpre">(..), ProgramSearchPath, </span><a href="Distribution.Simple.Program.Find.html#loc_60_6_60_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Find.html#loc_60_6_60_28&#39;)"><span class="mpre">ProgramSearchPathEntry</span></a><span class="mpre">(..)
         , </span><a href="Distribution.Simple.Program.html#loc_197_1_197_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_197_1_197_17&#39;)"><span class="mpre">rawSystemProgram</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.html#loc_201_1_201_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_201_1_201_23&#39;)"><span class="mpre">rawSystemProgramStdout</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.html#loc_209_1_209_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_209_1_209_27&#39;)"><span class="mpre">rawSystemProgramStdoutConf</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.html#loc_156_1_156_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_156_1_156_17&#39;)"><span class="mpre">getProgramOutput</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Run.html#loc_145_1_145_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Run.html#loc_145_1_145_27&#39;)"><span class="mpre">getProgramInvocationOutput</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Types.html#loc_119_1_119_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_119_1_119_21&#39;)"><span class="mpre">suppressOverrideArgs</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.Db.html#loc_399_1_399_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_399_1_399_22&#39;)"><span class="mpre">requireProgramVersion</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="mpre">requireProgram</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.Db.html#loc_203_1_203_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_203_1_203_21&#39;)"><span class="mpre">userMaybeSpecifyPath</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Types.html#loc_115_1_115_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_115_1_115_12&#39;)"><span class="mpre">programPath</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="mpre">lookupProgram</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Db.html#loc_155_1_155_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_155_1_155_16&#39;)"><span class="mpre">addKnownProgram</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="mpre">ghcProgram</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="mpre">ghcPkgProgram</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Builtin.html#loc_213_1_213_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_213_1_213_14&#39;)"><span class="mpre">hsc2hsProgram</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.Builtin.html#loc_207_1_207_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_207_1_207_10&#39;)"><span class="mpre">arProgram</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Builtin.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_204_1_204_14&#39;)"><span class="mpre">ranlibProgram</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Builtin.html#loc_260_1_260_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_260_1_260_10&#39;)"><span class="mpre">ldProgram</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Program.Builtin.html#loc_199_1_199_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_199_1_199_11&#39;)"><span class="mpre">gccProgram</span></a><span class="mpre">, </span><a href="Distribution.Simple.Program.Builtin.html#loc_210_1_210_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_210_1_210_13&#39;)"><span class="mpre">stripProgram</span></a><span class="mpre"> )
import qualified Distribution.Simple.Program.HcPkg as HcPkg
import qualified Distribution.Simple.Program.Ar    as Ar
import qualified Distribution.Simple.Program.Ld    as Ld
import Distribution.Simple.Program.GHC
import Distribution.Simple.Setup (</span><a href="Distribution.Simple.Setup.html#loc_182_1_182_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_182_1_182_7&#39;)"><span class="mpre">toFlag</span></a><span class="mpre">, </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="mpre">fromFlag</span></a><span class="mpre">)
import Distribution.Simple.Compiler
         ( </span><a href="Distribution.Compiler.html#loc_81_6_81_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_6_81_20&#39;)"><span class="mpre">CompilerFlavor</span></a><span class="mpre">(..), </span><a href="Distribution.Compiler.html#loc_154_6_154_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_154_6_154_16&#39;)"><span class="mpre">CompilerId</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.Compiler.html#loc_85_6_85_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_85_6_85_14&#39;)"><span class="mpre">Compiler</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.Compiler.html#loc_99_1_99_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_99_1_99_16&#39;)"><span class="mpre">compilerVersion</span></a><span class="mpre">
         , </span><a href="Distribution.Simple.Compiler.html#loc_162_6_162_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_162_6_162_23&#39;)"><span class="mpre">OptimisationLevel</span></a><span class="mpre">(..), </span><a href="Distribution.Simple.Compiler.html#loc_112_6_112_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_6_112_15&#39;)"><span class="mpre">PackageDB</span></a><span class="mpre">(..), PackageDBStack
         , Flag )
import Distribution.Version
         ( </span><a href="Data.Version.html#loc_68_6_68_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Version.html#loc_68_6_68_13&#39;)"><span class="mpre">Version</span></a><span class="mpre">(..), </span><a href="Distribution.Version.html#loc_143_1_143_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_143_1_143_11&#39;)"><span class="mpre">anyVersion</span></a><span class="mpre">, </span><a href="Distribution.Version.html#loc_182_1_182_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_182_1_182_15&#39;)"><span class="mpre">orLaterVersion</span></a><span class="mpre"> )
import Distribution.System
         ( </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="mpre">Platform</span></a><span class="mpre">(..), </span><a href="Distribution.System.html#loc_66_6_66_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_6_66_8&#39;)"><span class="mpre">OS</span></a><span class="mpre">(..), </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="mpre">buildOS</span></a><span class="mpre">, </span><a href="Distribution.System.html#loc_191_1_191_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_191_1_191_19&#39;)"><span class="mpre">platformFromTriple</span></a><span class="mpre"> )
import Distribution.Verbosity
import Distribution.Text
         ( </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="mpre">display</span></a><span class="mpre">, </span><a href="Distribution.Text.html#loc_39_1_39_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_39_1_39_12&#39;)"><span class="mpre">simpleParse</span></a><span class="mpre"> )
import Language.Haskell.Extension (</span><a href="Language.Haskell.Extension.html#loc_69_6_69_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_69_6_69_14&#39;)"><span class="mpre">Language</span></a><span class="mpre">(..), </span><a href="Language.Haskell.Extension.html#loc_118_6_118_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_118_6_118_15&#39;)"><span class="mpre">Extension</span></a><span class="mpre">(..)
                                  ,</span><a href="Language.Haskell.Extension.html#loc_131_6_131_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_131_6_131_20&#39;)"><span class="mpre">KnownExtension</span></a><span class="mpre">(..))

import Control.Monad            ( </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="mpre">unless</span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="mpre">when</span></a><span class="mpre"> )
import Data.Char                ( </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="mpre">isSpace</span></a><span class="mpre"> )
import Data.List
import Data.Maybe               ( </span><a href="Data.Maybe.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_115_1_115_10&#39;)"><span class="mpre">catMaybes</span></a><span class="mpre">, </span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="mpre">fromMaybe</span></a><span class="mpre"> )
import Data.Monoid              ( </span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="mpre">Monoid</span></a><span class="mpre">(..) )
import System.Directory
         ( </span><a href="System.Directory.html#loc_400_1_400_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_400_1_400_11&#39;)"><span class="mpre">removeFile</span></a><span class="mpre">, </span><a href="System.Directory.html#loc_628_1_628_21" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_628_1_628_21&#39;)"><span class="mpre">getDirectoryContents</span></a><span class="mpre">, </span><a href="System.Directory.html#loc_726_1_726_14" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_726_1_726_14&#39;)"><span class="mpre">doesFileExist</span></a><span class="mpre">
         , </span><a href="System.Directory.html#loc_906_1_906_22" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_906_1_906_22&#39;)"><span class="mpre">getTemporaryDirectory</span></a><span class="mpre"> )
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 137, srcSpanStartColumn = 8, srcSpanEndLine = 137, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;System.FilePath&quot;"><span class="mpre">System.FilePath</span></span><span class="mpre">          ( (&lt;/&gt;), (&lt;.&gt;), takeExtension,
                                  takeDirectory, replaceExtension,
                                  splitExtension )
import System.IO (</span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="mpre">hClose</span></a><span class="mpre">, </span><a href="GHC.IO.Handle.Text.html#loc_533_1_533_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_533_1_533_10&#39;)"><span class="mpre">hPutStrLn</span></a><span class="mpre">)
import System.Environment (getEnv)
import Distribution.Compat.Exception (</span><a href="Distribution.Compat.Exception.html#loc_17_1_17_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_17_1_17_10&#39;)"><span class="mpre">catchExit</span></a><span class="mpre">, </span><a href="Distribution.Compat.Exception.html#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_14_1_14_8&#39;)"><span class="mpre">catchIO</span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Configuring</span></span><span class="mpre">

</span><a href="#loc_151_1_151_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_1_151_10&#39;)"><span class="mpre">configure</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
          -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre">
          -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="Distribution.Simple.Compiler.html#loc_85_6_85_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_85_6_85_14&#39;)"><span class="hl_tyconref"><span class="mpre">Compiler</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="hl_tyconref"><span class="mpre">Platform</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre">)
</span><a name="loc_151_1_151_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_1_151_10&#39;)"><span class="hl_fundecl"><span class="mpre">configure</span></span></a><span class="mpre"> </span><a name="loc_151_11_151_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_11_151_20&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_151_21_151_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_21_151_27&#39;)"><span class="hl_vardecl"><span class="mpre">hcPath</span></span></a><span class="mpre"> </span><a name="loc_151_28_151_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_28_151_37&#39;)"><span class="hl_vardecl"><span class="mpre">hcPkgPath</span></span></a><span class="mpre"> </span><a name="loc_151_38_151_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_38_151_43&#39;)"><span class="hl_vardecl"><span class="mpre">conf0</span></span></a><span class="mpre"> = do

  (</span><a name="loc_153_4_153_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_4_153_11&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">, </span><a name="loc_153_13_153_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_13_153_23&#39;)"><span class="hl_vardecl"><span class="mpre">ghcVersion</span></span></a><span class="mpre">, </span><a name="loc_153_25_153_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_25_153_30&#39;)"><span class="hl_vardecl"><span class="mpre">conf1</span></span></a><span class="mpre">) &lt;-
    </span><a href="Distribution.Simple.Program.Db.html#loc_399_1_399_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_399_1_399_22&#39;)"><span class="hl_varref"><span class="mpre">requireProgramVersion</span></span></a><span class="mpre"> </span><a href="#loc_151_11_151_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_11_151_20&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProgram</span></span></a><span class="mpre">
      (</span><a href="Distribution.Version.html#loc_182_1_182_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_182_1_182_15&#39;)"><span class="hl_varref"><span class="mpre">orLaterVersion</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre">] []))
      (</span><a href="Distribution.Simple.Program.Db.html#loc_203_1_203_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_203_1_203_21&#39;)"><span class="hl_varref"><span class="mpre">userMaybeSpecifyPath</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;ghc&quot;</span></span><span class="mpre"> </span><a href="#loc_151_21_151_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_21_151_27&#39;)"><span class="hl_varref"><span class="mpre">hcPath</span></span></a><span class="mpre"> </span><a href="#loc_151_38_151_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_38_151_43&#39;)"><span class="hl_varref"><span class="mpre">conf0</span></span></a><span class="mpre">)

  </span><span class="hl_comment"><span class="mpre">-- This is slightly tricky, we have to configure ghc first, then we use the</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- location of ghc to help find ghc-pkg in the case that the user did not</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- specify the location of ghc-pkg directly:</span></span><span class="mpre">
  (</span><a name="loc_161_4_161_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_4_161_14&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkgProg</span></span></a><span class="mpre">, </span><a name="loc_161_16_161_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_16_161_29&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkgVersion</span></span></a><span class="mpre">, </span><a name="loc_161_31_161_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_31_161_36&#39;)"><span class="hl_vardecl"><span class="mpre">conf2</span></span></a><span class="mpre">) &lt;-
    </span><a href="Distribution.Simple.Program.Db.html#loc_399_1_399_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_399_1_399_22&#39;)"><span class="hl_varref"><span class="mpre">requireProgramVersion</span></span></a><span class="mpre"> </span><a href="#loc_151_11_151_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_11_151_20&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 162, srcSpanStartColumn = 37, srcSpanEndLine = 164, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 162, srcSpanStartColumn = 51, srcSpanEndLine = 162, srcSpanEndColumn = 52},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">ghcPkgProgram {
      programFindLocation = guessGhcPkgFromGhcPath ghcProg
    }</span></span><span class="mpre">
    </span><a href="Distribution.Version.html#loc_143_1_143_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Version.html#loc_143_1_143_11&#39;)"><span class="hl_varref"><span class="mpre">anyVersion</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Program.Db.html#loc_203_1_203_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_203_1_203_21&#39;)"><span class="hl_varref"><span class="mpre">userMaybeSpecifyPath</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;ghc-pkg&quot;</span></span><span class="mpre"> </span><a href="#loc_151_28_151_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_28_151_37&#39;)"><span class="hl_varref"><span class="mpre">hcPkgPath</span></span></a><span class="mpre"> </span><a href="#loc_153_25_153_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_25_153_30&#39;)"><span class="hl_varref"><span class="mpre">conf1</span></span></a><span class="mpre">)

  </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_153_13_153_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_13_153_23&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="#loc_161_16_161_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_16_161_29&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgVersion</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
       </span><span class="hl_string"><span class="mpre">&quot;Version mismatch between ghc and ghc-pkg: &quot;</span></span><span class="mpre">
    </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Types.html#loc_115_1_115_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_115_1_115_12&#39;)"><span class="hl_varref"><span class="mpre">programPath</span></span></a><span class="mpre"> </span><a href="#loc_153_4_153_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_4_153_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; is version &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> </span><a href="#loc_153_13_153_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_13_153_23&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; &quot;</span></span><span class="mpre">
    </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Types.html#loc_115_1_115_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_115_1_115_12&#39;)"><span class="hl_varref"><span class="mpre">programPath</span></span></a><span class="mpre"> </span><a href="#loc_161_4_161_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_4_161_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProg</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; is version &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> </span><a href="#loc_161_16_161_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_16_161_29&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgVersion</span></span></a><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- Likewise we try to find the matching hsc2hs program.</span></span><span class="mpre">
  let </span><a name="loc_173_7_173_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_7_173_21&#39;)"><span class="hl_vardecl"><span class="mpre">hsc2hsProgram&#39;</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 173, srcSpanStartColumn = 24, srcSpanEndLine = 175, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 173, srcSpanStartColumn = 38, srcSpanEndLine = 173, srcSpanEndColumn = 39},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">hsc2hsProgram {
                           programFindLocation = guessHsc2hsFromGhcPath ghcProg
                       }</span></span><span class="mpre">
      </span><a name="loc_176_7_176_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_7_176_12&#39;)"><span class="hl_vardecl"><span class="mpre">conf3</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.Db.html#loc_155_1_155_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_155_1_155_16&#39;)"><span class="hl_varref"><span class="mpre">addKnownProgram</span></span></a><span class="mpre"> </span><a href="#loc_173_7_173_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_7_173_21&#39;)"><span class="hl_varref"><span class="mpre">hsc2hsProgram&#39;</span></span></a><span class="mpre"> </span><a href="#loc_161_31_161_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_31_161_36&#39;)"><span class="hl_varref"><span class="mpre">conf2</span></span></a><span class="mpre">

  </span><span class="hl_vardecl"><span class="mpre">languages</span></span><span class="mpre">  &lt;- </span><a href="#loc_381_1_381_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_1_381_13&#39;)"><span class="hl_varref"><span class="mpre">getLanguages</span></span></a><span class="mpre"> </span><a href="#loc_151_11_151_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_11_151_20&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_153_4_153_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_4_153_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
  </span><span class="hl_vardecl"><span class="mpre">extensions</span></span><span class="mpre"> &lt;- </span><a href="#loc_406_1_406_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_1_406_14&#39;)"><span class="hl_varref"><span class="mpre">getExtensions</span></span></a><span class="mpre"> </span><a href="#loc_151_11_151_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_11_151_20&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_153_4_153_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_4_153_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">

  </span><a name="loc_181_3_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_3_181_10&#39;)"><span class="hl_vardecl"><span class="mpre">ghcInfo</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_390_1_390_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_1_390_11&#39;)"><span class="hl_varref"><span class="mpre">getGhcInfo</span></span></a><span class="mpre"> </span><a href="#loc_151_11_151_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_11_151_20&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_153_4_153_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_4_153_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">

  let </span><a name="loc_183_7_183_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_183_7_183_11&#39;)"><span class="hl_vardecl"><span class="mpre">comp</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 183, srcSpanStartColumn = 14, srcSpanEndLine = 187, srcSpanEndColumn = 8}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 183, srcSpanStartColumn = 23, srcSpanEndLine = 183, srcSpanEndColumn = 24},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">Compiler {
        compilerId             = CompilerId GHC ghcVersion,
        compilerLanguages      = languages,
        compilerExtensions     = extensions
      }</span></span><span class="mpre">
      </span><a name="loc_188_7_188_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_7_188_19&#39;)"><span class="hl_vardecl"><span class="mpre">compPlatform</span></span></a><span class="mpre"> = </span><a href="#loc_193_1_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_1_193_15&#39;)"><span class="hl_varref"><span class="mpre">targetPlatform</span></span></a><span class="mpre"> </span><a href="#loc_181_3_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_3_181_10&#39;)"><span class="hl_varref"><span class="mpre">ghcInfo</span></span></a><span class="mpre">
      </span><a name="loc_189_7_189_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_7_189_12&#39;)"><span class="hl_vardecl"><span class="mpre">conf4</span></span></a><span class="mpre"> = </span><a href="#loc_269_1_269_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_1_269_19&#39;)"><span class="hl_varref"><span class="mpre">configureToolchain</span></span></a><span class="mpre"> </span><a href="#loc_153_4_153_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_4_153_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre"> </span><a href="#loc_181_3_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_3_181_10&#39;)"><span class="hl_varref"><span class="mpre">ghcInfo</span></span></a><span class="mpre"> </span><a href="#loc_176_7_176_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_7_176_12&#39;)"><span class="hl_varref"><span class="mpre">conf3</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- configure gcc and ld</span></span><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_183_7_183_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_183_7_183_11&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre">, </span><a href="#loc_188_7_188_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_7_188_19&#39;)"><span class="hl_varref"><span class="mpre">compPlatform</span></span></a><span class="mpre">, </span><a href="#loc_189_7_189_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_7_189_12&#39;)"><span class="hl_varref"><span class="mpre">conf4</span></span></a><span class="mpre">)

</span><a href="#loc_193_1_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_1_193_15&#39;)"><span class="mpre">targetPlatform</span></a><span class="mpre"> :: [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)] -&gt; </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><a href="Distribution.System.html#loc_164_6_164_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_6_164_14&#39;)"><span class="hl_tyconref"><span class="mpre">Platform</span></span></a><span class="mpre">
</span><a name="loc_193_1_193_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_1_193_15&#39;)"><span class="hl_fundecl"><span class="mpre">targetPlatform</span></span></a><span class="mpre"> </span><a name="loc_193_16_193_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_16_193_23&#39;)"><span class="hl_vardecl"><span class="mpre">ghcInfo</span></span></a><span class="mpre"> = </span><a href="Distribution.System.html#loc_191_1_191_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_191_1_191_19&#39;)"><span class="hl_varref"><span class="mpre">platformFromTriple</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">=&lt;&lt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">lookup</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Target platform&quot;</span></span><span class="mpre"> </span><a href="#loc_193_16_193_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_16_193_23&#39;)"><span class="hl_varref"><span class="mpre">ghcInfo</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Given something like /usr/local/bin/ghc-6.6.1(.exe) we try and find</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the corresponding tool; e.g. if the tool is ghc-pkg, we try looking</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- for a versioned or unversioned ghc-pkg in the same dir, that is:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/ghc-pkg-ghc-6.6.1(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/ghc-pkg-6.6.1(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/ghc-pkg(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_206_1_206_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_1_206_21&#39;)"><span class="mpre">guessToolFromGhcPath</span></a><span class="mpre"> :: </span><a href="Distribution.Simple.Program.Types.html#loc_46_6_46_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_46_6_46_13&#39;)"><span class="hl_tyconref"><span class="mpre">Program</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre">
                     -&gt; </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramSearchPath</span></span><span class="mpre">
                     -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">)
</span><a name="loc_206_1_206_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_1_206_21&#39;)"><span class="hl_fundecl"><span class="mpre">guessToolFromGhcPath</span></span></a><span class="mpre"> </span><a name="loc_206_22_206_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_22_206_26&#39;)"><span class="hl_vardecl"><span class="mpre">tool</span></span></a><span class="mpre"> </span><a name="loc_206_27_206_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_27_206_34&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre"> </span><a name="loc_206_35_206_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_35_206_44&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_206_45_206_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_45_206_55&#39;)"><span class="hl_vardecl"><span class="mpre">searchpath</span></span></a><span class="mpre">
  = do let </span><a name="loc_207_12_207_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_12_207_20&#39;)"><span class="hl_vardecl"><span class="mpre">toolname</span></span></a><span class="mpre">          = </span><span class="hl_varref"><span class="mpre">programName</span></span><span class="mpre"> </span><a href="#loc_206_22_206_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_22_206_26&#39;)"><span class="hl_varref"><span class="mpre">tool</span></span></a><span class="mpre">
           </span><a name="loc_208_12_208_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_12_208_16&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre">              = </span><a href="Distribution.Simple.Program.Types.html#loc_115_1_115_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_115_1_115_12&#39;)"><span class="hl_varref"><span class="mpre">programPath</span></span></a><span class="mpre"> </span><a href="#loc_206_27_206_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_27_206_34&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
           </span><a name="loc_209_12_209_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_12_209_15&#39;)"><span class="hl_vardecl"><span class="mpre">dir</span></span></a><span class="mpre">               = </span><span class="hl_varref"><span class="mpre">takeDirectory</span></span><span class="mpre"> </span><a href="#loc_208_12_208_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_12_208_16&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre">
           </span><a name="loc_210_12_210_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_12_210_25&#39;)"><span class="hl_vardecl"><span class="mpre">versionSuffix</span></span></a><span class="mpre">     = </span><a href="#loc_231_9_231_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_9_231_26&#39;)"><span class="hl_varref"><span class="mpre">takeVersionSuffix</span></span></a><span class="mpre"> (</span><a href="#loc_235_9_235_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_9_235_25&#39;)"><span class="hl_varref"><span class="mpre">dropExeExtension</span></span></a><span class="mpre"> </span><a href="#loc_208_12_208_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_208_12_208_16&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre">)
           </span><a name="loc_211_12_211_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_12_211_23&#39;)"><span class="hl_vardecl"><span class="mpre">guessNormal</span></span></a><span class="mpre">       = </span><a href="#loc_209_12_209_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_12_209_15&#39;)"><span class="hl_varref"><span class="mpre">dir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_207_12_207_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_12_207_20&#39;)"><span class="hl_varref"><span class="mpre">toolname</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">
           </span><a name="loc_212_12_212_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_12_212_29&#39;)"><span class="hl_vardecl"><span class="mpre">guessGhcVersioned</span></span></a><span class="mpre"> = </span><a href="#loc_209_12_209_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_12_209_15&#39;)"><span class="hl_varref"><span class="mpre">dir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> (</span><a href="#loc_207_12_207_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_12_207_20&#39;)"><span class="hl_varref"><span class="mpre">toolname</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-ghc&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_210_12_210_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_12_210_25&#39;)"><span class="hl_varref"><span class="mpre">versionSuffix</span></span></a><span class="mpre">)
                               </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">
           </span><a name="loc_214_12_214_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_12_214_26&#39;)"><span class="hl_vardecl"><span class="mpre">guessVersioned</span></span></a><span class="mpre">    = </span><a href="#loc_209_12_209_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_12_209_15&#39;)"><span class="hl_varref"><span class="mpre">dir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> (</span><a href="#loc_207_12_207_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_12_207_20&#39;)"><span class="hl_varref"><span class="mpre">toolname</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_210_12_210_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_12_210_25&#39;)"><span class="hl_varref"><span class="mpre">versionSuffix</span></span></a><span class="mpre">)
                               </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">
           </span><a name="loc_216_12_216_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_12_216_19&#39;)"><span class="hl_vardecl"><span class="mpre">guesses</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> </span><a href="#loc_210_12_210_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_210_12_210_25&#39;)"><span class="hl_varref"><span class="mpre">versionSuffix</span></span></a><span class="mpre"> = [</span><a href="#loc_211_12_211_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_12_211_23&#39;)"><span class="hl_varref"><span class="mpre">guessNormal</span></span></a><span class="mpre">]
                   | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">          = [</span><a href="#loc_212_12_212_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_12_212_29&#39;)"><span class="hl_varref"><span class="mpre">guessGhcVersioned</span></span></a><span class="mpre">,
                                           </span><a href="#loc_214_12_214_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_214_12_214_26&#39;)"><span class="hl_varref"><span class="mpre">guessVersioned</span></span></a><span class="mpre">,
                                           </span><a href="#loc_211_12_211_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_12_211_23&#39;)"><span class="hl_varref"><span class="mpre">guessNormal</span></span></a><span class="mpre">]
       </span><a href="Distribution.Simple.Utils.html#loc_305_1_305_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_305_1_305_5&#39;)"><span class="hl_varref"><span class="mpre">info</span></span></a><span class="mpre"> </span><a href="#loc_206_35_206_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_35_206_44&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;looking for tool &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_207_12_207_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_12_207_20&#39;)"><span class="hl_varref"><span class="mpre">toolname</span></span></a><span class="mpre">
         </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; near compiler in &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_209_12_209_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_209_12_209_15&#39;)"><span class="hl_varref"><span class="mpre">dir</span></span></a><span class="mpre">
       </span><a name="loc_222_8_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_8_222_14&#39;)"><span class="hl_vardecl"><span class="mpre">exists</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">mapM</span></span><span class="mpre"> </span><a href="System.Directory.html#loc_726_1_726_14" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_726_1_726_14&#39;)"><span class="hl_varref"><span class="mpre">doesFileExist</span></span></a><span class="mpre"> </span><a href="#loc_216_12_216_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_12_216_19&#39;)"><span class="hl_varref"><span class="mpre">guesses</span></span></a><span class="mpre">
       case [ </span><a href="#loc_223_23_223_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_223_23_223_27&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> | (</span><a name="loc_223_23_223_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_223_23_223_27&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> </span><a href="#loc_216_12_216_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_12_216_19&#39;)"><span class="hl_varref"><span class="mpre">guesses</span></span></a><span class="mpre"> </span><a href="#loc_222_8_222_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_8_222_14&#39;)"><span class="hl_varref"><span class="mpre">exists</span></span></a><span class="mpre"> ] of
                   </span><span class="hl_comment"><span class="mpre">-- If we can&#39;t find it near ghc, fall back to the usual</span></span><span class="mpre">
                   </span><span class="hl_comment"><span class="mpre">-- method.</span></span><span class="mpre">
         []     -&gt; </span><span class="hl_varref"><span class="mpre">programFindLocation</span></span><span class="mpre"> </span><a href="#loc_206_22_206_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_22_206_26&#39;)"><span class="hl_varref"><span class="mpre">tool</span></span></a><span class="mpre"> </span><a href="#loc_206_35_206_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_35_206_44&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_206_45_206_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_45_206_55&#39;)"><span class="hl_varref"><span class="mpre">searchpath</span></span></a><span class="mpre">
         (</span><a name="loc_227_11_227_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_13&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_) -&gt; do </span><a href="Distribution.Simple.Utils.html#loc_305_1_305_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_305_1_305_5&#39;)"><span class="hl_varref"><span class="mpre">info</span></span></a><span class="mpre"> </span><a href="#loc_206_35_206_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_35_206_44&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;found &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_207_12_207_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_12_207_20&#39;)"><span class="hl_varref"><span class="mpre">toolname</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; in &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_227_11_227_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_13&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre">
                      </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_227_11_227_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_11_227_13&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre">)

  where </span><a href="#loc_231_9_231_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_9_231_26&#39;)"><span class="mpre">takeVersionSuffix</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
        </span><a name="loc_231_9_231_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_9_231_26&#39;)"><span class="hl_vardecl"><span class="mpre">takeVersionSuffix</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">takeWhile</span></span><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">`elem `</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;0123456789.-&quot;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre">
                            </span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre">

        </span><a href="#loc_235_9_235_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_9_235_25&#39;)"><span class="mpre">dropExeExtension</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
        </span><a name="loc_235_9_235_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_9_235_25&#39;)"><span class="hl_fundecl"><span class="mpre">dropExeExtension</span></span></a><span class="mpre"> </span><a name="loc_235_26_235_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_26_235_34&#39;)"><span class="hl_vardecl"><span class="mpre">filepath</span></span></a><span class="mpre"> =
          case </span><span class="hl_varref"><span class="mpre">splitExtension</span></span><span class="mpre"> </span><a href="#loc_235_26_235_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_26_235_34&#39;)"><span class="hl_varref"><span class="mpre">filepath</span></span></a><span class="mpre"> of
            (</span><a name="loc_237_14_237_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_14_237_23&#39;)"><span class="hl_vardecl"><span class="mpre">filepath&#39;</span></span></a><span class="mpre">, </span><a name="loc_237_25_237_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_34&#39;)"><span class="hl_vardecl"><span class="mpre">extension</span></span></a><span class="mpre">) | </span><a href="#loc_237_25_237_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_25_237_34&#39;)"><span class="hl_varref"><span class="mpre">extension</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_237_14_237_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_14_237_23&#39;)"><span class="hl_varref"><span class="mpre">filepath&#39;</span></span></a><span class="mpre">
                                   | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                 -&gt; </span><a href="#loc_235_26_235_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_26_235_34&#39;)"><span class="hl_varref"><span class="mpre">filepath</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Given something like /usr/local/bin/ghc-6.6.1(.exe) we try and find a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- corresponding ghc-pkg, we try looking for both a versioned and unversioned</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ghc-pkg in the same dir, that is:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/ghc-pkg-ghc-6.6.1(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/ghc-pkg-6.6.1(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/ghc-pkg(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_250_1_250_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_1_250_23&#39;)"><span class="mpre">guessGhcPkgFromGhcPath</span></a><span class="mpre"> :: </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre">
                       -&gt; </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramSearchPath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">)
</span><a name="loc_250_1_250_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_250_1_250_23&#39;)"><span class="hl_vardecl"><span class="mpre">guessGhcPkgFromGhcPath</span></span></a><span class="mpre"> = </span><a href="#loc_206_1_206_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_1_206_21&#39;)"><span class="hl_varref"><span class="mpre">guessToolFromGhcPath</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProgram</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Given something like /usr/local/bin/ghc-6.6.1(.exe) we try and find a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- corresponding hsc2hs, we try looking for both a versioned and unversioned</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- hsc2hs in the same dir, that is:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/hsc2hs-ghc-6.6.1(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/hsc2hs-6.6.1(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; /usr/local/bin/hsc2hs(.exe)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_262_1_262_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_1_262_23&#39;)"><span class="mpre">guessHsc2hsFromGhcPath</span></a><span class="mpre"> :: </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre">
                       -&gt; </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramSearchPath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">)
</span><a name="loc_262_1_262_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_1_262_23&#39;)"><span class="hl_vardecl"><span class="mpre">guessHsc2hsFromGhcPath</span></span></a><span class="mpre"> = </span><a href="#loc_206_1_206_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_1_206_21&#39;)"><span class="hl_varref"><span class="mpre">guessToolFromGhcPath</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_213_1_213_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_213_1_213_14&#39;)"><span class="hl_varref"><span class="mpre">hsc2hsProgram</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Adjust the way we find and configure gcc and ld</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_269_1_269_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_1_269_19&#39;)"><span class="mpre">configureToolchain</span></a><span class="mpre"> :: </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)]
                                        -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre">
                                        -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre">
</span><a name="loc_269_1_269_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_1_269_19&#39;)"><span class="hl_fundecl"><span class="mpre">configureToolchain</span></span></a><span class="mpre"> </span><a name="loc_269_20_269_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_20_269_27&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre"> </span><a name="loc_269_28_269_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_28_269_35&#39;)"><span class="hl_vardecl"><span class="mpre">ghcInfo</span></span></a><span class="mpre"> =
    </span><a href="Distribution.Simple.Program.Db.html#loc_155_1_155_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_155_1_155_16&#39;)"><span class="hl_varref"><span class="mpre">addKnownProgram</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 270, srcSpanStartColumn = 21, srcSpanEndLine = 273, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 270, srcSpanStartColumn = 32, srcSpanEndLine = 270, srcSpanEndColumn = 33},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">gccProgram {
      programFindLocation = findProg gccProgram extraGccPath,
      programPostConf     = configureGcc
    }</span></span><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Db.html#loc_155_1_155_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_155_1_155_16&#39;)"><span class="hl_varref"><span class="mpre">addKnownProgram</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 274, srcSpanStartColumn = 21, srcSpanEndLine = 277, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 274, srcSpanStartColumn = 31, srcSpanEndLine = 274, srcSpanEndColumn = 32},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">ldProgram {
      programFindLocation = findProg ldProgram extraLdPath,
      programPostConf     = configureLd
    }</span></span><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Db.html#loc_155_1_155_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_155_1_155_16&#39;)"><span class="hl_varref"><span class="mpre">addKnownProgram</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 278, srcSpanStartColumn = 21, srcSpanEndLine = 280, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 278, srcSpanStartColumn = 31, srcSpanEndLine = 278, srcSpanEndColumn = 32},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">arProgram {
      programFindLocation = findProg arProgram extraArPath
    }</span></span><span class="mpre">
  </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Db.html#loc_155_1_155_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_155_1_155_16&#39;)"><span class="hl_varref"><span class="mpre">addKnownProgram</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 281, srcSpanStartColumn = 21, srcSpanEndLine = 283, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 281, srcSpanStartColumn = 34, srcSpanEndLine = 281, srcSpanEndColumn = 35},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">stripProgram {
      programFindLocation = findProg stripProgram extraStripPath
    }</span></span><span class="mpre">
  where
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_285_10_285_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_10_285_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">programVersion</span></span><span class="mpre"> </span><a href="#loc_269_20_269_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_20_269_27&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
    </span><a name="loc_286_5_286_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_5_286_16&#39;)"><span class="hl_vardecl"><span class="mpre">compilerDir</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">takeDirectory</span></span><span class="mpre"> (</span><a href="Distribution.Simple.Program.Types.html#loc_115_1_115_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_115_1_115_12&#39;)"><span class="hl_varref"><span class="mpre">programPath</span></span></a><span class="mpre"> </span><a href="#loc_269_20_269_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_20_269_27&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">)
    </span><a name="loc_287_5_287_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_12&#39;)"><span class="hl_vardecl"><span class="mpre">baseDir</span></span></a><span class="mpre">     = </span><span class="hl_varref"><span class="mpre">takeDirectory</span></span><span class="mpre"> </span><a href="#loc_286_5_286_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_5_286_16&#39;)"><span class="hl_varref"><span class="mpre">compilerDir</span></span></a><span class="mpre">
    </span><a name="loc_288_5_288_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_5_288_16&#39;)"><span class="hl_vardecl"><span class="mpre">mingwBinDir</span></span></a><span class="mpre"> = </span><a href="#loc_287_5_287_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_12&#39;)"><span class="hl_varref"><span class="mpre">baseDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;mingw&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;bin&quot;</span></span><span class="mpre">
    </span><a name="loc_289_5_289_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_289_5_289_11&#39;)"><span class="hl_vardecl"><span class="mpre">libDir</span></span></a><span class="mpre">      = </span><a href="#loc_287_5_287_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_12&#39;)"><span class="hl_varref"><span class="mpre">baseDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;gcc-lib&quot;</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">includeDir</span></span><span class="mpre">  = </span><a href="#loc_287_5_287_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_12&#39;)"><span class="hl_varref"><span class="mpre">baseDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;include&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;mingw&quot;</span></span><span class="mpre">
    </span><a name="loc_291_5_291_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_5_291_14&#39;)"><span class="hl_vardecl"><span class="mpre">isWindows</span></span></a><span class="mpre">   = case </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> of </span><a href="Distribution.System.html#loc_66_19_66_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_19_66_26&#39;)"><span class="hl_conref"><span class="mpre">Windows</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">; _ -&gt; </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a name="loc_292_5_292_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_5_292_14&#39;)"><span class="hl_vardecl"><span class="mpre">binPrefix</span></span></a><span class="mpre">   = </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- on Windows finding and configuring ghc&#39;s gcc &amp; binutils is a bit special</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">extraGccPath</span></span><span class="mpre">
      | </span><a href="#loc_285_10_285_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_10_285_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">12</span></span><span class="mpre">] [] = </span><a href="#loc_288_5_288_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_5_288_16&#39;)"><span class="hl_varref"><span class="mpre">mingwBinDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_292_5_292_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_5_292_14&#39;)"><span class="hl_varref"><span class="mpre">binPrefix</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;gcc.exe&quot;</span></span><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                       = </span><a href="#loc_287_5_287_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_5_287_12&#39;)"><span class="hl_varref"><span class="mpre">baseDir</span></span></a><span class="mpre">     </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;gcc.exe&quot;</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">extraLdPath</span></span><span class="mpre">
      | </span><a href="#loc_285_10_285_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_10_285_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">12</span></span><span class="mpre">] [] = </span><a href="#loc_288_5_288_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_5_288_16&#39;)"><span class="hl_varref"><span class="mpre">mingwBinDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_292_5_292_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_5_292_14&#39;)"><span class="hl_varref"><span class="mpre">binPrefix</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;ld.exe&quot;</span></span><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                       = </span><a href="#loc_289_5_289_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_289_5_289_11&#39;)"><span class="hl_varref"><span class="mpre">libDir</span></span></a><span class="mpre">      </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;ld.exe&quot;</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">extraArPath</span></span><span class="mpre">
      | </span><a href="#loc_285_10_285_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_10_285_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">12</span></span><span class="mpre">] [] = </span><a href="#loc_288_5_288_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_5_288_16&#39;)"><span class="hl_varref"><span class="mpre">mingwBinDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_292_5_292_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_5_292_14&#39;)"><span class="hl_varref"><span class="mpre">binPrefix</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;ar.exe&quot;</span></span><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                       = </span><a href="#loc_289_5_289_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_289_5_289_11&#39;)"><span class="hl_varref"><span class="mpre">libDir</span></span></a><span class="mpre">      </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;ar.exe&quot;</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">extraStripPath</span></span><span class="mpre">
      | </span><a href="#loc_285_10_285_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_10_285_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">12</span></span><span class="mpre">] [] = </span><a href="#loc_288_5_288_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_5_288_16&#39;)"><span class="hl_varref"><span class="mpre">mingwBinDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_292_5_292_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_292_5_292_14&#39;)"><span class="hl_varref"><span class="mpre">binPrefix</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
                                          </span><span class="hl_string"><span class="mpre">&quot;strip.exe&quot;</span></span><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                       = </span><a href="#loc_289_5_289_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_289_5_289_11&#39;)"><span class="hl_varref"><span class="mpre">libDir</span></span></a><span class="mpre">      </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;strip.exe&quot;</span></span><span class="mpre">

    </span><a href="#loc_311_5_311_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_5_311_13&#39;)"><span class="mpre">findProg</span></a><span class="mpre"> :: </span><a href="Distribution.Simple.Program.Types.html#loc_46_6_46_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_46_6_46_13&#39;)"><span class="hl_tyconref"><span class="mpre">Program</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
             -&gt; </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramSearchPath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">)
    </span><a name="loc_311_5_311_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_5_311_13&#39;)"><span class="hl_fundecl"><span class="mpre">findProg</span></span></a><span class="mpre"> </span><a name="loc_311_14_311_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_14_311_18&#39;)"><span class="hl_vardecl"><span class="mpre">prog</span></span></a><span class="mpre"> </span><a name="loc_311_19_311_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_19_311_28&#39;)"><span class="hl_vardecl"><span class="mpre">extraPath</span></span></a><span class="mpre"> </span><a name="loc_311_29_311_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_29_311_30&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> </span><a name="loc_311_31_311_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_31_311_41&#39;)"><span class="hl_vardecl"><span class="mpre">searchpath</span></span></a><span class="mpre"> =
        </span><span class="hl_varref"><span class="mpre">programFindLocation</span></span><span class="mpre"> </span><a href="#loc_311_14_311_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_14_311_18&#39;)"><span class="hl_varref"><span class="mpre">prog</span></span></a><span class="mpre"> </span><a href="#loc_311_29_311_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_29_311_30&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre"> </span><a href="#loc_314_9_314_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_9_314_20&#39;)"><span class="hl_varref"><span class="mpre">searchpath&#39;</span></span></a><span class="mpre">
      where
        </span><a name="loc_314_9_314_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_9_314_20&#39;)"><span class="hl_vardecl"><span class="mpre">searchpath&#39;</span></span></a><span class="mpre"> | </span><a href="#loc_291_5_291_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_5_291_14&#39;)"><span class="hl_varref"><span class="mpre">isWindows</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">ProgramSearchPathDir</span></span><span class="mpre"> </span><a href="#loc_311_19_311_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_19_311_28&#39;)"><span class="hl_varref"><span class="mpre">extraPath</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_311_31_311_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_31_311_41&#39;)"><span class="hl_varref"><span class="mpre">searchpath</span></span></a><span class="mpre">
                    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_311_31_311_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_311_31_311_41&#39;)"><span class="hl_varref"><span class="mpre">searchpath</span></span></a><span class="mpre">

    </span><span class="hl_vardecl"><span class="mpre">ccFlags</span></span><span class="mpre">        = </span><a href="#loc_321_5_321_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_5_321_13&#39;)"><span class="hl_varref"><span class="mpre">getFlags</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;C compiler flags&quot;</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">gccLinkerFlags</span></span><span class="mpre"> = </span><a href="#loc_321_5_321_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_5_321_13&#39;)"><span class="hl_varref"><span class="mpre">getFlags</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Gcc Linker flags&quot;</span></span><span class="mpre">
    </span><span class="hl_vardecl"><span class="mpre">ldLinkerFlags</span></span><span class="mpre">  = </span><a href="#loc_321_5_321_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_5_321_13&#39;)"><span class="hl_varref"><span class="mpre">getFlags</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Ld Linker flags&quot;</span></span><span class="mpre">

    </span><a name="loc_321_5_321_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_5_321_13&#39;)"><span class="hl_fundecl"><span class="mpre">getFlags</span></span></a><span class="mpre"> </span><a name="loc_321_14_321_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_14_321_17&#39;)"><span class="hl_vardecl"><span class="mpre">key</span></span></a><span class="mpre"> = case </span><span class="hl_varref"><span class="mpre">lookup</span></span><span class="mpre"> </span><a href="#loc_321_14_321_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_14_321_17&#39;)"><span class="hl_varref"><span class="mpre">key</span></span></a><span class="mpre"> </span><a href="#loc_269_28_269_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_28_269_35&#39;)"><span class="hl_varref"><span class="mpre">ghcInfo</span></span></a><span class="mpre"> of
                   </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; []
                   </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_323_25_323_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_323_25_323_30&#39;)"><span class="hl_vardecl"><span class="mpre">flags</span></span></a><span class="mpre"> -&gt;
                       case </span><span class="hl_varref"><span class="mpre">reads</span></span><span class="mpre"> </span><a href="#loc_323_25_323_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_323_25_323_30&#39;)"><span class="hl_varref"><span class="mpre">flags</span></span></a><span class="mpre"> of
                       [(</span><a name="loc_325_26_325_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_26_325_30&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)] -&gt; </span><a href="#loc_325_26_325_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_325_26_325_30&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">
                       _ -&gt; [] </span><span class="hl_comment"><span class="mpre">-- XXX Should should be an error really</span></span><span class="mpre">

    </span><a href="#loc_329_5_329_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_329_5_329_17&#39;)"><span class="mpre">configureGcc</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre">
    </span><a name="loc_329_5_329_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_329_5_329_17&#39;)"><span class="hl_fundecl"><span class="mpre">configureGcc</span></span></a><span class="mpre"> </span><a name="loc_329_18_329_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_329_18_329_19&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> </span><a name="loc_329_20_329_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_329_20_329_27&#39;)"><span class="hl_vardecl"><span class="mpre">gccProg</span></span></a><span class="mpre"> = do
      </span><span class="hl_vardecl"><span class="mpre">gccProg&#39;</span></span><span class="mpre"> &lt;- </span><a href="#loc_337_5_337_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_337_5_337_18&#39;)"><span class="hl_varref"><span class="mpre">configureGcc&#39;</span></span></a><span class="mpre"> </span><a href="#loc_329_18_329_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_329_18_329_19&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre"> </span><a href="#loc_329_20_329_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_329_20_329_27&#39;)"><span class="hl_varref"><span class="mpre">gccProg</span></span></a><span class="mpre">
      </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 331, srcSpanStartColumn = 14, srcSpanEndLine = 334, srcSpanEndColumn = 8}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 331, srcSpanStartColumn = 23, srcSpanEndLine = 331, srcSpanEndColumn = 24},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">gccProg&#39; {
        programDefaultArgs = programDefaultArgs gccProg&#39;
                             ++ ccFlags ++ gccLinkerFlags
      }</span></span><span class="mpre">

    </span><a href="#loc_337_5_337_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_337_5_337_18&#39;)"><span class="mpre">configureGcc&#39;</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre">
    </span><a name="loc_337_5_337_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_337_5_337_18&#39;)"><span class="hl_vardecl"><span class="mpre">configureGcc&#39;</span></span></a><span class="mpre">
      | </span><a href="#loc_291_5_291_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_291_5_291_14&#39;)"><span class="hl_varref"><span class="mpre">isWindows</span></span></a><span class="mpre"> = \_ </span><a name="loc_338_24_338_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_338_24_338_31&#39;)"><span class="hl_vardecl"><span class="mpre">gccProg</span></span></a><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">programLocation</span></span><span class="mpre"> </span><a href="#loc_338_24_338_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_338_24_338_31&#39;)"><span class="hl_varref"><span class="mpre">gccProg</span></span></a><span class="mpre"> of
          </span><span class="hl_comment"><span class="mpre">-- if it&#39;s found on system then it means we&#39;re using the result</span></span><span class="mpre">
          </span><span class="hl_comment"><span class="mpre">-- of programFindLocation above rather than a user-supplied path</span></span><span class="mpre">
          </span><span class="hl_comment"><span class="mpre">-- Pre GHC 6.12, that meant we should add these flags to tell</span></span><span class="mpre">
          </span><span class="hl_comment"><span class="mpre">-- ghc&#39;s gcc where it lives and thus where gcc can find its</span></span><span class="mpre">
          </span><span class="hl_comment"><span class="mpre">-- various files:</span></span><span class="mpre">
          </span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 344, srcSpanStartColumn = 11, srcSpanEndLine = 344, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 344, srcSpanStartColumn = 25, srcSpanEndLine = 344, srcSpanEndColumn = 26},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs"><span class="mpre">FoundOnSystem {}</span></span><span class="mpre">
           | </span><a href="#loc_285_10_285_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_285_10_285_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">11</span></span><span class="mpre">] [] -&gt;
               </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 346, srcSpanStartColumn = 23, srcSpanEndLine = 347, srcSpanEndColumn = 76}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 346, srcSpanStartColumn = 31, srcSpanEndLine = 346, srcSpanEndColumn = 32},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">gccProg { programDefaultArgs = [&quot;-B&quot; ++ libDir,
                                                      &quot;-I&quot; ++ includeDir] }</span></span><span class="mpre">
          _ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_338_24_338_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_338_24_338_31&#39;)"><span class="hl_varref"><span class="mpre">gccProg</span></span></a><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = \_ </span><a name="loc_349_24_349_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_24_349_31&#39;)"><span class="hl_vardecl"><span class="mpre">gccProg</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_349_24_349_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_24_349_31&#39;)"><span class="hl_varref"><span class="mpre">gccProg</span></span></a><span class="mpre">

    </span><a href="#loc_352_5_352_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_352_5_352_16&#39;)"><span class="mpre">configureLd</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre">
    </span><a name="loc_352_5_352_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_352_5_352_16&#39;)"><span class="hl_fundecl"><span class="mpre">configureLd</span></span></a><span class="mpre"> </span><a name="loc_352_17_352_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_352_17_352_18&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> </span><a name="loc_352_19_352_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_352_19_352_25&#39;)"><span class="hl_vardecl"><span class="mpre">ldProg</span></span></a><span class="mpre"> = do
      </span><span class="hl_vardecl"><span class="mpre">ldProg&#39;</span></span><span class="mpre"> &lt;- </span><a href="#loc_360_5_360_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_5_360_17&#39;)"><span class="hl_varref"><span class="mpre">configureLd&#39;</span></span></a><span class="mpre"> </span><a href="#loc_352_17_352_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_352_17_352_18&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre"> </span><a href="#loc_352_19_352_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_352_19_352_25&#39;)"><span class="hl_varref"><span class="mpre">ldProg</span></span></a><span class="mpre">
      </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 354, srcSpanStartColumn = 14, srcSpanEndLine = 356, srcSpanEndColumn = 8}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 354, srcSpanStartColumn = 22, srcSpanEndLine = 354, srcSpanEndColumn = 23},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">ldProg&#39; {
        programDefaultArgs = programDefaultArgs ldProg&#39; ++ ldLinkerFlags
      }</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- we need to find out if ld supports the -x flag</span></span><span class="mpre">
    </span><a href="#loc_360_5_360_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_5_360_17&#39;)"><span class="mpre">configureLd&#39;</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre">
    </span><a name="loc_360_5_360_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_5_360_17&#39;)"><span class="hl_fundecl"><span class="mpre">configureLd&#39;</span></span></a><span class="mpre"> </span><a name="loc_360_18_360_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_18_360_27&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_360_28_360_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_28_360_34&#39;)"><span class="hl_vardecl"><span class="mpre">ldProg</span></span></a><span class="mpre"> = do
      </span><a name="loc_361_7_361_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_7_361_14&#39;)"><span class="hl_vardecl"><span class="mpre">tempDir</span></span></a><span class="mpre"> &lt;- </span><a href="System.Directory.html#loc_906_1_906_22" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_906_1_906_22&#39;)"><span class="hl_varref"><span class="mpre">getTemporaryDirectory</span></span></a><span class="mpre">
      </span><a name="loc_362_7_362_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_7_362_10&#39;)"><span class="hl_vardecl"><span class="mpre">ldx</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.Simple.Utils.html#loc_1008_1_1008_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1008_1_1008_13&#39;)"><span class="hl_varref"><span class="mpre">withTempFile</span></span></a><span class="mpre"> </span><a href="#loc_361_7_361_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_7_361_14&#39;)"><span class="hl_varref"><span class="mpre">tempDir</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;.c&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_362_43_362_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_43_362_52&#39;)"><span class="hl_vardecl"><span class="mpre">testcfile</span></span></a><span class="mpre"> </span><a name="loc_362_53_362_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_53_362_61&#39;)"><span class="hl_vardecl"><span class="mpre">testchnd</span></span></a><span class="mpre"> -&gt;
             </span><a href="Distribution.Simple.Utils.html#loc_1008_1_1008_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1008_1_1008_13&#39;)"><span class="hl_varref"><span class="mpre">withTempFile</span></span></a><span class="mpre"> </span><a href="#loc_361_7_361_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_7_361_14&#39;)"><span class="hl_varref"><span class="mpre">tempDir</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;.o&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_363_43_363_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_43_363_52&#39;)"><span class="hl_vardecl"><span class="mpre">testofile</span></span></a><span class="mpre"> </span><a name="loc_363_53_363_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_53_363_61&#39;)"><span class="hl_vardecl"><span class="mpre">testohnd</span></span></a><span class="mpre"> -&gt; do
               </span><a href="GHC.IO.Handle.Text.html#loc_533_1_533_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_533_1_533_10&#39;)"><span class="hl_varref"><span class="mpre">hPutStrLn</span></span></a><span class="mpre"> </span><a href="#loc_362_53_362_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_53_362_61&#39;)"><span class="hl_varref"><span class="mpre">testchnd</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;int foo() { return 0; }&quot;</span></span><span class="mpre">
               </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_362_53_362_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_53_362_61&#39;)"><span class="hl_varref"><span class="mpre">testchnd</span></span></a><span class="mpre">; </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_363_53_363_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_53_363_61&#39;)"><span class="hl_varref"><span class="mpre">testohnd</span></span></a><span class="mpre">
               </span><a href="Distribution.Simple.Program.html#loc_197_1_197_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_197_1_197_17&#39;)"><span class="hl_varref"><span class="mpre">rawSystemProgram</span></span></a><span class="mpre"> </span><a href="#loc_360_18_360_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_18_360_27&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_269_20_269_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_269_20_269_27&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;-c&quot;</span></span><span class="mpre">, </span><a href="#loc_362_43_362_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_43_362_52&#39;)"><span class="hl_varref"><span class="mpre">testcfile</span></span></a><span class="mpre">,
                                                   </span><span class="hl_string"><span class="mpre">&quot;-o&quot;</span></span><span class="mpre">, </span><a href="#loc_363_43_363_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_43_363_52&#39;)"><span class="hl_varref"><span class="mpre">testofile</span></span></a><span class="mpre">]
               </span><a href="Distribution.Simple.Utils.html#loc_1008_1_1008_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1008_1_1008_13&#39;)"><span class="hl_varref"><span class="mpre">withTempFile</span></span></a><span class="mpre"> </span><a href="#loc_361_7_361_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_361_7_361_14&#39;)"><span class="hl_varref"><span class="mpre">tempDir</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;.o&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_368_45_368_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_368_45_368_55&#39;)"><span class="hl_vardecl"><span class="mpre">testofile&#39;</span></span></a><span class="mpre"> </span><a name="loc_368_56_368_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_368_56_368_65&#39;)"><span class="hl_vardecl"><span class="mpre">testohnd&#39;</span></span></a><span class="mpre"> -&gt;
                 do
                   </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_368_56_368_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_368_56_368_65&#39;)"><span class="hl_varref"><span class="mpre">testohnd&#39;</span></span></a><span class="mpre">
                   _ &lt;- </span><a href="Distribution.Simple.Program.html#loc_201_1_201_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_201_1_201_23&#39;)"><span class="hl_varref"><span class="mpre">rawSystemProgramStdout</span></span></a><span class="mpre"> </span><a href="#loc_360_18_360_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_18_360_27&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_360_28_360_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_28_360_34&#39;)"><span class="hl_varref"><span class="mpre">ldProg</span></span></a><span class="mpre">
                     [</span><span class="hl_string"><span class="mpre">&quot;-x&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-r&quot;</span></span><span class="mpre">, </span><a href="#loc_363_43_363_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_363_43_363_52&#39;)"><span class="hl_varref"><span class="mpre">testofile</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-o&quot;</span></span><span class="mpre">, </span><a href="#loc_368_45_368_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_368_45_368_55&#39;)"><span class="hl_varref"><span class="mpre">testofile&#39;</span></span></a><span class="mpre">]
                   </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
                 </span><a href="Distribution.Compat.Exception.html#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_14_1_14_8&#39;)"><span class="hl_infix"><span class="mpre">`catchIO`</span></span></a><span class="mpre">   (\_ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">)
                 </span><a href="Distribution.Compat.Exception.html#loc_17_1_17_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_17_1_17_10&#39;)"><span class="hl_infix"><span class="mpre">`catchExit`</span></span></a><span class="mpre"> (\_ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">)
      if </span><a href="#loc_362_7_362_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_362_7_362_10&#39;)"><span class="hl_varref"><span class="mpre">ldx</span></span></a><span class="mpre">
        then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 377, srcSpanStartColumn = 21, srcSpanEndLine = 377, srcSpanEndColumn = 59}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 377, srcSpanStartColumn = 28, srcSpanEndLine = 377, srcSpanEndColumn = 29},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">ldProg { programDefaultArgs = [&quot;-x&quot;] }</span></span><span class="mpre">
        else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_360_28_360_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_28_360_34&#39;)"><span class="hl_varref"><span class="mpre">ldProg</span></span></a><span class="mpre">

</span><a href="#loc_381_1_381_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_1_381_13&#39;)"><span class="mpre">getLanguages</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> [(</span><a href="Language.Haskell.Extension.html#loc_69_6_69_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_69_6_69_14&#39;)"><span class="hl_tyconref"><span class="mpre">Language</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Flag</span></span><span class="mpre">)]
</span><a name="loc_381_1_381_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_1_381_13&#39;)"><span class="hl_fundecl"><span class="mpre">getLanguages</span></span></a><span class="mpre"> _ </span><a name="loc_381_16_381_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_16_381_23&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- TODO: should be using --supported-languages rather than hard coding</span></span><span class="mpre">
  | </span><a href="#loc_387_10_387_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_10_387_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">7</span></span><span class="mpre">] [] = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> [(</span><a href="Language.Haskell.Extension.html#loc_73_6_73_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_73_6_73_15&#39;)"><span class="hl_conref"><span class="mpre">Haskell98</span></span></a><span class="mpre">,   </span><span class="hl_string"><span class="mpre">&quot;-XHaskell98&quot;</span></span><span class="mpre">)
                                          ,(</span><a href="Language.Haskell.Extension.html#loc_77_5_77_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_77_5_77_16&#39;)"><span class="hl_conref"><span class="mpre">Haskell2010</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-XHaskell2010&quot;</span></span><span class="mpre">)]
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">                    = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> [(</span><a href="Language.Haskell.Extension.html#loc_73_6_73_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_73_6_73_15&#39;)"><span class="hl_conref"><span class="mpre">Haskell98</span></span></a><span class="mpre">,   </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)]
  where
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_387_10_387_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_10_387_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">programVersion</span></span><span class="mpre"> </span><a href="#loc_381_16_381_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_16_381_23&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">

</span><a href="#loc_390_1_390_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_1_390_11&#39;)"><span class="mpre">getGhcInfo</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)]
</span><a name="loc_390_1_390_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_1_390_11&#39;)"><span class="hl_fundecl"><span class="mpre">getGhcInfo</span></span></a><span class="mpre"> </span><a name="loc_390_12_390_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_12_390_21&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_390_22_390_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_22_390_29&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre"> =
    case </span><span class="hl_varref"><span class="mpre">programVersion</span></span><span class="mpre"> </span><a href="#loc_390_22_390_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_22_390_29&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_392_10_392_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_10_392_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcVersion</span></span></a><span class="mpre">
     | </span><a href="#loc_392_10_392_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_392_10_392_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">7</span></span><span class="mpre">] [] -&gt;
        do </span><a name="loc_394_12_394_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_12_394_14&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.Simple.Program.html#loc_156_1_156_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_156_1_156_17&#39;)"><span class="hl_varref"><span class="mpre">getProgramOutput</span></span></a><span class="mpre"> </span><a href="#loc_390_12_390_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_12_390_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Program.Types.html#loc_119_1_119_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_119_1_119_21&#39;)"><span class="hl_varref"><span class="mpre">suppressOverrideArgs</span></span></a><span class="mpre"> </span><a href="#loc_390_22_390_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_22_390_29&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">)
                 [</span><span class="hl_string"><span class="mpre">&quot;--info&quot;</span></span><span class="mpre">]
           case </span><span class="hl_varref"><span class="mpre">reads</span></span><span class="mpre"> </span><a href="#loc_394_12_394_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_394_12_394_14&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> of
               [(</span><a name="loc_397_18_397_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_18_397_19&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">, </span><a name="loc_397_21_397_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_21_397_23&#39;)"><span class="hl_vardecl"><span class="mpre">ss</span></span></a><span class="mpre">)]
                | </span><span class="hl_varref"><span class="mpre">all</span></span><span class="mpre"> </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="hl_varref"><span class="mpre">isSpace</span></span></a><span class="mpre"> </span><a href="#loc_397_21_397_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_21_397_23&#39;)"><span class="hl_varref"><span class="mpre">ss</span></span></a><span class="mpre"> -&gt;
                   </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_397_18_397_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_397_18_397_19&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">
               _ -&gt;
                   </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Can&#39;t parse --info output of GHC&quot;</span></span><span class="mpre">
    _ -&gt;
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> []

</span><a href="#loc_406_1_406_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_1_406_14&#39;)"><span class="mpre">getExtensions</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> [(</span><a href="Language.Haskell.Extension.html#loc_118_6_118_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_118_6_118_15&#39;)"><span class="hl_tyconref"><span class="mpre">Extension</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Flag</span></span><span class="mpre">)]
</span><a name="loc_406_1_406_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_1_406_14&#39;)"><span class="hl_fundecl"><span class="mpre">getExtensions</span></span></a><span class="mpre"> </span><a name="loc_406_15_406_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_15_406_24&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_406_25_406_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_25_406_32&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">
  | </span><a href="#loc_449_10_449_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_10_449_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">7</span></span><span class="mpre">] [] = do

    </span><a name="loc_409_5_409_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_5_409_8&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.Simple.Program.html#loc_156_1_156_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_156_1_156_17&#39;)"><span class="hl_varref"><span class="mpre">getProgramOutput</span></span></a><span class="mpre"> </span><a href="#loc_406_15_406_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_15_406_24&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Program.Types.html#loc_119_1_119_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_119_1_119_21&#39;)"><span class="hl_varref"><span class="mpre">suppressOverrideArgs</span></span></a><span class="mpre"> </span><a href="#loc_406_25_406_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_25_406_32&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">)
              [</span><span class="hl_string"><span class="mpre">&quot;--supported-languages&quot;</span></span><span class="mpre">]
    let </span><a name="loc_411_9_411_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_9_411_16&#39;)"><span class="hl_vardecl"><span class="mpre">extStrs</span></span></a><span class="mpre"> = if </span><a href="#loc_449_10_449_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_10_449_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">7</span></span><span class="mpre">] []
                  then </span><a href="Data.List.html#loc_1044_1_1044_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1044_1_1044_6&#39;)"><span class="hl_varref"><span class="mpre">lines</span></span></a><span class="mpre"> </span><a href="#loc_409_5_409_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_5_409_8&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">
                  else </span><span class="hl_comment"><span class="mpre">-- Older GHCs only gave us either Foo or NoFoo,</span></span><span class="mpre">
                       </span><span class="hl_comment"><span class="mpre">-- so we have to work out the other one ourselves</span></span><span class="mpre">
                       [ </span><a href="#loc_420_26_420_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_26_420_34&#39;)"><span class="hl_varref"><span class="mpre">extStr&#39;&#39;</span></span></a><span class="mpre">
                       | </span><a name="loc_416_26_416_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_26_416_32&#39;)"><span class="hl_vardecl"><span class="mpre">extStr</span></span></a><span class="mpre"> &lt;- </span><a href="Data.List.html#loc_1044_1_1044_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1044_1_1044_6&#39;)"><span class="hl_varref"><span class="mpre">lines</span></span></a><span class="mpre"> </span><a href="#loc_409_5_409_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_5_409_8&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">
                       , let </span><a name="loc_417_30_417_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_30_417_37&#39;)"><span class="hl_vardecl"><span class="mpre">extStr&#39;</span></span></a><span class="mpre"> = case </span><a href="#loc_416_26_416_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_26_416_32&#39;)"><span class="hl_varref"><span class="mpre">extStr</span></span></a><span class="mpre"> of
                                       </span><span class="hl_char"><span class="mpre">&#39;N&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;o&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a name="loc_418_52_418_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_52_418_54&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_418_52_418_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_418_52_418_54&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre">
                                       _              -&gt; </span><span class="hl_string"><span class="mpre">&quot;No&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_416_26_416_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_26_416_32&#39;)"><span class="hl_varref"><span class="mpre">extStr</span></span></a><span class="mpre">
                       , </span><a name="loc_420_26_420_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_26_420_34&#39;)"><span class="hl_vardecl"><span class="mpre">extStr&#39;&#39;</span></span></a><span class="mpre"> &lt;- [</span><a href="#loc_416_26_416_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_416_26_416_32&#39;)"><span class="hl_varref"><span class="mpre">extStr</span></span></a><span class="mpre">, </span><a href="#loc_417_30_417_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_417_30_417_37&#39;)"><span class="hl_varref"><span class="mpre">extStr&#39;</span></span></a><span class="mpre">]
                       ]
    let </span><a name="loc_422_9_422_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_9_422_20&#39;)"><span class="hl_vardecl"><span class="mpre">extensions0</span></span></a><span class="mpre"> = [ (</span><a href="#loc_423_30_423_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_30_423_33&#39;)"><span class="hl_varref"><span class="mpre">ext</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-X&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_31_1_31_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_31_1_31_8&#39;)"><span class="hl_varref"><span class="mpre">display</span></span></a><span class="mpre"> </span><a href="#loc_423_30_423_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_30_423_33&#39;)"><span class="hl_varref"><span class="mpre">ext</span></span></a><span class="mpre">)
                      | </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_423_30_423_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_423_30_423_33&#39;)"><span class="hl_vardecl"><span class="mpre">ext</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Distribution.Text.html#loc_39_1_39_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Text.html#loc_39_1_39_12&#39;)"><span class="hl_varref"><span class="mpre">simpleParse</span></span></a><span class="mpre"> </span><a href="#loc_411_9_411_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_9_411_16&#39;)"><span class="hl_varref"><span class="mpre">extStrs</span></span></a><span class="mpre"> ]
        </span><a name="loc_424_9_424_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_424_9_424_20&#39;)"><span class="hl_vardecl"><span class="mpre">extensions1</span></span></a><span class="mpre"> = if </span><a href="#loc_449_10_449_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_10_449_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">8</span></span><span class="mpre">]  [] </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre">
                         </span><a href="#loc_449_10_449_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_10_449_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre">  </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">10</span></span><span class="mpre">] []
                      then </span><span class="hl_comment"><span class="mpre">-- ghc-6.8 introduced RecordPuns however it</span></span><span class="mpre">
                           </span><span class="hl_comment"><span class="mpre">-- should have been NamedFieldPuns. We now</span></span><span class="mpre">
                           </span><span class="hl_comment"><span class="mpre">-- encourage packages to use NamedFieldPuns</span></span><span class="mpre">
                           </span><span class="hl_comment"><span class="mpre">-- so for compatability we fake support for</span></span><span class="mpre">
                           </span><span class="hl_comment"><span class="mpre">-- it in ghc-6.8 by making it an alias for</span></span><span class="mpre">
                           </span><span class="hl_comment"><span class="mpre">-- the old RecordPuns extension.</span></span><span class="mpre">
                           (</span><a href="Language.Haskell.Extension.html#loc_120_5_120_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_120_5_120_20&#39;)"><span class="hl_conref"><span class="mpre">EnableExtension</span></span></a><span class="mpre">  </span><a href="Language.Haskell.Extension.html#loc_305_5_305_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_305_5_305_19&#39;)"><span class="hl_conref"><span class="mpre">NamedFieldPuns</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-XRecordPuns&quot;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">
                           (</span><a href="Language.Haskell.Extension.html#loc_123_5_123_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_123_5_123_21&#39;)"><span class="hl_conref"><span class="mpre">DisableExtension</span></span></a><span class="mpre"> </span><a href="Language.Haskell.Extension.html#loc_305_5_305_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_305_5_305_19&#39;)"><span class="hl_conref"><span class="mpre">NamedFieldPuns</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-XNoRecordPuns&quot;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">
                           </span><a href="#loc_422_9_422_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_9_422_20&#39;)"><span class="hl_varref"><span class="mpre">extensions0</span></span></a><span class="mpre">
                      else </span><a href="#loc_422_9_422_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_422_9_422_20&#39;)"><span class="hl_varref"><span class="mpre">extensions0</span></span></a><span class="mpre">
        </span><a name="loc_436_9_436_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_9_436_20&#39;)"><span class="hl_vardecl"><span class="mpre">extensions2</span></span></a><span class="mpre"> = if </span><a href="#loc_449_10_449_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_10_449_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre">  </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">7</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">] []
                      then </span><span class="hl_comment"><span class="mpre">-- ghc-7.2 split NondecreasingIndentation off</span></span><span class="mpre">
                           </span><span class="hl_comment"><span class="mpre">-- into a proper extension. Before that it</span></span><span class="mpre">
                           </span><span class="hl_comment"><span class="mpre">-- was always on.</span></span><span class="mpre">
                           (</span><a href="Language.Haskell.Extension.html#loc_120_5_120_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_120_5_120_20&#39;)"><span class="hl_conref"><span class="mpre">EnableExtension</span></span></a><span class="mpre">  </span><a href="Language.Haskell.Extension.html#loc_607_5_607_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_607_5_607_29&#39;)"><span class="hl_conref"><span class="mpre">NondecreasingIndentation</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">
                           (</span><a href="Language.Haskell.Extension.html#loc_123_5_123_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_123_5_123_21&#39;)"><span class="hl_conref"><span class="mpre">DisableExtension</span></span></a><span class="mpre"> </span><a href="Language.Haskell.Extension.html#loc_607_5_607_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_607_5_607_29&#39;)"><span class="hl_conref"><span class="mpre">NondecreasingIndentation</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">
                           </span><a href="#loc_424_9_424_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_424_9_424_20&#39;)"><span class="hl_varref"><span class="mpre">extensions1</span></span></a><span class="mpre">
                      else </span><a href="#loc_424_9_424_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_424_9_424_20&#39;)"><span class="hl_varref"><span class="mpre">extensions1</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_436_9_436_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_9_436_20&#39;)"><span class="hl_varref"><span class="mpre">extensions2</span></span></a><span class="mpre">

  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_453_1_453_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_1_453_22&#39;)"><span class="hl_varref"><span class="mpre">oldLanguageExtensions</span></span></a><span class="mpre">

  where
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_449_10_449_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_449_10_449_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">programVersion</span></span><span class="mpre"> </span><a href="#loc_406_25_406_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_406_25_406_32&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | For GHC 6.6.x and earlier, the mapping from supported extensions to flags</span></span><span class="mpre">
</span><a href="#loc_453_1_453_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_1_453_22&#39;)"><span class="mpre">oldLanguageExtensions</span></a><span class="mpre"> :: [(</span><a href="Language.Haskell.Extension.html#loc_118_6_118_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_118_6_118_15&#39;)"><span class="hl_tyconref"><span class="mpre">Extension</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Flag</span></span><span class="mpre">)]
</span><a name="loc_453_1_453_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_1_453_22&#39;)"><span class="hl_vardecl"><span class="mpre">oldLanguageExtensions</span></span></a><span class="mpre"> =
    let </span><a name="loc_454_9_454_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_9_454_15&#39;)"><span class="hl_fundecl"><span class="mpre">doFlag</span></span></a><span class="mpre"> (</span><a name="loc_454_17_454_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_18&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">, (</span><a name="loc_454_21_454_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_21_454_27&#39;)"><span class="hl_vardecl"><span class="mpre">enable</span></span></a><span class="mpre">, </span><a name="loc_454_29_454_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_29_454_36&#39;)"><span class="hl_vardecl"><span class="mpre">disable</span></span></a><span class="mpre">)) = [(</span><a href="Language.Haskell.Extension.html#loc_120_5_120_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_120_5_120_20&#39;)"><span class="hl_conref"><span class="mpre">EnableExtension</span></span></a><span class="mpre">  </span><a href="#loc_454_17_454_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_18&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">, </span><a href="#loc_454_21_454_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_21_454_27&#39;)"><span class="hl_varref"><span class="mpre">enable</span></span></a><span class="mpre">),
                                         (</span><a href="Language.Haskell.Extension.html#loc_123_5_123_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_123_5_123_21&#39;)"><span class="hl_conref"><span class="mpre">DisableExtension</span></span></a><span class="mpre"> </span><a href="#loc_454_17_454_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_17_454_18&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">, </span><a href="#loc_454_29_454_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_29_454_36&#39;)"><span class="hl_varref"><span class="mpre">disable</span></span></a><span class="mpre">)]
        </span><a name="loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_vardecl"><span class="mpre">fglasgowExts</span></span></a><span class="mpre"> = (</span><span class="hl_string"><span class="mpre">&quot;-fglasgow-exts&quot;</span></span><span class="mpre">,
                        </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">) </span><span class="hl_comment"><span class="mpre">-- This is wrong, but we don&#39;t want to turn</span></span><span class="mpre">
                            </span><span class="hl_comment"><span class="mpre">-- all the extensions off when asked to just</span></span><span class="mpre">
                            </span><span class="hl_comment"><span class="mpre">-- turn one off</span></span><span class="mpre">
        </span><a name="loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_fundecl"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><a name="loc_460_15_460_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_15_460_19&#39;)"><span class="hl_vardecl"><span class="mpre">flag</span></span></a><span class="mpre"> = (</span><span class="hl_string"><span class="mpre">&quot;-f&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_460_15_460_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_15_460_19&#39;)"><span class="hl_varref"><span class="mpre">flag</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-fno-&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_460_15_460_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_15_460_19&#39;)"><span class="hl_varref"><span class="mpre">flag</span></span></a><span class="mpre">)
    in </span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> </span><a href="#loc_454_9_454_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_9_454_15&#39;)"><span class="hl_varref"><span class="mpre">doFlag</span></span></a><span class="mpre">
    [(</span><a href="Language.Haskell.Extension.html#loc_137_5_137_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_137_5_137_25&#39;)"><span class="hl_conref"><span class="mpre">OverlappingInstances</span></span></a><span class="mpre">       , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;allow-overlapping-instances&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_266_5_266_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_266_5_266_25&#39;)"><span class="hl_conref"><span class="mpre">TypeSynonymInstances</span></span></a><span class="mpre">       , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_272_5_272_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_272_5_272_20&#39;)"><span class="hl_conref"><span class="mpre">TemplateHaskell</span></span></a><span class="mpre">            , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;th&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_279_5_279_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_279_5_279_29&#39;)"><span class="hl_conref"><span class="mpre">ForeignFunctionInterface</span></span></a><span class="mpre">   , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;ffi&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_180_5_180_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_180_5_180_28&#39;)"><span class="hl_conref"><span class="mpre">MonomorphismRestriction</span></span></a><span class="mpre">    , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;monomorphism-restriction&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_429_5_429_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_429_5_429_17&#39;)"><span class="hl_conref"><span class="mpre">MonoPatBinds</span></span></a><span class="mpre">               , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;mono-pat-binds&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_145_5_145_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_145_5_145_25&#39;)"><span class="hl_conref"><span class="mpre">UndecidableInstances</span></span></a><span class="mpre">       , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;allow-undecidable-instances&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_153_5_153_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_153_5_153_24&#39;)"><span class="hl_conref"><span class="mpre">IncoherentInstances</span></span></a><span class="mpre">        , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;allow-incoherent-instances&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_284_5_284_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_284_5_284_11&#39;)"><span class="hl_conref"><span class="mpre">Arrows</span></span></a><span class="mpre">                     , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;arrows&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_290_5_290_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_290_5_290_13&#39;)"><span class="hl_conref"><span class="mpre">Generics</span></span></a><span class="mpre">                   , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;generics&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_298_5_298_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_298_5_298_20&#39;)"><span class="hl_conref"><span class="mpre">ImplicitPrelude</span></span></a><span class="mpre">            , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;implicit-prelude&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_227_5_227_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_227_5_227_19&#39;)"><span class="hl_conref"><span class="mpre">ImplicitParams</span></span></a><span class="mpre">             , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;implicit-params&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_249_5_249_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_249_5_249_8&#39;)"><span class="hl_conref"><span class="mpre">CPP</span></span></a><span class="mpre">                        , (</span><span class="hl_string"><span class="mpre">&quot;-cpp&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="hl_comment"><span class="mpre">{- Wrong -}</span></span><span class="mpre">))
    ,(</span><a href="Language.Haskell.Extension.html#loc_261_5_261_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_261_5_261_17&#39;)"><span class="hl_conref"><span class="mpre">BangPatterns</span></span></a><span class="mpre">               , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;bang-patterns&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_255_5_255_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_255_5_255_19&#39;)"><span class="hl_conref"><span class="mpre">KindSignatures</span></span></a><span class="mpre">             , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_163_5_163_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_163_5_163_16&#39;)"><span class="hl_conref"><span class="mpre">RecursiveDo</span></span></a><span class="mpre">                , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_170_5_170_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_170_5_170_21&#39;)"><span class="hl_conref"><span class="mpre">ParallelListComp</span></span></a><span class="mpre">           , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_175_5_175_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_175_5_175_26&#39;)"><span class="hl_conref"><span class="mpre">MultiParamTypeClasses</span></span></a><span class="mpre">      , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_189_5_189_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_189_5_189_27&#39;)"><span class="hl_conref"><span class="mpre">FunctionalDependencies</span></span></a><span class="mpre">     , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_195_5_195_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_195_5_195_15&#39;)"><span class="hl_conref"><span class="mpre">Rank2Types</span></span></a><span class="mpre">                 , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_201_5_201_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_201_5_201_15&#39;)"><span class="hl_conref"><span class="mpre">RankNTypes</span></span></a><span class="mpre">                 , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_207_5_207_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_207_5_207_26&#39;)"><span class="hl_conref"><span class="mpre">PolymorphicComponents</span></span></a><span class="mpre">      , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_212_5_212_30" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_212_5_212_30&#39;)"><span class="hl_conref"><span class="mpre">ExistentialQuantification</span></span></a><span class="mpre">  , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_219_5_219_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_219_5_219_24&#39;)"><span class="hl_conref"><span class="mpre">ScopedTypeVariables</span></span></a><span class="mpre">        , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;scoped-type-variables&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_233_5_233_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_233_5_233_21&#39;)"><span class="hl_conref"><span class="mpre">FlexibleContexts</span></span></a><span class="mpre">           , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_239_5_239_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_239_5_239_22&#39;)"><span class="hl_conref"><span class="mpre">FlexibleInstances</span></span></a><span class="mpre">          , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_244_5_244_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_244_5_244_19&#39;)"><span class="hl_conref"><span class="mpre">EmptyDataDecls</span></span></a><span class="mpre">             , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_311_5_311_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_311_5_311_18&#39;)"><span class="hl_conref"><span class="mpre">PatternGuards</span></span></a><span class="mpre">              , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_317_5_317_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_317_5_317_31&#39;)"><span class="hl_conref"><span class="mpre">GeneralizedNewtypeDeriving</span></span></a><span class="mpre"> , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_341_5_341_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_341_5_341_14&#39;)"><span class="hl_conref"><span class="mpre">MagicHash</span></span></a><span class="mpre">                  , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_359_5_359_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_359_5_359_18&#39;)"><span class="hl_conref"><span class="mpre">UnicodeSyntax</span></span></a><span class="mpre">              , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_222_5_222_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_222_5_222_22&#39;)"><span class="hl_conref"><span class="mpre">PatternSignatures</span></span></a><span class="mpre">          , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_365_5_365_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_365_5_365_21&#39;)"><span class="hl_conref"><span class="mpre">UnliftedFFITypes</span></span></a><span class="mpre">           , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_381_5_381_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_381_5_381_24&#39;)"><span class="hl_conref"><span class="mpre">LiberalTypeSynonyms</span></span></a><span class="mpre">        , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_385_5_385_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_385_5_385_18&#39;)"><span class="hl_conref"><span class="mpre">TypeOperators</span></span></a><span class="mpre">              , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_419_5_419_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_419_5_419_10&#39;)"><span class="hl_conref"><span class="mpre">GADTs</span></span></a><span class="mpre">                      , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_435_5_435_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_435_5_435_19&#39;)"><span class="hl_conref"><span class="mpre">RelaxedPolyRec</span></span></a><span class="mpre">             , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_441_5_441_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_441_5_441_25&#39;)"><span class="hl_conref"><span class="mpre">ExtendedDefaultRules</span></span></a><span class="mpre">       , </span><a href="#loc_460_9_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_9_460_14&#39;)"><span class="hl_varref"><span class="mpre">fFlag</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;extended-default-rules&quot;</span></span><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_446_5_446_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_446_5_446_18&#39;)"><span class="hl_conref"><span class="mpre">UnboxedTuples</span></span></a><span class="mpre">              , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_452_5_452_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_452_5_452_23&#39;)"><span class="hl_conref"><span class="mpre">DeriveDataTypeable</span></span></a><span class="mpre">         , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ,(</span><a href="Language.Haskell.Extension.html#loc_473_5_473_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_473_5_473_28&#39;)"><span class="hl_conref"><span class="mpre">ConstrainedClassMethods</span></span></a><span class="mpre">    , </span><a href="#loc_456_9_456_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_456_9_456_21&#39;)"><span class="hl_varref"><span class="mpre">fglasgowExts</span></span></a><span class="mpre">)
    ]
</span><span class="hl_comment"><span class="mpre">-- | Given a single package DB, return all installed packages.</span></span><span class="mpre">
</span><a href="#loc_507_1_507_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_1_507_21&#39;)"><span class="mpre">getPackageDBContents</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Compiler.html#loc_112_6_112_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_6_112_15&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDB</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre">
                        -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.Simple.PackageIndex.html#loc_94_6_94_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.PackageIndex.html#loc_94_6_94_18&#39;)"><span class="hl_tyconref"><span class="mpre">PackageIndex</span></span></a><span class="mpre">
</span><a name="loc_507_1_507_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_1_507_21&#39;)"><span class="hl_fundecl"><span class="mpre">getPackageDBContents</span></span></a><span class="mpre"> </span><a name="loc_507_22_507_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_22_507_31&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_507_32_507_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_32_507_41&#39;)"><span class="hl_vardecl"><span class="mpre">packagedb</span></span></a><span class="mpre"> </span><a name="loc_507_42_507_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_42_507_46&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre"> = do
  </span><a name="loc_508_3_508_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_508_3_508_8&#39;)"><span class="hl_vardecl"><span class="mpre">pkgss</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_597_1_597_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_1_597_22&#39;)"><span class="hl_varref"><span class="mpre">getInstalledPackages&#39;</span></span></a><span class="mpre"> </span><a href="#loc_507_22_507_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_22_507_31&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> [</span><a href="#loc_507_32_507_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_32_507_41&#39;)"><span class="hl_varref"><span class="mpre">packagedb</span></span></a><span class="mpre">] </span><a href="#loc_507_42_507_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_42_507_46&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">
  </span><a href="#loc_536_1_536_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_15&#39;)"><span class="hl_varref"><span class="mpre">toPackageIndex</span></span></a><span class="mpre"> </span><a href="#loc_507_22_507_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_22_507_31&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_508_3_508_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_508_3_508_8&#39;)"><span class="hl_varref"><span class="mpre">pkgss</span></span></a><span class="mpre"> </span><a href="#loc_507_42_507_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_507_42_507_46&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Given a package DB stack, return all installed packages.</span></span><span class="mpre">
</span><a href="#loc_514_1_514_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_1_514_21&#39;)"><span class="mpre">getInstalledPackages</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">PackageDBStack</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre">
                     -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.Simple.PackageIndex.html#loc_94_6_94_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.PackageIndex.html#loc_94_6_94_18&#39;)"><span class="hl_tyconref"><span class="mpre">PackageIndex</span></span></a><span class="mpre">
</span><a name="loc_514_1_514_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_1_514_21&#39;)"><span class="hl_fundecl"><span class="mpre">getInstalledPackages</span></span></a><span class="mpre"> </span><a name="loc_514_22_514_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_22_514_31&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_514_32_514_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_32_514_42&#39;)"><span class="hl_vardecl"><span class="mpre">packagedbs</span></span></a><span class="mpre"> </span><a name="loc_514_43_514_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_43_514_47&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre"> = do
  </span><a href="#loc_564_1_564_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_21&#39;)"><span class="hl_varref"><span class="mpre">checkPackageDbEnvVar</span></span></a><span class="mpre">
  </span><a href="#loc_573_1_573_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_20&#39;)"><span class="hl_varref"><span class="mpre">checkPackageDbStack</span></span></a><span class="mpre"> </span><a href="#loc_514_32_514_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_32_514_42&#39;)"><span class="hl_varref"><span class="mpre">packagedbs</span></span></a><span class="mpre">
  </span><a name="loc_517_3_517_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_517_3_517_8&#39;)"><span class="hl_vardecl"><span class="mpre">pkgss</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_597_1_597_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_1_597_22&#39;)"><span class="hl_varref"><span class="mpre">getInstalledPackages&#39;</span></span></a><span class="mpre"> </span><a href="#loc_514_22_514_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_22_514_31&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_514_32_514_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_32_514_42&#39;)"><span class="hl_varref"><span class="mpre">packagedbs</span></span></a><span class="mpre"> </span><a href="#loc_514_43_514_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_43_514_47&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">
  </span><a name="loc_518_3_518_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_518_3_518_8&#39;)"><span class="hl_vardecl"><span class="mpre">index</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_536_1_536_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_15&#39;)"><span class="hl_varref"><span class="mpre">toPackageIndex</span></span></a><span class="mpre"> </span><a href="#loc_514_22_514_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_22_514_31&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_517_3_517_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_517_3_517_8&#39;)"><span class="hl_varref"><span class="mpre">pkgss</span></span></a><span class="mpre"> </span><a href="#loc_514_43_514_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_514_43_514_47&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_522_5_522_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_5_522_19&#39;)"><span class="hl_varref"><span class="mpre">hackRtsPackage</span></span></a><span class="mpre"> </span><a href="#loc_518_3_518_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_518_3_518_8&#39;)"><span class="hl_varref"><span class="mpre">index</span></span></a><span class="mpre">

  where
    </span><a name="loc_522_5_522_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_5_522_19&#39;)"><span class="hl_fundecl"><span class="mpre">hackRtsPackage</span></span></a><span class="mpre"> </span><a name="loc_522_20_522_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_20_522_25&#39;)"><span class="hl_vardecl"><span class="mpre">index</span></span></a><span class="mpre"> =
      case </span><a href="Distribution.Simple.PackageIndex.html#loc_349_1_349_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.PackageIndex.html#loc_349_1_349_18&#39;)"><span class="hl_varref"><span class="mpre">PackageIndex.lookupPackageName</span></span></a><span class="mpre"> </span><a href="#loc_522_20_522_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_20_522_25&#39;)"><span class="hl_varref"><span class="mpre">index</span></span></a><span class="mpre"> (</span><a href="Distribution.Package.html#loc_80_23_80_34" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_80_23_80_34&#39;)"><span class="hl_conref"><span class="mpre">PackageName</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;rts&quot;</span></span><span class="mpre">) of
        [(_,[</span><a name="loc_524_14_524_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_14_524_17&#39;)"><span class="hl_vardecl"><span class="mpre">rts</span></span></a><span class="mpre">])]
           -&gt; </span><a href="Distribution.Simple.PackageIndex.html#loc_208_1_208_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.PackageIndex.html#loc_208_1_208_7&#39;)"><span class="hl_varref"><span class="mpre">PackageIndex.insert</span></span></a><span class="mpre"> (</span><a href="#loc_588_1_588_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_1_588_22&#39;)"><span class="hl_varref"><span class="mpre">removeMingwIncludeDir</span></span></a><span class="mpre"> </span><a href="#loc_524_14_524_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_524_14_524_17&#39;)"><span class="hl_varref"><span class="mpre">rts</span></span></a><span class="mpre">) </span><a href="#loc_522_20_522_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_20_522_25&#39;)"><span class="hl_varref"><span class="mpre">index</span></span></a><span class="mpre">
        _  -&gt; </span><a href="#loc_522_20_522_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_522_20_522_25&#39;)"><span class="hl_varref"><span class="mpre">index</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- No (or multiple) ghc rts package is registered!!</span></span><span class="mpre">
                    </span><span class="hl_comment"><span class="mpre">-- Feh, whatever, the ghc testsuite does some crazy stuff.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Given a list of @(PackageDB, InstalledPackageInfo)@ pairs, produce a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @PackageIndex@. Helper function used by &#39;getPackageDBContents&#39; and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;getInstalledPackages&#39;.</span></span><span class="mpre">
</span><a href="#loc_536_1_536_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_15&#39;)"><span class="mpre">toPackageIndex</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
               -&gt; [(</span><a href="Distribution.Simple.Compiler.html#loc_112_6_112_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_6_112_15&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDB</span></span></a><span class="mpre">, [</span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">])]
               -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre">
               -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.Simple.PackageIndex.html#loc_94_6_94_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.PackageIndex.html#loc_94_6_94_18&#39;)"><span class="hl_tyconref"><span class="mpre">PackageIndex</span></span></a><span class="mpre">
</span><a name="loc_536_1_536_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_15&#39;)"><span class="hl_fundecl"><span class="mpre">toPackageIndex</span></span></a><span class="mpre"> </span><a name="loc_536_16_536_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_16_536_25&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_536_26_536_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_26_536_31&#39;)"><span class="hl_vardecl"><span class="mpre">pkgss</span></span></a><span class="mpre"> </span><a name="loc_536_32_536_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_32_536_36&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre"> = do
  </span><span class="hl_comment"><span class="mpre">-- On Windows, various fields have $topdir/foo rather than full</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- paths. We need to substitute the right value in so that when</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- we, for example, call gcc, we have proper paths to give it.</span></span><span class="mpre">
  </span><a name="loc_540_3_540_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_540_3_540_9&#39;)"><span class="hl_vardecl"><span class="mpre">topDir</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_555_1_555_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_1_555_11&#39;)"><span class="hl_varref"><span class="mpre">ghcLibDir&#39;</span></span></a><span class="mpre"> </span><a href="#loc_536_16_536_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_16_536_25&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_546_10_546_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_546_10_546_17&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
  let </span><a name="loc_541_7_541_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_541_7_541_14&#39;)"><span class="hl_vardecl"><span class="mpre">indices</span></span></a><span class="mpre"> = [ </span><a href="Distribution.Simple.PackageIndex.html#loc_160_1_160_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.PackageIndex.html#loc_160_1_160_9&#39;)"><span class="hl_varref"><span class="mpre">PackageIndex.fromList</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="#loc_641_1_641_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_1_641_12&#39;)"><span class="hl_varref"><span class="mpre">substTopDir</span></span></a><span class="mpre"> </span><a href="#loc_540_3_540_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_540_3_540_9&#39;)"><span class="hl_varref"><span class="mpre">topDir</span></span></a><span class="mpre">) </span><a href="#loc_542_23_542_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_542_23_542_27&#39;)"><span class="hl_varref"><span class="mpre">pkgs</span></span></a><span class="mpre">)
                | (_, </span><a name="loc_542_23_542_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_542_23_542_27&#39;)"><span class="hl_vardecl"><span class="mpre">pkgs</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_536_26_536_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_26_536_31&#39;)"><span class="hl_varref"><span class="mpre">pkgss</span></span></a><span class="mpre"> ]
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> (</span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><a href="#loc_541_7_541_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_541_7_541_14&#39;)"><span class="hl_varref"><span class="mpre">indices</span></span></a><span class="mpre">)

  where
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_546_10_546_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_546_10_546_17&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProgram</span></span></a><span class="mpre"> </span><a href="#loc_536_32_536_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_32_536_36&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">

</span><a href="#loc_549_1_549_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_1_549_10&#39;)"><span class="mpre">ghcLibDir</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
</span><a name="loc_549_1_549_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_1_549_10&#39;)"><span class="hl_fundecl"><span class="mpre">ghcLibDir</span></span></a><span class="mpre"> </span><a name="loc_549_11_549_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_11_549_20&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_549_21_549_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_21_549_24&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> =
    (</span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">dropWhile</span></span><span class="mpre"> </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="hl_varref"><span class="mpre">isSpace</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">`fmap`</span></span><span class="mpre">
     </span><a href="Distribution.Simple.Program.html#loc_209_1_209_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_209_1_209_27&#39;)"><span class="hl_varref"><span class="mpre">rawSystemProgramStdoutConf</span></span></a><span class="mpre"> </span><a href="#loc_549_11_549_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_11_549_20&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProgram</span></span></a><span class="mpre">
     (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_549_21_549_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_21_549_24&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) [</span><span class="hl_string"><span class="mpre">&quot;--print-libdir&quot;</span></span><span class="mpre">]

</span><a href="#loc_555_1_555_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_1_555_11&#39;)"><span class="mpre">ghcLibDir&#39;</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
</span><a name="loc_555_1_555_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_1_555_11&#39;)"><span class="hl_fundecl"><span class="mpre">ghcLibDir&#39;</span></span></a><span class="mpre"> </span><a name="loc_555_12_555_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_12_555_21&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_555_22_555_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_22_555_29&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre"> =
    (</span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">dropWhile</span></span><span class="mpre"> </span><a href="GHC.Unicode.html#loc_72_1_72_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.Unicode.html#loc_72_1_72_8&#39;)"><span class="hl_varref"><span class="mpre">isSpace</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">`fmap`</span></span><span class="mpre">
     </span><a href="Distribution.Simple.Program.html#loc_201_1_201_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_201_1_201_23&#39;)"><span class="hl_varref"><span class="mpre">rawSystemProgramStdout</span></span></a><span class="mpre"> </span><a href="#loc_555_12_555_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_12_555_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_555_22_555_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_22_555_29&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;--print-libdir&quot;</span></span><span class="mpre">]

</span><span class="hl_comment"><span class="mpre">-- Cabal does not use the environment variable GHC_PACKAGE_PATH; let users</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- know that this is the case. See ticket #335. Simply ignoring it is not a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- good idea, since then ghc and cabal are looking at different sets of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- package dbs and chaos is likely to ensue.</span></span><span class="mpre">
</span><a href="#loc_564_1_564_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_21&#39;)"><span class="mpre">checkPackageDbEnvVar</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_564_1_564_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_564_1_564_21&#39;)"><span class="hl_vardecl"><span class="mpre">checkPackageDbEnvVar</span></span></a><span class="mpre"> = do
    </span><a name="loc_565_5_565_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_5_565_11&#39;)"><span class="hl_vardecl"><span class="mpre">hasGPP</span></span></a><span class="mpre"> &lt;- (</span><span class="hl_varref"><span class="mpre">getEnv</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;GHC_PACKAGE_PATH&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">)
              </span><a href="Distribution.Compat.Exception.html#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_14_1_14_8&#39;)"><span class="hl_infix"><span class="mpre">`catchIO`</span></span></a><span class="mpre"> (\_ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">)
    </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_565_5_565_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_5_565_11&#39;)"><span class="hl_varref"><span class="mpre">hasGPP</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
      </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Use of GHC&#39;s environment variable GHC_PACKAGE_PATH is &quot;</span></span><span class="mpre">
         </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;incompatible with Cabal. Use the flag --package-db to specify a &quot;</span></span><span class="mpre">
         </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;package database (it can be used multiple times).&quot;</span></span><span class="mpre">

</span><a href="#loc_573_1_573_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_20&#39;)"><span class="mpre">checkPackageDbStack</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">PackageDBStack</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_573_1_573_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_20&#39;)"><span class="hl_fundecl"><span class="mpre">checkPackageDbStack</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Compiler.html#loc_112_18_112_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_18_112_33&#39;)"><span class="hl_conref"><span class="mpre">GlobalPackageDB</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_573_38_573_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_38_573_42&#39;)"><span class="hl_vardecl"><span class="mpre">rest</span></span></a><span class="mpre">)
  | </span><a href="Distribution.Simple.Compiler.html#loc_112_18_112_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_18_112_33&#39;)"><span class="hl_conref"><span class="mpre">GlobalPackageDB</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`notElem`</span></span><span class="mpre"> </span><a href="#loc_573_38_573_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_38_573_42&#39;)"><span class="hl_varref"><span class="mpre">rest</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
</span><a href="#loc_573_1_573_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_20&#39;)"><span class="hl_fundecl"><span class="mpre">checkPackageDbStack</span></span></a><span class="mpre"> </span><a name="loc_575_21_575_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_21_575_25&#39;)"><span class="hl_vardecl"><span class="mpre">rest</span></span></a><span class="mpre">
  | </span><a href="Distribution.Simple.Compiler.html#loc_112_18_112_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_18_112_33&#39;)"><span class="hl_conref"><span class="mpre">GlobalPackageDB</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`notElem`</span></span><span class="mpre"> </span><a href="#loc_575_21_575_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_21_575_25&#39;)"><span class="hl_varref"><span class="mpre">rest</span></span></a><span class="mpre"> =
  </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;With current ghc versions the global package db is always used &quot;</span></span><span class="mpre">
     </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;and must be listed first. This ghc limitation may be lifted in &quot;</span></span><span class="mpre">
     </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;future, see http://hackage.haskell.org/trac/ghc/ticket/5977&quot;</span></span><span class="mpre">
</span><a href="#loc_573_1_573_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_1_573_20&#39;)"><span class="hl_fundecl"><span class="mpre">checkPackageDbStack</span></span></a><span class="mpre"> _ =
  </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;If the global package db is specified, it must be &quot;</span></span><span class="mpre">
     </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;specified first and cannot be specified multiple times&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- GHC &lt; 6.10 put &quot;$topdir/include/mingw&quot; in rts&#39;s installDirs. This</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- breaks when you want to use a different gcc, so we need to filter</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it out.</span></span><span class="mpre">
</span><a href="#loc_588_1_588_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_1_588_22&#39;)"><span class="mpre">removeMingwIncludeDir</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
</span><a name="loc_588_1_588_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_1_588_22&#39;)"><span class="hl_fundecl"><span class="mpre">removeMingwIncludeDir</span></span></a><span class="mpre"> </span><a name="loc_588_23_588_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_23_588_26&#39;)"><span class="hl_vardecl"><span class="mpre">pkg</span></span></a><span class="mpre"> =
    let </span><a name="loc_589_9_589_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_9_589_12&#39;)"><span class="hl_vardecl"><span class="mpre">ids</span></span></a><span class="mpre"> = </span><a href="Distribution.InstalledPackageInfo.html#loc_117_9_117_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.InstalledPackageInfo.html#loc_117_9_117_20&#39;)"><span class="hl_varref"><span class="mpre">InstalledPackageInfo.includeDirs</span></span></a><span class="mpre"> </span><a href="#loc_588_23_588_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_23_588_26&#39;)"><span class="hl_varref"><span class="mpre">pkg</span></span></a><span class="mpre">
        </span><span class="hl_vardecl"><span class="mpre">ids&#39;</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;mingw&quot;</span></span><span class="mpre"> </span><a href="Data.List.html#loc_294_1_294_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_294_1_294_11&#39;)"><span class="hl_infix"><span class="mpre">`isSuffixOf`</span></span></a><span class="mpre">)) </span><a href="#loc_589_9_589_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_9_589_12&#39;)"><span class="hl_varref"><span class="mpre">ids</span></span></a><span class="mpre">
    in </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 591, srcSpanStartColumn = 8, srcSpanEndLine = 591, srcSpanEndColumn = 55}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 591, srcSpanStartColumn = 12, srcSpanEndLine = 591, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GH"><span class="mpre">pkg { InstalledPackageInfo.includeDirs = ids&#39; }</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Get the packages from specific PackageDBs, not cumulative.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_597_1_597_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_1_597_22&#39;)"><span class="mpre">getInstalledPackages&#39;</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; [</span><a href="Distribution.Simple.Compiler.html#loc_112_6_112_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_6_112_15&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDB</span></span></a><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre">
                     -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> [(</span><a href="Distribution.Simple.Compiler.html#loc_112_6_112_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_6_112_15&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDB</span></span></a><span class="mpre">, [</span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">])]
</span><a name="loc_597_1_597_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_1_597_22&#39;)"><span class="hl_fundecl"><span class="mpre">getInstalledPackages&#39;</span></span></a><span class="mpre"> </span><a name="loc_597_23_597_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_23_597_32&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_597_33_597_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_33_597_43&#39;)"><span class="hl_vardecl"><span class="mpre">packagedbs</span></span></a><span class="mpre"> </span><a name="loc_597_44_597_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_44_597_48&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre">
  | </span><a href="#loc_607_10_607_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_607_10_607_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">9</span></span><span class="mpre">] [] =
  </span><span class="hl_varref"><span class="mpre">sequence</span></span><span class="mpre">
    [ do </span><a name="loc_600_10_600_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_10_600_14&#39;)"><span class="hl_vardecl"><span class="mpre">pkgs</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.Simple.Program.HcPkg.html#loc_149_1_149_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.HcPkg.html#loc_149_1_149_5&#39;)"><span class="hl_varref"><span class="mpre">HcPkg.dump</span></span></a><span class="mpre"> </span><a href="#loc_597_23_597_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_23_597_32&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_605_10_605_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_605_10_605_20&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProg</span></span></a><span class="mpre"> </span><a href="#loc_602_7_602_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_602_7_602_16&#39;)"><span class="hl_varref"><span class="mpre">packagedb</span></span></a><span class="mpre">
         </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_602_7_602_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_602_7_602_16&#39;)"><span class="hl_varref"><span class="mpre">packagedb</span></span></a><span class="mpre">, </span><a href="#loc_600_10_600_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_600_10_600_14&#39;)"><span class="hl_varref"><span class="mpre">pkgs</span></span></a><span class="mpre">)
    | </span><a name="loc_602_7_602_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_602_7_602_16&#39;)"><span class="hl_vardecl"><span class="mpre">packagedb</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_597_33_597_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_33_597_43&#39;)"><span class="hl_varref"><span class="mpre">packagedbs</span></span></a><span class="mpre"> ]

  where
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_605_10_605_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_605_10_605_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkgProg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProgram</span></span></a><span class="mpre"> </span><a href="#loc_597_44_597_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_44_597_48&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_606_10_606_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_606_10_606_17&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">    = </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProgram</span></span></a><span class="mpre"> </span><a href="#loc_597_44_597_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_44_597_48&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_607_10_607_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_607_10_607_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">programVersion</span></span><span class="mpre"> </span><a href="#loc_606_10_606_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_606_10_606_17&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">

</span><a href="#loc_597_1_597_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_597_1_597_22&#39;)"><span class="hl_fundecl"><span class="mpre">getInstalledPackages&#39;</span></span></a><span class="mpre"> </span><a name="loc_609_23_609_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_609_23_609_32&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_609_33_609_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_609_33_609_43&#39;)"><span class="hl_vardecl"><span class="mpre">packagedbs</span></span></a><span class="mpre"> </span><a name="loc_609_44_609_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_609_44_609_48&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre"> = do
    </span><a name="loc_610_5_610_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_610_5_610_8&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.Simple.Program.html#loc_209_1_209_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_209_1_209_27&#39;)"><span class="hl_varref"><span class="mpre">rawSystemProgramStdoutConf</span></span></a><span class="mpre"> </span><a href="#loc_609_23_609_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_609_23_609_32&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProgram</span></span></a><span class="mpre"> </span><a href="#loc_609_44_609_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_609_44_609_48&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;list&quot;</span></span><span class="mpre">]
    let </span><a name="loc_611_9_611_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_611_9_611_17&#39;)"><span class="hl_vardecl"><span class="mpre">pkgFiles</span></span></a><span class="mpre"> = [ </span><span class="hl_varref"><span class="mpre">init</span></span><span class="mpre"> </span><a href="#loc_611_34_611_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_611_34_611_38&#39;)"><span class="hl_varref"><span class="mpre">line</span></span></a><span class="mpre"> | </span><a name="loc_611_34_611_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_611_34_611_38&#39;)"><span class="hl_vardecl"><span class="mpre">line</span></span></a><span class="mpre"> &lt;- </span><a href="Data.List.html#loc_1044_1_1044_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1044_1_1044_6&#39;)"><span class="hl_varref"><span class="mpre">lines</span></span></a><span class="mpre"> </span><a href="#loc_610_5_610_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_610_5_610_8&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">, </span><span class="hl_varref"><span class="mpre">last</span></span><span class="mpre"> </span><a href="#loc_611_34_611_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_611_34_611_38&#39;)"><span class="hl_varref"><span class="mpre">line</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;:&#39;</span></span><span class="mpre"> ]
        </span><a name="loc_612_9_612_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_612_9_612_15&#39;)"><span class="hl_fundecl"><span class="mpre">dbFile</span></span></a><span class="mpre"> </span><a name="loc_612_16_612_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_612_16_612_25&#39;)"><span class="hl_vardecl"><span class="mpre">packagedb</span></span></a><span class="mpre"> = case (</span><a href="#loc_612_16_612_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_612_16_612_25&#39;)"><span class="hl_varref"><span class="mpre">packagedb</span></span></a><span class="mpre">, </span><a href="#loc_611_9_611_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_611_9_611_17&#39;)"><span class="hl_varref"><span class="mpre">pkgFiles</span></span></a><span class="mpre">) of
          (</span><a href="Distribution.Simple.Compiler.html#loc_112_18_112_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_112_18_112_33&#39;)"><span class="hl_conref"><span class="mpre">GlobalPackageDB</span></span></a><span class="mpre">, </span><a name="loc_613_29_613_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_613_29_613_35&#39;)"><span class="hl_vardecl"><span class="mpre">global</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_)      -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_613_29_613_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_613_29_613_35&#39;)"><span class="hl_varref"><span class="mpre">global</span></span></a><span class="mpre">
          (</span><a href="Distribution.Simple.Compiler.html#loc_113_18_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_113_18_113_31&#39;)"><span class="hl_conref"><span class="mpre">UserPackageDB</span></span></a><span class="mpre">,  </span><span class="hl_vardecl"><span class="mpre">_global</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_614_36_614_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_36_614_40&#39;)"><span class="hl_vardecl"><span class="mpre">user</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_) -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_614_36_614_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_36_614_40&#39;)"><span class="hl_varref"><span class="mpre">user</span></span></a><span class="mpre">
          (</span><a href="Distribution.Simple.Compiler.html#loc_113_18_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_113_18_113_31&#39;)"><span class="hl_conref"><span class="mpre">UserPackageDB</span></span></a><span class="mpre">,  </span><span class="hl_vardecl"><span class="mpre">_global</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_)      -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
          (</span><a href="Distribution.Simple.Compiler.html#loc_114_18_114_35" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_114_18_114_35&#39;)"><span class="hl_conref"><span class="mpre">SpecificPackageDB</span></span></a><span class="mpre"> </span><a name="loc_616_30_616_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_616_30_616_38&#39;)"><span class="hl_vardecl"><span class="mpre">specific</span></span></a><span class="mpre">, _)  -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a href="#loc_616_30_616_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_616_30_616_38&#39;)"><span class="hl_varref"><span class="mpre">specific</span></span></a><span class="mpre">
          _ -&gt; </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;cannot read ghc-pkg package listing&quot;</span></span><span class="mpre">
    </span><a name="loc_618_5_618_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_618_5_618_14&#39;)"><span class="hl_vardecl"><span class="mpre">pkgFiles&#39;</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">mapM</span></span><span class="mpre"> </span><a href="#loc_612_9_612_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_612_9_612_15&#39;)"><span class="hl_varref"><span class="mpre">dbFile</span></span></a><span class="mpre"> </span><a href="#loc_609_33_609_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_609_33_609_43&#39;)"><span class="hl_varref"><span class="mpre">packagedbs</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">sequence</span></span><span class="mpre"> [ </span><a href="Distribution.Simple.Utils.html#loc_1058_1_1058_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_1058_1_1058_17&#39;)"><span class="hl_varref"><span class="mpre">withFileContents</span></span></a><span class="mpre"> </span><a href="#loc_622_27_622_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_27_622_31&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_619_41_619_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_41_619_48&#39;)"><span class="hl_vardecl"><span class="mpre">content</span></span></a><span class="mpre"> -&gt; do
                  </span><a name="loc_620_19_620_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_19_620_23&#39;)"><span class="hl_vardecl"><span class="mpre">pkgs</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_627_5_627_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_5_627_17&#39;)"><span class="hl_varref"><span class="mpre">readPackages</span></span></a><span class="mpre"> </span><a href="#loc_622_27_622_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_27_622_31&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre"> </span><a href="#loc_619_41_619_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_41_619_48&#39;)"><span class="hl_varref"><span class="mpre">content</span></span></a><span class="mpre">
                  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_622_17_622_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_17_622_19&#39;)"><span class="hl_varref"><span class="mpre">db</span></span></a><span class="mpre">, </span><a href="#loc_620_19_620_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_19_620_23&#39;)"><span class="hl_varref"><span class="mpre">pkgs</span></span></a><span class="mpre">)
             | (</span><a name="loc_622_17_622_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_17_622_19&#39;)"><span class="hl_vardecl"><span class="mpre">db</span></span></a><span class="mpre"> , </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_622_27_622_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_622_27_622_31&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> </span><a href="#loc_609_33_609_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_609_33_609_43&#39;)"><span class="hl_varref"><span class="mpre">packagedbs</span></span></a><span class="mpre"> </span><a href="#loc_618_5_618_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_618_5_618_14&#39;)"><span class="hl_varref"><span class="mpre">pkgFiles&#39;</span></span></a><span class="mpre"> ]
  where
    </span><span class="hl_comment"><span class="mpre">-- Depending on the version of ghc we use a different type&#39;s Read</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- instance to parse the package file and then convert.</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- It&#39;s a bit yuck. But that&#39;s what we get for using Read/Show.</span></span><span class="mpre">
    </span><a name="loc_627_5_627_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_5_627_17&#39;)"><span class="hl_vardecl"><span class="mpre">readPackages</span></span></a><span class="mpre">
      | </span><a href="#loc_637_10_637_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_10_637_20&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">] []
      = \</span><a name="loc_629_10_629_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_629_10_629_14&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre"> </span><a name="loc_629_15_629_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_629_15_629_22&#39;)"><span class="hl_vardecl"><span class="mpre">content</span></span></a><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">reads</span></span><span class="mpre"> </span><a href="#loc_629_15_629_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_629_15_629_22&#39;)"><span class="hl_varref"><span class="mpre">content</span></span></a><span class="mpre"> of
          [(</span><a name="loc_630_13_630_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_630_13_630_17&#39;)"><span class="hl_vardecl"><span class="mpre">pkgs</span></span></a><span class="mpre">, _)] -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Distribution.Simple.GHC.IPI642.html#loc_132_1_132_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.GHC.IPI642.html#loc_132_1_132_10&#39;)"><span class="hl_varref"><span class="mpre">IPI642.toCurrent</span></span></a><span class="mpre"> </span><a href="#loc_630_13_630_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_630_13_630_17&#39;)"><span class="hl_varref"><span class="mpre">pkgs</span></span></a><span class="mpre">)
          _           -&gt; </span><a href="#loc_638_5_638_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_5_638_15&#39;)"><span class="hl_varref"><span class="mpre">failToRead</span></span></a><span class="mpre"> </span><a href="#loc_629_10_629_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_629_10_629_14&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre">
      | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">
      = \</span><a name="loc_633_10_633_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_10_633_14&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre"> </span><a name="loc_633_15_633_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_15_633_22&#39;)"><span class="hl_vardecl"><span class="mpre">content</span></span></a><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">reads</span></span><span class="mpre"> </span><a href="#loc_633_15_633_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_15_633_22&#39;)"><span class="hl_varref"><span class="mpre">content</span></span></a><span class="mpre"> of
          [(</span><a name="loc_634_13_634_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_634_13_634_17&#39;)"><span class="hl_vardecl"><span class="mpre">pkgs</span></span></a><span class="mpre">, _)] -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Distribution.Simple.GHC.IPI641.html#loc_97_1_97_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.GHC.IPI641.html#loc_97_1_97_10&#39;)"><span class="hl_varref"><span class="mpre">IPI641.toCurrent</span></span></a><span class="mpre"> </span><a href="#loc_634_13_634_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_634_13_634_17&#39;)"><span class="hl_varref"><span class="mpre">pkgs</span></span></a><span class="mpre">)
          _           -&gt; </span><a href="#loc_638_5_638_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_5_638_15&#39;)"><span class="hl_varref"><span class="mpre">failToRead</span></span></a><span class="mpre"> </span><a href="#loc_633_10_633_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_10_633_14&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_636_10_636_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_10_636_17&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProgram</span></span></a><span class="mpre"> </span><a href="#loc_609_44_609_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_609_44_609_48&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_637_10_637_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_637_10_637_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">programVersion</span></span><span class="mpre"> </span><a href="#loc_636_10_636_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_10_636_17&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
    </span><a name="loc_638_5_638_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_5_638_15&#39;)"><span class="hl_fundecl"><span class="mpre">failToRead</span></span></a><span class="mpre"> </span><a name="loc_638_16_638_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_16_638_20&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;cannot read ghc package database &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_638_16_638_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_638_16_638_20&#39;)"><span class="hl_varref"><span class="mpre">file</span></span></a><span class="mpre">

</span><a href="#loc_641_1_641_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_1_641_12&#39;)"><span class="mpre">substTopDir</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
</span><a name="loc_641_1_641_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_1_641_12&#39;)"><span class="hl_fundecl"><span class="mpre">substTopDir</span></span></a><span class="mpre"> </span><a name="loc_641_13_641_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_13_641_19&#39;)"><span class="hl_vardecl"><span class="mpre">topDir</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">ipo</span></span><span class="mpre">
 = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 642, srcSpanStartColumn = 4, srcSpanEndLine = 655, srcSpanEndColumn = 5}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 642, srcSpanStartColumn = 8, srcSpanEndLine = 642, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.h"><span class="mpre">ipo {
       InstalledPackageInfo.importDirs
           = map f (InstalledPackageInfo.importDirs ipo),
       InstalledPackageInfo.libraryDirs
           = map f (InstalledPackageInfo.libraryDirs ipo),
       InstalledPackageInfo.includeDirs
           = map f (InstalledPackageInfo.includeDirs ipo),
       InstalledPackageInfo.frameworkDirs
           = map f (InstalledPackageInfo.frameworkDirs ipo),
       InstalledPackageInfo.haddockInterfaces
           = map f (InstalledPackageInfo.haddockInterfaces ipo),
       InstalledPackageInfo.haddockHTMLs
           = map f (InstalledPackageInfo.haddockHTMLs ipo)
   }</span></span><span class="mpre">
    where </span><a name="loc_656_11_656_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_11_656_12&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;$&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;t&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;o&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;p&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;d&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;i&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;r&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a name="loc_656_42_656_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_42_656_46&#39;)"><span class="hl_vardecl"><span class="mpre">rest</span></span></a><span class="mpre">) = </span><a href="#loc_641_13_641_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_13_641_19&#39;)"><span class="hl_varref"><span class="mpre">topDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_656_42_656_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_42_656_46&#39;)"><span class="hl_varref"><span class="mpre">rest</span></span></a><span class="mpre">
          </span><a href="#loc_656_11_656_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_11_656_12&#39;)"><span class="hl_fundecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_657_13_657_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_657_13_657_14&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = </span><a href="#loc_657_13_657_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_657_13_657_14&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Building</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Build a library with GHC.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_667_1_667_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_667_1_667_9&#39;)"><span class="mpre">buildLib</span></a><span class="mpre">, </span><a href="#loc_668_1_668_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_1_668_8&#39;)"><span class="mpre">replLib</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
                  -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                  -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">            -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_667_1_667_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_667_1_667_9&#39;)"><span class="hl_vardecl"><span class="mpre">buildLib</span></span></a><span class="mpre"> = </span><a href="#loc_673_1_673_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_1_673_15&#39;)"><span class="hl_varref"><span class="mpre">buildOrReplLib</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
</span><a name="loc_668_1_668_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_1_668_8&#39;)"><span class="hl_vardecl"><span class="mpre">replLib</span></span></a><span class="mpre">  = </span><a href="#loc_673_1_673_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_1_673_15&#39;)"><span class="hl_varref"><span class="mpre">buildOrReplLib</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">

</span><a href="#loc_673_1_673_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_1_673_15&#39;)"><span class="mpre">buildOrReplLib</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> -&gt; </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
               -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
               -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">            -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_673_1_673_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_1_673_15&#39;)"><span class="hl_fundecl"><span class="mpre">buildOrReplLib</span></span></a><span class="mpre"> </span><a name="loc_673_16_673_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_16_673_23&#39;)"><span class="hl_vardecl"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><a name="loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_673_34_673_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_34_673_43&#39;)"><span class="hl_vardecl"><span class="mpre">pkg_descr</span></span></a><span class="mpre"> </span><a name="loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a name="loc_673_52_673_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_52_673_56&#39;)"><span class="hl_vardecl"><span class="mpre">clbi</span></span></a><span class="mpre"> = do
  </span><a name="loc_674_3_674_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_674_3_674_10&#39;)"><span class="hl_vardecl"><span class="mpre">libName</span></span></a><span class="mpre"> &lt;- case </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_210_5_210_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_210_5_210_23&#39;)"><span class="hl_varref"><span class="mpre">componentLibraries</span></span></a><span class="mpre"> </span><a href="#loc_673_52_673_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_52_673_56&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre"> of
             [</span><a name="loc_675_15_675_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_675_15_675_22&#39;)"><span class="hl_vardecl"><span class="mpre">libName</span></span></a><span class="mpre">] -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_675_15_675_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_675_15_675_22&#39;)"><span class="hl_varref"><span class="mpre">libName</span></span></a><span class="mpre">
             [] -&gt; </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;No library name found when building library&quot;</span></span><span class="mpre">
             _  -&gt; </span><a href="Distribution.Simple.Utils.html#loc_251_1_251_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_251_1_251_4&#39;)"><span class="hl_varref"><span class="mpre">die</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Multiple library names found when building library&quot;</span></span><span class="mpre">

  let </span><a name="loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_vardecl"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_131_9_131_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_131_9_131_17&#39;)"><span class="hl_varref"><span class="mpre">buildDir</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">
      </span><span class="hl_vardecl"><span class="mpre">pkgid</span></span><span class="mpre"> = </span><a href="Distribution.Package.html#loc_184_3_184_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Package.html#loc_184_3_184_12&#39;)"><span class="hl_varref"><span class="mpre">packageId</span></span></a><span class="mpre"> </span><a href="#loc_673_34_673_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_34_673_43&#39;)"><span class="hl_varref"><span class="mpre">pkg_descr</span></span></a><span class="mpre">
      </span><a name="loc_681_7_681_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_7_681_21&#39;)"><span class="hl_fundecl"><span class="mpre">whenVanillaLib</span></span></a><span class="mpre"> </span><a name="loc_681_22_681_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_22_681_34&#39;)"><span class="hl_vardecl"><span class="mpre">forceVanilla</span></span></a><span class="mpre"> =
        </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><a href="#loc_673_16_673_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_16_673_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> (</span><a href="#loc_681_22_681_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_22_681_34&#39;)"><span class="hl_varref"><span class="mpre">forceVanilla</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23&#39;)"><span class="hl_varref"><span class="mpre">withVanillaLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">))
      </span><a name="loc_683_7_683_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_683_7_683_18&#39;)"><span class="hl_vardecl"><span class="mpre">whenProfLib</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><a href="#loc_673_16_673_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_16_673_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20&#39;)"><span class="hl_varref"><span class="mpre">withProfLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
      </span><a name="loc_684_7_684_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_7_684_20&#39;)"><span class="hl_fundecl"><span class="mpre">whenSharedLib</span></span></a><span class="mpre"> </span><a name="loc_684_21_684_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_21_684_32&#39;)"><span class="hl_vardecl"><span class="mpre">forceShared</span></span></a><span class="mpre"> =
        </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><a href="#loc_673_16_673_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_16_673_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre">  (</span><a href="#loc_684_21_684_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_21_684_32&#39;)"><span class="hl_varref"><span class="mpre">forceShared</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22&#39;)"><span class="hl_varref"><span class="mpre">withSharedLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">))
      </span><a name="loc_686_7_686_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_686_7_686_18&#39;)"><span class="hl_vardecl"><span class="mpre">whenGHCiLib</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><a href="#loc_673_16_673_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_16_673_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_155_9_155_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_155_9_155_20&#39;)"><span class="hl_varref"><span class="mpre">withGHCiLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23&#39;)"><span class="hl_varref"><span class="mpre">withVanillaLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
      </span><a name="loc_687_7_687_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_687_7_687_16&#39;)"><span class="hl_vardecl"><span class="mpre">ifReplLib</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_673_16_673_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_16_673_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre">
      </span><a name="loc_688_7_688_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_688_7_688_11&#39;)"><span class="hl_vardecl"><span class="mpre">comp</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">
      </span><a name="loc_689_7_689_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_7_689_17&#39;)"><span class="hl_vardecl"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Compiler.html#loc_99_1_99_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_99_1_99_16&#39;)"><span class="hl_varref"><span class="mpre">compilerVersion</span></span></a><span class="mpre"> </span><a href="#loc_688_7_688_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_688_7_688_11&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre">
      (</span><a href="Distribution.System.html#loc_164_17_164_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_164_17_164_25&#39;)"><span class="hl_conref"><span class="mpre">Platform</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_hostArch</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">hostOS</span></span><span class="mpre">) = </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_129_9_129_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_129_9_129_21&#39;)"><span class="hl_varref"><span class="mpre">hostPlatform</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">

  (</span><a name="loc_692_4_692_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_692_4_692_11&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
  let </span><a name="loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_vardecl"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.GHC.html#loc_212_1_212_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_212_1_212_7&#39;)"><span class="hl_varref"><span class="mpre">runGHC</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_692_4_692_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_692_4_692_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">

  </span><a name="loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_vardecl"><span class="mpre">libBi</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_1063_1_1063_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_1_1063_17&#39;)"><span class="hl_varref"><span class="mpre">hackThreadedFlag</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre">
             </span><a href="#loc_688_7_688_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_688_7_688_11&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20&#39;)"><span class="hl_varref"><span class="mpre">withProfLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) (</span><a href="Distribution.PackageDescription.html#loc_302_9_302_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_302_9_302_21&#39;)"><span class="hl_varref"><span class="mpre">libBuildInfo</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">)

  </span><a name="loc_698_3_698_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_3_698_15&#39;)"><span class="hl_vardecl"><span class="mpre">isGhcDynamic</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_1352_1_1352_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_1_1352_11&#39;)"><span class="hl_varref"><span class="mpre">ghcDynamic</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_692_4_692_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_692_4_692_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
  </span><a name="loc_699_3_699_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_699_3_699_22&#39;)"><span class="hl_vardecl"><span class="mpre">dynamicTooSupported</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_1359_1_1359_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1359_1_1359_22&#39;)"><span class="hl_varref"><span class="mpre">ghcSupportsDynamicToo</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_692_4_692_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_692_4_692_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
  let </span><a name="loc_700_7_700_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_700_7_700_14&#39;)"><span class="hl_vardecl"><span class="mpre">doingTH</span></span></a><span class="mpre"> = </span><a href="Language.Haskell.Extension.html#loc_120_5_120_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_120_5_120_20&#39;)"><span class="hl_conref"><span class="mpre">EnableExtension</span></span></a><span class="mpre"> </span><a href="Language.Haskell.Extension.html#loc_272_5_272_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_272_5_272_20&#39;)"><span class="hl_conref"><span class="mpre">TemplateHaskell</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`elem`</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_762_1_762_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_762_1_762_14&#39;)"><span class="hl_varref"><span class="mpre">allExtensions</span></span></a><span class="mpre"> </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre">
      </span><a name="loc_701_7_701_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_701_7_701_22&#39;)"><span class="hl_vardecl"><span class="mpre">forceVanillaLib</span></span></a><span class="mpre"> = </span><a href="#loc_700_7_700_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_700_7_700_14&#39;)"><span class="hl_varref"><span class="mpre">doingTH</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><a href="#loc_698_3_698_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_3_698_15&#39;)"><span class="hl_varref"><span class="mpre">isGhcDynamic</span></span></a><span class="mpre">
      </span><a name="loc_702_7_702_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_7_702_21&#39;)"><span class="hl_vardecl"><span class="mpre">forceSharedLib</span></span></a><span class="mpre">  = </span><a href="#loc_700_7_700_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_700_7_700_14&#39;)"><span class="hl_varref"><span class="mpre">doingTH</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre">     </span><a href="#loc_698_3_698_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_3_698_15&#39;)"><span class="hl_varref"><span class="mpre">isGhcDynamic</span></span></a><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- TH always needs default libs, even when building for profiling</span></span><span class="mpre">

  </span><a href="Distribution.Simple.Utils.html#loc_822_1_822_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_822_1_822_32&#39;)"><span class="hl_varref"><span class="mpre">createDirectoryIfMissingVerbose</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- TODO: do we need to put hs-boot files into place for mutually recursive</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- modules?</span></span><span class="mpre">
  let </span><a name="loc_708_7_708_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_708_7_708_12&#39;)"><span class="hl_vardecl"><span class="mpre">cObjs</span></span></a><span class="mpre">       = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">`replaceExtension`</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">) (</span><a href="Distribution.PackageDescription.html#loc_644_9_644_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_644_9_644_17&#39;)"><span class="hl_varref"><span class="mpre">cSources</span></span></a><span class="mpre"> </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre">)
      </span><a name="loc_709_7_709_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_709_7_709_15&#39;)"><span class="hl_vardecl"><span class="mpre">baseOpts</span></span></a><span class="mpre">    = </span><a href="#loc_1152_1_1152_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1152_1_1152_20&#39;)"><span class="hl_varref"><span class="mpre">componentGhcOptions</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre"> </span><a href="#loc_673_52_673_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_52_673_56&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre"> </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre">
      </span><a name="loc_710_7_710_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_710_7_710_18&#39;)"><span class="hl_vardecl"><span class="mpre">vanillaOpts</span></span></a><span class="mpre"> = </span><a href="#loc_709_7_709_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_709_7_709_15&#39;)"><span class="hl_varref"><span class="mpre">baseOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 710, srcSpanStartColumn = 40, srcSpanEndLine = 714, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 710, srcSpanStartColumn = 47, srcSpanEndLine = 710, srcSpanEndColumn = 48},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptMode         = toFlag GhcModeMake,
                      ghcOptPackageName  = toFlag pkgid,
                      ghcOptInputModules = libModules lib
                    }</span></span><span class="mpre">

      </span><a name="loc_716_7_716_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_716_7_716_15&#39;)"><span class="hl_vardecl"><span class="mpre">profOpts</span></span></a><span class="mpre">    = </span><a href="#loc_710_7_710_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_710_7_710_18&#39;)"><span class="hl_varref"><span class="mpre">vanillaOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 716, srcSpanStartColumn = 43, srcSpanEndLine = 721, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 716, srcSpanStartColumn = 50, srcSpanEndLine = 716, srcSpanEndColumn = 51},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptProfilingMode = toFlag True,
                      ghcOptHiSuffix      = toFlag &quot;p_hi&quot;,
                      ghcOptObjSuffix     = toFlag &quot;p_o&quot;,
                      ghcOptExtra         = ghcProfOptions libBi
                    }</span></span><span class="mpre">

      </span><a name="loc_723_7_723_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_723_7_723_17&#39;)"><span class="hl_vardecl"><span class="mpre">sharedOpts</span></span></a><span class="mpre">  = </span><a href="#loc_710_7_710_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_710_7_710_18&#39;)"><span class="hl_varref"><span class="mpre">vanillaOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 723, srcSpanStartColumn = 43, srcSpanEndLine = 729, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 723, srcSpanStartColumn = 50, srcSpanEndLine = 723, srcSpanEndColumn = 51},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptDynLinkMode = toFlag GhcDynamicOnly,
                      ghcOptFPic        = toFlag True,
                      ghcOptHiSuffix    = toFlag &quot;dyn_hi&quot;,
                      ghcOptObjSuffix   = toFlag &quot;dyn_o&quot;,
                      ghcOptExtra       = ghcSharedOptions libBi
                    }</span></span><span class="mpre">
      </span><a name="loc_730_7_730_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_730_7_730_17&#39;)"><span class="hl_vardecl"><span class="mpre">linkerOpts</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 730, srcSpanStartColumn = 20, srcSpanEndLine = 736, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 730, srcSpanStartColumn = 27, srcSpanEndLine = 730, srcSpanEndColumn = 28},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptLinkOptions    = PD.ldOptions libBi,
                      ghcOptLinkLibs       = extraLibs libBi,
                      ghcOptLinkLibPath    = extraLibDirs libBi,
                      ghcOptLinkFrameworks = PD.frameworks libBi,
                      ghcOptInputFiles     = [libTargetDir &lt;/&gt; x | x &lt;- cObjs]
                   }</span></span><span class="mpre">
      </span><a name="loc_737_7_737_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_737_7_737_15&#39;)"><span class="hl_vardecl"><span class="mpre">replOpts</span></span></a><span class="mpre">    = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 737, srcSpanStartColumn = 21, srcSpanEndLine = 740, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 737, srcSpanStartColumn = 33, srcSpanEndLine = 737, srcSpanEndColumn = 34},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">vanillaOpts {
                      ghcOptExtra        = filterGhciFlags
                                           (ghcOptExtra vanillaOpts)
                    }</span></span><span class="mpre">
                    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_730_7_730_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_730_7_730_17&#39;)"><span class="hl_varref"><span class="mpre">linkerOpts</span></span></a><span class="mpre">
                    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 742, srcSpanStartColumn = 31, srcSpanEndLine = 745, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 742, srcSpanStartColumn = 38, srcSpanEndLine = 742, srcSpanEndColumn = 39},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptMode         = toFlag GhcModeInteractive,
                      ghcOptOptimisation = toFlag GhcNoOptimisation
                    }</span></span><span class="mpre">

      </span><a name="loc_747_7_747_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_7_747_24&#39;)"><span class="hl_vardecl"><span class="mpre">vanillaSharedOpts</span></span></a><span class="mpre"> = </span><a href="#loc_710_7_710_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_710_7_710_18&#39;)"><span class="hl_varref"><span class="mpre">vanillaOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 747, srcSpanStartColumn = 49, srcSpanEndLine = 751, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 747, srcSpanStartColumn = 56, srcSpanEndLine = 747, srcSpanEndColumn = 57},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptDynLinkMode  = toFlag GhcStaticAndDynamic,
                      ghcOptDynHiSuffix  = toFlag &quot;dyn_hi&quot;,
                      ghcOptDynObjSuffix = toFlag &quot;dyn_o&quot;
                    }</span></span><span class="mpre">

  </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    do let </span><a name="loc_754_12_754_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_754_12_754_19&#39;)"><span class="hl_vardecl"><span class="mpre">vanilla</span></span></a><span class="mpre"> = </span><a href="#loc_681_7_681_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_7_681_21&#39;)"><span class="hl_varref"><span class="mpre">whenVanillaLib</span></span></a><span class="mpre"> </span><a href="#loc_701_7_701_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_701_7_701_22&#39;)"><span class="hl_varref"><span class="mpre">forceVanillaLib</span></span></a><span class="mpre"> (</span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_710_7_710_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_710_7_710_18&#39;)"><span class="hl_varref"><span class="mpre">vanillaOpts</span></span></a><span class="mpre">)
           </span><a name="loc_755_12_755_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_755_12_755_18&#39;)"><span class="hl_vardecl"><span class="mpre">shared</span></span></a><span class="mpre">  = </span><a href="#loc_684_7_684_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_7_684_20&#39;)"><span class="hl_varref"><span class="mpre">whenSharedLib</span></span></a><span class="mpre">  </span><a href="#loc_702_7_702_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_7_702_21&#39;)"><span class="hl_varref"><span class="mpre">forceSharedLib</span></span></a><span class="mpre">  (</span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_723_7_723_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_723_7_723_17&#39;)"><span class="hl_varref"><span class="mpre">sharedOpts</span></span></a><span class="mpre">)
           </span><a name="loc_756_12_756_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_756_12_756_21&#39;)"><span class="hl_vardecl"><span class="mpre">useDynToo</span></span></a><span class="mpre"> = </span><a href="#loc_699_3_699_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_699_3_699_22&#39;)"><span class="hl_varref"><span class="mpre">dynamicTooSupported</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre">
                       (</span><a href="#loc_701_7_701_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_701_7_701_22&#39;)"><span class="hl_varref"><span class="mpre">forceVanillaLib</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23&#39;)"><span class="hl_varref"><span class="mpre">withVanillaLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre">
                       (</span><a href="#loc_702_7_702_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_7_702_21&#39;)"><span class="hl_varref"><span class="mpre">forceSharedLib</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22&#39;)"><span class="hl_varref"><span class="mpre">withSharedLib</span></span></a><span class="mpre">  </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre">
                       </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_661_9_661_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_661_9_661_25&#39;)"><span class="hl_varref"><span class="mpre">ghcSharedOptions</span></span></a><span class="mpre"> </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre">)
       if </span><a href="#loc_756_12_756_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_756_12_756_21&#39;)"><span class="hl_varref"><span class="mpre">useDynToo</span></span></a><span class="mpre">
           then </span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_747_7_747_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_7_747_24&#39;)"><span class="hl_varref"><span class="mpre">vanillaSharedOpts</span></span></a><span class="mpre">
           else if </span><a href="#loc_698_3_698_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_3_698_15&#39;)"><span class="hl_varref"><span class="mpre">isGhcDynamic</span></span></a><span class="mpre"> then do </span><a href="#loc_755_12_755_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_755_12_755_18&#39;)"><span class="hl_varref"><span class="mpre">shared</span></span></a><span class="mpre">;  </span><a href="#loc_754_12_754_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_754_12_754_19&#39;)"><span class="hl_varref"><span class="mpre">vanilla</span></span></a><span class="mpre">
                                else do </span><a href="#loc_754_12_754_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_754_12_754_19&#39;)"><span class="hl_varref"><span class="mpre">vanilla</span></span></a><span class="mpre">; </span><a href="#loc_755_12_755_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_755_12_755_18&#39;)"><span class="hl_varref"><span class="mpre">shared</span></span></a><span class="mpre">
       </span><a href="#loc_683_7_683_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_683_7_683_18&#39;)"><span class="hl_varref"><span class="mpre">whenProfLib</span></span></a><span class="mpre"> (</span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_716_7_716_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_716_7_716_15&#39;)"><span class="hl_varref"><span class="mpre">profOpts</span></span></a><span class="mpre">)

  </span><span class="hl_comment"><span class="mpre">-- build any C sources</span></span><span class="mpre">
  </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_644_9_644_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_644_9_644_17&#39;)"><span class="hl_varref"><span class="mpre">cSources</span></span></a><span class="mpre"> </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
     </span><a href="Distribution.Simple.Utils.html#loc_305_1_305_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_305_1_305_5&#39;)"><span class="hl_varref"><span class="mpre">info</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Building C Sources...&quot;</span></span><span class="mpre">
     </span><span class="hl_varref"><span class="mpre">sequence_</span></span><span class="mpre">
       [ do let </span><a name="loc_770_17_770_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_770_17_770_30&#39;)"><span class="hl_vardecl"><span class="mpre">vanillaCcOpts</span></span></a><span class="mpre"> = (</span><a href="#loc_1189_1_1189_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_1_1189_22&#39;)"><span class="hl_varref"><span class="mpre">componentCcGhcOptions</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">
                                    </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre"> </span><a href="#loc_673_52_673_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_52_673_56&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre"> </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><a href="#loc_786_10_786_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_10_786_18&#39;)"><span class="hl_varref"><span class="mpre">filename</span></span></a><span class="mpre">)
                </span><a name="loc_772_17_772_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_17_772_27&#39;)"><span class="hl_vardecl"><span class="mpre">profCcOpts</span></span></a><span class="mpre">    = </span><a href="#loc_770_17_770_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_770_17_770_30&#39;)"><span class="hl_varref"><span class="mpre">vanillaCcOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 772, srcSpanStartColumn = 57, srcSpanEndLine = 775, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 772, srcSpanStartColumn = 64, srcSpanEndLine = 772, srcSpanEndColumn = 65},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                                  ghcOptProfilingMode = toFlag True,
                                  ghcOptObjSuffix     = toFlag &quot;p_o&quot;
                                }</span></span><span class="mpre">
                </span><a name="loc_776_17_776_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_776_17_776_29&#39;)"><span class="hl_vardecl"><span class="mpre">sharedCcOpts</span></span></a><span class="mpre">  = </span><a href="#loc_770_17_770_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_770_17_770_30&#39;)"><span class="hl_varref"><span class="mpre">vanillaCcOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 776, srcSpanStartColumn = 57, srcSpanEndLine = 780, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 776, srcSpanStartColumn = 64, srcSpanEndLine = 776, srcSpanEndColumn = 65},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                                  ghcOptFPic        = toFlag True,
                                  ghcOptDynLinkMode = toFlag GhcDynamicOnly,
                                  ghcOptObjSuffix   = toFlag &quot;dyn_o&quot;
                                }</span></span><span class="mpre">
                </span><a name="loc_781_17_781_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_781_17_781_21&#39;)"><span class="hl_vardecl"><span class="mpre">odir</span></span></a><span class="mpre">          = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Program.GHC.html#loc_165_3_165_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_165_3_165_15&#39;)"><span class="hl_varref"><span class="mpre">ghcOptObjDir</span></span></a><span class="mpre"> </span><a href="#loc_770_17_770_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_770_17_770_30&#39;)"><span class="hl_varref"><span class="mpre">vanillaCcOpts</span></span></a><span class="mpre">)
            </span><a href="Distribution.Simple.Utils.html#loc_822_1_822_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_822_1_822_32&#39;)"><span class="hl_varref"><span class="mpre">createDirectoryIfMissingVerbose</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> </span><a href="#loc_781_17_781_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_781_17_781_21&#39;)"><span class="hl_varref"><span class="mpre">odir</span></span></a><span class="mpre">
            </span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_770_17_770_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_770_17_770_30&#39;)"><span class="hl_varref"><span class="mpre">vanillaCcOpts</span></span></a><span class="mpre">
            </span><a href="#loc_684_7_684_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_7_684_20&#39;)"><span class="hl_varref"><span class="mpre">whenSharedLib</span></span></a><span class="mpre"> </span><a href="#loc_702_7_702_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_702_7_702_21&#39;)"><span class="hl_varref"><span class="mpre">forceSharedLib</span></span></a><span class="mpre"> (</span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_776_17_776_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_776_17_776_29&#39;)"><span class="hl_varref"><span class="mpre">sharedCcOpts</span></span></a><span class="mpre">)
            </span><a href="#loc_683_7_683_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_683_7_683_18&#39;)"><span class="hl_varref"><span class="mpre">whenProfLib</span></span></a><span class="mpre"> (</span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_772_17_772_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_17_772_27&#39;)"><span class="hl_varref"><span class="mpre">profCcOpts</span></span></a><span class="mpre">)
       | </span><a name="loc_786_10_786_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_786_10_786_18&#39;)"><span class="hl_vardecl"><span class="mpre">filename</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.PackageDescription.html#loc_644_9_644_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_644_9_644_17&#39;)"><span class="hl_varref"><span class="mpre">cSources</span></span></a><span class="mpre"> </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre">]

  </span><span class="hl_comment"><span class="mpre">-- TODO: problem here is we need the .c files built first, so we can load them</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- with ghci, but .c files can depend on .h files generated by ghc by ffi</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- exports.</span></span><span class="mpre">
  </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
     </span><a href="#loc_687_7_687_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_687_7_687_16&#39;)"><span class="hl_varref"><span class="mpre">ifReplLib</span></span></a><span class="mpre"> (</span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_737_7_737_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_737_7_737_15&#39;)"><span class="hl_varref"><span class="mpre">replOpts</span></span></a><span class="mpre">)


  </span><span class="hl_comment"><span class="mpre">-- link:</span></span><span class="mpre">
  </span><a href="Distribution.Simple.Utils.html#loc_305_1_305_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_305_1_305_5&#39;)"><span class="hl_varref"><span class="mpre">info</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Linking...&quot;</span></span><span class="mpre">
  let </span><a name="loc_797_7_797_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_797_7_797_16&#39;)"><span class="hl_vardecl"><span class="mpre">cProfObjs</span></span></a><span class="mpre">   = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">`replaceExtension`</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;p_&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">))
                    (</span><a href="Distribution.PackageDescription.html#loc_644_9_644_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_644_9_644_17&#39;)"><span class="hl_varref"><span class="mpre">cSources</span></span></a><span class="mpre"> </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre">)
      </span><a name="loc_799_7_799_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_799_7_799_18&#39;)"><span class="hl_vardecl"><span class="mpre">cSharedObjs</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">`replaceExtension`</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;dyn_&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">))
                    (</span><a href="Distribution.PackageDescription.html#loc_644_9_644_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_644_9_644_17&#39;)"><span class="hl_varref"><span class="mpre">cSources</span></span></a><span class="mpre"> </span><a href="#loc_695_3_695_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_3_695_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre">)
      </span><a name="loc_801_7_801_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_7_801_10&#39;)"><span class="hl_vardecl"><span class="mpre">cid</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Compiler.html#loc_86_9_86_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_86_9_86_19&#39;)"><span class="hl_varref"><span class="mpre">compilerId</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
      </span><a name="loc_802_7_802_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_7_802_25&#39;)"><span class="hl_vardecl"><span class="mpre">vanillaLibFilePath</span></span></a><span class="mpre"> = </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_114_1_114_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_114_1_114_10&#39;)"><span class="hl_varref"><span class="mpre">mkLibName</span></span></a><span class="mpre">           </span><a href="#loc_674_3_674_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_674_3_674_10&#39;)"><span class="hl_varref"><span class="mpre">libName</span></span></a><span class="mpre">
      </span><a name="loc_803_7_803_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_7_803_25&#39;)"><span class="hl_vardecl"><span class="mpre">profileLibFilePath</span></span></a><span class="mpre"> = </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_117_1_117_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_117_1_117_14&#39;)"><span class="hl_varref"><span class="mpre">mkProfLibName</span></span></a><span class="mpre">       </span><a href="#loc_674_3_674_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_674_3_674_10&#39;)"><span class="hl_varref"><span class="mpre">libName</span></span></a><span class="mpre">
      </span><a name="loc_804_7_804_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_7_804_24&#39;)"><span class="hl_vardecl"><span class="mpre">sharedLibFilePath</span></span></a><span class="mpre">  = </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_123_1_123_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_123_1_123_16&#39;)"><span class="hl_varref"><span class="mpre">mkSharedLibName</span></span></a><span class="mpre"> </span><a href="#loc_801_7_801_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_7_801_10&#39;)"><span class="hl_varref"><span class="mpre">cid</span></span></a><span class="mpre"> </span><a href="#loc_674_3_674_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_674_3_674_10&#39;)"><span class="hl_varref"><span class="mpre">libName</span></span></a><span class="mpre">
      </span><a name="loc_805_7_805_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_7_805_22&#39;)"><span class="hl_vardecl"><span class="mpre">ghciLibFilePath</span></span></a><span class="mpre">    = </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_1211_1_1211_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1211_1_1211_14&#39;)"><span class="hl_varref"><span class="mpre">mkGHCiLibName</span></span></a><span class="mpre">       </span><a href="#loc_674_3_674_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_674_3_674_10&#39;)"><span class="hl_varref"><span class="mpre">libName</span></span></a><span class="mpre">
      </span><a name="loc_806_7_806_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_806_7_806_21&#39;)"><span class="hl_vardecl"><span class="mpre">libInstallPath</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.InstallDirs.html#loc_108_9_108_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_108_9_108_15&#39;)"><span class="hl_varref"><span class="mpre">libdir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_416_1_416_20&#39;)"><span class="hl_varref"><span class="mpre">absoluteInstallDirs</span></span></a><span class="mpre"> </span><a href="#loc_673_34_673_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_34_673_43&#39;)"><span class="hl_varref"><span class="mpre">pkg_descr</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.InstallDirs.html#loc_331_5_331_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_331_5_331_15&#39;)"><span class="hl_conref"><span class="mpre">NoCopyDest</span></span></a><span class="mpre">
      </span><span class="hl_vardecl"><span class="mpre">sharedLibInstallPath</span></span><span class="mpre"> = </span><a href="#loc_806_7_806_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_806_7_806_21&#39;)"><span class="hl_varref"><span class="mpre">libInstallPath</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_123_1_123_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_123_1_123_16&#39;)"><span class="hl_varref"><span class="mpre">mkSharedLibName</span></span></a><span class="mpre"> </span><a href="#loc_801_7_801_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_7_801_10&#39;)"><span class="hl_varref"><span class="mpre">cid</span></span></a><span class="mpre"> </span><a href="#loc_674_3_674_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_674_3_674_10&#39;)"><span class="hl_varref"><span class="mpre">libName</span></span></a><span class="mpre">

  </span><a name="loc_809_3_809_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_809_3_809_11&#39;)"><span class="hl_vardecl"><span class="mpre">stubObjs</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_115_1_115_10&#39;)"><span class="hl_varref"><span class="mpre">catMaybes</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sequence</span></span><span class="mpre">
    [ </span><a href="Distribution.Simple.Utils.html#loc_660_1_660_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_660_1_660_22&#39;)"><span class="hl_varref"><span class="mpre">findFileWithExtension</span></span></a><span class="mpre"> [</span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">] [</span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre">]
        (</span><a href="Distribution.ModuleName.html#loc_133_1_133_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.ModuleName.html#loc_133_1_133_11&#39;)"><span class="hl_varref"><span class="mpre">ModuleName.toFilePath</span></span></a><span class="mpre"> </span><a href="#loc_813_7_813_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_813_7_813_8&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="hl_string"><span class="mpre">&quot;_stub&quot;</span></span><span class="mpre">)
    | </span><a href="#loc_689_7_689_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_7_689_17&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">7</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">] [] </span><span class="hl_comment"><span class="mpre">-- ghc-7.2+ does not make _stub.o files</span></span><span class="mpre">
    , </span><a name="loc_813_7_813_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_813_7_813_8&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> ]
  </span><a name="loc_814_3_814_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_814_3_814_15&#39;)"><span class="hl_vardecl"><span class="mpre">stubProfObjs</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_115_1_115_10&#39;)"><span class="hl_varref"><span class="mpre">catMaybes</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sequence</span></span><span class="mpre">
    [ </span><a href="Distribution.Simple.Utils.html#loc_660_1_660_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_660_1_660_22&#39;)"><span class="hl_varref"><span class="mpre">findFileWithExtension</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;p_&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">] [</span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre">]
        (</span><a href="Distribution.ModuleName.html#loc_133_1_133_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.ModuleName.html#loc_133_1_133_11&#39;)"><span class="hl_varref"><span class="mpre">ModuleName.toFilePath</span></span></a><span class="mpre"> </span><a href="#loc_818_7_818_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_818_7_818_8&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="hl_string"><span class="mpre">&quot;_stub&quot;</span></span><span class="mpre">)
    | </span><a href="#loc_689_7_689_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_7_689_17&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">7</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">] [] </span><span class="hl_comment"><span class="mpre">-- ghc-7.2+ does not make _stub.o files</span></span><span class="mpre">
    , </span><a name="loc_818_7_818_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_818_7_818_8&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> ]
  </span><a name="loc_819_3_819_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_819_3_819_17&#39;)"><span class="hl_vardecl"><span class="mpre">stubSharedObjs</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_115_1_115_10&#39;)"><span class="hl_varref"><span class="mpre">catMaybes</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sequence</span></span><span class="mpre">
    [ </span><a href="Distribution.Simple.Utils.html#loc_660_1_660_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_660_1_660_22&#39;)"><span class="hl_varref"><span class="mpre">findFileWithExtension</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;dyn_&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">] [</span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre">]
        (</span><a href="Distribution.ModuleName.html#loc_133_1_133_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.ModuleName.html#loc_133_1_133_11&#39;)"><span class="hl_varref"><span class="mpre">ModuleName.toFilePath</span></span></a><span class="mpre"> </span><a href="#loc_823_7_823_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_823_7_823_8&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="hl_string"><span class="mpre">&quot;_stub&quot;</span></span><span class="mpre">)
    | </span><a href="#loc_689_7_689_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_7_689_17&#39;)"><span class="hl_varref"><span class="mpre">ghcVersion</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">7</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">2</span></span><span class="mpre">] [] </span><span class="hl_comment"><span class="mpre">-- ghc-7.2+ does not make _stub.o files</span></span><span class="mpre">
    , </span><a name="loc_823_7_823_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_823_7_823_8&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> ]

  </span><a name="loc_825_3_825_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_825_3_825_8&#39;)"><span class="hl_vardecl"><span class="mpre">hObjs</span></span></a><span class="mpre">     &lt;- </span><a href="#loc_1093_1_1093_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_1_1093_18&#39;)"><span class="hl_varref"><span class="mpre">getHaskellObjects</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">
                    </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
  </span><a name="loc_827_3_827_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_827_3_827_12&#39;)"><span class="hl_vardecl"><span class="mpre">hProfObjs</span></span></a><span class="mpre"> &lt;-
    if (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20&#39;)"><span class="hl_varref"><span class="mpre">withProfLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
            then </span><a href="#loc_1093_1_1093_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_1_1093_18&#39;)"><span class="hl_varref"><span class="mpre">getHaskellObjects</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">
                    </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;p_&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">) </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
            else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> []
  </span><a name="loc_832_3_832_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_832_3_832_14&#39;)"><span class="hl_vardecl"><span class="mpre">hSharedObjs</span></span></a><span class="mpre"> &lt;-
    if (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22&#39;)"><span class="hl_varref"><span class="mpre">withSharedLib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
            then </span><a href="#loc_1093_1_1093_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_1_1093_18&#39;)"><span class="hl_varref"><span class="mpre">getHaskellObjects</span></span></a><span class="mpre"> </span><a href="#loc_673_48_673_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_48_673_51&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">
                    </span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;dyn_&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">) </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
            else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> []

  </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> </span><a href="#loc_825_3_825_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_825_3_825_8&#39;)"><span class="hl_varref"><span class="mpre">hObjs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> </span><a href="#loc_708_7_708_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_708_7_708_12&#39;)"><span class="hl_varref"><span class="mpre">cObjs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> </span><a href="#loc_809_3_809_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_809_3_809_11&#39;)"><span class="hl_varref"><span class="mpre">stubObjs</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    </span><span class="hl_comment"><span class="mpre">-- first remove library files if they exists</span></span><span class="mpre">
    </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> </span><a href="#loc_673_16_673_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_16_673_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sequence_</span></span><span class="mpre">
      [ </span><a href="System.Directory.html#loc_400_1_400_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_400_1_400_11&#39;)"><span class="hl_varref"><span class="mpre">removeFile</span></span></a><span class="mpre"> </span><a href="#loc_842_9_842_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_9_842_20&#39;)"><span class="hl_varref"><span class="mpre">libFilePath</span></span></a><span class="mpre"> </span><a href="Distribution.Compat.Exception.html#loc_14_1_14_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compat.Exception.html#loc_14_1_14_8&#39;)"><span class="hl_infix"><span class="mpre">`catchIO`</span></span></a><span class="mpre"> \_ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
      | </span><a name="loc_842_9_842_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_9_842_20&#39;)"><span class="hl_vardecl"><span class="mpre">libFilePath</span></span></a><span class="mpre"> &lt;- [</span><a href="#loc_802_7_802_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_7_802_25&#39;)"><span class="hl_varref"><span class="mpre">vanillaLibFilePath</span></span></a><span class="mpre">, </span><a href="#loc_803_7_803_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_7_803_25&#39;)"><span class="hl_varref"><span class="mpre">profileLibFilePath</span></span></a><span class="mpre">
                       ,</span><a href="#loc_804_7_804_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_804_7_804_24&#39;)"><span class="hl_varref"><span class="mpre">sharedLibFilePath</span></span></a><span class="mpre">,  </span><a href="#loc_805_7_805_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_7_805_22&#39;)"><span class="hl_varref"><span class="mpre">ghciLibFilePath</span></span></a><span class="mpre">] ]

    let </span><a name="loc_845_9_845_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_845_9_845_26&#39;)"><span class="hl_vardecl"><span class="mpre">staticObjectFiles</span></span></a><span class="mpre"> =
               </span><a href="#loc_825_3_825_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_825_3_825_8&#39;)"><span class="hl_varref"><span class="mpre">hObjs</span></span></a><span class="mpre">
            </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre">) </span><a href="#loc_708_7_708_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_708_7_708_12&#39;)"><span class="hl_varref"><span class="mpre">cObjs</span></span></a><span class="mpre">
            </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_809_3_809_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_809_3_809_11&#39;)"><span class="hl_varref"><span class="mpre">stubObjs</span></span></a><span class="mpre">
        </span><a name="loc_849_9_849_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_9_849_24&#39;)"><span class="hl_vardecl"><span class="mpre">profObjectFiles</span></span></a><span class="mpre"> =
               </span><a href="#loc_827_3_827_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_827_3_827_12&#39;)"><span class="hl_varref"><span class="mpre">hProfObjs</span></span></a><span class="mpre">
            </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre">) </span><a href="#loc_797_7_797_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_797_7_797_16&#39;)"><span class="hl_varref"><span class="mpre">cProfObjs</span></span></a><span class="mpre">
            </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_814_3_814_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_814_3_814_15&#39;)"><span class="hl_varref"><span class="mpre">stubProfObjs</span></span></a><span class="mpre">
        </span><a name="loc_853_9_853_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_853_9_853_21&#39;)"><span class="hl_vardecl"><span class="mpre">ghciObjFiles</span></span></a><span class="mpre"> =
               </span><a href="#loc_825_3_825_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_825_3_825_8&#39;)"><span class="hl_varref"><span class="mpre">hObjs</span></span></a><span class="mpre">
            </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre">) </span><a href="#loc_708_7_708_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_708_7_708_12&#39;)"><span class="hl_varref"><span class="mpre">cObjs</span></span></a><span class="mpre">
            </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_809_3_809_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_809_3_809_11&#39;)"><span class="hl_varref"><span class="mpre">stubObjs</span></span></a><span class="mpre">
        </span><span class="hl_vardecl"><span class="mpre">dynamicObjectFiles</span></span><span class="mpre"> =
               </span><a href="#loc_832_3_832_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_832_3_832_14&#39;)"><span class="hl_varref"><span class="mpre">hSharedObjs</span></span></a><span class="mpre">
            </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="#loc_679_7_679_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_7_679_19&#39;)"><span class="hl_varref"><span class="mpre">libTargetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre">) </span><a href="#loc_799_7_799_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_799_7_799_18&#39;)"><span class="hl_varref"><span class="mpre">cSharedObjs</span></span></a><span class="mpre">
            </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_819_3_819_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_819_3_819_17&#39;)"><span class="hl_varref"><span class="mpre">stubSharedObjs</span></span></a><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- After the relocation lib is created we invoke ghc -shared</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- with the dependencies spelled out as -package arguments</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- and ghc invokes the linker with the proper library paths</span></span><span class="mpre">
        </span><a name="loc_864_9_864_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_864_9_864_26&#39;)"><span class="hl_vardecl"><span class="mpre">ghcSharedLinkArgs</span></span></a><span class="mpre"> =
            </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 865, srcSpanStartColumn = 13, srcSpanEndLine = 883, srcSpanEndColumn = 14}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 865, srcSpanStartColumn = 20, srcSpanEndLine = 865, srcSpanEndColumn = 21},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
              ghcOptShared             = toFlag True,
              ghcOptDynLinkMode        = toFlag GhcDynamicOnly,
              ghcOptInputFiles         = dynamicObjectFiles,
              ghcOptOutputFile         = toFlag sharedLibFilePath,
              </span><span class="hl_comment"><span class="mpre">-- For dynamic libs, Mac OS/X needs to know the install location</span></span><span class="mpre">
              </span><span class="hl_comment"><span class="mpre">-- at build time. This only applies to GHC &lt; 7.8 - see the</span></span><span class="mpre">
              </span><span class="hl_comment"><span class="mpre">-- discussion in #1660.</span></span><span class="mpre">
              ghcOptDylibName          = if (hostOS == OSX
                                             &amp;&amp; ghcVersion &lt; Version [7,8] [])
                                          then toFlag sharedLibInstallPath
                                          else mempty,
              ghcOptPackageName        = toFlag pkgid,
              ghcOptNoAutoLinkPackages = toFlag True,
              ghcOptPackageDBs         = withPackageDB lbi,
              ghcOptPackages           = componentPackageDeps clbi,
              ghcOptLinkLibs           = extraLibs libBi,
              ghcOptLinkLibPath        = extraLibDirs libBi
            }</span></span><span class="mpre">

    </span><a href="#loc_681_7_681_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_681_7_681_21&#39;)"><span class="hl_varref"><span class="mpre">whenVanillaLib</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
      (</span><a name="loc_886_8_886_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_886_8_886_14&#39;)"><span class="hl_vardecl"><span class="mpre">arProg</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_207_1_207_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_207_1_207_10&#39;)"><span class="hl_varref"><span class="mpre">arProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
      </span><a href="Distribution.Simple.Program.Ar.html#loc_30_1_30_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Ar.html#loc_30_1_30_19&#39;)"><span class="hl_varref"><span class="mpre">Ar.createArLibArchive</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_886_8_886_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_886_8_886_14&#39;)"><span class="hl_varref"><span class="mpre">arProg</span></span></a><span class="mpre">
        </span><a href="#loc_802_7_802_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_802_7_802_25&#39;)"><span class="hl_varref"><span class="mpre">vanillaLibFilePath</span></span></a><span class="mpre"> </span><a href="#loc_845_9_845_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_845_9_845_26&#39;)"><span class="hl_varref"><span class="mpre">staticObjectFiles</span></span></a><span class="mpre">

    </span><a href="#loc_683_7_683_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_683_7_683_18&#39;)"><span class="hl_varref"><span class="mpre">whenProfLib</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
      (</span><a name="loc_891_8_891_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_891_8_891_14&#39;)"><span class="hl_vardecl"><span class="mpre">arProg</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_207_1_207_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_207_1_207_10&#39;)"><span class="hl_varref"><span class="mpre">arProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
      </span><a href="Distribution.Simple.Program.Ar.html#loc_30_1_30_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Ar.html#loc_30_1_30_19&#39;)"><span class="hl_varref"><span class="mpre">Ar.createArLibArchive</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_891_8_891_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_891_8_891_14&#39;)"><span class="hl_varref"><span class="mpre">arProg</span></span></a><span class="mpre">
        </span><a href="#loc_803_7_803_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_803_7_803_25&#39;)"><span class="hl_varref"><span class="mpre">profileLibFilePath</span></span></a><span class="mpre"> </span><a href="#loc_849_9_849_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_849_9_849_24&#39;)"><span class="hl_varref"><span class="mpre">profObjectFiles</span></span></a><span class="mpre">

    </span><a href="#loc_686_7_686_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_686_7_686_18&#39;)"><span class="hl_varref"><span class="mpre">whenGHCiLib</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
      (</span><a name="loc_896_8_896_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_896_8_896_14&#39;)"><span class="hl_vardecl"><span class="mpre">ldProg</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_260_1_260_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_260_1_260_10&#39;)"><span class="hl_varref"><span class="mpre">ldProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_673_44_673_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_44_673_47&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
      </span><a href="Distribution.Simple.Program.Ld.html#loc_32_1_32_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Ld.html#loc_32_1_32_19&#39;)"><span class="hl_varref"><span class="mpre">Ld.combineObjectFiles</span></span></a><span class="mpre"> </span><a href="#loc_673_24_673_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_673_24_673_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_896_8_896_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_896_8_896_14&#39;)"><span class="hl_varref"><span class="mpre">ldProg</span></span></a><span class="mpre">
        </span><a href="#loc_805_7_805_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_7_805_22&#39;)"><span class="hl_varref"><span class="mpre">ghciLibFilePath</span></span></a><span class="mpre"> </span><a href="#loc_853_9_853_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_853_9_853_21&#39;)"><span class="hl_varref"><span class="mpre">ghciObjFiles</span></span></a><span class="mpre">

    </span><a href="#loc_684_7_684_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_7_684_20&#39;)"><span class="hl_varref"><span class="mpre">whenSharedLib</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
      </span><a href="#loc_693_7_693_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_7_693_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_864_9_864_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_864_9_864_26&#39;)"><span class="hl_varref"><span class="mpre">ghcSharedLinkArgs</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | Build an executable with GHC.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_909_1_909_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_909_1_909_9&#39;)"><span class="mpre">buildExe</span></a><span class="mpre">, </span><a href="#loc_910_1_910_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_910_1_910_8&#39;)"><span class="mpre">replExe</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
                  -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                  -&gt; </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="hl_tyconref"><span class="mpre">Executable</span></span></a><span class="mpre">         -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_909_1_909_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_909_1_909_9&#39;)"><span class="hl_vardecl"><span class="mpre">buildExe</span></span></a><span class="mpre"> = </span><a href="#loc_915_1_915_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_1_915_15&#39;)"><span class="hl_varref"><span class="mpre">buildOrReplExe</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
</span><a name="loc_910_1_910_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_910_1_910_8&#39;)"><span class="hl_vardecl"><span class="mpre">replExe</span></span></a><span class="mpre">  = </span><a href="#loc_915_1_915_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_1_915_15&#39;)"><span class="hl_varref"><span class="mpre">buildOrReplExe</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">

</span><a href="#loc_915_1_915_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_1_915_15&#39;)"><span class="mpre">buildOrReplExe</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> -&gt; </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
               -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
               -&gt; </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="hl_tyconref"><span class="mpre">Executable</span></span></a><span class="mpre">         -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_915_1_915_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_1_915_15&#39;)"><span class="hl_fundecl"><span class="mpre">buildOrReplExe</span></span></a><span class="mpre"> </span><a name="loc_915_16_915_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_16_915_23&#39;)"><span class="hl_vardecl"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><a name="loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_pkg_descr</span></span><span class="mpre"> </span><a name="loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre">
  </span><a name="loc_916_3_916_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_916_3_916_6&#39;)"><span class="hl_specname"><span class="mpre">exe</span></span></a><span class="mpre">@</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 916, srcSpanStartColumn = 7, srcSpanEndLine = 916, srcSpanEndColumn = 62}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 916, srcSpanStartColumn = 18, srcSpanEndLine = 916, srcSpanEndColumn = 19},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;"><span class="mpre">Executable { exeName = exeName&#39;, modulePath = modPath }</span></span><span class="mpre"> </span><a name="loc_916_63_916_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_916_63_916_67&#39;)"><span class="hl_vardecl"><span class="mpre">clbi</span></span></a><span class="mpre"> = do

  (</span><a name="loc_918_4_918_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_918_4_918_11&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
  let </span><a name="loc_919_7_919_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_919_7_919_17&#39;)"><span class="hl_vardecl"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.GHC.html#loc_212_1_212_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_212_1_212_7&#39;)"><span class="hl_varref"><span class="mpre">runGHC</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_918_4_918_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_918_4_918_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">

  </span><a name="loc_921_3_921_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_921_3_921_8&#39;)"><span class="hl_vardecl"><span class="mpre">exeBi</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_1063_1_1063_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_1_1063_17&#39;)"><span class="hl_varref"><span class="mpre">hackThreadedFlag</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre">
             (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20&#39;)"><span class="hl_varref"><span class="mpre">withProfExe</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) (</span><a href="Distribution.PackageDescription.html#loc_350_9_350_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_350_9_350_18&#39;)"><span class="hl_varref"><span class="mpre">buildInfo</span></span></a><span class="mpre"> </span><a href="#loc_916_3_916_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_916_3_916_6&#39;)"><span class="hl_varref"><span class="mpre">exe</span></span></a><span class="mpre">)

  </span><span class="hl_comment"><span class="mpre">-- exeNameReal, the name that GHC really uses (with .exe on Windows)</span></span><span class="mpre">
  let </span><span class="hl_vardecl"><span class="mpre">exeNameReal</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">exeName&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre">
                    (if </span><span class="hl_varref"><span class="mpre">takeExtension</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">exeName&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;.&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">)
                       then </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">
                       else </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)

  let </span><a name="loc_930_7_930_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_930_7_930_16&#39;)"><span class="hl_vardecl"><span class="mpre">targetDir</span></span></a><span class="mpre"> = (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_131_9_131_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_131_9_131_17&#39;)"><span class="hl_varref"><span class="mpre">buildDir</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">exeName&#39;</span></span><span class="mpre">
  let </span><a name="loc_931_7_931_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_931_7_931_13&#39;)"><span class="hl_vardecl"><span class="mpre">exeDir</span></span></a><span class="mpre">    = </span><a href="#loc_930_7_930_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_930_7_930_16&#39;)"><span class="hl_varref"><span class="mpre">targetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">exeName&#39;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-tmp&quot;</span></span><span class="mpre">)
  </span><a href="Distribution.Simple.Utils.html#loc_822_1_822_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_822_1_822_32&#39;)"><span class="hl_varref"><span class="mpre">createDirectoryIfMissingVerbose</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> </span><a href="#loc_930_7_930_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_930_7_930_16&#39;)"><span class="hl_varref"><span class="mpre">targetDir</span></span></a><span class="mpre">
  </span><a href="Distribution.Simple.Utils.html#loc_822_1_822_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_822_1_822_32&#39;)"><span class="hl_varref"><span class="mpre">createDirectoryIfMissingVerbose</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> </span><a href="#loc_931_7_931_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_931_7_931_13&#39;)"><span class="hl_varref"><span class="mpre">exeDir</span></span></a><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- TODO: do we need to put hs-boot files into place for mutually recursive</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- modules?  FIX: what about exeName.hi-boot?</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- build executables</span></span><span class="mpre">

  </span><a name="loc_939_3_939_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_939_3_939_14&#39;)"><span class="hl_vardecl"><span class="mpre">srcMainFile</span></span></a><span class="mpre">         &lt;- </span><a href="Distribution.Simple.Utils.html#loc_646_1_646_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_646_1_646_9&#39;)"><span class="hl_varref"><span class="mpre">findFile</span></span></a><span class="mpre"> (</span><a href="#loc_931_7_931_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_931_7_931_13&#39;)"><span class="hl_varref"><span class="mpre">exeDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_645_9_645_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_645_9_645_21&#39;)"><span class="hl_varref"><span class="mpre">hsSourceDirs</span></span></a><span class="mpre"> </span><a href="#loc_921_3_921_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_921_3_921_8&#39;)"><span class="hl_varref"><span class="mpre">exeBi</span></span></a><span class="mpre">) </span><span class="hl_varref"><span class="mpre">modPath</span></span><span class="mpre">
  </span><a name="loc_940_3_940_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_940_3_940_15&#39;)"><span class="hl_vardecl"><span class="mpre">isGhcDynamic</span></span></a><span class="mpre">        &lt;- </span><a href="#loc_1352_1_1352_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_1_1352_11&#39;)"><span class="hl_varref"><span class="mpre">ghcDynamic</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_918_4_918_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_918_4_918_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
  </span><a name="loc_941_3_941_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_3_941_22&#39;)"><span class="hl_vardecl"><span class="mpre">dynamicTooSupported</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_1359_1_1359_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1359_1_1359_22&#39;)"><span class="hl_varref"><span class="mpre">ghcSupportsDynamicToo</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_918_4_918_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_918_4_918_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">

  let </span><a name="loc_943_7_943_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_943_7_943_20&#39;)"><span class="hl_vardecl"><span class="mpre">isHaskellMain</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">elem</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">takeExtension</span></span><span class="mpre"> </span><a href="#loc_939_3_939_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_939_3_939_14&#39;)"><span class="hl_varref"><span class="mpre">srcMainFile</span></span></a><span class="mpre">) [</span><span class="hl_string"><span class="mpre">&quot;.hs&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;.lhs&quot;</span></span><span class="mpre">]
      </span><a name="loc_944_7_944_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_944_7_944_12&#39;)"><span class="hl_vardecl"><span class="mpre">cSrcs</span></span></a><span class="mpre">         = </span><a href="Distribution.PackageDescription.html#loc_644_9_644_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_644_9_644_17&#39;)"><span class="hl_varref"><span class="mpre">cSources</span></span></a><span class="mpre"> </span><a href="#loc_921_3_921_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_921_3_921_8&#39;)"><span class="hl_varref"><span class="mpre">exeBi</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> [</span><a href="#loc_939_3_939_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_939_3_939_14&#39;)"><span class="hl_varref"><span class="mpre">srcMainFile</span></span></a><span class="mpre"> | </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><a href="#loc_943_7_943_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_943_7_943_20&#39;)"><span class="hl_varref"><span class="mpre">isHaskellMain</span></span></a><span class="mpre">]
      </span><span class="hl_vardecl"><span class="mpre">cObjs</span></span><span class="mpre">         = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">`replaceExtension`</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_143_1_143_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_143_1_143_13&#39;)"><span class="hl_varref"><span class="mpre">objExtension</span></span></a><span class="mpre">) </span><a href="#loc_944_7_944_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_944_7_944_12&#39;)"><span class="hl_varref"><span class="mpre">cSrcs</span></span></a><span class="mpre">
      </span><a name="loc_946_7_946_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_946_7_946_15&#39;)"><span class="hl_vardecl"><span class="mpre">baseOpts</span></span></a><span class="mpre">   = (</span><a href="#loc_1152_1_1152_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1152_1_1152_20&#39;)"><span class="hl_varref"><span class="mpre">componentGhcOptions</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_921_3_921_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_921_3_921_8&#39;)"><span class="hl_varref"><span class="mpre">exeBi</span></span></a><span class="mpre"> </span><a href="#loc_916_63_916_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_916_63_916_67&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre"> </span><a href="#loc_931_7_931_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_931_7_931_13&#39;)"><span class="hl_varref"><span class="mpre">exeDir</span></span></a><span class="mpre">)
                    </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 947, srcSpanStartColumn = 31, srcSpanEndLine = 953, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 947, srcSpanStartColumn = 38, srcSpanEndLine = 947, srcSpanEndColumn = 39},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptMode         = toFlag GhcModeMake,
                      ghcOptInputFiles   =
                        [ srcMainFile | isHaskellMain],
                      ghcOptInputModules =
                        [ m | not isHaskellMain, m &lt;- exeModules exe]
                    }</span></span><span class="mpre">
      </span><a name="loc_954_7_954_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_954_7_954_17&#39;)"><span class="hl_vardecl"><span class="mpre">staticOpts</span></span></a><span class="mpre"> = </span><a href="#loc_946_7_946_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_946_7_946_15&#39;)"><span class="hl_varref"><span class="mpre">baseOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 954, srcSpanStartColumn = 39, srcSpanEndLine = 956, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 954, srcSpanStartColumn = 46, srcSpanEndLine = 954, srcSpanEndColumn = 47},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptDynLinkMode    = toFlag GhcStaticOnly
                   }</span></span><span class="mpre">
      </span><a name="loc_957_7_957_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_957_7_957_15&#39;)"><span class="hl_vardecl"><span class="mpre">profOpts</span></span></a><span class="mpre">   = </span><a href="#loc_946_7_946_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_946_7_946_15&#39;)"><span class="hl_varref"><span class="mpre">baseOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 957, srcSpanStartColumn = 39, srcSpanEndLine = 962, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 957, srcSpanStartColumn = 46, srcSpanEndLine = 957, srcSpanEndColumn = 47},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptProfilingMode  = toFlag True,
                      ghcOptHiSuffix       = toFlag &quot;p_hi&quot;,
                      ghcOptObjSuffix      = toFlag &quot;p_o&quot;,
                      ghcOptExtra          = ghcProfOptions exeBi
                    }</span></span><span class="mpre">
      </span><a name="loc_963_7_963_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_963_7_963_14&#39;)"><span class="hl_vardecl"><span class="mpre">dynOpts</span></span></a><span class="mpre">    = </span><a href="#loc_946_7_946_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_946_7_946_15&#39;)"><span class="hl_varref"><span class="mpre">baseOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 963, srcSpanStartColumn = 39, srcSpanEndLine = 968, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 963, srcSpanStartColumn = 46, srcSpanEndLine = 963, srcSpanEndColumn = 47},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptDynLinkMode    = toFlag GhcDynamicOnly,
                      ghcOptHiSuffix       = toFlag &quot;dyn_hi&quot;,
                      ghcOptObjSuffix      = toFlag &quot;dyn_o&quot;,
                      ghcOptExtra          = ghcSharedOptions exeBi
                    }</span></span><span class="mpre">
      </span><a name="loc_969_7_969_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_969_7_969_17&#39;)"><span class="hl_vardecl"><span class="mpre">dynTooOpts</span></span></a><span class="mpre"> = </span><a href="#loc_954_7_954_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_954_7_954_17&#39;)"><span class="hl_varref"><span class="mpre">staticOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 969, srcSpanStartColumn = 41, srcSpanEndLine = 973, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 969, srcSpanStartColumn = 48, srcSpanEndLine = 969, srcSpanEndColumn = 49},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptDynLinkMode    = toFlag GhcStaticAndDynamic,
                      ghcOptDynHiSuffix    = toFlag &quot;dyn_hi&quot;,
                      ghcOptDynObjSuffix   = toFlag &quot;dyn_o&quot;
                    }</span></span><span class="mpre">
      </span><a name="loc_974_7_974_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_974_7_974_17&#39;)"><span class="hl_vardecl"><span class="mpre">linkerOpts</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 974, srcSpanStartColumn = 20, srcSpanEndLine = 980, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 974, srcSpanStartColumn = 27, srcSpanEndLine = 974, srcSpanEndColumn = 28},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptLinkOptions    = PD.ldOptions exeBi,
                      ghcOptLinkLibs       = extraLibs exeBi,
                      ghcOptLinkLibPath    = extraLibDirs exeBi,
                      ghcOptLinkFrameworks = PD.frameworks exeBi,
                      ghcOptInputFiles     = [exeDir &lt;/&gt; x | x &lt;- cObjs]
                   }</span></span><span class="mpre">
      </span><a name="loc_981_7_981_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_981_7_981_15&#39;)"><span class="hl_vardecl"><span class="mpre">replOpts</span></span></a><span class="mpre">   = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 981, srcSpanStartColumn = 20, srcSpanEndLine = 984, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 981, srcSpanStartColumn = 29, srcSpanEndLine = 981, srcSpanEndColumn = 30},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">baseOpts {
                      ghcOptExtra          = filterGhciFlags
                                             (ghcOptExtra baseOpts)
                   }</span></span><span class="mpre">
                   </span><span class="hl_comment"><span class="mpre">-- For a normal compile we do separate invocations of ghc for</span></span><span class="mpre">
                   </span><span class="hl_comment"><span class="mpre">-- compiling as for linking. But for repl we have to do just</span></span><span class="mpre">
                   </span><span class="hl_comment"><span class="mpre">-- the one invocation, so that one has to include all the</span></span><span class="mpre">
                   </span><span class="hl_comment"><span class="mpre">-- linker stuff too, like -l flags and any .o files from C</span></span><span class="mpre">
                   </span><span class="hl_comment"><span class="mpre">-- files etc.</span></span><span class="mpre">
                   </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="#loc_974_7_974_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_974_7_974_17&#39;)"><span class="hl_varref"><span class="mpre">linkerOpts</span></span></a><span class="mpre">
                   </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 991, srcSpanStartColumn = 30, srcSpanEndLine = 994, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 991, srcSpanStartColumn = 37, srcSpanEndLine = 991, srcSpanEndColumn = 38},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/G"><span class="mpre">mempty {
                      ghcOptMode           = toFlag GhcModeInteractive,
                      ghcOptOptimisation   = toFlag GhcNoOptimisation
                   }</span></span><span class="mpre">
      </span><a name="loc_995_7_995_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_995_7_995_17&#39;)"><span class="hl_vardecl"><span class="mpre">commonOpts</span></span></a><span class="mpre">  | </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20&#39;)"><span class="hl_varref"><span class="mpre">withProfExe</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> = </span><a href="#loc_957_7_957_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_957_7_957_15&#39;)"><span class="hl_varref"><span class="mpre">profOpts</span></span></a><span class="mpre">
                  | </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_152_9_152_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_152_9_152_19&#39;)"><span class="hl_varref"><span class="mpre">withDynExe</span></span></a><span class="mpre">  </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> = </span><a href="#loc_963_7_963_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_963_7_963_14&#39;)"><span class="hl_varref"><span class="mpre">dynOpts</span></span></a><span class="mpre">
                  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">       = </span><a href="#loc_954_7_954_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_954_7_954_17&#39;)"><span class="hl_varref"><span class="mpre">staticOpts</span></span></a><span class="mpre">
      </span><span class="hl_vardecl"><span class="mpre">compileOpts</span></span><span class="mpre"> | </span><a href="#loc_1011_7_1011_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1011_7_1011_16&#39;)"><span class="hl_varref"><span class="mpre">useDynToo</span></span></a><span class="mpre"> = </span><a href="#loc_969_7_969_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_969_7_969_17&#39;)"><span class="hl_varref"><span class="mpre">dynTooOpts</span></span></a><span class="mpre">
                  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_995_7_995_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_995_7_995_17&#39;)"><span class="hl_varref"><span class="mpre">commonOpts</span></span></a><span class="mpre">
      </span><a name="loc_1000_7_1000_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1000_7_1000_20&#39;)"><span class="hl_vardecl"><span class="mpre">withStaticExe</span></span></a><span class="mpre"> = (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20&#39;)"><span class="hl_varref"><span class="mpre">withProfExe</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_152_9_152_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_152_9_152_19&#39;)"><span class="hl_varref"><span class="mpre">withDynExe</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)

      </span><span class="hl_comment"><span class="mpre">-- For building exe&#39;s that use TH with -prof or -dynamic we actually have</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- to build twice, once without -prof/-dynamic and then again with</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- -prof/-dynamic. This is because the code that TH needs to run at</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- compile time needs to be the vanilla ABI so it can be loaded up and run</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- by the compiler.</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- With dynamic-by-default GHC the TH object files loaded at compile-time</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- need to be .dyn_o instead of .o.</span></span><span class="mpre">
      </span><a name="loc_1009_7_1009_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1009_7_1009_14&#39;)"><span class="hl_vardecl"><span class="mpre">doingTH</span></span></a><span class="mpre"> = </span><a href="Language.Haskell.Extension.html#loc_120_5_120_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_120_5_120_20&#39;)"><span class="hl_conref"><span class="mpre">EnableExtension</span></span></a><span class="mpre"> </span><a href="Language.Haskell.Extension.html#loc_272_5_272_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Language.Haskell.Extension.html#loc_272_5_272_20&#39;)"><span class="hl_conref"><span class="mpre">TemplateHaskell</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`elem`</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_762_1_762_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_762_1_762_14&#39;)"><span class="hl_varref"><span class="mpre">allExtensions</span></span></a><span class="mpre"> </span><a href="#loc_921_3_921_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_921_3_921_8&#39;)"><span class="hl_varref"><span class="mpre">exeBi</span></span></a><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- Should we use -dynamic-too instead of compilng twice?</span></span><span class="mpre">
      </span><a name="loc_1011_7_1011_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1011_7_1011_16&#39;)"><span class="hl_vardecl"><span class="mpre">useDynToo</span></span></a><span class="mpre"> = </span><a href="#loc_941_3_941_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_941_3_941_22&#39;)"><span class="hl_varref"><span class="mpre">dynamicTooSupported</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_940_3_940_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_940_3_940_15&#39;)"><span class="hl_varref"><span class="mpre">isGhcDynamic</span></span></a><span class="mpre">
                  </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_1009_7_1009_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1009_7_1009_14&#39;)"><span class="hl_varref"><span class="mpre">doingTH</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_1000_7_1000_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1000_7_1000_20&#39;)"><span class="hl_varref"><span class="mpre">withStaticExe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_661_9_661_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_661_9_661_25&#39;)"><span class="hl_varref"><span class="mpre">ghcSharedOptions</span></span></a><span class="mpre"> </span><a href="#loc_921_3_921_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_921_3_921_8&#39;)"><span class="hl_varref"><span class="mpre">exeBi</span></span></a><span class="mpre">)
      </span><span class="hl_vardecl"><span class="mpre">compileTHOpts</span></span><span class="mpre"> | </span><a href="#loc_940_3_940_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_940_3_940_15&#39;)"><span class="hl_varref"><span class="mpre">isGhcDynamic</span></span></a><span class="mpre"> = </span><a href="#loc_963_7_963_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_963_7_963_14&#39;)"><span class="hl_varref"><span class="mpre">dynOpts</span></span></a><span class="mpre">
                    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">    = </span><a href="#loc_954_7_954_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_954_7_954_17&#39;)"><span class="hl_varref"><span class="mpre">staticOpts</span></span></a><span class="mpre">
      </span><a name="loc_1015_7_1015_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1015_7_1015_19&#39;)"><span class="hl_vardecl"><span class="mpre">compileForTH</span></span></a><span class="mpre">
        | </span><a href="#loc_915_16_915_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_16_915_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre">      = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
        | </span><a href="#loc_1011_7_1011_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1011_7_1011_16&#39;)"><span class="hl_varref"><span class="mpre">useDynToo</span></span></a><span class="mpre">    = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
        | </span><a href="#loc_940_3_940_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_940_3_940_15&#39;)"><span class="hl_varref"><span class="mpre">isGhcDynamic</span></span></a><span class="mpre"> = </span><a href="#loc_1009_7_1009_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1009_7_1009_14&#39;)"><span class="hl_varref"><span class="mpre">doingTH</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20&#39;)"><span class="hl_varref"><span class="mpre">withProfExe</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="#loc_1000_7_1000_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1000_7_1000_20&#39;)"><span class="hl_varref"><span class="mpre">withStaticExe</span></span></a><span class="mpre">)
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">    = </span><a href="#loc_1009_7_1009_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1009_7_1009_14&#39;)"><span class="hl_varref"><span class="mpre">doingTH</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_153_9_153_20&#39;)"><span class="hl_varref"><span class="mpre">withProfExe</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">||</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_152_9_152_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_152_9_152_19&#39;)"><span class="hl_varref"><span class="mpre">withDynExe</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)

      </span><span class="hl_vardecl"><span class="mpre">linkOpts</span></span><span class="mpre"> = </span><a href="#loc_995_7_995_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_995_7_995_17&#39;)"><span class="hl_varref"><span class="mpre">commonOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre">
                 </span><a href="#loc_974_7_974_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_974_7_974_17&#39;)"><span class="hl_varref"><span class="mpre">linkerOpts</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1022, srcSpanStartColumn = 39, srcSpanEndLine = 1024, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1022, srcSpanStartColumn = 46, srcSpanEndLine = 1022, srcSpanEndColumn = 47},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">mempty {
                      ghcOptLinkNoHsMain   = toFlag (not isHaskellMain)
                 }</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- Build static/dynamic object files for TH, if needed.</span></span><span class="mpre">
  </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_1015_7_1015_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1015_7_1015_19&#39;)"><span class="hl_varref"><span class="mpre">compileForTH</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><a href="#loc_919_7_919_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_919_7_919_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1028, srcSpanStartColumn = 16, srcSpanEndLine = 1028, srcSpanEndColumn = 60}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1028, srcSpanStartColumn = 30, srcSpanEndLine = 1028, srcSpanEndColumn = 31},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">compileTHOpts { ghcOptNoLink = toFlag True }</span></span><span class="mpre">

  </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> </span><a href="#loc_915_16_915_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_16_915_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><a href="#loc_919_7_919_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_919_7_919_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1031, srcSpanStartColumn = 16, srcSpanEndLine = 1031, srcSpanEndColumn = 58}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1031, srcSpanStartColumn = 28, srcSpanEndLine = 1031, srcSpanEndColumn = 29},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">compileOpts { ghcOptNoLink = toFlag True }</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- build any C sources</span></span><span class="mpre">
  </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> </span><a href="#loc_944_7_944_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_944_7_944_12&#39;)"><span class="hl_varref"><span class="mpre">cSrcs</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
   </span><a href="Distribution.Simple.Utils.html#loc_305_1_305_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_305_1_305_5&#39;)"><span class="hl_varref"><span class="mpre">info</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Building C Sources...&quot;</span></span><span class="mpre">
   </span><span class="hl_varref"><span class="mpre">sequence_</span></span><span class="mpre">
     [ do let </span><a name="loc_1037_15_1037_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1037_15_1037_19&#39;)"><span class="hl_vardecl"><span class="mpre">opts</span></span></a><span class="mpre"> = (</span><a href="#loc_1189_1_1189_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_1_1189_22&#39;)"><span class="hl_varref"><span class="mpre">componentCcGhcOptions</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_915_45_915_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_45_915_48&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_921_3_921_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_921_3_921_8&#39;)"><span class="hl_varref"><span class="mpre">exeBi</span></span></a><span class="mpre"> </span><a href="#loc_916_63_916_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_916_63_916_67&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre">
                         </span><a href="#loc_931_7_931_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_931_7_931_13&#39;)"><span class="hl_varref"><span class="mpre">exeDir</span></span></a><span class="mpre"> </span><a href="#loc_1047_8_1047_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1047_8_1047_16&#39;)"><span class="hl_varref"><span class="mpre">filename</span></span></a><span class="mpre">) </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1038, srcSpanStartColumn = 53, srcSpanEndLine = 1043, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1038, srcSpanStartColumn = 60, srcSpanEndLine = 1038, srcSpanEndColumn = 61},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">mempty {
                       ghcOptDynLinkMode   = toFlag (if withDynExe lbi
                                                       then GhcDynamicOnly
                                                       else GhcStaticOnly),
                       ghcOptProfilingMode = toFlag (withProfExe lbi)
                     }</span></span><span class="mpre">
              </span><a name="loc_1044_15_1044_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_15_1044_19&#39;)"><span class="hl_vardecl"><span class="mpre">odir</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Setup.html#loc_185_1_185_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_185_1_185_9&#39;)"><span class="hl_varref"><span class="mpre">fromFlag</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Program.GHC.html#loc_165_3_165_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_165_3_165_15&#39;)"><span class="hl_varref"><span class="mpre">ghcOptObjDir</span></span></a><span class="mpre"> </span><a href="#loc_1037_15_1037_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1037_15_1037_19&#39;)"><span class="hl_varref"><span class="mpre">opts</span></span></a><span class="mpre">)
          </span><a href="Distribution.Simple.Utils.html#loc_822_1_822_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_822_1_822_32&#39;)"><span class="hl_varref"><span class="mpre">createDirectoryIfMissingVerbose</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> </span><a href="#loc_1044_15_1044_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1044_15_1044_19&#39;)"><span class="hl_varref"><span class="mpre">odir</span></span></a><span class="mpre">
          </span><a href="#loc_919_7_919_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_919_7_919_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_1037_15_1037_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1037_15_1037_19&#39;)"><span class="hl_varref"><span class="mpre">opts</span></span></a><span class="mpre">
     | </span><a name="loc_1047_8_1047_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1047_8_1047_16&#39;)"><span class="hl_vardecl"><span class="mpre">filename</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_944_7_944_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_944_7_944_12&#39;)"><span class="hl_varref"><span class="mpre">cSrcs</span></span></a><span class="mpre"> ]

  </span><span class="hl_comment"><span class="mpre">-- TODO: problem here is we need the .c files built first, so we can load them</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- with ghci, but .c files can depend on .h files generated by ghc by ffi</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- exports.</span></span><span class="mpre">
  </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_915_16_915_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_16_915_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_919_7_919_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_919_7_919_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><a href="#loc_981_7_981_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_981_7_981_15&#39;)"><span class="hl_varref"><span class="mpre">replOpts</span></span></a><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- link:</span></span><span class="mpre">
  </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> </span><a href="#loc_915_16_915_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_16_915_23&#39;)"><span class="hl_varref"><span class="mpre">forRepl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    </span><a href="Distribution.Simple.Utils.html#loc_305_1_305_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_305_1_305_5&#39;)"><span class="hl_varref"><span class="mpre">info</span></span></a><span class="mpre"> </span><a href="#loc_915_24_915_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_915_24_915_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Linking...&quot;</span></span><span class="mpre">
    </span><a href="#loc_919_7_919_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_919_7_919_17&#39;)"><span class="hl_varref"><span class="mpre">runGhcProg</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1057, srcSpanStartColumn = 16, srcSpanEndLine = 1057, srcSpanEndColumn = 82}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1057, srcSpanStartColumn = 25, srcSpanEndLine = 1057, srcSpanEndColumn = 26},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">linkOpts { ghcOptOutputFile = toFlag (targetDir &lt;/&gt; exeNameReal) }</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | Filter the &quot;-threaded&quot; flag when profiling as it does not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   work with ghc-6.8 and older.</span></span><span class="mpre">
</span><a href="#loc_1063_1_1063_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_1_1063_17&#39;)"><span class="mpre">hackThreadedFlag</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Compiler.html#loc_85_6_85_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_85_6_85_14&#39;)"><span class="hl_tyconref"><span class="mpre">Compiler</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="hl_tyconref"><span class="mpre">BuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="hl_tyconref"><span class="mpre">BuildInfo</span></span></a><span class="mpre">
</span><a name="loc_1063_1_1063_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_1_1063_17&#39;)"><span class="hl_fundecl"><span class="mpre">hackThreadedFlag</span></span></a><span class="mpre"> </span><a name="loc_1063_18_1063_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_18_1063_27&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1063_28_1063_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_28_1063_32&#39;)"><span class="hl_vardecl"><span class="mpre">comp</span></span></a><span class="mpre"> </span><a name="loc_1063_33_1063_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_33_1063_37&#39;)"><span class="hl_vardecl"><span class="mpre">prof</span></span></a><span class="mpre"> </span><a name="loc_1063_38_1063_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_38_1063_40&#39;)"><span class="hl_vardecl"><span class="mpre">bi</span></span></a><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><a href="#loc_1070_5_1070_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1070_5_1070_23&#39;)"><span class="hl_varref"><span class="mpre">mustFilterThreaded</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_1063_38_1063_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_38_1063_40&#39;)"><span class="hl_varref"><span class="mpre">bi</span></span></a><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">              = do
    </span><a href="Distribution.Simple.Utils.html#loc_279_1_279_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_279_1_279_5&#39;)"><span class="hl_varref"><span class="mpre">warn</span></span></a><span class="mpre"> </span><a href="#loc_1063_18_1063_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_18_1063_27&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;The ghc flag &#39;-threaded&#39; is not compatible with &quot;</span></span><span class="mpre">
                  </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;profiling in ghc-6.8 and older. It will be disabled.&quot;</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1068, srcSpanStartColumn = 12, srcSpanEndLine = 1068, srcSpanEndColumn = 74}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1068, srcSpanStartColumn = 15, srcSpanEndLine = 1068, srcSpanEndColumn = 16},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">bi { options = filterHcOptions (/= &quot;-threaded&quot;) (options bi) }</span></span><span class="mpre">
  where
    </span><a name="loc_1070_5_1070_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1070_5_1070_23&#39;)"><span class="hl_vardecl"><span class="mpre">mustFilterThreaded</span></span></a><span class="mpre"> = </span><a href="#loc_1063_33_1063_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_33_1063_37&#39;)"><span class="hl_varref"><span class="mpre">prof</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Distribution.Simple.Compiler.html#loc_99_1_99_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_99_1_99_16&#39;)"><span class="hl_varref"><span class="mpre">compilerVersion</span></span></a><span class="mpre"> </span><a href="#loc_1063_28_1063_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_28_1063_32&#39;)"><span class="hl_varref"><span class="mpre">comp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">, </span><span class="hl_num"><span class="mpre">10</span></span><span class="mpre">] []
                      </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-threaded&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`elem`</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_778_1_778_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_778_1_778_10&#39;)"><span class="hl_varref"><span class="mpre">hcOptions</span></span></a><span class="mpre"> </span><a href="Distribution.Compiler.html#loc_81_23_81_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_23_81_26&#39;)"><span class="hl_conref"><span class="mpre">GHC</span></span></a><span class="mpre"> </span><a href="#loc_1063_38_1063_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_38_1063_40&#39;)"><span class="hl_varref"><span class="mpre">bi</span></span></a><span class="mpre">
    </span><span class="hl_fundecl"><span class="mpre">filterHcOptions</span></span><span class="mpre"> </span><a name="loc_1072_21_1072_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1072_21_1072_22&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_1072_23_1072_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1072_23_1072_30&#39;)"><span class="hl_vardecl"><span class="mpre">hcoptss</span></span></a><span class="mpre"> =
      [ (</span><a href="#loc_1074_10_1074_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1074_10_1074_12&#39;)"><span class="hl_varref"><span class="mpre">hc</span></span></a><span class="mpre">, if </span><a href="#loc_1074_10_1074_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1074_10_1074_12&#39;)"><span class="hl_varref"><span class="mpre">hc</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Distribution.Compiler.html#loc_81_23_81_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Compiler.html#loc_81_23_81_26&#39;)"><span class="hl_conref"><span class="mpre">GHC</span></span></a><span class="mpre"> then </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> </span><a href="#loc_1072_21_1072_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1072_21_1072_22&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_1074_14_1074_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1074_14_1074_18&#39;)"><span class="hl_varref"><span class="mpre">opts</span></span></a><span class="mpre"> else </span><a href="#loc_1074_14_1074_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1074_14_1074_18&#39;)"><span class="hl_varref"><span class="mpre">opts</span></span></a><span class="mpre">)
      | (</span><a name="loc_1074_10_1074_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1074_10_1074_12&#39;)"><span class="hl_vardecl"><span class="mpre">hc</span></span></a><span class="mpre">, </span><a name="loc_1074_14_1074_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1074_14_1074_18&#39;)"><span class="hl_vardecl"><span class="mpre">opts</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_1072_23_1072_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1072_23_1072_30&#39;)"><span class="hl_varref"><span class="mpre">hcoptss</span></span></a><span class="mpre"> ]

</span><span class="hl_comment"><span class="mpre">-- | Strip out flags that are not supported in ghci</span></span><span class="mpre">
</span><a href="#loc_1078_1_1078_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1078_1_1078_16&#39;)"><span class="mpre">filterGhciFlags</span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">]
</span><a name="loc_1078_1_1078_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1078_1_1078_16&#39;)"><span class="hl_vardecl"><span class="mpre">filterGhciFlags</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> </span><a href="#loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_varref"><span class="mpre">supported</span></span></a><span class="mpre">
  where
    </span><a name="loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_fundecl"><span class="mpre">supported</span></span></a><span class="mpre"> (</span><span class="hl_char"><span class="mpre">&#39;-&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="hl_char"><span class="mpre">&#39;O&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">_) = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a href="#loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_fundecl"><span class="mpre">supported</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-debug&quot;</span></span><span class="mpre">    = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a href="#loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_fundecl"><span class="mpre">supported</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-threaded&quot;</span></span><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a href="#loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_fundecl"><span class="mpre">supported</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-ticky&quot;</span></span><span class="mpre">    = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a href="#loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_fundecl"><span class="mpre">supported</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-eventlog&quot;</span></span><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a href="#loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_fundecl"><span class="mpre">supported</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-prof&quot;</span></span><span class="mpre">     = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a href="#loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_fundecl"><span class="mpre">supported</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;-unreg&quot;</span></span><span class="mpre">    = </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
    </span><a href="#loc_1080_5_1080_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1080_5_1080_14&#39;)"><span class="hl_fundecl"><span class="mpre">supported</span></span></a><span class="mpre"> _           = </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- when using -split-objs, we need to search for object files in the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module_split directory for each module.</span></span><span class="mpre">
</span><a href="#loc_1093_1_1093_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_1_1093_18&#39;)"><span class="mpre">getHaskellObjects</span></a><span class="mpre"> :: </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                  -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> [</span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">]
</span><a name="loc_1093_1_1093_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_1_1093_18&#39;)"><span class="hl_fundecl"><span class="mpre">getHaskellObjects</span></span></a><span class="mpre"> </span><a name="loc_1093_19_1093_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_19_1093_22&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a name="loc_1093_23_1093_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_23_1093_26&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_1093_27_1093_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_27_1093_31&#39;)"><span class="hl_vardecl"><span class="mpre">pref</span></span></a><span class="mpre"> </span><a name="loc_1093_32_1093_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_32_1093_46&#39;)"><span class="hl_vardecl"><span class="mpre">wanted_obj_ext</span></span></a><span class="mpre"> </span><a name="loc_1093_47_1093_63" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_47_1093_63&#39;)"><span class="hl_vardecl"><span class="mpre">allow_split_objs</span></span></a><span class="mpre">
  | </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_156_9_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_156_9_156_18&#39;)"><span class="hl_varref"><span class="mpre">splitObjs</span></span></a><span class="mpre"> </span><a href="#loc_1093_23_1093_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_23_1093_26&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_1093_47_1093_63" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_47_1093_63&#39;)"><span class="hl_varref"><span class="mpre">allow_split_objs</span></span></a><span class="mpre"> = do
        let </span><a name="loc_1095_13_1095_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1095_13_1095_24&#39;)"><span class="hl_vardecl"><span class="mpre">splitSuffix</span></span></a><span class="mpre"> = if </span><a href="Distribution.Simple.Compiler.html#loc_99_1_99_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_99_1_99_16&#39;)"><span class="hl_varref"><span class="mpre">compilerVersion</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_1093_23_1093_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_23_1093_26&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&lt;</span></span><span class="mpre">
                             </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">, </span><span class="hl_num"><span class="mpre">11</span></span><span class="mpre">] []
                          then </span><span class="hl_string"><span class="mpre">&quot;_split&quot;</span></span><span class="mpre">
                          else </span><span class="hl_string"><span class="mpre">&quot;_&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_1093_32_1093_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_32_1093_46&#39;)"><span class="hl_varref"><span class="mpre">wanted_obj_ext</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;_split&quot;</span></span><span class="mpre">
            </span><a name="loc_1099_13_1099_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1099_13_1099_17&#39;)"><span class="hl_vardecl"><span class="mpre">dirs</span></span></a><span class="mpre"> = [ </span><a href="#loc_1093_27_1093_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_27_1093_31&#39;)"><span class="hl_varref"><span class="mpre">pref</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> (</span><a href="Distribution.ModuleName.html#loc_133_1_133_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.ModuleName.html#loc_133_1_133_11&#39;)"><span class="hl_varref"><span class="mpre">ModuleName.toFilePath</span></span></a><span class="mpre"> </span><a href="#loc_1100_22_1100_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1100_22_1100_23&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_1095_13_1095_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1095_13_1095_24&#39;)"><span class="hl_varref"><span class="mpre">splitSuffix</span></span></a><span class="mpre">)
                   | </span><a name="loc_1100_22_1100_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1100_22_1100_23&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_1093_19_1093_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_19_1093_22&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> ]
        </span><a name="loc_1101_9_1101_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1101_9_1101_14&#39;)"><span class="hl_vardecl"><span class="mpre">objss</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">mapM</span></span><span class="mpre"> </span><a href="System.Directory.html#loc_628_1_628_21" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_628_1_628_21&#39;)"><span class="hl_varref"><span class="mpre">getDirectoryContents</span></span></a><span class="mpre"> </span><a href="#loc_1099_13_1099_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1099_13_1099_17&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">
        let </span><a name="loc_1102_13_1102_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1102_13_1102_17&#39;)"><span class="hl_vardecl"><span class="mpre">objs</span></span></a><span class="mpre"> = [ </span><a href="#loc_1103_29_1103_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1103_29_1103_32&#39;)"><span class="hl_varref"><span class="mpre">dir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_1103_53_1103_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1103_53_1103_56&#39;)"><span class="hl_varref"><span class="mpre">obj</span></span></a><span class="mpre">
                   | (</span><a name="loc_1103_23_1103_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1103_23_1103_28&#39;)"><span class="hl_vardecl"><span class="mpre">objs&#39;</span></span></a><span class="mpre">,</span><a name="loc_1103_29_1103_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1103_29_1103_32&#39;)"><span class="hl_vardecl"><span class="mpre">dir</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">zip</span></span><span class="mpre"> </span><a href="#loc_1101_9_1101_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1101_9_1101_14&#39;)"><span class="hl_varref"><span class="mpre">objss</span></span></a><span class="mpre"> </span><a href="#loc_1099_13_1099_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1099_13_1099_17&#39;)"><span class="hl_varref"><span class="mpre">dirs</span></span></a><span class="mpre">, </span><a name="loc_1103_53_1103_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1103_53_1103_56&#39;)"><span class="hl_vardecl"><span class="mpre">obj</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_1103_23_1103_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1103_23_1103_28&#39;)"><span class="hl_varref"><span class="mpre">objs&#39;</span></span></a><span class="mpre">,
                     let </span><a name="loc_1104_26_1104_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1104_26_1104_33&#39;)"><span class="hl_vardecl"><span class="mpre">obj_ext</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">takeExtension</span></span><span class="mpre"> </span><a href="#loc_1103_53_1103_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1103_53_1103_56&#39;)"><span class="hl_varref"><span class="mpre">obj</span></span></a><span class="mpre">,
                     </span><span class="hl_char"><span class="mpre">&#39;.&#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_1093_32_1093_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_32_1093_46&#39;)"><span class="hl_varref"><span class="mpre">wanted_obj_ext</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_1104_26_1104_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1104_26_1104_33&#39;)"><span class="hl_varref"><span class="mpre">obj_ext</span></span></a><span class="mpre"> ]
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_1102_13_1102_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1102_13_1102_17&#39;)"><span class="hl_varref"><span class="mpre">objs</span></span></a><span class="mpre">
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">  =
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> [ </span><a href="#loc_1093_27_1093_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_27_1093_31&#39;)"><span class="hl_varref"><span class="mpre">pref</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="Distribution.ModuleName.html#loc_133_1_133_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.ModuleName.html#loc_133_1_133_11&#39;)"><span class="hl_varref"><span class="mpre">ModuleName.toFilePath</span></span></a><span class="mpre"> </span><a href="#loc_1109_18_1109_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_18_1109_19&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="#loc_1093_32_1093_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_32_1093_46&#39;)"><span class="hl_varref"><span class="mpre">wanted_obj_ext</span></span></a><span class="mpre">
               | </span><a name="loc_1109_18_1109_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1109_18_1109_19&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_1093_19_1093_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1093_19_1093_22&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> ]

</span><span class="hl_comment"><span class="mpre">-- | Extracts a String representing a hash of the ABI of a built</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- library.  It can fail if the library has not yet been built.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_1116_1_1116_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_1_1116_11&#39;)"><span class="mpre">libAbiHash</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
           -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_1116_1_1116_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_1_1116_11&#39;)"><span class="hl_fundecl"><span class="mpre">libAbiHash</span></span></a><span class="mpre"> </span><a name="loc_1116_12_1116_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_12_1116_21&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">pkg_descr</span></span><span class="mpre"> </span><a name="loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_1116_36_1116_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_36_1116_39&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a name="loc_1116_40_1116_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_40_1116_44&#39;)"><span class="hl_vardecl"><span class="mpre">clbi</span></span></a><span class="mpre"> = do
  </span><a name="loc_1117_3_1117_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1117_3_1117_8&#39;)"><span class="hl_vardecl"><span class="mpre">libBi</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_1063_1_1063_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1063_1_1063_17&#39;)"><span class="hl_varref"><span class="mpre">hackThreadedFlag</span></span></a><span class="mpre"> </span><a href="#loc_1116_12_1116_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_12_1116_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre">
             (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20&#39;)"><span class="hl_varref"><span class="mpre">withProfLib</span></span></a><span class="mpre"> </span><a href="#loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) (</span><a href="Distribution.PackageDescription.html#loc_302_9_302_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_302_9_302_21&#39;)"><span class="hl_varref"><span class="mpre">libBuildInfo</span></span></a><span class="mpre"> </span><a href="#loc_1116_36_1116_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_36_1116_39&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">)
  let
      </span><a name="loc_1120_7_1120_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1120_7_1120_18&#39;)"><span class="hl_vardecl"><span class="mpre">vanillaArgs</span></span></a><span class="mpre"> =
        (</span><a href="#loc_1152_1_1152_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1152_1_1152_20&#39;)"><span class="hl_varref"><span class="mpre">componentGhcOptions</span></span></a><span class="mpre"> </span><a href="#loc_1116_12_1116_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_12_1116_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_1117_3_1117_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1117_3_1117_8&#39;)"><span class="hl_varref"><span class="mpre">libBi</span></span></a><span class="mpre"> </span><a href="#loc_1116_40_1116_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_40_1116_44&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_131_9_131_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_131_9_131_17&#39;)"><span class="hl_varref"><span class="mpre">buildDir</span></span></a><span class="mpre"> </span><a href="#loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">))
        </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1122, srcSpanStartColumn = 19, srcSpanEndLine = 1126, srcSpanEndColumn = 10}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1122, srcSpanStartColumn = 26, srcSpanEndLine = 1122, srcSpanEndColumn = 27},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">mempty {
          ghcOptMode         = toFlag GhcModeAbiHash,
          ghcOptPackageName  = toFlag (packageId pkg_descr),
          ghcOptInputModules = exposedModules lib
        }</span></span><span class="mpre">
      </span><a name="loc_1127_7_1127_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1127_7_1127_17&#39;)"><span class="hl_vardecl"><span class="mpre">sharedArgs</span></span></a><span class="mpre"> = </span><a href="#loc_1120_7_1120_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1120_7_1120_18&#39;)"><span class="hl_varref"><span class="mpre">vanillaArgs</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1127, srcSpanStartColumn = 42, srcSpanEndLine = 1133, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1127, srcSpanStartColumn = 49, srcSpanEndLine = 1127, srcSpanEndColumn = 50},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">mempty {
                       ghcOptDynLinkMode = toFlag GhcDynamicOnly,
                       ghcOptFPic        = toFlag True,
                       ghcOptHiSuffix    = toFlag &quot;dyn_hi&quot;,
                       ghcOptObjSuffix   = toFlag &quot;dyn_o&quot;,
                       ghcOptExtra       = ghcSharedOptions libBi
                   }</span></span><span class="mpre">
      </span><a name="loc_1134_7_1134_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1134_7_1134_15&#39;)"><span class="hl_vardecl"><span class="mpre">profArgs</span></span></a><span class="mpre"> = </span><a href="#loc_1120_7_1120_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1120_7_1120_18&#39;)"><span class="hl_varref"><span class="mpre">vanillaArgs</span></span></a><span class="mpre"> </span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1134, srcSpanStartColumn = 40, srcSpanEndLine = 1139, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1134, srcSpanStartColumn = 47, srcSpanEndLine = 1134, srcSpanEndColumn = 48},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simp"><span class="mpre">mempty {
                     ghcOptProfilingMode = toFlag True,
                     ghcOptHiSuffix      = toFlag &quot;p_hi&quot;,
                     ghcOptObjSuffix     = toFlag &quot;p_o&quot;,
                     ghcOptExtra         = ghcProfOptions libBi
                 }</span></span><span class="mpre">
      </span><a name="loc_1140_7_1140_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1140_7_1140_14&#39;)"><span class="hl_vardecl"><span class="mpre">ghcArgs</span></span></a><span class="mpre"> = if </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23&#39;)"><span class="hl_varref"><span class="mpre">withVanillaLib</span></span></a><span class="mpre"> </span><a href="#loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> then </span><a href="#loc_1120_7_1120_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1120_7_1120_18&#39;)"><span class="hl_varref"><span class="mpre">vanillaArgs</span></span></a><span class="mpre">
           else if </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22&#39;)"><span class="hl_varref"><span class="mpre">withSharedLib</span></span></a><span class="mpre">  </span><a href="#loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> then </span><a href="#loc_1127_7_1127_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1127_7_1127_17&#39;)"><span class="hl_varref"><span class="mpre">sharedArgs</span></span></a><span class="mpre">
           else if </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20&#39;)"><span class="hl_varref"><span class="mpre">withProfLib</span></span></a><span class="mpre">    </span><a href="#loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> then </span><a href="#loc_1134_7_1134_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1134_7_1134_15&#39;)"><span class="hl_varref"><span class="mpre">profArgs</span></span></a><span class="mpre">
           else </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;libAbiHash: Can&#39;t find an enabled library way&quot;</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  (</span><a name="loc_1145_4_1145_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1145_4_1145_11&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_1116_12_1116_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_12_1116_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_97_1_97_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_97_1_97_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_1116_32_1116_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_32_1116_35&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
  </span><a href="Distribution.Simple.Program.Run.html#loc_145_1_145_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Run.html#loc_145_1_145_27&#39;)"><span class="hl_varref"><span class="mpre">getProgramInvocationOutput</span></span></a><span class="mpre"> </span><a href="#loc_1116_12_1116_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1116_12_1116_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.Program.GHC.html#loc_217_1_217_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_217_1_217_14&#39;)"><span class="hl_varref"><span class="mpre">ghcInvocation</span></span></a><span class="mpre"> </span><a href="#loc_1145_4_1145_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1145_4_1145_11&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre"> </span><a href="#loc_1140_7_1140_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1140_7_1140_14&#39;)"><span class="hl_varref"><span class="mpre">ghcArgs</span></span></a><span class="mpre">)


</span><a href="#loc_1152_1_1152_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1152_1_1152_20&#39;)"><span class="mpre">componentGhcOptions</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                    -&gt; </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="hl_tyconref"><span class="mpre">BuildInfo</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
                    -&gt; </span><a href="Distribution.Simple.Program.GHC.html#loc_31_6_31_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_31_6_31_16&#39;)"><span class="hl_tyconref"><span class="mpre">GhcOptions</span></span></a><span class="mpre">
</span><a name="loc_1152_1_1152_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1152_1_1152_20&#39;)"><span class="hl_fundecl"><span class="mpre">componentGhcOptions</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">verbosity</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">lbi</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">bi</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">clbi</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">odir</span></span><span class="mpre"> =
    </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1153, srcSpanStartColumn = 5, srcSpanEndLine = 1178, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1153, srcSpanStartColumn = 12, srcSpanEndLine = 1153, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple"><span class="mpre">mempty {
      ghcOptVerbosity       = toFlag verbosity,
      ghcOptHideAllPackages = toFlag True,
      ghcOptCabal           = toFlag True,
      ghcOptPackageDBs      = withPackageDB lbi,
      ghcOptPackages        = componentPackageDeps clbi,
      ghcOptSplitObjs       = toFlag (splitObjs lbi),
      ghcOptSourcePathClear = toFlag True,
      ghcOptSourcePath      = [odir] ++ nub (hsSourceDirs bi)
                                    ++ [autogenModulesDir lbi],
      ghcOptCppIncludePath  = [autogenModulesDir lbi, odir]
                                    ++ PD.includeDirs bi,
      ghcOptCppOptions      = cppOptions bi,
      ghcOptCppIncludes     = [autogenModulesDir lbi &lt;/&gt; cppHeaderName],
      ghcOptFfiIncludes     = PD.includes bi,
      ghcOptObjDir          = toFlag odir,
      ghcOptHiDir           = toFlag odir,
      ghcOptStubDir         = toFlag odir,
      ghcOptOutputDir       = toFlag odir,
      ghcOptOptimisation    = toGhcOptimisation (withOptimization lbi),
      ghcOptExtra           = hcOptions GHC bi,
      ghcOptLanguage        = toFlag (fromMaybe Haskell98 (defaultLanguage bi)),
      </span><span class="hl_comment"><span class="mpre">-- Unsupported extensions have already been checked by configure</span></span><span class="mpre">
      ghcOptExtensions      = usedExtensions bi,
      ghcOptExtensionMap    = compilerExtensions (compiler lbi)
    }</span></span><span class="mpre">
  where
    </span><a name="loc_1180_5_1180_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1180_5_1180_22&#39;)"><span class="hl_fundecl"><span class="mpre">toGhcOptimisation</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Compiler.html#loc_162_26_162_40" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_162_26_162_40&#39;)"><span class="hl_conref"><span class="mpre">NoOptimisation</span></span></a><span class="mpre">      = </span><a href="Data.Monoid.html#loc_80_9_80_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_80_9_80_15&#39;)"><span class="hl_varref"><span class="mpre">mempty</span></span></a><span class="mpre"> </span><span class="hl_comment"><span class="mpre">--TODO perhaps override?</span></span><span class="mpre">
    </span><a href="#loc_1180_5_1180_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1180_5_1180_22&#39;)"><span class="hl_fundecl"><span class="mpre">toGhcOptimisation</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Compiler.html#loc_163_26_163_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_163_26_163_44&#39;)"><span class="hl_conref"><span class="mpre">NormalOptimisation</span></span></a><span class="mpre">  = </span><a href="Distribution.Simple.Setup.html#loc_182_1_182_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_182_1_182_7&#39;)"><span class="hl_varref"><span class="mpre">toFlag</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.GHC.html#loc_200_24_200_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_200_24_200_45&#39;)"><span class="hl_conref"><span class="mpre">GhcNormalOptimisation</span></span></a><span class="mpre">
    </span><a href="#loc_1180_5_1180_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1180_5_1180_22&#39;)"><span class="hl_fundecl"><span class="mpre">toGhcOptimisation</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Compiler.html#loc_164_26_164_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_164_26_164_45&#39;)"><span class="hl_conref"><span class="mpre">MaximumOptimisation</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Setup.html#loc_182_1_182_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Setup.html#loc_182_1_182_7&#39;)"><span class="hl_varref"><span class="mpre">toFlag</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.GHC.html#loc_201_24_201_46" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_201_24_201_46&#39;)"><span class="hl_conref"><span class="mpre">GhcMaximumOptimisation</span></span></a><span class="mpre">


</span><a href="#loc_1189_1_1189_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_1_1189_22&#39;)"><span class="mpre">componentCcGhcOptions</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
                      -&gt; </span><a href="Distribution.PackageDescription.html#loc_636_6_636_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_636_6_636_15&#39;)"><span class="hl_tyconref"><span class="mpre">BuildInfo</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre">
                      -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
                      -&gt; </span><a href="Distribution.Simple.Program.GHC.html#loc_31_6_31_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.GHC.html#loc_31_6_31_16&#39;)"><span class="hl_tyconref"><span class="mpre">GhcOptions</span></span></a><span class="mpre">
</span><a name="loc_1189_1_1189_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_1_1189_22&#39;)"><span class="hl_fundecl"><span class="mpre">componentCcGhcOptions</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">verbosity</span></span><span class="mpre"> </span><a name="loc_1189_33_1189_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_33_1189_36&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">bi</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">clbi</span></span><span class="mpre"> </span><a name="loc_1189_45_1189_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_45_1189_49&#39;)"><span class="hl_vardecl"><span class="mpre">pref</span></span></a><span class="mpre"> </span><a name="loc_1189_50_1189_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_50_1189_58&#39;)"><span class="hl_vardecl"><span class="mpre">filename</span></span></a><span class="mpre"> =
    </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1190, srcSpanStartColumn = 5, srcSpanEndLine = 1204, srcSpanEndColumn = 6}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple/GHC.hs&quot;, srcSpanStartLine = 1190, srcSpanStartColumn = 12, srcSpanEndLine = 1190, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/Distribution/Simple"><span class="mpre">mempty {
      ghcOptVerbosity      = toFlag verbosity,
      ghcOptMode           = toFlag GhcModeCompile,
      ghcOptInputFiles     = [filename],

      ghcOptCppIncludePath = [autogenModulesDir lbi, odir]
                                   ++ PD.includeDirs bi,
      ghcOptPackageDBs     = withPackageDB lbi,
      ghcOptPackages       = componentPackageDeps clbi,
      ghcOptCcOptions      = PD.ccOptions bi
                             ++ case withOptimization lbi of
                                  NoOptimisation -&gt; []
                                  _              -&gt; [&quot;-O2&quot;],
      ghcOptObjDir         = toFlag odir
    }</span></span><span class="mpre">
  where
    </span><span class="hl_vardecl"><span class="mpre">odir</span></span><span class="mpre"> | </span><a href="Distribution.Simple.Compiler.html#loc_99_1_99_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_99_1_99_16&#39;)"><span class="hl_varref"><span class="mpre">compilerVersion</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_1189_33_1189_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_33_1189_36&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Version</span></span><span class="mpre"> [</span><span class="hl_num"><span class="mpre">6</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">4</span></span><span class="mpre">,</span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">] []  = </span><a href="#loc_1189_45_1189_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_45_1189_49&#39;)"><span class="hl_varref"><span class="mpre">pref</span></span></a><span class="mpre">
         | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><a href="#loc_1189_45_1189_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_45_1189_49&#39;)"><span class="hl_varref"><span class="mpre">pref</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">takeDirectory</span></span><span class="mpre"> </span><a href="#loc_1189_50_1189_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1189_50_1189_58&#39;)"><span class="hl_varref"><span class="mpre">filename</span></span></a><span class="mpre">
         </span><span class="hl_comment"><span class="mpre">-- ghc 6.4.0 had a bug in -odir handling for C compilations.</span></span><span class="mpre">

</span><a href="#loc_1211_1_1211_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1211_1_1211_14&#39;)"><span class="mpre">mkGHCiLibName</span></a><span class="mpre"> :: </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_234_6_234_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_234_6_234_17&#39;)"><span class="hl_tyconref"><span class="mpre">LibraryName</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_1211_1_1211_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1211_1_1211_14&#39;)"><span class="hl_fundecl"><span class="mpre">mkGHCiLibName</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_234_20_234_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_234_20_234_31&#39;)"><span class="hl_conref"><span class="mpre">LibraryName</span></span></a><span class="mpre"> </span><a name="loc_1211_28_1211_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1211_28_1211_31&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre">) = </span><a href="#loc_1211_28_1211_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1211_28_1211_31&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;o&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Installing</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- |Install executables for GHC.</span></span><span class="mpre">
</span><a href="#loc_1225_1_1225_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_1_1225_11&#39;)"><span class="mpre">installExe</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
           -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
           -&gt; </span><a href="Distribution.Simple.InstallDirs.html#loc_105_6_105_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_105_6_105_17&#39;)"><span class="hl_tyconref"><span class="mpre">InstallDirs</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^Where to copy the files to</span></span><span class="mpre">
           -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^Build location</span></span><span class="mpre">
           -&gt; (</span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">)  </span><span class="hl_comment"><span class="mpre">-- ^Executable (prefix,suffix)</span></span><span class="mpre">
           -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
           -&gt; </span><a href="Distribution.PackageDescription.html#loc_347_6_347_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_347_6_347_16&#39;)"><span class="hl_tyconref"><span class="mpre">Executable</span></span></a><span class="mpre">
           -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_1225_1_1225_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_1_1225_11&#39;)"><span class="hl_fundecl"><span class="mpre">installExe</span></span></a><span class="mpre"> </span><a name="loc_1225_12_1225_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_12_1225_21&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1225_22_1225_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_22_1225_25&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_1225_26_1225_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_26_1225_37&#39;)"><span class="hl_vardecl"><span class="mpre">installDirs</span></span></a><span class="mpre"> </span><a name="loc_1225_38_1225_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_38_1225_47&#39;)"><span class="hl_vardecl"><span class="mpre">buildPref</span></span></a><span class="mpre">
  (</span><a name="loc_1226_4_1226_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1226_4_1226_14&#39;)"><span class="hl_vardecl"><span class="mpre">progprefix</span></span></a><span class="mpre">, </span><a name="loc_1226_16_1226_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1226_16_1226_26&#39;)"><span class="hl_vardecl"><span class="mpre">progsuffix</span></span></a><span class="mpre">) </span><span class="hl_vardecl"><span class="mpre">_pkg</span></span><span class="mpre"> </span><a name="loc_1226_33_1226_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1226_33_1226_36&#39;)"><span class="hl_vardecl"><span class="mpre">exe</span></span></a><span class="mpre"> = do
  let </span><a name="loc_1227_7_1227_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1227_7_1227_13&#39;)"><span class="hl_vardecl"><span class="mpre">binDir</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.InstallDirs.html#loc_107_9_107_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.InstallDirs.html#loc_107_9_107_15&#39;)"><span class="hl_varref"><span class="mpre">bindir</span></span></a><span class="mpre"> </span><a href="#loc_1225_26_1225_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_26_1225_37&#39;)"><span class="hl_varref"><span class="mpre">installDirs</span></span></a><span class="mpre">
  </span><a href="Distribution.Simple.Utils.html#loc_822_1_822_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_822_1_822_32&#39;)"><span class="hl_varref"><span class="mpre">createDirectoryIfMissingVerbose</span></span></a><span class="mpre"> </span><a href="#loc_1225_12_1225_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_12_1225_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> </span><a href="#loc_1227_7_1227_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1227_7_1227_13&#39;)"><span class="hl_varref"><span class="mpre">binDir</span></span></a><span class="mpre">
  let </span><a name="loc_1229_7_1229_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1229_7_1229_18&#39;)"><span class="hl_vardecl"><span class="mpre">exeFileName</span></span></a><span class="mpre"> = </span><a href="Distribution.PackageDescription.html#loc_348_9_348_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_348_9_348_16&#39;)"><span class="hl_varref"><span class="mpre">exeName</span></span></a><span class="mpre"> </span><a href="#loc_1226_33_1226_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1226_33_1226_36&#39;)"><span class="hl_varref"><span class="mpre">exe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">
      </span><a name="loc_1230_7_1230_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1230_7_1230_23&#39;)"><span class="hl_vardecl"><span class="mpre">fixedExeBaseName</span></span></a><span class="mpre"> = </span><a href="#loc_1226_4_1226_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1226_4_1226_14&#39;)"><span class="hl_varref"><span class="mpre">progprefix</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_348_9_348_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_348_9_348_16&#39;)"><span class="hl_varref"><span class="mpre">exeName</span></span></a><span class="mpre"> </span><a href="#loc_1226_33_1226_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1226_33_1226_36&#39;)"><span class="hl_varref"><span class="mpre">exe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_1226_16_1226_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1226_16_1226_26&#39;)"><span class="hl_varref"><span class="mpre">progsuffix</span></span></a><span class="mpre">
      </span><a name="loc_1231_7_1231_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_7_1231_20&#39;)"><span class="hl_fundecl"><span class="mpre">installBinary</span></span></a><span class="mpre"> </span><a name="loc_1231_21_1231_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_21_1231_25&#39;)"><span class="hl_vardecl"><span class="mpre">dest</span></span></a><span class="mpre"> = do
          </span><a href="Distribution.Simple.Utils.html#loc_886_1_886_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_886_1_886_22&#39;)"><span class="hl_varref"><span class="mpre">installExecutableFile</span></span></a><span class="mpre"> </span><a href="#loc_1225_12_1225_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_12_1225_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre">
            (</span><a href="#loc_1225_38_1225_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_38_1225_47&#39;)"><span class="hl_varref"><span class="mpre">buildPref</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="Distribution.PackageDescription.html#loc_348_9_348_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_348_9_348_16&#39;)"><span class="hl_varref"><span class="mpre">exeName</span></span></a><span class="mpre"> </span><a href="#loc_1226_33_1226_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1226_33_1226_36&#39;)"><span class="hl_varref"><span class="mpre">exe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_1229_7_1229_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1229_7_1229_18&#39;)"><span class="hl_varref"><span class="mpre">exeFileName</span></span></a><span class="mpre">)
            (</span><a href="#loc_1231_21_1231_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_21_1231_25&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">)
          </span><a href="#loc_1239_1_1239_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_1_1239_9&#39;)"><span class="hl_varref"><span class="mpre">stripExe</span></span></a><span class="mpre"> </span><a href="#loc_1225_12_1225_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_12_1225_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1225_22_1225_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1225_22_1225_25&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a href="#loc_1229_7_1229_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1229_7_1229_18&#39;)"><span class="hl_varref"><span class="mpre">exeFileName</span></span></a><span class="mpre"> (</span><a href="#loc_1231_21_1231_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_21_1231_25&#39;)"><span class="hl_varref"><span class="mpre">dest</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">)
  </span><a href="#loc_1231_7_1231_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1231_7_1231_20&#39;)"><span class="hl_varref"><span class="mpre">installBinary</span></span></a><span class="mpre"> (</span><a href="#loc_1227_7_1227_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1227_7_1227_13&#39;)"><span class="hl_varref"><span class="mpre">binDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_1230_7_1230_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1230_7_1230_23&#39;)"><span class="hl_varref"><span class="mpre">fixedExeBaseName</span></span></a><span class="mpre">)

</span><a href="#loc_1239_1_1239_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_1_1239_9&#39;)"><span class="mpre">stripExe</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_1239_1_1239_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_1_1239_9&#39;)"><span class="hl_fundecl"><span class="mpre">stripExe</span></span></a><span class="mpre"> </span><a name="loc_1239_10_1239_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_10_1239_19&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1239_20_1239_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_20_1239_23&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_1239_24_1239_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_24_1239_28&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre"> </span><a name="loc_1239_29_1239_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_29_1239_33&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_157_9_157_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_157_9_157_18&#39;)"><span class="hl_varref"><span class="mpre">stripExes</span></span></a><span class="mpre"> </span><a href="#loc_1239_20_1239_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_20_1239_23&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
  case </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_210_1_210_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_210_1_210_13&#39;)"><span class="hl_varref"><span class="mpre">stripProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_1239_20_1239_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_20_1239_23&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">) of
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_1241_10_1241_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1241_10_1241_15&#39;)"><span class="hl_vardecl"><span class="mpre">strip</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.html#loc_197_1_197_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_197_1_197_17&#39;)"><span class="hl_varref"><span class="mpre">rawSystemProgram</span></span></a><span class="mpre"> </span><a href="#loc_1239_10_1239_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_10_1239_19&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1241_10_1241_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1241_10_1241_15&#39;)"><span class="hl_varref"><span class="mpre">strip</span></span></a><span class="mpre"> </span><a href="#loc_1248_5_1248_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1248_5_1248_9&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">    -&gt; </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Distribution.System.html#loc_66_19_66_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_19_66_26&#39;)"><span class="hl_conref"><span class="mpre">Windows</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                  </span><span class="hl_comment"><span class="mpre">-- Don&#39;t bother warning on windows, we don&#39;t expect them to</span></span><span class="mpre">
                  </span><span class="hl_comment"><span class="mpre">-- have the strip program anyway.</span></span><span class="mpre">
                  </span><a href="Distribution.Simple.Utils.html#loc_279_1_279_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_279_1_279_5&#39;)"><span class="hl_varref"><span class="mpre">warn</span></span></a><span class="mpre"> </span><a href="#loc_1239_10_1239_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_10_1239_19&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Unable to strip executable &#39;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_1239_24_1239_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_24_1239_28&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre">
                                </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&#39; (missing the &#39;strip&#39; program)&quot;</span></span><span class="mpre">
  where
    </span><a name="loc_1248_5_1248_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1248_5_1248_9&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> = </span><a href="#loc_1239_29_1239_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1239_29_1239_33&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> case </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> of
       </span><a href="Distribution.System.html#loc_66_29_66_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_29_66_32&#39;)"><span class="hl_conref"><span class="mpre">OSX</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_string"><span class="mpre">&quot;-x&quot;</span></span><span class="mpre">] </span><span class="hl_comment"><span class="mpre">-- By default, stripping the ghc binary on at least</span></span><span class="mpre">
                     </span><span class="hl_comment"><span class="mpre">-- some OS X installations causes:</span></span><span class="mpre">
                     </span><span class="hl_comment"><span class="mpre">--     HSbase-3.0.o: unknown symbol `_environ&#39;&quot;</span></span><span class="mpre">
                     </span><span class="hl_comment"><span class="mpre">-- The -x flag fixes that.</span></span><span class="mpre">
       _   -&gt; []

</span><span class="hl_comment"><span class="mpre">-- |Install for ghc, .hi, .a and, if --with-ghci given, .o</span></span><span class="mpre">
</span><a href="#loc_1265_1_1265_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_1_1265_11&#39;)"><span class="mpre">installLib</span></a><span class="mpre">    :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
              -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
              -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^install location</span></span><span class="mpre">
              -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^install location for dynamic librarys</span></span><span class="mpre">
              -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">  </span><span class="hl_comment"><span class="mpre">-- ^Build location</span></span><span class="mpre">
              -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
              -&gt; </span><a href="Distribution.PackageDescription.html#loc_299_6_299_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_299_6_299_13&#39;)"><span class="hl_tyconref"><span class="mpre">Library</span></span></a><span class="mpre">
              -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_203_6_203_29&#39;)"><span class="hl_tyconref"><span class="mpre">ComponentLocalBuildInfo</span></span></a><span class="mpre">
              -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_1265_1_1265_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_1_1265_11&#39;)"><span class="hl_fundecl"><span class="mpre">installLib</span></span></a><span class="mpre"> </span><a name="loc_1265_12_1265_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_12_1265_21&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1265_22_1265_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_22_1265_25&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_1265_26_1265_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_26_1265_35&#39;)"><span class="hl_vardecl"><span class="mpre">targetDir</span></span></a><span class="mpre"> </span><a name="loc_1265_36_1265_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_36_1265_51&#39;)"><span class="hl_vardecl"><span class="mpre">dynlibTargetDir</span></span></a><span class="mpre"> </span><a name="loc_1265_52_1265_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_52_1265_60&#39;)"><span class="hl_vardecl"><span class="mpre">builtDir</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_pkg</span></span><span class="mpre"> </span><a name="loc_1265_66_1265_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_66_1265_69&#39;)"><span class="hl_vardecl"><span class="mpre">lib</span></span></a><span class="mpre"> </span><a name="loc_1265_70_1265_74" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_70_1265_74&#39;)"><span class="hl_vardecl"><span class="mpre">clbi</span></span></a><span class="mpre"> = do
  </span><span class="hl_comment"><span class="mpre">-- copy .hi files over:</span></span><span class="mpre">
  let </span><a name="loc_1267_7_1267_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_7_1267_17&#39;)"><span class="hl_fundecl"><span class="mpre">copyHelper</span></span></a><span class="mpre"> </span><a name="loc_1267_18_1267_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_18_1267_28&#39;)"><span class="hl_vardecl"><span class="mpre">installFun</span></span></a><span class="mpre"> </span><a name="loc_1267_29_1267_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_29_1267_32&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> </span><a name="loc_1267_33_1267_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_33_1267_36&#39;)"><span class="hl_vardecl"><span class="mpre">dst</span></span></a><span class="mpre"> </span><a name="loc_1267_37_1267_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_37_1267_38&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = do
        </span><a href="Distribution.Simple.Utils.html#loc_822_1_822_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_822_1_822_32&#39;)"><span class="hl_varref"><span class="mpre">createDirectoryIfMissingVerbose</span></span></a><span class="mpre"> </span><a href="#loc_1265_12_1265_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_12_1265_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> </span><a href="#loc_1267_33_1267_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_33_1267_36&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre">
        </span><a href="#loc_1267_18_1267_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_18_1267_28&#39;)"><span class="hl_varref"><span class="mpre">installFun</span></span></a><span class="mpre"> </span><a href="#loc_1265_12_1265_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_12_1265_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> (</span><a href="#loc_1267_29_1267_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_29_1267_32&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_1267_37_1267_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_37_1267_38&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) (</span><a href="#loc_1267_33_1267_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_33_1267_36&#39;)"><span class="hl_varref"><span class="mpre">dst</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><a href="#loc_1267_37_1267_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_37_1267_38&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
      </span><a name="loc_1270_7_1270_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1270_7_1270_11&#39;)"><span class="hl_vardecl"><span class="mpre">copy</span></span></a><span class="mpre">       = </span><a href="#loc_1267_7_1267_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_7_1267_17&#39;)"><span class="hl_varref"><span class="mpre">copyHelper</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Utils.html#loc_877_1_877_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_877_1_877_20&#39;)"><span class="hl_varref"><span class="mpre">installOrdinaryFile</span></span></a><span class="mpre">
      </span><a name="loc_1271_7_1271_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1271_7_1271_17&#39;)"><span class="hl_vardecl"><span class="mpre">copyShared</span></span></a><span class="mpre"> = </span><a href="#loc_1267_7_1267_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1267_7_1267_17&#39;)"><span class="hl_varref"><span class="mpre">copyHelper</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Utils.html#loc_886_1_886_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_886_1_886_22&#39;)"><span class="hl_varref"><span class="mpre">installExecutableFile</span></span></a><span class="mpre">
      </span><a name="loc_1272_7_1272_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1272_7_1272_22&#39;)"><span class="hl_fundecl"><span class="mpre">copyModuleFiles</span></span></a><span class="mpre"> </span><a name="loc_1272_23_1272_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1272_23_1272_26&#39;)"><span class="hl_vardecl"><span class="mpre">ext</span></span></a><span class="mpre"> =
        </span><a href="Distribution.Simple.Utils.html#loc_695_1_695_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_695_1_695_16&#39;)"><span class="hl_varref"><span class="mpre">findModuleFiles</span></span></a><span class="mpre"> [</span><a href="#loc_1265_52_1265_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_52_1265_60&#39;)"><span class="hl_varref"><span class="mpre">builtDir</span></span></a><span class="mpre">] [</span><a href="#loc_1272_23_1272_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1272_23_1272_26&#39;)"><span class="hl_varref"><span class="mpre">ext</span></span></a><span class="mpre">] (</span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_1265_66_1265_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_66_1265_69&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">)
          </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a href="Distribution.Simple.Utils.html#loc_949_1_949_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Utils.html#loc_949_1_949_21&#39;)"><span class="hl_varref"><span class="mpre">installOrdinaryFiles</span></span></a><span class="mpre"> </span><a href="#loc_1265_12_1265_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_12_1265_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1265_26_1265_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_26_1265_35&#39;)"><span class="hl_varref"><span class="mpre">targetDir</span></span></a><span class="mpre">
  </span><a href="#loc_1301_5_1301_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1301_5_1301_16&#39;)"><span class="hl_varref"><span class="mpre">whenVanilla</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_1272_7_1272_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1272_7_1272_22&#39;)"><span class="hl_varref"><span class="mpre">copyModuleFiles</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hi&quot;</span></span><span class="mpre">
  </span><a href="#loc_1302_5_1302_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1302_5_1302_13&#39;)"><span class="hl_varref"><span class="mpre">whenProf</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_1272_7_1272_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1272_7_1272_22&#39;)"><span class="hl_varref"><span class="mpre">copyModuleFiles</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;p_hi&quot;</span></span><span class="mpre">
  </span><a href="#loc_1304_5_1304_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1304_5_1304_15&#39;)"><span class="hl_varref"><span class="mpre">whenShared</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_1272_7_1272_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1272_7_1272_22&#39;)"><span class="hl_varref"><span class="mpre">copyModuleFiles</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;dyn_hi&quot;</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- copy the built library files over:</span></span><span class="mpre">
  </span><a href="#loc_1301_5_1301_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1301_5_1301_16&#39;)"><span class="hl_varref"><span class="mpre">whenVanilla</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">mapM_</span></span><span class="mpre"> (</span><a href="#loc_1270_7_1270_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1270_7_1270_11&#39;)"><span class="hl_varref"><span class="mpre">copy</span></span></a><span class="mpre"> </span><a href="#loc_1265_52_1265_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_52_1265_60&#39;)"><span class="hl_varref"><span class="mpre">builtDir</span></span></a><span class="mpre"> </span><a href="#loc_1265_26_1265_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_26_1265_35&#39;)"><span class="hl_varref"><span class="mpre">targetDir</span></span></a><span class="mpre">)             </span><a href="#loc_1294_5_1294_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1294_5_1294_20&#39;)"><span class="hl_varref"><span class="mpre">vanillaLibNames</span></span></a><span class="mpre">
  </span><a href="#loc_1302_5_1302_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1302_5_1302_13&#39;)"><span class="hl_varref"><span class="mpre">whenProf</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">mapM_</span></span><span class="mpre"> (</span><a href="#loc_1270_7_1270_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1270_7_1270_11&#39;)"><span class="hl_varref"><span class="mpre">copy</span></span></a><span class="mpre"> </span><a href="#loc_1265_52_1265_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_52_1265_60&#39;)"><span class="hl_varref"><span class="mpre">builtDir</span></span></a><span class="mpre"> </span><a href="#loc_1265_26_1265_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_26_1265_35&#39;)"><span class="hl_varref"><span class="mpre">targetDir</span></span></a><span class="mpre">)             </span><a href="#loc_1295_5_1295_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1295_5_1295_20&#39;)"><span class="hl_varref"><span class="mpre">profileLibNames</span></span></a><span class="mpre">
  </span><a href="#loc_1303_5_1303_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1303_5_1303_13&#39;)"><span class="hl_varref"><span class="mpre">whenGHCi</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">mapM_</span></span><span class="mpre"> (</span><a href="#loc_1270_7_1270_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1270_7_1270_11&#39;)"><span class="hl_varref"><span class="mpre">copy</span></span></a><span class="mpre"> </span><a href="#loc_1265_52_1265_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_52_1265_60&#39;)"><span class="hl_varref"><span class="mpre">builtDir</span></span></a><span class="mpre"> </span><a href="#loc_1265_26_1265_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_26_1265_35&#39;)"><span class="hl_varref"><span class="mpre">targetDir</span></span></a><span class="mpre">)             </span><a href="#loc_1296_5_1296_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1296_5_1296_17&#39;)"><span class="hl_varref"><span class="mpre">ghciLibNames</span></span></a><span class="mpre">
  </span><a href="#loc_1304_5_1304_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1304_5_1304_15&#39;)"><span class="hl_varref"><span class="mpre">whenShared</span></span></a><span class="mpre">  </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">mapM_</span></span><span class="mpre"> (</span><a href="#loc_1271_7_1271_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1271_7_1271_17&#39;)"><span class="hl_varref"><span class="mpre">copyShared</span></span></a><span class="mpre"> </span><a href="#loc_1265_52_1265_60" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_52_1265_60&#39;)"><span class="hl_varref"><span class="mpre">builtDir</span></span></a><span class="mpre"> </span><a href="#loc_1265_36_1265_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_36_1265_51&#39;)"><span class="hl_varref"><span class="mpre">dynlibTargetDir</span></span></a><span class="mpre">) </span><a href="#loc_1297_5_1297_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1297_5_1297_19&#39;)"><span class="hl_varref"><span class="mpre">sharedLibNames</span></span></a><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- run ranlib if necessary:</span></span><span class="mpre">
  </span><a href="#loc_1301_5_1301_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1301_5_1301_16&#39;)"><span class="hl_varref"><span class="mpre">whenVanilla</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">mapM_</span></span><span class="mpre"> (</span><a href="#loc_1312_1_1312_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_1_1312_17&#39;)"><span class="hl_varref"><span class="mpre">updateLibArchive</span></span></a><span class="mpre"> </span><a href="#loc_1265_12_1265_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_12_1265_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1265_22_1265_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_22_1265_25&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> (</span><a href="#loc_1265_26_1265_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_26_1265_35&#39;)"><span class="hl_varref"><span class="mpre">targetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre">))
                      </span><a href="#loc_1294_5_1294_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1294_5_1294_20&#39;)"><span class="hl_varref"><span class="mpre">vanillaLibNames</span></span></a><span class="mpre">
  </span><a href="#loc_1302_5_1302_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1302_5_1302_13&#39;)"><span class="hl_varref"><span class="mpre">whenProf</span></span></a><span class="mpre">    </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">mapM_</span></span><span class="mpre"> (</span><a href="#loc_1312_1_1312_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_1_1312_17&#39;)"><span class="hl_varref"><span class="mpre">updateLibArchive</span></span></a><span class="mpre"> </span><a href="#loc_1265_12_1265_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_12_1265_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1265_22_1265_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_22_1265_25&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> (</span><a href="#loc_1265_26_1265_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_26_1265_35&#39;)"><span class="hl_varref"><span class="mpre">targetDir</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre">))
                      </span><a href="#loc_1295_5_1295_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1295_5_1295_20&#39;)"><span class="hl_varref"><span class="mpre">profileLibNames</span></span></a><span class="mpre">

  where
    </span><a name="loc_1292_5_1292_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1292_5_1292_8&#39;)"><span class="hl_vardecl"><span class="mpre">cid</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Compiler.html#loc_86_9_86_19" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Compiler.html#loc_86_9_86_19&#39;)"><span class="hl_varref"><span class="mpre">compilerId</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_127_9_127_17&#39;)"><span class="hl_varref"><span class="mpre">compiler</span></span></a><span class="mpre"> </span><a href="#loc_1265_22_1265_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_22_1265_25&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
    </span><a name="loc_1293_5_1293_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1293_5_1293_13&#39;)"><span class="hl_vardecl"><span class="mpre">libNames</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_210_5_210_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_210_5_210_23&#39;)"><span class="hl_varref"><span class="mpre">componentLibraries</span></span></a><span class="mpre"> </span><a href="#loc_1265_70_1265_74" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_70_1265_74&#39;)"><span class="hl_varref"><span class="mpre">clbi</span></span></a><span class="mpre">
    </span><a name="loc_1294_5_1294_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1294_5_1294_20&#39;)"><span class="hl_vardecl"><span class="mpre">vanillaLibNames</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_114_1_114_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_114_1_114_10&#39;)"><span class="hl_varref"><span class="mpre">mkLibName</span></span></a><span class="mpre">             </span><a href="#loc_1293_5_1293_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1293_5_1293_13&#39;)"><span class="hl_varref"><span class="mpre">libNames</span></span></a><span class="mpre">
    </span><a name="loc_1295_5_1295_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1295_5_1295_20&#39;)"><span class="hl_vardecl"><span class="mpre">profileLibNames</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_117_1_117_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_117_1_117_14&#39;)"><span class="hl_varref"><span class="mpre">mkProfLibName</span></span></a><span class="mpre">         </span><a href="#loc_1293_5_1293_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1293_5_1293_13&#39;)"><span class="hl_varref"><span class="mpre">libNames</span></span></a><span class="mpre">
    </span><a name="loc_1296_5_1296_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1296_5_1296_17&#39;)"><span class="hl_vardecl"><span class="mpre">ghciLibNames</span></span></a><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="#loc_1211_1_1211_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1211_1_1211_14&#39;)"><span class="hl_varref"><span class="mpre">mkGHCiLibName</span></span></a><span class="mpre">         </span><a href="#loc_1293_5_1293_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1293_5_1293_13&#39;)"><span class="hl_varref"><span class="mpre">libNames</span></span></a><span class="mpre">
    </span><a name="loc_1297_5_1297_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1297_5_1297_19&#39;)"><span class="hl_vardecl"><span class="mpre">sharedLibNames</span></span></a><span class="mpre">  = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="Distribution.Simple.BuildPaths.html#loc_123_1_123_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_123_1_123_16&#39;)"><span class="hl_varref"><span class="mpre">mkSharedLibName</span></span></a><span class="mpre"> </span><a href="#loc_1292_5_1292_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1292_5_1292_8&#39;)"><span class="hl_varref"><span class="mpre">cid</span></span></a><span class="mpre">) </span><a href="#loc_1293_5_1293_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1293_5_1293_13&#39;)"><span class="hl_varref"><span class="mpre">libNames</span></span></a><span class="mpre">

    </span><a name="loc_1299_5_1299_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1299_5_1299_11&#39;)"><span class="hl_vardecl"><span class="mpre">hasLib</span></span></a><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_341_1_341_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_341_1_341_11&#39;)"><span class="hl_varref"><span class="mpre">libModules</span></span></a><span class="mpre"> </span><a href="#loc_1265_66_1265_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_66_1265_69&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">)
                   </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_644_9_644_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_644_9_644_17&#39;)"><span class="hl_varref"><span class="mpre">cSources</span></span></a><span class="mpre"> (</span><a href="Distribution.PackageDescription.html#loc_302_9_302_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_302_9_302_21&#39;)"><span class="hl_varref"><span class="mpre">libBuildInfo</span></span></a><span class="mpre"> </span><a href="#loc_1265_66_1265_69" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_66_1265_69&#39;)"><span class="hl_varref"><span class="mpre">lib</span></span></a><span class="mpre">))
    </span><a name="loc_1301_5_1301_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1301_5_1301_16&#39;)"><span class="hl_vardecl"><span class="mpre">whenVanilla</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_1299_5_1299_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1299_5_1299_11&#39;)"><span class="hl_varref"><span class="mpre">hasLib</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_149_9_149_23&#39;)"><span class="hl_varref"><span class="mpre">withVanillaLib</span></span></a><span class="mpre"> </span><a href="#loc_1265_22_1265_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_22_1265_25&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
    </span><a name="loc_1302_5_1302_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1302_5_1302_13&#39;)"><span class="hl_vardecl"><span class="mpre">whenProf</span></span></a><span class="mpre">    = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_1299_5_1299_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1299_5_1299_11&#39;)"><span class="hl_varref"><span class="mpre">hasLib</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_150_9_150_20&#39;)"><span class="hl_varref"><span class="mpre">withProfLib</span></span></a><span class="mpre">    </span><a href="#loc_1265_22_1265_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_22_1265_25&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
    </span><a name="loc_1303_5_1303_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1303_5_1303_13&#39;)"><span class="hl_vardecl"><span class="mpre">whenGHCi</span></span></a><span class="mpre">    = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_1299_5_1299_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1299_5_1299_11&#39;)"><span class="hl_varref"><span class="mpre">hasLib</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_155_9_155_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_155_9_155_20&#39;)"><span class="hl_varref"><span class="mpre">withGHCiLib</span></span></a><span class="mpre">    </span><a href="#loc_1265_22_1265_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_22_1265_25&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
    </span><a name="loc_1304_5_1304_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1304_5_1304_15&#39;)"><span class="hl_vardecl"><span class="mpre">whenShared</span></span></a><span class="mpre">  = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_1299_5_1299_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1299_5_1299_11&#39;)"><span class="hl_varref"><span class="mpre">hasLib</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_151_9_151_22&#39;)"><span class="hl_varref"><span class="mpre">withSharedLib</span></span></a><span class="mpre">  </span><a href="#loc_1265_22_1265_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1265_22_1265_25&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | On MacOS X we have to call @ranlib@ to regenerate the archive index after</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- copying. This is because the silly MacOS X linker checks that the archive</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- index is not older than the file itself, which means simply</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- copying/installing the file breaks it!!</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_1312_1_1312_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_1_1312_17&#39;)"><span class="mpre">updateLibArchive</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_1312_1_1312_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_1_1312_17&#39;)"><span class="hl_fundecl"><span class="mpre">updateLibArchive</span></span></a><span class="mpre"> </span><a name="loc_1312_18_1312_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_18_1312_27&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1312_28_1312_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_28_1312_31&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><a name="loc_1312_32_1312_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_32_1312_36&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre">
  | </span><a href="Distribution.System.html#loc_112_1_112_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_112_1_112_8&#39;)"><span class="hl_varref"><span class="mpre">buildOS</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Distribution.System.html#loc_66_29_66_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.System.html#loc_66_29_66_32&#39;)"><span class="hl_conref"><span class="mpre">OSX</span></span></a><span class="mpre"> = do
    (</span><a name="loc_1314_6_1314_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1314_6_1314_12&#39;)"><span class="hl_vardecl"><span class="mpre">ranlib</span></span></a><span class="mpre">, _) &lt;- </span><a href="Distribution.Simple.Program.Db.html#loc_371_1_371_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_371_1_371_15&#39;)"><span class="hl_varref"><span class="mpre">requireProgram</span></span></a><span class="mpre"> </span><a href="#loc_1312_18_1312_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_18_1312_27&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_204_1_204_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_204_1_204_14&#39;)"><span class="hl_varref"><span class="mpre">ranlibProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_1312_28_1312_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_28_1312_31&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
    </span><a href="Distribution.Simple.Program.html#loc_197_1_197_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.html#loc_197_1_197_17&#39;)"><span class="hl_varref"><span class="mpre">rawSystemProgram</span></span></a><span class="mpre"> </span><a href="#loc_1312_18_1312_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_18_1312_27&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1314_6_1314_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1314_6_1314_12&#39;)"><span class="hl_varref"><span class="mpre">ranlib</span></span></a><span class="mpre"> [</span><a href="#loc_1312_32_1312_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1312_32_1312_36&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre">]
  | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Registering</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Create an empty package DB at the specified location.</span></span><span class="mpre">
</span><a href="#loc_1323_1_1323_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1323_1_1323_14&#39;)"><span class="mpre">initPackageDB</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_1323_1_1323_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1323_1_1323_14&#39;)"><span class="hl_fundecl"><span class="mpre">initPackageDB</span></span></a><span class="mpre"> </span><a name="loc_1323_15_1323_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1323_15_1323_24&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1323_25_1323_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1323_25_1323_29&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre"> </span><a name="loc_1323_30_1323_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1323_30_1323_36&#39;)"><span class="hl_vardecl"><span class="mpre">dbPath</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.HcPkg.html#loc_76_1_76_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.HcPkg.html#loc_76_1_76_5&#39;)"><span class="hl_varref"><span class="mpre">HcPkg.init</span></span></a><span class="mpre"> </span><a href="#loc_1323_15_1323_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1323_15_1323_24&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1325_10_1325_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1325_10_1325_20&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProg</span></span></a><span class="mpre"> </span><a href="#loc_1323_30_1323_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1323_30_1323_36&#39;)"><span class="hl_varref"><span class="mpre">dbPath</span></span></a><span class="mpre">
  where
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_1325_10_1325_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1325_10_1325_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkgProg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProgram</span></span></a><span class="mpre"> </span><a href="#loc_1323_25_1323_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1323_25_1323_29&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Run &#39;ghc-pkg&#39; using a given package DB stack, directly forwarding the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- provided command-line arguments to it.</span></span><span class="mpre">
</span><a href="#loc_1331_1_1331_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_1_1331_12&#39;)"><span class="mpre">invokeHcPkg</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProgramConfiguration</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">PackageDBStack</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">]
               -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_1331_1_1331_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_1_1331_12&#39;)"><span class="hl_fundecl"><span class="mpre">invokeHcPkg</span></span></a><span class="mpre"> </span><a name="loc_1331_13_1331_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_13_1331_22&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1331_23_1331_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_23_1331_27&#39;)"><span class="hl_vardecl"><span class="mpre">conf</span></span></a><span class="mpre"> </span><a name="loc_1331_28_1331_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_28_1331_35&#39;)"><span class="hl_vardecl"><span class="mpre">dbStack</span></span></a><span class="mpre"> </span><a name="loc_1331_36_1331_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_36_1331_45&#39;)"><span class="hl_vardecl"><span class="mpre">extraArgs</span></span></a><span class="mpre"> =
    </span><a href="Distribution.Simple.Program.HcPkg.html#loc_83_1_83_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.HcPkg.html#loc_83_1_83_7&#39;)"><span class="hl_varref"><span class="mpre">HcPkg.invoke</span></span></a><span class="mpre"> </span><a href="#loc_1331_13_1331_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_13_1331_22&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1334_10_1334_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1334_10_1334_20&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProg</span></span></a><span class="mpre"> </span><a href="#loc_1331_28_1331_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_28_1331_35&#39;)"><span class="hl_varref"><span class="mpre">dbStack</span></span></a><span class="mpre"> </span><a href="#loc_1331_36_1331_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_36_1331_45&#39;)"><span class="hl_varref"><span class="mpre">extraArgs</span></span></a><span class="mpre">
  where
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_1334_10_1334_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1334_10_1334_20&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkgProg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProgram</span></span></a><span class="mpre"> </span><a href="#loc_1331_23_1331_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1331_23_1331_27&#39;)"><span class="hl_varref"><span class="mpre">conf</span></span></a><span class="mpre">

</span><a href="#loc_1344_1_1344_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_1_1344_16&#39;)"><span class="mpre">registerPackage</span></a><span class="mpre">
  :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">InstalledPackageInfo</span></span><span class="mpre">
  -&gt; </span><a href="Distribution.PackageDescription.html#loc_161_6_161_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.PackageDescription.html#loc_161_6_161_24&#39;)"><span class="hl_tyconref"><span class="mpre">PackageDescription</span></span></a><span class="mpre">
  -&gt; </span><a href="Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_116_6_116_20&#39;)"><span class="hl_tyconref"><span class="mpre">LocalBuildInfo</span></span></a><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">PackageDBStack</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_1344_1_1344_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_1_1344_16&#39;)"><span class="hl_fundecl"><span class="mpre">registerPackage</span></span></a><span class="mpre"> </span><a name="loc_1344_17_1344_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_17_1344_26&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1344_27_1344_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_27_1344_43&#39;)"><span class="hl_vardecl"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_pkg</span></span><span class="mpre"> </span><a name="loc_1344_49_1344_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_49_1344_52&#39;)"><span class="hl_vardecl"><span class="mpre">lbi</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">_inplace</span></span><span class="mpre"> </span><a name="loc_1344_62_1344_72" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_62_1344_72&#39;)"><span class="hl_vardecl"><span class="mpre">packageDbs</span></span></a><span class="mpre"> = do
  let </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_1345_12_1345_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1345_12_1345_18&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkg</span></span></a><span class="mpre"> = </span><a href="Distribution.Simple.Program.Db.html#loc_261_1_261_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Db.html#loc_261_1_261_14&#39;)"><span class="hl_varref"><span class="mpre">lookupProgram</span></span></a><span class="mpre"> </span><a href="Distribution.Simple.Program.Builtin.html#loc_102_1_102_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Builtin.html#loc_102_1_102_14&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgProgram</span></span></a><span class="mpre"> (</span><a href="Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.LocalBuildInfo.html#loc_147_9_147_21&#39;)"><span class="hl_varref"><span class="mpre">withPrograms</span></span></a><span class="mpre"> </span><a href="#loc_1344_49_1344_52" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_49_1344_52&#39;)"><span class="hl_varref"><span class="mpre">lbi</span></span></a><span class="mpre">)
  </span><a href="Distribution.Simple.Program.HcPkg.html#loc_110_1_110_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.HcPkg.html#loc_110_1_110_11&#39;)"><span class="hl_varref"><span class="mpre">HcPkg.reregister</span></span></a><span class="mpre"> </span><a href="#loc_1344_17_1344_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_17_1344_26&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1345_12_1345_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1345_12_1345_18&#39;)"><span class="hl_varref"><span class="mpre">ghcPkg</span></span></a><span class="mpre"> </span><a href="#loc_1344_62_1344_72" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_62_1344_72&#39;)"><span class="hl_varref"><span class="mpre">packageDbs</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a href="#loc_1344_27_1344_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1344_27_1344_43&#39;)"><span class="hl_varref"><span class="mpre">installedPkgInfo</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Utils</span></span><span class="mpre">

</span><a href="#loc_1352_1_1352_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_1_1352_11&#39;)"><span class="mpre">ghcDynamic</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_1352_1_1352_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_1_1352_11&#39;)"><span class="hl_fundecl"><span class="mpre">ghcDynamic</span></span></a><span class="mpre"> </span><a name="loc_1352_12_1352_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_12_1352_21&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1352_22_1352_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_22_1352_29&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">
    = do </span><a name="loc_1353_10_1353_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1353_10_1353_12&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_390_1_390_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_1_390_11&#39;)"><span class="hl_varref"><span class="mpre">getGhcInfo</span></span></a><span class="mpre"> </span><a href="#loc_1352_12_1352_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_12_1352_21&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1352_22_1352_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1352_22_1352_29&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
         </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><span class="hl_varref"><span class="mpre">lookup</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;GHC Dynamic&quot;</span></span><span class="mpre"> </span><a href="#loc_1353_10_1353_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1353_10_1353_12&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> of
                  </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;YES&quot;</span></span><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
                  _          -&gt; </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">

</span><a href="#loc_1359_1_1359_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1359_1_1359_22&#39;)"><span class="mpre">ghcSupportsDynamicToo</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><a href="Distribution.Simple.Program.Types.html#loc_77_6_77_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.Program.Types.html#loc_77_6_77_23&#39;)"><span class="hl_tyconref"><span class="mpre">ConfiguredProgram</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_1359_1_1359_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1359_1_1359_22&#39;)"><span class="hl_fundecl"><span class="mpre">ghcSupportsDynamicToo</span></span></a><span class="mpre"> </span><a name="loc_1359_23_1359_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1359_23_1359_32&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_1359_33_1359_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1359_33_1359_40&#39;)"><span class="hl_vardecl"><span class="mpre">ghcProg</span></span></a><span class="mpre">
    = do </span><a name="loc_1360_10_1360_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1360_10_1360_12&#39;)"><span class="hl_vardecl"><span class="mpre">xs</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_390_1_390_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_390_1_390_11&#39;)"><span class="hl_varref"><span class="mpre">getGhcInfo</span></span></a><span class="mpre"> </span><a href="#loc_1359_23_1359_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1359_23_1359_32&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_1359_33_1359_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1359_33_1359_40&#39;)"><span class="hl_varref"><span class="mpre">ghcProg</span></span></a><span class="mpre">
         </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><span class="hl_varref"><span class="mpre">lookup</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Support dynamic-too&quot;</span></span><span class="mpre"> </span><a href="#loc_1360_10_1360_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_1360_10_1360_12&#39;)"><span class="hl_varref"><span class="mpre">xs</span></span></a><span class="mpre"> of
                  </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;YES&quot;</span></span><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
                  _          -&gt; </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
</span></div></body></html>