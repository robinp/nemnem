<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE RankNTypes, TypeFamilies, FlexibleContexts, ScopedTypeVariables #-}
{-# OPTIONS_GHC -fno-warn-orphans #-}

</span><span class="hl_comment"><span class="mpre">{-| This module provides an orphan &#39;MonadCatch&#39; instance for &#39;Proxy&#39; of the
    form:

&gt; instance (MonadCatch m, MonadIO m) =&gt; MonadCatch (Proxy a&#39; a b&#39; b m) where

    ... so you can throw and catch exceptions within pipes using all
    &#39;MonadCatch&#39; operations.

    This module also provides generalized versions of some &#39;MonadCatch&#39;
    operations so that you can also protect against premature termination of
    connected components.  For example, if you protect a &#39;readFile&#39; computation
    using &#39;bracket&#39; from this module:

&gt; -- readFile.hs
&gt; import Pipes
&gt; import qualified Pipes.Prelude as P
&gt; import Pipes.Safe
&gt; import qualified System.IO as IO
&gt; import Prelude hiding (readFile)
&gt;
&gt; readFile :: FilePath -&gt; Producer&#39; String (SafeT IO) ()
&gt; readFile file = bracket
&gt;     (do h &lt;- IO.openFile file IO.ReadMode
&gt;         putStrLn $ &quot;{&quot; ++ file ++ &quot; open}&quot;
&gt;         return h )
&gt;     (\h -&gt; do
&gt;         IO.hClose h
&gt;         putStrLn $ &quot;{&quot; ++ file ++ &quot; closed}&quot; )
&gt;     P.fromHandle

    ... then this generalized &#39;bracket&#39; will guard against both exceptions and
    premature termination of other pipes:

&gt;&gt;&gt; runSafeT $ runEffect $ readFile &quot;readFile.hs&quot; &gt;-&gt; P.take 4 &gt;-&gt; P.stdoutLn
{readFile.hs open}
-- readFile.hs
import Pipes
import qualified Pipes.Prelude as P
import Pipes.Safe
{readFile.hs closed}

    Note that the &#39;MonadCatch&#39; instance for &#39;Proxy&#39; provides weaker versions of
    &#39;mask&#39; and &#39;uninterruptibleMask&#39; that do not completely prevent asynchronous
    exceptions.  Instead, they provide a weaker guarantee that asynchronous
    exceptions will only occur during &#39;Pipes.await&#39;s or &#39;Pipes.yield&#39;s and
    nowhere else.  For example, if you write:

&gt; mask_ $ do
&gt;     x &lt;- await
&gt;     lift $ print x
&gt;     lift $ print x

    ... then you may receive an asynchronous exception during the &#39;Pipes.await&#39;,
    but you will not receive an asynchronous exception during or in between the
    two &#39;print&#39; statements.  This weaker guarantee suffices to provide
    asynchronous exception safety.
-}</span></span><span class="mpre">

module Pipes.Safe
    ( </span><span class="hl_comment"><span class="mpre">-- * SafeT</span></span><span class="mpre">
      SafeT
    , runSafeT
    , runSafeP

     </span><span class="hl_comment"><span class="mpre">-- * MonadSafe</span></span><span class="mpre">
    , ReleaseKey
    , MonadSafe(..)

      </span><span class="hl_comment"><span class="mpre">-- * Utilities</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- $utilities</span></span><span class="mpre">
    , onException
    , finally
    , bracket
    , bracket_
    , bracketOnError

    </span><span class="hl_comment"><span class="mpre">-- * Re-exports</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $reexports</span></span><span class="mpre">
    , module Control.Monad.Catch
    , module Control.Exception
    ) where

import Control.Applicative (</span><a href="Control.Applicative.html#loc_113_20_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_113_20_113_31&#39;)"><span class="mpre">Applicative</span></a><span class="mpre">(</span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="mpre">pure</span></a><span class="mpre">, </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="mpre">(&lt;*&gt;)</span></a><span class="mpre">))
import Control.Exception(Exception(..), SomeException(..))
import qualified Control.Monad.Catch as C
import Control.Monad.Catch
    ( </span><a href="Control.Monad.Catch.html#loc_139_23_139_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_139_23_139_33&#39;)"><span class="mpre">MonadCatch</span></a><span class="mpre">(..)
    , </span><a href="Control.Monad.Catch.html#loc_116_18_116_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_116_18_116_28&#39;)"><span class="mpre">MonadThrow</span></a><span class="mpre">(..)
    , </span><a href="Control.Monad.Catch.html#loc_163_23_163_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_163_23_163_32&#39;)"><span class="mpre">MonadMask</span></a><span class="mpre">(..)
    , </span><a href="Control.Monad.Catch.html#loc_323_1_323_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_323_1_323_6&#39;)"><span class="mpre">mask_</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_328_1_328_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_328_1_328_21&#39;)"><span class="mpre">uninterruptibleMask_</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_333_1_333_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_333_1_333_9&#39;)"><span class="mpre">catchAll</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_339_1_339_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_339_1_339_13&#39;)"><span class="mpre">catchIOError</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_351_1_351_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_351_1_351_10&#39;)"><span class="mpre">catchJust</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_345_1_345_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_345_1_345_8&#39;)"><span class="mpre">catchIf</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_387_6_387_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_387_6_387_13&#39;)"><span class="mpre">Handler</span></a><span class="mpre">(..)
    , </span><a href="Control.Monad.Catch.html#loc_394_1_394_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_394_1_394_8&#39;)"><span class="mpre">catches</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_355_1_355_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_355_1_355_7&#39;)"><span class="mpre">handle</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_364_1_364_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_364_1_364_10&#39;)"><span class="mpre">handleAll</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_360_1_360_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_360_1_360_14&#39;)"><span class="mpre">handleIOError</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_372_1_372_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_372_1_372_11&#39;)"><span class="mpre">handleJust</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_368_1_368_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_368_1_368_9&#39;)"><span class="mpre">handleIf</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_378_1_378_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_378_1_378_4&#39;)"><span class="mpre">try</span></a><span class="mpre">
    , </span><a href="Control.Monad.Catch.html#loc_384_1_384_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_384_1_384_8&#39;)"><span class="mpre">tryJust</span></a><span class="mpre">
    , Exception(..)
    , SomeException
    )
import Control.Monad.IO.Class (</span><a href="Control.Monad.IO.Class.html#loc_30_20_30_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_30_20_30_27&#39;)"><span class="mpre">MonadIO</span></a><span class="mpre">(</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="mpre">liftIO</span></a><span class="mpre">))
import Control.Monad.Trans.Class (</span><a href="Control.Monad.Trans.Class.html#loc_49_7_49_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_49_7_49_17&#39;)"><span class="mpre">MonadTrans</span></a><span class="mpre">(</span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="mpre">lift</span></a><span class="mpre">))
import qualified Control.Monad.Catch.Pure          as E
import qualified Control.Monad.Trans.Identity      as I
import qualified Control.Monad.Trans.Reader        as R
import qualified Control.Monad.Trans.RWS.Lazy      as RWS
import qualified Control.Monad.Trans.RWS.Strict    as RWS&#39;
import qualified Control.Monad.Trans.State.Lazy    as S
import qualified Control.Monad.Trans.State.Strict  as S&#39;
import qualified Control.Monad.Trans.Writer.Lazy   as W
import qualified Control.Monad.Trans.Writer.Strict as W&#39;
import Data.IORef (</span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="mpre">IORef</span></a><span class="mpre">, </span><a href="GHC.IORef.html#loc_42_1_42_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_42_1_42_9&#39;)"><span class="mpre">newIORef</span></a><span class="mpre">, </span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="mpre">readIORef</span></a><span class="mpre">, </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="mpre">writeIORef</span></a><span class="mpre">)
import qualified Data.Map as M
import Data.Monoid (</span><a href="Data.Monoid.html#loc_79_7_79_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_79_7_79_13&#39;)"><span class="mpre">Monoid</span></a><span class="mpre">)
import Pipes (</span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="mpre">Proxy</span></a><span class="mpre">, Effect, Effect&#39;, </span><a href="Pipes.Core.html#loc_119_1_119_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_119_1_119_10&#39;)"><span class="mpre">runEffect</span></a><span class="mpre">)
import Pipes.Internal (</span><a href="Pipes.Internal.html#loc_128_1_128_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_128_1_128_12&#39;)"><span class="mpre">unsafeHoist</span></a><span class="mpre">, </span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="mpre">Proxy</span></a><span class="mpre">(..))
import Pipes.Lift (</span><a href="Pipes.Lift.html#loc_120_1_120_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Lift.html#loc_120_1_120_15&#39;)"><span class="mpre">liftCatchError</span></a><span class="mpre">)

data </span><span class="hl_tycondecl"><span class="mpre">Restore</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> = </span><a name="loc_129_18_129_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_18_129_26&#39;)"><span class="hl_condecl"><span class="mpre">Unmasked</span></span></a><span class="mpre"> | </span><a name="loc_129_29_129_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_29_129_35&#39;)"><span class="hl_condecl"><span class="mpre">Masked</span></span></a><span class="mpre"> (forall </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> . </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)

</span><a href="#loc_137_1_137_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_1_137_9&#39;)"><span class="mpre">liftMask</span></a><span class="mpre">
    :: forall </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> . </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 132, srcSpanStartColumn = 31, srcSpanEndLine = 133, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 132, srcSpanStartColumn = 31, srcSpanEndLine = 132, srcSpanEndColumn = 32},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine"><span class="mpre">(MonadIO m, MonadCatch m)
    =&gt;</span></span><span class="mpre"> (forall </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> . ((forall </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> . </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">)
    -&gt; ((forall </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> . </span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
        -&gt; </span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">)
    -&gt; </span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_137_1_137_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_1_137_9&#39;)"><span class="hl_fundecl"><span class="mpre">liftMask</span></span></a><span class="mpre"> </span><a name="loc_137_10_137_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_22&#39;)"><span class="hl_vardecl"><span class="mpre">maskFunction</span></span></a><span class="mpre"> </span><a name="loc_137_23_137_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_23_137_24&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = do
        </span><a name="loc_138_9_138_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_9_138_14&#39;)"><span class="hl_vardecl"><span class="mpre">ioref</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><a href="GHC.IORef.html#loc_42_1_42_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_42_1_42_9&#39;)"><span class="hl_varref"><span class="mpre">newIORef</span></span></a><span class="mpre"> </span><a href="#loc_129_18_129_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_18_129_26&#39;)"><span class="hl_conref"><span class="mpre">Unmasked</span></span></a><span class="mpre">)
        let </span><a href="#loc_142_13_142_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_13_142_19&#39;)"><span class="mpre">unmask</span></a><span class="mpre">
                :: forall </span><span class="hl_tyvar"><span class="mpre">y</span></span><span class="mpre"> . </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 140, srcSpanStartColumn = 31, srcSpanEndLine = 141, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 140, srcSpanStartColumn = 31, srcSpanEndLine = 140, srcSpanEndColumn = 32},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(Monad m)
                =&gt;</span></span><span class="mpre"> </span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">y</span></span><span class="mpre"> -&gt; </span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">y</span></span><span class="mpre">
            </span><a name="loc_142_13_142_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_13_142_19&#39;)"><span class="hl_fundecl"><span class="mpre">unmask</span></span></a><span class="mpre"> </span><a name="loc_142_20_142_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_20_142_21&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
                </span><a name="loc_143_17_143_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_17_143_25&#39;)"><span class="hl_vardecl"><span class="mpre">mRestore</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="hl_varref"><span class="mpre">readIORef</span></span></a><span class="mpre"> </span><a href="#loc_138_9_138_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_9_138_14&#39;)"><span class="hl_varref"><span class="mpre">ioref</span></span></a><span class="mpre">)
                case </span><a href="#loc_143_17_143_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_17_143_25&#39;)"><span class="hl_varref"><span class="mpre">mRestore</span></span></a><span class="mpre"> of
                    </span><a href="#loc_129_18_129_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_18_129_26&#39;)"><span class="hl_conref"><span class="mpre">Unmasked</span></span></a><span class="mpre">       -&gt; </span><a href="#loc_142_20_142_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_20_142_21&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
                    </span><a href="#loc_129_29_129_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_29_129_35&#39;)"><span class="hl_conref"><span class="mpre">Masked</span></span></a><span class="mpre"> </span><a name="loc_146_28_146_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_28_146_35&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
                        </span><a name="loc_147_25_147_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_25_147_26&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.Internal.html#loc_128_1_128_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_128_1_128_12&#39;)"><span class="hl_varref"><span class="mpre">unsafeHoist</span></span></a><span class="mpre"> </span><a href="#loc_146_28_146_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_28_146_35&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> </span><a href="#loc_142_20_142_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_20_142_21&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
                        </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_146_28_146_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_28_146_35&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
                        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_147_25_147_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_25_147_26&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
            </span><a name="loc_150_13_150_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_13_150_17&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_150_18_150_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_18_150_19&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = case </span><a href="#loc_150_18_150_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_18_150_19&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> of
                </span><a href="Pipes.Internal.html#loc_66_7_66_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_66_7_66_14&#39;)"><span class="hl_conref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><a name="loc_151_25_151_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_25_151_27&#39;)"><span class="hl_vardecl"><span class="mpre">a&#39;</span></span></a><span class="mpre"> </span><a name="loc_151_28_151_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_28_151_30&#39;)"><span class="hl_vardecl"><span class="mpre">fa</span></span></a><span class="mpre">  -&gt; </span><a href="Pipes.Internal.html#loc_66_7_66_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_66_7_66_14&#39;)"><span class="hl_conref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><a href="#loc_151_25_151_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_25_151_27&#39;)"><span class="hl_varref"><span class="mpre">a&#39;</span></span></a><span class="mpre"> (</span><a href="#loc_150_13_150_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_13_150_17&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_151_28_151_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_28_151_30&#39;)"><span class="hl_varref"><span class="mpre">fa</span></span></a><span class="mpre"> )
                </span><a href="Pipes.Internal.html#loc_67_7_67_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_67_7_67_14&#39;)"><span class="hl_conref"><span class="mpre">Respond</span></span></a><span class="mpre"> </span><a name="loc_152_25_152_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_25_152_26&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">  </span><a name="loc_152_28_152_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_28_152_31&#39;)"><span class="hl_vardecl"><span class="mpre">fb&#39;</span></span></a><span class="mpre"> -&gt; </span><a href="Pipes.Internal.html#loc_67_7_67_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_67_7_67_14&#39;)"><span class="hl_conref"><span class="mpre">Respond</span></span></a><span class="mpre"> </span><a href="#loc_152_25_152_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_25_152_26&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">  (</span><a href="#loc_150_13_150_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_13_150_17&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_152_28_152_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_28_152_31&#39;)"><span class="hl_varref"><span class="mpre">fb&#39;</span></span></a><span class="mpre">)
                </span><a href="Pipes.Internal.html#loc_68_7_68_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_68_7_68_8&#39;)"><span class="hl_conref"><span class="mpre">M</span></span></a><span class="mpre"> </span><a name="loc_153_19_153_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_19_153_21&#39;)"><span class="hl_vardecl"><span class="mpre">m0</span></span></a><span class="mpre">           -&gt; </span><a href="Pipes.Internal.html#loc_68_7_68_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_68_7_68_8&#39;)"><span class="hl_conref"><span class="mpre">M</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_137_10_137_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_10_137_22&#39;)"><span class="hl_varref"><span class="mpre">maskFunction</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_153_55_153_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_55_153_62&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
                    </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="hl_varref"><span class="mpre">writeIORef</span></span></a><span class="mpre"> </span><a href="#loc_138_9_138_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_9_138_14&#39;)"><span class="hl_varref"><span class="mpre">ioref</span></span></a><span class="mpre"> (</span><a href="#loc_129_29_129_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_29_129_35&#39;)"><span class="hl_conref"><span class="mpre">Masked</span></span></a><span class="mpre"> </span><a href="#loc_153_55_153_62" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_55_153_62&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre">)
                    let </span><a name="loc_155_25_155_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_25_155_30&#39;)"><span class="hl_fundecl"><span class="mpre">loop&#39;</span></span></a><span class="mpre"> </span><a name="loc_155_31_155_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_31_155_32&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = do
                            </span><a name="loc_156_29_156_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_29_156_31&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_155_31_155_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_31_155_32&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
                            case </span><a href="#loc_156_29_156_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_29_156_31&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre"> of
                                </span><a href="Pipes.Internal.html#loc_68_7_68_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_68_7_68_8&#39;)"><span class="hl_conref"><span class="mpre">M</span></span></a><span class="mpre"> </span><a name="loc_158_35_158_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_35_158_37&#39;)"><span class="hl_vardecl"><span class="mpre">m&#39;</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_155_25_155_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_25_155_30&#39;)"><span class="hl_varref"><span class="mpre">loop&#39;</span></span></a><span class="mpre"> </span><a href="#loc_158_35_158_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_35_158_37&#39;)"><span class="hl_varref"><span class="mpre">m&#39;</span></span></a><span class="mpre">
                                _    -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_156_29_156_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_29_156_31&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                    </span><a name="loc_160_21_160_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_21_160_23&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_155_25_155_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_25_155_30&#39;)"><span class="hl_varref"><span class="mpre">loop&#39;</span></span></a><span class="mpre"> </span><a href="#loc_153_19_153_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_19_153_21&#39;)"><span class="hl_varref"><span class="mpre">m0</span></span></a><span class="mpre">
                    </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="hl_varref"><span class="mpre">writeIORef</span></span></a><span class="mpre"> </span><a href="#loc_138_9_138_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_9_138_14&#39;)"><span class="hl_varref"><span class="mpre">ioref</span></span></a><span class="mpre">  </span><a href="#loc_129_18_129_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_129_18_129_26&#39;)"><span class="hl_conref"><span class="mpre">Unmasked</span></span></a><span class="mpre">
                    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_150_13_150_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_13_150_17&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_160_21_160_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_21_160_23&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)
                </span><a href="Pipes.Internal.html#loc_69_7_69_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_69_7_69_11&#39;)"><span class="hl_conref"><span class="mpre">Pure</span></span></a><span class="mpre"> </span><a name="loc_163_22_163_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_22_163_23&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">         -&gt; </span><a href="Pipes.Internal.html#loc_69_7_69_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_69_7_69_11&#39;)"><span class="hl_conref"><span class="mpre">Pure</span></span></a><span class="mpre"> </span><a href="#loc_163_22_163_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_22_163_23&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
        </span><a href="#loc_150_13_150_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_13_150_17&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_137_23_137_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_23_137_24&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_142_13_142_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_13_142_19&#39;)"><span class="hl_varref"><span class="mpre">unmask</span></span></a><span class="mpre">)

instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 166, srcSpanStartColumn = 10, srcSpanEndLine = 166, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 166, srcSpanStartColumn = 10, srcSpanEndLine = 166, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadThrow m) =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_116_18_116_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_116_18_116_28&#39;)"><span class="hl_classref"><span class="mpre">MonadThrow</span></span></a><span class="mpre"> (</span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><a href="Control.Monad.Catch.html#loc_124_3_124_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_124_3_124_9&#39;)"><span class="hl_vardecl"><span class="mpre">throwM</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_124_3_124_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_124_3_124_9&#39;)"><span class="hl_varref"><span class="mpre">throwM</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 169, srcSpanStartColumn = 10, srcSpanEndLine = 169, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 169, srcSpanStartColumn = 10, srcSpanEndLine = 169, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadCatch m) =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_139_23_139_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_139_23_139_33&#39;)"><span class="hl_classref"><span class="mpre">MonadCatch</span></span></a><span class="mpre"> (</span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><a href="Control.Monad.Catch.html#loc_144_3_144_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_144_3_144_8&#39;)"><span class="hl_vardecl"><span class="mpre">catch</span></span></a><span class="mpre"> = </span><a href="Pipes.Lift.html#loc_120_1_120_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Lift.html#loc_120_1_120_15&#39;)"><span class="hl_varref"><span class="mpre">liftCatchError</span></span></a><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_144_3_144_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_144_3_144_8&#39;)"><span class="hl_varref"><span class="mpre">C.catch</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 172, srcSpanStartColumn = 10, srcSpanEndLine = 172, srcSpanEndColumn = 37}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 172, srcSpanStartColumn = 10, srcSpanEndLine = 172, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadMask m, MonadIO m) =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_163_23_163_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_163_23_163_32&#39;)"><span class="hl_classref"><span class="mpre">MonadMask</span></span></a><span class="mpre"> (</span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><a href="Control.Monad.Catch.html#loc_167_3_167_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_167_3_167_7&#39;)"><span class="hl_vardecl"><span class="mpre">mask</span></span></a><span class="mpre">                = </span><a href="#loc_137_1_137_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_1_137_9&#39;)"><span class="hl_varref"><span class="mpre">liftMask</span></span></a><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_167_3_167_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_167_3_167_7&#39;)"><span class="hl_varref"><span class="mpre">mask</span></span></a><span class="mpre">
    </span><a href="Control.Monad.Catch.html#loc_175_3_175_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_175_3_175_22&#39;)"><span class="hl_vardecl"><span class="mpre">uninterruptibleMask</span></span></a><span class="mpre"> = </span><a href="#loc_137_1_137_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_1_137_9&#39;)"><span class="hl_varref"><span class="mpre">liftMask</span></span></a><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_175_3_175_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_175_3_175_22&#39;)"><span class="hl_varref"><span class="mpre">uninterruptibleMask</span></span></a><span class="mpre">

data </span><a name="loc_176_6_176_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_6_176_16&#39;)"><span class="hl_tycondecl"><span class="mpre">Finalizers</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> = </span><a name="loc_176_21_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_21_176_31&#39;)"><span class="hl_condecl"><span class="mpre">Finalizers</span></span></a><span class="mpre">
    { </span><span class="hl_fielddecl"><span class="mpre">_nextKey</span></span><span class="mpre">    :: !</span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre">
    , </span><span class="hl_fielddecl"><span class="mpre">_finalizers</span></span><span class="mpre"> :: !(</span><span class="hl_tyconref"><span class="mpre">M.Map</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">))
    }

</span><span class="hl_comment"><span class="mpre">{-| &#39;SafeT&#39; is a monad transformer that extends the base monad with the ability
    to &#39;register&#39; and &#39;release&#39; finalizers.

    All unreleased finalizers are called at the end of the &#39;SafeT&#39; block, even
    in the event of exceptions.
-}</span></span><span class="mpre">
newtype </span><a name="loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tycondecl"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> = </span><a name="loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_condecl"><span class="mpre">SafeT</span></span></a><span class="mpre"> { </span><a name="loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_fielddecl"><span class="mpre">unSafeT</span></span></a><span class="mpre"> :: </span><a href="Control.Monad.Trans.Reader.html#loc_92_9_92_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Reader.html#loc_92_9_92_16&#39;)"><span class="hl_tyconref"><span class="mpre">R.ReaderT</span></span></a><span class="mpre"> (</span><a href="GHC.IORef.html#loc_34_9_34_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_34_9_34_14&#39;)"><span class="hl_tyconref"><span class="mpre">IORef</span></span></a><span class="mpre"> (</span><a href="#loc_176_6_176_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_6_176_16&#39;)"><span class="hl_tyconref"><span class="mpre">Finalizers</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">)) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> }

</span><span class="hl_comment"><span class="mpre">-- Deriving &#39;Functor&#39;</span></span><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 190, srcSpanStartColumn = 10, srcSpanEndLine = 190, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 190, srcSpanStartColumn = 10, srcSpanEndLine = 190, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(Monad m) =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Functor</span></span><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">fmap</span></span><span class="mpre"> </span><a name="loc_191_10_191_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_10_191_11&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_191_12_191_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_12_191_13&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (do
        </span><a name="loc_192_9_192_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_192_9_192_10&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> </span><a href="#loc_191_12_191_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_12_191_13&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_191_10_191_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_191_10_191_11&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_192_9_192_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_192_9_192_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">) )

</span><span class="hl_comment"><span class="mpre">-- Deriving &#39;Applicative&#39;</span></span><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 10, srcSpanEndLine = 196, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 10, srcSpanEndLine = 196, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(Monad m) =&gt;</span></span><span class="mpre"> </span><a href="Control.Applicative.html#loc_113_20_113_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_113_20_113_31&#39;)"><span class="hl_classref"><span class="mpre">Applicative</span></span></a><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_fundecl"><span class="mpre">pure</span></span></a><span class="mpre"> </span><a name="loc_197_10_197_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_10_197_11&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_197_10_197_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_10_197_11&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
    </span><a name="loc_198_5_198_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_5_198_7&#39;)"><span class="hl_vardecl"><span class="mpre">mf</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_118_5_118_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_118_5_118_10&#39;)"><span class="hl_fundecl"><span class="mpre">&lt;*&gt;</span></span></a><span class="mpre"> </span><a name="loc_198_12_198_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_12_198_14&#39;)"><span class="hl_vardecl"><span class="mpre">mx</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (do
        </span><a name="loc_199_9_199_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_9_199_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> </span><a href="#loc_198_5_198_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_5_198_7&#39;)"><span class="hl_varref"><span class="mpre">mf</span></span></a><span class="mpre">
        </span><a name="loc_200_9_200_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_200_9_200_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> </span><a href="#loc_198_12_198_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_12_198_14&#39;)"><span class="hl_varref"><span class="mpre">mx</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_199_9_199_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_9_199_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_200_9_200_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_200_9_200_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">) )

</span><span class="hl_comment"><span class="mpre">-- Deriving &#39;Monad&#39;</span></span><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 204, srcSpanStartColumn = 10, srcSpanEndLine = 204, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 204, srcSpanStartColumn = 10, srcSpanEndLine = 204, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(Monad m) =&gt;</span></span><span class="mpre"> </span><span class="hl_classref"><span class="mpre">Monad</span></span><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="hl_fundecl"><span class="mpre">return</span></span><span class="mpre"> </span><a name="loc_205_12_205_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_12_205_13&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_205_12_205_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_12_205_13&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
    </span><a name="loc_206_5_206_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_5_206_6&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_fundecl"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a name="loc_206_11_206_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_11_206_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (do
        </span><a name="loc_207_9_207_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_9_207_10&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> </span><a href="#loc_206_5_206_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_5_206_6&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">
        </span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> (</span><a href="#loc_206_11_206_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_11_206_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_207_9_207_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_9_207_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">) )

</span><span class="hl_comment"><span class="mpre">-- Deriving &#39;MonadIO&#39;</span></span><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 211, srcSpanStartColumn = 10, srcSpanEndLine = 211, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 211, srcSpanStartColumn = 10, srcSpanEndLine = 211, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadIO m) =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.IO.Class.html#loc_30_20_30_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_30_20_30_27&#39;)"><span class="hl_classref"><span class="mpre">MonadIO</span></span></a><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_fundecl"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><a name="loc_212_12_212_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_12_212_13&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><a href="#loc_212_12_212_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_12_212_13&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- Deriving &#39;MonadThrow&#39;</span></span><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 215, srcSpanStartColumn = 10, srcSpanEndLine = 215, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 215, srcSpanStartColumn = 23, srcSpanEndLine = 215, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2"><span class="mpre">MonadThrow m =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_116_18_116_28" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_116_18_116_28&#39;)"><span class="hl_classref"><span class="mpre">MonadThrow</span></span></a><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><a href="Control.Monad.Catch.html#loc_124_3_124_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_124_3_124_9&#39;)"><span class="hl_fundecl"><span class="mpre">throwM</span></span></a><span class="mpre"> </span><a name="loc_216_12_216_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_12_216_13&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Catch.html#loc_124_3_124_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_124_3_124_9&#39;)"><span class="hl_varref"><span class="mpre">throwM</span></span></a><span class="mpre"> </span><a href="#loc_216_12_216_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_216_12_216_13&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- Deriving &#39;MonadCatch&#39;</span></span><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 219, srcSpanStartColumn = 10, srcSpanEndLine = 219, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 219, srcSpanStartColumn = 10, srcSpanEndLine = 219, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadCatch m) =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_139_23_139_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_139_23_139_33&#39;)"><span class="hl_classref"><span class="mpre">MonadCatch</span></span></a><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><a name="loc_220_5_220_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_5_220_6&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_144_3_144_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_144_3_144_8&#39;)"><span class="hl_fundecl"><span class="mpre">`catch`</span></span></a><span class="mpre"> </span><a name="loc_220_15_220_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_15_220_16&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> </span><a href="#loc_220_5_220_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_5_220_6&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_144_3_144_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_144_3_144_8&#39;)"><span class="hl_infix"><span class="mpre">`C.catch`</span></span></a><span class="mpre"> \</span><a name="loc_220_47_220_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_47_220_48&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> (</span><a href="#loc_220_15_220_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_15_220_16&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_220_47_220_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_47_220_48&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">))

</span><span class="hl_comment"><span class="mpre">-- Deriving &#39;MonadMask&#39;</span></span><span class="mpre">
instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 223, srcSpanStartColumn = 10, srcSpanEndLine = 223, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 223, srcSpanStartColumn = 10, srcSpanEndLine = 223, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadMask m) =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Catch.html#loc_163_23_163_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_163_23_163_32&#39;)"><span class="hl_classref"><span class="mpre">MonadMask</span></span></a><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><a href="Control.Monad.Catch.html#loc_167_3_167_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_167_3_167_7&#39;)"><span class="hl_fundecl"><span class="mpre">mask</span></span></a><span class="mpre"> </span><a name="loc_224_10_224_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_10_224_11&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Catch.html#loc_167_3_167_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_167_3_167_7&#39;)"><span class="hl_varref"><span class="mpre">mask</span></span></a><span class="mpre"> (\</span><a name="loc_224_28_224_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_28_224_35&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt;
        </span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> (</span><a href="#loc_224_10_224_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_10_224_11&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (\</span><a name="loc_225_22_225_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_22_225_24&#39;)"><span class="hl_vardecl"><span class="mpre">ma</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><a href="#loc_224_28_224_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_224_28_224_35&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> (</span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> </span><a href="#loc_225_22_225_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_22_225_24&#39;)"><span class="hl_varref"><span class="mpre">ma</span></span></a><span class="mpre">)))) ))
    </span><a href="Control.Monad.Catch.html#loc_175_3_175_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_175_3_175_22&#39;)"><span class="hl_fundecl"><span class="mpre">uninterruptibleMask</span></span></a><span class="mpre"> </span><a name="loc_226_25_226_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_226_25_226_26&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Catch.html#loc_175_3_175_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_175_3_175_22&#39;)"><span class="hl_varref"><span class="mpre">uninterruptibleMask</span></span></a><span class="mpre"> (\</span><a name="loc_226_58_226_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_226_58_226_65&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt;
        </span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> (</span><a href="#loc_226_25_226_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_226_25_226_26&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (\</span><a name="loc_227_22_227_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_22_227_24&#39;)"><span class="hl_vardecl"><span class="mpre">ma</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><a href="#loc_226_58_226_65" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_226_58_226_65&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> (</span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> </span><a href="#loc_227_22_227_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_22_227_24&#39;)"><span class="hl_varref"><span class="mpre">ma</span></span></a><span class="mpre">)))) ))

instance </span><a href="Control.Monad.Trans.Class.html#loc_49_7_49_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_49_7_49_17&#39;)"><span class="hl_classref"><span class="mpre">MonadTrans</span></span></a><span class="mpre"> </span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> where
    </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_fundecl"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a name="loc_230_10_230_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_230_10_230_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="#loc_230_10_230_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_230_10_230_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">{-| Run the &#39;SafeT&#39; monad transformer, executing all unreleased finalizers at
    the end of the computation
-}</span></span><span class="mpre">
</span><a href="#loc_236_1_236_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_1_236_9&#39;)"><span class="mpre">runSafeT</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 235, srcSpanStartColumn = 13, srcSpanEndLine = 235, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 235, srcSpanStartColumn = 13, srcSpanEndLine = 235, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadMask m, MonadIO m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_236_1_236_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_1_236_9&#39;)"><span class="hl_fundecl"><span class="mpre">runSafeT</span></span></a><span class="mpre"> </span><a name="loc_236_10_236_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_10_236_11&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Catch.html#loc_413_1_413_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_413_1_413_8&#39;)"><span class="hl_varref"><span class="mpre">C.bracket</span></span></a><span class="mpre">
    (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IORef.html#loc_42_1_42_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_42_1_42_9&#39;)"><span class="hl_varref"><span class="mpre">newIORef</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_176_21_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_21_176_31&#39;)"><span class="hl_conref"><span class="mpre">Finalizers</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">M.empty</span></span><span class="mpre">)
    (\</span><a name="loc_238_7_238_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_7_238_12&#39;)"><span class="hl_vardecl"><span class="mpre">ioref</span></span></a><span class="mpre"> -&gt; do
        </span><a href="#loc_176_21_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_21_176_31&#39;)"><span class="hl_conref"><span class="mpre">Finalizers</span></span></a><span class="mpre"> _ </span><a name="loc_239_22_239_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_239_22_239_24&#39;)"><span class="hl_vardecl"><span class="mpre">fs</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="hl_varref"><span class="mpre">readIORef</span></span></a><span class="mpre"> </span><a href="#loc_238_7_238_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_238_7_238_12&#39;)"><span class="hl_varref"><span class="mpre">ioref</span></span></a><span class="mpre">)
        </span><span class="hl_varref"><span class="mpre">mapM</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">snd</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">M.toDescList</span></span><span class="mpre"> </span><a href="#loc_239_22_239_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_239_22_239_24&#39;)"><span class="hl_varref"><span class="mpre">fs</span></span></a><span class="mpre">) )
    (</span><a href="Control.Monad.Trans.Reader.html#loc_92_35_92_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Reader.html#loc_92_35_92_45&#39;)"><span class="hl_varref"><span class="mpre">R.runReaderT</span></span></a><span class="mpre"> (</span><a href="#loc_187_29_187_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_29_187_36&#39;)"><span class="hl_varref"><span class="mpre">unSafeT</span></span></a><span class="mpre"> </span><a href="#loc_236_10_236_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_10_236_11&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE runSafeT #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Run &#39;SafeT&#39; in the base monad, executing all unreleased finalizers at the
    end of the computation

    Use &#39;runSafeP&#39; to safely flush all unreleased finalizers and ensure prompt
    finalization without exiting the &#39;Proxy&#39; monad.
-}</span></span><span class="mpre">
</span><a href="#loc_251_1_251_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_251_1_251_9&#39;)"><span class="mpre">runSafeP</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 250, srcSpanStartColumn = 13, srcSpanEndLine = 250, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 250, srcSpanStartColumn = 13, srcSpanEndLine = 250, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadMask m, MonadIO m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Effect</span></span><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Effect&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_251_1_251_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_251_1_251_9&#39;)"><span class="hl_vardecl"><span class="mpre">runSafeP</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_236_1_236_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_1_236_9&#39;)"><span class="hl_varref"><span class="mpre">runSafeT</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Pipes.Core.html#loc_119_1_119_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_119_1_119_10&#39;)"><span class="hl_varref"><span class="mpre">runEffect</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE runSafeP #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Token used to &#39;release&#39; a previously &#39;register&#39;ed finalizer</span></span><span class="mpre">
newtype </span><a name="loc_255_9_255_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_9_255_19&#39;)"><span class="hl_tycondecl"><span class="mpre">ReleaseKey</span></span></a><span class="mpre"> = </span><a name="loc_255_22_255_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_22_255_32&#39;)"><span class="hl_condecl"><span class="mpre">ReleaseKey</span></span></a><span class="mpre"> { </span><a name="loc_255_35_255_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_35_255_41&#39;)"><span class="hl_fielddecl"><span class="mpre">unlock</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Integer</span></span><span class="mpre"> }

</span><span class="hl_comment"><span class="mpre">{-| &#39;MonadSafe&#39; lets you &#39;register&#39; and &#39;release&#39; finalizers that execute in a
    &#39;Base&#39; monad
-}</span></span><span class="mpre">
class </span><span class="warning" data-warning="ClassDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 260, srcSpanStartColumn = 7, srcSpanEndLine = 260, srcSpanEndColumn = 66}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 260, srcSpanStartColumn = 7, srcSpanEndLine = 260, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">(MonadCatch m, MonadMask m, MonadIO m, MonadIO (Base m)) =&gt;</span></span><span class="mpre"> </span><a name="loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classdecl"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> where
    </span><span class="hl_comment"><span class="mpre">{-| The monad used to run resource management actions, corresponding to the
        monad directly beneath &#39;SafeT&#39;
    -}</span></span><span class="mpre">
    </span><span class="warning" data-warning="ClassDecl ClsTyFam (SrcSpanInfo {srcInfoClsTyFam (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 264, srcSpanStartColumn = 5, srcSpanEndLine = 264, srcSpanEndColumn = 38}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 264, srcSpanStartColumn = 5, srcSpanEndLine = 264, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine "><span class="mpre">type Base (m :: * -&gt; *) :: * -&gt; *</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- | Lift an action from the &#39;Base&#39; monad</span></span><span class="mpre">
    </span><a name="loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="mpre">liftBase</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">{-| &#39;register&#39; a finalizer, ensuring that the finalizer gets called if the
        finalizer is not &#39;release&#39;d before the end of the surrounding &#39;SafeT&#39;
        block.
    -}</span></span><span class="mpre">
    </span><a name="loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="mpre">register</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><a href="#loc_255_9_255_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_9_255_19&#39;)"><span class="hl_tyconref"><span class="mpre">ReleaseKey</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">{-| &#39;release&#39; a registered finalizer

        You can safely call &#39;release&#39; more than once on the same &#39;ReleaseKey&#39;.
        Every &#39;release&#39; after the first one does nothing.
    -}</span></span><span class="mpre">
    </span><a name="loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="mpre">release</span></a><span class="mpre">  :: </span><a href="#loc_255_9_255_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_9_255_19&#39;)"><span class="hl_tyconref"><span class="mpre">ReleaseKey</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 282, srcSpanStartColumn = 10, srcSpanEndLine = 282, srcSpanEndColumn = 51}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 282, srcSpanStartColumn = 10, srcSpanEndLine = 282, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadIO m, MonadCatch m, MonadMask m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="#loc_187_9_187_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_9_187_14&#39;)"><span class="hl_tyconref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 283, srcSpanStartColumn = 5, srcSpanEndLine = 283, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 283, srcSpanStartColumn = 5, srcSpanEndLine = 283, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (SafeT m) = m</span></span><span class="mpre">

    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre">

    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_fundecl"><span class="mpre">register</span></span></a><span class="mpre"> </span><a name="loc_287_14_287_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_14_287_16&#39;)"><span class="hl_vardecl"><span class="mpre">io</span></span></a><span class="mpre"> = do
        </span><a name="loc_288_9_288_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_9_288_14&#39;)"><span class="hl_vardecl"><span class="mpre">ioref</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><a href="Control.Monad.Trans.Reader.html#loc_146_1_146_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Reader.html#loc_146_1_146_4&#39;)"><span class="hl_varref"><span class="mpre">R.ask</span></span></a><span class="mpre">
        </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            </span><a href="#loc_176_21_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_21_176_31&#39;)"><span class="hl_conref"><span class="mpre">Finalizers</span></span></a><span class="mpre"> </span><a name="loc_290_24_290_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_24_290_25&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_290_26_290_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_26_290_28&#39;)"><span class="hl_vardecl"><span class="mpre">fs</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="hl_varref"><span class="mpre">readIORef</span></span></a><span class="mpre"> </span><a href="#loc_288_9_288_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_9_288_14&#39;)"><span class="hl_varref"><span class="mpre">ioref</span></span></a><span class="mpre">
            </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="hl_varref"><span class="mpre">writeIORef</span></span></a><span class="mpre"> </span><a href="#loc_288_9_288_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_288_9_288_14&#39;)"><span class="hl_varref"><span class="mpre">ioref</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_176_21_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_21_176_31&#39;)"><span class="hl_conref"><span class="mpre">Finalizers</span></span></a><span class="mpre"> (</span><a href="#loc_290_24_290_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_24_290_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">M.insert</span></span><span class="mpre"> </span><a href="#loc_290_24_290_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_24_290_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_287_14_287_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_14_287_16&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> </span><a href="#loc_290_26_290_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_26_290_28&#39;)"><span class="hl_varref"><span class="mpre">fs</span></span></a><span class="mpre">)
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_255_22_255_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_22_255_32&#39;)"><span class="hl_conref"><span class="mpre">ReleaseKey</span></span></a><span class="mpre"> </span><a href="#loc_290_24_290_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_290_24_290_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)

    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_fundecl"><span class="mpre">release</span></span></a><span class="mpre"> </span><a name="loc_294_13_294_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_294_13_294_16&#39;)"><span class="hl_vardecl"><span class="mpre">key</span></span></a><span class="mpre"> = do
        </span><a name="loc_295_9_295_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_9_295_14&#39;)"><span class="hl_vardecl"><span class="mpre">ioref</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_187_21_187_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_21_187_26&#39;)"><span class="hl_conref"><span class="mpre">SafeT</span></span></a><span class="mpre"> </span><a href="Control.Monad.Trans.Reader.html#loc_146_1_146_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Reader.html#loc_146_1_146_4&#39;)"><span class="hl_varref"><span class="mpre">R.ask</span></span></a><span class="mpre">
        </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            </span><a href="#loc_176_21_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_21_176_31&#39;)"><span class="hl_conref"><span class="mpre">Finalizers</span></span></a><span class="mpre"> </span><a name="loc_297_24_297_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_24_297_25&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_297_26_297_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_26_297_28&#39;)"><span class="hl_vardecl"><span class="mpre">fs</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IORef.html#loc_46_1_46_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_46_1_46_10&#39;)"><span class="hl_varref"><span class="mpre">readIORef</span></span></a><span class="mpre"> </span><a href="#loc_295_9_295_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_9_295_14&#39;)"><span class="hl_varref"><span class="mpre">ioref</span></span></a><span class="mpre">
            </span><a href="GHC.IORef.html#loc_50_1_50_11" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IORef.html#loc_50_1_50_11&#39;)"><span class="hl_varref"><span class="mpre">writeIORef</span></span></a><span class="mpre"> </span><a href="#loc_295_9_295_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_9_295_14&#39;)"><span class="hl_varref"><span class="mpre">ioref</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$!</span></span><span class="mpre"> </span><a href="#loc_176_21_176_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_21_176_31&#39;)"><span class="hl_conref"><span class="mpre">Finalizers</span></span></a><span class="mpre"> </span><a href="#loc_297_24_297_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_24_297_25&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">M.delete</span></span><span class="mpre"> (</span><a href="#loc_255_35_255_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_35_255_41&#39;)"><span class="hl_varref"><span class="mpre">unlock</span></span></a><span class="mpre"> </span><a href="#loc_294_13_294_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_294_13_294_16&#39;)"><span class="hl_varref"><span class="mpre">key</span></span></a><span class="mpre">) </span><a href="#loc_297_26_297_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_26_297_28&#39;)"><span class="hl_varref"><span class="mpre">fs</span></span></a><span class="mpre">)

instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 300, srcSpanStartColumn = 10, srcSpanEndLine = 300, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 300, srcSpanStartColumn = 10, srcSpanEndLine = 300, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 301, srcSpanStartColumn = 5, srcSpanEndLine = 301, srcSpanEndColumn = 43}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 301, srcSpanStartColumn = 5, srcSpanEndLine = 301, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (Proxy a&#39; a b&#39; b m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 306, srcSpanStartColumn = 10, srcSpanEndLine = 306, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 306, srcSpanStartColumn = 10, srcSpanEndLine = 306, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.Identity.html#loc_37_9_37_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Identity.html#loc_37_9_37_18&#39;)"><span class="hl_tyconref"><span class="mpre">I.IdentityT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 307, srcSpanStartColumn = 5, srcSpanEndLine = 307, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 307, srcSpanStartColumn = 5, srcSpanEndLine = 307, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (I.IdentityT m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 312, srcSpanStartColumn = 10, srcSpanEndLine = 312, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 312, srcSpanStartColumn = 10, srcSpanEndLine = 312, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Catch.Pure.html#loc_91_9_91_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.Pure.html#loc_91_9_91_15&#39;)"><span class="hl_tyconref"><span class="mpre">E.CatchT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 313, srcSpanStartColumn = 5, srcSpanEndLine = 313, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 313, srcSpanStartColumn = 5, srcSpanEndLine = 313, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (E.CatchT m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 318, srcSpanStartColumn = 10, srcSpanEndLine = 318, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 318, srcSpanStartColumn = 10, srcSpanEndLine = 318, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.Reader.html#loc_92_9_92_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Reader.html#loc_92_9_92_16&#39;)"><span class="hl_tyconref"><span class="mpre">R.ReaderT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 319, srcSpanStartColumn = 5, srcSpanEndLine = 319, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 319, srcSpanStartColumn = 5, srcSpanEndLine = 319, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (R.ReaderT i m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 324, srcSpanStartColumn = 10, srcSpanEndLine = 324, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 324, srcSpanStartColumn = 10, srcSpanEndLine = 324, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.State.Lazy.html#loc_142_9_142_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Lazy.html#loc_142_9_142_15&#39;)"><span class="hl_tyconref"><span class="mpre">S.StateT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 325, srcSpanStartColumn = 5, srcSpanEndLine = 325, srcSpanEndColumn = 38}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 325, srcSpanStartColumn = 5, srcSpanEndLine = 325, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (S.StateT s m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 330, srcSpanStartColumn = 10, srcSpanEndLine = 330, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 330, srcSpanStartColumn = 10, srcSpanEndLine = 330, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.State.Strict.html#loc_139_9_139_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_139_9_139_15&#39;)"><span class="hl_tyconref"><span class="mpre">S&#39;.StateT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 331, srcSpanStartColumn = 5, srcSpanEndLine = 331, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 331, srcSpanStartColumn = 5, srcSpanEndLine = 331, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (S&#39;.StateT s m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 336, srcSpanStartColumn = 10, srcSpanEndLine = 336, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 336, srcSpanStartColumn = 10, srcSpanEndLine = 336, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m, Monoid w) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.Writer.Lazy.html#loc_97_9_97_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Writer.Lazy.html#loc_97_9_97_16&#39;)"><span class="hl_tyconref"><span class="mpre">W.WriterT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 337, srcSpanStartColumn = 5, srcSpanEndLine = 337, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 337, srcSpanStartColumn = 5, srcSpanEndLine = 337, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (W.WriterT w m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 342, srcSpanStartColumn = 10, srcSpanEndLine = 342, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 342, srcSpanStartColumn = 10, srcSpanEndLine = 342, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m, Monoid w) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.Writer.Strict.html#loc_100_9_100_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Writer.Strict.html#loc_100_9_100_16&#39;)"><span class="hl_tyconref"><span class="mpre">W&#39;.WriterT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 343, srcSpanStartColumn = 5, srcSpanEndLine = 343, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 343, srcSpanStartColumn = 5, srcSpanEndLine = 343, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (W&#39;.WriterT w m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 348, srcSpanStartColumn = 10, srcSpanEndLine = 348, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 348, srcSpanStartColumn = 10, srcSpanEndLine = 348, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m, Monoid w) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.RWS.Lazy.html#loc_118_9_118_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.RWS.Lazy.html#loc_118_9_118_13&#39;)"><span class="hl_tyconref"><span class="mpre">RWS.RWST</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 349, srcSpanStartColumn = 5, srcSpanEndLine = 349, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 349, srcSpanStartColumn = 5, srcSpanEndLine = 349, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (RWS.RWST i w s m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 354, srcSpanStartColumn = 10, srcSpanEndLine = 354, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 354, srcSpanStartColumn = 10, srcSpanEndLine = 354, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m, Monoid w) =&gt;</span></span><span class="mpre"> </span><a href="#loc_260_67_260_76" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_260_67_260_76&#39;)"><span class="hl_classref"><span class="mpre">MonadSafe</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.RWS.Strict.html#loc_118_9_118_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.RWS.Strict.html#loc_118_9_118_13&#39;)"><span class="hl_tyconref"><span class="mpre">RWS&#39;.RWST</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
    </span><span class="warning" data-warning="InstDeclInsType (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 355, srcSpanStartColumn = 5, srcSpanEndLine = 355, srcSpanEndColumn = 43}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 355, srcSpanStartColumn = 5, srcSpanEndLine = 355, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">type Base (RWS&#39;.RWST i w s m) = Base m</span></span><span class="mpre">
    </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_vardecl"><span class="mpre">liftBase</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre">
    </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_vardecl"><span class="mpre">register</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_vardecl"><span class="mpre">release</span></span></a><span class="mpre">  = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Analogous to &#39;C.onException&#39; from @Control.Monad.Catch@, except this also
    protects against premature termination

    @(\`onException\` io)@ is a monad morphism.
-}</span></span><span class="mpre">
</span><a href="#loc_366_4_366_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_4_366_17&#39;)"><span class="mpre">onException</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 365, srcSpanStartColumn = 16, srcSpanEndLine = 365, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 365, srcSpanStartColumn = 16, srcSpanEndLine = 365, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_366_1_366_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_1_366_3&#39;)"><span class="hl_vardecl"><span class="mpre">m1</span></span></a><span class="mpre"> </span><a name="loc_366_4_366_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_4_366_17&#39;)"><span class="hl_fundecl"><span class="mpre">`onException`</span></span></a><span class="mpre"> </span><a name="loc_366_18_366_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_18_366_20&#39;)"><span class="hl_vardecl"><span class="mpre">io</span></span></a><span class="mpre"> = do
    </span><a name="loc_367_5_367_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_367_5_367_8&#39;)"><span class="hl_vardecl"><span class="mpre">key</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_273_5_273_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_273_5_273_13&#39;)"><span class="hl_varref"><span class="mpre">register</span></span></a><span class="mpre"> (</span><a href="#loc_366_18_366_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_18_366_20&#39;)"><span class="hl_varref"><span class="mpre">io</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)
    </span><a name="loc_368_5_368_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_368_5_368_6&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">   &lt;- </span><a href="#loc_366_1_366_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_1_366_3&#39;)"><span class="hl_varref"><span class="mpre">m1</span></span></a><span class="mpre">
    </span><a href="#loc_280_5_280_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_5_280_12&#39;)"><span class="hl_varref"><span class="mpre">release</span></span></a><span class="mpre"> </span><a href="#loc_367_5_367_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_367_5_367_8&#39;)"><span class="hl_varref"><span class="mpre">key</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_368_5_368_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_368_5_368_6&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE onException #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- $utilities
    These utilities let you supply a finalizer that runs in the &#39;Base&#39; monad
    (i.e. the monad directly beneath &#39;SafeT&#39;).  If you don&#39;t need to use the
    full power of the &#39;Base&#39; monad and you only need to use to use &#39;IO&#39;, then
    just wrap the finalizer in &#39;liftIO&#39;, like this:

&gt; myAction `finally` (liftIO myFinalizer)

    This will lead to a simple inferred type with a single &#39;MonadSafe&#39;
    constraint:

&gt; (MonadSafe m) =&gt; ...

    For examples of this, see the utilities in &quot;Pipes.Safe.Prelude&quot;.

    If you omit the &#39;liftIO&#39;, the compiler will infer the following constraint
    instead:

&gt; (MonadSafe m, Base m ~ IO) =&gt; ...

    This means that this function would require &#39;IO&#39; directly beneath the
    &#39;SafeT&#39; monad transformer, which might not be what you want.
-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Analogous to &#39;C.finally&#39; from @Control.Monad.Catch@, except this also
    protects against premature termination
-}</span></span><span class="mpre">
</span><a href="#loc_401_4_401_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_4_401_13&#39;)"><span class="mpre">finally</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 400, srcSpanStartColumn = 12, srcSpanEndLine = 400, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 400, srcSpanStartColumn = 12, srcSpanEndLine = 400, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_401_1_401_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_1_401_3&#39;)"><span class="hl_vardecl"><span class="mpre">m1</span></span></a><span class="mpre"> </span><a name="loc_401_4_401_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_4_401_13&#39;)"><span class="hl_fundecl"><span class="mpre">`finally`</span></span></a><span class="mpre"> </span><a name="loc_401_14_401_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_14_401_19&#39;)"><span class="hl_vardecl"><span class="mpre">after</span></span></a><span class="mpre"> = </span><a href="#loc_419_1_419_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_1_419_9&#39;)"><span class="hl_varref"><span class="mpre">bracket_</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) </span><a href="#loc_401_14_401_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_14_401_19&#39;)"><span class="hl_varref"><span class="mpre">after</span></span></a><span class="mpre"> </span><a href="#loc_401_1_401_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_401_1_401_3&#39;)"><span class="hl_varref"><span class="mpre">m1</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE finally #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Analogous to &#39;C.bracket&#39; from @Control.Monad.Catch@, except this also
    protects against premature termination
-}</span></span><span class="mpre">
</span><a href="#loc_408_1_408_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_1_408_8&#39;)"><span class="mpre">bracket</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 407, srcSpanStartColumn = 12, srcSpanEndLine = 407, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 407, srcSpanStartColumn = 12, srcSpanEndLine = 407, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
</span><a name="loc_408_1_408_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_1_408_8&#39;)"><span class="hl_fundecl"><span class="mpre">bracket</span></span></a><span class="mpre"> </span><a name="loc_408_9_408_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_9_408_15&#39;)"><span class="hl_vardecl"><span class="mpre">before</span></span></a><span class="mpre"> </span><a name="loc_408_16_408_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_16_408_21&#39;)"><span class="hl_vardecl"><span class="mpre">after</span></span></a><span class="mpre"> </span><a name="loc_408_22_408_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_22_408_28&#39;)"><span class="hl_vardecl"><span class="mpre">action</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Catch.html#loc_167_3_167_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_167_3_167_7&#39;)"><span class="hl_varref"><span class="mpre">mask</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_408_39_408_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_39_408_46&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
    </span><a name="loc_409_5_409_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_5_409_6&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre"> </span><a href="#loc_408_9_408_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_9_408_15&#39;)"><span class="hl_varref"><span class="mpre">before</span></span></a><span class="mpre">
    </span><a name="loc_410_5_410_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_410_5_410_6&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_408_39_408_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_39_408_46&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> (</span><a href="#loc_408_22_408_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_22_408_28&#39;)"><span class="hl_varref"><span class="mpre">action</span></span></a><span class="mpre"> </span><a href="#loc_409_5_409_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_5_409_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">) </span><a href="#loc_366_4_366_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_4_366_17&#39;)"><span class="hl_infix"><span class="mpre">`onException`</span></span></a><span class="mpre"> </span><a href="#loc_408_16_408_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_16_408_21&#39;)"><span class="hl_varref"><span class="mpre">after</span></span></a><span class="mpre"> </span><a href="#loc_409_5_409_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_5_409_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
    _ &lt;- </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre"> (</span><a href="#loc_408_16_408_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_16_408_21&#39;)"><span class="hl_varref"><span class="mpre">after</span></span></a><span class="mpre"> </span><a href="#loc_409_5_409_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_5_409_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_410_5_410_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_410_5_410_6&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE bracket #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Analogous to &#39;C.bracket_&#39; from @Control.Monad.Catch@, except this also
    protects against premature termination
-}</span></span><span class="mpre">
</span><a href="#loc_419_1_419_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_1_419_9&#39;)"><span class="mpre">bracket_</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 418, srcSpanStartColumn = 13, srcSpanEndLine = 418, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 418, srcSpanStartColumn = 13, srcSpanEndLine = 418, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLin"><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
</span><a name="loc_419_1_419_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_1_419_9&#39;)"><span class="hl_fundecl"><span class="mpre">bracket_</span></span></a><span class="mpre"> </span><a name="loc_419_10_419_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_10_419_16&#39;)"><span class="hl_vardecl"><span class="mpre">before</span></span></a><span class="mpre"> </span><a name="loc_419_17_419_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_17_419_22&#39;)"><span class="hl_vardecl"><span class="mpre">after</span></span></a><span class="mpre"> </span><a name="loc_419_23_419_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_23_419_29&#39;)"><span class="hl_vardecl"><span class="mpre">action</span></span></a><span class="mpre"> = </span><a href="#loc_408_1_408_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_408_1_408_8&#39;)"><span class="hl_varref"><span class="mpre">bracket</span></span></a><span class="mpre"> </span><a href="#loc_419_10_419_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_10_419_16&#39;)"><span class="hl_varref"><span class="mpre">before</span></span></a><span class="mpre"> (\_ -&gt; </span><a href="#loc_419_17_419_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_17_419_22&#39;)"><span class="hl_varref"><span class="mpre">after</span></span></a><span class="mpre">) (\_ -&gt; </span><a href="#loc_419_23_419_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_419_23_419_29&#39;)"><span class="hl_varref"><span class="mpre">action</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE bracket_ #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Analogous to &#39;C.bracketOnError&#39; from @Control.Monad.Catch@, except this also
    protects against premature termination
-}</span></span><span class="mpre">
</span><a href="#loc_427_1_427_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_1_427_15&#39;)"><span class="mpre">bracketOnError</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 426, srcSpanStartColumn = 8, srcSpanEndLine = 426, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine = 426, srcSpanStartColumn = 8, srcSpanEndLine = 426, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-safe-2.2.0/src/Pipes/Safe.hs&quot;, srcSpanStartLine ="><span class="mpre">(MonadSafe m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Base</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
</span><a name="loc_427_1_427_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_1_427_15&#39;)"><span class="hl_fundecl"><span class="mpre">bracketOnError</span></span></a><span class="mpre"> </span><a name="loc_427_16_427_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_16_427_22&#39;)"><span class="hl_vardecl"><span class="mpre">before</span></span></a><span class="mpre"> </span><a name="loc_427_23_427_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_23_427_28&#39;)"><span class="hl_vardecl"><span class="mpre">after</span></span></a><span class="mpre"> </span><a name="loc_427_29_427_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_29_427_35&#39;)"><span class="hl_vardecl"><span class="mpre">action</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Catch.html#loc_167_3_167_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Catch.html#loc_167_3_167_7&#39;)"><span class="hl_varref"><span class="mpre">mask</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_427_46_427_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_46_427_53&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
    </span><a name="loc_428_5_428_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_428_5_428_6&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_267_5_267_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_5_267_13&#39;)"><span class="hl_varref"><span class="mpre">liftBase</span></span></a><span class="mpre"> </span><a href="#loc_427_16_427_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_16_427_22&#39;)"><span class="hl_varref"><span class="mpre">before</span></span></a><span class="mpre">
    </span><a href="#loc_427_46_427_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_46_427_53&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> (</span><a href="#loc_427_29_427_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_29_427_35&#39;)"><span class="hl_varref"><span class="mpre">action</span></span></a><span class="mpre"> </span><a href="#loc_428_5_428_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_428_5_428_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">) </span><a href="#loc_366_4_366_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_366_4_366_17&#39;)"><span class="hl_infix"><span class="mpre">`onException`</span></span></a><span class="mpre"> </span><a href="#loc_427_23_427_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_23_427_28&#39;)"><span class="hl_varref"><span class="mpre">after</span></span></a><span class="mpre"> </span><a href="#loc_428_5_428_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_428_5_428_6&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE bracketOnError #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- $reexports
    @Control.Monad.Catch@ re-exports all functions except for the ones that
    conflict with the generalized versions provided here (i.e. &#39;bracket&#39;,
    &#39;finally&#39;, etc.).

    @Control.Exception@ re-exports &#39;Exception&#39; and &#39;SomeException&#39;.
-}</span></span><span class="mpre">
</span></div></body></html>