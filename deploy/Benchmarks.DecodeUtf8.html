<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE ForeignFunctionInterface #-}

</span><span class="hl_comment"><span class="mpre">-- | Test decoding of UTF-8</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Tested in this benchmark:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Decoding bytes using UTF-8</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In some tests:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Taking the length of the result</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Taking the init of the result</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The latter are used for testing stream fusion.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
module Benchmarks.DecodeUtf8
    ( benchmark
    ) where

import Foreign.C.Types
import Data.ByteString.Internal (</span><a href="Data.ByteString.Internal.html#loc_193_6_193_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_6_193_16&#39;)"><span class="mpre">ByteString</span></a><span class="mpre">(..))
import Data.ByteString.Lazy.Internal (</span><a href="Data.ByteString.Lazy.Internal.html#loc_82_6_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_82_6_82_16&#39;)"><span class="mpre">ByteString</span></a><span class="mpre">(..))
import Foreign.Ptr (Ptr, plusPtr)
import Foreign.ForeignPtr (</span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="mpre">withForeignPtr</span></a><span class="mpre">)
import Data.Word (Word8)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/DecodeUtf8.hs&quot;, srcSpanStartLine = 27, srcSpanStartColumn = 18, srcSpanEndLine = 27, srcSpanEndColumn = 27}, srcInfoPoints = []}) &quot;Criterion&quot;"><span class="mpre">Criterion</span></span><span class="mpre"> as C
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/DecodeUtf8.hs&quot;, srcSpanStartLine = 28, srcSpanStartColumn = 8, srcSpanEndLine = 28, srcSpanEndColumn = 17}, srcInfoPoints = []}) &quot;Criterion&quot;"><span class="mpre">Criterion</span></span><span class="mpre"> (Benchmark, bgroup, nf)
import qualified Codec.Binary.UTF8.Generic as U8
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/DecodeUtf8.hs&quot;, srcSpanStartLine = 30, srcSpanStartColumn = 18, srcSpanEndLine = 30, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as B
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/DecodeUtf8.hs&quot;, srcSpanStartLine = 31, srcSpanStartColumn = 18, srcSpanEndLine = 31, srcSpanEndColumn = 38}, srcInfoPoints = []}) &quot;Data.ByteString.Lazy&quot;"><span class="mpre">Data.ByteString.Lazy</span></span><span class="mpre"> as BL
import qualified Data.Text as T
import qualified Data.Text.Encoding as T
import qualified Data.Text.Lazy as TL
import qualified Data.Text.Lazy.Encoding as TL

</span><a href="#loc_38_1_38_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_10&#39;)"><span class="mpre">benchmark</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Benchmark</span></span><span class="mpre">
</span><a name="loc_38_1_38_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_1_38_10&#39;)"><span class="hl_fundecl"><span class="mpre">benchmark</span></span></a><span class="mpre"> </span><a name="loc_38_11_38_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_11_38_15&#39;)"><span class="hl_vardecl"><span class="mpre">kind</span></span></a><span class="mpre"> </span><a name="loc_38_16_38_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_16_38_18&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="mpre"> = do
    </span><a name="loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">  &lt;- </span><span class="hl_varref"><span class="mpre">B.readFile</span></span><span class="mpre"> </span><a href="#loc_38_16_38_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_16_38_18&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre">
    </span><a name="loc_40_5_40_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_8&#39;)"><span class="hl_vardecl"><span class="mpre">lbs</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">BL.readFile</span></span><span class="mpre"> </span><a href="#loc_38_16_38_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_16_38_18&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre">
    let </span><a name="loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_fundecl"><span class="mpre">bench</span></span></a><span class="mpre"> </span><a name="loc_41_15_41_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_15_41_19&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">C.bench</span></span><span class="mpre"> (</span><a href="#loc_41_15_41_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_15_41_19&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;+&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_38_11_38_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_11_38_15&#39;)"><span class="hl_varref"><span class="mpre">kind</span></span></a><span class="mpre">)
        </span><a name="loc_42_9_42_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_9_42_21&#39;)"><span class="hl_fundecl"><span class="mpre">decodeStream</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Lazy.Internal.html#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_42_29_42_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_29_42_31&#39;)"><span class="hl_vardecl"><span class="mpre">b0</span></span></a><span class="mpre"> </span><a name="loc_42_32_42_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_32_42_35&#39;)"><span class="hl_vardecl"><span class="mpre">bs0</span></span></a><span class="mpre">) = case </span><a href="Data.Text.Encoding.html#loc_242_1_242_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.html#loc_242_1_242_17&#39;)"><span class="hl_varref"><span class="mpre">T.streamDecodeUtf8</span></span></a><span class="mpre"> </span><a href="#loc_42_29_42_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_29_42_31&#39;)"><span class="hl_varref"><span class="mpre">b0</span></span></a><span class="mpre"> of
                                        </span><a href="Data.Text.Encoding.html#loc_222_17_222_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.html#loc_222_17_222_21&#39;)"><span class="hl_conref"><span class="mpre">T.Some</span></span></a><span class="mpre"> </span><a name="loc_43_48_43_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_48_43_50&#39;)"><span class="hl_vardecl"><span class="mpre">t0</span></span></a><span class="mpre"> _ </span><a name="loc_43_53_43_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_53_43_55&#39;)"><span class="hl_vardecl"><span class="mpre">f0</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_43_48_43_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_48_43_50&#39;)"><span class="hl_varref"><span class="mpre">t0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_44_17_44_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_17_44_19&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_43_53_43_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_43_53_43_55&#39;)"><span class="hl_varref"><span class="mpre">f0</span></span></a><span class="mpre"> </span><a href="#loc_42_32_42_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_32_42_35&#39;)"><span class="hl_varref"><span class="mpre">bs0</span></span></a><span class="mpre">
          where </span><a name="loc_44_17_44_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_17_44_19&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_44_20_44_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_20_44_21&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Lazy.Internal.html#loc_82_27_82_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_82_27_82_32&#39;)"><span class="hl_conref"><span class="mpre">Chunk</span></span></a><span class="mpre"> </span><a name="loc_44_29_44_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_29_44_30&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> </span><a name="loc_44_31_44_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_31_44_34&#39;)"><span class="hl_vardecl"><span class="mpre">bs1</span></span></a><span class="mpre">) = case </span><a href="#loc_44_20_44_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_20_44_21&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_44_29_44_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_29_44_30&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> of
                                       </span><a href="Data.Text.Encoding.html#loc_222_17_222_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.html#loc_222_17_222_21&#39;)"><span class="hl_conref"><span class="mpre">T.Some</span></span></a><span class="mpre"> </span><a name="loc_45_47_45_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_47_45_49&#39;)"><span class="hl_vardecl"><span class="mpre">t1</span></span></a><span class="mpre"> _ </span><a name="loc_45_52_45_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_52_45_54&#39;)"><span class="hl_vardecl"><span class="mpre">f1</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_45_47_45_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_47_45_49&#39;)"><span class="hl_varref"><span class="mpre">t1</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_44_17_44_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_17_44_19&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_45_52_45_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_52_45_54&#39;)"><span class="hl_varref"><span class="mpre">f1</span></span></a><span class="mpre"> </span><a href="#loc_44_31_44_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_31_44_34&#39;)"><span class="hl_varref"><span class="mpre">bs1</span></span></a><span class="mpre">
                </span><a href="#loc_44_17_44_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_17_44_19&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> _ _ = []
        </span><a href="#loc_42_9_42_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_9_42_21&#39;)"><span class="hl_fundecl"><span class="mpre">decodeStream</span></span></a><span class="mpre"> _ = []
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">bgroup</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;DecodeUtf8&quot;</span></span><span class="mpre">
        [ </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Strict&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> </span><a href="Data.Text.Encoding.html#loc_307_1_307_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.html#loc_307_1_307_11&#39;)"><span class="hl_varref"><span class="mpre">T.decodeUtf8</span></span></a><span class="mpre"> </span><a href="#loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Stream&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> </span><a href="#loc_42_9_42_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_42_9_42_21&#39;)"><span class="hl_varref"><span class="mpre">decodeStream</span></span></a><span class="mpre"> </span><a href="#loc_40_5_40_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_8&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;IConv&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_64_1_64_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_1_64_6&#39;)"><span class="hl_varref"><span class="mpre">iconv</span></span></a><span class="mpre"> </span><a href="#loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;StrictLength&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> (</span><a href="Data.Text.html#loc_554_1_554_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.html#loc_554_1_554_7&#39;)"><span class="hl_varref"><span class="mpre">T.length</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Encoding.html#loc_307_1_307_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.html#loc_307_1_307_11&#39;)"><span class="hl_varref"><span class="mpre">T.decodeUtf8</span></span></a><span class="mpre">) </span><a href="#loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;StrictInitLength&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> (</span><a href="Data.Text.html#loc_554_1_554_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.html#loc_554_1_554_7&#39;)"><span class="hl_varref"><span class="mpre">T.length</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.html#loc_514_1_514_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.html#loc_514_1_514_5&#39;)"><span class="hl_varref"><span class="mpre">T.init</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Encoding.html#loc_307_1_307_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Encoding.html#loc_307_1_307_11&#39;)"><span class="hl_varref"><span class="mpre">T.decodeUtf8</span></span></a><span class="mpre">) </span><a href="#loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Lazy&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> </span><a href="Data.Text.Lazy.Encoding.html#loc_127_1_127_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.Encoding.html#loc_127_1_127_11&#39;)"><span class="hl_varref"><span class="mpre">TL.decodeUtf8</span></span></a><span class="mpre"> </span><a href="#loc_40_5_40_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_8&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;LazyLength&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> (</span><a href="Data.Text.Lazy.html#loc_529_1_529_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.html#loc_529_1_529_7&#39;)"><span class="hl_varref"><span class="mpre">TL.length</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Lazy.Encoding.html#loc_127_1_127_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.Encoding.html#loc_127_1_127_11&#39;)"><span class="hl_varref"><span class="mpre">TL.decodeUtf8</span></span></a><span class="mpre">) </span><a href="#loc_40_5_40_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_8&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;LazyInitLength&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> (</span><a href="Data.Text.Lazy.html#loc_529_1_529_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.html#loc_529_1_529_7&#39;)"><span class="hl_varref"><span class="mpre">TL.length</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Lazy.html#loc_477_1_477_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.html#loc_477_1_477_5&#39;)"><span class="hl_varref"><span class="mpre">TL.init</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Text.Lazy.Encoding.html#loc_127_1_127_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Lazy.Encoding.html#loc_127_1_127_11&#39;)"><span class="hl_varref"><span class="mpre">TL.decodeUtf8</span></span></a><span class="mpre">) </span><a href="#loc_40_5_40_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_8&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;StrictStringUtf8&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> </span><a href="Codec.Binary.UTF8.Generic.html#loc_102_1_102_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Codec.Binary.UTF8.Generic.html#loc_102_1_102_9&#39;)"><span class="hl_varref"><span class="mpre">U8.toString</span></span></a><span class="mpre"> </span><a href="#loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;StrictStringUtf8Length&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">length</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Codec.Binary.UTF8.Generic.html#loc_102_1_102_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Codec.Binary.UTF8.Generic.html#loc_102_1_102_9&#39;)"><span class="hl_varref"><span class="mpre">U8.toString</span></span></a><span class="mpre">) </span><a href="#loc_39_5_39_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_5_39_7&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;LazyStringUtf8&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> </span><a href="Codec.Binary.UTF8.Generic.html#loc_102_1_102_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Codec.Binary.UTF8.Generic.html#loc_102_1_102_9&#39;)"><span class="hl_varref"><span class="mpre">U8.toString</span></span></a><span class="mpre"> </span><a href="#loc_40_5_40_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_8&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre">
        , </span><a href="#loc_41_9_41_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_9_41_14&#39;)"><span class="hl_varref"><span class="mpre">bench</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;LazyStringUtf8Length&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">nf</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">length</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Codec.Binary.UTF8.Generic.html#loc_102_1_102_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Codec.Binary.UTF8.Generic.html#loc_102_1_102_9&#39;)"><span class="hl_varref"><span class="mpre">U8.toString</span></span></a><span class="mpre">) </span><a href="#loc_40_5_40_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_5_40_8&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre">
        ]

</span><a href="#loc_64_1_64_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_1_64_6&#39;)"><span class="mpre">iconv</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">B.ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">CInt</span></span><span class="mpre">
</span><a name="loc_64_1_64_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_1_64_6&#39;)"><span class="hl_fundecl"><span class="mpre">iconv</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Internal.html#loc_193_19_193_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_193_19_193_21&#39;)"><span class="hl_conref"><span class="mpre">PS</span></span></a><span class="mpre"> </span><a name="loc_64_11_64_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_11_64_13&#39;)"><span class="hl_vardecl"><span class="mpre">fp</span></span></a><span class="mpre"> </span><a name="loc_64_14_64_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_14_64_17&#39;)"><span class="hl_vardecl"><span class="mpre">off</span></span></a><span class="mpre"> </span><a name="loc_64_18_64_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_18_64_21&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre">) = </span><a href="Foreign.ForeignPtr.Imp.html#loc_88_1_88_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.ForeignPtr.Imp.html#loc_88_1_88_15&#39;)"><span class="hl_varref"><span class="mpre">withForeignPtr</span></span></a><span class="mpre"> </span><a href="#loc_64_11_64_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_11_64_13&#39;)"><span class="hl_varref"><span class="mpre">fp</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_64_46_64_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_46_64_49&#39;)"><span class="hl_vardecl"><span class="mpre">ptr</span></span></a><span class="mpre"> -&gt;
                        </span><span class="hl_varref"><span class="mpre">time_iconv</span></span><span class="mpre"> (</span><a href="#loc_64_46_64_49" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_46_64_49&#39;)"><span class="hl_varref"><span class="mpre">ptr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`plusPtr`</span></span><span class="mpre"> </span><a href="#loc_64_14_64_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_14_64_17&#39;)"><span class="hl_varref"><span class="mpre">off</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_64_18_64_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_18_64_21&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/DecodeUtf8.hs&quot;, srcSpanStartLine = 67, srcSpanStartColumn = 1, srcSpanEndLine = 67, srcSpanEndColumn = 72}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/benchmarks/haskell/Benchmarks/DecodeUtf8.hs&quot;, srcSpanStartLine = 67, srcSpanStartColumn = 1, srcSpanEndLine = 67, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/text-1.1.1.3/ben"><span class="mpre">foreign import ccall unsafe time_iconv :: Ptr Word8 -&gt; CSize -&gt; IO CInt</span></span><span class="mpre">
</span></div></body></html>