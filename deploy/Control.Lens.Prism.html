<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE Rank2Types #-}

#ifdef TRUSTWORTHY
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Lens.Prism</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2012-14 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Lens.Prism
  (
  </span><span class="hl_comment"><span class="mpre">-- * Prisms</span></span><span class="mpre">
    Prism, Prism&#39;
  , APrism, APrism&#39;
  </span><span class="hl_comment"><span class="mpre">-- * Constructing Prisms</span></span><span class="mpre">
  , prism
  , prism&#39;
  </span><span class="hl_comment"><span class="mpre">-- * Consuming Prisms</span></span><span class="mpre">
  , withPrism
  , clonePrism
  , outside
  , aside
  , without
  , below
  , isn&#39;t
  , matching
  </span><span class="hl_comment"><span class="mpre">-- * Common Prisms</span></span><span class="mpre">
  , _Left
  , _Right
  , _Just
  , _Nothing
  , _Void
  , _Show
  , only
  , nearly
  </span><span class="hl_comment"><span class="mpre">-- * Prismatic profunctors</span></span><span class="mpre">
  , Choice(..)
  ) where

import Control.Applicative
import Control.Lens.Internal.Prism
import Control.Lens.Lens
import Control.Lens.Review
import Control.Lens.Type
import Control.Monad
import Data.Functor.Identity
import Data.Profunctor
import Data.Profunctor.Rep
import Data.Traversable
import Data.Void
#ifndef SAFE
import Unsafe.Coerce
#else
import Data.Profunctor.Unsafe
#endif

</span><span class="warning" data-warning="DeclAnnPragma (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 64, srcSpanStartColumn = 1, srcSpanEndLine = 64, srcSpanEndColumn = 49}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 64, srcSpanStartColumn = 1, srcSpanEndLine = 64, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 6"><span class="mpre">{-# ANN module &quot;HLint: ignore Use camelCase&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- $setup</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; :set -XNoOverloadedStrings</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Control.Lens</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Numeric.Natural</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Debug.SimpleReflect.Expr</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Debug.SimpleReflect.Vars as Vars hiding (f,g)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let isLeft  (Left  _) = True; isLeft  _ = False</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let isRight (Right _) = True; isRight _ = False</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let f :: Expr -&gt; Expr; f = Debug.SimpleReflect.Vars.f</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let g :: Expr -&gt; Expr; g = Debug.SimpleReflect.Vars.g</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Prism Internals</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | If you see this in a signature for a function, the function is expecting a &#39;Prism&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 82, srcSpanStartColumn = 1, srcSpanEndLine = 82, srcSpanEndColumn = 77}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 82, srcSpanStartColumn = 1, srcSpanEndLine = 82, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 82"><span class="mpre">type APrism s t a b = Market a b a (Identity b) -&gt; Market a b s (Identity t)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- type APrism&#39; = &#39;Simple&#39; &#39;APrism&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 1, srcSpanEndLine = 87, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 1, srcSpanEndLine = 87, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 87"><span class="mpre">type APrism&#39; s a = APrism s s a a</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert &#39;APrism&#39; to the pair of functions that characterize it.</span></span><span class="mpre">
</span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="mpre">withPrism</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">APrism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; ((</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
#ifdef SAFE
</span><a name="loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_fundecl"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a name="loc_92_11_92_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_11_92_12&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_92_13_92_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_13_92_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = case </span><a href="#loc_92_11_92_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_11_92_12&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="Control.Lens.Internal.Prism.html#loc_32_23_32_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Prism.html#loc_32_23_32_29&#39;)"><span class="hl_conref"><span class="mpre">Market</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre">) of
  </span><a href="Control.Lens.Internal.Prism.html#loc_32_23_32_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Prism.html#loc_32_23_32_29&#39;)"><span class="hl_conref"><span class="mpre">Market</span></span></a><span class="mpre"> </span><a name="loc_93_10_93_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_10_93_12&#39;)"><span class="hl_vardecl"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a name="loc_93_13_93_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_17&#39;)"><span class="hl_vardecl"><span class="mpre">seta</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_92_13_92_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_13_92_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_93_10_93_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_10_93_12&#39;)"><span class="hl_varref"><span class="mpre">bt</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">either</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre">) </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_93_13_93_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_93_13_93_17&#39;)"><span class="hl_varref"><span class="mpre">seta</span></span></a><span class="mpre">)
#else
</span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_fundecl"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a name="loc_95_11_95_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_11_95_12&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_95_13_95_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_13_95_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = case </span><a href="Unsafe.Coerce.html#loc_59_1_59_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Unsafe.Coerce.html#loc_59_1_59_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeCoerce</span></span></a><span class="mpre"> (</span><a href="#loc_95_11_95_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_11_95_12&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="Control.Lens.Internal.Prism.html#loc_32_23_32_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Prism.html#loc_32_23_32_29&#39;)"><span class="hl_conref"><span class="mpre">Market</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre">)) of
  </span><a href="Control.Lens.Internal.Prism.html#loc_32_23_32_29" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Prism.html#loc_32_23_32_29&#39;)"><span class="hl_conref"><span class="mpre">Market</span></span></a><span class="mpre"> </span><a name="loc_96_10_96_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_10_96_12&#39;)"><span class="hl_vardecl"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a name="loc_96_13_96_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_13_96_17&#39;)"><span class="hl_vardecl"><span class="mpre">seta</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_95_13_95_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_13_95_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_96_10_96_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_10_96_12&#39;)"><span class="hl_varref"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a href="#loc_96_13_96_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_96_13_96_17&#39;)"><span class="hl_varref"><span class="mpre">seta</span></span></a><span class="mpre">
#endif
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="mpre">withPrism</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Clone a &#39;Prism&#39; so that you can reuse the same monomorphically typed &#39;Prism&#39; for different purposes.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- See &#39;Control.Lens.Lens.cloneLens&#39; and &#39;Control.Lens.Traversal.cloneTraversal&#39; for examples of why you might want to do this.</span></span><span class="mpre">
</span><a href="#loc_104_1_104_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_1_104_11&#39;)"><span class="mpre">clonePrism</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">APrism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_104_1_104_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_1_104_11&#39;)"><span class="hl_fundecl"><span class="mpre">clonePrism</span></span></a><span class="mpre"> </span><a name="loc_104_12_104_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_12_104_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_varref"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a href="#loc_104_12_104_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_12_104_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_104_1_104_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_1_104_11&#39;)"><span class="mpre">clonePrism</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Prism Combinators</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Build a &#39;Control.Lens.Prism.Prism&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @&#39;Either&#39; t a@ is used instead of @&#39;Maybe&#39; a@ to permit the types of @s@ and @t@ to differ.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="mpre">prism</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_fundecl"><span class="mpre">prism</span></span></a><span class="mpre"> </span><a name="loc_116_7_116_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_7_116_9&#39;)"><span class="hl_vardecl"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a name="loc_116_10_116_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_10_116_14&#39;)"><span class="hl_vardecl"><span class="mpre">seta</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Unsafe.html#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_87_3_87_8&#39;)"><span class="hl_varref"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a href="#loc_116_10_116_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_10_116_14&#39;)"><span class="hl_varref"><span class="mpre">seta</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">either</span></span><span class="mpre"> </span><a href="Control.Applicative.html#loc_115_5_115_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_115_5_115_9&#39;)"><span class="hl_varref"><span class="mpre">pure</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_116_7_116_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_7_116_9&#39;)"><span class="hl_varref"><span class="mpre">bt</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Profunctor.html#loc_238_3_238_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.html#loc_238_3_238_9&#39;)"><span class="hl_varref"><span class="mpre">right&#39;</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="mpre">prism</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is usually used to build a &#39;Prism&#39;&#39;, when you have to use an operation like</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Data.Typeable.cast&#39; which already returns a &#39;Maybe&#39;.</span></span><span class="mpre">
</span><a href="#loc_122_1_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_1_122_7&#39;)"><span class="mpre">prism&#39;</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_122_1_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_1_122_7&#39;)"><span class="hl_fundecl"><span class="mpre">prism&#39;</span></span></a><span class="mpre"> </span><a name="loc_122_8_122_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_8_122_10&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> </span><a name="loc_122_11_122_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_11_122_14&#39;)"><span class="hl_vardecl"><span class="mpre">sma</span></span></a><span class="mpre"> = </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> </span><a href="#loc_122_8_122_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_8_122_10&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> (\</span><a name="loc_122_28_122_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_28_122_29&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">maybe</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a href="#loc_122_28_122_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_28_122_29&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">) </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a href="#loc_122_11_122_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_11_122_14&#39;)"><span class="hl_varref"><span class="mpre">sma</span></span></a><span class="mpre"> </span><a href="#loc_122_28_122_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_28_122_29&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_122_1_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_1_122_7&#39;)"><span class="mpre">prism&#39;</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Use a &#39;Prism&#39; as a kind of first-class pattern.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @&#39;outside&#39; :: &#39;Prism&#39; s t a b -&gt; &#39;Lens&#39; (t -&gt; r) (s -&gt; r) (b -&gt; r) (a -&gt; r)@</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- TODO: can we make this work with merely Strong?</span></span><span class="mpre">
</span><a href="#loc_131_1_131_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_1_131_8&#39;)"><span class="mpre">outside</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 130, srcSpanStartColumn = 12, srcSpanEndLine = 130, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 130, srcSpanStartColumn = 28, srcSpanEndLine = 130, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src"><span class="mpre">Representable p =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">APrism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">)
</span><a name="loc_131_1_131_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_1_131_8&#39;)"><span class="hl_fundecl"><span class="mpre">outside</span></span></a><span class="mpre"> </span><a name="loc_131_9_131_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_9_131_10&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_varref"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a href="#loc_131_9_131_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_9_131_10&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_131_28_131_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_28_131_30&#39;)"><span class="hl_vardecl"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a name="loc_131_31_131_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_31_131_35&#39;)"><span class="hl_vardecl"><span class="mpre">seta</span></span></a><span class="mpre"> </span><a name="loc_131_36_131_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_36_131_37&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_131_38_131_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_38_131_40&#39;)"><span class="hl_vardecl"><span class="mpre">ft</span></span></a><span class="mpre"> -&gt;
  </span><a href="#loc_131_36_131_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_36_131_37&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> (</span><a href="Data.Profunctor.Unsafe.html#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_94_3_94_7&#39;)"><span class="hl_varref"><span class="mpre">lmap</span></span></a><span class="mpre"> </span><a href="#loc_131_28_131_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_28_131_30&#39;)"><span class="hl_varref"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a href="#loc_131_38_131_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_38_131_40&#39;)"><span class="hl_varref"><span class="mpre">ft</span></span></a><span class="mpre">) </span><a href="Control.Lens.Lens.html#loc_343_4_343_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Lens.html#loc_343_4_343_7&#39;)"><span class="hl_infix"><span class="mpre">&lt;&amp;&gt;</span></span></a><span class="mpre"> \</span><a name="loc_132_23_132_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_23_132_25&#39;)"><span class="hl_vardecl"><span class="mpre">fa</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Profunctor.Rep.html#loc_42_3_42_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_42_3_42_11&#39;)"><span class="hl_varref"><span class="mpre">tabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">either</span></span><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_43_3_43_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_43_3_43_6&#39;)"><span class="hl_varref"><span class="mpre">rep</span></span></a><span class="mpre"> </span><a href="#loc_131_38_131_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_38_131_40&#39;)"><span class="hl_varref"><span class="mpre">ft</span></span></a><span class="mpre">) (</span><a href="Data.Profunctor.Rep.html#loc_43_3_43_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_43_3_43_6&#39;)"><span class="hl_varref"><span class="mpre">rep</span></span></a><span class="mpre"> </span><a href="#loc_132_23_132_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_23_132_25&#39;)"><span class="hl_varref"><span class="mpre">fa</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_131_31_131_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_31_131_35&#39;)"><span class="hl_varref"><span class="mpre">seta</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_131_1_131_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_1_131_8&#39;)"><span class="mpre">outside</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Given a pair of prisms, project sums.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Viewing a &#39;Prism&#39; as a co-&#39;Lens&#39;, this combinator can be seen to be dual to &#39;Control.Lens.Lens.alongside&#39;.</span></span><span class="mpre">
</span><a href="#loc_141_1_141_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_1_141_8&#39;)"><span class="mpre">without</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">APrism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
        -&gt; </span><span class="hl_tyconref"><span class="mpre">APrism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">
        -&gt; </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">u</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">v</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">)
</span><a name="loc_141_1_141_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_1_141_8&#39;)"><span class="hl_fundecl"><span class="mpre">without</span></span></a><span class="mpre"> </span><a name="loc_141_9_141_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_9_141_10&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> =
  </span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_varref"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a href="#loc_141_9_141_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_9_141_10&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">         </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_142_26_142_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_26_142_28&#39;)"><span class="hl_vardecl"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a name="loc_142_29_142_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_29_142_33&#39;)"><span class="hl_vardecl"><span class="mpre">seta</span></span></a><span class="mpre"> </span><a name="loc_142_34_142_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_34_142_36&#39;)"><span class="hl_vardecl"><span class="mpre">k&#39;</span></span></a><span class="mpre"> -&gt;
  </span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_varref"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a href="#loc_142_34_142_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_34_142_36&#39;)"><span class="hl_varref"><span class="mpre">k&#39;</span></span></a><span class="mpre">        </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_143_26_143_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_26_143_28&#39;)"><span class="hl_vardecl"><span class="mpre">dv</span></span></a><span class="mpre"> </span><a name="loc_143_29_143_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_29_143_33&#39;)"><span class="hl_vardecl"><span class="mpre">uevc</span></span></a><span class="mpre">    -&gt;
  </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> (</span><a href="Data.Bifunctor.html#loc_55_3_55_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Bifunctor.html#loc_55_3_55_8&#39;)"><span class="hl_varref"><span class="mpre">bimap</span></span></a><span class="mpre"> </span><a href="#loc_142_26_142_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_26_142_28&#39;)"><span class="hl_varref"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a href="#loc_143_26_143_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_26_143_28&#39;)"><span class="hl_varref"><span class="mpre">dv</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_144_26_144_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_26_144_28&#39;)"><span class="hl_vardecl"><span class="mpre">su</span></span></a><span class="mpre"> -&gt;
  case </span><a href="#loc_144_26_144_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_26_144_28&#39;)"><span class="hl_varref"><span class="mpre">su</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_146_10_146_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_10_146_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">  -&gt; </span><a href="Data.Bifunctor.html#loc_55_3_55_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Bifunctor.html#loc_55_3_55_8&#39;)"><span class="hl_varref"><span class="mpre">bimap</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> (</span><a href="#loc_142_29_142_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_29_142_33&#39;)"><span class="hl_varref"><span class="mpre">seta</span></span></a><span class="mpre"> </span><a href="#loc_146_10_146_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_146_10_146_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
    </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_147_11_147_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_11_147_12&#39;)"><span class="hl_vardecl"><span class="mpre">u</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Bifunctor.html#loc_55_3_55_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Bifunctor.html#loc_55_3_55_8&#39;)"><span class="hl_varref"><span class="mpre">bimap</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a href="#loc_143_29_143_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_29_143_33&#39;)"><span class="hl_varref"><span class="mpre">uevc</span></span></a><span class="mpre"> </span><a href="#loc_147_11_147_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_147_11_147_12&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_141_1_141_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_141_1_141_8&#39;)"><span class="mpre">without</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Use a &#39;Prism&#39; to work over part of a structure.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_153_1_153_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_1_153_6&#39;)"><span class="mpre">aside</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">APrism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">)
</span><a name="loc_153_1_153_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_1_153_6&#39;)"><span class="hl_fundecl"><span class="mpre">aside</span></span></a><span class="mpre"> </span><a name="loc_153_7_153_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_7_153_8&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> =
  </span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_varref"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a href="#loc_153_7_153_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_7_153_8&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">     </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_154_22_154_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_22_154_24&#39;)"><span class="hl_vardecl"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a name="loc_154_25_154_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_25_154_29&#39;)"><span class="hl_vardecl"><span class="mpre">seta</span></span></a><span class="mpre"> -&gt;
  </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_154_22_154_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_22_154_24&#39;)"><span class="hl_varref"><span class="mpre">bt</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \(</span><a name="loc_155_23_155_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_23_155_24&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre">,</span><a name="loc_155_25_155_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_25_155_26&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) -&gt;
  case </span><a href="#loc_154_25_154_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_154_25_154_29&#39;)"><span class="hl_varref"><span class="mpre">seta</span></span></a><span class="mpre"> </span><a href="#loc_155_25_155_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_25_155_26&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_157_10_157_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_10_157_11&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre">  -&gt; </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">  (</span><a href="#loc_155_23_155_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_23_155_24&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">,</span><a href="#loc_157_10_157_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_10_157_11&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">)
    </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_158_11_158_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_11_158_12&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a href="#loc_155_23_155_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_23_155_24&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">,</span><a href="#loc_158_11_158_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_11_158_12&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_153_1_153_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_153_1_153_6&#39;)"><span class="mpre">aside</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;lift&#39; a &#39;Prism&#39; through a &#39;Traversable&#39; functor, giving a Prism that matches only if all the elements of the container match the &#39;Prism&#39;.</span></span><span class="mpre">
</span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="mpre">below</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 162, srcSpanStartColumn = 10, srcSpanEndLine = 162, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 162, srcSpanStartColumn = 24, srcSpanEndLine = 162, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src"><span class="mpre">Traversable f =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">APrism&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Prism&#39;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">) (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="hl_fundecl"><span class="mpre">below</span></span></a><span class="mpre"> </span><a name="loc_163_7_163_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_7_163_8&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> =
  </span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_varref"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a href="#loc_163_7_163_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_7_163_8&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">     </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_164_22_164_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_22_164_24&#39;)"><span class="hl_vardecl"><span class="mpre">bt</span></span></a><span class="mpre"> </span><a name="loc_164_25_164_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_25_164_29&#39;)"><span class="hl_vardecl"><span class="mpre">seta</span></span></a><span class="mpre"> -&gt;
  </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_164_22_164_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_22_164_24&#39;)"><span class="hl_varref"><span class="mpre">bt</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_165_22_165_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_22_165_23&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt;
  case </span><a href="Data.Traversable.html#loc_150_5_150_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Traversable.html#loc_150_5_150_13&#39;)"><span class="hl_varref"><span class="mpre">traverse</span></span></a><span class="mpre"> </span><a href="#loc_164_25_164_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_25_164_29&#39;)"><span class="hl_varref"><span class="mpre">seta</span></span></a><span class="mpre"> </span><a href="#loc_165_22_165_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_22_165_23&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> _  -&gt; </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a href="#loc_165_22_165_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_22_165_23&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_168_11_168_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_11_168_12&#39;)"><span class="hl_vardecl"><span class="mpre">t</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a href="#loc_168_11_168_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_11_168_12&#39;)"><span class="hl_varref"><span class="mpre">t</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="mpre">below</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Check to see if this &#39;Prism&#39; doesn&#39;t match.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; isn&#39;t _Left (Right 12)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- True</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; isn&#39;t _Left (Left 12)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- False</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; isn&#39;t _Empty []</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- False</span></span><span class="mpre">
</span><a href="#loc_182_1_182_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_1_182_6&#39;)"><span class="mpre">isn&#39;t</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">APrism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_182_1_182_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_1_182_6&#39;)"><span class="hl_fundecl"><span class="mpre">isn&#39;t</span></span></a><span class="mpre"> </span><a name="loc_182_7_182_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_7_182_8&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_182_9_182_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_9_182_10&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> =
  case </span><a href="#loc_198_1_198_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_9&#39;)"><span class="hl_varref"><span class="mpre">matching</span></span></a><span class="mpre"> </span><a href="#loc_182_7_182_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_7_182_8&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="#loc_182_9_182_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_9_182_10&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">  _ -&gt; </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> _ -&gt; </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_182_1_182_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_1_182_6&#39;)"><span class="mpre">isn&#39;t</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Retrieve the value targeted by a &#39;Prism&#39; or return the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- original value while allowing the type to change if it does</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- not match.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; matching _Just (Just 12)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Right 12</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; matching _Just (Nothing :: Maybe Int) :: Either (Maybe Bool) Int</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left Nothing</span></span><span class="mpre">
</span><a href="#loc_198_1_198_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_9&#39;)"><span class="mpre">matching</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">APrism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_198_1_198_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_9&#39;)"><span class="hl_fundecl"><span class="mpre">matching</span></span></a><span class="mpre"> </span><a name="loc_198_10_198_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_10_198_11&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> = </span><a href="#loc_92_1_92_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_1_92_10&#39;)"><span class="hl_varref"><span class="mpre">withPrism</span></span></a><span class="mpre"> </span><a href="#loc_198_10_198_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_10_198_11&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \_ </span><a name="loc_198_31_198_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_31_198_35&#39;)"><span class="hl_vardecl"><span class="mpre">seta</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_198_31_198_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_31_198_35&#39;)"><span class="hl_varref"><span class="mpre">seta</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_198_1_198_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_9&#39;)"><span class="mpre">matching</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Common Prisms</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This &#39;Prism&#39; provides a &#39;Traversal&#39; for tweaking the &#39;Left&#39; half of an &#39;Either&#39;:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; over _Left (+1) (Left 2)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left 3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; over _Left (+1) (Right 2)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Right 2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Right 42 ^._Left :: String</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Left &quot;hello&quot; ^._Left</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;hello&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It also can be turned around to obtain the embedding into the &#39;Left&#39; half of an &#39;Either&#39;:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; _Left # 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; 5^.re _Left</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left 5</span></span><span class="mpre">
</span><a href="#loc_227_1_227_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_1_227_6&#39;)"><span class="mpre">_Left</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_227_1_227_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_1_227_6&#39;)"><span class="hl_vardecl"><span class="mpre">_Left</span></span></a><span class="mpre"> = </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">either</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_227_1_227_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_227_1_227_6&#39;)"><span class="mpre">_Left</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This &#39;Prism&#39; provides a &#39;Traversal&#39; for tweaking the &#39;Right&#39; half of an &#39;Either&#39;:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; over _Right (+1) (Left 2)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left 2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; over _Right (+1) (Right 2)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Right 3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Right &quot;hello&quot; ^._Right</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;hello&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Left &quot;hello&quot; ^._Right :: [Double]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- []</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It also can be turned around to obtain the embedding into the &#39;Right&#39; half of an &#39;Either&#39;:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; _Right # 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Right 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; 5^.re _Right</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Right 5</span></span><span class="mpre">
</span><a href="#loc_252_1_252_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_252_1_252_7&#39;)"><span class="mpre">_Right</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_252_1_252_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_252_1_252_7&#39;)"><span class="hl_vardecl"><span class="mpre">_Right</span></span></a><span class="mpre"> = </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">either</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">) </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_252_1_252_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_252_1_252_7&#39;)"><span class="mpre">_Right</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This &#39;Prism&#39; provides a &#39;Traversal&#39; for tweaking the target of the value of &#39;Just&#39; in a &#39;Maybe&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; over _Just (+1) (Just 2)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just 3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Unlike &#39;Data.Traversable.traverse&#39; this is a &#39;Prism&#39;, and so you can use it to inject as well:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; _Just # 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; 5^.re _Just</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Interestingly,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- m &#39;^?&#39; &#39;_Just&#39; ≡ m</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Just x ^? _Just</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just x</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Nothing ^? _Just</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Nothing</span></span><span class="mpre">
</span><a href="#loc_280_1_280_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_1_280_6&#39;)"><span class="mpre">_Just</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_280_1_280_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_1_280_6&#39;)"><span class="hl_vardecl"><span class="mpre">_Just</span></span></a><span class="mpre"> = </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">maybe</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">) </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_280_1_280_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_1_280_6&#39;)"><span class="mpre">_Just</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This &#39;Prism&#39; provides the &#39;Traversal&#39; of a &#39;Nothing&#39; in a &#39;Maybe&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Nothing ^? _Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just ()</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; Just () ^? _Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- But you can turn it around and use it to construct &#39;Nothing&#39; as well:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; _Nothing # ()</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Nothing</span></span><span class="mpre">
</span><a href="#loc_296_1_296_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_1_296_9&#39;)"><span class="mpre">_Nothing</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Prism&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_296_1_296_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_1_296_9&#39;)"><span class="hl_vardecl"><span class="mpre">_Nothing</span></span></a><span class="mpre"> = </span><a href="#loc_122_1_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_1_122_7&#39;)"><span class="hl_varref"><span class="mpre">prism&#39;</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">maybe</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">const</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_296_1_296_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_1_296_9&#39;)"><span class="mpre">_Nothing</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;Void&#39; is a logically uninhabited data type.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is a &#39;Prism&#39; that will always fail to match.</span></span><span class="mpre">
</span><a href="#loc_303_1_303_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_1_303_6&#39;)"><span class="mpre">_Void</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Prism</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><a href="Data.Void.html#loc_54_6_54_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Void.html#loc_54_6_54_10&#39;)"><span class="hl_tyconref"><span class="mpre">Void</span></span></a><span class="mpre">
</span><a name="loc_303_1_303_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_1_303_6&#39;)"><span class="hl_vardecl"><span class="mpre">_Void</span></span></a><span class="mpre"> = </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> </span><a href="Data.Void.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Void.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">absurd</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_303_1_303_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_1_303_6&#39;)"><span class="mpre">_Void</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This &#39;Prism&#39; compares for exact equality with a given value.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; only 4 # ()</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 4</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; 5 ^? only 4</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Nothing</span></span><span class="mpre">
</span><a href="#loc_314_1_314_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_1_314_5&#39;)"><span class="mpre">only</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 313, srcSpanStartColumn = 9, srcSpanEndLine = 313, srcSpanEndColumn = 16}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 313, srcSpanStartColumn = 14, srcSpanEndLine = 313, srcSpanEndColumn = 16}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/"><span class="mpre">Eq a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Prism&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_314_1_314_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_1_314_5&#39;)"><span class="hl_fundecl"><span class="mpre">only</span></span></a><span class="mpre"> </span><a name="loc_314_6_314_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_6_314_7&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_122_1_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_1_122_7&#39;)"><span class="hl_varref"><span class="mpre">prism&#39;</span></span></a><span class="mpre"> (\</span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><a href="#loc_314_6_314_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_6_314_7&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.html#loc_148_1_148_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_148_1_148_6&#39;)"><span class="hl_varref"><span class="mpre">guard</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> (</span><a href="#loc_314_6_314_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_6_314_7&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_314_1_314_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_1_314_5&#39;)"><span class="mpre">only</span></a><span class="mpre"> #-}</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | This &#39;Prism&#39; compares for approximate equality with a given value and a predicate for testing.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- To comply with the &#39;Prism&#39; laws the arguments you supply to @nearly a p@ are somewhat constrained.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- We assume @p x@ holds iff @x ≡ a@. Under that assumption then this is a valid &#39;Prism&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is useful when working with a type where you can test equality for only a subset of its</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- values, and the prism selects such a value.</span></span><span class="mpre">
</span><a href="#loc_327_1_327_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_327_1_327_7&#39;)"><span class="mpre">nearly</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Prism&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_327_1_327_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_327_1_327_7&#39;)"><span class="hl_fundecl"><span class="mpre">nearly</span></span></a><span class="mpre"> </span><a name="loc_327_8_327_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_327_8_327_9&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_327_10_327_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_327_10_327_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_122_1_122_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_122_1_122_7&#39;)"><span class="hl_varref"><span class="mpre">prism&#39;</span></span></a><span class="mpre"> (\</span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><a href="#loc_327_8_327_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_327_8_327_9&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.html#loc_148_1_148_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_148_1_148_6&#39;)"><span class="hl_varref"><span class="mpre">guard</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_327_10_327_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_327_10_327_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_327_1_327_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_327_1_327_7&#39;)"><span class="mpre">nearly</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is an improper prism for text formatting based on &#39;Read&#39; and &#39;Show&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This &#39;Prism&#39; is \&quot;improper\&quot; in the sense that it normalizes the text formatting, but round tripping</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is idempotent given sane &#39;Read&#39;/&#39;Show&#39; instances.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; _Show # 2</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;2&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; &quot;EQ&quot; ^? _Show :: Maybe Ordering</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just EQ</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;_Show&#39; ≡ &#39;prism&#39;&#39; &#39;show&#39; &#39;readMaybe&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_345_1_345_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_345_1_345_6&#39;)"><span class="mpre">_Show</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 344, srcSpanStartColumn = 10, srcSpanEndLine = 344, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLine = 344, srcSpanStartColumn = 10, srcSpanEndLine = 344, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Prism.hs&quot;, srcSpanStartLin"><span class="mpre">(Read a, Show a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Prism&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_345_1_345_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_345_1_345_6&#39;)"><span class="hl_vardecl"><span class="mpre">_Show</span></span></a><span class="mpre"> = </span><a href="#loc_116_1_116_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_6&#39;)"><span class="hl_varref"><span class="mpre">prism</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_345_23_345_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_345_23_345_24&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> -&gt; case </span><span class="hl_varref"><span class="mpre">reads</span></span><span class="mpre"> </span><a href="#loc_345_23_345_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_345_23_345_24&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> of
  [(</span><a name="loc_346_5_346_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_5_346_6&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">,</span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)] -&gt; </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a href="#loc_346_5_346_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_5_346_6&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
  _ -&gt; </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a href="#loc_345_23_345_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_345_23_345_24&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_345_1_345_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_345_1_345_6&#39;)"><span class="mpre">_Show</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>