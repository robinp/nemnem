<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE OverloadedStrings, RankNTypes #-}
</span><span class="hl_comment"><span class="mpre">-- | It should be noted that most of the code snippets below depend on the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- OverloadedStrings language pragma.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Scotty is set up by default for development mode. For production servers,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- you will likely want to modify &#39;Trans.settings&#39; and the &#39;defaultHandler&#39;. See</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the comments on each of these functions for more information.</span></span><span class="mpre">
module Web.Scotty
    ( </span><span class="hl_comment"><span class="mpre">-- * scotty-to-WAI</span></span><span class="mpre">
      scotty, scottyApp, scottyOpts, Options(..)
      </span><span class="hl_comment"><span class="mpre">-- * Defining Middleware and Routes</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- | &#39;Middleware&#39; and routes are run in the order in which they</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- are defined. All middleware is run first, followed by the first</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- route that matches. If no route matches, a 404 response is given.</span></span><span class="mpre">
    , middleware, get, post, put, delete, patch, addroute, matchAny, notFound
      </span><span class="hl_comment"><span class="mpre">-- ** Route Patterns</span></span><span class="mpre">
    , capture, regex, function, literal
      </span><span class="hl_comment"><span class="mpre">-- ** Accessing the Request, Captures, and Query Parameters</span></span><span class="mpre">
    , request, header, headers, body, param, params, jsonData, files
      </span><span class="hl_comment"><span class="mpre">-- ** Modifying the Response and Redirecting</span></span><span class="mpre">
    , status, addHeader, setHeader, redirect
      </span><span class="hl_comment"><span class="mpre">-- ** Setting Response Body</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- | Note: only one of these should be present in any given route</span></span><span class="mpre">
      </span><span class="hl_comment"><span class="mpre">-- definition, as they completely replace the current &#39;Response&#39; body.</span></span><span class="mpre">
    , text, html, file, json, stream, source, raw
      </span><span class="hl_comment"><span class="mpre">-- ** Exceptions</span></span><span class="mpre">
    , raise, rescue, next, defaultHandler
      </span><span class="hl_comment"><span class="mpre">-- * Parsing Parameters</span></span><span class="mpre">
    , Param, Trans.Parsable(..), Trans.readEither
      </span><span class="hl_comment"><span class="mpre">-- * Types</span></span><span class="mpre">
    , ScottyM, ActionM, RoutePattern, File
    ) where

</span><span class="hl_comment"><span class="mpre">-- With the exception of this, everything else better just import types.</span></span><span class="mpre">
import qualified Web.Scotty.Trans as Trans
import qualified Web.Scotty.Action as Action </span><span class="hl_comment"><span class="mpre">-- for &#39;source&#39;, to avoid deprecation warning on Trans.source</span></span><span class="mpre">

import Blaze.ByteString.Builder (</span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16&#39;)"><span class="mpre">Builder</span></a><span class="mpre">)

import Data.Aeson (FromJSON, ToJSON)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 8, srcSpanEndLine = 43, srcSpanEndColumn = 34}, srcInfoPoints = []}) &quot;Data.ByteString.Lazy.Char8&quot;"><span class="mpre">Data.ByteString.Lazy.Char8</span></span><span class="mpre"> (ByteString)
import Data.Text.Lazy (</span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="mpre">Text</span></a><span class="mpre">)
import Data.Conduit (</span><a href="Data.Conduit.html#loc_358_6_358_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_358_6_358_11&#39;)"><a href="Data.Conduit.html#loc_358_26_358_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_358_26_358_31&#39;)"><span class="mpre">Flush</span></a></a><span class="mpre">, Source)

import Network.HTTP.Types (</span><a href="Network.HTTP.Types.Status.html#loc_114_6_114_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Types.Status.html#loc_114_6_114_12&#39;)"><span class="mpre">Status</span></a><span class="mpre">, </span><a href="Network.HTTP.Types.Method.html#loc_42_6_42_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Types.Method.html#loc_42_6_42_15&#39;)"><span class="mpre">StdMethod</span></a><span class="mpre">)
import Network.Wai (Application, Middleware, </span><a href="Network.Wai.Internal.html#loc_20_6_20_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.Wai.Internal.html#loc_20_6_20_13&#39;)"><span class="mpre">Request</span></a><span class="mpre">, StreamingBody)
import Network.Wai.Handler.Warp (Port)

import Web.Scotty.Internal.Types (</span><a href="Web.Scotty.Internal.Types.html#loc_65_9_65_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_65_9_65_16&#39;)"><a href="Web.Scotty.Internal.Types.html#loc_65_25_65_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_65_25_65_32&#39;)"><span class="mpre">ScottyT</span></a></a><span class="mpre">, </span><a href="Web.Scotty.Internal.Types.html#loc_120_9_120_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_120_9_120_16&#39;)"><a href="Web.Scotty.Internal.Types.html#loc_120_25_120_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_120_25_120_32&#39;)"><span class="mpre">ActionT</span></a></a><span class="mpre">, Param, </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="mpre">RoutePattern</span></a><span class="mpre">, </span><a href="Web.Scotty.Internal.Types.html#loc_29_6_29_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_29_6_29_13&#39;)"><a href="Web.Scotty.Internal.Types.html#loc_29_16_29_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_29_16_29_23&#39;)"><span class="mpre">Options</span></a></a><span class="mpre">, File)

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 53, srcSpanStartColumn = 1, srcSpanEndLine = 53, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 53, srcSpanStartColumn = 1, srcSpanEndLine = 53, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 53, srcSpanStartColumn = 1"><span class="mpre">type ScottyM = ScottyT Text IO</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 1, srcSpanEndLine = 54, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 1, srcSpanEndLine = 54, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 1"><span class="mpre">type ActionM = ActionT Text IO</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Run a scotty application using the warp server.</span></span><span class="mpre">
</span><a href="#loc_58_1_58_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_7&#39;)"><span class="mpre">scotty</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Port</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_58_1_58_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_1_58_7&#39;)"><span class="hl_fundecl"><span class="mpre">scotty</span></span></a><span class="mpre"> </span><a name="loc_58_8_58_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_8_58_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Trans.html#loc_76_1_76_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Trans.html#loc_76_1_76_8&#39;)"><span class="hl_varref"><span class="mpre">Trans.scottyT</span></span></a><span class="mpre"> </span><a href="#loc_58_8_58_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_8_58_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Run a scotty application using the warp server, passing extra options.</span></span><span class="mpre">
</span><a href="#loc_62_1_62_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_11&#39;)"><span class="mpre">scottyOpts</span></a><span class="mpre"> :: </span><a href="Web.Scotty.Internal.Types.html#loc_29_6_29_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_29_6_29_13&#39;)"><span class="hl_tyconref"><span class="mpre">Options</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_62_1_62_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_1_62_11&#39;)"><span class="hl_fundecl"><span class="mpre">scottyOpts</span></span></a><span class="mpre"> </span><a name="loc_62_12_62_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_12_62_16&#39;)"><span class="hl_vardecl"><span class="mpre">opts</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Trans.html#loc_86_1_86_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Trans.html#loc_86_1_86_12&#39;)"><span class="hl_varref"><span class="mpre">Trans.scottyOptsT</span></span></a><span class="mpre"> </span><a href="#loc_62_12_62_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_12_62_16&#39;)"><span class="hl_varref"><span class="mpre">opts</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Turn a scotty application into a WAI &#39;Application&#39;, which can be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- run with any WAI handler.</span></span><span class="mpre">
</span><a href="#loc_67_1_67_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_1_67_10&#39;)"><span class="mpre">scottyApp</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Application</span></span><span class="mpre">
</span><a name="loc_67_1_67_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_67_1_67_10&#39;)"><span class="hl_vardecl"><span class="mpre">scottyApp</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Trans.html#loc_99_1_99_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Trans.html#loc_99_1_99_11&#39;)"><span class="hl_varref"><span class="mpre">Trans.scottyAppT</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Global handler for uncaught exceptions.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Uncaught exceptions normally become 500 responses.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- You can use this to selectively override that behavior.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: IO exceptions are lifted into Scotty exceptions by default.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This has security implications, so you probably want to provide your</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- own defaultHandler in production which does not send out the error</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- strings as 500 responses.</span></span><span class="mpre">
</span><a href="#loc_79_1_79_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_15&#39;)"><span class="mpre">defaultHandler</span></a><span class="mpre"> :: (</span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_79_1_79_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_79_1_79_15&#39;)"><span class="hl_vardecl"><span class="mpre">defaultHandler</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Trans.html#loc_118_1_118_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Trans.html#loc_118_1_118_15&#39;)"><span class="hl_varref"><span class="mpre">Trans.defaultHandler</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Use given middleware. Middleware is nested such that the first declared</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- is the outermost middleware (it has first dibs on the request and last action</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- on the response). Every middleware is run on each request.</span></span><span class="mpre">
</span><a href="#loc_85_1_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_11&#39;)"><span class="mpre">middleware</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Middleware</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_85_1_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_11&#39;)"><span class="hl_vardecl"><span class="mpre">middleware</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Trans.html#loc_124_1_124_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Trans.html#loc_124_1_124_11&#39;)"><span class="hl_varref"><span class="mpre">Trans.middleware</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Throw an exception, which can be caught with &#39;rescue&#39;. Uncaught exceptions</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- turn into HTTP 500 responses.</span></span><span class="mpre">
</span><a href="#loc_90_1_90_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_1_90_6&#39;)"><span class="mpre">raise</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_90_1_90_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_90_1_90_6&#39;)"><span class="hl_vardecl"><span class="mpre">raise</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_81_1_81_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_81_1_81_6&#39;)"><span class="hl_varref"><span class="mpre">Trans.raise</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Abort execution of this action and continue pattern matching routes.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Like an exception, any code after &#39;next&#39; is not executed.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- As an example, these two routes overlap. The only way the second one will</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ever run is if the first one calls &#39;next&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; get &quot;/foo/:bar&quot; $ do</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;   w :: Text &lt;- param &quot;bar&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;   unless (w == &quot;special&quot;) next</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;   text &quot;You made a request to /foo/special&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; get &quot;/foo/:baz&quot; $ do</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;   w &lt;- param &quot;baz&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;   text $ &quot;You made a request to: &quot; &lt;&gt; w</span></span><span class="mpre">
</span><a href="#loc_107_1_107_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_1_107_5&#39;)"><span class="mpre">next</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_107_1_107_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_1_107_5&#39;)"><span class="hl_vardecl"><span class="mpre">next</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_98_1_98_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_98_1_98_5&#39;)"><span class="hl_varref"><span class="mpre">Trans.next</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Catch an exception thrown by &#39;raise&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; raise &quot;just kidding&quot; `rescue` (\msg -&gt; text msg)</span></span><span class="mpre">
</span><a href="#loc_113_1_113_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_1_113_7&#39;)"><span class="mpre">rescue</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_113_1_113_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_113_1_113_7&#39;)"><span class="hl_vardecl"><span class="mpre">rescue</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_104_1_104_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_104_1_104_7&#39;)"><span class="hl_varref"><span class="mpre">Trans.rescue</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Redirect to given URL. Like throwing an uncatchable exception. Any code after the call to redirect</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- will not be run.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; redirect &quot;http://www.google.com&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- OR</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; redirect &quot;/foo/bar&quot;</span></span><span class="mpre">
</span><a href="#loc_124_1_124_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_1_124_9&#39;)"><span class="mpre">redirect</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_124_1_124_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_1_124_9&#39;)"><span class="hl_vardecl"><span class="mpre">redirect</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_117_1_117_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_117_1_117_9&#39;)"><span class="hl_varref"><span class="mpre">Trans.redirect</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Get the &#39;Request&#39; object.</span></span><span class="mpre">
</span><a href="#loc_128_1_128_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_8&#39;)"><span class="mpre">request</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><a href="Network.Wai.Internal.html#loc_20_6_20_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.Wai.Internal.html#loc_20_6_20_13&#39;)"><span class="hl_tyconref"><span class="mpre">Request</span></span></a><span class="mpre">
</span><a name="loc_128_1_128_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_1_128_8&#39;)"><span class="hl_vardecl"><span class="mpre">request</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_121_1_121_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_121_1_121_8&#39;)"><span class="hl_varref"><span class="mpre">Trans.request</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Get list of uploaded files.</span></span><span class="mpre">
</span><a href="#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_6&#39;)"><span class="mpre">files</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> [</span><span class="hl_tyconref"><span class="mpre">File</span></span><span class="mpre">]
</span><a name="loc_132_1_132_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_6&#39;)"><span class="hl_vardecl"><span class="mpre">files</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_125_1_125_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_125_1_125_6&#39;)"><span class="hl_varref"><span class="mpre">Trans.files</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Get a request header. Header name is case-insensitive.</span></span><span class="mpre">
</span><a href="#loc_136_1_136_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_7&#39;)"><span class="mpre">header</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)
</span><a name="loc_136_1_136_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_7&#39;)"><span class="hl_vardecl"><span class="mpre">header</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_129_1_129_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_129_1_129_7&#39;)"><span class="hl_varref"><span class="mpre">Trans.header</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Get all the request headers. Header names are case-insensitive.</span></span><span class="mpre">
</span><a href="#loc_140_1_140_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_1_140_8&#39;)"><span class="mpre">headers</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> [(</span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">, </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre">)]
</span><a name="loc_140_1_140_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_140_1_140_8&#39;)"><span class="hl_vardecl"><span class="mpre">headers</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_135_1_135_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_135_1_135_8&#39;)"><span class="hl_varref"><span class="mpre">Trans.headers</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Get the request body.</span></span><span class="mpre">
</span><a href="#loc_144_1_144_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_1_144_5&#39;)"><span class="mpre">body</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">
</span><a name="loc_144_1_144_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_1_144_5&#39;)"><span class="hl_vardecl"><span class="mpre">body</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_143_1_143_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_143_1_143_5&#39;)"><span class="hl_varref"><span class="mpre">Trans.body</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Parse the request body as a JSON object and return it. Raises an exception if parse is unsuccessful.</span></span><span class="mpre">
</span><a href="#loc_148_1_148_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_9&#39;)"><span class="mpre">jsonData</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 147, srcSpanStartColumn = 13, srcSpanEndLine = 147, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 147, srcSpanStartColumn = 24, srcSpanEndLine = 147, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;,"><span class="mpre">FromJSON a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_148_1_148_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_9&#39;)"><span class="hl_vardecl"><span class="mpre">jsonData</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_147_1_147_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_147_1_147_9&#39;)"><span class="hl_varref"><span class="mpre">Trans.jsonData</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Get a parameter. First looks in captures, then form data, then query parameters.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Raises an exception which can be caught by &#39;rescue&#39; if parameter is not found.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * If parameter is found, but &#39;read&#39; fails to parse to the correct type, &#39;next&#39; is called.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   This means captures are somewhat typed, in that a route won&#39;t match if a correctly typed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   capture cannot be parsed.</span></span><span class="mpre">
</span><a href="#loc_158_1_158_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_6&#39;)"><span class="mpre">param</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 157, srcSpanStartColumn = 10, srcSpanEndLine = 157, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 157, srcSpanStartColumn = 27, srcSpanEndLine = 157, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;,"><span class="mpre">Trans.Parsable a =&gt;</span></span><span class="mpre"> </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_158_1_158_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_6&#39;)"><span class="hl_vardecl"><span class="mpre">param</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_159_1_159_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_159_1_159_6&#39;)"><span class="hl_varref"><span class="mpre">Trans.param</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Get all parameters from capture, form and query (in that order).</span></span><span class="mpre">
</span><a href="#loc_162_1_162_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_1_162_7&#39;)"><span class="mpre">params</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> [</span><span class="hl_tyconref"><span class="mpre">Param</span></span><span class="mpre">]
</span><a name="loc_162_1_162_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_162_1_162_7&#39;)"><span class="hl_vardecl"><span class="mpre">params</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_167_1_167_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_167_1_167_7&#39;)"><span class="hl_varref"><span class="mpre">Trans.params</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set the HTTP response status. Default is 200.</span></span><span class="mpre">
</span><a href="#loc_166_1_166_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_7&#39;)"><span class="mpre">status</span></a><span class="mpre"> :: </span><a href="Network.HTTP.Types.Status.html#loc_114_6_114_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Types.Status.html#loc_114_6_114_12&#39;)"><span class="hl_tyconref"><span class="mpre">Status</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_166_1_166_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_166_1_166_7&#39;)"><span class="hl_vardecl"><span class="mpre">status</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_221_1_221_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_221_1_221_7&#39;)"><span class="hl_varref"><span class="mpre">Trans.status</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Add to the response headers. Header names are case-insensitive.</span></span><span class="mpre">
</span><a href="#loc_170_1_170_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_10&#39;)"><span class="mpre">addHeader</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_170_1_170_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_170_1_170_10&#39;)"><span class="hl_vardecl"><span class="mpre">addHeader</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_225_1_225_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_225_1_225_10&#39;)"><span class="hl_varref"><span class="mpre">Trans.addHeader</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set one of the response headers. Will override any previously set value for that header.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Header names are case-insensitive.</span></span><span class="mpre">
</span><a href="#loc_175_1_175_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_1_175_10&#39;)"><span class="mpre">setHeader</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_175_1_175_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_1_175_10&#39;)"><span class="hl_vardecl"><span class="mpre">setHeader</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_230_1_230_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_230_1_230_10&#39;)"><span class="hl_varref"><span class="mpre">Trans.setHeader</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set the body of the response to the given &#39;Text&#39; value. Also sets \&quot;Content-Type\&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- header to \&quot;text/plain\&quot;.</span></span><span class="mpre">
</span><a href="#loc_180_1_180_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_1_180_5&#39;)"><span class="mpre">text</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_180_1_180_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_180_1_180_5&#39;)"><span class="hl_vardecl"><span class="mpre">text</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_235_1_235_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_235_1_235_5&#39;)"><span class="hl_varref"><span class="mpre">Trans.text</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set the body of the response to the given &#39;Text&#39; value. Also sets \&quot;Content-Type\&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- header to \&quot;text/html\&quot;.</span></span><span class="mpre">
</span><a href="#loc_185_1_185_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_5&#39;)"><span class="mpre">html</span></a><span class="mpre"> :: </span><a href="Data.Text.Internal.Lazy.html#loc_47_6_47_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Text.Internal.Lazy.html#loc_47_6_47_10&#39;)"><span class="hl_tyconref"><span class="mpre">Text</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_185_1_185_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_5&#39;)"><span class="hl_vardecl"><span class="mpre">html</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_242_1_242_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_242_1_242_5&#39;)"><span class="hl_varref"><span class="mpre">Trans.html</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Send a file as the response. Doesn&#39;t set the \&quot;Content-Type\&quot; header, so you probably</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- want to do that on your own with &#39;setHeader&#39;.</span></span><span class="mpre">
</span><a href="#loc_190_1_190_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_1_190_5&#39;)"><span class="mpre">file</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_190_1_190_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_190_1_190_5&#39;)"><span class="hl_vardecl"><span class="mpre">file</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_249_1_249_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_249_1_249_5&#39;)"><span class="hl_varref"><span class="mpre">Trans.file</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set the body of the response to the JSON encoding of the given value. Also sets \&quot;Content-Type\&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- header to \&quot;application/json\&quot;.</span></span><span class="mpre">
</span><a href="#loc_195_1_195_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_1_195_5&#39;)"><span class="mpre">json</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 194, srcSpanStartColumn = 9, srcSpanEndLine = 194, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 194, srcSpanStartColumn = 18, srcSpanEndLine = 194, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, "><span class="mpre">ToJSON a =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_195_1_195_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_195_1_195_5&#39;)"><span class="hl_vardecl"><span class="mpre">json</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_254_1_254_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_254_1_254_5&#39;)"><span class="hl_varref"><span class="mpre">Trans.json</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set the body of the response to a StreamingBody. Doesn&#39;t set the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \&quot;Content-Type\&quot; header, so you probably want to do that on your</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- own with &#39;setHeader&#39;.</span></span><span class="mpre">
</span><a href="#loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="mpre">stream</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">StreamingBody</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_201_1_201_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_1_201_7&#39;)"><span class="hl_vardecl"><span class="mpre">stream</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_262_1_262_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_262_1_262_7&#39;)"><span class="hl_varref"><span class="mpre">Trans.stream</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set the body of the response to a Source. Doesn&#39;t set the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \&quot;Content-Type\&quot; header, so you probably want to do that on your</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- own with &#39;setHeader&#39;.</span></span><span class="mpre">
</span><a href="#loc_207_1_207_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_1_207_7&#39;)"><span class="mpre">source</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Source</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="Data.Conduit.html#loc_358_6_358_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_358_6_358_11&#39;)"><span class="hl_tyconref"><span class="mpre">Flush</span></span></a><span class="mpre"> </span><a href="Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.Types.html#loc_69_9_69_16&#39;)"><span class="hl_tyconref"><span class="mpre">Builder</span></span></a><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_207_1_207_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_1_207_7&#39;)"><span class="hl_vardecl"><span class="mpre">source</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_268_1_268_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_268_1_268_7&#39;)"><span class="hl_varref"><span class="mpre">Action.source</span></span></a><span class="mpre">
</span><span class="warning" data-warning="DeclDeprPragmaDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 208, srcSpanStartColumn = 1, srcSpanEndLine = 208, srcSpanEndColumn = 92}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 208, srcSpanStartColumn = 1, srcSpanEndLine = 208, srcSpanEndColumn = 15},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/scotty-0.8.1/Web/Scotty.hs&quot;, srcSpanStartLine = 208, srcSpanSta"><span class="mpre">{-# DEPRECATED source &quot;Use &#39;stream&#39; instead. This will be removed in the next release.&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Set the body of the response to the given &#39;BL.ByteString&#39; value. Doesn&#39;t set the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- \&quot;Content-Type\&quot; header, so you probably want to do that on your own with &#39;setHeader&#39;.</span></span><span class="mpre">
</span><a href="#loc_213_1_213_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_4&#39;)"><span class="mpre">raw</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_213_1_213_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_1_213_4&#39;)"><span class="hl_vardecl"><span class="mpre">raw</span></span></a><span class="mpre"> = </span><a href="Web.Scotty.Action.html#loc_278_1_278_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Action.html#loc_278_1_278_4&#39;)"><span class="hl_varref"><span class="mpre">Trans.raw</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | get = &#39;addroute&#39; &#39;GET&#39;</span></span><span class="mpre">
</span><a href="#loc_217_1_217_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_4&#39;)"><span class="mpre">get</span></a><span class="mpre"> :: </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_217_1_217_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_4&#39;)"><span class="hl_vardecl"><span class="mpre">get</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.get</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | post = &#39;addroute&#39; &#39;POST&#39;</span></span><span class="mpre">
</span><a href="#loc_221_1_221_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_1_221_5&#39;)"><span class="mpre">post</span></a><span class="mpre"> :: </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_221_1_221_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_1_221_5&#39;)"><span class="hl_vardecl"><span class="mpre">post</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.post</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | put = &#39;addroute&#39; &#39;PUT&#39;</span></span><span class="mpre">
</span><a href="#loc_225_1_225_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_1_225_4&#39;)"><span class="mpre">put</span></a><span class="mpre"> :: </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_225_1_225_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_1_225_4&#39;)"><span class="hl_vardecl"><span class="mpre">put</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.put</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | delete = &#39;addroute&#39; &#39;DELETE&#39;</span></span><span class="mpre">
</span><a href="#loc_229_1_229_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_1_229_7&#39;)"><span class="mpre">delete</span></a><span class="mpre"> :: </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_229_1_229_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_1_229_7&#39;)"><span class="hl_vardecl"><span class="mpre">delete</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.delete</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | patch = &#39;addroute&#39; &#39;PATCH&#39;</span></span><span class="mpre">
</span><a href="#loc_233_1_233_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_1_233_6&#39;)"><span class="mpre">patch</span></a><span class="mpre"> :: </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_233_1_233_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_233_1_233_6&#39;)"><span class="hl_vardecl"><span class="mpre">patch</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.patch</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Add a route that matches regardless of the HTTP verb.</span></span><span class="mpre">
</span><a href="#loc_237_1_237_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_9&#39;)"><span class="mpre">matchAny</span></a><span class="mpre"> :: </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_237_1_237_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_9&#39;)"><span class="hl_vardecl"><span class="mpre">matchAny</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.matchAny</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Specify an action to take if nothing else is found. Note: this _always_ matches,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- so should generally be the last route specified.</span></span><span class="mpre">
</span><a href="#loc_242_1_242_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_242_1_242_9&#39;)"><span class="mpre">notFound</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_242_1_242_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_242_1_242_9&#39;)"><span class="hl_vardecl"><span class="mpre">notFound</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.notFound</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Define a route with a &#39;StdMethod&#39;, &#39;Text&#39; value representing the path spec,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and a body (&#39;Action&#39;) which modifies the response.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; addroute GET &quot;/&quot; $ text &quot;beam me up!&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The path spec can include values starting with a colon, which are interpreted</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- as /captures/. These are named wildcards that can be looked up with &#39;param&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; addroute GET &quot;/foo/:bar&quot; $ do</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;     v &lt;- param &quot;bar&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;     text v</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; curl http://localhost:3000/foo/something</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- something</span></span><span class="mpre">
</span><a href="#loc_259_1_259_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_9&#39;)"><span class="mpre">addroute</span></a><span class="mpre"> :: </span><a href="Network.HTTP.Types.Method.html#loc_42_6_42_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Types.Method.html#loc_42_6_42_15&#39;)"><span class="hl_tyconref"><span class="mpre">StdMethod</span></span></a><span class="mpre"> -&gt; </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ActionM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ScottyM</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_259_1_259_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_9&#39;)"><span class="hl_vardecl"><span class="mpre">addroute</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.addroute</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Match requests using a regular expression.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Named captures are not yet supported.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; get (regex &quot;^/f(.*)r$&quot;) $ do</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;    path &lt;- param &quot;0&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;    cap &lt;- param &quot;1&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;    text $ mconcat [&quot;Path: &quot;, path, &quot;\nCapture: &quot;, cap]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; curl http://localhost:3000/foo/bar</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Path: /foo/bar</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Capture: oo/ba</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_1_274_6&#39;)"><span class="mpre">regex</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre">
</span><a name="loc_274_1_274_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_1_274_6&#39;)"><span class="hl_vardecl"><span class="mpre">regex</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.regex</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Standard Sinatra-style route. Named captures are prepended with colons.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   This is the default route type generated by OverloadedString routes. i.e.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; get (capture &quot;/foo/:bar&quot;) $ ...</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; {-# LANGUAGE OverloadedStrings #-}</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; ...</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; get &quot;/foo/:bar&quot; $ ...</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   are equivalent.</span></span><span class="mpre">
</span><a href="#loc_289_1_289_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_289_1_289_8&#39;)"><span class="mpre">capture</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre">
</span><a name="loc_289_1_289_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_289_1_289_8&#39;)"><span class="hl_vardecl"><span class="mpre">capture</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.capture</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Build a route based on a function which can match using the entire &#39;Request&#39; object.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &#39;Nothing&#39; indicates the route does not match. A &#39;Just&#39; value indicates</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   a successful match, optionally returning a list of key-value pairs accessible</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   by &#39;param&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; get (function $ \req -&gt; Just [(&quot;version&quot;, pack $ show $ httpVersion req)]) $ do</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;     v &lt;- param &quot;version&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;     text v</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; curl http://localhost:3000/</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- HTTP/1.1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_304_1_304_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_1_304_9&#39;)"><span class="mpre">function</span></a><span class="mpre"> :: (</span><a href="Network.Wai.Internal.html#loc_20_6_20_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.Wai.Internal.html#loc_20_6_20_13&#39;)"><span class="hl_tyconref"><span class="mpre">Request</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> [</span><span class="hl_tyconref"><span class="mpre">Param</span></span><span class="mpre">]) -&gt; </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre">
</span><a name="loc_304_1_304_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_304_1_304_9&#39;)"><span class="hl_vardecl"><span class="mpre">function</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.function</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Build a route that requires the requested path match exactly, without captures.</span></span><span class="mpre">
</span><a href="#loc_308_1_308_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_308_1_308_8&#39;)"><span class="mpre">literal</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><a href="Web.Scotty.Internal.Types.html#loc_156_6_156_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Web.Scotty.Internal.Types.html#loc_156_6_156_18&#39;)"><span class="hl_tyconref"><span class="mpre">RoutePattern</span></span></a><span class="mpre">
</span><a name="loc_308_1_308_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_308_1_308_8&#39;)"><span class="hl_vardecl"><span class="mpre">literal</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">Trans.literal</span></span><span class="mpre">
</span></div></body></html>