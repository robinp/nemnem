<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">{-| General purpose utilities

    The names in this module clash heavily with the Haskell Prelude, so I
    recommend the following import scheme:

&gt; import Pipes
&gt; import qualified Pipes.Prelude as P  -- or use any other qualifier you prefer

    Note that &#39;String&#39;-based &#39;IO&#39; is inefficient.  The &#39;String&#39;-based utilities
    in this module exist only for simple demonstrations without incurring a
    dependency on the @text@ package.

    Also, &#39;stdinLn&#39; and &#39;stdoutLn&#39; remove and add newlines, respectively.  This
    behavior is intended to simplify examples.  The corresponding @stdin@ and
    @stdout@ utilities from @pipes-bytestring@ and @pipes-text@ preserve
    newlines.
-}</span></span><span class="mpre">

{-# LANGUAGE RankNTypes, Trustworthy #-}
{-# OPTIONS_GHC -fno-warn-unused-do-bind #-}

module Pipes.Prelude (
    </span><span class="hl_comment"><span class="mpre">-- * Producers</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $producers</span></span><span class="mpre">
      stdinLn
    , readLn
    , fromHandle
    , repeatM
    , replicateM

    </span><span class="hl_comment"><span class="mpre">-- * Consumers</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $consumers</span></span><span class="mpre">
    , stdoutLn
    , print
    , toHandle
    , drain

    </span><span class="hl_comment"><span class="mpre">-- * Pipes</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $pipes</span></span><span class="mpre">
    , map
    , mapM
    , sequence
    , mapFoldable
    , filter
    , filterM
    , take
    , takeWhile
    , drop
    , dropWhile
    , concat
    , elemIndices
    , findIndices
    , scan
    , scanM
    , chain
    , read
    , show

    </span><span class="hl_comment"><span class="mpre">-- * Folds</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $folds</span></span><span class="mpre">
    , fold
    , foldM
    , all
    , any
    , and
    , or
    , elem
    , notElem
    , find
    , findIndex
    , head
    , index
    , last
    , length
    , maximum
    , minimum
    , null
    , sum
    , product
    , toList
    , toListM

    </span><span class="hl_comment"><span class="mpre">-- * Zips</span></span><span class="mpre">
    , zip
    , zipWith

    </span><span class="hl_comment"><span class="mpre">-- * Utilities</span></span><span class="mpre">
    , tee
    , generalize
    ) where

import Control.Exception (</span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="mpre">throwIO</span></a><span class="mpre">, </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="mpre">try</span></a><span class="mpre">)
import Control.Monad (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="mpre">liftM</span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_254_1_254_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_254_1_254_12&#39;)"><span class="mpre">replicateM_</span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="mpre">when</span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="mpre">unless</span></a><span class="mpre">)
import Control.Monad.Trans.State.Strict (</span><a href="Control.Monad.Trans.State.Strict.html#loc_209_1_209_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_209_1_209_4&#39;)"><span class="mpre">get</span></a><span class="mpre">, </span><a href="Control.Monad.Trans.State.Strict.html#loc_213_1_213_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_213_1_213_4&#39;)"><span class="mpre">put</span></a><span class="mpre">)
import Data.Functor.Identity (</span><a href="Data.Functor.Identity.html#loc_35_9_35_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_9_35_17&#39;)"><span class="mpre">Identity</span></a><span class="mpre">, </span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="mpre">runIdentity</span></a><span class="mpre">)
import Foreign.C.Error (</span><a href="Foreign.C.Error.html#loc_112_9_112_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_112_9_112_14&#39;)"><span class="mpre">Errno</span></a><span class="mpre">(</span><a href="Foreign.C.Error.html#loc_112_17_112_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_112_17_112_22&#39;)"><span class="mpre">Errno</span></a><span class="mpre">), </span><a href="Foreign.C.Error.html#loc_213_1_213_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_213_1_213_6&#39;)"><span class="mpre">ePIPE</span></a><span class="mpre">)
import Pipes
import Pipes.Core
import Pipes.Internal
import Pipes.Lift (</span><a href="Pipes.Lift.html#loc_192_1_192_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Lift.html#loc_192_1_192_11&#39;)"><span class="mpre">evalStateP</span></a><span class="mpre">)
import qualified GHC.IO.Exception as G
import qualified System.IO as IO
import qualified Prelude
import Prelude hiding (
      all
    , and
    , any
    , concat
    , drop
    , dropWhile
    , elem
    , filter
    , head
    , last
    , length
    , map
    , </span><a href="Control.Monad.html#loc_111_1_111_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_111_1_111_5&#39;)"><span class="mpre">mapM</span></a><span class="mpre">
    , </span><a href="Data.List.html#loc_523_1_523_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_523_1_523_8&#39;)"><span class="mpre">maximum</span></a><span class="mpre">
    , </span><a href="Data.List.html#loc_544_1_544_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_544_1_544_8&#39;)"><span class="mpre">minimum</span></a><span class="mpre">
    , notElem
    , null
    , or
    , print
    , </span><a href="Data.List.html#loc_1026_1_1026_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1026_1_1026_8&#39;)"><span class="mpre">product</span></a><span class="mpre">
    , </span><a href="Text.Read.html#loc_91_1_91_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.Read.html#loc_91_1_91_5&#39;)"><span class="mpre">read</span></a><span class="mpre">
    , readLn
    , </span><a href="Control.Monad.html#loc_98_1_98_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_98_1_98_9&#39;)"><span class="mpre">sequence</span></a><span class="mpre">
    , show
    , </span><a href="Data.List.html#loc_1025_1_1025_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1025_1_1025_4&#39;)"><span class="mpre">sum</span></a><span class="mpre">
    , take
    , takeWhile
    , zip
    , zipWith
    )

</span><span class="hl_comment"><span class="mpre">{- $producers
    Use &#39;for&#39; loops to iterate over &#39;Producer&#39;s whenever you want to perform the
    same action for every element:

&gt; -- Echo all lines from standard input to standard output
&gt; runEffect $ for P.stdinLn $ \str -&gt; do
&gt;     lift $ putStrLn str

    ... or more concisely:

&gt;&gt;&gt; runEffect $ for P.stdinLn (lift . putStrLn)
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
...

-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Read &#39;String&#39;s from &#39;IO.stdin&#39; using &#39;getLine&#39;

    Terminates on end of input
-}</span></span><span class="mpre">
</span><a href="#loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="mpre">stdinLn</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 159, srcSpanStartColumn = 12, srcSpanEndLine = 159, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 159, srcSpanStartColumn = 22, srcSpanEndLine = 159, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="hl_vardecl"><span class="mpre">stdinLn</span></span></a><span class="mpre"> = </span><a href="#loc_173_1_173_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_1_173_11&#39;)"><span class="hl_varref"><span class="mpre">fromHandle</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_52_1_52_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_52_1_52_6&#39;)"><span class="hl_varref"><span class="mpre">IO.stdin</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE stdinLn #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;read&#39; values from &#39;IO.stdin&#39;, ignoring failed parses</span></span><span class="mpre">
</span><a href="#loc_165_1_165_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_7&#39;)"><span class="mpre">readLn</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 164, srcSpanStartColumn = 11, srcSpanEndLine = 164, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 164, srcSpanStartColumn = 11, srcSpanEndLine = 164, srcSpanEndColumn = 12},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 16"><span class="mpre">(MonadIO m, Read a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_165_1_165_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_165_1_165_7&#39;)"><span class="hl_vardecl"><span class="mpre">readLn</span></span></a><span class="mpre"> = </span><a href="#loc_160_1_160_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_1_160_8&#39;)"><span class="hl_varref"><span class="mpre">stdinLn</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="#loc_516_1_516_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_1_516_5&#39;)"><span class="hl_varref"><span class="mpre">read</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE readLn #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Read &#39;String&#39;s from a &#39;IO.Handle&#39; using &#39;IO.hGetLine&#39;

    Terminates on end of input
-}</span></span><span class="mpre">
</span><a href="#loc_173_1_173_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_1_173_11&#39;)"><span class="mpre">fromHandle</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 172, srcSpanStartColumn = 15, srcSpanEndLine = 172, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 172, srcSpanStartColumn = 25, srcSpanEndLine = 172, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_173_1_173_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_1_173_11&#39;)"><span class="hl_fundecl"><span class="mpre">fromHandle</span></span></a><span class="mpre"> </span><a name="loc_173_12_173_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_12_173_13&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="#loc_175_5_175_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_5_175_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_175_5_175_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_5_175_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
        </span><a name="loc_176_9_176_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_9_176_12&#39;)"><span class="hl_vardecl"><span class="mpre">eof</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.html#loc_150_1_150_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_150_1_150_7&#39;)"><span class="hl_varref"><span class="mpre">IO.hIsEOF</span></span></a><span class="mpre"> </span><a href="#loc_173_12_173_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_12_173_13&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
        </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> </span><a href="#loc_176_9_176_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_9_176_12&#39;)"><span class="hl_varref"><span class="mpre">eof</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            </span><a name="loc_178_13_178_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_13_178_16&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Text.html#loc_190_1_190_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_190_1_190_9&#39;)"><span class="hl_varref"><span class="mpre">IO.hGetLine</span></span></a><span class="mpre"> </span><a href="#loc_173_12_173_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_12_173_13&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
            </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_178_13_178_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_13_178_16&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">
            </span><a href="#loc_175_5_175_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_175_5_175_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE fromHandle #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Repeat a monadic action indefinitely, &#39;yield&#39;ing each result</span></span><span class="mpre">
</span><a href="#loc_185_1_185_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_8&#39;)"><span class="mpre">repeatM</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 184, srcSpanStartColumn = 12, srcSpanEndLine = 184, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 184, srcSpanStartColumn = 20, srcSpanEndLine = 184, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_185_1_185_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_8&#39;)"><span class="hl_fundecl"><span class="mpre">repeatM</span></span></a><span class="mpre"> </span><a name="loc_185_9_185_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_9_185_10&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="#loc_185_9_185_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_9_185_10&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_265_4_265_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_265_4_265_6&#39;)"><span class="hl_infix"><span class="mpre">&gt;~</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE repeatM #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
  &quot;repeatM m &gt;-&gt; p&quot; forall m p . repeatM m &gt;-&gt; p = lift m &gt;~ p
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Repeat a monadic action a fixed number of times, &#39;yield&#39;ing each result

&gt; replicateM  0      x = return ()
&gt;
&gt; replicateM (m + n) x = replicateM m x &gt;&gt; replicateM n x  -- 0 &lt;= {m,n}
-}</span></span><span class="mpre">
</span><a href="#loc_199_1_199_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_1_199_11&#39;)"><span class="mpre">replicateM</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 198, srcSpanStartColumn = 15, srcSpanEndLine = 198, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 198, srcSpanStartColumn = 23, srcSpanEndLine = 198, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_199_1_199_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_1_199_11&#39;)"><span class="hl_fundecl"><span class="mpre">replicateM</span></span></a><span class="mpre"> </span><a name="loc_199_12_199_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_12_199_13&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_199_14_199_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_14_199_15&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="#loc_199_14_199_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_14_199_15&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_265_4_265_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_265_4_265_6&#39;)"><span class="hl_infix"><span class="mpre">&gt;~</span></span></a><span class="mpre"> </span><a href="#loc_380_1_380_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_1_380_5&#39;)"><span class="hl_varref"><span class="mpre">take</span></span></a><span class="mpre"> </span><a href="#loc_199_12_199_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_12_199_13&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE replicateM #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- $consumers
    Feed a &#39;Consumer&#39; the same value repeatedly using (&#39;&gt;~&#39;):

&gt;&gt;&gt; runEffect $ lift getLine &gt;~ P.stdoutLn
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
...

-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Write &#39;String&#39;s to &#39;IO.stdout&#39; using &#39;putStrLn&#39;

    Unlike &#39;toHandle&#39;, &#39;stdoutLn&#39; gracefully terminates on a broken output pipe
-}</span></span><span class="mpre">
</span><a href="#loc_219_1_219_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_1_219_9&#39;)"><span class="mpre">stdoutLn</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 218, srcSpanStartColumn = 13, srcSpanEndLine = 218, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 218, srcSpanStartColumn = 23, srcSpanEndLine = 218, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Consumer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_219_1_219_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_1_219_9&#39;)"><span class="hl_vardecl"><span class="mpre">stdoutLn</span></span></a><span class="mpre"> = </span><a href="#loc_221_5_221_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_5_221_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_221_5_221_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_5_221_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
        </span><a name="loc_222_9_222_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_9_222_12&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        </span><a name="loc_223_9_223_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_223_9_223_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">   &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="hl_varref"><span class="mpre">try</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">putStrLn</span></span><span class="mpre"> </span><a href="#loc_222_9_222_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_222_9_222_12&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">)
        case </span><a href="#loc_223_9_223_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_223_9_223_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
           </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> (</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 225, srcSpanStartColumn = 18, srcSpanEndLine = 226, srcSpanEndColumn = 54}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 225, srcSpanStartColumn = 28, srcSpanEndLine = 225, srcSpanEndColumn = 29},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 226, "><span class="mpre">G.IOError { G.ioe_type  = G.ResourceVanished
                           , G.ioe_errno = Just ioe }</span></span><span class="mpre">)
                | </span><a href="Foreign.C.Error.html#loc_112_17_112_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_112_17_112_22&#39;)"><span class="hl_conref"><span class="mpre">Errno</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">ioe</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Foreign.C.Error.html#loc_213_1_213_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_213_1_213_6&#39;)"><span class="hl_varref"><span class="mpre">ePIPE</span></span></a><span class="mpre">
                    -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
           </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">  </span><a name="loc_229_18_229_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_18_229_19&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre">  -&gt; </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="hl_varref"><span class="mpre">throwIO</span></span></a><span class="mpre"> </span><a href="#loc_229_18_229_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_229_18_229_19&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)
           </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><a href="#loc_221_5_221_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_221_5_221_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE stdoutLn #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;print&#39; values to &#39;IO.stdout&#39;</span></span><span class="mpre">
</span><a href="#loc_235_1_235_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_1_235_6&#39;)"><span class="mpre">print</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 234, srcSpanStartColumn = 10, srcSpanEndLine = 234, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 234, srcSpanStartColumn = 10, srcSpanEndLine = 234, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 23"><span class="mpre">(MonadIO m, Show a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Consumer&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_235_1_235_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_1_235_6&#39;)"><span class="hl_vardecl"><span class="mpre">print</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> (\</span><a name="loc_235_19_235_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_19_235_20&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">Prelude.print</span></span><span class="mpre"> </span><a href="#loc_235_19_235_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_235_19_235_20&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE print #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; print&quot; forall p .
        p &gt;-&gt; print = for p (\a -&gt; liftIO (Prelude.print a))
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Write &#39;String&#39;s to a &#39;IO.Handle&#39; using &#39;IO.hPutStrLn&#39;</span></span><span class="mpre">
</span><a href="#loc_245_1_245_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_245_1_245_9&#39;)"><span class="mpre">toHandle</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 244, srcSpanStartColumn = 13, srcSpanEndLine = 244, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 244, srcSpanStartColumn = 23, srcSpanEndLine = 244, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_245_1_245_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_245_1_245_9&#39;)"><span class="hl_fundecl"><span class="mpre">toHandle</span></span></a><span class="mpre"> </span><a name="loc_245_10_245_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_245_10_245_16&#39;)"><span class="hl_vardecl"><span class="mpre">handle</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> (\</span><a name="loc_245_29_245_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_245_29_245_32&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><a href="GHC.IO.Handle.Text.html#loc_533_1_533_10" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_533_1_533_10&#39;)"><span class="hl_varref"><span class="mpre">IO.hPutStrLn</span></span></a><span class="mpre"> </span><a href="#loc_245_10_245_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_245_10_245_16&#39;)"><span class="hl_varref"><span class="mpre">handle</span></span></a><span class="mpre"> </span><a href="#loc_245_29_245_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_245_29_245_32&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE toHandle #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; toHandle handle&quot; forall p handle .
        p &gt;-&gt; toHandle handle = for p (\str -&gt; liftIO (IO.hPutStrLn handle str))
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | &#39;discard&#39; all incoming values</span></span><span class="mpre">
</span><a href="#loc_255_1_255_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_1_255_6&#39;)"><span class="mpre">drain</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 254, srcSpanStartColumn = 10, srcSpanEndLine = 254, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 254, srcSpanStartColumn = 18, srcSpanEndLine = 254, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Consumer&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_255_1_255_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_255_1_255_6&#39;)"><span class="hl_vardecl"><span class="mpre">drain</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_482_1_482_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_482_1_482_8&#39;)"><span class="hl_varref"><span class="mpre">discard</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE drain #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; drain&quot; forall p .
        p &gt;-&gt; drain = for p discard
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- $pipes
    Use (&#39;&gt;-&gt;&#39;) to connect &#39;Producer&#39;s, &#39;Pipe&#39;s, and &#39;Consumer&#39;s:

&gt;&gt;&gt; runEffect $ P.stdinLn &gt;-&gt; P.takeWhile (/= &quot;quit&quot;) &gt;-&gt; P.stdoutLn
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
quit&lt;Enter&gt;
&gt;&gt;&gt;

-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Apply a function to all values flowing downstream

&gt; map id = cat
&gt;
&gt; map (g . f) = map f &gt;-&gt; map g
-}</span></span><span class="mpre">
</span><a href="#loc_283_1_283_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_1_283_4&#39;)"><span class="mpre">map</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 282, srcSpanStartColumn = 8, srcSpanEndLine = 282, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 282, srcSpanStartColumn = 16, srcSpanEndLine = 282, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_283_1_283_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_1_283_4&#39;)"><span class="hl_fundecl"><span class="mpre">map</span></span></a><span class="mpre"> </span><a name="loc_283_5_283_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_5_283_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> (\</span><a name="loc_283_19_283_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_19_283_20&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><a href="#loc_283_5_283_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_5_283_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_283_19_283_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_19_283_20&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE map #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; map f&quot; forall p f . p &gt;-&gt; map f = for p (\a -&gt; yield (f a))

  ; &quot;map f &gt;-&gt; p&quot; forall p f . map f &gt;-&gt; p = (do
        a &lt;- await
        return (f a) ) &gt;~ p
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Apply a monadic function to all values flowing downstream

&gt; mapM return = cat
&gt;
&gt; mapM (f &gt;=&gt; g) = mapM f &gt;-&gt; mapM g
-}</span></span><span class="mpre">
</span><a href="#loc_301_1_301_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_1_301_5&#39;)"><span class="mpre">mapM</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 300, srcSpanStartColumn = 9, srcSpanEndLine = 300, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 300, srcSpanStartColumn = 17, srcSpanEndLine = 300, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_301_1_301_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_1_301_5&#39;)"><span class="hl_fundecl"><span class="mpre">mapM</span></span></a><span class="mpre"> </span><a name="loc_301_6_301_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_6_301_7&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_301_21_301_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_21_301_22&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; do
    </span><a name="loc_302_5_302_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_302_5_302_6&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="#loc_301_6_301_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_6_301_7&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_301_21_301_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_21_301_22&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
    </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_302_5_302_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_302_5_302_6&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE mapM #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; mapM f&quot; forall p f . p &gt;-&gt; mapM f = for p (\a -&gt; do
        b &lt;- lift (f a)
        yield b )

  ; &quot;mapM f &gt;-&gt; p&quot; forall p f . mapM f &gt;-&gt; p = (do
        a &lt;- await
        b &lt;- lift (f a)
        return b ) &gt;~ p
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a stream of actions to a stream of values</span></span><span class="mpre">
</span><a href="#loc_319_1_319_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_1_319_9&#39;)"><span class="mpre">sequence</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 318, srcSpanStartColumn = 13, srcSpanEndLine = 318, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 318, srcSpanStartColumn = 21, srcSpanEndLine = 318, srcSpanEndColumn = 23}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_319_1_319_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_319_1_319_9&#39;)"><span class="hl_vardecl"><span class="mpre">sequence</span></span></a><span class="mpre"> = </span><a href="#loc_301_1_301_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_301_1_301_5&#39;)"><span class="hl_varref"><span class="mpre">mapM</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE sequence #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- | Apply a function to all values flowing downstream, and
     forward each element of the result.
-}</span></span><span class="mpre">
</span><a href="#loc_326_1_326_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_1_326_12&#39;)"><span class="mpre">mapFoldable</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 325, srcSpanStartColumn = 16, srcSpanEndLine = 325, srcSpanEndColumn = 40}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 325, srcSpanStartColumn = 16, srcSpanEndLine = 325, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 32"><span class="mpre">(Monad m, Foldable t) =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_326_1_326_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_1_326_12&#39;)"><span class="hl_fundecl"><span class="mpre">mapFoldable</span></span></a><span class="mpre"> </span><a name="loc_326_13_326_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_13_326_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> (\</span><a name="loc_326_27_326_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_27_326_28&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="Pipes.html#loc_465_1_465_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_465_1_465_5&#39;)"><span class="hl_varref"><span class="mpre">each</span></span></a><span class="mpre"> (</span><a href="#loc_326_13_326_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_13_326_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_326_27_326_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_27_326_28&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE mapFoldable #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; mapFoldable f&quot; forall p f .
        p &gt;-&gt; mapFoldable f = for p (\a -&gt; each (f a))
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(filter predicate)@ only forwards values that satisfy the predicate.

&gt; filter (pure True) = cat
&gt;
&gt; filter (liftA2 (&amp;&amp;) p1 p2) = filter p1 &gt;-&gt; filter p2
-}</span></span><span class="mpre">
</span><a href="#loc_341_1_341_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_7&#39;)"><span class="mpre">filter</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 340, srcSpanStartColumn = 11, srcSpanEndLine = 340, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 340, srcSpanStartColumn = 19, srcSpanEndLine = 340, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_341_1_341_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_7&#39;)"><span class="hl_fundecl"><span class="mpre">filter</span></span></a><span class="mpre"> </span><a name="loc_341_8_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_8_341_17&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_341_31_341_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_31_341_32&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_341_8_341_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_8_341_17&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_341_31_341_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_31_341_32&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_341_31_341_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_31_341_32&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE filter #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; filter predicate&quot; forall p predicate.
        p &gt;-&gt; filter predicate = for p (\a -&gt; when (predicate a) (yield a))
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(filterM predicate)@ only forwards values that satisfy the monadic
    predicate

&gt; filterM (pure (pure True)) = cat
&gt;
&gt; filterM (liftA2 (liftA2 (&amp;&amp;)) p1 p2) = filterM p1 &gt;-&gt; filterM p2
-}</span></span><span class="mpre">
</span><a href="#loc_357_1_357_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_1_357_8&#39;)"><span class="mpre">filterM</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 356, srcSpanStartColumn = 12, srcSpanEndLine = 356, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 356, srcSpanStartColumn = 20, srcSpanEndLine = 356, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_357_1_357_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_1_357_8&#39;)"><span class="hl_fundecl"><span class="mpre">filterM</span></span></a><span class="mpre"> </span><a name="loc_357_9_357_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_9_357_18&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_357_32_357_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_32_357_33&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; do
    </span><a name="loc_358_5_358_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_5_358_6&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="#loc_357_9_357_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_9_357_18&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_357_32_357_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_32_357_33&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
    </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_358_5_358_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_358_5_358_6&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_357_32_357_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_357_32_357_33&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE filterM #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; filterM predicate&quot; forall p predicate .
        p &gt;-&gt; filterM predicate = for p (\a -&gt; do
            b &lt;- lift (predicate a)
            when b (yield a) )
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(take n)@ only allows @n@ values to pass through

&gt; take 0 = return ()
&gt;
&gt; take (m + n) = take m &gt;&gt; take n

&gt; take &lt;infinity&gt; = cat
&gt;
&gt; take (min m n) = take m &gt;-&gt; take n
-}</span></span><span class="mpre">
</span><a href="#loc_380_1_380_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_1_380_5&#39;)"><span class="mpre">take</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 379, srcSpanStartColumn = 9, srcSpanEndLine = 379, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 379, srcSpanStartColumn = 17, srcSpanEndLine = 379, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_380_1_380_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_1_380_5&#39;)"><span class="hl_fundecl"><span class="mpre">take</span></span></a><span class="mpre"> </span><a name="loc_380_6_380_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_6_380_7&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_254_1_254_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_254_1_254_12&#39;)"><span class="hl_varref"><span class="mpre">replicateM_</span></span></a><span class="mpre"> </span><a href="#loc_380_6_380_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_380_6_380_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    </span><a name="loc_381_5_381_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_5_381_6&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
    </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_381_5_381_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_381_5_381_6&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE take #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(takeWhile p)@ allows values to pass downstream so long as they satisfy
    the predicate @p@.

&gt; takeWhile (pure True) = cat
&gt;
&gt; takeWhile (liftA2 (&amp;&amp;) p1 p2) = takeWhile p1 &gt;-&gt; takeWhile p2
-}</span></span><span class="mpre">
</span><a href="#loc_393_1_393_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_1_393_10&#39;)"><span class="mpre">takeWhile</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 392, srcSpanStartColumn = 14, srcSpanEndLine = 392, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 392, srcSpanStartColumn = 22, srcSpanEndLine = 392, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_393_1_393_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_1_393_10&#39;)"><span class="hl_fundecl"><span class="mpre">takeWhile</span></span></a><span class="mpre"> </span><a name="loc_393_11_393_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_11_393_20&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="#loc_395_5_395_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_395_5_395_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_395_5_395_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_395_5_395_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
        </span><a name="loc_396_9_396_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_396_9_396_10&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        if (</span><a href="#loc_393_11_393_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_393_11_393_20&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_396_9_396_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_396_9_396_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
            then do
                </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_396_9_396_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_396_9_396_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
                </span><a href="#loc_395_5_395_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_395_5_395_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
            else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE takeWhile #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(drop n)@ discards @n@ values going downstream

&gt; drop 0 = cat
&gt;
&gt; drop (m + n) = drop m &gt;-&gt; drop n
-}</span></span><span class="mpre">
</span><a href="#loc_411_1_411_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_1_411_5&#39;)"><span class="mpre">drop</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 410, srcSpanStartColumn = 9, srcSpanEndLine = 410, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 410, srcSpanStartColumn = 17, srcSpanEndLine = 410, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_411_1_411_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_1_411_5&#39;)"><span class="hl_fundecl"><span class="mpre">drop</span></span></a><span class="mpre"> </span><a name="loc_411_6_411_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_6_411_7&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = do
    </span><a href="Control.Monad.html#loc_254_1_254_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_254_1_254_12&#39;)"><span class="hl_varref"><span class="mpre">replicateM_</span></span></a><span class="mpre"> </span><a href="#loc_411_6_411_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_6_411_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
    </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE drop #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(dropWhile p)@ discards values going downstream until one violates the
    predicate @p@.

&gt; dropWhile (pure False) = cat
&gt;
&gt; dropWhile (liftA2 (||) p1 p2) = dropWhile p1 &gt;-&gt; dropWhile p2
-}</span></span><span class="mpre">
</span><a href="#loc_424_1_424_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_424_1_424_10&#39;)"><span class="mpre">dropWhile</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 423, srcSpanStartColumn = 14, srcSpanEndLine = 423, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 423, srcSpanStartColumn = 22, srcSpanEndLine = 423, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_424_1_424_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_424_1_424_10&#39;)"><span class="hl_fundecl"><span class="mpre">dropWhile</span></span></a><span class="mpre"> </span><a name="loc_424_11_424_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_424_11_424_20&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="#loc_426_5_426_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_426_5_426_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_426_5_426_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_426_5_426_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
        </span><a name="loc_427_9_427_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_9_427_10&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        if (</span><a href="#loc_424_11_424_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_424_11_424_20&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_427_9_427_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_9_427_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
            then </span><a href="#loc_426_5_426_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_426_5_426_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
            else do
                </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_427_9_427_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_9_427_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
                </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE dropWhile #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Flatten all &#39;Foldable&#39; elements flowing downstream</span></span><span class="mpre">
</span><a href="#loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="mpre">concat</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 436, srcSpanStartColumn = 11, srcSpanEndLine = 436, srcSpanEndColumn = 35}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 436, srcSpanStartColumn = 11, srcSpanEndLine = 436, srcSpanEndColumn = 12},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 43"><span class="mpre">(Monad m, Foldable f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_437_1_437_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_437_1_437_7&#39;)"><span class="hl_vardecl"><span class="mpre">concat</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_465_1_465_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_465_1_465_5&#39;)"><span class="hl_varref"><span class="mpre">each</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE concat #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; concat&quot; forall p . p &gt;-&gt; concat = for p each
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Outputs the indices of all elements that match the given element</span></span><span class="mpre">
</span><a href="#loc_446_1_446_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_446_1_446_12&#39;)"><span class="mpre">elemIndices</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 445, srcSpanStartColumn = 16, srcSpanEndLine = 445, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 445, srcSpanStartColumn = 16, srcSpanEndLine = 445, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 44"><span class="mpre">(Monad m, Eq a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_446_1_446_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_446_1_446_12&#39;)"><span class="hl_fundecl"><span class="mpre">elemIndices</span></span></a><span class="mpre"> </span><a name="loc_446_13_446_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_446_13_446_14&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_451_1_451_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_1_451_12&#39;)"><span class="hl_varref"><span class="mpre">findIndices</span></span></a><span class="mpre"> (</span><a href="#loc_446_13_446_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_446_13_446_14&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE elemIndices #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Outputs the indices of all elements that satisfied the predicate</span></span><span class="mpre">
</span><a href="#loc_451_1_451_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_1_451_12&#39;)"><span class="mpre">findIndices</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 450, srcSpanStartColumn = 16, srcSpanEndLine = 450, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 450, srcSpanStartColumn = 24, srcSpanEndLine = 450, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_451_1_451_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_1_451_12&#39;)"><span class="hl_fundecl"><span class="mpre">findIndices</span></span></a><span class="mpre"> </span><a name="loc_451_13_451_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_13_451_22&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="#loc_453_5_453_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_5_453_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where
    </span><a name="loc_453_5_453_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_5_453_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_453_10_453_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_10_453_11&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = do
        </span><a name="loc_454_9_454_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_9_454_10&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_451_13_451_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_13_451_22&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_454_9_454_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_454_9_454_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_453_10_453_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_10_453_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
        </span><a href="#loc_453_5_453_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_5_453_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="#loc_453_10_453_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_10_453_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE findIndices #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Strict left scan

&gt; Control.Foldl.purely scan :: Monad m =&gt; Fold a b -&gt; Pipe a b m r
-}</span></span><span class="mpre">
</span><a href="#loc_464_1_464_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_1_464_5&#39;)"><span class="mpre">scan</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 463, srcSpanStartColumn = 9, srcSpanEndLine = 463, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 463, srcSpanStartColumn = 17, srcSpanEndLine = 463, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_464_1_464_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_1_464_5&#39;)"><span class="hl_fundecl"><span class="mpre">scan</span></span></a><span class="mpre"> </span><a name="loc_464_6_464_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_6_464_10&#39;)"><span class="hl_vardecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_464_11_464_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_11_464_16&#39;)"><span class="hl_vardecl"><span class="mpre">begin</span></span></a><span class="mpre"> </span><a name="loc_464_17_464_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_17_464_21&#39;)"><span class="hl_vardecl"><span class="mpre">done</span></span></a><span class="mpre"> = </span><a href="#loc_466_5_466_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_5_466_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_464_11_464_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_11_464_16&#39;)"><span class="hl_varref"><span class="mpre">begin</span></span></a><span class="mpre">
  where
    </span><a name="loc_466_5_466_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_5_466_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_466_10_466_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_10_466_11&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = do
        </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><a href="#loc_464_17_464_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_17_464_21&#39;)"><span class="hl_varref"><span class="mpre">done</span></span></a><span class="mpre"> </span><a href="#loc_466_10_466_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_10_466_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
        </span><a name="loc_468_9_468_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_468_9_468_10&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        let </span><a name="loc_469_13_469_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_13_469_15&#39;)"><span class="hl_vardecl"><span class="mpre">x&#39;</span></span></a><span class="mpre"> = </span><a href="#loc_464_6_464_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_464_6_464_10&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_466_10_466_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_10_466_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="#loc_468_9_468_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_468_9_468_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
        </span><a href="#loc_466_5_466_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_466_5_466_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="#loc_469_13_469_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_469_13_469_15&#39;)"><span class="hl_varref"><span class="mpre">x&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE scan #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Strict, monadic left scan

&gt; Control.Foldl.impurely scan :: Monad m =&gt; FoldM a m b -&gt; Pipe a b m r
-}</span></span><span class="mpre">
</span><a href="#loc_478_1_478_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_1_478_6&#39;)"><span class="mpre">scanM</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 477, srcSpanStartColumn = 10, srcSpanEndLine = 477, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 477, srcSpanStartColumn = 18, srcSpanEndLine = 477, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_478_1_478_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_1_478_6&#39;)"><span class="hl_fundecl"><span class="mpre">scanM</span></span></a><span class="mpre"> </span><a name="loc_478_7_478_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_7_478_11&#39;)"><span class="hl_vardecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_478_12_478_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_12_478_17&#39;)"><span class="hl_vardecl"><span class="mpre">begin</span></span></a><span class="mpre"> </span><a name="loc_478_18_478_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_18_478_22&#39;)"><span class="hl_vardecl"><span class="mpre">done</span></span></a><span class="mpre"> = do
    </span><a name="loc_479_5_479_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_479_5_479_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="#loc_478_12_478_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_12_478_17&#39;)"><span class="hl_varref"><span class="mpre">begin</span></span></a><span class="mpre">
    </span><a href="#loc_482_5_482_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_5_482_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_479_5_479_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_479_5_479_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
  where
    </span><a name="loc_482_5_482_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_5_482_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_482_10_482_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_10_482_11&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = do
        </span><a name="loc_483_9_483_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_483_9_483_10&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="#loc_478_18_478_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_18_478_22&#39;)"><span class="hl_varref"><span class="mpre">done</span></span></a><span class="mpre"> </span><a href="#loc_482_10_482_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_10_482_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
        </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_483_9_483_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_483_9_483_10&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">
        </span><a name="loc_485_9_485_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_9_485_10&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">  &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        </span><a name="loc_486_9_486_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_486_9_486_11&#39;)"><span class="hl_vardecl"><span class="mpre">x&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="#loc_478_7_478_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_478_7_478_11&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_482_10_482_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_10_482_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="#loc_485_9_485_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_9_485_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
        </span><a href="#loc_482_5_482_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_5_482_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="#loc_486_9_486_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_486_9_486_11&#39;)"><span class="hl_varref"><span class="mpre">x&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE scanM #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Apply an action to all values flowing downstream

&gt; chain (pure (return ())) = cat
&gt;
&gt; chain (liftA2 (&gt;&gt;) m1 m2) = chain m1 &gt;-&gt; chain m2
-}</span></span><span class="mpre">
</span><a href="#loc_497_1_497_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_497_1_497_6&#39;)"><span class="mpre">chain</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 496, srcSpanStartColumn = 10, srcSpanEndLine = 496, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 496, srcSpanStartColumn = 18, srcSpanEndLine = 496, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_497_1_497_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_497_1_497_6&#39;)"><span class="hl_fundecl"><span class="mpre">chain</span></span></a><span class="mpre"> </span><a name="loc_497_7_497_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_497_7_497_8&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_497_22_497_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_497_22_497_23&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; do
    </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="#loc_497_7_497_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_497_7_497_8&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_497_22_497_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_497_22_497_23&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
    </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_497_22_497_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_497_22_497_23&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE chain #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; chain f&quot; forall p f .
        p &gt;-&gt; chain f = for p (\a -&gt; do
            lift (f a)
            yield a )
  ; &quot;chain f &gt;-&gt; p&quot; forall p f .
        chain f &gt;-&gt; p = (do
            a &lt;- await
            lift (f a)
            return a ) &gt;~ p
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Parse &#39;Read&#39;able values, only forwarding the value if the parse succeeds</span></span><span class="mpre">
</span><a href="#loc_516_1_516_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_1_516_5&#39;)"><span class="mpre">read</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 515, srcSpanStartColumn = 9, srcSpanEndLine = 515, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 515, srcSpanStartColumn = 9, srcSpanEndLine = 515, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 515,"><span class="mpre">(Monad m, Read a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_516_1_516_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_1_516_5&#39;)"><span class="hl_vardecl"><span class="mpre">read</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_516_19_516_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_19_516_22&#39;)"><span class="hl_vardecl"><span class="mpre">str</span></span></a><span class="mpre"> -&gt; case (</span><a href="Text.Read.html#loc_60_1_60_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Text.Read.html#loc_60_1_60_6&#39;)"><span class="hl_varref"><span class="mpre">reads</span></span></a><span class="mpre"> </span><a href="#loc_516_19_516_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_516_19_516_22&#39;)"><span class="hl_varref"><span class="mpre">str</span></span></a><span class="mpre">) of
    [(</span><a name="loc_517_7_517_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_517_7_517_8&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">)] -&gt; </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_517_7_517_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_517_7_517_8&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
    _         -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE read #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES
    &quot;p &gt;-&gt; read&quot; forall p .
        p &gt;-&gt; read = for p (\str -&gt; case (reads str) of
            [(a, &quot;&quot;)] -&gt; yield a
            _         -&gt; return () )
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert &#39;Show&#39;able values to &#39;String&#39;s</span></span><span class="mpre">
</span><a href="#loc_530_1_530_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_530_1_530_5&#39;)"><span class="mpre">show</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 529, srcSpanStartColumn = 9, srcSpanEndLine = 529, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 529, srcSpanStartColumn = 9, srcSpanEndLine = 529, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 529,"><span class="mpre">(Monad m, Show a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_530_1_530_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_530_1_530_5&#39;)"><span class="hl_vardecl"><span class="mpre">show</span></span></a><span class="mpre"> = </span><a href="#loc_283_1_283_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_283_1_283_4&#39;)"><span class="hl_varref"><span class="mpre">map</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">Prelude.show</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE show #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- $folds
    Use these to fold the output of a &#39;Producer&#39;.  Many of these folds will stop
    drawing elements if they can compute their result early, like &#39;any&#39;:

&gt;&gt;&gt; P.any null P.stdinLn
Test&lt;Enter&gt;
ABC&lt;Enter&gt;
&lt;Enter&gt;
True
&gt;&gt;&gt;

-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Strict fold of the elements of a &#39;Producer&#39;

&gt; Control.Foldl.purely fold :: Monad m =&gt; Fold a b -&gt; Producer a m () -&gt; m b
-}</span></span><span class="mpre">
</span><a href="#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_1_551_5&#39;)"><span class="mpre">fold</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 550, srcSpanStartColumn = 9, srcSpanEndLine = 550, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 550, srcSpanStartColumn = 17, srcSpanEndLine = 550, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_551_1_551_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_1_551_5&#39;)"><span class="hl_fundecl"><span class="mpre">fold</span></span></a><span class="mpre"> </span><a name="loc_551_6_551_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_6_551_10&#39;)"><span class="hl_vardecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_551_11_551_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_11_551_16&#39;)"><span class="hl_vardecl"><span class="mpre">begin</span></span></a><span class="mpre"> </span><a name="loc_551_17_551_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_17_551_21&#39;)"><span class="hl_vardecl"><span class="mpre">done</span></span></a><span class="mpre"> </span><a name="loc_551_22_551_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_22_551_24&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><a href="#loc_553_5_553_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_5_553_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_551_22_551_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_22_551_24&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre"> </span><a href="#loc_551_11_551_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_11_551_16&#39;)"><span class="hl_varref"><span class="mpre">begin</span></span></a><span class="mpre">
  where
    </span><a name="loc_553_5_553_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_5_553_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_553_10_553_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_10_553_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_553_12_553_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_12_553_13&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = case </span><a href="#loc_553_10_553_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_10_553_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> of
        </span><a href="Pipes.Internal.html#loc_66_7_66_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_66_7_66_14&#39;)"><span class="hl_conref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><a name="loc_554_17_554_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_17_554_18&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre">  _  -&gt; </span><a href="Pipes.Internal.html#loc_259_1_259_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_259_1_259_7&#39;)"><span class="hl_varref"><span class="mpre">closed</span></span></a><span class="mpre"> </span><a href="#loc_554_17_554_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_17_554_18&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_67_7_67_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_67_7_67_14&#39;)"><span class="hl_conref"><span class="mpre">Respond</span></span></a><span class="mpre"> </span><a name="loc_555_17_555_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_17_555_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">  </span><a name="loc_555_20_555_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_20_555_22&#39;)"><span class="hl_vardecl"><span class="mpre">fu</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_553_5_553_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_5_553_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_555_20_555_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_20_555_22&#39;)"><span class="hl_varref"><span class="mpre">fu</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="#loc_551_6_551_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_6_551_10&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_553_12_553_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_12_553_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="#loc_555_17_555_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_555_17_555_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_68_7_68_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_68_7_68_8&#39;)"><span class="hl_conref"><span class="mpre">M</span></span></a><span class="mpre">          </span><a name="loc_556_20_556_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_556_20_556_21&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">  -&gt; </span><a href="#loc_556_20_556_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_556_20_556_21&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> \</span><a name="loc_556_33_556_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_556_33_556_35&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_553_5_553_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_5_553_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_556_33_556_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_556_33_556_35&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre"> </span><a href="#loc_553_12_553_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_12_553_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_69_7_69_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_69_7_69_11&#39;)"><span class="hl_conref"><span class="mpre">Pure</span></span></a><span class="mpre">    _     -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_551_17_551_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_17_551_21&#39;)"><span class="hl_varref"><span class="mpre">done</span></span></a><span class="mpre"> </span><a href="#loc_553_12_553_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_553_12_553_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE fold #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Strict, monadic fold of the elements of a &#39;Producer&#39;

&gt; Control.Foldl.impurely foldM :: Monad m =&gt; FoldM a b -&gt; Producer a m () -&gt; m b
-}</span></span><span class="mpre">
</span><a href="#loc_567_1_567_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_1_567_6&#39;)"><span class="mpre">foldM</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 565, srcSpanStartColumn = 8, srcSpanEndLine = 566, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 566, srcSpanStartColumn = 5, srcSpanEndLine = 566, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipe"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_567_1_567_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_1_567_6&#39;)"><span class="hl_fundecl"><span class="mpre">foldM</span></span></a><span class="mpre"> </span><a name="loc_567_7_567_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_7_567_11&#39;)"><span class="hl_vardecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_567_12_567_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_12_567_17&#39;)"><span class="hl_vardecl"><span class="mpre">begin</span></span></a><span class="mpre"> </span><a name="loc_567_18_567_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_18_567_22&#39;)"><span class="hl_vardecl"><span class="mpre">done</span></span></a><span class="mpre"> </span><a name="loc_567_23_567_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_23_567_25&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = do
    </span><a name="loc_568_5_568_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_568_5_568_7&#39;)"><span class="hl_vardecl"><span class="mpre">x0</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_567_12_567_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_12_567_17&#39;)"><span class="hl_varref"><span class="mpre">begin</span></span></a><span class="mpre">
    </span><a href="#loc_571_5_571_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_5_571_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_567_23_567_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_23_567_25&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre"> </span><a href="#loc_568_5_568_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_568_5_568_7&#39;)"><span class="hl_varref"><span class="mpre">x0</span></span></a><span class="mpre">
  where
    </span><a name="loc_571_5_571_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_5_571_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_571_10_571_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_10_571_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_571_12_571_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_12_571_13&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> = case </span><a href="#loc_571_10_571_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_10_571_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> of
        </span><a href="Pipes.Internal.html#loc_66_7_66_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_66_7_66_14&#39;)"><span class="hl_conref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><a name="loc_572_17_572_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_572_17_572_18&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre">  _  -&gt; </span><a href="Pipes.Internal.html#loc_259_1_259_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_259_1_259_7&#39;)"><span class="hl_varref"><span class="mpre">closed</span></span></a><span class="mpre"> </span><a href="#loc_572_17_572_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_572_17_572_18&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_67_7_67_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_67_7_67_14&#39;)"><span class="hl_conref"><span class="mpre">Respond</span></span></a><span class="mpre"> </span><a name="loc_573_17_573_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_17_573_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">  </span><a name="loc_573_20_573_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_20_573_22&#39;)"><span class="hl_vardecl"><span class="mpre">fu</span></span></a><span class="mpre"> -&gt; do
            </span><a name="loc_574_13_574_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_13_574_15&#39;)"><span class="hl_vardecl"><span class="mpre">x&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_567_7_567_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_7_567_11&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_571_12_571_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_12_571_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="#loc_573_17_573_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_17_573_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
            </span><a href="#loc_571_5_571_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_5_571_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_573_20_573_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_573_20_573_22&#39;)"><span class="hl_varref"><span class="mpre">fu</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="#loc_574_13_574_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_13_574_15&#39;)"><span class="hl_varref"><span class="mpre">x&#39;</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_68_7_68_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_68_7_68_8&#39;)"><span class="hl_conref"><span class="mpre">M</span></span></a><span class="mpre">          </span><a name="loc_576_20_576_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_20_576_21&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">  -&gt; </span><a href="#loc_576_20_576_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_20_576_21&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> \</span><a name="loc_576_33_576_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_33_576_35&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_571_5_571_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_5_571_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_576_33_576_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_33_576_35&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre"> </span><a href="#loc_571_12_571_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_12_571_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_69_7_69_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_69_7_69_11&#39;)"><span class="hl_conref"><span class="mpre">Pure</span></span></a><span class="mpre">    _     -&gt; </span><a href="#loc_567_18_567_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_18_567_22&#39;)"><span class="hl_varref"><span class="mpre">done</span></span></a><span class="mpre"> </span><a href="#loc_571_12_571_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_571_12_571_13&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE foldM #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(all predicate p)@ determines whether all the elements of @p@ satisfy the
    predicate.
-}</span></span><span class="mpre">
</span><a href="#loc_584_1_584_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_1_584_4&#39;)"><span class="mpre">all</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 583, srcSpanStartColumn = 8, srcSpanEndLine = 583, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 583, srcSpanStartColumn = 16, srcSpanEndLine = 583, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_584_1_584_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_1_584_4&#39;)"><span class="hl_fundecl"><span class="mpre">all</span></span></a><span class="mpre"> </span><a name="loc_584_5_584_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_5_584_14&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_584_15_584_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_15_584_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_684_1_684_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_1_684_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_584_15_584_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_15_584_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="#loc_341_1_341_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_7&#39;)"><span class="hl_varref"><span class="mpre">filter</span></span></a><span class="mpre"> (\</span><a name="loc_584_41_584_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_41_584_42&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> (</span><a href="#loc_584_5_584_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_5_584_14&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_584_41_584_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_41_584_42&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE all #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(any predicate p)@ determines whether any element of @p@ satisfies the
    predicate.
-}</span></span><span class="mpre">
</span><a href="#loc_591_1_591_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_1_591_4&#39;)"><span class="mpre">any</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 590, srcSpanStartColumn = 8, srcSpanEndLine = 590, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 590, srcSpanStartColumn = 16, srcSpanEndLine = 590, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_591_1_591_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_1_591_4&#39;)"><span class="hl_fundecl"><span class="mpre">any</span></span></a><span class="mpre"> </span><a name="loc_591_5_591_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_5_591_14&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_591_15_591_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_15_591_16&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_684_1_684_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_1_684_5&#39;)"><span class="hl_varref"><span class="mpre">null</span></span></a><span class="mpre"> (</span><a href="#loc_591_15_591_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_15_591_16&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="#loc_341_1_341_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_7&#39;)"><span class="hl_varref"><span class="mpre">filter</span></span></a><span class="mpre"> </span><a href="#loc_591_5_591_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_5_591_14&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE any #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Determines whether all elements are &#39;True&#39;</span></span><span class="mpre">
</span><a href="#loc_596_1_596_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_1_596_4&#39;)"><span class="mpre">and</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 595, srcSpanStartColumn = 8, srcSpanEndLine = 595, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 595, srcSpanStartColumn = 16, srcSpanEndLine = 595, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_596_1_596_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_596_1_596_4&#39;)"><span class="hl_vardecl"><span class="mpre">and</span></span></a><span class="mpre"> = </span><a href="#loc_584_1_584_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_1_584_4&#39;)"><span class="hl_varref"><span class="mpre">all</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE and #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Determines whether any element is &#39;True&#39;</span></span><span class="mpre">
</span><a href="#loc_601_1_601_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_601_1_601_3&#39;)"><span class="mpre">or</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 600, srcSpanStartColumn = 7, srcSpanEndLine = 600, srcSpanEndColumn = 17}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 600, srcSpanStartColumn = 15, srcSpanEndLine = 600, srcSpanEndColumn = 17}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_601_1_601_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_601_1_601_3&#39;)"><span class="hl_vardecl"><span class="mpre">or</span></span></a><span class="mpre"> = </span><a href="#loc_591_1_591_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_1_591_4&#39;)"><span class="hl_varref"><span class="mpre">any</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE or #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(elem a p)@ returns &#39;True&#39; if @p@ has an element equal to @a@, &#39;False&#39;
    otherwise
-}</span></span><span class="mpre">
</span><a href="#loc_608_1_608_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_1_608_5&#39;)"><span class="mpre">elem</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 607, srcSpanStartColumn = 9, srcSpanEndLine = 607, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 607, srcSpanStartColumn = 9, srcSpanEndLine = 607, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 607,"><span class="mpre">(Monad m, Eq a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_608_1_608_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_1_608_5&#39;)"><span class="hl_fundecl"><span class="mpre">elem</span></span></a><span class="mpre"> </span><a name="loc_608_6_608_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_6_608_7&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_591_1_591_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_1_591_4&#39;)"><span class="hl_varref"><span class="mpre">any</span></span></a><span class="mpre"> (</span><a href="#loc_608_6_608_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_608_6_608_7&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE elem #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| @(notElem a)@ returns &#39;False&#39; if @p@ has an element equal to @a@, &#39;True&#39;
    otherwise
-}</span></span><span class="mpre">
</span><a href="#loc_615_1_615_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_1_615_8&#39;)"><span class="mpre">notElem</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 614, srcSpanStartColumn = 12, srcSpanEndLine = 614, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 614, srcSpanStartColumn = 12, srcSpanEndLine = 614, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 61"><span class="mpre">(Monad m, Eq a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_615_1_615_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_1_615_8&#39;)"><span class="hl_fundecl"><span class="mpre">notElem</span></span></a><span class="mpre"> </span><a name="loc_615_9_615_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_9_615_10&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="#loc_584_1_584_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_584_1_584_4&#39;)"><span class="hl_varref"><span class="mpre">all</span></span></a><span class="mpre"> (</span><a href="#loc_615_9_615_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_615_9_615_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE notElem #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Find the first element of a &#39;Producer&#39; that satisfies the predicate</span></span><span class="mpre">
</span><a href="#loc_620_1_620_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_1_620_5&#39;)"><span class="mpre">find</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 619, srcSpanStartColumn = 9, srcSpanEndLine = 619, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 619, srcSpanStartColumn = 17, srcSpanEndLine = 619, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_620_1_620_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_1_620_5&#39;)"><span class="hl_fundecl"><span class="mpre">find</span></span></a><span class="mpre"> </span><a name="loc_620_6_620_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_6_620_15&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_620_16_620_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_16_620_17&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_632_1_632_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_1_632_5&#39;)"><span class="hl_varref"><span class="mpre">head</span></span></a><span class="mpre"> (</span><a href="#loc_620_16_620_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_16_620_17&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="#loc_341_1_341_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_7&#39;)"><span class="hl_varref"><span class="mpre">filter</span></span></a><span class="mpre"> </span><a href="#loc_620_6_620_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_620_6_620_15&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE find #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Find the index of the first element of a &#39;Producer&#39; that satisfies the
    predicate
-}</span></span><span class="mpre">
</span><a href="#loc_627_1_627_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_10&#39;)"><span class="mpre">findIndex</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 626, srcSpanStartColumn = 14, srcSpanEndLine = 626, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 626, srcSpanStartColumn = 22, srcSpanEndLine = 626, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">)
</span><a name="loc_627_1_627_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_1_627_10&#39;)"><span class="hl_fundecl"><span class="mpre">findIndex</span></span></a><span class="mpre"> </span><a name="loc_627_11_627_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_11_627_20&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_627_21_627_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_21_627_22&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_632_1_632_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_1_632_5&#39;)"><span class="hl_varref"><span class="mpre">head</span></span></a><span class="mpre"> (</span><a href="#loc_627_21_627_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_21_627_22&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="#loc_451_1_451_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_451_1_451_12&#39;)"><span class="hl_varref"><span class="mpre">findIndices</span></span></a><span class="mpre"> </span><a href="#loc_627_11_627_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_627_11_627_20&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE findIndex #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Retrieve the first element from a &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_632_1_632_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_1_632_5&#39;)"><span class="mpre">head</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 631, srcSpanStartColumn = 9, srcSpanEndLine = 631, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 631, srcSpanStartColumn = 17, srcSpanEndLine = 631, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_632_1_632_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_1_632_5&#39;)"><span class="hl_fundecl"><span class="mpre">head</span></span></a><span class="mpre"> </span><a name="loc_632_6_632_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_6_632_7&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
    </span><a name="loc_633_5_633_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_5_633_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_632_6_632_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_6_632_7&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><a href="#loc_633_5_633_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_5_633_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   _     -&gt; </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">
        </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_636_16_636_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_16_636_17&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, _) -&gt; </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_636_16_636_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_636_16_636_17&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE head #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Index into a &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_641_1_641_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_1_641_6&#39;)"><span class="mpre">index</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 640, srcSpanStartColumn = 10, srcSpanEndLine = 640, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 640, srcSpanStartColumn = 18, srcSpanEndLine = 640, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_641_1_641_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_1_641_6&#39;)"><span class="hl_fundecl"><span class="mpre">index</span></span></a><span class="mpre"> </span><a name="loc_641_7_641_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_7_641_8&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_641_9_641_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_9_641_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_632_1_632_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_1_632_5&#39;)"><span class="hl_varref"><span class="mpre">head</span></span></a><span class="mpre"> (</span><a href="#loc_641_9_641_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_9_641_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="#loc_411_1_411_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_411_1_411_5&#39;)"><span class="hl_varref"><span class="mpre">drop</span></span></a><span class="mpre"> </span><a href="#loc_641_7_641_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_641_7_641_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE index #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Retrieve the last element from a &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_646_1_646_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_646_1_646_5&#39;)"><span class="mpre">last</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 645, srcSpanStartColumn = 9, srcSpanEndLine = 645, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 645, srcSpanStartColumn = 17, srcSpanEndLine = 645, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_646_1_646_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_646_1_646_5&#39;)"><span class="hl_fundecl"><span class="mpre">last</span></span></a><span class="mpre"> </span><a name="loc_646_6_646_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_646_6_646_8&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = do
    </span><a name="loc_647_5_647_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_647_5_647_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_646_6_646_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_646_6_646_8&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">
    case </span><a href="#loc_647_5_647_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_647_5_647_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   _      -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">
        </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_650_16_650_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_650_16_650_17&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, </span><a name="loc_650_19_650_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_650_19_650_21&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_652_5_652_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_652_5_652_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_650_16_650_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_650_16_650_17&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_650_19_650_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_650_19_650_21&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
  where
    </span><a name="loc_652_5_652_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_652_5_652_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_652_10_652_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_652_10_652_11&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_652_12_652_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_652_12_652_13&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_653_9_653_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_9_653_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_652_12_652_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_652_12_652_13&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
        case </span><a href="#loc_653_9_653_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_9_653_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   _       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_652_10_652_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_652_10_652_11&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_656_20_656_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_20_656_22&#39;)"><span class="hl_vardecl"><span class="mpre">a&#39;</span></span></a><span class="mpre">, </span><a name="loc_656_24_656_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_24_656_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_652_5_652_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_652_5_652_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a href="#loc_656_20_656_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_20_656_22&#39;)"><span class="hl_varref"><span class="mpre">a&#39;</span></span></a><span class="mpre"> </span><a href="#loc_656_24_656_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_24_656_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE last #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Count the number of elements in a &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_661_1_661_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_1_661_7&#39;)"><span class="mpre">length</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 660, srcSpanStartColumn = 11, srcSpanEndLine = 660, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 660, srcSpanStartColumn = 19, srcSpanEndLine = 660, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre">
</span><a name="loc_661_1_661_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_1_661_7&#39;)"><span class="hl_vardecl"><span class="mpre">length</span></span></a><span class="mpre"> = </span><a href="#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">fold</span></span></a><span class="mpre"> (\</span><a name="loc_661_17_661_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_17_661_18&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> _ -&gt; </span><a href="#loc_661_17_661_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_661_17_661_18&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre">) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE length #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Find the maximum element of a &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_666_1_666_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_1_666_8&#39;)"><span class="mpre">maximum</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 665, srcSpanStartColumn = 12, srcSpanEndLine = 665, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 665, srcSpanStartColumn = 12, srcSpanEndLine = 665, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 66"><span class="mpre">(Monad m, Ord a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_666_1_666_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_666_1_666_8&#39;)"><span class="hl_vardecl"><span class="mpre">maximum</span></span></a><span class="mpre"> = </span><a href="#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">fold</span></span></a><span class="mpre"> </span><a href="#loc_668_5_668_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_5_668_9&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
  where
    </span><a name="loc_668_5_668_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_5_668_9&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_668_10_668_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_10_668_11&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_668_12_668_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_12_668_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><a href="#loc_668_10_668_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_10_668_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_668_12_668_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_12_668_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
        </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_670_14_670_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_670_14_670_16&#39;)"><span class="hl_vardecl"><span class="mpre">a&#39;</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">max</span></span><span class="mpre"> </span><a href="#loc_668_12_668_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_668_12_668_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_670_14_670_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_670_14_670_16&#39;)"><span class="hl_varref"><span class="mpre">a&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE maximum #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Find the minimum element of a &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_675_1_675_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_675_1_675_8&#39;)"><span class="mpre">minimum</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 674, srcSpanStartColumn = 12, srcSpanEndLine = 674, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 674, srcSpanStartColumn = 12, srcSpanEndLine = 674, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 67"><span class="mpre">(Monad m, Ord a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_675_1_675_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_675_1_675_8&#39;)"><span class="hl_vardecl"><span class="mpre">minimum</span></span></a><span class="mpre"> = </span><a href="#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">fold</span></span></a><span class="mpre"> </span><a href="#loc_677_5_677_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_5_677_9&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
  where
    </span><a name="loc_677_5_677_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_5_677_9&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_677_10_677_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_10_677_11&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_677_12_677_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_12_677_13&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><a href="#loc_677_10_677_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_10_677_11&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_677_12_677_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_12_677_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
        </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_679_14_679_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_14_679_16&#39;)"><span class="hl_vardecl"><span class="mpre">a&#39;</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">min</span></span><span class="mpre"> </span><a href="#loc_677_12_677_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_677_12_677_13&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_679_14_679_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_14_679_16&#39;)"><span class="hl_varref"><span class="mpre">a&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE minimum #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Determine if a &#39;Producer&#39; is empty</span></span><span class="mpre">
</span><a href="#loc_684_1_684_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_1_684_5&#39;)"><span class="mpre">null</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 683, srcSpanStartColumn = 9, srcSpanEndLine = 683, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 683, srcSpanStartColumn = 17, srcSpanEndLine = 683, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_684_1_684_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_1_684_5&#39;)"><span class="hl_fundecl"><span class="mpre">null</span></span></a><span class="mpre"> </span><a name="loc_684_6_684_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_6_684_7&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
    </span><a name="loc_685_5_685_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_5_685_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_684_6_684_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_6_684_7&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><a href="#loc_685_5_685_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_685_5_685_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">  _ -&gt; </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
        </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> _ -&gt; </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE null #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Compute the sum of the elements of a &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_693_1_693_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_4&#39;)"><span class="mpre">sum</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 692, srcSpanStartColumn = 8, srcSpanEndLine = 692, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 692, srcSpanStartColumn = 8, srcSpanEndLine = 692, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 692, "><span class="mpre">(Monad m, Num a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_693_1_693_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_693_1_693_4&#39;)"><span class="hl_vardecl"><span class="mpre">sum</span></span></a><span class="mpre"> = </span><a href="#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">fold</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">(+)</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE sum #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Compute the product of the elements of a &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_698_1_698_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_1_698_8&#39;)"><span class="mpre">product</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 697, srcSpanStartColumn = 12, srcSpanEndLine = 697, srcSpanEndColumn = 31}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 697, srcSpanStartColumn = 12, srcSpanEndLine = 697, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 69"><span class="mpre">(Monad m, Num a) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_698_1_698_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_1_698_8&#39;)"><span class="hl_vardecl"><span class="mpre">product</span></span></a><span class="mpre"> = </span><a href="#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">fold</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">(*)</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">1</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE product #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a pure &#39;Producer&#39; into a list</span></span><span class="mpre">
</span><a href="#loc_703_1_703_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_703_1_703_7&#39;)"><span class="mpre">toList</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><a href="Data.Functor.Identity.html#loc_35_9_35_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_9_35_17&#39;)"><span class="hl_tyconref"><span class="mpre">Identity</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_703_1_703_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_703_1_703_7&#39;)"><span class="hl_vardecl"><span class="mpre">toList</span></span></a><span class="mpre"> = </span><a href="#loc_705_5_705_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_705_5_705_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
  where
    </span><a name="loc_705_5_705_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_705_5_705_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_705_10_705_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_705_10_705_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = case </span><a href="#loc_705_10_705_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_705_10_705_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> of
        </span><a href="Pipes.Internal.html#loc_66_7_66_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_66_7_66_14&#39;)"><span class="hl_conref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><a name="loc_706_17_706_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_706_17_706_18&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> _  -&gt; </span><a href="Pipes.Internal.html#loc_259_1_259_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_259_1_259_7&#39;)"><span class="hl_varref"><span class="mpre">closed</span></span></a><span class="mpre"> </span><a href="#loc_706_17_706_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_706_17_706_18&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_67_7_67_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_67_7_67_14&#39;)"><span class="hl_conref"><span class="mpre">Respond</span></span></a><span class="mpre"> </span><a name="loc_707_17_707_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_707_17_707_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_707_19_707_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_707_19_707_21&#39;)"><span class="hl_vardecl"><span class="mpre">fu</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_707_17_707_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_707_17_707_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_705_5_705_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_705_5_705_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_707_19_707_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_707_19_707_21&#39;)"><span class="hl_varref"><span class="mpre">fu</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)
        </span><a href="Pipes.Internal.html#loc_68_7_68_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_68_7_68_8&#39;)"><span class="hl_conref"><span class="mpre">M</span></span></a><span class="mpre">         </span><a name="loc_708_19_708_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_708_19_708_20&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">  -&gt; </span><a href="#loc_705_5_705_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_705_5_705_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre"> </span><a href="#loc_708_19_708_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_708_19_708_20&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre">)
        </span><a href="Pipes.Internal.html#loc_69_7_69_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_69_7_69_11&#39;)"><span class="hl_conref"><span class="mpre">Pure</span></span></a><span class="mpre">    _    -&gt; []
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE toList #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Convert an effectful &#39;Producer&#39; into a list

    Note: &#39;toListM&#39; is not an idiomatic use of @pipes@, but I provide it for
    simple testing purposes.  Idiomatic @pipes@ style consumes the elements
    immediately as they are generated instead of loading all elements into
    memory.
-}</span></span><span class="mpre">
</span><a href="#loc_720_1_720_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_720_1_720_8&#39;)"><span class="mpre">toListM</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 719, srcSpanStartColumn = 12, srcSpanEndLine = 719, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 719, srcSpanStartColumn = 20, srcSpanEndLine = 719, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_720_1_720_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_720_1_720_8&#39;)"><span class="hl_vardecl"><span class="mpre">toListM</span></span></a><span class="mpre"> = </span><a href="#loc_722_5_722_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_722_5_722_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
  where
    </span><a name="loc_722_5_722_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_722_5_722_9&#39;)"><span class="hl_fundecl"><span class="mpre">loop</span></span></a><span class="mpre"> </span><a name="loc_722_10_722_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_722_10_722_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = case </span><a href="#loc_722_10_722_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_722_10_722_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> of
        </span><a href="Pipes.Internal.html#loc_66_7_66_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_66_7_66_14&#39;)"><span class="hl_conref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><a name="loc_723_17_723_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_723_17_723_18&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> _  -&gt; </span><a href="Pipes.Internal.html#loc_259_1_259_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_259_1_259_7&#39;)"><span class="hl_varref"><span class="mpre">closed</span></span></a><span class="mpre"> </span><a href="#loc_723_17_723_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_723_17_723_18&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_67_7_67_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_67_7_67_14&#39;)"><span class="hl_conref"><span class="mpre">Respond</span></span></a><span class="mpre"> </span><a name="loc_724_17_724_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_17_724_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_724_19_724_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_19_724_21&#39;)"><span class="hl_vardecl"><span class="mpre">fu</span></span></a><span class="mpre"> -&gt; do
            </span><a name="loc_725_13_725_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_725_13_725_15&#39;)"><span class="hl_vardecl"><span class="mpre">as</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_722_5_722_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_722_5_722_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre"> (</span><a href="#loc_724_19_724_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_19_724_21&#39;)"><span class="hl_varref"><span class="mpre">fu</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_724_17_724_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_17_724_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_725_13_725_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_725_13_725_15&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre">)
        </span><a href="Pipes.Internal.html#loc_68_7_68_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_68_7_68_8&#39;)"><span class="hl_conref"><span class="mpre">M</span></span></a><span class="mpre">         </span><a name="loc_727_19_727_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_727_19_727_20&#39;)"><span class="hl_vardecl"><span class="mpre">m</span></span></a><span class="mpre">  -&gt; </span><a href="#loc_727_19_727_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_727_19_727_20&#39;)"><span class="hl_varref"><span class="mpre">m</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><a href="#loc_722_5_722_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_722_5_722_9&#39;)"><span class="hl_varref"><span class="mpre">loop</span></span></a><span class="mpre">
        </span><a href="Pipes.Internal.html#loc_69_7_69_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_69_7_69_11&#39;)"><span class="hl_conref"><span class="mpre">Pure</span></span></a><span class="mpre">    _    -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> []
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE toListM #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Zip two &#39;Producer&#39;s</span></span><span class="mpre">
</span><a href="#loc_736_1_736_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_736_1_736_4&#39;)"><span class="mpre">zip</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 732, srcSpanStartColumn = 8, srcSpanEndLine = 733, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 733, srcSpanStartColumn = 5, srcSpanEndLine = 733, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipe"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre">   </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">     </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">)
    -&gt; (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre">      </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">  </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">)
    -&gt; (</span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">)
</span><a name="loc_736_1_736_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_736_1_736_4&#39;)"><span class="hl_vardecl"><span class="mpre">zip</span></span></a><span class="mpre"> = </span><a href="#loc_745_1_745_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_745_1_745_8&#39;)"><span class="hl_varref"><span class="mpre">zipWith</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">(,)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE zip #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Zip two &#39;Producer&#39;s using the provided combining function</span></span><span class="mpre">
</span><a href="#loc_745_1_745_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_745_1_745_8&#39;)"><span class="mpre">zipWith</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 740, srcSpanStartColumn = 12, srcSpanEndLine = 741, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 741, srcSpanStartColumn = 5, srcSpanEndLine = 741, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pip"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">)
    -&gt; (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre">  </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">)
    -&gt; (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre">  </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">)
    -&gt; (</span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">)
</span><a name="loc_745_1_745_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_745_1_745_8&#39;)"><span class="hl_fundecl"><span class="mpre">zipWith</span></span></a><span class="mpre"> </span><a name="loc_745_9_745_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_745_9_745_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_747_5_747_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_5_747_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_747_5_747_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_5_747_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_747_8_747_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_8_747_10&#39;)"><span class="hl_vardecl"><span class="mpre">p1</span></span></a><span class="mpre"> </span><a name="loc_747_11_747_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_11_747_13&#39;)"><span class="hl_vardecl"><span class="mpre">p2</span></span></a><span class="mpre"> = do
        </span><a name="loc_748_9_748_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_748_9_748_11&#39;)"><span class="hl_vardecl"><span class="mpre">e1</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_747_8_747_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_8_747_10&#39;)"><span class="hl_varref"><span class="mpre">p1</span></span></a><span class="mpre">
        case </span><a href="#loc_748_9_748_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_748_9_748_11&#39;)"><span class="hl_varref"><span class="mpre">e1</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_750_18_750_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_18_750_19&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">         -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_750_18_750_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_750_18_750_19&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_751_20_751_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_751_20_751_21&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">, </span><a name="loc_751_23_751_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_751_23_751_26&#39;)"><span class="hl_vardecl"><span class="mpre">p1&#39;</span></span></a><span class="mpre">) -&gt; do
                </span><a name="loc_752_17_752_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_752_17_752_19&#39;)"><span class="hl_vardecl"><span class="mpre">e2</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_747_11_747_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_11_747_13&#39;)"><span class="hl_varref"><span class="mpre">p2</span></span></a><span class="mpre">
                case </span><a href="#loc_752_17_752_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_752_17_752_19&#39;)"><span class="hl_varref"><span class="mpre">e2</span></span></a><span class="mpre"> of
                    </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_754_26_754_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_754_26_754_27&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">         -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_754_26_754_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_754_26_754_27&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
                    </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_755_28_755_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_755_28_755_29&#39;)"><span class="hl_vardecl"><span class="mpre">b</span></span></a><span class="mpre">, </span><a name="loc_755_31_755_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_755_31_755_34&#39;)"><span class="hl_vardecl"><span class="mpre">p2&#39;</span></span></a><span class="mpre">) -&gt; do
                        </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><a href="#loc_745_9_745_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_745_9_745_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_751_20_751_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_751_20_751_21&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="#loc_755_28_755_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_755_28_755_29&#39;)"><span class="hl_varref"><span class="mpre">b</span></span></a><span class="mpre">)
                        </span><a href="#loc_747_5_747_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_747_5_747_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_751_23_751_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_751_23_751_26&#39;)"><span class="hl_varref"><span class="mpre">p1&#39;</span></span></a><span class="mpre"> </span><a href="#loc_755_31_755_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_755_31_755_34&#39;)"><span class="hl_varref"><span class="mpre">p2&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE zipWith #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Transform a &#39;Consumer&#39; to a &#39;Pipe&#39; that reforwards all values further
    downstream
-}</span></span><span class="mpre">
</span><a href="#loc_764_1_764_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_764_1_764_4&#39;)"><span class="mpre">tee</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 763, srcSpanStartColumn = 8, srcSpanEndLine = 763, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 763, srcSpanStartColumn = 16, srcSpanEndLine = 763, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/P"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Consumer</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_764_1_764_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_764_1_764_4&#39;)"><span class="hl_fundecl"><span class="mpre">tee</span></span></a><span class="mpre"> </span><a name="loc_764_5_764_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_764_5_764_6&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Pipes.Lift.html#loc_192_1_192_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Lift.html#loc_192_1_192_11&#39;)"><span class="hl_varref"><span class="mpre">evalStateP</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    </span><a name="loc_765_5_765_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_765_5_765_6&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_772_5_772_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_5_772_7&#39;)"><span class="hl_varref"><span class="mpre">up</span></span></a><span class="mpre"> </span><a href="Pipes.Core.html#loc_410_5_410_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_410_5_410_8&#39;)"><span class="hl_infix"><span class="mpre">&gt;\\</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Morph.html#loc_111_5_111_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Morph.html#loc_111_5_111_10&#39;)"><span class="hl_varref"><span class="mpre">hoist</span></span></a><span class="mpre"> </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="#loc_764_5_764_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_764_5_764_6&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.Core.html#loc_297_4_297_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_297_4_297_7&#39;)"><span class="hl_infix"><span class="mpre">//&gt;</span></span></a><span class="mpre"> </span><a href="#loc_780_5_780_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_780_5_780_7&#39;)"><span class="hl_varref"><span class="mpre">dn</span></span></a><span class="mpre">)
    </span><a name="loc_766_5_766_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_766_5_766_7&#39;)"><span class="hl_vardecl"><span class="mpre">ma</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="Control.Monad.Trans.State.Strict.html#loc_209_1_209_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_209_1_209_4&#39;)"><span class="hl_varref"><span class="mpre">get</span></span></a><span class="mpre">
    case </span><a href="#loc_766_5_766_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_766_5_766_7&#39;)"><span class="hl_varref"><span class="mpre">ma</span></span></a><span class="mpre"> of
        </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
        </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_769_14_769_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_14_769_15&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">  -&gt; </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_769_14_769_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_14_769_15&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_765_5_765_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_765_5_765_6&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
  where
    </span><a name="loc_772_5_772_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_772_5_772_7&#39;)"><span class="hl_fundecl"><span class="mpre">up</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> = do
        </span><a name="loc_773_9_773_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_773_9_773_11&#39;)"><span class="hl_vardecl"><span class="mpre">ma</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="Control.Monad.Trans.State.Strict.html#loc_209_1_209_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_209_1_209_4&#39;)"><span class="hl_varref"><span class="mpre">get</span></span></a><span class="mpre">
        case </span><a href="#loc_773_9_773_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_773_9_773_11&#39;)"><span class="hl_varref"><span class="mpre">ma</span></span></a><span class="mpre"> of
            </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_776_18_776_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_776_18_776_19&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">  -&gt; </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_776_18_776_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_776_18_776_19&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
        </span><a name="loc_777_9_777_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_777_9_777_10&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.Trans.State.Strict.html#loc_213_1_213_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_213_1_213_4&#39;)"><span class="hl_varref"><span class="mpre">put</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_777_9_777_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_777_9_777_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_777_9_777_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_777_9_777_10&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
    </span><a name="loc_780_5_780_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_780_5_780_7&#39;)"><span class="hl_fundecl"><span class="mpre">dn</span></span></a><span class="mpre"> </span><a name="loc_780_8_780_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_780_8_780_9&#39;)"><span class="hl_vardecl"><span class="mpre">v</span></span></a><span class="mpre"> = </span><a href="Pipes.Internal.html#loc_259_1_259_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_259_1_259_7&#39;)"><span class="hl_varref"><span class="mpre">closed</span></span></a><span class="mpre"> </span><a href="#loc_780_8_780_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_780_8_780_9&#39;)"><span class="hl_varref"><span class="mpre">v</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE tee #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Transform a unidirectional &#39;Pipe&#39; to a bidirectional &#39;Proxy&#39;

&gt; generalize (f &gt;-&gt; g) = generalize f &gt;+&gt; generalize g
&gt;
&gt; generalize cat = pull
-}</span></span><span class="mpre">
</span><a href="#loc_790_1_790_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_1_790_11&#39;)"><span class="mpre">generalize</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 789, srcSpanStartColumn = 15, srcSpanEndLine = 789, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/Pipes/Prelude.hs&quot;, srcSpanStartLine = 789, srcSpanStartColumn = 23, srcSpanEndLine = 789, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-4.1.2/src/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><a href="Pipes.Internal.html#loc_65_6_65_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Internal.html#loc_65_6_65_11&#39;)"><span class="hl_tyconref"><span class="mpre">Proxy</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_790_1_790_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_1_790_11&#39;)"><span class="hl_fundecl"><span class="mpre">generalize</span></span></a><span class="mpre"> </span><a name="loc_790_12_790_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_12_790_13&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_790_14_790_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_14_790_16&#39;)"><span class="hl_vardecl"><span class="mpre">x0</span></span></a><span class="mpre"> = </span><a href="Pipes.Lift.html#loc_192_1_192_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Lift.html#loc_192_1_192_11&#39;)"><span class="hl_varref"><span class="mpre">evalStateP</span></span></a><span class="mpre"> </span><a href="#loc_790_14_790_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_14_790_16&#39;)"><span class="hl_varref"><span class="mpre">x0</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_792_5_792_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_792_5_792_7&#39;)"><span class="hl_varref"><span class="mpre">up</span></span></a><span class="mpre"> </span><a href="Pipes.Core.html#loc_410_5_410_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_410_5_410_8&#39;)"><span class="hl_infix"><span class="mpre">&gt;\\</span></span></a><span class="mpre"> </span><a href="Control.Monad.Morph.html#loc_111_5_111_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Morph.html#loc_111_5_111_10&#39;)"><span class="hl_varref"><span class="mpre">hoist</span></span></a><span class="mpre"> </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="#loc_790_12_790_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_790_12_790_13&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.Core.html#loc_297_4_297_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_297_4_297_7&#39;)"><span class="hl_infix"><span class="mpre">//&gt;</span></span></a><span class="mpre"> </span><a href="#loc_795_5_795_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_795_5_795_7&#39;)"><span class="hl_varref"><span class="mpre">dn</span></span></a><span class="mpre">
  where
    </span><a name="loc_792_5_792_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_792_5_792_7&#39;)"><span class="hl_fundecl"><span class="mpre">up</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> = do
        </span><a name="loc_793_9_793_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_793_9_793_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><a href="Control.Monad.Trans.State.Strict.html#loc_209_1_209_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_209_1_209_4&#39;)"><span class="hl_varref"><span class="mpre">get</span></span></a><span class="mpre">
        </span><a href="Pipes.Core.html#loc_376_1_376_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_376_1_376_8&#39;)"><span class="hl_varref"><span class="mpre">request</span></span></a><span class="mpre"> </span><a href="#loc_793_9_793_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_793_9_793_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
    </span><a name="loc_795_5_795_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_795_5_795_7&#39;)"><span class="hl_fundecl"><span class="mpre">dn</span></span></a><span class="mpre"> </span><a name="loc_795_8_795_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_795_8_795_9&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> = do
        </span><a name="loc_796_9_796_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_796_9_796_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.Core.html#loc_263_1_263_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_263_1_263_8&#39;)"><span class="hl_varref"><span class="mpre">respond</span></span></a><span class="mpre"> </span><a href="#loc_795_8_795_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_795_8_795_9&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
        </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.Trans.State.Strict.html#loc_213_1_213_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_213_1_213_4&#39;)"><span class="hl_varref"><span class="mpre">put</span></span></a><span class="mpre"> </span><a href="#loc_796_9_796_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_796_9_796_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE generalize #-}</span></span><span class="mpre">
</span></div></body></html>