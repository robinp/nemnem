<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE Rank2Types #-}
{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE MultiParamTypeClasses #-}
#ifdef TRUSTWORTHY
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Lens.Action</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2012-14 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Lens.Action
  (
  </span><span class="hl_comment"><span class="mpre">-- * Composable Actions</span></span><span class="mpre">
    Action
  , act
  , acts
  , perform
  , performs
  , liftAct
  , (^!)
  , (^!!)
  , (^!?)

  </span><span class="hl_comment"><span class="mpre">-- * Indexed Actions</span></span><span class="mpre">
  , IndexedAction
  , iact
  , iperform
  , iperforms
  , (^@!)
  , (^@!!)
  , (^@!?)

  </span><span class="hl_comment"><span class="mpre">-- * Folds with Effects</span></span><span class="mpre">
  , MonadicFold
  , IndexedMonadicFold

  </span><span class="hl_comment"><span class="mpre">-- * Implementation Details</span></span><span class="mpre">
  , Acting
  , IndexedActing
  , Effective
  ) where

import Control.Comonad
import Control.Lens.Internal.Action
import Control.Lens.Internal.Fold
import Control.Lens.Internal.Indexed
import Control.Lens.Type
import Control.Monad (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="mpre">liftM</span></a><span class="mpre">)
import Control.Monad.Trans.Class
import Data.Profunctor
import Data.Profunctor.Rep
import Data.Profunctor.Unsafe

</span><span class="hl_comment"><span class="mpre">-- $setup</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; :set -XNoOverloadedStrings</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Control.Lens</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclInfixDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 1, srcSpanEndLine = 65, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 65, srcSpanStartColumn = 8, srcSpanEndLine = 65, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine "><span class="mpre">infixr 8 ^!, ^!!, ^@!, ^@!!, ^!?, ^@!?</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Used to evaluate an &#39;Action&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 1, srcSpanEndLine = 68, srcSpanEndColumn = 52}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 68, srcSpanStartColumn = 1, srcSpanEndLine = 68, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine ="><span class="mpre">type Acting m r s a = LensLike (Effect m r) s s a a</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform an &#39;Action&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;perform&#39; â‰¡ &#39;flip&#39; (&#39;^!&#39;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_76_1_76_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_8&#39;)"><span class="mpre">perform</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 75, srcSpanStartColumn = 12, srcSpanEndLine = 75, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 75, srcSpanStartColumn = 20, srcSpanEndLine = 75, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/C"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Acting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_76_1_76_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_8&#39;)"><span class="hl_fundecl"><span class="mpre">perform</span></span></a><span class="mpre"> </span><a name="loc_76_9_76_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_9_76_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_76_9_76_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_9_76_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_76_1_76_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_8&#39;)"><span class="mpre">perform</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform an &#39;Action&#39; and modify the result.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;performs&#39; :: &#39;Monad&#39; m =&gt; &#39;Acting&#39; m e s a -&gt; (a -&gt; e) -&gt; s -&gt; m e</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_85_1_85_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_9&#39;)"><span class="mpre">performs</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 84, srcSpanStartColumn = 13, srcSpanEndLine = 84, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 84, srcSpanStartColumn = 13, srcSpanEndLine = 84, srcSpanEndColumn = 14},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine"><span class="mpre">(Profunctor p, Monad m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Over</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Action.html#loc_65_9_65_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_9_65_15&#39;)"><span class="hl_tyconref"><span class="mpre">Effect</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre">
</span><a name="loc_85_1_85_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_9&#39;)"><span class="hl_fundecl"><span class="mpre">performs</span></span></a><span class="mpre"> </span><a name="loc_85_10_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_10_85_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> </span><a name="loc_85_12_85_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_12_85_13&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_85_10_85_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_10_85_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><a href="Data.Profunctor.Unsafe.html#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_101_3_101_7&#39;)"><span class="hl_varref"><span class="mpre">rmap</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">) </span><a href="#loc_85_12_85_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_12_85_13&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_85_1_85_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_9&#39;)"><span class="mpre">performs</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform an &#39;Action&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [&quot;hello&quot;,&quot;world&quot;]^!folded.act putStrLn</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- hello</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- world</span></span><span class="mpre">
</span><a href="#loc_94_3_94_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_5&#39;)"><span class="mpre">(^!)</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 9, srcSpanEndLine = 93, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 93, srcSpanStartColumn = 17, srcSpanEndLine = 93, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Co"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Acting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_94_1_94_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_1_94_2&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_94_3_94_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_5&#39;)"><span class="hl_fundecl"><span class="mpre">^!</span></span></a><span class="mpre"> </span><a name="loc_94_6_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_6_94_7&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> (</span><a href="#loc_94_6_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_6_94_7&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">) </span><a href="#loc_94_1_94_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_1_94_2&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_94_3_94_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_5&#39;)"><span class="mpre">(^!)</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform a &#39;MonadicFold&#39; and collect all of the results in a list.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [&quot;ab&quot;,&quot;cd&quot;,&quot;ef&quot;]^!!folded.acts</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [&quot;ace&quot;,&quot;acf&quot;,&quot;ade&quot;,&quot;adf&quot;,&quot;bce&quot;,&quot;bcf&quot;,&quot;bde&quot;,&quot;bdf&quot;]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [1,2]^!!folded.act (\i -&gt; putStr (show i ++ &quot;: &quot;) &gt;&gt; getLine).each.to succ</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 1: aa</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 2: bb</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;bbcc&quot;</span></span><span class="mpre">
</span><a href="#loc_107_3_107_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_3_107_6&#39;)"><span class="mpre">(^!!)</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 106, srcSpanStartColumn = 10, srcSpanEndLine = 106, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 106, srcSpanStartColumn = 18, srcSpanEndLine = 106, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Acting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">] </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> [</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">]
</span><a name="loc_107_1_107_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_1_107_2&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_107_3_107_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_3_107_6&#39;)"><span class="hl_fundecl"><span class="mpre">^!!</span></span></a><span class="mpre"> </span><a name="loc_107_7_107_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_7_107_8&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> (</span><a href="#loc_107_7_107_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_7_107_8&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">) </span><a href="#loc_107_1_107_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_1_107_2&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_107_3_107_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_3_107_6&#39;)"><span class="mpre">(^!!)</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform a &#39;MonadicFold&#39; and collect the leftmost result.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Note:/ this still causes all effects for all elements.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [Just 1, Just 2, Just 3]^!?folded.acts</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Just (Just 1)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [Just 1, Nothing]^!?folded.acts</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Nothing</span></span><span class="mpre">
</span><a href="#loc_119_3_119_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_3_119_6&#39;)"><span class="mpre">(^!?)</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 118, srcSpanStartColumn = 10, srcSpanEndLine = 118, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 118, srcSpanStartColumn = 18, srcSpanEndLine = 118, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Acting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Fold.html#loc_156_6_156_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Fold.html#loc_156_6_156_14&#39;)"><span class="hl_tyconref"><span class="mpre">Leftmost</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_119_1_119_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_2&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_119_3_119_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_3_119_6&#39;)"><span class="hl_fundecl"><span class="mpre">^!?</span></span></a><span class="mpre">  </span><a name="loc_119_8_119_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_8_119_9&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Fold.html#loc_180_1_180_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Fold.html#loc_180_1_180_12&#39;)"><span class="hl_varref"><span class="mpre">getLeftmost</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_119_8_119_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_8_119_9&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Lens.Internal.Fold.html#loc_156_27_156_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Fold.html#loc_156_27_156_32&#39;)"><span class="hl_conref"><span class="mpre">LLeaf</span></span></a><span class="mpre">) </span><a href="#loc_119_1_119_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_1_119_2&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_119_3_119_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_119_3_119_6&#39;)"><span class="mpre">(^!?)</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct an &#39;Action&#39; from a monadic side-effect.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; [&quot;hello&quot;,&quot;world&quot;]^!folded.act (\x -&gt; [x,x ++ &quot;!&quot;])</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- [&quot;helloworld&quot;,&quot;helloworld!&quot;,&quot;hello!world&quot;,&quot;hello!world!&quot;]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;act&#39; :: &#39;Monad&#39; m =&gt; (s -&gt; m a) -&gt; &#39;Action&#39; m s a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;act&#39; sma afb a = &#39;effective&#39; (sma a &#39;&gt;&gt;=&#39; &#39;ineffective&#39; &#39;.&#39; afb)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_132_1_132_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_4&#39;)"><span class="mpre">act</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 8, srcSpanEndLine = 131, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 16, srcSpanEndLine = 131, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/sr"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexPreservingAction</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_132_1_132_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_4&#39;)"><span class="hl_fundecl"><span class="mpre">act</span></span></a><span class="mpre"> </span><a name="loc_132_5_132_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_5_132_8&#39;)"><span class="hl_vardecl"><span class="mpre">sma</span></span></a><span class="mpre"> </span><a name="loc_132_9_132_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_9_132_13&#39;)"><span class="hl_vardecl"><span class="mpre">pafb</span></span></a><span class="mpre"> = </span><a href="Data.Profunctor.Rep.html#loc_83_3_83_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_83_3_83_13&#39;)"><span class="hl_varref"><span class="mpre">cotabulate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_132_30_132_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_30_132_32&#39;)"><span class="hl_vardecl"><span class="mpre">ws</span></span></a><span class="mpre"> -&gt; </span><a href="Control.Lens.Internal.Action.html#loc_45_3_45_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_45_3_45_12&#39;)"><span class="hl_varref"><span class="mpre">effective</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
   </span><a name="loc_133_4_133_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_4_133_5&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_132_5_132_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_5_132_8&#39;)"><span class="hl_varref"><span class="mpre">sma</span></span></a><span class="mpre"> (</span><a href="Control.Comonad.html#loc_125_3_125_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_125_3_125_10&#39;)"><span class="hl_varref"><span class="mpre">extract</span></span></a><span class="mpre"> </span><a href="#loc_132_30_132_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_30_132_32&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">)
   </span><a href="Control.Lens.Internal.Action.html#loc_46_3_46_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_46_3_46_14&#39;)"><span class="hl_varref"><span class="mpre">ineffective</span></span></a><span class="mpre"> (</span><a href="Data.Profunctor.Rep.html#loc_84_3_84_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Rep.html#loc_84_3_84_8&#39;)"><span class="hl_varref"><span class="mpre">corep</span></span></a><span class="mpre"> </span><a href="#loc_132_9_132_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_9_132_13&#39;)"><span class="hl_varref"><span class="mpre">pafb</span></span></a><span class="mpre"> (</span><a href="#loc_133_4_133_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_133_4_133_5&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;$</span></span><span class="mpre"> </span><a href="#loc_132_30_132_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_30_132_32&#39;)"><span class="hl_varref"><span class="mpre">ws</span></span></a><span class="mpre">))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_132_1_132_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_4&#39;)"><span class="mpre">act</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A self-running &#39;Action&#39;, analogous to &#39;Control.Monad.join&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;acts&#39; â‰¡ &#39;act&#39; &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; (1,&quot;hello&quot;)^!_2.acts.to succ</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;ifmmp&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (1,getLine)^!!_2.acts.folded.to succ</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- aa</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;bb&quot;</span></span><span class="mpre">
</span><a href="#loc_150_1_150_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_1_150_5&#39;)"><span class="mpre">acts</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IndexPreservingAction</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_150_1_150_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_1_150_5&#39;)"><span class="hl_vardecl"><span class="mpre">acts</span></span></a><span class="mpre"> = </span><a href="#loc_132_1_132_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_4&#39;)"><span class="hl_varref"><span class="mpre">act</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_150_1_150_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_1_150_5&#39;)"><span class="mpre">acts</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Apply a &#39;Monad&#39; transformer to an &#39;Action&#39;.</span></span><span class="mpre">
</span><a href="#loc_155_1_155_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_1_155_8&#39;)"><span class="mpre">liftAct</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 154, srcSpanStartColumn = 12, srcSpanEndLine = 154, srcSpanEndColumn = 42}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 154, srcSpanStartColumn = 12, srcSpanEndLine = 154, srcSpanEndColumn = 13},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStart"><span class="mpre">(MonadTrans trans, Monad m) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Acting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexPreservingAction</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">trans</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_155_1_155_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_1_155_8&#39;)"><span class="hl_fundecl"><span class="mpre">liftAct</span></span></a><span class="mpre"> </span><a name="loc_155_9_155_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_9_155_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_132_1_132_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_132_1_132_4&#39;)"><span class="hl_varref"><span class="mpre">act</span></span></a><span class="mpre"> (</span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_76_1_76_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_76_1_76_8&#39;)"><span class="hl_varref"><span class="mpre">perform</span></span></a><span class="mpre"> </span><a href="#loc_155_9_155_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_9_155_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_155_1_155_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_155_1_155_8&#39;)"><span class="mpre">liftAct</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Indexed Actions</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Used to evaluate an &#39;IndexedAction&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 163, srcSpanStartColumn = 1, srcSpanEndLine = 163, srcSpanEndColumn = 69}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 163, srcSpanStartColumn = 1, srcSpanEndLine = 163, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLi"><span class="mpre">type IndexedActing i m r s a = Over (Indexed i) (Effect m r) s s a a</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform an &#39;IndexedAction&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;iperform&#39; â‰¡ &#39;flip&#39; (&#39;^@!&#39;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_171_1_171_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_1_171_9&#39;)"><span class="mpre">iperform</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 170, srcSpanStartColumn = 13, srcSpanEndLine = 170, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 170, srcSpanStartColumn = 21, srcSpanEndLine = 170, srcSpanEndColumn = 23}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedActing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_171_1_171_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_1_171_9&#39;)"><span class="hl_fundecl"><span class="mpre">iperform</span></span></a><span class="mpre"> </span><a name="loc_171_10_171_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_10_171_11&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_171_10_171_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_10_171_11&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_171_41_171_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_41_171_42&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> </span><a name="loc_171_43_171_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_43_171_44&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_171_41_171_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_41_171_42&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">, </span><a href="#loc_171_43_171_44" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_43_171_44&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)))
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_171_1_171_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_1_171_9&#39;)"><span class="mpre">iperform</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform an &#39;IndexedAction&#39; and modify the result.</span></span><span class="mpre">
</span><a href="#loc_176_1_176_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_1_176_10&#39;)"><span class="mpre">iperforms</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 175, srcSpanStartColumn = 14, srcSpanEndLine = 175, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 175, srcSpanStartColumn = 22, srcSpanEndLine = 175, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">IndexedActing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre">
</span><a name="loc_176_1_176_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_1_176_10&#39;)"><span class="hl_fundecl"><span class="mpre">iperforms</span></span></a><span class="mpre"> </span><a name="loc_176_11_176_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_11_176_12&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="#loc_85_1_85_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_9&#39;)"><span class="hl_varref"><span class="mpre">performs</span></span></a><span class="mpre"> </span><a href="#loc_176_11_176_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_11_176_12&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_176_1_176_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_176_1_176_10&#39;)"><span class="mpre">iperforms</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform an &#39;IndexedAction&#39;.</span></span><span class="mpre">
</span><a href="#loc_181_3_181_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_3_181_6&#39;)"><span class="mpre">(^@!)</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 180, srcSpanStartColumn = 10, srcSpanEndLine = 180, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 180, srcSpanStartColumn = 18, srcSpanEndLine = 180, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedActing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
</span><a name="loc_181_1_181_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_1_181_2&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><a name="loc_181_3_181_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_3_181_6&#39;)"><span class="hl_fundecl"><span class="mpre">^@!</span></span></a><span class="mpre"> </span><a name="loc_181_7_181_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_7_181_8&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> (</span><a href="#loc_181_7_181_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_7_181_8&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_181_36_181_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_36_181_37&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> </span><a name="loc_181_38_181_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_38_181_39&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_181_36_181_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_36_181_37&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">, </span><a href="#loc_181_38_181_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_38_181_39&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">))) </span><a href="#loc_181_1_181_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_1_181_2&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_181_3_181_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_3_181_6&#39;)"><span class="mpre">(^@!)</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Obtain a list of all of the results of an &#39;IndexedMonadicFold&#39;.</span></span><span class="mpre">
</span><a href="#loc_186_3_186_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_3_186_7&#39;)"><span class="mpre">(^@!!)</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 185, srcSpanStartColumn = 11, srcSpanEndLine = 185, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 185, srcSpanStartColumn = 19, srcSpanEndLine = 185, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedActing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> [(</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)] </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> [(</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)]
</span><a name="loc_186_1_186_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_2&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><a name="loc_186_3_186_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_3_186_7&#39;)"><span class="hl_fundecl"><span class="mpre">^@!!</span></span></a><span class="mpre"> </span><a name="loc_186_8_186_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_8_186_9&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> (</span><a href="#loc_186_8_186_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_8_186_9&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_186_37_186_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_37_186_38&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> </span><a name="loc_186_39_186_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_39_186_40&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> [(</span><a href="#loc_186_37_186_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_37_186_38&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">, </span><a href="#loc_186_39_186_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_39_186_40&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)])) </span><a href="#loc_186_1_186_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_1_186_2&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_186_3_186_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_186_3_186_7&#39;)"><span class="mpre">(^@!!)</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Perform an &#39;IndexedMonadicFold&#39; and collect the &#39;Leftmost&#39; result.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Note:/ this still causes all effects for all elements.</span></span><span class="mpre">
</span><a href="#loc_193_3_193_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_3_193_7&#39;)"><span class="mpre">(^@!?)</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 192, srcSpanStartColumn = 11, srcSpanEndLine = 192, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 192, srcSpanStartColumn = 19, srcSpanEndLine = 192, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedActing</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Control.Lens.Internal.Fold.html#loc_156_6_156_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Fold.html#loc_156_6_156_14&#39;)"><span class="hl_tyconref"><span class="mpre">Leftmost</span></span></a><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)) </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">))
</span><a name="loc_193_1_193_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_1_193_2&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_193_3_193_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_3_193_7&#39;)"><span class="hl_fundecl"><span class="mpre">^@!?</span></span></a><span class="mpre">  </span><a name="loc_193_9_193_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_9_193_10&#39;)"><span class="hl_vardecl"><span class="mpre">l</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="Control.Lens.Internal.Fold.html#loc_180_1_180_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Fold.html#loc_180_1_180_12&#39;)"><span class="hl_varref"><span class="mpre">getLeftmost</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><a href="Control.Lens.Internal.Action.html#loc_65_33_65_42" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_65_33_65_42&#39;)"><span class="hl_varref"><span class="mpre">getEffect</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_193_9_193_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_9_193_10&#39;)"><span class="hl_varref"><span class="mpre">l</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Indexed</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_193_60_193_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_60_193_61&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">Effect</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Lens.Internal.Fold.html#loc_156_27_156_32" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Fold.html#loc_156_27_156_32&#39;)"><span class="hl_conref"><span class="mpre">LLeaf</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">(,)</span></span><span class="mpre"> </span><a href="#loc_193_60_193_61" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_60_193_61&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) </span><a href="#loc_193_1_193_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_1_193_2&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_193_3_193_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_3_193_7&#39;)"><span class="mpre">(^@!?)</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct an &#39;IndexedAction&#39; from a monadic side-effect.</span></span><span class="mpre">
</span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="mpre">iact</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 197, srcSpanStartColumn = 9, srcSpanEndLine = 197, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Action.hs&quot;, srcSpanStartLine = 197, srcSpanStartColumn = 17, srcSpanEndLine = 197, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/sr"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre">, </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyconref"><span class="mpre">IndexedAction</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">i</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="hl_fundecl"><span class="mpre">iact</span></span></a><span class="mpre"> </span><a name="loc_198_6_198_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_6_198_10&#39;)"><span class="hl_vardecl"><span class="mpre">smia</span></span></a><span class="mpre"> </span><a name="loc_198_11_198_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_11_198_15&#39;)"><span class="hl_vardecl"><span class="mpre">iafb</span></span></a><span class="mpre"> </span><a name="loc_198_16_198_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_16_198_17&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Internal.Action.html#loc_45_3_45_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_45_3_45_12&#39;)"><span class="hl_varref"><span class="mpre">effective</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
  (</span><a name="loc_199_4_199_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_4_199_5&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre">, </span><a name="loc_199_7_199_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_7_199_8&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_198_6_198_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_6_198_10&#39;)"><span class="hl_varref"><span class="mpre">smia</span></span></a><span class="mpre"> </span><a href="#loc_198_16_198_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_16_198_17&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
  </span><a href="Control.Lens.Internal.Action.html#loc_46_3_46_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Action.html#loc_46_3_46_14&#39;)"><span class="hl_varref"><span class="mpre">ineffective</span></span></a><span class="mpre"> (</span><a href="Control.Lens.Internal.Indexed.html#loc_98_3_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Internal.Indexed.html#loc_98_3_98_10&#39;)"><span class="hl_varref"><span class="mpre">indexed</span></span></a><span class="mpre"> </span><a href="#loc_198_11_198_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_11_198_15&#39;)"><span class="hl_varref"><span class="mpre">iafb</span></span></a><span class="mpre"> </span><a href="#loc_199_4_199_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_4_199_5&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre"> </span><a href="#loc_199_7_199_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_7_199_8&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_198_1_198_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_1_198_5&#39;)"><span class="mpre">iact</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>