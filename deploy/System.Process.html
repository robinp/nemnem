<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
#ifdef __GLASGOW_HASKELL__
{-# LANGUAGE Trustworthy #-}
{-# LANGUAGE InterruptibleFFI #-}
#endif

</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  System.Process</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (c) The University of Glasgow 2004-2008</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file libraries/base/LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  libraries@haskell.org</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable (requires concurrency)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Operations for creating and interacting with sub-processes.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- ToDo:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--      * Flag to control whether exiting the parent also kills the child.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- NOTES on createPipe:

   createPipe is no longer exported, because of the following problems:

        - it wasn&#39;t used to implement runInteractiveProcess on Unix, because
          the file descriptors for the unused ends of the pipe need to be closed
          in the child process.

        - on Windows, a special version of createPipe is needed that sets
          the inheritance flags correctly on the ends of the pipe (see
          mkAnonPipe below).
-}</span></span><span class="mpre">

module System.Process (
#ifndef __HUGS__
        </span><span class="hl_comment"><span class="mpre">-- * Running sub-processes</span></span><span class="mpre">
        createProcess,
        shell, proc,
        CreateProcess(..),
        CmdSpec(..),
        StdStream(..),
        ProcessHandle,

        </span><span class="hl_comment"><span class="mpre">-- ** Simpler functions for common tasks</span></span><span class="mpre">
        callProcess,
        callCommand,
        spawnProcess,
        spawnCommand,
        readProcess,
        readProcessWithExitCode,

        </span><span class="hl_comment"><span class="mpre">-- ** Related utilities</span></span><span class="mpre">
        showCommandForUser,

        </span><span class="hl_comment"><span class="mpre">-- ** Control-C handling on Unix</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- $ctlc-handling</span></span><span class="mpre">

        </span><span class="hl_comment"><span class="mpre">-- * Process completion</span></span><span class="mpre">
        waitForProcess,
        getProcessExitCode,
        terminateProcess,
        interruptProcessGroupOf,

        </span><span class="hl_comment"><span class="mpre">-- * Old deprecated functions</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- | These functions pre-date &#39;createProcess&#39; which is much more</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- flexible.</span></span><span class="mpre">
        runProcess,
        runCommand,
        runInteractiveProcess,
        runInteractiveCommand,
#endif
        system,
        rawSystem,
 ) where

import Prelude hiding (</span><a href="Control.Monad.html#loc_111_1_111_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_111_1_111_5&#39;)"><span class="mpre">mapM</span></a><span class="mpre">)

#ifndef __HUGS__
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 82, srcSpanStartColumn = 8, srcSpanEndLine = 82, srcSpanEndColumn = 32}, srcInfoPoints = []}) &quot;System.Process.Internals&quot;"><span class="mpre">System.Process.Internals</span></span><span class="mpre">

import Control.Exception (SomeException, </span><a href="GHC.IO.html#loc_428_1_428_5" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_428_1_428_5&#39;)"><span class="mpre">mask</span></a><span class="mpre">, </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="mpre">try</span></a><span class="mpre">, </span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="mpre">throwIO</span></a><span class="mpre">)
import Control.DeepSeq (</span><a href="Control.DeepSeq.html#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_120_5_120_8&#39;)"><span class="mpre">rnf</span></a><span class="mpre">)
import System.IO.Error (</span><a href="System.IO.Error.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_115_1_115_10&#39;)"><span class="mpre">mkIOError</span></a><span class="mpre">, </span><a href="System.IO.Error.html#loc_289_1_289_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_289_1_289_18&#39;)"><span class="mpre">ioeSetErrorString</span></a><span class="mpre">)
#if !defined(mingw32_HOST_OS)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 88, srcSpanStartColumn = 8, srcSpanEndLine = 88, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;System.Posix.Types&quot;"><span class="mpre">System.Posix.Types</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 89, srcSpanStartColumn = 8, srcSpanEndLine = 89, srcSpanEndColumn = 28}, srcInfoPoints = []}) &quot;System.Posix.Process&quot;"><span class="mpre">System.Posix.Process</span></span><span class="mpre"> (getProcessGroupIDOf)
#endif
import qualified Control.Exception as C
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 92, srcSpanStartColumn = 8, srcSpanEndLine = 92, srcSpanEndColumn = 26}, srcInfoPoints = []}) &quot;Control.Concurrent&quot;"><span class="mpre">Control.Concurrent</span></span><span class="mpre">
import Control.Monad
import Foreign
import Foreign.C
import System.IO
import Data.Maybe
#endif
import System.Exit      ( </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="mpre">ExitCode</span></a><span class="mpre">(..) )

#ifdef __GLASGOW_HASKELL__
import GHC.IO.Exception ( </span><a href="GHC.IO.Exception.html#loc_217_1_217_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_217_1_217_12&#39;)"><span class="mpre">ioException</span></a><span class="mpre">, </span><a href="GHC.IO.Exception.html#loc_257_6_257_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_257_6_257_17&#39;)"><span class="mpre">IOErrorType</span></a><span class="mpre">(..), </span><a href="GHC.IO.Exception.html#loc_238_6_238_17" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_238_6_238_17&#39;)"><span class="mpre">IOException</span></a><span class="mpre">(..) )
#if defined(mingw32_HOST_OS)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 104, srcSpanStartColumn = 8, srcSpanEndLine = 104, srcSpanEndColumn = 28}, srcInfoPoints = []}) &quot;System.Win32.Process&quot;"><span class="mpre">System.Win32.Process</span></span><span class="mpre"> (getProcessId)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 105, srcSpanStartColumn = 8, srcSpanEndLine = 105, srcSpanEndColumn = 28}, srcInfoPoints = []}) &quot;System.Win32.Console&quot;"><span class="mpre">System.Win32.Console</span></span><span class="mpre"> (generateConsoleCtrlEvent, cTRL_BREAK_EVENT)
#else
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 107, srcSpanStartColumn = 8, srcSpanEndLine = 107, srcSpanEndColumn = 28}, srcInfoPoints = []}) &quot;System.Posix.Signals&quot;"><span class="mpre">System.Posix.Signals</span></span><span class="mpre">
#endif
#endif

#ifdef __HUGS__
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 112, srcSpanStartColumn = 8, srcSpanEndLine = 112, srcSpanEndColumn = 19}, srcInfoPoints = []}) &quot;Hugs.System&quot;"><span class="mpre">Hugs.System</span></span><span class="mpre">
#endif


#ifndef __HUGS__

</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- createProcess</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct a &#39;CreateProcess&#39; record for passing to &#39;createProcess&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- representing a raw command with arguments.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The &#39;FilePath&#39; argument names the executable, and is interpreted according</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- to the platform&#39;s standard policy for searching for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- executables. Specifically:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * on Unix systems the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &lt;http://pubs.opengroup.org/onlinepubs/9699919799/functions/execvp.html execvp(3)&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   semantics is used, where if the executable filename does not</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   contain a slash (@/@) then the @PATH@ environment variable is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   searched for the executable.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * on Windows systems the Win32 @CreateProcess@ semantics is used.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   Briefly: if the filename does not contain a path, then the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   directory containing the parent executable is searched, followed</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   by the current directory, then some standard locations, and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   finally the current @PATH@.  An @.exe@ extension is added if the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   filename does not already have an extension.  For full details</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   see the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   &lt;http://msdn.microsoft.com/en-us/library/windows/desktop/aa365527%28v=vs.85%29.aspx documentation&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   for the Windows @SearchPath@ API.</span></span><span class="mpre">

</span><a href="#loc_145_1_145_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_1_145_5&#39;)"><span class="mpre">proc</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">CreateProcess</span></span><span class="mpre">
</span><a name="loc_145_1_145_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_1_145_5&#39;)"><span class="hl_fundecl"><span class="mpre">proc</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">cmd</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">args</span></span><span class="mpre"> = </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 145, srcSpanStartColumn = 17, srcSpanEndLine = 153, srcSpanEndColumn = 55}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 145, srcSpanStartColumn = 31, srcSpanEndLine = 145, srcSpanEndColumn = 32},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">CreateProcess { cmdspec = RawCommand cmd args,
                                cwd = Nothing,
                                env = Nothing,
                                std_in = Inherit,
                                std_out = Inherit,
                                std_err = Inherit,
                                close_fds = False,
                                create_group = False,
                                delegate_ctlc = False}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Construct a &#39;CreateProcess&#39; record for passing to &#39;createProcess&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- representing a command to be passed to the shell.</span></span><span class="mpre">
</span><a href="#loc_158_1_158_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_6&#39;)"><span class="mpre">shell</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">CreateProcess</span></span><span class="mpre">
</span><a name="loc_158_1_158_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_6&#39;)"><span class="hl_fundecl"><span class="mpre">shell</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">str</span></span><span class="mpre"> = </span><span class="warning" data-warning="ExpRecConstr (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 158, srcSpanStartColumn = 13, srcSpanEndLine = 166, srcSpanEndColumn = 51}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 158, srcSpanStartColumn = 27, srcSpanEndLine = 158, srcSpanEndColumn = 28},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">CreateProcess { cmdspec = ShellCommand str,
                            cwd = Nothing,
                            env = Nothing,
                            std_in = Inherit,
                            std_out = Inherit,
                            std_err = Inherit,
                            close_fds = False,
                            create_group = False,
                            delegate_ctlc = False}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- |
This is the most general way to spawn an external process.  The
process can be a command line to be executed by a shell or a raw command
with a list of arguments.  The stdin, stdout, and stderr streams of
the new process may individually be attached to new pipes, to existing
&#39;Handle&#39;s, or just inherited from the parent (the default.)

The details of how to create the process are passed in the
&#39;CreateProcess&#39; record.  To make it easier to construct a
&#39;CreateProcess&#39;, the functions &#39;proc&#39; and &#39;shell&#39; are supplied that
fill in the fields with default values which can be overriden as
needed.

&#39;createProcess&#39; returns @(/mb_stdin_hdl/, /mb_stdout_hdl/, /mb_stderr_hdl/, /ph/)@,
where

 * if @&#39;std_in&#39; == &#39;CreatePipe&#39;@, then @/mb_stdin_hdl/@ will be @Just /h/@,
   where @/h/@ is the write end of the pipe connected to the child
   process&#39;s @stdin@.

 * otherwise, @/mb_stdin_hdl/ == Nothing@

Similarly for @/mb_stdout_hdl/@ and @/mb_stderr_hdl/@.

For example, to execute a simple @ls@ command:

&gt;   r &lt;- createProcess (proc &quot;ls&quot; [])

To create a pipe from which to read the output of @ls@:

&gt;   (_, Just hout, _, _) &lt;-
&gt;       createProcess (proc &quot;ls&quot; []){ std_out = CreatePipe }

To also set the directory in which to run @ls@:

&gt;   (_, Just hout, _, _) &lt;-
&gt;       createProcess (proc &quot;ls&quot; []){ cwd = Just &quot;\home\bob&quot;,
&gt;                                     std_out = CreatePipe }

-}</span></span><span class="mpre">
</span><a href="#loc_211_1_211_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_1_211_14&#39;)"><span class="mpre">createProcess</span></a><span class="mpre">
  :: </span><span class="hl_tyconref"><span class="mpre">CreateProcess</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">, </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">, </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">)
</span><a name="loc_211_1_211_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_1_211_14&#39;)"><span class="hl_fundecl"><span class="mpre">createProcess</span></span></a><span class="mpre"> </span><a name="loc_211_15_211_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_15_211_17&#39;)"><span class="hl_vardecl"><span class="mpre">cp</span></span></a><span class="mpre"> = do
  </span><a name="loc_212_3_212_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_3_212_4&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;createProcess&quot;</span></span><span class="mpre"> </span><a href="#loc_211_15_211_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_15_211_17&#39;)"><span class="hl_varref"><span class="mpre">cp</span></span></a><span class="mpre">
  </span><a href="#loc_219_3_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_3_219_16&#39;)"><span class="hl_varref"><span class="mpre">maybeCloseStd</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">std_in</span></span><span class="mpre">  </span><a href="#loc_211_15_211_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_15_211_17&#39;)"><span class="hl_varref"><span class="mpre">cp</span></span></a><span class="mpre">)
  </span><a href="#loc_219_3_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_3_219_16&#39;)"><span class="hl_varref"><span class="mpre">maybeCloseStd</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">std_out</span></span><span class="mpre"> </span><a href="#loc_211_15_211_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_15_211_17&#39;)"><span class="hl_varref"><span class="mpre">cp</span></span></a><span class="mpre">)
  </span><a href="#loc_219_3_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_3_219_16&#39;)"><span class="hl_varref"><span class="mpre">maybeCloseStd</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">std_err</span></span><span class="mpre"> </span><a href="#loc_211_15_211_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_211_15_211_17&#39;)"><span class="hl_varref"><span class="mpre">cp</span></span></a><span class="mpre">)
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_212_3_212_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_3_212_4&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
 where
  </span><a href="#loc_219_3_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_3_219_16&#39;)"><span class="mpre">maybeCloseStd</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">StdStream</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
  </span><a name="loc_219_3_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_3_219_16&#39;)"><span class="hl_fundecl"><span class="mpre">maybeCloseStd</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">UseHandle</span></span><span class="mpre"> </span><a name="loc_219_28_219_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_28_219_31&#39;)"><span class="hl_vardecl"><span class="mpre">hdl</span></span></a><span class="mpre">)
    | </span><a href="#loc_219_28_219_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_28_219_31&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_52_1_52_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_52_1_52_6&#39;)"><span class="hl_varref"><span class="mpre">stdin</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_219_28_219_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_28_219_31&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_63_1_63_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_63_1_63_7&#39;)"><span class="hl_varref"><span class="mpre">stdout</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_219_28_219_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_28_219_31&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_74_1_74_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_74_1_74_7&#39;)"><span class="hl_varref"><span class="mpre">stderr</span></span></a><span class="mpre"> = </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_219_28_219_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_28_219_31&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre">
  </span><a href="#loc_219_3_219_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_3_219_16&#39;)"><span class="hl_fundecl"><span class="mpre">maybeCloseStd</span></span></a><span class="mpre"> _ = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-
-- TODO: decide if we want to expose this to users
-- | A &#39;C.bracketOnError&#39;-style resource handler for &#39;createProcess&#39;.
--
-- In normal operation it adds nothing, you are still responsible for waiting
-- for (or forcing) process termination and closing any &#39;Handle&#39;s. It only does
-- automatic cleanup if there is an exception. If there is an exception in the
-- body then it ensures that the process gets terminated and any &#39;CreatePipe&#39;
-- &#39;Handle&#39;s are closed. In particular this means that if the Haskell thread
-- is killed (e.g. &#39;killThread&#39;), that the external process is also terminated.
--
-- e.g.
--
-- &gt; withCreateProcess (proc cmd args) { ... }  $ \_ _ _ ph -&gt; do
-- &gt;   ...
--
withCreateProcess
  :: CreateProcess
  -&gt; (Maybe Handle -&gt; Maybe Handle -&gt; Maybe Handle -&gt; ProcessHandle -&gt; IO a)
  -&gt; IO a
withCreateProcess c action =
    C.bracketOnError (createProcess c) cleanupProcess
                     (\(m_in, m_out, m_err, ph) -&gt; action m_in m_out m_err ph)
-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- wrapper so we can get exceptions with the appropriate function name.</span></span><span class="mpre">
</span><a href="#loc_254_1_254_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_1_254_19&#39;)"><span class="mpre">withCreateProcess_</span></a><span class="mpre">
  :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">CreateProcess</span></span><span class="mpre">
  -&gt; (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_254_1_254_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_1_254_19&#39;)"><span class="hl_fundecl"><span class="mpre">withCreateProcess_</span></span></a><span class="mpre"> </span><a name="loc_254_20_254_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_20_254_23&#39;)"><span class="hl_vardecl"><span class="mpre">fun</span></span></a><span class="mpre"> </span><a name="loc_254_24_254_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_24_254_25&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> </span><a name="loc_254_26_254_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_26_254_32&#39;)"><span class="hl_vardecl"><span class="mpre">action</span></span></a><span class="mpre"> =
    </span><a href="Control.Exception.Base.html#loc_291_1_291_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_291_1_291_15&#39;)"><span class="hl_varref"><span class="mpre">C.bracketOnError</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><a href="#loc_254_20_254_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_20_254_23&#39;)"><span class="hl_varref"><span class="mpre">fun</span></span></a><span class="mpre"> </span><a href="#loc_254_24_254_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_24_254_25&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre">) </span><a href="#loc_261_1_261_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_1_261_15&#39;)"><span class="hl_varref"><span class="mpre">cleanupProcess</span></span></a><span class="mpre">
                     (\(</span><a name="loc_256_25_256_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_25_256_29&#39;)"><span class="hl_vardecl"><span class="mpre">m_in</span></span></a><span class="mpre">, </span><a name="loc_256_31_256_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_31_256_36&#39;)"><span class="hl_vardecl"><span class="mpre">m_out</span></span></a><span class="mpre">, </span><a name="loc_256_38_256_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_38_256_43&#39;)"><span class="hl_vardecl"><span class="mpre">m_err</span></span></a><span class="mpre">, </span><a name="loc_256_45_256_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_45_256_47&#39;)"><span class="hl_vardecl"><span class="mpre">ph</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_254_26_254_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_26_254_32&#39;)"><span class="hl_varref"><span class="mpre">action</span></span></a><span class="mpre"> </span><a href="#loc_256_25_256_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_25_256_29&#39;)"><span class="hl_varref"><span class="mpre">m_in</span></span></a><span class="mpre"> </span><a href="#loc_256_31_256_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_31_256_36&#39;)"><span class="hl_varref"><span class="mpre">m_out</span></span></a><span class="mpre"> </span><a href="#loc_256_38_256_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_38_256_43&#39;)"><span class="hl_varref"><span class="mpre">m_err</span></span></a><span class="mpre"> </span><a href="#loc_256_45_256_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_256_45_256_47&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre">)


</span><a href="#loc_261_1_261_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_1_261_15&#39;)"><span class="mpre">cleanupProcess</span></a><span class="mpre"> :: (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">, </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">, </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">)
               -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_261_1_261_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_1_261_15&#39;)"><span class="hl_fundecl"><span class="mpre">cleanupProcess</span></span></a><span class="mpre"> (</span><a name="loc_261_17_261_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_17_261_25&#39;)"><span class="hl_vardecl"><span class="mpre">mb_stdin</span></span></a><span class="mpre">, </span><a name="loc_261_27_261_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_27_261_36&#39;)"><span class="hl_vardecl"><span class="mpre">mb_stdout</span></span></a><span class="mpre">, </span><a name="loc_261_38_261_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_38_261_47&#39;)"><span class="hl_vardecl"><span class="mpre">mb_stderr</span></span></a><span class="mpre">, </span><a name="loc_261_49_261_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_49_261_51&#39;)"><span class="hl_vardecl"><span class="mpre">ph</span></span></a><span class="mpre">) = do
    </span><a href="#loc_654_1_654_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_1_654_17&#39;)"><span class="hl_varref"><span class="mpre">terminateProcess</span></span></a><span class="mpre"> </span><a href="#loc_261_49_261_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_49_261_51&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- Note, it&#39;s important that other threads that might be reading/writing</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- these handles also get killed off, since otherwise they might be holding</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- the handle lock and prevent us from closing, leading to deadlock.</span></span><span class="mpre">
    </span><a href="Data.Maybe.html#loc_74_1_74_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_74_1_74_6&#39;)"><span class="hl_varref"><span class="mpre">maybe</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) (</span><a href="#loc_536_1_536_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_14&#39;)"><span class="hl_varref"><span class="mpre">ignoreSigPipe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre">) </span><a href="#loc_261_17_261_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_17_261_25&#39;)"><span class="hl_varref"><span class="mpre">mb_stdin</span></span></a><span class="mpre">
    </span><a href="Data.Maybe.html#loc_74_1_74_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_74_1_74_6&#39;)"><span class="hl_varref"><span class="mpre">maybe</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_261_27_261_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_27_261_36&#39;)"><span class="hl_varref"><span class="mpre">mb_stdout</span></span></a><span class="mpre">
    </span><a href="Data.Maybe.html#loc_74_1_74_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_74_1_74_6&#39;)"><span class="hl_varref"><span class="mpre">maybe</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_261_38_261_47" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_38_261_47&#39;)"><span class="hl_varref"><span class="mpre">mb_stderr</span></span></a><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- terminateProcess does not guarantee that it terminates the process.</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- Indeed on Unix it&#39;s SIGTERM, which asks nicely but does not guarantee</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- that it stops. If it doesn&#39;t stop, we don&#39;t want to hang, so we wait</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- asynchronously using forkIO.</span></span><span class="mpre">
    _ &lt;- </span><span class="hl_varref"><span class="mpre">forkIO</span></span><span class="mpre"> (</span><a href="#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="hl_varref"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a href="#loc_261_49_261_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_261_49_261_51&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- spawnProcess/spawnCommand</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Creates a new process to run the specified raw command with the given</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- arguments. It does not wait for the program to finish, but returns the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;ProcessHandle&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Since: 1.2.0.0/</span></span><span class="mpre">
</span><a href="#loc_286_1_286_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_1_286_13&#39;)"><span class="mpre">spawnProcess</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">
</span><a name="loc_286_1_286_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_1_286_13&#39;)"><span class="hl_fundecl"><span class="mpre">spawnProcess</span></span></a><span class="mpre"> </span><a name="loc_286_14_286_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_14_286_17&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a name="loc_286_18_286_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_18_286_22&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> = do
    (_,_,_,</span><a name="loc_287_12_287_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_12_287_13&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;spawnProcess&quot;</span></span><span class="mpre"> (</span><a href="#loc_145_1_145_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_1_145_5&#39;)"><span class="hl_varref"><span class="mpre">proc</span></span></a><span class="mpre"> </span><a href="#loc_286_14_286_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_14_286_17&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a href="#loc_286_18_286_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_286_18_286_22&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_287_12_287_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_287_12_287_13&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Creates a new process to run the specified shell command.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It does not wait for the program to finish, but returns the &#39;ProcessHandle&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Since: 1.2.0.0/</span></span><span class="mpre">
</span><a href="#loc_295_1_295_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_1_295_13&#39;)"><span class="mpre">spawnCommand</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">
</span><a name="loc_295_1_295_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_1_295_13&#39;)"><span class="hl_fundecl"><span class="mpre">spawnCommand</span></span></a><span class="mpre"> </span><a name="loc_295_14_295_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_14_295_17&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> = do
    (_,_,_,</span><a name="loc_296_12_296_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_12_296_13&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;spawnCommand&quot;</span></span><span class="mpre"> (</span><a href="#loc_158_1_158_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_6&#39;)"><span class="hl_varref"><span class="mpre">shell</span></span></a><span class="mpre"> </span><a href="#loc_295_14_295_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_14_295_17&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_296_12_296_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_12_296_13&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- callProcess/callCommand</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Creates a new process to run the specified command with the given</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- arguments, and wait for it to finish.  If the command returns a non-zero</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exit code, an exception is raised.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If an asynchronous exception is thrown to the thread executing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @callProcess@. The forked process will be terminated and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @callProcess@ will wait (block) until the process has been</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- terminated.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Since: 1.2.0.0/</span></span><span class="mpre">
</span><a href="#loc_314_1_314_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_1_314_12&#39;)"><span class="mpre">callProcess</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_314_1_314_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_1_314_12&#39;)"><span class="hl_fundecl"><span class="mpre">callProcess</span></span></a><span class="mpre"> </span><a name="loc_314_13_314_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_13_314_16&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a name="loc_314_17_314_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_17_314_21&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> = do
    </span><a name="loc_315_5_315_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_315_5_315_14&#39;)"><span class="hl_vardecl"><span class="mpre">exit_code</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_254_1_254_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_1_254_19&#39;)"><span class="hl_varref"><span class="mpre">withCreateProcess_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;callCommand&quot;</span></span><span class="mpre">
                   </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 316, srcSpanStartColumn = 20, srcSpanEndLine = 316, srcSpanEndColumn = 60}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 316, srcSpanStartColumn = 36, srcSpanEndLine = 316, srcSpanEndColumn = 37},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">(proc cmd args) { delegate_ctlc = True }</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \_ _ _ </span><a name="loc_316_70_316_71" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_316_70_316_71&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt;
                   </span><a href="#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="hl_varref"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a href="#loc_316_70_316_71" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_316_70_316_71&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
    case </span><a href="#loc_315_5_315_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_315_5_315_14&#39;)"><span class="hl_varref"><span class="mpre">exit_code</span></span></a><span class="mpre"> of
      </span><span class="hl_conref"><span class="mpre">ExitSuccess</span></span><span class="mpre">   -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
      </span><span class="hl_conref"><span class="mpre">ExitFailure</span></span><span class="mpre"> </span><a name="loc_320_19_320_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_320_19_320_20&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_341_1_341_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_23&#39;)"><span class="hl_varref"><span class="mpre">processFailedException</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;callProcess&quot;</span></span><span class="mpre"> </span><a href="#loc_314_13_314_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_13_314_16&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a href="#loc_314_17_314_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_314_17_314_21&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre"> </span><a href="#loc_320_19_320_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_320_19_320_20&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Creates a new process to run the specified shell command.  If the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- command returns a non-zero exit code, an exception is raised.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If an asynchronous exception is thrown to the thread executing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @callCommand@. The forked process will be terminated and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @callCommand@ will wait (block) until the process has been</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- terminated.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /Since: 1.2.0.0/</span></span><span class="mpre">
</span><a href="#loc_332_1_332_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_1_332_12&#39;)"><span class="mpre">callCommand</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_332_1_332_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_1_332_12&#39;)"><span class="hl_fundecl"><span class="mpre">callCommand</span></span></a><span class="mpre"> </span><a name="loc_332_13_332_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_13_332_16&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> = do
    </span><a name="loc_333_5_333_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_333_5_333_14&#39;)"><span class="hl_vardecl"><span class="mpre">exit_code</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_254_1_254_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_1_254_19&#39;)"><span class="hl_varref"><span class="mpre">withCreateProcess_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;callCommand&quot;</span></span><span class="mpre">
                   </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 334, srcSpanStartColumn = 20, srcSpanEndLine = 334, srcSpanEndColumn = 56}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 334, srcSpanStartColumn = 32, srcSpanEndLine = 334, srcSpanEndColumn = 33},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">(shell cmd) { delegate_ctlc = True }</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \_ _ _ </span><a name="loc_334_66_334_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_334_66_334_67&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt;
                   </span><a href="#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="hl_varref"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a href="#loc_334_66_334_67" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_334_66_334_67&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
    case </span><a href="#loc_333_5_333_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_333_5_333_14&#39;)"><span class="hl_varref"><span class="mpre">exit_code</span></span></a><span class="mpre"> of
      </span><span class="hl_conref"><span class="mpre">ExitSuccess</span></span><span class="mpre">   -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
      </span><span class="hl_conref"><span class="mpre">ExitFailure</span></span><span class="mpre"> </span><a name="loc_338_19_338_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_338_19_338_20&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_341_1_341_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_23&#39;)"><span class="hl_varref"><span class="mpre">processFailedException</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;callCommand&quot;</span></span><span class="mpre"> </span><a href="#loc_332_13_332_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_13_332_16&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> [] </span><a href="#loc_338_19_338_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_338_19_338_20&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

</span><a href="#loc_341_1_341_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_23&#39;)"><span class="mpre">processFailedException</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_341_1_341_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_23&#39;)"><span class="hl_fundecl"><span class="mpre">processFailedException</span></span></a><span class="mpre"> </span><a name="loc_341_24_341_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_24_341_27&#39;)"><span class="hl_vardecl"><span class="mpre">fun</span></span></a><span class="mpre"> </span><a name="loc_341_28_341_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_28_341_31&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a name="loc_341_32_341_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_32_341_36&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> </span><a name="loc_341_37_341_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_37_341_46&#39;)"><span class="hl_vardecl"><span class="mpre">exit_code</span></span></a><span class="mpre"> =
      </span><a href="GHC.IO.Exception.html#loc_221_1_221_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_221_1_221_8&#39;)"><span class="hl_varref"><span class="mpre">ioError</span></span></a><span class="mpre"> (</span><a href="System.IO.Error.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_115_1_115_10&#39;)"><span class="hl_varref"><span class="mpre">mkIOError</span></span></a><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_271_5_271_15" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_271_5_271_15&#39;)"><span class="hl_conref"><span class="mpre">OtherError</span></span></a><span class="mpre"> (</span><a href="#loc_341_24_341_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_24_341_27&#39;)"><span class="hl_varref"><span class="mpre">fun</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_341_28_341_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_28_341_31&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
                                     </span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> ((</span><span class="hl_char"><span class="mpre">&#39; &#39;</span></span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre">) </span><a href="#loc_341_32_341_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_32_341_36&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
                                     </span><span class="hl_string"><span class="mpre">&quot; (exit &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_341_37_341_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_37_341_46&#39;)"><span class="hl_varref"><span class="mpre">exit_code</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;)&quot;</span></span><span class="mpre">)
                                 </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Control-C handling on Unix</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- $ctlc-handling</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- When running an interactive console process (such as a shell, console-based</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- text editor or ghci), we typically want that process to be allowed to handle</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Ctl-C keyboard interrupts how it sees fit. For example, while most programs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- simply quit on a Ctl-C, some handle it specially. To allow this to happen,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- use the @&#39;delegate_ctlc&#39; = True@ option in the &#39;CreateProcess&#39; options.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The gory details:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- By default Ctl-C will generate a @SIGINT@ signal, causing a &#39;UserInterrupt&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exception to be sent to the main Haskell thread of your program, which if</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- not specially handled will terminate the program. Normally, this is exactly</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- what is wanted: an orderly shutdown of the program in response to Ctl-C.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Of course when running another interactive program in the console then we</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- want to let that program handle Ctl-C. Under Unix however, Ctl-C sends</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @SIGINT@ to every process using the console. The standard solution is that</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- while running an interactive program, ignore @SIGINT@ in the parent, and let</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it be handled in the child process. If that process then terminates due to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the @SIGINT@ signal, then at that point treat it as if we had recieved the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @SIGINT@ ourselves and begin an orderly shutdown.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This behaviour is implemented by &#39;createProcess&#39; (and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;waitForProcess&#39; \/ &#39;getProcessExitCode&#39;) when the @&#39;delegate_ctlc&#39; = True@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- option is set. In particular, the @SIGINT@ signal will be ignored until</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;waitForProcess&#39; returns (or &#39;getProcessExitCode&#39; returns a non-Nothing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- result), so it becomes especially important to use &#39;waitForProcess&#39; for every</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- processes created.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- In addition, in &#39;delegate_ctlc&#39; mode, &#39;waitForProcess&#39; and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;getProcessExitCode&#39; will throw a &#39;UserInterrupt&#39; exception if the process</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- terminated with @&#39;ExitFailure&#39; (-SIGINT)@. Typically you will not want to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- catch this exception, but let it propagate, giving a normal orderly shutdown.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- One detail to be aware of is that the &#39;UserInterrupt&#39; exception is thrown</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /synchronously/ in the thread that calls &#39;waitForProcess&#39;, whereas normally</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @SIGINT@ causes the exception to be thrown /asynchronously/ to the main</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- thread.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- For even more detail on this topic, see</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://www.cons.org/cracauer/sigint.html &quot;Proper handling of SIGINT/SIGQUIT&quot;&gt;.</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- -----------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @readProcess@ forks an external process, reads its standard output</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- strictly, blocking until the process terminates, and returns the output</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- string.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If an asynchronous exception is thrown to the thread executing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @readProcess@. The forked process will be terminated and @readProcess@ will</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- wait (block) until the process has been terminated.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Output is returned strictly, so this is not suitable for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- interactive applications.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This function throws an &#39;IOError&#39; if the process &#39;ExitCode&#39; is</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- anything other than &#39;ExitSuccess&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Users of this function should compile with @-threaded@ if they</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- want other Haskell threads to keep running while waiting on</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the result of readProcess.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;  &gt; readProcess &quot;date&quot; [] []</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;  &quot;Thu Feb  7 10:03:39 PST 2008\n&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The arguments are:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * The command to run, which must be in the $PATH, or an absolute path</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * A list of separate command line arguments to the program</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * A string to pass on the standard input to the program.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_429_1_429_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_1_429_12&#39;)"><span class="mpre">readProcess</span></a><span class="mpre">
    :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">                 </span><span class="hl_comment"><span class="mpre">-- ^ Filename of the executable (see &#39;proc&#39; for details)</span></span><span class="mpre">
    -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">]                 </span><span class="hl_comment"><span class="mpre">-- ^ any arguments</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">                   </span><span class="hl_comment"><span class="mpre">-- ^ standard input</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">                </span><span class="hl_comment"><span class="mpre">-- ^ stdout</span></span><span class="mpre">
</span><a name="loc_429_1_429_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_1_429_12&#39;)"><span class="hl_fundecl"><span class="mpre">readProcess</span></span></a><span class="mpre"> </span><a name="loc_429_13_429_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_13_429_16&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a name="loc_429_17_429_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_17_429_21&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> </span><a name="loc_429_22_429_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_22_429_27&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = do
    let </span><a name="loc_430_9_430_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_430_9_430_16&#39;)"><span class="hl_vardecl"><span class="mpre">cp_opts</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 430, srcSpanStartColumn = 19, srcSpanEndLine = 434, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 430, srcSpanStartColumn = 35, srcSpanEndLine = 430, srcSpanEndColumn = 36},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">(proc cmd args) {
                    std_in  = CreatePipe,
                    std_out = CreatePipe,
                    std_err = Inherit
                  }</span></span><span class="mpre">
    (</span><a name="loc_435_6_435_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_8&#39;)"><span class="hl_vardecl"><span class="mpre">ex</span></span></a><span class="mpre">, </span><a name="loc_435_10_435_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_10_435_16&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_254_1_254_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_1_254_19&#39;)"><span class="hl_varref"><span class="mpre">withCreateProcess_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;readProcess&quot;</span></span><span class="mpre"> </span><a href="#loc_430_9_430_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_430_9_430_16&#39;)"><span class="hl_varref"><span class="mpre">cp_opts</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
      \(</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_436_14_436_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_14_436_17&#39;)"><span class="hl_vardecl"><span class="mpre">inh</span></span></a><span class="mpre">) (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_436_25_436_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_25_436_29&#39;)"><span class="hl_vardecl"><span class="mpre">outh</span></span></a><span class="mpre">) _ </span><a name="loc_436_33_436_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_33_436_35&#39;)"><span class="hl_vardecl"><span class="mpre">ph</span></span></a><span class="mpre"> -&gt; do

        </span><span class="hl_comment"><span class="mpre">-- fork off a thread to start consuming the output</span></span><span class="mpre">
        </span><a name="loc_439_9_439_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_439_9_439_15&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre">  &lt;- </span><span class="hl_varref"><span class="mpre">hGetContents</span></span><span class="mpre"> </span><a href="#loc_436_25_436_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_25_436_29&#39;)"><span class="hl_varref"><span class="mpre">outh</span></span></a><span class="mpre">
        </span><a href="#loc_527_1_527_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_1_527_13&#39;)"><span class="hl_varref"><span class="mpre">withForkWait</span></span></a><span class="mpre"> (</span><a href="GHC.IO.html#loc_480_1_480_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_480_1_480_9&#39;)"><span class="hl_varref"><span class="mpre">C.evaluate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.DeepSeq.html#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">rnf</span></span></a><span class="mpre"> </span><a href="#loc_439_9_439_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_439_9_439_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_440_51_440_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_440_51_440_58&#39;)"><span class="hl_vardecl"><span class="mpre">waitOut</span></span></a><span class="mpre"> -&gt; do

          </span><span class="hl_comment"><span class="mpre">-- now write any input</span></span><span class="mpre">
          </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> </span><a href="#loc_429_22_429_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_22_429_27&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
            </span><a href="#loc_536_1_536_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_14&#39;)"><span class="hl_varref"><span class="mpre">ignoreSigPipe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">hPutStr</span></span><span class="mpre"> </span><a href="#loc_436_14_436_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_14_436_17&#39;)"><span class="hl_varref"><span class="mpre">inh</span></span></a><span class="mpre"> </span><a href="#loc_429_22_429_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_22_429_27&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre">
          </span><span class="hl_comment"><span class="mpre">-- hClose performs implicit hFlush, and thus may trigger a SIGPIPE</span></span><span class="mpre">
          </span><a href="#loc_536_1_536_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_14&#39;)"><span class="hl_varref"><span class="mpre">ignoreSigPipe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_436_14_436_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_14_436_17&#39;)"><span class="hl_varref"><span class="mpre">inh</span></span></a><span class="mpre">

          </span><span class="hl_comment"><span class="mpre">-- wait on the output</span></span><span class="mpre">
          </span><a href="#loc_440_51_440_58" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_440_51_440_58&#39;)"><span class="hl_varref"><span class="mpre">waitOut</span></span></a><span class="mpre">
          </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_436_25_436_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_25_436_29&#39;)"><span class="hl_varref"><span class="mpre">outh</span></span></a><span class="mpre">

        </span><span class="hl_comment"><span class="mpre">-- wait on the process</span></span><span class="mpre">
        </span><a name="loc_453_9_453_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_9_453_11&#39;)"><span class="hl_vardecl"><span class="mpre">ex</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="hl_varref"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a href="#loc_436_33_436_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_33_436_35&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_453_9_453_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_453_9_453_11&#39;)"><span class="hl_varref"><span class="mpre">ex</span></span></a><span class="mpre">, </span><a href="#loc_439_9_439_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_439_9_439_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">)

    case </span><a href="#loc_435_6_435_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_6_435_8&#39;)"><span class="hl_varref"><span class="mpre">ex</span></span></a><span class="mpre"> of
     </span><span class="hl_conref"><span class="mpre">ExitSuccess</span></span><span class="mpre">   -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_435_10_435_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_435_10_435_16&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">
     </span><span class="hl_conref"><span class="mpre">ExitFailure</span></span><span class="mpre"> </span><a name="loc_458_18_458_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_458_18_458_19&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_341_1_341_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_341_1_341_23&#39;)"><span class="hl_varref"><span class="mpre">processFailedException</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;readProcess&quot;</span></span><span class="mpre"> </span><a href="#loc_429_13_429_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_13_429_16&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a href="#loc_429_17_429_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_429_17_429_21&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre"> </span><a href="#loc_458_18_458_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_458_18_458_19&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- |
@readProcessWithExitCode@ creates an external process, reads its
standard output and standard error strictly, waits until the process
terminates, and then returns the &#39;ExitCode&#39; of the process,
the standard output, and the standard error.

If an asynchronous exception is thrown to the thread executing
@readProcessWithExitCode@. The forked process will be terminated and
@readProcessWithExitCode@ will wait (block) until the process has been
terminated.

&#39;readProcess&#39; and &#39;readProcessWithExitCode&#39; are fairly simple wrappers
around &#39;createProcess&#39;.  Constructing variants of these functions is
quite easy: follow the link to the source code to see how
&#39;readProcess&#39; is implemented.

On Unix systems, see &#39;waitForProcess&#39; for the meaning of exit codes
when the process died as the result of a signal.
-}</span></span><span class="mpre">

</span><a href="#loc_485_1_485_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_1_485_24&#39;)"><span class="mpre">readProcessWithExitCode</span></a><span class="mpre">
    :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">                 </span><span class="hl_comment"><span class="mpre">-- ^ Filename of the executable (see &#39;proc&#39; for details)</span></span><span class="mpre">
    -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">]                 </span><span class="hl_comment"><span class="mpre">-- ^ any arguments</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">                   </span><span class="hl_comment"><span class="mpre">-- ^ standard input</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) </span><span class="hl_comment"><span class="mpre">-- ^ exitcode, stdout, stderr</span></span><span class="mpre">
</span><a name="loc_485_1_485_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_1_485_24&#39;)"><span class="hl_fundecl"><span class="mpre">readProcessWithExitCode</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">cmd</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">args</span></span><span class="mpre"> </span><a name="loc_485_34_485_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_34_485_39&#39;)"><span class="hl_vardecl"><span class="mpre">input</span></span></a><span class="mpre"> = do
    let </span><a name="loc_486_9_486_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_486_9_486_16&#39;)"><span class="hl_vardecl"><span class="mpre">cp_opts</span></span></a><span class="mpre"> = </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 486, srcSpanStartColumn = 19, srcSpanEndLine = 490, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 486, srcSpanStartColumn = 35, srcSpanEndLine = 486, srcSpanEndColumn = 36},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">(proc cmd args) {
                    std_in  = CreatePipe,
                    std_out = CreatePipe,
                    std_err = CreatePipe
                  }</span></span><span class="mpre">
    </span><a href="#loc_254_1_254_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_1_254_19&#39;)"><span class="hl_varref"><span class="mpre">withCreateProcess_</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;readProcessWithExitCode&quot;</span></span><span class="mpre"> </span><a href="#loc_486_9_486_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_486_9_486_16&#39;)"><span class="hl_varref"><span class="mpre">cp_opts</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
      \(</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_492_14_492_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_14_492_17&#39;)"><span class="hl_vardecl"><span class="mpre">inh</span></span></a><span class="mpre">) (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_492_25_492_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_25_492_29&#39;)"><span class="hl_vardecl"><span class="mpre">outh</span></span></a><span class="mpre">) (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_492_37_492_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_37_492_41&#39;)"><span class="hl_vardecl"><span class="mpre">errh</span></span></a><span class="mpre">) </span><a name="loc_492_43_492_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_43_492_45&#39;)"><span class="hl_vardecl"><span class="mpre">ph</span></span></a><span class="mpre"> -&gt; do

        </span><a name="loc_494_9_494_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_494_9_494_12&#39;)"><span class="hl_vardecl"><span class="mpre">out</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">hGetContents</span></span><span class="mpre"> </span><a href="#loc_492_25_492_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_25_492_29&#39;)"><span class="hl_varref"><span class="mpre">outh</span></span></a><span class="mpre">
        </span><a name="loc_495_9_495_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_495_9_495_12&#39;)"><span class="hl_vardecl"><span class="mpre">err</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">hGetContents</span></span><span class="mpre"> </span><a href="#loc_492_37_492_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_37_492_41&#39;)"><span class="hl_varref"><span class="mpre">errh</span></span></a><span class="mpre">

        </span><span class="hl_comment"><span class="mpre">-- fork off threads to start consuming stdout &amp; stderr</span></span><span class="mpre">
        </span><a href="#loc_527_1_527_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_1_527_13&#39;)"><span class="hl_varref"><span class="mpre">withForkWait</span></span></a><span class="mpre">  (</span><a href="GHC.IO.html#loc_480_1_480_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_480_1_480_9&#39;)"><span class="hl_varref"><span class="mpre">C.evaluate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.DeepSeq.html#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">rnf</span></span></a><span class="mpre"> </span><a href="#loc_494_9_494_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_494_9_494_12&#39;)"><span class="hl_varref"><span class="mpre">out</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_498_49_498_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_49_498_56&#39;)"><span class="hl_vardecl"><span class="mpre">waitOut</span></span></a><span class="mpre"> -&gt;
         </span><a href="#loc_527_1_527_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_1_527_13&#39;)"><span class="hl_varref"><span class="mpre">withForkWait</span></span></a><span class="mpre"> (</span><a href="GHC.IO.html#loc_480_1_480_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_480_1_480_9&#39;)"><span class="hl_varref"><span class="mpre">C.evaluate</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.DeepSeq.html#loc_120_5_120_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.DeepSeq.html#loc_120_5_120_8&#39;)"><span class="hl_varref"><span class="mpre">rnf</span></span></a><span class="mpre"> </span><a href="#loc_495_9_495_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_495_9_495_12&#39;)"><span class="hl_varref"><span class="mpre">err</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_499_49_499_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_499_49_499_56&#39;)"><span class="hl_vardecl"><span class="mpre">waitErr</span></span></a><span class="mpre"> -&gt; do

          </span><span class="hl_comment"><span class="mpre">-- now write any input</span></span><span class="mpre">
          </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre"> </span><a href="#loc_485_34_485_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_34_485_39&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
            </span><a href="#loc_536_1_536_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_14&#39;)"><span class="hl_varref"><span class="mpre">ignoreSigPipe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">hPutStr</span></span><span class="mpre"> </span><a href="#loc_492_14_492_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_14_492_17&#39;)"><span class="hl_varref"><span class="mpre">inh</span></span></a><span class="mpre"> </span><a href="#loc_485_34_485_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_485_34_485_39&#39;)"><span class="hl_varref"><span class="mpre">input</span></span></a><span class="mpre">
          </span><span class="hl_comment"><span class="mpre">-- hClose performs implicit hFlush, and thus may trigger a SIGPIPE</span></span><span class="mpre">
          </span><a href="#loc_536_1_536_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_14&#39;)"><span class="hl_varref"><span class="mpre">ignoreSigPipe</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_492_14_492_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_14_492_17&#39;)"><span class="hl_varref"><span class="mpre">inh</span></span></a><span class="mpre">

          </span><span class="hl_comment"><span class="mpre">-- wait on the output</span></span><span class="mpre">
          </span><a href="#loc_498_49_498_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_498_49_498_56&#39;)"><span class="hl_varref"><span class="mpre">waitOut</span></span></a><span class="mpre">
          </span><a href="#loc_499_49_499_56" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_499_49_499_56&#39;)"><span class="hl_varref"><span class="mpre">waitErr</span></span></a><span class="mpre">

          </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_492_25_492_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_25_492_29&#39;)"><span class="hl_varref"><span class="mpre">outh</span></span></a><span class="mpre">
          </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_492_37_492_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_37_492_41&#39;)"><span class="hl_varref"><span class="mpre">errh</span></span></a><span class="mpre">

        </span><span class="hl_comment"><span class="mpre">-- wait on the process</span></span><span class="mpre">
        </span><a name="loc_515_9_515_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_515_9_515_11&#39;)"><span class="hl_vardecl"><span class="mpre">ex</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="hl_varref"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a href="#loc_492_43_492_45" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_492_43_492_45&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre">

        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_515_9_515_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_515_9_515_11&#39;)"><span class="hl_varref"><span class="mpre">ex</span></span></a><span class="mpre">, </span><a href="#loc_494_9_494_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_494_9_494_12&#39;)"><span class="hl_varref"><span class="mpre">out</span></span></a><span class="mpre">, </span><a href="#loc_495_9_495_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_495_9_495_12&#39;)"><span class="hl_varref"><span class="mpre">err</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | Fork a thread while doing something else, but kill it if there&#39;s an</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- exception.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is important in the cases above because we want to kill the thread</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that is holding the Handle lock, because when we clean up the process we</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- try to close that handle, which could otherwise deadlock.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><a href="#loc_527_1_527_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_1_527_13&#39;)"><span class="mpre">withForkWait</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt;  </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">
</span><a name="loc_527_1_527_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_1_527_13&#39;)"><span class="hl_fundecl"><span class="mpre">withForkWait</span></span></a><span class="mpre"> </span><a name="loc_527_14_527_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_14_527_19&#39;)"><span class="hl_vardecl"><span class="mpre">async</span></span></a><span class="mpre"> </span><a name="loc_527_20_527_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_20_527_24&#39;)"><span class="hl_vardecl"><span class="mpre">body</span></span></a><span class="mpre"> = do
  </span><a name="loc_528_3_528_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_3_528_10&#39;)"><span class="hl_vardecl"><span class="mpre">waitVar</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">newEmptyMVar</span></span><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">MVar</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">SomeException</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">))
  </span><a href="GHC.IO.html#loc_428_1_428_5" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_428_1_428_5&#39;)"><span class="hl_varref"><span class="mpre">mask</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_529_11_529_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_11_529_18&#39;)"><span class="hl_vardecl"><span class="mpre">restore</span></span></a><span class="mpre"> -&gt; do
    </span><a name="loc_530_5_530_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_530_5_530_8&#39;)"><span class="hl_vardecl"><span class="mpre">tid</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">forkIO</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="hl_varref"><span class="mpre">try</span></span></a><span class="mpre"> (</span><a href="#loc_529_11_529_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_11_529_18&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> </span><a href="#loc_527_14_527_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_14_527_19&#39;)"><span class="hl_varref"><span class="mpre">async</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">putMVar</span></span><span class="mpre"> </span><a href="#loc_528_3_528_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_3_528_10&#39;)"><span class="hl_varref"><span class="mpre">waitVar</span></span></a><span class="mpre">
    let </span><a name="loc_531_9_531_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_9_531_13&#39;)"><span class="hl_vardecl"><span class="mpre">wait</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">takeMVar</span></span><span class="mpre"> </span><a href="#loc_528_3_528_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_3_528_10&#39;)"><span class="hl_varref"><span class="mpre">waitVar</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;=</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">either</span></span><span class="mpre"> </span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="hl_varref"><span class="mpre">throwIO</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">
    </span><a href="#loc_529_11_529_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_529_11_529_18&#39;)"><span class="hl_varref"><span class="mpre">restore</span></span></a><span class="mpre"> (</span><a href="#loc_527_20_527_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_527_20_527_24&#39;)"><span class="hl_varref"><span class="mpre">body</span></span></a><span class="mpre"> </span><a href="#loc_531_9_531_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_531_9_531_13&#39;)"><span class="hl_varref"><span class="mpre">wait</span></span></a><span class="mpre">) </span><a href="Control.Exception.Base.html#loc_229_1_229_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_229_1_229_12&#39;)"><span class="hl_infix"><span class="mpre">`C.onException`</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">killThread</span></span><span class="mpre"> </span><a href="#loc_530_5_530_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_530_5_530_8&#39;)"><span class="hl_varref"><span class="mpre">tid</span></span></a><span class="mpre">

</span><a href="#loc_536_1_536_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_14&#39;)"><span class="mpre">ignoreSigPipe</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
#if defined(__GLASGOW_HASKELL__)
</span><a name="loc_536_1_536_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_1_536_14&#39;)"><span class="hl_vardecl"><span class="mpre">ignoreSigPipe</span></span></a><span class="mpre"> = </span><a href="Control.Exception.Base.html#loc_181_1_181_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_181_1_181_7&#39;)"><span class="hl_varref"><span class="mpre">C.handle</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_536_29_536_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_29_536_30&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt; case </span><a href="#loc_536_29_536_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_29_536_30&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> of
                                   </span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 537, srcSpanStartColumn = 36, srcSpanEndLine = 538, srcSpanEndColumn = 68}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 537, srcSpanStartColumn = 44, srcSpanEndLine = 537, srcSpanEndColumn = 45},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 53"><span class="mpre">IOError { ioe_type  = ResourceVanished
                                           , ioe_errno = Just ioe }</span></span><span class="mpre">
                                     | </span><span class="hl_conref"><span class="mpre">Errno</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">ioe</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">ePIPE</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
                                   _ -&gt; </span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="hl_varref"><span class="mpre">throwIO</span></span></a><span class="mpre"> </span><a href="#loc_536_29_536_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_536_29_536_30&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">
#else
</span><span class="hl_vardecl"><span class="mpre">ignoreSigPipe</span></span><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
#endif

</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- showCommandForUser</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Given a program @/p/@ and arguments @/args/@,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   @showCommandForUser /p/ /args/@ returns a string suitable for pasting</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   into @\/bin\/sh@ (on Unix systems) or @CMD.EXE@ (on Windows).</span></span><span class="mpre">
</span><a href="#loc_552_1_552_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_1_552_19&#39;)"><span class="mpre">showCommandForUser</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_552_1_552_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_1_552_19&#39;)"><span class="hl_fundecl"><span class="mpre">showCommandForUser</span></span></a><span class="mpre"> </span><a name="loc_552_20_552_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_20_552_23&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a name="loc_552_24_552_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_24_552_28&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_1081_1_1081_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1081_1_1081_8&#39;)"><span class="hl_varref"><span class="mpre">unwords</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">translate</span></span><span class="mpre"> (</span><a href="#loc_552_20_552_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_20_552_23&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_552_24_552_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_24_552_28&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">))


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- waitForProcess</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- | Waits for the specified process to terminate, and returns its exit code.

GHC Note: in order to call @waitForProcess@ without blocking all the
other threads in the system, you must compile the program with
@-threaded@.

(/Since: 1.2.0.0/) On Unix systems, a negative value @&#39;ExitFailure&#39; -/signum/@
indicates that the child was terminated by signal @/signum/@.
The signal numbers are platform-specific, so to test for a specific signal use
the constants provided by &quot;System.Posix.Signals&quot; in the @unix@ package.
Note: core dumps are not reported, use &quot;System.Posix.Process&quot; if you need this
detail.

-}</span></span><span class="mpre">
</span><a href="#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="mpre">waitForProcess</span></a><span class="mpre">
  :: </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">
</span><a name="loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="hl_fundecl"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a name="loc_575_16_575_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_16_575_18&#39;)"><span class="hl_specname"><span class="mpre">ph</span></span></a><span class="mpre">@(</span><span class="hl_conref"><span class="mpre">ProcessHandle</span></span><span class="mpre"> _ </span><a name="loc_575_36_575_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_36_575_51&#39;)"><span class="hl_vardecl"><span class="mpre">delegating_ctlc</span></span></a><span class="mpre">) = do
  </span><a name="loc_576_3_576_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_3_576_5&#39;)"><span class="hl_vardecl"><span class="mpre">p_</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">modifyProcessHandle</span></span><span class="mpre"> </span><a href="#loc_575_16_575_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_16_575_18&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_576_35_576_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_35_576_37&#39;)"><span class="hl_vardecl"><span class="mpre">p_</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_576_35_576_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_35_576_37&#39;)"><span class="hl_varref"><span class="mpre">p_</span></span></a><span class="mpre">,</span><a href="#loc_576_35_576_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_35_576_37&#39;)"><span class="hl_varref"><span class="mpre">p_</span></span></a><span class="mpre">)
  case </span><a href="#loc_576_3_576_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_576_3_576_5&#39;)"><span class="hl_varref"><span class="mpre">p_</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">ClosedHandle</span></span><span class="mpre"> </span><a name="loc_578_18_578_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_578_18_578_19&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_578_18_578_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_578_18_578_19&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">
    </span><span class="hl_conref"><span class="mpre">OpenHandle</span></span><span class="mpre"> </span><a name="loc_579_16_579_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_16_579_17&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre">  -&gt; do
        </span><span class="hl_comment"><span class="mpre">-- don&#39;t hold the MVar while we call c_waitForProcess...</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- (XXX but there&#39;s a small race window here during which another</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- thread could close the handle or call waitForProcess)</span></span><span class="mpre">
        </span><a name="loc_583_9_583_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_9_583_10&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> &lt;- </span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="hl_varref"><span class="mpre">alloca</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_583_24_583_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_24_583_28&#39;)"><span class="hl_vardecl"><span class="mpre">pret</span></span></a><span class="mpre"> -&gt; do
          </span><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1Retry_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;waitForProcess&quot;</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">c_waitForProcess</span></span><span class="mpre"> </span><a href="#loc_579_16_579_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_579_16_579_17&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_583_24_583_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_24_583_28&#39;)"><span class="hl_varref"><span class="mpre">pret</span></span></a><span class="mpre">)
          </span><span class="hl_varref"><span class="mpre">modifyProcessHandle</span></span><span class="mpre"> </span><a href="#loc_575_16_575_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_16_575_18&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_585_37_585_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_585_37_585_40&#39;)"><span class="hl_vardecl"><span class="mpre">p_&#39;</span></span></a><span class="mpre"> -&gt;
            case </span><a href="#loc_585_37_585_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_585_37_585_40&#39;)"><span class="hl_varref"><span class="mpre">p_&#39;</span></span></a><span class="mpre"> of
              </span><span class="hl_conref"><span class="mpre">ClosedHandle</span></span><span class="mpre"> </span><a name="loc_587_28_587_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_587_28_587_29&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_585_37_585_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_585_37_585_40&#39;)"><span class="hl_varref"><span class="mpre">p_&#39;</span></span></a><span class="mpre">,</span><a href="#loc_587_28_587_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_587_28_587_29&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)
              </span><span class="hl_conref"><span class="mpre">OpenHandle</span></span><span class="mpre"> </span><a name="loc_588_26_588_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_26_588_29&#39;)"><span class="hl_vardecl"><span class="mpre">ph&#39;</span></span></a><span class="mpre"> -&gt; do
                </span><span class="hl_varref"><span class="mpre">closePHANDLE</span></span><span class="mpre"> </span><a href="#loc_588_26_588_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_26_588_29&#39;)"><span class="hl_varref"><span class="mpre">ph&#39;</span></span></a><span class="mpre">
                </span><a name="loc_590_17_590_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_590_17_590_21&#39;)"><span class="hl_vardecl"><span class="mpre">code</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_583_24_583_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_24_583_28&#39;)"><span class="hl_varref"><span class="mpre">pret</span></span></a><span class="mpre">
                let </span><a name="loc_591_21_591_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_21_591_22&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> = if (</span><a href="#loc_590_17_590_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_590_17_590_21&#39;)"><span class="hl_varref"><span class="mpre">code</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">)
                       then </span><span class="hl_conref"><span class="mpre">ExitSuccess</span></span><span class="mpre">
                       else (</span><span class="hl_conref"><span class="mpre">ExitFailure</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_590_17_590_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_590_17_590_21&#39;)"><span class="hl_varref"><span class="mpre">code</span></span></a><span class="mpre">))
                </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">ClosedHandle</span></span><span class="mpre"> </span><a href="#loc_591_21_591_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_21_591_22&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">, </span><a href="#loc_591_21_591_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_591_21_591_22&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)
        </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> </span><a href="#loc_575_36_575_51" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_36_575_51&#39;)"><span class="hl_varref"><span class="mpre">delegating_ctlc</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
          </span><span class="hl_varref"><span class="mpre">endDelegateControlC</span></span><span class="mpre"> </span><a href="#loc_583_9_583_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_9_583_10&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_583_9_583_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_583_9_583_10&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- getProcessExitCode</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- |
This is a non-blocking version of &#39;waitForProcess&#39;.  If the process is
still running, &#39;Nothing&#39; is returned.  If the process has exited, then
@&#39;Just&#39; e@ is returned where @e@ is the exit code of the process.

On Unix systems, see &#39;waitForProcess&#39; for the meaning of exit codes
when the process died as the result of a signal.
-}</span></span><span class="mpre">

</span><a href="#loc_613_1_613_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_613_1_613_19&#39;)"><span class="mpre">getProcessExitCode</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">)
</span><a name="loc_613_1_613_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_613_1_613_19&#39;)"><span class="hl_fundecl"><span class="mpre">getProcessExitCode</span></span></a><span class="mpre"> </span><a name="loc_613_20_613_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_613_20_613_22&#39;)"><span class="hl_specname"><span class="mpre">ph</span></span></a><span class="mpre">@(</span><span class="hl_conref"><span class="mpre">ProcessHandle</span></span><span class="mpre"> _ </span><a name="loc_613_40_613_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_613_40_613_55&#39;)"><span class="hl_vardecl"><span class="mpre">delegating_ctlc</span></span></a><span class="mpre">) = do
  (</span><a name="loc_614_4_614_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_4_614_7&#39;)"><span class="hl_vardecl"><span class="mpre">m_e</span></span></a><span class="mpre">, </span><a name="loc_614_9_614_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_9_614_17&#39;)"><span class="hl_vardecl"><span class="mpre">was_open</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">modifyProcessHandle</span></span><span class="mpre"> </span><a href="#loc_613_20_613_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_613_20_613_22&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_614_48_614_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_48_614_50&#39;)"><span class="hl_vardecl"><span class="mpre">p_</span></span></a><span class="mpre"> -&gt;
    case </span><a href="#loc_614_48_614_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_48_614_50&#39;)"><span class="hl_varref"><span class="mpre">p_</span></span></a><span class="mpre"> of
      </span><span class="hl_conref"><span class="mpre">ClosedHandle</span></span><span class="mpre"> </span><a name="loc_616_20_616_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_616_20_616_21&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_614_48_614_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_48_614_50&#39;)"><span class="hl_varref"><span class="mpre">p_</span></span></a><span class="mpre">, (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_616_20_616_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_616_20_616_21&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">))
      </span><span class="hl_conref"><span class="mpre">OpenHandle</span></span><span class="mpre"> </span><a name="loc_617_18_617_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_617_18_617_19&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> -&gt;
        </span><a href="Foreign.Marshal.Alloc.html#loc_107_1_107_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.Marshal.Alloc.html#loc_107_1_107_7&#39;)"><span class="hl_varref"><span class="mpre">alloca</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_618_19_618_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_618_19_618_28&#39;)"><span class="hl_vardecl"><span class="mpre">pExitCode</span></span></a><span class="mpre"> -&gt; do
            </span><a name="loc_619_13_619_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_13_619_16&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1Retry</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;getProcessExitCode&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
                        </span><span class="hl_varref"><span class="mpre">c_getProcessExitCode</span></span><span class="mpre"> </span><a href="#loc_617_18_617_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_617_18_617_19&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_618_19_618_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_618_19_618_28&#39;)"><span class="hl_varref"><span class="mpre">pExitCode</span></span></a><span class="mpre">
            </span><a name="loc_621_13_621_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_621_13_621_17&#39;)"><span class="hl_vardecl"><span class="mpre">code</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">peek</span></span><span class="mpre"> </span><a href="#loc_618_19_618_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_618_19_618_28&#39;)"><span class="hl_varref"><span class="mpre">pExitCode</span></span></a><span class="mpre">
            if </span><a href="#loc_619_13_619_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_13_619_16&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
              then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_614_48_614_50" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_48_614_50&#39;)"><span class="hl_varref"><span class="mpre">p_</span></span></a><span class="mpre">, (</span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre">))
              else do
                   </span><span class="hl_varref"><span class="mpre">closePHANDLE</span></span><span class="mpre"> </span><a href="#loc_617_18_617_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_617_18_617_19&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
                   let </span><a name="loc_626_24_626_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_626_24_626_25&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre">  | </span><a href="#loc_621_13_621_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_621_13_621_17&#39;)"><span class="hl_varref"><span class="mpre">code</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">ExitSuccess</span></span><span class="mpre">
                          | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">ExitFailure</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_621_13_621_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_621_13_621_17&#39;)"><span class="hl_varref"><span class="mpre">code</span></span></a><span class="mpre">)
                   </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">ClosedHandle</span></span><span class="mpre"> </span><a href="#loc_626_24_626_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_626_24_626_25&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">, (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_626_24_626_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_626_24_626_25&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">, </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">))
  case </span><a href="#loc_614_4_614_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_4_614_7&#39;)"><span class="hl_varref"><span class="mpre">m_e</span></span></a><span class="mpre"> of
    </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_630_10_630_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_630_10_630_11&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> | </span><a href="#loc_614_9_614_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_9_614_17&#39;)"><span class="hl_varref"><span class="mpre">was_open</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_613_40_613_55" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_613_40_613_55&#39;)"><span class="hl_varref"><span class="mpre">delegating_ctlc</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">endDelegateControlC</span></span><span class="mpre"> </span><a href="#loc_630_10_630_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_630_10_630_11&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">
    _                                    -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_614_4_614_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_614_4_614_7&#39;)"><span class="hl_varref"><span class="mpre">m_e</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- terminateProcess</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Attempts to terminate the specified process.  This function should</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- not be used under normal circumstances - no guarantees are given regarding</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- how cleanly the process is terminated.  To check whether the process</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- has indeed terminated, use &#39;getProcessExitCode&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- On Unix systems, &#39;terminateProcess&#39; sends the process the SIGTERM signal.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- On Windows systems, the Win32 @TerminateProcess@ function is called, passing</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- an exit code of 1.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Note: on Windows, if the process was a shell command created by</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;createProcess&#39; with &#39;shell&#39;, or created by &#39;runCommand&#39; or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;runInteractiveCommand&#39;, then &#39;terminateProcess&#39; will only</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- terminate the shell, not the command itself.  On Unix systems, both</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- processes are in a process group and will be terminated together.</span></span><span class="mpre">

</span><a href="#loc_654_1_654_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_1_654_17&#39;)"><span class="mpre">terminateProcess</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_654_1_654_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_1_654_17&#39;)"><span class="hl_fundecl"><span class="mpre">terminateProcess</span></span></a><span class="mpre"> </span><a name="loc_654_18_654_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_18_654_20&#39;)"><span class="hl_vardecl"><span class="mpre">ph</span></span></a><span class="mpre"> = do
  </span><span class="hl_varref"><span class="mpre">withProcessHandle</span></span><span class="mpre"> </span><a href="#loc_654_18_654_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_654_18_654_20&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_655_27_655_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_655_27_655_29&#39;)"><span class="hl_vardecl"><span class="mpre">p_</span></span></a><span class="mpre"> -&gt;
    case </span><a href="#loc_655_27_655_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_655_27_655_29&#39;)"><span class="hl_varref"><span class="mpre">p_</span></span></a><span class="mpre"> of
      </span><span class="hl_conref"><span class="mpre">ClosedHandle</span></span><span class="mpre"> _ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
      </span><span class="hl_conref"><span class="mpre">OpenHandle</span></span><span class="mpre"> </span><a name="loc_658_18_658_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_658_18_658_19&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> -&gt; do
        </span><span class="hl_varref"><span class="mpre">throwErrnoIfMinus1Retry_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;terminateProcess&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">c_terminateProcess</span></span><span class="mpre"> </span><a href="#loc_658_18_658_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_658_18_658_19&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- does not close the handle, we might want to try terminating it</span></span><span class="mpre">
        </span><span class="hl_comment"><span class="mpre">-- again, or get its exit code.</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- interruptProcessGroupOf</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Sends an interrupt signal to the process group of the given process.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- On Unix systems, it sends the group the SIGINT signal.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- On Windows systems, it generates a CTRL_BREAK_EVENT and will only work for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- processes created using &#39;createProcess&#39; and setting the &#39;create_group&#39; flag</span></span><span class="mpre">

</span><a href="#loc_678_1_678_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_1_678_24&#39;)"><span class="mpre">interruptProcessGroupOf</span></a><span class="mpre">
    :: </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">    </span><span class="hl_comment"><span class="mpre">-- ^ A process in the process group</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_678_1_678_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_1_678_24&#39;)"><span class="hl_fundecl"><span class="mpre">interruptProcessGroupOf</span></span></a><span class="mpre"> </span><a name="loc_678_25_678_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_25_678_27&#39;)"><span class="hl_vardecl"><span class="mpre">ph</span></span></a><span class="mpre"> = do
    </span><span class="hl_varref"><span class="mpre">withProcessHandle</span></span><span class="mpre"> </span><a href="#loc_678_25_678_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_25_678_27&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_679_29_679_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_29_679_31&#39;)"><span class="hl_vardecl"><span class="mpre">p_</span></span></a><span class="mpre"> -&gt; do
        case </span><a href="#loc_679_29_679_31" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_679_29_679_31&#39;)"><span class="hl_varref"><span class="mpre">p_</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">ClosedHandle</span></span><span class="mpre"> _ -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">OpenHandle</span></span><span class="mpre"> </span><a name="loc_682_24_682_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_682_24_682_25&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> -&gt; do
#if mingw32_HOST_OS
                </span><a name="loc_684_17_684_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_17_684_20&#39;)"><span class="hl_vardecl"><span class="mpre">pid</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">getProcessId</span></span><span class="mpre"> </span><a href="#loc_682_24_682_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_682_24_682_25&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
                </span><span class="hl_varref"><span class="mpre">generateConsoleCtrlEvent</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">cTRL_BREAK_EVENT</span></span><span class="mpre"> </span><a href="#loc_684_17_684_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_684_17_684_20&#39;)"><span class="hl_varref"><span class="mpre">pid</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- We can&#39;t use an #elif here, because MIN_VERSION_unix isn&#39;t defined</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- on Windows, so on Windows cpp fails:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- error: missing binary operator before token &quot;(&quot;</span></span><span class="mpre">
#else
                </span><a name="loc_690_17_690_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_690_17_690_21&#39;)"><span class="hl_vardecl"><span class="mpre">pgid</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">getProcessGroupIDOf</span></span><span class="mpre"> </span><a href="#loc_682_24_682_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_682_24_682_25&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
                </span><span class="hl_varref"><span class="mpre">signalProcessGroup</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">sigINT</span></span><span class="mpre"> </span><a href="#loc_690_17_690_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_690_17_690_21&#39;)"><span class="hl_varref"><span class="mpre">pgid</span></span></a><span class="mpre">
#endif
                </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Interface to C bits</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 699, srcSpanStartColumn = 1, srcSpanEndLine = 702, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 699, srcSpanStartColumn = 1, srcSpanEndLine = 699, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 699"><span class="mpre">foreign import ccall unsafe &quot;terminateProcess&quot;
  c_terminateProcess
        :: PHANDLE
        -&gt; IO CInt</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 704, srcSpanStartColumn = 1, srcSpanEndLine = 708, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 704, srcSpanStartColumn = 1, srcSpanEndLine = 704, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 704"><span class="mpre">foreign import ccall unsafe &quot;getProcessExitCode&quot;
  c_getProcessExitCode
        :: PHANDLE
        -&gt; Ptr CInt
        -&gt; IO CInt</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclForImp (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 710, srcSpanStartColumn = 1, srcSpanEndLine = 714, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 710, srcSpanStartColumn = 1, srcSpanEndLine = 710, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 710"><span class="mpre">foreign import ccall interruptible &quot;waitForProcess&quot; </span><span class="hl_comment"><span class="mpre">-- NB. safe - can block</span></span><span class="mpre">
  c_waitForProcess
        :: PHANDLE
        -&gt; Ptr CInt
        -&gt; IO CInt</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Old deprecated variants</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- TODO: We&#39;re not going to mark these functions as DEPRECATED immediately in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- process-1.2.0.0. That&#39;s because some of their replacements have not been</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- around for all that long. But they should eventually be marked with a</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- suitable DEPRECATED pragma after a release or two.</span></span><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- runCommand</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">--TODO: in a later release {-# DEPRECATED runCommand &quot;Use &#39;spawnCommand&#39; instead&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- | Runs a command using the shell.
 -}</span></span><span class="mpre">
</span><a href="#loc_738_1_738_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_1_738_11&#39;)"><span class="mpre">runCommand</span></a><span class="mpre">
  :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">

</span><a name="loc_738_1_738_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_1_738_11&#39;)"><span class="hl_fundecl"><span class="mpre">runCommand</span></span></a><span class="mpre"> </span><a name="loc_738_12_738_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_12_738_18&#39;)"><span class="hl_vardecl"><span class="mpre">string</span></span></a><span class="mpre"> = do
  (_,_,_,</span><a name="loc_739_10_739_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_739_10_739_12&#39;)"><span class="hl_vardecl"><span class="mpre">ph</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;runCommand&quot;</span></span><span class="mpre"> (</span><a href="#loc_158_1_158_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_6&#39;)"><span class="hl_varref"><span class="mpre">shell</span></span></a><span class="mpre"> </span><a href="#loc_738_12_738_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_738_12_738_18&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre">)
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_739_10_739_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_739_10_739_12&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- runProcess</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">--TODO: in a later release {-# DEPRECATED runProcess &quot;Use &#39;spawnProcess&#39; or &#39;createProcess&#39; instead&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- | Runs a raw command, optionally specifying &#39;Handle&#39;s from which to
     take the @stdin@, @stdout@ and @stderr@ channels for the new
     process (otherwise these handles are inherited from the current
     process).

     Any &#39;Handle&#39;s passed to &#39;runProcess&#39; are placed immediately in the
     closed state.

     Note: consider using the more general &#39;createProcess&#39; instead of
     &#39;runProcess&#39;.
-}</span></span><span class="mpre">
</span><a href="#loc_769_1_769_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_1_769_11&#39;)"><span class="mpre">runProcess</span></a><span class="mpre">
  :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">                   </span><span class="hl_comment"><span class="mpre">-- ^ Filename of the executable (see &#39;proc&#39; for details)</span></span><span class="mpre">
  -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">]                   </span><span class="hl_comment"><span class="mpre">-- ^ Arguments to pass to the executable</span></span><span class="mpre">
  -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">             </span><span class="hl_comment"><span class="mpre">-- ^ Optional path to the working directory</span></span><span class="mpre">
  -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)]    </span><span class="hl_comment"><span class="mpre">-- ^ Optional environment (otherwise inherit)</span></span><span class="mpre">
  -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">               </span><span class="hl_comment"><span class="mpre">-- ^ Handle to use for @stdin@ (Nothing =&gt; use existing @stdin@)</span></span><span class="mpre">
  -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">               </span><span class="hl_comment"><span class="mpre">-- ^ Handle to use for @stdout@ (Nothing =&gt; use existing @stdout@)</span></span><span class="mpre">
  -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">               </span><span class="hl_comment"><span class="mpre">-- ^ Handle to use for @stderr@ (Nothing =&gt; use existing @stderr@)</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">

</span><a name="loc_769_1_769_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_1_769_11&#39;)"><span class="hl_fundecl"><span class="mpre">runProcess</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">cmd</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">args</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">mb_cwd</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">mb_env</span></span><span class="mpre"> </span><a name="loc_769_35_769_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_35_769_43&#39;)"><span class="hl_vardecl"><span class="mpre">mb_stdin</span></span></a><span class="mpre"> </span><a name="loc_769_44_769_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_44_769_53&#39;)"><span class="hl_vardecl"><span class="mpre">mb_stdout</span></span></a><span class="mpre"> </span><a name="loc_769_54_769_63" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_54_769_63&#39;)"><span class="hl_vardecl"><span class="mpre">mb_stderr</span></span></a><span class="mpre"> = do
  (_,_,_,</span><a name="loc_770_10_770_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_770_10_770_12&#39;)"><span class="hl_vardecl"><span class="mpre">ph</span></span></a><span class="mpre">) &lt;-
      </span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;runProcess&quot;</span></span><span class="mpre">
         </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 772, srcSpanStartColumn = 10, srcSpanEndLine = 776, srcSpanEndColumn = 56}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 772, srcSpanStartColumn = 25, srcSpanEndLine = 772, srcSpanEndColumn = 26},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">(proc cmd args){ cwd = mb_cwd,
                          env = mb_env,
                          std_in  = mbToStd mb_stdin,
                          std_out = mbToStd mb_stdout,
                          std_err = mbToStd mb_stderr }</span></span><span class="mpre">
  </span><a href="#loc_783_3_783_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_3_783_13&#39;)"><span class="hl_varref"><span class="mpre">maybeClose</span></span></a><span class="mpre"> </span><a href="#loc_769_35_769_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_35_769_43&#39;)"><span class="hl_varref"><span class="mpre">mb_stdin</span></span></a><span class="mpre">
  </span><a href="#loc_783_3_783_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_3_783_13&#39;)"><span class="hl_varref"><span class="mpre">maybeClose</span></span></a><span class="mpre"> </span><a href="#loc_769_44_769_53" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_44_769_53&#39;)"><span class="hl_varref"><span class="mpre">mb_stdout</span></span></a><span class="mpre">
  </span><a href="#loc_783_3_783_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_3_783_13&#39;)"><span class="hl_varref"><span class="mpre">maybeClose</span></span></a><span class="mpre"> </span><a href="#loc_769_54_769_63" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_769_54_769_63&#39;)"><span class="hl_varref"><span class="mpre">mb_stderr</span></span></a><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_770_10_770_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_770_10_770_12&#39;)"><span class="hl_varref"><span class="mpre">ph</span></span></a><span class="mpre">
 where
  </span><a href="#loc_783_3_783_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_3_783_13&#39;)"><span class="mpre">maybeClose</span></a><span class="mpre"> :: </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
  </span><a name="loc_783_3_783_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_3_783_13&#39;)"><span class="hl_fundecl"><span class="mpre">maybeClose</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre">  </span><a name="loc_783_21_783_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_21_783_24&#39;)"><span class="hl_vardecl"><span class="mpre">hdl</span></span></a><span class="mpre">)
    | </span><a href="#loc_783_21_783_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_21_783_24&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_52_1_52_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_52_1_52_6&#39;)"><span class="hl_varref"><span class="mpre">stdin</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_783_21_783_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_21_783_24&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_63_1_63_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_63_1_63_7&#39;)"><span class="hl_varref"><span class="mpre">stdout</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&amp;&amp;</span></span><span class="mpre"> </span><a href="#loc_783_21_783_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_21_783_24&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">/=</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_74_1_74_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_74_1_74_7&#39;)"><span class="hl_varref"><span class="mpre">stderr</span></span></a><span class="mpre"> = </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_783_21_783_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_21_783_24&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre">
  </span><a href="#loc_783_3_783_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_783_3_783_13&#39;)"><span class="hl_fundecl"><span class="mpre">maybeClose</span></span></a><span class="mpre"> _ = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">

  </span><a href="#loc_788_3_788_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_788_3_788_10&#39;)"><span class="mpre">mbToStd</span></a><span class="mpre"> :: </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">StdStream</span></span><span class="mpre">
  </span><a name="loc_788_3_788_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_788_3_788_10&#39;)"><span class="hl_fundecl"><span class="mpre">mbToStd</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">    = </span><span class="hl_conref"><span class="mpre">Inherit</span></span><span class="mpre">
  </span><a href="#loc_788_3_788_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_788_3_788_10&#39;)"><span class="hl_fundecl"><span class="mpre">mbToStd</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_789_17_789_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_789_17_789_20&#39;)"><span class="hl_vardecl"><span class="mpre">hdl</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">UseHandle</span></span><span class="mpre"> </span><a href="#loc_789_17_789_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_789_17_789_20&#39;)"><span class="hl_varref"><span class="mpre">hdl</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- runInteractiveCommand</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">--TODO: in a later release {-# DEPRECATED runInteractiveCommand &quot;Use &#39;createProcess&#39; instead&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- | Runs a command using the shell, and returns &#39;Handle&#39;s that may
     be used to communicate with the process via its @stdin@, @stdout@,
     and @stderr@ respectively. The &#39;Handle&#39;s are initially in binary
     mode; if you need them to be in text mode then use &#39;hSetBinaryMode&#39;.
-}</span></span><span class="mpre">
</span><a href="#loc_806_1_806_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_806_1_806_22&#39;)"><span class="mpre">runInteractiveCommand</span></a><span class="mpre">
  :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">)

</span><a name="loc_806_1_806_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_806_1_806_22&#39;)"><span class="hl_fundecl"><span class="mpre">runInteractiveCommand</span></span></a><span class="mpre"> </span><a name="loc_806_23_806_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_806_23_806_29&#39;)"><span class="hl_vardecl"><span class="mpre">string</span></span></a><span class="mpre"> =
  </span><a href="#loc_841_1_841_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_1_841_23&#39;)"><span class="hl_varref"><span class="mpre">runInteractiveProcess1</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;runInteractiveCommand&quot;</span></span><span class="mpre"> (</span><a href="#loc_158_1_158_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_6&#39;)"><span class="hl_varref"><span class="mpre">shell</span></span></a><span class="mpre"> </span><a href="#loc_806_23_806_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_806_23_806_29&#39;)"><span class="hl_varref"><span class="mpre">string</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">-- ----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- runInteractiveProcess</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">--TODO: in a later release {-# DEPRECATED runInteractiveCommand &quot;Use &#39;createProcess&#39; instead&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- | Runs a raw command, and returns &#39;Handle&#39;s that may be used to communicate
     with the process via its @stdin@, @stdout@ and @stderr@ respectively.

    For example, to start a process and feed a string to its stdin:

&gt;   (inp,out,err,pid) &lt;- runInteractiveProcess &quot;...&quot;
&gt;   forkIO (hPutStr inp str)

    The &#39;Handle&#39;s are initially in binary mode; if you need them to be
    in text mode then use &#39;hSetBinaryMode&#39;.
-}</span></span><span class="mpre">
</span><a href="#loc_833_1_833_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_833_1_833_22&#39;)"><span class="mpre">runInteractiveProcess</span></a><span class="mpre">
  :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">                   </span><span class="hl_comment"><span class="mpre">-- ^ Filename of the executable (see &#39;proc&#39; for details)</span></span><span class="mpre">
  -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">]                   </span><span class="hl_comment"><span class="mpre">-- ^ Arguments to pass to the executable</span></span><span class="mpre">
  -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">             </span><span class="hl_comment"><span class="mpre">-- ^ Optional path to the working directory</span></span><span class="mpre">
  -&gt; </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> [(</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)]    </span><span class="hl_comment"><span class="mpre">-- ^ Optional environment (otherwise inherit)</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">)

</span><a name="loc_833_1_833_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_833_1_833_22&#39;)"><span class="hl_fundecl"><span class="mpre">runInteractiveProcess</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">cmd</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">args</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">mb_cwd</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">mb_env</span></span><span class="mpre"> = do
  </span><a href="#loc_841_1_841_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_1_841_23&#39;)"><span class="hl_varref"><span class="mpre">runInteractiveProcess1</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;runInteractiveProcess&quot;</span></span><span class="mpre">
        </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 835, srcSpanStartColumn = 9, srcSpanEndLine = 835, srcSpanEndColumn = 54}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 835, srcSpanStartColumn = 24, srcSpanEndLine = 835, srcSpanEndColumn = 25},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine "><span class="mpre">(proc cmd args){ cwd = mb_cwd, env = mb_env }</span></span><span class="mpre">

</span><a href="#loc_841_1_841_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_1_841_23&#39;)"><span class="mpre">runInteractiveProcess1</span></a><span class="mpre">
  :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">CreateProcess</span></span><span class="mpre">
  -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">Handle</span></span><span class="mpre">,</span><span class="hl_tyconref"><span class="mpre">ProcessHandle</span></span><span class="mpre">)
</span><a name="loc_841_1_841_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_1_841_23&#39;)"><span class="hl_fundecl"><span class="mpre">runInteractiveProcess1</span></span></a><span class="mpre"> </span><a name="loc_841_24_841_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_24_841_27&#39;)"><span class="hl_vardecl"><span class="mpre">fun</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">cmd</span></span><span class="mpre"> = do
  (</span><a name="loc_842_4_842_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_4_842_9&#39;)"><span class="hl_vardecl"><span class="mpre">mb_in</span></span></a><span class="mpre">, </span><a name="loc_842_11_842_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_11_842_17&#39;)"><span class="hl_vardecl"><span class="mpre">mb_out</span></span></a><span class="mpre">, </span><a name="loc_842_19_842_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_19_842_25&#39;)"><span class="hl_vardecl"><span class="mpre">mb_err</span></span></a><span class="mpre">, </span><a name="loc_842_27_842_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_27_842_28&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) &lt;-
      </span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><a href="#loc_841_24_841_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_24_841_27&#39;)"><span class="hl_varref"><span class="mpre">fun</span></span></a><span class="mpre">
           </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 844, srcSpanStartColumn = 12, srcSpanEndLine = 846, srcSpanEndColumn = 39}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 844, srcSpanStartColumn = 15, srcSpanEndLine = 844, srcSpanEndColumn = 16},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">cmd{ std_in  = CreatePipe,
                std_out = CreatePipe,
                std_err = CreatePipe }</span></span><span class="mpre">
  </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_91_1_91_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_91_1_91_9&#39;)"><span class="hl_varref"><span class="mpre">fromJust</span></span></a><span class="mpre"> </span><a href="#loc_842_4_842_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_4_842_9&#39;)"><span class="hl_varref"><span class="mpre">mb_in</span></span></a><span class="mpre">, </span><a href="Data.Maybe.html#loc_91_1_91_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_91_1_91_9&#39;)"><span class="hl_varref"><span class="mpre">fromJust</span></span></a><span class="mpre"> </span><a href="#loc_842_11_842_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_11_842_17&#39;)"><span class="hl_varref"><span class="mpre">mb_out</span></span></a><span class="mpre">, </span><a href="Data.Maybe.html#loc_91_1_91_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_91_1_91_9&#39;)"><span class="hl_varref"><span class="mpre">fromJust</span></span></a><span class="mpre"> </span><a href="#loc_842_19_842_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_19_842_25&#39;)"><span class="hl_varref"><span class="mpre">mb_err</span></span></a><span class="mpre">, </span><a href="#loc_842_27_842_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_27_842_28&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
#endif /* !__HUGS__ */


</span><span class="hl_comment"><span class="mpre">-- ---------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- system &amp; rawSystem</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">--TODO: in a later release {-# DEPRECATED system &quot;Use &#39;callCommand&#39; (or &#39;spawnCommand&#39; and &#39;waitForProcess&#39;) instead&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-|
Computation @system cmd@ returns the exit code produced when the
operating system runs the shell command @cmd@.

This computation may fail with one of the following
&#39;System.IO.Error.IOErrorType&#39; exceptions:

[@PermissionDenied@]
The process has insufficient privileges to perform the operation.

[@ResourceExhausted@]
Insufficient resources are available to perform the operation.

[@UnsupportedOperation@]
The implementation does not support system calls.

On Windows, &#39;system&#39; passes the command to the Windows command
interpreter (@CMD.EXE@ or @COMMAND.COM@), hence Unixy shell tricks
will not work.

On Unix systems, see &#39;waitForProcess&#39; for the meaning of exit codes
when the process died as the result of a signal.
-}</span></span><span class="mpre">
#ifdef __GLASGOW_HASKELL__
</span><a href="#loc_881_1_881_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_881_1_881_7&#39;)"><span class="mpre">system</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">
</span><a name="loc_881_1_881_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_881_1_881_7&#39;)"><span class="hl_fundecl"><span class="mpre">system</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre"> = </span><a href="GHC.IO.Exception.html#loc_217_1_217_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_217_1_217_12&#39;)"><span class="hl_varref"><span class="mpre">ioException</span></span></a><span class="mpre"> (</span><a href="System.IO.Error.html#loc_289_1_289_18" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_289_1_289_18&#39;)"><span class="hl_varref"><span class="mpre">ioeSetErrorString</span></span></a><span class="mpre"> (</span><a href="System.IO.Error.html#loc_115_1_115_10" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_115_1_115_10&#39;)"><span class="hl_varref"><span class="mpre">mkIOError</span></span></a><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_272_5_272_20" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_272_5_272_20&#39;)"><span class="hl_conref"><span class="mpre">InvalidArgument</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;system&quot;</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">) </span><span class="hl_string"><span class="mpre">&quot;null command&quot;</span></span><span class="mpre">)
</span><a href="#loc_881_1_881_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_881_1_881_7&#39;)"><span class="hl_fundecl"><span class="mpre">system</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">str</span></span><span class="mpre"> = do
  (_,_,_,</span><a name="loc_883_10_883_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_883_10_883_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;system&quot;</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 883, srcSpanStartColumn = 40, srcSpanEndLine = 883, srcSpanEndColumn = 76}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 883, srcSpanStartColumn = 52, srcSpanEndLine = 883, srcSpanEndColumn = 53},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">(shell str) { delegate_ctlc = True }</span></span><span class="mpre">
  </span><a href="#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="hl_varref"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a href="#loc_883_10_883_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_883_10_883_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
#endif  /* __GLASGOW_HASKELL__ */


</span><span class="hl_comment"><span class="mpre">--TODO: in a later release {-# DEPRECATED rawSystem &quot;Use &#39;callProcess&#39; (or &#39;spawnProcess&#39; and &#39;waitForProcess&#39;) instead&quot; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-|
The computation @&#39;rawSystem&#39; /cmd/ /args/@ runs the operating system command
@/cmd/@ in such a way that it receives as arguments the @/args/@ strings
exactly as given, with no funny escaping or shell meta-syntax expansion.
It will therefore behave more portably between operating systems than &#39;system&#39;.

The return codes and possible failures are the same as for &#39;system&#39;.
-}</span></span><span class="mpre">
</span><a href="#loc_900_1_900_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_900_1_900_10&#39;)"><span class="mpre">rawSystem</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">
#ifdef __GLASGOW_HASKELL__
</span><a name="loc_900_1_900_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_900_1_900_10&#39;)"><span class="hl_fundecl"><span class="mpre">rawSystem</span></span></a><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">cmd</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">args</span></span><span class="mpre"> = do
  (_,_,_,</span><a name="loc_901_10_901_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_901_10_901_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">createProcess_</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;rawSystem&quot;</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 901, srcSpanStartColumn = 43, srcSpanEndLine = 901, srcSpanEndColumn = 83}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine = 901, srcSpanStartColumn = 59, srcSpanEndLine = 901, srcSpanEndColumn = 60},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/process-1.2.0.0/System/Process.hs&quot;, srcSpanStartLine"><span class="mpre">(proc cmd args) { delegate_ctlc = True }</span></span><span class="mpre">
  </span><a href="#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_575_1_575_15&#39;)"><span class="hl_varref"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a href="#loc_901_10_901_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_901_10_901_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
#elif !mingw32_HOST_OS
</span><span class="hl_comment"><span class="mpre">-- crude fallback implementation: could do much better than this under Unix</span></span><span class="mpre">
</span><a href="#loc_900_1_900_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_900_1_900_10&#39;)"><span class="hl_fundecl"><span class="mpre">rawSystem</span></span></a><span class="mpre"> </span><a name="loc_905_11_905_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_11_905_14&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a name="loc_905_15_905_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_15_905_19&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> = </span><a href="#loc_881_1_881_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_881_1_881_7&#39;)"><span class="hl_varref"><span class="mpre">system</span></span></a><span class="mpre"> (</span><a href="#loc_552_1_552_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_1_552_19&#39;)"><span class="hl_varref"><span class="mpre">showCommandForUser</span></span></a><span class="mpre"> </span><a href="#loc_905_11_905_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_11_905_14&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a href="#loc_905_15_905_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_905_15_905_19&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">)
#elif __HUGS__
</span><a href="#loc_900_1_900_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_900_1_900_10&#39;)"><span class="hl_fundecl"><span class="mpre">rawSystem</span></span></a><span class="mpre"> </span><a name="loc_907_11_907_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_907_11_907_14&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a name="loc_907_15_907_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_907_15_907_19&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> = </span><a href="#loc_881_1_881_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_881_1_881_7&#39;)"><span class="hl_varref"><span class="mpre">system</span></span></a><span class="mpre"> (</span><a href="#loc_907_11_907_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_907_11_907_14&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_552_1_552_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_1_552_19&#39;)"><span class="hl_varref"><span class="mpre">showCommandForUser</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre"> </span><a href="#loc_907_15_907_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_907_15_907_19&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">)
#else
</span><a href="#loc_900_1_900_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_900_1_900_10&#39;)"><span class="hl_fundecl"><span class="mpre">rawSystem</span></span></a><span class="mpre"> </span><a name="loc_909_11_909_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_909_11_909_14&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a name="loc_909_15_909_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_909_15_909_19&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> = </span><a href="#loc_881_1_881_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_881_1_881_7&#39;)"><span class="hl_varref"><span class="mpre">system</span></span></a><span class="mpre"> (</span><a href="#loc_552_1_552_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_1_552_19&#39;)"><span class="hl_varref"><span class="mpre">showCommandForUser</span></span></a><span class="mpre"> </span><a href="#loc_909_11_909_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_909_11_909_14&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><a href="#loc_909_15_909_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_909_15_909_19&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">)
#endif
</span></div></body></html>