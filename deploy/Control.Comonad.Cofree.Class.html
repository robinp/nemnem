<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FunctionalDependencies #-}
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE UndecidableInstances #-}
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Comonad.Cofree.Class</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2008-2011 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  fundeps, MPTCs</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Comonad.Cofree.Class
  ( ComonadCofree(..)
  ) where

import Control.Applicative
import Control.Comonad
import Control.Comonad.Trans.Env
import Control.Comonad.Trans.Store
import Control.Comonad.Trans.Traced
import Control.Comonad.Trans.Identity
import Data.List.NonEmpty
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 26, srcSpanStartColumn = 8, srcSpanEndLine = 26, srcSpanEndColumn = 22}, srcInfoPoints = []}) &quot;Data.Semigroup&quot;"><span class="mpre">Data.Semigroup</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Allows you to peel a layer off a cofree comonad.</span></span><span class="mpre">
class </span><span class="warning" data-warning="ClassDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 29, srcSpanStartColumn = 7, srcSpanEndLine = 29, srcSpanEndColumn = 32}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 29, srcSpanStartColumn = 7, srcSpanEndLine = 29, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Cla"><span class="mpre">(Functor f, Comonad w) =&gt;</span></span><span class="mpre"> </span><a name="loc_29_33_29_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_33_29_46&#39;)"><span class="hl_classdecl"><span class="mpre">ComonadCofree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> | </span><span class="warning" data-warning="FundepFunDep (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 29, srcSpanStartColumn = 53, srcSpanEndLine = 29, srcSpanEndColumn = 59}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 29, srcSpanStartColumn = 55, srcSpanEndLine = 29, srcSpanEndColumn = 57}]}) [Ident (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull"><span class="mpre">w -&gt; f</span></span><span class="mpre"> where
  </span><span class="hl_comment"><span class="mpre">-- | Remove a layer.</span></span><span class="mpre">
  </span><a name="loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="mpre">unwrap</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)

instance </span><a href="#loc_29_33_29_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_33_29_46&#39;)"><span class="hl_classref"><span class="mpre">ComonadCofree</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Maybe</span></span><span class="mpre"> </span><a href="Data.List.NonEmpty.html#loc_154_6_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.NonEmpty.html#loc_154_6_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">NonEmpty</span></span></a><span class="mpre"> where
  </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_fundecl"><span class="mpre">unwrap</span></span></a><span class="mpre"> (_ </span><a href="Data.List.NonEmpty.html#loc_154_21_154_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.NonEmpty.html#loc_154_21_154_23&#39;)"><span class="hl_infix"><span class="mpre">:|</span></span></a><span class="mpre"> [])       = </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre">
  </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_fundecl"><span class="mpre">unwrap</span></span></a><span class="mpre"> (_ </span><a href="Data.List.NonEmpty.html#loc_154_21_154_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.NonEmpty.html#loc_154_21_154_23&#39;)"><span class="hl_infix"><span class="mpre">:|</span></span></a><span class="mpre"> (</span><a name="loc_35_17_35_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_17_35_18&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a name="loc_35_21_35_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_21_35_23&#39;)"><span class="hl_vardecl"><span class="mpre">as</span></span></a><span class="mpre">)) = </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> (</span><a href="#loc_35_17_35_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_17_35_18&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre"> </span><a href="Data.List.NonEmpty.html#loc_154_21_154_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.NonEmpty.html#loc_154_21_154_23&#39;)"><span class="hl_infix"><span class="mpre">:|</span></span></a><span class="mpre"> </span><a href="#loc_35_21_35_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_35_21_35_23&#39;)"><span class="hl_varref"><span class="mpre">as</span></span></a><span class="mpre">)

instance </span><a href="#loc_29_33_29_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_33_29_46&#39;)"><span class="hl_classref"><span class="mpre">ComonadCofree</span></span></a><span class="mpre"> (</span><a href="Control.Applicative.html#loc_236_9_236_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_236_9_236_14&#39;)"><span class="hl_tyconref"><span class="mpre">Const</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">(,)</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) where
  </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_vardecl"><span class="mpre">unwrap</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">Const</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fst</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 40, srcSpanStartColumn = 10, srcSpanEndLine = 40, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 40, srcSpanStartColumn = 28, srcSpanEndLine = 40, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/p"><span class="mpre">ComonadCofree f w =&gt;</span></span><span class="mpre"> </span><a href="#loc_29_33_29_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_33_29_46&#39;)"><span class="hl_classref"><span class="mpre">ComonadCofree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> (</span><a href="Control.Monad.Trans.Identity.html#loc_37_9_37_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Identity.html#loc_37_9_37_18&#39;)"><span class="hl_tyconref"><span class="mpre">IdentityT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_vardecl"><span class="mpre">unwrap</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">IdentityT</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_varref"><span class="mpre">unwrap</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">runIdentityT</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 10, srcSpanEndLine = 43, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 28, srcSpanEndLine = 43, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/p"><span class="mpre">ComonadCofree f w =&gt;</span></span><span class="mpre"> </span><a href="#loc_29_33_29_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_33_29_46&#39;)"><span class="hl_classref"><span class="mpre">ComonadCofree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> (</span><a href="Control.Comonad.Trans.Env.html#loc_127_6_127_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Env.html#loc_127_6_127_10&#39;)"><span class="hl_tyconref"><span class="mpre">EnvT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">e</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_fundecl"><span class="mpre">unwrap</span></span></a><span class="mpre"> (</span><a href="Control.Comonad.Trans.Env.html#loc_127_19_127_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Env.html#loc_127_19_127_23&#39;)"><span class="hl_conref"><span class="mpre">EnvT</span></span></a><span class="mpre"> </span><a name="loc_44_16_44_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_16_44_17&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> </span><a name="loc_44_18_44_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_18_44_20&#39;)"><span class="hl_vardecl"><span class="mpre">wa</span></span></a><span class="mpre">) = </span><a href="Control.Comonad.Trans.Env.html#loc_127_19_127_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Env.html#loc_127_19_127_23&#39;)"><span class="hl_conref"><span class="mpre">EnvT</span></span></a><span class="mpre"> </span><a href="#loc_44_16_44_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_16_44_17&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_varref"><span class="mpre">unwrap</span></span></a><span class="mpre"> </span><a href="#loc_44_18_44_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_44_18_44_20&#39;)"><span class="hl_varref"><span class="mpre">wa</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 10, srcSpanEndLine = 46, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 28, srcSpanEndLine = 46, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/p"><span class="mpre">ComonadCofree f w =&gt;</span></span><span class="mpre"> </span><a href="#loc_29_33_29_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_33_29_46&#39;)"><span class="hl_classref"><span class="mpre">ComonadCofree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> (</span><a href="Control.Comonad.Trans.Store.html#loc_126_6_126_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Store.html#loc_126_6_126_12&#39;)"><span class="hl_tyconref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_fundecl"><span class="mpre">unwrap</span></span></a><span class="mpre"> (</span><a href="Control.Comonad.Trans.Store.html#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Store.html#loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a name="loc_47_18_47_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_18_47_21&#39;)"><span class="hl_vardecl"><span class="mpre">wsa</span></span></a><span class="mpre"> </span><a name="loc_47_22_47_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_22_47_23&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="Control.Comonad.Trans.Store.html#loc_126_21_126_27" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Store.html#loc_126_21_126_27&#39;)"><span class="hl_conref"><span class="mpre">StoreT</span></span></a><span class="mpre"> </span><a href="#loc_47_22_47_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_22_47_23&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_varref"><span class="mpre">unwrap</span></span></a><span class="mpre"> </span><a href="#loc_47_18_47_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_18_47_21&#39;)"><span class="hl_varref"><span class="mpre">wsa</span></span></a><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 49, srcSpanStartColumn = 10, srcSpanEndLine = 49, srcSpanEndColumn = 55}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/Class.hs&quot;, srcSpanStartLine = 49, srcSpanStartColumn = 10, srcSpanEndLine = 49, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/free-4.9/src/Control/Comonad/Cofree/"><span class="mpre">(ComonadCofree f w, Semigroup m, Monoid m) =&gt;</span></span><span class="mpre"> </span><a href="#loc_29_33_29_46" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_29_33_29_46&#39;)"><span class="hl_classref"><span class="mpre">ComonadCofree</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> (</span><a href="Control.Comonad.Trans.Traced.html#loc_61_9_61_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.Trans.Traced.html#loc_61_9_61_16&#39;)"><span class="hl_tyconref"><span class="mpre">TracedT</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_fundecl"><span class="mpre">unwrap</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">TracedT</span></span><span class="mpre"> </span><a name="loc_50_19_50_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_19_50_22&#39;)"><span class="hl_vardecl"><span class="mpre">wma</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">TracedT</span></span><span class="mpre"> </span><a href="Data.Functor.html#loc_32_1_32_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.html#loc_32_1_32_6&#39;)"><span class="hl_infix"><span class="mpre">&lt;$&gt;</span></span></a><span class="mpre"> </span><a href="#loc_31_3_31_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_3_31_9&#39;)"><span class="hl_varref"><span class="mpre">unwrap</span></span></a><span class="mpre"> </span><a href="#loc_50_19_50_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_19_50_22&#39;)"><span class="hl_varref"><span class="mpre">wma</span></span></a><span class="mpre">
</span></div></body></html>