<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE ScopedTypeVariables #-}

</span><span class="hl_comment"><span class="mpre">-- You can set the following VERBOSE environment variable to control</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the verbosity of the output generated by this module.</span></span><span class="mpre">
module PackageTests.PackageTester
    ( PackageSpec(..)
    , Success(..)
    , Result(..)

    </span><span class="hl_comment"><span class="mpre">-- * Running cabal commands</span></span><span class="mpre">
    , cabal_configure
    , cabal_build
    , cabal_test
    , cabal_bench
    , cabal_install
    , unregister
    , compileSetup
    , run

    </span><span class="hl_comment"><span class="mpre">-- * Test helpers</span></span><span class="mpre">
    , assertBuildSucceeded
    , assertBuildFailed
    , assertTestSucceeded
    , assertInstallSucceeded
    , assertOutputContains
    , assertOutputDoesNotContain
    ) where

import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 29, srcSpanStartColumn = 18, srcSpanEndLine = 29, srcSpanEndColumn = 46}, srcInfoPoints = []}) &quot;Control.Exception.Extensible&quot;"><span class="mpre">Control.Exception.Extensible</span></span><span class="mpre"> as E
import Control.Monad
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 31, srcSpanStartColumn = 18, srcSpanEndLine = 31, srcSpanEndColumn = 39}, srcInfoPoints = []}) &quot;Data.ByteString.Char8&quot;"><span class="mpre">Data.ByteString.Char8</span></span><span class="mpre"> as C
import Data.List
import Data.Maybe
import System.Directory (</span><a href="System.Directory.html#loc_561_1_561_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_561_1_561_17&#39;)"><span class="mpre">canonicalizePath</span></a><span class="mpre">, </span><a href="System.Directory.html#loc_726_1_726_14" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_726_1_726_14&#39;)"><span class="mpre">doesFileExist</span></a><span class="mpre">, </span><a href="System.Directory.html#loc_673_1_673_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_673_1_673_20&#39;)"><span class="mpre">getCurrentDirectory</span></a><span class="mpre">)
import System.Environment (getEnv)
import System.Exit (</span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="mpre">ExitCode</span></a><span class="mpre">(</span><a href="GHC.IO.Exception.html#loc_206_5_206_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_206_5_206_16&#39;)"><span class="mpre">ExitSuccess</span></a><span class="mpre">))
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 37, srcSpanStartColumn = 8, srcSpanEndLine = 37, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;System.FilePath&quot;"><span class="mpre">System.FilePath</span></span><span class="mpre">
import System.IO
import System.IO.Error (</span><a href="System.IO.Error.html#loc_135_1_135_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_135_1_135_20&#39;)"><span class="mpre">isDoesNotExistError</span></a><span class="mpre">)
import System.Process (</span><a href="System.Process.html#loc_769_1_769_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Process.html#loc_769_1_769_11&#39;)"><span class="mpre">runProcess</span></a><span class="mpre">, </span><a href="System.Process.html#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Process.html#loc_575_1_575_15&#39;)"><span class="mpre">waitForProcess</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 41, srcSpanStartColumn = 8, srcSpanEndLine = 41, srcSpanEndColumn = 18}, srcInfoPoints = []}) &quot;Test.HUnit&quot;"><span class="mpre">Test.HUnit</span></span><span class="mpre"> (Assertion, assertFailure)

import Distribution.Simple.BuildPaths (</span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="mpre">exeExtension</span></a><span class="mpre">)
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 44, srcSpanStartColumn = 8, srcSpanEndLine = 44, srcSpanEndColumn = 38}, srcInfoPoints = []}) &quot;Distribution.Compat.CreatePipe&quot;"><span class="mpre">Distribution.Compat.CreatePipe</span></span><span class="mpre"> (createPipe)
import Distribution.ReadE (</span><a href="Distribution.ReadE.html#loc_74_1_74_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.ReadE.html#loc_74_1_74_12&#39;)"><span class="mpre">readEOrFail</span></a><span class="mpre">)
import Distribution.Verbosity (</span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="mpre">Verbosity</span></a><span class="mpre">, </span><a href="Distribution.Verbosity.html#loc_76_1_76_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_76_1_76_10&#39;)"><span class="mpre">deafening</span></a><span class="mpre">, </span><a href="Distribution.Verbosity.html#loc_98_1_98_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_98_1_98_16&#39;)"><span class="mpre">flagToVerbosity</span></a><span class="mpre">, </span><a href="Distribution.Verbosity.html#loc_67_1_67_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_67_1_67_7&#39;)"><span class="mpre">normal</span></a><span class="mpre">,
                               </span><a href="Distribution.Verbosity.html#loc_71_1_71_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_71_1_71_8&#39;)"><span class="mpre">verbose</span></a><span class="mpre">)

data </span><a name="loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tycondecl"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> = </span><span class="hl_condecl"><span class="mpre">PackageSpec</span></span><span class="mpre">
    { </span><a name="loc_50_7_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_7_50_16&#39;)"><span class="hl_fielddecl"><span class="mpre">directory</span></span></a><span class="mpre">  :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre">
    , </span><a name="loc_51_7_51_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_7_51_17&#39;)"><span class="hl_fielddecl"><span class="mpre">configOpts</span></span></a><span class="mpre"> :: [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">]
    }

data </span><a name="loc_54_6_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_6_54_13&#39;)"><span class="hl_tycondecl"><span class="mpre">Success</span></span></a><span class="mpre"> = </span><a name="loc_54_16_54_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_16_54_23&#39;)"><span class="hl_condecl"><span class="mpre">Failure</span></span></a><span class="mpre">
             | </span><a name="loc_55_16_55_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_16_55_32&#39;)"><span class="hl_condecl"><span class="mpre">ConfigureSuccess</span></span></a><span class="mpre">
             | </span><a name="loc_56_16_56_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_16_56_28&#39;)"><span class="hl_condecl"><span class="mpre">BuildSuccess</span></span></a><span class="mpre">
             | </span><a name="loc_57_16_57_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_16_57_30&#39;)"><span class="hl_condecl"><span class="mpre">InstallSuccess</span></span></a><span class="mpre">
             | </span><a name="loc_58_16_58_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_16_58_27&#39;)"><span class="hl_condecl"><span class="mpre">TestSuccess</span></span></a><span class="mpre">
             | </span><a name="loc_59_16_59_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_16_59_28&#39;)"><span class="hl_condecl"><span class="mpre">BenchSuccess</span></span></a><span class="mpre">
             </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 60, srcSpanStartColumn = 14, srcSpanEndLine = 60, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 60, srcSpanStartColumn = 14, srcSpanEndLine = 60, srcSpanEndColumn = 22},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/Pa"><span class="mpre">deriving (Eq, Show)</span></span><span class="mpre">

data </span><a name="loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tycondecl"><span class="mpre">Result</span></span></a><span class="mpre"> = </span><a name="loc_62_15_62_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_21&#39;)"><span class="hl_condecl"><span class="mpre">Result</span></span></a><span class="mpre">
    { </span><a name="loc_63_7_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_17&#39;)"><span class="hl_fielddecl"><span class="mpre">successful</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
    , </span><a name="loc_64_7_64_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_64_7_64_14&#39;)"><span class="hl_fielddecl"><span class="mpre">success</span></span></a><span class="mpre">    :: </span><a href="#loc_54_6_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_6_54_13&#39;)"><span class="hl_tyconref"><span class="mpre">Success</span></span></a><span class="mpre">
    , </span><a name="loc_65_7_65_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_7_65_17&#39;)"><span class="hl_fielddecl"><span class="mpre">outputText</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
    } </span><span class="warning" data-warning="DataDecl DerivingsDeriving (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 66, srcSpanStartColumn = 7, srcSpanEndLine = 66, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 66, srcSpanStartColumn = 7, srcSpanEndLine = 66, srcSpanEndColumn = 15}]}) [IHead (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant"><span class="mpre">deriving Show</span></span><span class="mpre">

</span><a href="#loc_69_1_69_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_11&#39;)"><span class="mpre">nullResult</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_69_1_69_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_11&#39;)"><span class="hl_vardecl"><span class="mpre">nullResult</span></span></a><span class="mpre"> = </span><a href="#loc_62_15_62_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_15_62_21&#39;)"><span class="hl_conref"><span class="mpre">Result</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre"> </span><a href="#loc_54_16_54_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_16_54_23&#39;)"><span class="hl_conref"><span class="mpre">Failure</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Running cabal commands</span></span><span class="mpre">

</span><a href="#loc_75_1_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_10&#39;)"><span class="mpre">recordRun</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) -&gt; </span><a href="#loc_54_6_54_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_54_6_54_13&#39;)"><span class="hl_tyconref"><span class="mpre">Success</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_75_1_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_10&#39;)"><span class="hl_fundecl"><span class="mpre">recordRun</span></span></a><span class="mpre"> (</span><span class="hl_vardecl"><span class="mpre">cmd</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">exitCode</span></span><span class="mpre">, </span><span class="hl_vardecl"><span class="mpre">exeOutput</span></span><span class="mpre">) </span><span class="hl_vardecl"><span class="mpre">thisSucc</span></span><span class="mpre"> </span><span class="hl_vardecl"><span class="mpre">res</span></span><span class="mpre"> =
    </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 76, srcSpanStartColumn = 5, srcSpanEndLine = 82, srcSpanEndColumn = 10}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/PackageTests/PackageTester.hs&quot;, srcSpanStartLine = 76, srcSpanStartColumn = 9, srcSpanEndLine = 76, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/Cabal-1.18.1.3/tests/Pac"><span class="mpre">res { successful = successful res &amp;&amp; exitCode == ExitSuccess
        , success    = if exitCode == ExitSuccess then thisSucc
                       else success res
        , outputText =
            (if null $ outputText res then &quot;&quot; else outputText res ++ &quot;\n&quot;) ++
            cmd ++ &quot;\n&quot; ++ exeOutput
        }</span></span><span class="mpre">

</span><a href="#loc_85_1_85_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_16&#39;)"><span class="mpre">cabal_configure</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_85_1_85_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_1_85_16&#39;)"><span class="hl_fundecl"><span class="mpre">cabal_configure</span></span></a><span class="mpre"> </span><a name="loc_85_17_85_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_17_85_21&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_85_22_85_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_22_85_29&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_86_5_86_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_5_86_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_91_1_91_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_17&#39;)"><span class="hl_varref"><span class="mpre">doCabalConfigure</span></span></a><span class="mpre"> </span><a href="#loc_85_17_85_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_17_85_21&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_85_22_85_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_22_85_29&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
    </span><a href="#loc_218_1_218_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_7&#39;)"><span class="hl_varref"><span class="mpre">record</span></span></a><span class="mpre"> </span><a href="#loc_85_17_85_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_85_17_85_21&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_86_5_86_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_5_86_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_86_5_86_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_86_5_86_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">

</span><a href="#loc_91_1_91_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_17&#39;)"><span class="mpre">doCabalConfigure</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_91_1_91_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_17&#39;)"><span class="hl_fundecl"><span class="mpre">doCabalConfigure</span></span></a><span class="mpre"> </span><a name="loc_91_18_91_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_18_91_22&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_91_23_91_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_23_91_30&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_92_5_92_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_5_92_16&#39;)"><span class="hl_specname"><span class="mpre">cleanResult</span></span></a><span class="mpre">@(_, _, _) &lt;- </span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="hl_varref"><span class="mpre">cabal</span></span></a><span class="mpre"> </span><a href="#loc_91_18_91_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_18_91_22&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;clean&quot;</span></span><span class="mpre">] </span><a href="#loc_91_23_91_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_23_91_30&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
    </span><a href="#loc_212_1_212_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_1_212_15&#39;)"><span class="hl_varref"><span class="mpre">requireSuccess</span></span></a><span class="mpre"> </span><a href="#loc_92_5_92_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_92_5_92_16&#39;)"><span class="hl_varref"><span class="mpre">cleanResult</span></span></a><span class="mpre">
    </span><a name="loc_94_5_94_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_5_94_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="hl_varref"><span class="mpre">cabal</span></span></a><span class="mpre"> </span><a href="#loc_91_18_91_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_18_91_22&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre">
           ([</span><span class="hl_string"><span class="mpre">&quot;configure&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;--user&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-w&quot;</span></span><span class="mpre">, </span><a href="#loc_91_23_91_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_23_91_30&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">] </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_51_7_51_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_7_51_17&#39;)"><span class="hl_varref"><span class="mpre">configOpts</span></span></a><span class="mpre"> </span><a href="#loc_91_18_91_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_18_91_22&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre">)
           </span><a href="#loc_91_23_91_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_23_91_30&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_75_1_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_10&#39;)"><span class="hl_varref"><span class="mpre">recordRun</span></span></a><span class="mpre"> </span><a href="#loc_94_5_94_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_5_94_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><a href="#loc_55_16_55_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_55_16_55_32&#39;)"><span class="hl_conref"><span class="mpre">ConfigureSuccess</span></span></a><span class="mpre"> </span><a href="#loc_69_1_69_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_11&#39;)"><span class="hl_varref"><span class="mpre">nullResult</span></span></a><span class="mpre">

</span><a href="#loc_100_1_100_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_1_100_13&#39;)"><span class="mpre">doCabalBuild</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_100_1_100_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_1_100_13&#39;)"><span class="hl_fundecl"><span class="mpre">doCabalBuild</span></span></a><span class="mpre"> </span><a name="loc_100_14_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_14_100_18&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_100_19_100_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_19_100_26&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_101_5_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_17&#39;)"><span class="hl_vardecl"><span class="mpre">configResult</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_91_1_91_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_91_1_91_17&#39;)"><span class="hl_varref"><span class="mpre">doCabalConfigure</span></span></a><span class="mpre"> </span><a href="#loc_100_14_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_14_100_18&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_100_19_100_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_19_100_26&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
    if </span><a href="#loc_63_7_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_17&#39;)"><span class="hl_varref"><span class="mpre">successful</span></span></a><span class="mpre"> </span><a href="#loc_101_5_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_17&#39;)"><span class="hl_varref"><span class="mpre">configResult</span></span></a><span class="mpre">
        then do
            </span><a name="loc_104_13_104_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_13_104_16&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="hl_varref"><span class="mpre">cabal</span></span></a><span class="mpre"> </span><a href="#loc_100_14_100_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_14_100_18&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;build&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;-v&quot;</span></span><span class="mpre">] </span><a href="#loc_100_19_100_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_19_100_26&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_75_1_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_10&#39;)"><span class="hl_varref"><span class="mpre">recordRun</span></span></a><span class="mpre"> </span><a href="#loc_104_13_104_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_104_13_104_16&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><a href="#loc_56_16_56_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_56_16_56_28&#39;)"><span class="hl_conref"><span class="mpre">BuildSuccess</span></span></a><span class="mpre"> </span><a href="#loc_101_5_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_17&#39;)"><span class="hl_varref"><span class="mpre">configResult</span></span></a><span class="mpre">
        else
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_101_5_101_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_5_101_17&#39;)"><span class="hl_varref"><span class="mpre">configResult</span></span></a><span class="mpre">

</span><a href="#loc_110_1_110_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_1_110_12&#39;)"><span class="mpre">cabal_build</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_110_1_110_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_1_110_12&#39;)"><span class="hl_fundecl"><span class="mpre">cabal_build</span></span></a><span class="mpre"> </span><a name="loc_110_13_110_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_13_110_17&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_110_18_110_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_18_110_25&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_111_5_111_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_5_111_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_100_1_100_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_1_100_13&#39;)"><span class="hl_varref"><span class="mpre">doCabalBuild</span></span></a><span class="mpre"> </span><a href="#loc_110_13_110_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_13_110_17&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_110_18_110_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_18_110_25&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
    </span><a href="#loc_218_1_218_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_7&#39;)"><span class="hl_varref"><span class="mpre">record</span></span></a><span class="mpre"> </span><a href="#loc_110_13_110_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_13_110_17&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_111_5_111_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_5_111_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_111_5_111_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_111_5_111_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">

</span><a href="#loc_116_1_116_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_11&#39;)"><span class="mpre">unregister</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_116_1_116_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_1_116_11&#39;)"><span class="hl_fundecl"><span class="mpre">unregister</span></span></a><span class="mpre"> </span><a name="loc_116_12_116_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_12_116_23&#39;)"><span class="hl_vardecl"><span class="mpre">libraryName</span></span></a><span class="mpre"> </span><a name="loc_116_24_116_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_24_116_34&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPkgPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_117_5_117_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_8&#39;)"><span class="hl_specname"><span class="mpre">res</span></span></a><span class="mpre">@(_, _, </span><a name="loc_117_16_117_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_16_117_22&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre">) &lt;- </span><a href="#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">run</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><a href="#loc_116_24_116_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_24_116_34&#39;)"><span class="hl_varref"><span class="mpre">ghcPkgPath</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;unregister&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;--user&quot;</span></span><span class="mpre">, </span><a href="#loc_116_12_116_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_12_116_23&#39;)"><span class="hl_varref"><span class="mpre">libraryName</span></span></a><span class="mpre">]
    if </span><span class="hl_string"><span class="mpre">&quot;cannot find package&quot;</span></span><span class="mpre"> </span><a href="Data.List.html#loc_305_1_305_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_305_1_305_10&#39;)"><span class="hl_infix"><span class="mpre">`isInfixOf`</span></span></a><span class="mpre"> </span><a href="#loc_117_16_117_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_16_117_22&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">
        then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
        else </span><a href="#loc_212_1_212_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_1_212_15&#39;)"><span class="hl_varref"><span class="mpre">requireSuccess</span></span></a><span class="mpre"> </span><a href="#loc_117_5_117_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_117_5_117_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Install this library in the user area</span></span><span class="mpre">
</span><a href="#loc_124_1_124_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_1_124_14&#39;)"><span class="mpre">cabal_install</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_124_1_124_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_1_124_14&#39;)"><span class="hl_fundecl"><span class="mpre">cabal_install</span></span></a><span class="mpre"> </span><a name="loc_124_15_124_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_15_124_19&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_124_20_124_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_20_124_27&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_125_5_125_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_5_125_16&#39;)"><span class="hl_vardecl"><span class="mpre">buildResult</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_100_1_100_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_100_1_100_13&#39;)"><span class="hl_varref"><span class="mpre">doCabalBuild</span></span></a><span class="mpre"> </span><a href="#loc_124_15_124_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_15_124_19&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_124_20_124_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_20_124_27&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
    </span><a name="loc_126_5_126_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_5_126_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- if </span><a href="#loc_63_7_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_17&#39;)"><span class="hl_varref"><span class="mpre">successful</span></span></a><span class="mpre"> </span><a href="#loc_125_5_125_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_5_125_16&#39;)"><span class="hl_varref"><span class="mpre">buildResult</span></span></a><span class="mpre">
        then do
            </span><a name="loc_128_13_128_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_13_128_16&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="hl_varref"><span class="mpre">cabal</span></span></a><span class="mpre"> </span><a href="#loc_124_15_124_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_15_124_19&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> [</span><span class="hl_string"><span class="mpre">&quot;install&quot;</span></span><span class="mpre">] </span><a href="#loc_124_20_124_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_20_124_27&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_75_1_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_10&#39;)"><span class="hl_varref"><span class="mpre">recordRun</span></span></a><span class="mpre"> </span><a href="#loc_128_13_128_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_128_13_128_16&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><a href="#loc_57_16_57_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_16_57_30&#39;)"><span class="hl_conref"><span class="mpre">InstallSuccess</span></span></a><span class="mpre"> </span><a href="#loc_125_5_125_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_5_125_16&#39;)"><span class="hl_varref"><span class="mpre">buildResult</span></span></a><span class="mpre">
        else
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_125_5_125_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_125_5_125_16&#39;)"><span class="hl_varref"><span class="mpre">buildResult</span></span></a><span class="mpre">
    </span><a href="#loc_218_1_218_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_7&#39;)"><span class="hl_varref"><span class="mpre">record</span></span></a><span class="mpre"> </span><a href="#loc_124_15_124_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_15_124_19&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_126_5_126_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_5_126_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_126_5_126_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_5_126_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">

</span><a href="#loc_136_1_136_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_11&#39;)"><span class="mpre">cabal_test</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_136_1_136_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_11&#39;)"><span class="hl_fundecl"><span class="mpre">cabal_test</span></span></a><span class="mpre"> </span><a name="loc_136_12_136_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_12_136_16&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_136_17_136_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_17_136_26&#39;)"><span class="hl_vardecl"><span class="mpre">extraArgs</span></span></a><span class="mpre"> </span><a name="loc_136_27_136_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_27_136_34&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_137_5_137_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_5_137_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="hl_varref"><span class="mpre">cabal</span></span></a><span class="mpre"> </span><a href="#loc_136_12_136_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_12_136_16&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;test&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_136_17_136_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_17_136_26&#39;)"><span class="hl_varref"><span class="mpre">extraArgs</span></span></a><span class="mpre">) </span><a href="#loc_136_27_136_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_27_136_34&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
    let </span><a name="loc_138_9_138_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_9_138_10&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><a href="#loc_75_1_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_10&#39;)"><span class="hl_varref"><span class="mpre">recordRun</span></span></a><span class="mpre"> </span><a href="#loc_137_5_137_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_5_137_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><a href="#loc_58_16_58_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_16_58_27&#39;)"><span class="hl_conref"><span class="mpre">TestSuccess</span></span></a><span class="mpre"> </span><a href="#loc_69_1_69_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_11&#39;)"><span class="hl_varref"><span class="mpre">nullResult</span></span></a><span class="mpre">
    </span><a href="#loc_218_1_218_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_7&#39;)"><span class="hl_varref"><span class="mpre">record</span></span></a><span class="mpre"> </span><a href="#loc_136_12_136_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_12_136_16&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_138_9_138_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_9_138_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_138_9_138_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_138_9_138_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

</span><a href="#loc_143_1_143_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_1_143_12&#39;)"><span class="mpre">cabal_bench</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre">
</span><a name="loc_143_1_143_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_1_143_12&#39;)"><span class="hl_fundecl"><span class="mpre">cabal_bench</span></span></a><span class="mpre"> </span><a name="loc_143_13_143_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_13_143_17&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_143_18_143_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_18_143_27&#39;)"><span class="hl_vardecl"><span class="mpre">extraArgs</span></span></a><span class="mpre"> </span><a name="loc_143_28_143_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_28_143_35&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_144_5_144_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_5_144_8&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="hl_varref"><span class="mpre">cabal</span></span></a><span class="mpre"> </span><a href="#loc_143_13_143_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_13_143_17&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;bench&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_143_18_143_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_18_143_27&#39;)"><span class="hl_varref"><span class="mpre">extraArgs</span></span></a><span class="mpre">) </span><a href="#loc_143_28_143_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_28_143_35&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
    let </span><a name="loc_145_9_145_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_9_145_10&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = </span><a href="#loc_75_1_75_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_75_1_75_10&#39;)"><span class="hl_varref"><span class="mpre">recordRun</span></span></a><span class="mpre"> </span><a href="#loc_144_5_144_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_144_5_144_8&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre"> </span><a href="#loc_59_16_59_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_16_59_28&#39;)"><span class="hl_conref"><span class="mpre">BenchSuccess</span></span></a><span class="mpre"> </span><a href="#loc_69_1_69_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_69_1_69_11&#39;)"><span class="hl_varref"><span class="mpre">nullResult</span></span></a><span class="mpre">
    </span><a href="#loc_218_1_218_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_7&#39;)"><span class="hl_varref"><span class="mpre">record</span></span></a><span class="mpre"> </span><a href="#loc_143_13_143_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_143_13_143_17&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a href="#loc_145_9_145_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_9_145_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_145_9_145_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_145_9_145_10&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

</span><a href="#loc_150_1_150_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_1_150_13&#39;)"><span class="mpre">compileSetup</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_150_1_150_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_1_150_13&#39;)"><span class="hl_fundecl"><span class="mpre">compileSetup</span></span></a><span class="mpre"> </span><a name="loc_150_14_150_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_14_150_24&#39;)"><span class="hl_vardecl"><span class="mpre">packageDir</span></span></a><span class="mpre"> </span><a name="loc_150_25_150_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_25_150_32&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_151_5_151_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_5_151_7&#39;)"><span class="hl_vardecl"><span class="mpre">wd</span></span></a><span class="mpre"> &lt;- </span><a href="System.Directory.html#loc_673_1_673_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_673_1_673_20&#39;)"><span class="hl_varref"><span class="mpre">getCurrentDirectory</span></span></a><span class="mpre">
    </span><a name="loc_152_5_152_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_5_152_6&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">run</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_150_14_150_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_14_150_24&#39;)"><span class="hl_varref"><span class="mpre">packageDir</span></span></a><span class="mpre">) </span><a href="#loc_150_25_150_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_25_150_32&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
         [ </span><span class="hl_string"><span class="mpre">&quot;--make&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- HPC causes trouble -- see #1012</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--       , &quot;-fhpc&quot;</span></span><span class="mpre">
         , </span><span class="hl_string"><span class="mpre">&quot;-package-conf &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_151_5_151_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_151_5_151_7&#39;)"><span class="hl_varref"><span class="mpre">wd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;../dist/package.conf.inplace&quot;</span></span><span class="mpre">
         , </span><span class="hl_string"><span class="mpre">&quot;Setup.hs&quot;</span></span><span class="mpre">
         ]
    </span><a href="#loc_212_1_212_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_1_212_15&#39;)"><span class="hl_varref"><span class="mpre">requireSuccess</span></span></a><span class="mpre"> </span><a href="#loc_152_5_152_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_152_5_152_6&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Returns the command that was issued, the return code, and the output text.</span></span><span class="mpre">
</span><a href="#loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="mpre">cabal</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)
</span><a name="loc_163_1_163_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_1_163_6&#39;)"><span class="hl_fundecl"><span class="mpre">cabal</span></span></a><span class="mpre"> </span><a name="loc_163_7_163_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_7_163_11&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_163_12_163_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_12_163_21&#39;)"><span class="hl_vardecl"><span class="mpre">cabalArgs</span></span></a><span class="mpre"> </span><a name="loc_163_22_163_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_22_163_29&#39;)"><span class="hl_vardecl"><span class="mpre">ghcPath</span></span></a><span class="mpre"> = do
    </span><a name="loc_164_5_164_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_5_164_16&#39;)"><span class="hl_vardecl"><span class="mpre">customSetup</span></span></a><span class="mpre"> &lt;- </span><a href="System.Directory.html#loc_726_1_726_14" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_726_1_726_14&#39;)"><span class="hl_varref"><span class="mpre">doesFileExist</span></span></a><span class="mpre"> (</span><a href="#loc_50_7_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_7_50_16&#39;)"><span class="hl_varref"><span class="mpre">directory</span></span></a><span class="mpre"> </span><a href="#loc_163_7_163_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_7_163_11&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Setup.hs&quot;</span></span><span class="mpre">)
    if </span><a href="#loc_164_5_164_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_164_5_164_16&#39;)"><span class="hl_varref"><span class="mpre">customSetup</span></span></a><span class="mpre">
        then do
            </span><a href="#loc_150_1_150_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_150_1_150_13&#39;)"><span class="hl_varref"><span class="mpre">compileSetup</span></span></a><span class="mpre"> (</span><a href="#loc_50_7_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_7_50_16&#39;)"><span class="hl_varref"><span class="mpre">directory</span></span></a><span class="mpre"> </span><a href="#loc_163_7_163_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_7_163_11&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre">) </span><a href="#loc_163_22_163_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_22_163_29&#39;)"><span class="hl_varref"><span class="mpre">ghcPath</span></span></a><span class="mpre">
            </span><a name="loc_168_13_168_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_13_168_17&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> &lt;- </span><a href="System.Directory.html#loc_561_1_561_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_561_1_561_17&#39;)"><span class="hl_varref"><span class="mpre">canonicalizePath</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_50_7_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_7_50_16&#39;)"><span class="hl_varref"><span class="mpre">directory</span></span></a><span class="mpre"> </span><a href="#loc_163_7_163_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_7_163_11&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Setup&quot;</span></span><span class="mpre">
            </span><a href="#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">run</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_50_7_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_7_50_16&#39;)"><span class="hl_varref"><span class="mpre">directory</span></span></a><span class="mpre"> </span><a href="#loc_163_7_163_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_7_163_11&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre">) </span><a href="#loc_168_13_168_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_13_168_17&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><a href="#loc_163_12_163_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_12_163_21&#39;)"><span class="hl_varref"><span class="mpre">cabalArgs</span></span></a><span class="mpre">
        else do
            </span><span class="hl_comment"><span class="mpre">-- Use shared Setup executable (only for Simple build types).</span></span><span class="mpre">
            </span><a name="loc_172_13_172_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_172_13_172_17&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> &lt;- </span><a href="System.Directory.html#loc_561_1_561_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_561_1_561_17&#39;)"><span class="hl_varref"><span class="mpre">canonicalizePath</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Setup&quot;</span></span><span class="mpre">
            </span><a href="#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_4&#39;)"><span class="hl_varref"><span class="mpre">run</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_50_7_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_7_50_16&#39;)"><span class="hl_varref"><span class="mpre">directory</span></span></a><span class="mpre"> </span><a href="#loc_163_7_163_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_7_163_11&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre">) </span><a href="#loc_172_13_172_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_172_13_172_17&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><a href="#loc_163_12_163_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_163_12_163_21&#39;)"><span class="hl_varref"><span class="mpre">cabalArgs</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Returns the command that was issued, the return code, and hte output text</span></span><span class="mpre">
</span><a href="#loc_177_1_177_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_4&#39;)"><span class="mpre">run</span></a><span class="mpre"> :: </span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)
</span><a name="loc_177_1_177_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_1_177_4&#39;)"><span class="hl_fundecl"><span class="mpre">run</span></span></a><span class="mpre"> </span><a name="loc_177_5_177_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_8&#39;)"><span class="hl_vardecl"><span class="mpre">cwd</span></span></a><span class="mpre"> </span><a name="loc_177_9_177_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_9_177_13&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> </span><a name="loc_177_14_177_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_14_177_18&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre"> = do
    </span><a name="loc_178_5_178_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_5_178_14&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_281_1_281_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_281_1_281_13&#39;)"><span class="hl_varref"><span class="mpre">getVerbosity</span></span></a><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- path is relative to the current directory; canonicalizePath makes it</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- absolute, so that runProcess will find it even when changing directory.</span></span><span class="mpre">
    </span><a name="loc_181_5_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_5_181_10&#39;)"><span class="hl_vardecl"><span class="mpre">path&#39;</span></span></a><span class="mpre"> &lt;- do </span><a name="loc_181_17_181_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_17_181_27&#39;)"><span class="hl_vardecl"><span class="mpre">pathExists</span></span></a><span class="mpre"> &lt;- </span><a href="System.Directory.html#loc_726_1_726_14" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_726_1_726_14&#39;)"><span class="hl_varref"><span class="mpre">doesFileExist</span></span></a><span class="mpre"> </span><a href="#loc_177_9_177_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_9_177_13&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre">
                </span><a href="System.Directory.html#loc_561_1_561_17" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Directory.html#loc_561_1_561_17&#39;)"><span class="hl_varref"><span class="mpre">canonicalizePath</span></span></a><span class="mpre"> (if </span><a href="#loc_181_17_181_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_17_181_27&#39;)"><span class="hl_varref"><span class="mpre">pathExists</span></span></a><span class="mpre"> then </span><a href="#loc_177_9_177_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_9_177_13&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> else </span><a href="#loc_177_9_177_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_9_177_13&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;.&gt;</span></span><span class="mpre"> </span><a href="Distribution.Simple.BuildPaths.html#loc_135_1_135_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Simple.BuildPaths.html#loc_135_1_135_13&#39;)"><span class="hl_varref"><span class="mpre">exeExtension</span></span></a><span class="mpre">)
    </span><a href="#loc_206_1_206_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_1_206_23&#39;)"><span class="hl_varref"><span class="mpre">printRawCommandAndArgs</span></span></a><span class="mpre"> </span><a href="#loc_178_5_178_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_178_5_178_14&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a href="#loc_181_5_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_5_181_10&#39;)"><span class="hl_varref"><span class="mpre">path&#39;</span></span></a><span class="mpre"> </span><a href="#loc_177_14_177_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_14_177_18&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">
    (</span><a name="loc_184_6_184_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_6_184_11&#39;)"><span class="hl_vardecl"><span class="mpre">readh</span></span></a><span class="mpre">, </span><a name="loc_184_13_184_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_13_184_19&#39;)"><span class="hl_vardecl"><span class="mpre">writeh</span></span></a><span class="mpre">) &lt;- </span><span class="hl_varref"><span class="mpre">createPipe</span></span><span class="mpre">
    </span><a name="loc_185_5_185_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_5_185_8&#39;)"><span class="hl_vardecl"><span class="mpre">pid</span></span></a><span class="mpre"> &lt;- </span><a href="System.Process.html#loc_769_1_769_11" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Process.html#loc_769_1_769_11&#39;)"><span class="hl_varref"><span class="mpre">runProcess</span></span></a><span class="mpre"> </span><a href="#loc_181_5_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_5_181_10&#39;)"><span class="hl_varref"><span class="mpre">path&#39;</span></span></a><span class="mpre"> </span><a href="#loc_177_14_177_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_14_177_18&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre"> </span><a href="#loc_177_5_177_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_8&#39;)"><span class="hl_varref"><span class="mpre">cwd</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_184_13_184_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_13_184_19&#39;)"><span class="hl_varref"><span class="mpre">writeh</span></span></a><span class="mpre">) (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_184_13_184_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_13_184_19&#39;)"><span class="hl_varref"><span class="mpre">writeh</span></span></a><span class="mpre">)

    </span><span class="hl_comment"><span class="mpre">-- fork off a thread to start consuming the output</span></span><span class="mpre">
    </span><a name="loc_188_5_188_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_5_188_8&#39;)"><span class="hl_vardecl"><span class="mpre">out</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_196_5_196_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_5_196_10&#39;)"><span class="hl_varref"><span class="mpre">suckH</span></span></a><span class="mpre"> [] </span><a href="#loc_184_6_184_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_6_184_11&#39;)"><span class="hl_varref"><span class="mpre">readh</span></span></a><span class="mpre">
    </span><a href="GHC.IO.Handle.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">hClose</span></span></a><span class="mpre"> </span><a href="#loc_184_6_184_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_184_6_184_11&#39;)"><span class="hl_varref"><span class="mpre">readh</span></span></a><span class="mpre">

    </span><span class="hl_comment"><span class="mpre">-- wait for the program to terminate</span></span><span class="mpre">
    </span><a name="loc_192_5_192_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_192_5_192_13&#39;)"><span class="hl_vardecl"><span class="mpre">exitcode</span></span></a><span class="mpre"> &lt;- </span><a href="System.Process.html#loc_575_1_575_15" onmouseover="nemnem.highlightLocalToRemote(&#39;System.Process.html#loc_575_1_575_15&#39;)"><span class="hl_varref"><span class="mpre">waitForProcess</span></span></a><span class="mpre"> </span><a href="#loc_185_5_185_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_5_185_8&#39;)"><span class="hl_varref"><span class="mpre">pid</span></span></a><span class="mpre">
    let </span><a name="loc_193_9_193_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_9_193_16&#39;)"><span class="hl_vardecl"><span class="mpre">fullCmd</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_1081_1_1081_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1081_1_1081_8&#39;)"><span class="hl_varref"><span class="mpre">unwords</span></span></a><span class="mpre"> (</span><a href="#loc_181_5_181_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_5_181_10&#39;)"><span class="hl_varref"><span class="mpre">path&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_177_14_177_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_14_177_18&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;\&quot;&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_193_9_193_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_193_9_193_16&#39;)"><span class="hl_varref"><span class="mpre">fullCmd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\&quot; in &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="hl_varref"><span class="mpre">fromMaybe</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre"> </span><a href="#loc_177_5_177_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_177_5_177_8&#39;)"><span class="hl_varref"><span class="mpre">cwd</span></span></a><span class="mpre">, </span><a href="#loc_192_5_192_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_192_5_192_13&#39;)"><span class="hl_varref"><span class="mpre">exitcode</span></span></a><span class="mpre">, </span><a href="#loc_188_5_188_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_188_5_188_8&#39;)"><span class="hl_varref"><span class="mpre">out</span></span></a><span class="mpre">)
  where
    </span><a name="loc_196_5_196_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_5_196_10&#39;)"><span class="hl_fundecl"><span class="mpre">suckH</span></span></a><span class="mpre"> </span><a name="loc_196_11_196_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_11_196_17&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> </span><a name="loc_196_18_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_18_196_19&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = do
        </span><a name="loc_197_9_197_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_9_197_12&#39;)"><span class="hl_vardecl"><span class="mpre">eof</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.Handle.html#loc_150_1_150_7" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_150_1_150_7&#39;)"><span class="hl_varref"><span class="mpre">hIsEOF</span></span></a><span class="mpre"> </span><a href="#loc_196_18_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_18_196_19&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
        if </span><a href="#loc_197_9_197_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_9_197_12&#39;)"><span class="hl_varref"><span class="mpre">eof</span></span></a><span class="mpre">
            then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">reverse</span></span><span class="mpre"> </span><a href="#loc_196_11_196_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_11_196_17&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">)
            else do
                </span><a name="loc_201_17_201_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_17_201_18&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> &lt;- </span><a href="GHC.IO.Handle.Text.html#loc_133_1_133_9" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Text.html#loc_133_1_133_9&#39;)"><span class="hl_varref"><span class="mpre">hGetChar</span></span></a><span class="mpre"> </span><a href="#loc_196_18_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_18_196_19&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
                </span><a href="#loc_196_5_196_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_5_196_10&#39;)"><span class="hl_varref"><span class="mpre">suckH</span></span></a><span class="mpre"> (</span><a href="#loc_201_17_201_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_201_17_201_18&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><a href="#loc_196_11_196_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_11_196_17&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">) </span><a href="#loc_196_18_196_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_18_196_19&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- Copied from Distribution/Simple/Utils.hs</span></span><span class="mpre">
</span><a href="#loc_206_1_206_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_1_206_23&#39;)"><span class="mpre">printRawCommandAndArgs</span></a><span class="mpre"> :: </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">FilePath</span></span><span class="mpre"> -&gt; [</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">] -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_206_1_206_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_1_206_23&#39;)"><span class="hl_fundecl"><span class="mpre">printRawCommandAndArgs</span></span></a><span class="mpre"> </span><a name="loc_206_24_206_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_24_206_33&#39;)"><span class="hl_vardecl"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><a name="loc_206_34_206_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_34_206_38&#39;)"><span class="hl_vardecl"><span class="mpre">path</span></span></a><span class="mpre"> </span><a name="loc_206_39_206_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_39_206_43&#39;)"><span class="hl_vardecl"><span class="mpre">args</span></span></a><span class="mpre">
    | </span><a href="#loc_206_24_206_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_24_206_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="Distribution.Verbosity.html#loc_76_1_76_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_76_1_76_10&#39;)"><span class="hl_varref"><span class="mpre">deafening</span></span></a><span class="mpre"> = </span><a href="System.IO.html#loc_281_1_281_6" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_281_1_281_6&#39;)"><span class="hl_varref"><span class="mpre">print</span></span></a><span class="mpre"> (</span><a href="#loc_206_34_206_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_34_206_38&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre">, </span><a href="#loc_206_39_206_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_39_206_43&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">)
    | </span><a href="#loc_206_24_206_33" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_24_206_33&#39;)"><span class="hl_varref"><span class="mpre">verbosity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;=</span></span><span class="mpre"> </span><a href="Distribution.Verbosity.html#loc_71_1_71_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_71_1_71_8&#39;)"><span class="hl_varref"><span class="mpre">verbose</span></span></a><span class="mpre">   = </span><a href="System.IO.html#loc_267_1_267_9" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.html#loc_267_1_267_9&#39;)"><span class="hl_varref"><span class="mpre">putStrLn</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.List.html#loc_1081_1_1081_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1081_1_1081_8&#39;)"><span class="hl_varref"><span class="mpre">unwords</span></span></a><span class="mpre"> (</span><a href="#loc_206_34_206_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_34_206_38&#39;)"><span class="hl_varref"><span class="mpre">path</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre"> </span><a href="#loc_206_39_206_43" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_39_206_43&#39;)"><span class="hl_varref"><span class="mpre">args</span></span></a><span class="mpre">)
    | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre">              = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">

</span><a href="#loc_212_1_212_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_1_212_15&#39;)"><span class="mpre">requireSuccess</span></a><span class="mpre"> :: (</span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">, </span><a href="GHC.IO.Exception.html#loc_205_6_205_14" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_205_6_205_14&#39;)"><span class="hl_tyconref"><span class="mpre">ExitCode</span></span></a><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_212_1_212_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_1_212_15&#39;)"><span class="hl_fundecl"><span class="mpre">requireSuccess</span></span></a><span class="mpre"> (</span><a name="loc_212_17_212_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_17_212_20&#39;)"><span class="hl_vardecl"><span class="mpre">cmd</span></span></a><span class="mpre">, </span><a name="loc_212_22_212_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_22_212_30&#39;)"><span class="hl_vardecl"><span class="mpre">exitCode</span></span></a><span class="mpre">, </span><a name="loc_212_32_212_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_32_212_38&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre">) =
    </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><a href="#loc_212_22_212_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_22_212_30&#39;)"><span class="hl_varref"><span class="mpre">exitCode</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="GHC.IO.Exception.html#loc_206_5_206_16" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Exception.html#loc_206_5_206_16&#39;)"><span class="hl_conref"><span class="mpre">ExitSuccess</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">assertFailure</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Command &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_212_17_212_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_17_212_20&#39;)"><span class="hl_varref"><span class="mpre">cmd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot; failed.\n&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
        </span><span class="hl_string"><span class="mpre">&quot;output: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_212_32_212_38" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_32_212_38&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">

</span><a href="#loc_218_1_218_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_7&#39;)"><span class="mpre">record</span></a><span class="mpre"> :: </span><a href="#loc_49_6_49_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_49_6_49_17&#39;)"><span class="hl_tyconref"><span class="mpre">PackageSpec</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_218_1_218_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_7&#39;)"><span class="hl_fundecl"><span class="mpre">record</span></span></a><span class="mpre"> </span><a name="loc_218_8_218_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_8_218_12&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> </span><a name="loc_218_13_218_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_13_218_16&#39;)"><span class="hl_vardecl"><span class="mpre">res</span></span></a><span class="mpre"> = do
    </span><span class="hl_varref"><span class="mpre">C.writeFile</span></span><span class="mpre"> (</span><a href="#loc_50_7_50_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_7_50_16&#39;)"><span class="hl_varref"><span class="mpre">directory</span></span></a><span class="mpre"> </span><a href="#loc_218_8_218_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_8_218_12&#39;)"><span class="hl_varref"><span class="mpre">spec</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;/&gt;</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;test-log.txt&quot;</span></span><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">C.pack</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_65_7_65_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_7_65_17&#39;)"><span class="hl_varref"><span class="mpre">outputText</span></span></a><span class="mpre"> </span><a href="#loc_218_13_218_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_13_218_16&#39;)"><span class="hl_varref"><span class="mpre">res</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Test helpers</span></span><span class="mpre">

</span><a href="#loc_225_1_225_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_1_225_21&#39;)"><span class="mpre">assertBuildSucceeded</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Assertion</span></span><span class="mpre">
</span><a name="loc_225_1_225_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_1_225_21&#39;)"><span class="hl_fundecl"><span class="mpre">assertBuildSucceeded</span></span></a><span class="mpre"> </span><a name="loc_225_22_225_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_22_225_28&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><a href="#loc_63_7_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_17&#39;)"><span class="hl_varref"><span class="mpre">successful</span></span></a><span class="mpre"> </span><a href="#loc_225_22_225_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_22_225_28&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertFailure</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;expected: \&#39;setup build\&#39; should succeed\n&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;  output: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_65_7_65_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_7_65_17&#39;)"><span class="hl_varref"><span class="mpre">outputText</span></span></a><span class="mpre"> </span><a href="#loc_225_22_225_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_225_22_225_28&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">

</span><a href="#loc_231_1_231_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_1_231_18&#39;)"><span class="mpre">assertBuildFailed</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Assertion</span></span><span class="mpre">
</span><a name="loc_231_1_231_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_1_231_18&#39;)"><span class="hl_fundecl"><span class="mpre">assertBuildFailed</span></span></a><span class="mpre"> </span><a name="loc_231_19_231_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_19_231_25&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_63_7_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_17&#39;)"><span class="hl_varref"><span class="mpre">successful</span></span></a><span class="mpre"> </span><a href="#loc_231_19_231_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_19_231_25&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertFailure</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;expected: \&#39;setup build\&#39; should fail\n&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;  output: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_65_7_65_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_7_65_17&#39;)"><span class="hl_varref"><span class="mpre">outputText</span></span></a><span class="mpre"> </span><a href="#loc_231_19_231_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_231_19_231_25&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">

</span><a href="#loc_237_1_237_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_20&#39;)"><span class="mpre">assertTestSucceeded</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Assertion</span></span><span class="mpre">
</span><a name="loc_237_1_237_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_1_237_20&#39;)"><span class="hl_fundecl"><span class="mpre">assertTestSucceeded</span></span></a><span class="mpre"> </span><a name="loc_237_21_237_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_21_237_27&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><a href="#loc_63_7_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_17&#39;)"><span class="hl_varref"><span class="mpre">successful</span></span></a><span class="mpre"> </span><a href="#loc_237_21_237_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_21_237_27&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertFailure</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;expected: \&#39;setup test\&#39; should succeed\n&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;  output: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_65_7_65_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_7_65_17&#39;)"><span class="hl_varref"><span class="mpre">outputText</span></span></a><span class="mpre"> </span><a href="#loc_237_21_237_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_21_237_27&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">

</span><a href="#loc_243_1_243_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_1_243_23&#39;)"><span class="mpre">assertInstallSucceeded</span></a><span class="mpre"> :: </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Assertion</span></span><span class="mpre">
</span><a name="loc_243_1_243_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_1_243_23&#39;)"><span class="hl_fundecl"><span class="mpre">assertInstallSucceeded</span></span></a><span class="mpre"> </span><a name="loc_243_24_243_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_24_243_30&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><a href="#loc_63_7_63_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_63_7_63_17&#39;)"><span class="hl_varref"><span class="mpre">successful</span></span></a><span class="mpre"> </span><a href="#loc_243_24_243_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_24_243_30&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertFailure</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;expected: \&#39;setup install\&#39; should succeed\n&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;  output: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_65_7_65_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_7_65_17&#39;)"><span class="hl_varref"><span class="mpre">outputText</span></span></a><span class="mpre"> </span><a href="#loc_243_24_243_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_243_24_243_30&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">

</span><a href="#loc_249_1_249_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_1_249_21&#39;)"><span class="mpre">assertOutputContains</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Assertion</span></span><span class="mpre">
</span><a name="loc_249_1_249_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_1_249_21&#39;)"><span class="hl_fundecl"><span class="mpre">assertOutputContains</span></span></a><span class="mpre"> </span><a name="loc_249_22_249_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_22_249_28&#39;)"><span class="hl_vardecl"><span class="mpre">needle</span></span></a><span class="mpre"> </span><a name="loc_249_29_249_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_29_249_35&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> =
    </span><a href="Control.Monad.html#loc_270_1_270_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_270_1_270_7&#39;)"><span class="hl_varref"><span class="mpre">unless</span></span></a><span class="mpre"> (</span><a href="#loc_249_22_249_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_22_249_28&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre"> </span><a href="Data.List.html#loc_305_1_305_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_305_1_305_10&#39;)"><span class="hl_infix"><span class="mpre">`isInfixOf`</span></span></a><span class="mpre"> (</span><a href="#loc_266_1_266_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_1_266_13&#39;)"><span class="hl_varref"><span class="mpre">concatOutput</span></span></a><span class="mpre"> </span><a href="#loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertFailure</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot; expected: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_249_22_249_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_22_249_28&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;\n&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot; in output: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;&quot;</span></span><span class="mpre">
  where </span><a name="loc_254_9_254_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_254_9_254_15&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> = </span><a href="#loc_65_7_65_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_7_65_17&#39;)"><span class="hl_varref"><span class="mpre">outputText</span></span></a><span class="mpre"> </span><a href="#loc_249_29_249_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_249_29_249_35&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">

</span><a href="#loc_257_1_257_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_1_257_27&#39;)"><span class="mpre">assertOutputDoesNotContain</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><a href="#loc_62_6_62_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_62_6_62_12&#39;)"><span class="hl_tyconref"><span class="mpre">Result</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Assertion</span></span><span class="mpre">
</span><a name="loc_257_1_257_27" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_1_257_27&#39;)"><span class="hl_fundecl"><span class="mpre">assertOutputDoesNotContain</span></span></a><span class="mpre"> </span><a name="loc_257_28_257_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_28_257_34&#39;)"><span class="hl_vardecl"><span class="mpre">needle</span></span></a><span class="mpre"> </span><a name="loc_257_35_257_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_35_257_41&#39;)"><span class="hl_vardecl"><span class="mpre">result</span></span></a><span class="mpre"> =
    </span><a href="Control.Monad.html#loc_265_1_265_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_265_1_265_5&#39;)"><span class="hl_varref"><span class="mpre">when</span></span></a><span class="mpre"> (</span><a href="#loc_257_28_257_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_28_257_34&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre"> </span><a href="Data.List.html#loc_305_1_305_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_305_1_305_10&#39;)"><span class="hl_infix"><span class="mpre">`isInfixOf`</span></span></a><span class="mpre"> (</span><a href="#loc_266_1_266_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_1_266_13&#39;)"><span class="hl_varref"><span class="mpre">concatOutput</span></span></a><span class="mpre"> </span><a href="#loc_262_9_262_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_9_262_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">)) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">assertFailure</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot;unexpected: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_257_28_257_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_28_257_34&#39;)"><span class="hl_varref"><span class="mpre">needle</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre">
    </span><span class="hl_string"><span class="mpre">&quot; in output: &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_262_9_262_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_9_262_15&#39;)"><span class="hl_varref"><span class="mpre">output</span></span></a><span class="mpre">
  where </span><a name="loc_262_9_262_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_262_9_262_15&#39;)"><span class="hl_vardecl"><span class="mpre">output</span></span></a><span class="mpre"> = </span><a href="#loc_65_7_65_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_65_7_65_17&#39;)"><span class="hl_varref"><span class="mpre">outputText</span></span></a><span class="mpre"> </span><a href="#loc_257_35_257_41" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_257_35_257_41&#39;)"><span class="hl_varref"><span class="mpre">result</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Replace line breaks with spaces, correctly handling &quot;\r\n&quot;.</span></span><span class="mpre">
</span><a href="#loc_266_1_266_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_1_266_13&#39;)"><span class="mpre">concatOutput</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">
</span><a name="loc_266_1_266_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_1_266_13&#39;)"><span class="hl_vardecl"><span class="mpre">concatOutput</span></span></a><span class="mpre"> = </span><a href="Data.List.html#loc_1081_1_1081_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1081_1_1081_8&#39;)"><span class="hl_varref"><span class="mpre">unwords</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.List.html#loc_1044_1_1044_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1044_1_1044_6&#39;)"><span class="hl_varref"><span class="mpre">lines</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">(/=)</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\r&#39;</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Verbosity</span></span><span class="mpre">

</span><a href="#loc_272_1_272_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_1_272_10&#39;)"><span class="mpre">lookupEnv</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">)
</span><a name="loc_272_1_272_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_1_272_10&#39;)"><span class="hl_fundecl"><span class="mpre">lookupEnv</span></span></a><span class="mpre"> </span><a name="loc_272_11_272_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_11_272_15&#39;)"><span class="hl_vardecl"><span class="mpre">name</span></span></a><span class="mpre"> =
    (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">getEnv</span></span><span class="mpre"> </span><a href="#loc_272_11_272_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_11_272_15&#39;)"><span class="hl_varref"><span class="mpre">name</span></span></a><span class="mpre">)
    </span><span class="hl_infix"><span class="mpre">`E.catch`</span></span><span class="mpre"> \ (</span><a name="loc_274_18_274_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_18_274_19&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IOError</span></span><span class="mpre">) -&gt;
        if </span><a href="System.IO.Error.html#loc_135_1_135_20" onmouseover="nemnem.highlightLocalToRemote(&#39;System.IO.Error.html#loc_135_1_135_20&#39;)"><span class="hl_varref"><span class="mpre">isDoesNotExistError</span></span></a><span class="mpre"> </span><a href="#loc_274_18_274_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_18_274_19&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">
        then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">
        else </span><span class="hl_varref"><span class="mpre">E.throw</span></span><span class="mpre"> </span><a href="#loc_274_18_274_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_274_18_274_19&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- TODO: Convert to a &quot;-v&quot; flag instead.</span></span><span class="mpre">
</span><a href="#loc_281_1_281_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_281_1_281_13&#39;)"><span class="mpre">getVerbosity</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><a href="Distribution.Verbosity.html#loc_58_6_58_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_58_6_58_15&#39;)"><span class="hl_tyconref"><span class="mpre">Verbosity</span></span></a><span class="mpre">
</span><a name="loc_281_1_281_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_281_1_281_13&#39;)"><span class="hl_vardecl"><span class="mpre">getVerbosity</span></span></a><span class="mpre"> = do
    </span><a href="Data.Maybe.html#loc_74_1_74_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_74_1_74_6&#39;)"><span class="hl_varref"><span class="mpre">maybe</span></span></a><span class="mpre"> </span><a href="Distribution.Verbosity.html#loc_67_1_67_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_67_1_67_7&#39;)"><span class="hl_varref"><span class="mpre">normal</span></span></a><span class="mpre"> (</span><a href="Distribution.ReadE.html#loc_74_1_74_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.ReadE.html#loc_74_1_74_12&#39;)"><span class="hl_varref"><span class="mpre">readEOrFail</span></span></a><span class="mpre"> </span><a href="Distribution.Verbosity.html#loc_98_1_98_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Distribution.Verbosity.html#loc_98_1_98_16&#39;)"><span class="hl_varref"><span class="mpre">flagToVerbosity</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">`fmap`</span></span><span class="mpre"> </span><a href="#loc_272_1_272_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_272_1_272_10&#39;)"><span class="hl_varref"><span class="mpre">lookupEnv</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;VERBOSE&quot;</span></span><span class="mpre">
</span></div></body></html>