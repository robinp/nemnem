<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE OverloadedStrings #-}
{-# LANGUAGE CPP #-}
module Data.Conduit.BlazeSpec (spec) where

import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/BlazeSpec.hs&quot;, srcSpanStartLine = 5, srcSpanStartColumn = 8, srcSpanEndLine = 5, srcSpanEndColumn = 18}, srcInfoPoints = []}) &quot;Test.Hspec&quot;"><span class="mpre">Test.Hspec</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/BlazeSpec.hs&quot;, srcSpanStartLine = 6, srcSpanStartColumn = 8, srcSpanEndLine = 6, srcSpanEndColumn = 29}, srcInfoPoints = []}) &quot;Test.Hspec.QuickCheck&quot;"><span class="mpre">Test.Hspec.QuickCheck</span></span><span class="mpre"> (prop)

import qualified Data.Conduit as C
import qualified Data.Conduit.List as CL
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/BlazeSpec.hs&quot;, srcSpanStartLine = 10, srcSpanStartColumn = 8, srcSpanEndLine = 10, srcSpanEndColumn = 29}, srcInfoPoints = []}) &quot;Data.ByteString.Char8&quot;"><span class="mpre">Data.ByteString.Char8</span></span><span class="mpre"> ()
import Data.Conduit.Blaze (</span><a href="Data.Conduit.Blaze.html#loc_64_1_64_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Blaze.html#loc_64_1_64_20&#39;)"><span class="mpre">builderToByteString</span></a><span class="mpre">, </span><a href="Data.Conduit.Blaze.html#loc_71_1_71_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Blaze.html#loc_71_1_71_25&#39;)"><span class="mpre">builderToByteStringFlush</span></a><span class="mpre">)
import Control.Monad.ST (runST)
import Data.Monoid
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/BlazeSpec.hs&quot;, srcSpanStartLine = 14, srcSpanStartColumn = 18, srcSpanEndLine = 14, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as S
import Blaze.ByteString.Builder (</span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="mpre">fromByteString</span></a><span class="mpre">, </span><a href="Blaze.ByteString.Builder.Internal.html#loc_269_1_269_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_269_1_269_17&#39;)"><span class="mpre">toLazyByteString</span></a><span class="mpre">, </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_227_1_227_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_227_1_227_21&#39;)"><span class="mpre">insertLazyByteString</span></a><span class="mpre">, </span><a href="Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6&#39;)"><span class="mpre">flush</span></a><span class="mpre">)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/BlazeSpec.hs&quot;, srcSpanStartLine = 16, srcSpanStartColumn = 18, srcSpanEndLine = 16, srcSpanEndColumn = 38}, srcInfoPoints = []}) &quot;Data.ByteString.Lazy&quot;"><span class="mpre">Data.ByteString.Lazy</span></span><span class="mpre"> as L
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/BlazeSpec.hs&quot;, srcSpanStartLine = 17, srcSpanStartColumn = 8, srcSpanEndLine = 17, srcSpanEndColumn = 34}, srcInfoPoints = []}) &quot;Data.ByteString.Lazy.Char8&quot;"><span class="mpre">Data.ByteString.Lazy.Char8</span></span><span class="mpre"> ()

</span><a href="#loc_20_1_20_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_20_1_20_5&#39;)"><span class="mpre">spec</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Spec</span></span><span class="mpre">
</span><a name="loc_20_1_20_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_20_1_20_5&#39;)"><span class="hl_vardecl"><span class="mpre">spec</span></span></a><span class="mpre"> =
    </span><span class="hl_varref"><span class="mpre">describe</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;Data.Conduit.Blaze&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
        </span><span class="hl_varref"><span class="mpre">prop</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;idempotent to toLazyByteString&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_22_50_22_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_50_22_54&#39;)"><span class="hl_vardecl"><span class="mpre">bss&#39;</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">runST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_23_17_23_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_17_23_20&#39;)"><span class="hl_vardecl"><span class="mpre">bss</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">S.pack</span></span><span class="mpre"> </span><a href="#loc_22_50_22_54" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_22_50_22_54&#39;)"><span class="hl_varref"><span class="mpre">bss&#39;</span></span></a><span class="mpre">
            let </span><a name="loc_24_17_24_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_17_24_25&#39;)"><span class="hl_vardecl"><span class="mpre">builders</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><a href="#loc_23_17_23_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_23_17_23_20&#39;)"><span class="hl_varref"><span class="mpre">bss</span></span></a><span class="mpre">
            let </span><a name="loc_25_17_25_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_17_25_20&#39;)"><span class="hl_vardecl"><span class="mpre">lbs</span></span></a><span class="mpre"> = </span><a href="Blaze.ByteString.Builder.Internal.html#loc_269_1_269_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_269_1_269_17&#39;)"><span class="hl_varref"><span class="mpre">toLazyByteString</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><a href="#loc_24_17_24_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_17_24_25&#39;)"><span class="hl_varref"><span class="mpre">builders</span></span></a><span class="mpre">
            let </span><a name="loc_26_17_26_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_17_26_20&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> = </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">) </span><a href="#loc_24_17_24_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_24_17_24_25&#39;)"><span class="hl_varref"><span class="mpre">builders</span></span></a><span class="mpre">
            </span><a name="loc_27_13_27_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_13_27_19&#39;)"><span class="hl_vardecl"><span class="mpre">outBss</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_26_17_26_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_26_17_26_20&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_134_14_134_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_134_14_134_16&#39;)"><span class="hl_infix"><span class="mpre">C.$=</span></span></a><span class="mpre"> </span><a href="Data.Conduit.Blaze.html#loc_64_1_64_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Blaze.html#loc_64_1_64_20&#39;)"><span class="hl_varref"><span class="mpre">builderToByteString</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">C.$$</span></span></a><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_450_1_450_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_450_1_450_8&#39;)"><span class="hl_varref"><span class="mpre">CL.consume</span></span></a><span class="mpre">
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_25_17_25_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_25_17_25_20&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">L.fromChunks</span></span><span class="mpre"> </span><a href="#loc_27_13_27_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_27_13_27_19&#39;)"><span class="hl_varref"><span class="mpre">outBss</span></span></a><span class="mpre">

        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;works for large input&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_31_17_31_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_17_31_25&#39;)"><span class="hl_vardecl"><span class="mpre">builders</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">replicate</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">10000</span></span><span class="mpre"> (</span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hello world!&quot;</span></span><span class="mpre">)
            let </span><a name="loc_32_17_32_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_17_32_20&#39;)"><span class="hl_vardecl"><span class="mpre">lbs</span></span></a><span class="mpre"> = </span><a href="Blaze.ByteString.Builder.Internal.html#loc_269_1_269_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_269_1_269_17&#39;)"><span class="hl_varref"><span class="mpre">toLazyByteString</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><a href="#loc_31_17_31_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_17_31_25&#39;)"><span class="hl_varref"><span class="mpre">builders</span></span></a><span class="mpre">
            let </span><a name="loc_33_17_33_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_17_33_20&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> = </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">) </span><a href="#loc_31_17_31_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_31_17_31_25&#39;)"><span class="hl_varref"><span class="mpre">builders</span></span></a><span class="mpre">
            </span><a name="loc_34_13_34_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_13_34_19&#39;)"><span class="hl_vardecl"><span class="mpre">outBss</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_33_17_33_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_33_17_33_20&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_134_14_134_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_134_14_134_16&#39;)"><span class="hl_infix"><span class="mpre">C.$=</span></span></a><span class="mpre"> </span><a href="Data.Conduit.Blaze.html#loc_64_1_64_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Blaze.html#loc_64_1_64_20&#39;)"><span class="hl_varref"><span class="mpre">builderToByteString</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">C.$$</span></span></a><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_450_1_450_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_450_1_450_8&#39;)"><span class="hl_varref"><span class="mpre">CL.consume</span></span></a><span class="mpre">
            </span><a href="#loc_32_17_32_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_32_17_32_20&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">L.fromChunks</span></span><span class="mpre"> </span><a href="#loc_34_13_34_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_34_13_34_19&#39;)"><span class="hl_varref"><span class="mpre">outBss</span></span></a><span class="mpre">

        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;works for lazy bytestring insertion&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_38_17_38_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_17_38_25&#39;)"><span class="hl_vardecl"><span class="mpre">builders</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">replicate</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">10000</span></span><span class="mpre"> (</span><a href="Blaze.ByteString.Builder.ByteString.html#loc_227_1_227_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_227_1_227_21&#39;)"><span class="hl_varref"><span class="mpre">insertLazyByteString</span></span></a><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;hello world!&quot;</span></span><span class="mpre">)
            let </span><a name="loc_39_17_39_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_17_39_20&#39;)"><span class="hl_vardecl"><span class="mpre">lbs</span></span></a><span class="mpre"> = </span><a href="Blaze.ByteString.Builder.Internal.html#loc_269_1_269_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_269_1_269_17&#39;)"><span class="hl_varref"><span class="mpre">toLazyByteString</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><a href="#loc_38_17_38_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_17_38_25&#39;)"><span class="hl_varref"><span class="mpre">builders</span></span></a><span class="mpre">
            let </span><a name="loc_40_17_40_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_17_40_20&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> = </span><a href="Data.Monoid.html#loc_84_9_84_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_84_9_84_16&#39;)"><span class="hl_varref"><span class="mpre">mconcat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre">) </span><a href="#loc_38_17_38_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_38_17_38_25&#39;)"><span class="hl_varref"><span class="mpre">builders</span></span></a><span class="mpre">
            </span><a name="loc_41_13_41_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_13_41_19&#39;)"><span class="hl_vardecl"><span class="mpre">outBss</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_40_17_40_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_40_17_40_20&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_134_14_134_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_134_14_134_16&#39;)"><span class="hl_infix"><span class="mpre">C.$=</span></span></a><span class="mpre"> </span><a href="Data.Conduit.Blaze.html#loc_64_1_64_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Blaze.html#loc_64_1_64_20&#39;)"><span class="hl_varref"><span class="mpre">builderToByteString</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">C.$$</span></span></a><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_450_1_450_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_450_1_450_8&#39;)"><span class="hl_varref"><span class="mpre">CL.consume</span></span></a><span class="mpre">
            </span><a href="#loc_39_17_39_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_39_17_39_20&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">L.fromChunks</span></span><span class="mpre"> </span><a href="#loc_41_13_41_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_41_13_41_19&#39;)"><span class="hl_varref"><span class="mpre">outBss</span></span></a><span class="mpre">

        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;flush shouldn&#39;t bring in empty strings.&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_45_17_45_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_17_45_20&#39;)"><span class="hl_vardecl"><span class="mpre">dat</span></span></a><span class="mpre"> = [</span><span class="hl_string"><span class="mpre">&quot;hello&quot;</span></span><span class="mpre">, </span><span class="hl_string"><span class="mpre">&quot;world&quot;</span></span><span class="mpre">]
                </span><a name="loc_46_17_46_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_17_46_20&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_45_17_45_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_17_45_20&#39;)"><span class="hl_varref"><span class="mpre">dat</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_134_14_134_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_134_14_134_16&#39;)"><span class="hl_infix"><span class="mpre">C.$=</span></span></a><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_268_1_268_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_268_1_268_4&#39;)"><span class="hl_varref"><span class="mpre">CL.map</span></span></a><span class="mpre"> ((</span><a href="Data.Monoid.html#loc_82_9_82_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Monoid.html#loc_82_9_82_16&#39;)"><span class="hl_infix"><span class="mpre">`mappend`</span></span></a><span class="mpre"> </span><a href="Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.Internal.html#loc_139_1_139_6&#39;)"><span class="hl_varref"><span class="mpre">flush</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre">)
            </span><a name="loc_47_13_47_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_13_47_16&#39;)"><span class="hl_vardecl"><span class="mpre">out</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_46_17_46_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_46_17_46_20&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_134_14_134_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_134_14_134_16&#39;)"><span class="hl_infix"><span class="mpre">C.$=</span></span></a><span class="mpre"> </span><a href="Data.Conduit.Blaze.html#loc_64_1_64_20" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Blaze.html#loc_64_1_64_20&#39;)"><span class="hl_varref"><span class="mpre">builderToByteString</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">C.$$</span></span></a><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_450_1_450_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_450_1_450_8&#39;)"><span class="hl_varref"><span class="mpre">CL.consume</span></span></a><span class="mpre">
            </span><a href="#loc_45_17_45_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_45_17_45_20&#39;)"><span class="hl_varref"><span class="mpre">dat</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><a href="#loc_47_13_47_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_47_13_47_16&#39;)"><span class="hl_varref"><span class="mpre">out</span></span></a><span class="mpre">

        </span><span class="hl_varref"><span class="mpre">prop</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;flushing&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> \</span><a name="loc_50_28_50_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_28_50_32&#39;)"><span class="hl_vardecl"><span class="mpre">bss&#39;</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">runST</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_51_17_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_17_51_20&#39;)"><span class="hl_vardecl"><span class="mpre">bss</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> (\</span><a name="loc_51_35_51_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_35_51_37&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> -&gt; [</span><a href="Data.Conduit.html#loc_358_16_358_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_358_16_358_21&#39;)"><span class="hl_conref"><span class="mpre">C.Chunk</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">S.pack</span></span><span class="mpre"> </span><a href="#loc_51_35_51_37" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_35_51_37&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a href="Data.Conduit.html#loc_358_26_358_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_358_26_358_31&#39;)"><span class="hl_conref"><span class="mpre">C.Flush</span></span></a><span class="mpre">]) </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">filter</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">null</span></span><span class="mpre">) </span><a href="#loc_50_28_50_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_50_28_50_32&#39;)"><span class="hl_varref"><span class="mpre">bss&#39;</span></span></a><span class="mpre">
            let </span><a name="loc_52_17_52_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_17_52_20&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre">) </span><a href="#loc_51_17_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_17_51_20&#39;)"><span class="hl_varref"><span class="mpre">bss</span></span></a><span class="mpre">
            </span><a name="loc_53_13_53_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_13_53_19&#39;)"><span class="hl_vardecl"><span class="mpre">outBss</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_52_17_52_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_52_17_52_20&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_134_14_134_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_134_14_134_16&#39;)"><span class="hl_infix"><span class="mpre">C.$=</span></span></a><span class="mpre"> </span><a href="Data.Conduit.Blaze.html#loc_71_1_71_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Blaze.html#loc_71_1_71_25&#39;)"><span class="hl_varref"><span class="mpre">builderToByteStringFlush</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">C.$$</span></span></a><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_450_1_450_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_450_1_450_8&#39;)"><span class="hl_varref"><span class="mpre">CL.consume</span></span></a><span class="mpre">
            if </span><a href="#loc_51_17_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_17_51_20&#39;)"><span class="hl_varref"><span class="mpre">bss</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_53_13_53_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_13_53_19&#39;)"><span class="hl_varref"><span class="mpre">outBss</span></span></a><span class="mpre"> then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> else </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> (</span><a href="#loc_51_17_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_17_51_20&#39;)"><span class="hl_varref"><span class="mpre">bss</span></span></a><span class="mpre">, </span><a href="#loc_53_13_53_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_13_53_19&#39;)"><span class="hl_varref"><span class="mpre">outBss</span></span></a><span class="mpre">))
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_51_17_51_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_51_17_51_20&#39;)"><span class="hl_varref"><span class="mpre">bss</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_53_13_53_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_53_13_53_19&#39;)"><span class="hl_varref"><span class="mpre">outBss</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">it</span></span><span class="mpre"> </span><span class="hl_string"><span class="mpre">&quot;large flush input&quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            let </span><a name="loc_57_17_57_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_17_57_20&#39;)"><span class="hl_vardecl"><span class="mpre">lbs</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">L.pack</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">concat</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">replicate</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">100000</span></span><span class="mpre"> </span><span class="warning" data-warning="ExpEnumFromTo (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/BlazeSpec.hs&quot;, srcSpanStartLine = 57, srcSpanStartColumn = 58, srcSpanEndLine = 57, srcSpanEndColumn = 66}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/test/Data/Conduit/BlazeSpec.hs&quot;, srcSpanStartLine = 57, srcSpanStartColumn = 58, srcSpanEndLine = 57, srcSpanEndColumn = 59},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/conduit-extra-1.1.1/t"><span class="mpre">[0..255]</span></span><span class="mpre">
                </span><a name="loc_58_17_58_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_17_58_23&#39;)"><span class="hl_vardecl"><span class="mpre">chunks</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">map</span></span><span class="mpre"> (</span><a href="Data.Conduit.html#loc_358_16_358_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_358_16_358_21&#39;)"><span class="hl_conref"><span class="mpre">C.Chunk</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Blaze.ByteString.Builder.ByteString.html#loc_94_1_94_15&#39;)"><span class="hl_varref"><span class="mpre">fromByteString</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">L.toChunks</span></span><span class="mpre"> </span><a href="#loc_57_17_57_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_17_57_20&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre">)
                </span><a name="loc_59_17_59_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_17_59_20&#39;)"><span class="hl_vardecl"><span class="mpre">src</span></span></a><span class="mpre"> = </span><a href="Data.Conduit.List.html#loc_115_1_115_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_115_1_115_11&#39;)"><span class="hl_varref"><span class="mpre">CL.sourceList</span></span></a><span class="mpre"> </span><a href="#loc_58_17_58_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_58_17_58_23&#39;)"><span class="hl_varref"><span class="mpre">chunks</span></span></a><span class="mpre">
            </span><a name="loc_60_13_60_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_13_60_16&#39;)"><span class="hl_vardecl"><span class="mpre">bss</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_59_17_59_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_59_17_59_20&#39;)"><span class="hl_varref"><span class="mpre">src</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_116_5_116_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_116_5_116_7&#39;)"><span class="hl_infix"><span class="mpre">C.$$</span></span></a><span class="mpre"> </span><a href="Data.Conduit.Blaze.html#loc_71_1_71_25" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.Blaze.html#loc_71_1_71_25&#39;)"><span class="hl_varref"><span class="mpre">builderToByteStringFlush</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_149_14_149_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_149_14_149_16&#39;)"><span class="hl_infix"><span class="mpre">C.=$</span></span></a><span class="mpre"> </span><a href="Data.Conduit.List.html#loc_450_1_450_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.List.html#loc_450_1_450_8&#39;)"><span class="hl_varref"><span class="mpre">CL.consume</span></span></a><span class="mpre">
            let </span><a name="loc_61_17_61_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_17_61_24&#39;)"><span class="hl_fundecl"><span class="mpre">unFlush</span></span></a><span class="mpre"> (</span><a href="Data.Conduit.html#loc_358_16_358_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_358_16_358_21&#39;)"><span class="hl_conref"><span class="mpre">C.Chunk</span></span></a><span class="mpre"> </span><a name="loc_61_34_61_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_34_61_35&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">) = [</span><a href="#loc_61_34_61_35" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_34_61_35&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">]
                </span><a href="#loc_61_17_61_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_17_61_24&#39;)"><span class="hl_fundecl"><span class="mpre">unFlush</span></span></a><span class="mpre"> </span><a href="Data.Conduit.html#loc_358_26_358_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Conduit.html#loc_358_26_358_31&#39;)"><span class="hl_conref"><span class="mpre">C.Flush</span></span></a><span class="mpre"> = []
            </span><span class="hl_varref"><span class="mpre">L.fromChunks</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">concatMap</span></span><span class="mpre"> </span><a href="#loc_61_17_61_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_61_17_61_24&#39;)"><span class="hl_varref"><span class="mpre">unFlush</span></span></a><span class="mpre"> </span><a href="#loc_60_13_60_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_60_13_60_16&#39;)"><span class="hl_varref"><span class="mpre">bss</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">`shouldBe`</span></span><span class="mpre"> </span><a href="#loc_57_17_57_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_57_17_57_20&#39;)"><span class="hl_varref"><span class="mpre">lbs</span></span></a><span class="mpre">
</span></div></body></html>