<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
{-# LANGUAGE Rank2Types #-}
#ifdef TRUSTWORTHY
{-# LANGUAGE Trustworthy #-}
#endif
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Control.Lens.Review</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2012-14 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- A &#39;Review&#39; is a type-restricted form of a &#39;Prism&#39; that can only be used for</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- writing back via &#39;re&#39;, &#39;review&#39;, &#39;reuse&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-------------------------------------------------------------------------------</span></span><span class="mpre">
module Control.Lens.Review
  (
  </span><span class="hl_comment"><span class="mpre">-- * Reviewing</span></span><span class="mpre">
    Review, Review&#39;
  , AReview, AReview&#39;
  , unto
  , un
  , re
  , review, reviews
  , reuse, reuses
  , ( # )
  , Bifunctor(bimap)
  , retagged
  , Reviewable
  ) where

import Control.Monad.Reader as Reader
import Control.Monad.State as State
import Control.Lens.Getter
import Control.Lens.Internal.Review
import Control.Lens.Internal.Setter
import Control.Lens.Type
import Data.Bifunctor
import Data.Functor.Identity
import Data.Profunctor
import Data.Profunctor.Unsafe
import Data.Tagged
import Data.Void

</span><span class="hl_comment"><span class="mpre">-- $setup</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; :set -XNoOverloadedStrings</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Control.Lens</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; import Numeric.Lens</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let isLeft  (Left  _) = True; isLeft  _ = False</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; let isRight (Right _) = True; isRight _ = False</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclInfixDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 1, srcSpanEndLine = 54, srcSpanEndColumn = 11}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 54, srcSpanStartColumn = 8, srcSpanEndLine = 54, srcSpanEndColumn = 9}]}) (AssocRight (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src"><span class="mpre">infixr 8 #</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Review</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This is a limited form of a &#39;Prism&#39; that can only be used for &#39;re&#39; operations.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Like with a &#39;Getter&#39;, there are no laws to state for a &#39;Review&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- You can generate a &#39;Review&#39; by using &#39;unto&#39;. You can also use any &#39;Prism&#39; or &#39;Iso&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- directly as a &#39;Review&#39;.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 66, srcSpanStartColumn = 1, srcSpanEndLine = 66, srcSpanEndColumn = 95}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 66, srcSpanStartColumn = 1, srcSpanEndLine = 66, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine ="><span class="mpre">type Review s t a b = forall p f. (Profunctor p, Bifunctor p, Settable f) =&gt; Optic p f s t a b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A &#39;Simple&#39; &#39;Review&#39;</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 69, srcSpanStartColumn = 1, srcSpanEndLine = 69, srcSpanEndColumn = 34}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 69, srcSpanStartColumn = 1, srcSpanEndLine = 69, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine ="><span class="mpre">type Review&#39; t b = Review t t b b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | If you see this in a signature for a function, the function is expecting a &#39;Review&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (in practice, this usually means a &#39;Prism&#39;).</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 73, srcSpanStartColumn = 1, srcSpanEndLine = 73, srcSpanEndColumn = 53}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 73, srcSpanStartColumn = 1, srcSpanEndLine = 73, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine ="><span class="mpre">type AReview s t a b = Optic Tagged Identity s t a b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A &#39;Simple&#39; &#39;AReview&#39;</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 76, srcSpanStartColumn = 1, srcSpanEndLine = 76, srcSpanEndColumn = 36}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 76, srcSpanStartColumn = 1, srcSpanEndLine = 76, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine ="><span class="mpre">type AReview&#39; t b = AReview t t b b</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | An analogue of &#39;to&#39; for &#39;review&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unto&#39; :: (b -&gt; t) -&gt; &#39;Review&#39;&#39; t b</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unto&#39; = &#39;un&#39; . &#39;to&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_88_1_88_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_5&#39;)"><span class="mpre">unto</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 9, srcSpanEndLine = 87, srcSpanEndColumn = 50}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 87, srcSpanStartColumn = 9, srcSpanEndLine = 87, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine ="><span class="mpre">(Profunctor p, Bifunctor p, Functor f) =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Optic</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_88_1_88_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_5&#39;)"><span class="hl_fundecl"><span class="mpre">unto</span></span></a><span class="mpre"> </span><a name="loc_88_6_88_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_6_88_7&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Data.Bifunctor.html#loc_62_3_62_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Bifunctor.html#loc_62_3_62_8&#39;)"><span class="hl_varref"><span class="mpre">first</span></span></a><span class="mpre"> </span><a href="Data.Void.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Void.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">absurd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Profunctor.Unsafe.html#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_94_3_94_7&#39;)"><span class="hl_varref"><span class="mpre">lmap</span></span></a><span class="mpre"> </span><a href="Data.Void.html#loc_86_1_86_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Void.html#loc_86_1_86_7&#39;)"><span class="hl_varref"><span class="mpre">absurd</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Profunctor.Unsafe.html#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Profunctor.Unsafe.html#loc_101_3_101_7&#39;)"><span class="hl_varref"><span class="mpre">rmap</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_88_6_88_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_6_88_7&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_88_1_88_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_5&#39;)"><span class="mpre">unto</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Turn a &#39;Getter&#39; around to get a &#39;Review&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;un&#39; = &#39;unto&#39; . &#39;view&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unto&#39; = &#39;un&#39; . &#39;to&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; un (to length) # [1,2,3]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 3</span></span><span class="mpre">
</span><a href="#loc_101_1_101_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_1_101_3&#39;)"><span class="mpre">un</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 7, srcSpanEndLine = 100, srcSpanEndColumn = 48}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 100, srcSpanStartColumn = 7, srcSpanEndLine = 100, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLin"><span class="mpre">(Profunctor p, Bifunctor p, Functor f) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Getting</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Optic&#39;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">f</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre">
</span><a name="loc_101_1_101_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_1_101_3&#39;)"><span class="hl_vardecl"><span class="mpre">un</span></span></a><span class="mpre"> = </span><a href="#loc_88_1_88_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_1_88_5&#39;)"><span class="hl_varref"><span class="mpre">unto</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Control.Lens.Getter.html#loc_201_1_201_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Getter.html#loc_201_1_201_5&#39;)"><span class="hl_varref"><span class="mpre">view</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Turn a &#39;Prism&#39; or &#39;Control.Lens.Iso.Iso&#39; around to build a &#39;Getter&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you have an &#39;Control.Lens.Iso.Iso&#39;, &#39;Control.Lens.Iso.from&#39; is a more powerful version of this function</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that will return an &#39;Control.Lens.Iso.Iso&#39; instead of a mere &#39;Getter&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; 5 ^.re _Left</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; 6 ^.re (_Left.unto succ)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left 7</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;review&#39;  ≡ &#39;view&#39;  &#39;.&#39; &#39;re&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reviews&#39; ≡ &#39;views&#39; &#39;.&#39; &#39;re&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuse&#39;   ≡ &#39;use&#39;   &#39;.&#39; &#39;re&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuses&#39;  ≡ &#39;uses&#39;  &#39;.&#39; &#39;re&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;re&#39; :: &#39;Prism&#39; s t a b -&gt; &#39;Getter&#39; b t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;re&#39; :: &#39;Iso&#39; s t a b   -&gt; &#39;Getter&#39; b t</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_126_1_126_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_1_126_3&#39;)"><span class="mpre">re</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">AReview</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Getter</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_126_1_126_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_1_126_3&#39;)"><span class="hl_fundecl"><span class="mpre">re</span></span></a><span class="mpre"> </span><a name="loc_126_4_126_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_4_126_5&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Control.Lens.Getter.html#loc_121_1_121_3" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Lens.Getter.html#loc_121_1_121_3&#39;)"><span class="hl_varref"><span class="mpre">to</span></span></a><span class="mpre"> (</span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Tagged.html#loc_59_31_59_39" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_31_59_39&#39;)"><span class="hl_varref"><span class="mpre">unTagged</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_126_4_126_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_4_126_5&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_126_1_126_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_126_1_126_3&#39;)"><span class="mpre">re</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This can be used to turn an &#39;Control.Lens.Iso.Iso&#39; or &#39;Prism&#39; around and &#39;view&#39; a value (or the current environment) through it the other way.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;review&#39; ≡ &#39;view&#39; &#39;.&#39; &#39;re&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;review&#39; . &#39;unto&#39; ≡ &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; review _Left &quot;mustard&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left &quot;mustard&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; review (unto succ) 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 6</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Usually &#39;review&#39; is used in the @(-&gt;)@ &#39;Monad&#39; with a &#39;Prism&#39; or &#39;Control.Lens.Iso.Iso&#39;, in which case it may be useful to think of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it as having one of these more restricted type signatures:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;review&#39; :: &#39;Iso&#39;&#39; s a   -&gt; a -&gt; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;review&#39; :: &#39;Prism&#39;&#39; s a -&gt; a -&gt; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- However, when working with a &#39;Monad&#39; transformer stack, it is sometimes useful to be able to &#39;review&#39; the current environment, in which case one of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- these more slightly more liberal type signatures may be beneficial to think of it as having:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;review&#39; :: &#39;MonadReader&#39; a m =&gt; &#39;Iso&#39;&#39; s a   -&gt; m s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;review&#39; :: &#39;MonadReader&#39; a m =&gt; &#39;Prism&#39;&#39; s a -&gt; m s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_158_1_158_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_7&#39;)"><span class="mpre">review</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 157, srcSpanStartColumn = 11, srcSpanEndLine = 157, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 157, srcSpanStartColumn = 27, srcSpanEndLine = 157, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadReader b m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">AReview</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_158_1_158_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_7&#39;)"><span class="hl_fundecl"><span class="mpre">review</span></span></a><span class="mpre"> </span><a name="loc_158_8_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_8_158_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Reader.Class.html#loc_96_1_96_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_96_1_96_5&#39;)"><span class="hl_varref"><span class="mpre">asks</span></span></a><span class="mpre"> (</span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Tagged.html#loc_59_31_59_39" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_31_59_39&#39;)"><span class="hl_varref"><span class="mpre">unTagged</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_158_8_158_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_8_158_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_158_1_158_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_158_1_158_7&#39;)"><span class="mpre">review</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | An infix alias for &#39;review&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;unto&#39; f # x ≡ f x</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- l # x ≡ x &#39;^.&#39; &#39;re&#39; l</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This is commonly used when using a &#39;Prism&#39; as a smart constructor.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; _Left # 4</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left 4</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- But it can be used for any &#39;Prism&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; base 16 # 123</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &quot;7b&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (#) :: &#39;Iso&#39;&#39;      s a -&gt; a -&gt; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (#) :: &#39;Prism&#39;&#39;    s a -&gt; a -&gt; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (#) :: &#39;Review&#39;&#39;   s a -&gt; a -&gt; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- (#) :: &#39;Equality&#39;&#39; s a -&gt; a -&gt; s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_185_1_185_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_6&#39;)"><span class="mpre">( # )</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">AReview</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_185_1_185_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_6&#39;)"><span class="hl_fundecl"><span class="mpre">( # )</span></span></a><span class="mpre"> </span><a name="loc_185_7_185_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_7_185_8&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Tagged.html#loc_59_31_59_39" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_31_59_39&#39;)"><span class="hl_varref"><span class="mpre">unTagged</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_185_7_185_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_7_185_8&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre">
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_185_1_185_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_1_185_6&#39;)"><span class="mpre">( # )</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This can be used to turn an &#39;Control.Lens.Iso.Iso&#39; or &#39;Prism&#39; around and &#39;view&#39; a value (or the current environment) through it the other way,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- applying a function.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reviews&#39; ≡ &#39;views&#39; &#39;.&#39; &#39;re&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reviews&#39; (&#39;unto&#39; f) g ≡ g &#39;.&#39; f</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; reviews _Left isRight &quot;mustard&quot;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- False</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; reviews (unto succ) (*2) 3</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 8</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Usually this function is used in the @(-&gt;)@ &#39;Monad&#39; with a &#39;Prism&#39; or &#39;Control.Lens.Iso.Iso&#39;, in which case it may be useful to think of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it as having one of these more restricted type signatures:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reviews&#39; :: &#39;Iso&#39;&#39; s a   -&gt; (s -&gt; r) -&gt; a -&gt; r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reviews&#39; :: &#39;Prism&#39;&#39; s a -&gt; (s -&gt; r) -&gt; a -&gt; r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- However, when working with a &#39;Monad&#39; transformer stack, it is sometimes useful to be able to &#39;review&#39; the current environment, in which case one of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- these more slightly more liberal type signatures may be beneficial to think of it as having:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reviews&#39; :: &#39;MonadReader&#39; a m =&gt; &#39;Iso&#39;&#39; s a   -&gt; (s -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reviews&#39; :: &#39;MonadReader&#39; a m =&gt; &#39;Prism&#39;&#39; s a -&gt; (s -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_218_1_218_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_8&#39;)"><span class="mpre">reviews</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 217, srcSpanStartColumn = 12, srcSpanEndLine = 217, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 217, srcSpanStartColumn = 28, srcSpanEndLine = 217, srcSpanEndColumn = 30}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadReader b m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">AReview</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_218_1_218_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_8&#39;)"><span class="hl_fundecl"><span class="mpre">reviews</span></span></a><span class="mpre"> </span><a name="loc_218_9_218_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_9_218_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_218_11_218_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_11_218_13&#39;)"><span class="hl_vardecl"><span class="mpre">tr</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Reader.Class.html#loc_96_1_96_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Reader.Class.html#loc_96_1_96_5&#39;)"><span class="hl_varref"><span class="mpre">asks</span></span></a><span class="mpre"> (</span><a href="#loc_218_11_218_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_11_218_13&#39;)"><span class="hl_varref"><span class="mpre">tr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Tagged.html#loc_59_31_59_39" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_31_59_39&#39;)"><span class="hl_varref"><span class="mpre">unTagged</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_218_9_218_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_9_218_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_218_1_218_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_218_1_218_8&#39;)"><span class="mpre">reviews</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This can be used to turn an &#39;Control.Lens.Iso.Iso&#39; or &#39;Prism&#39; around and &#39;use&#39; a value (or the current environment) through it the other way.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuse&#39; ≡ &#39;use&#39; &#39;.&#39; &#39;re&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuse&#39; &#39;.&#39; &#39;unto&#39; ≡ &#39;gets&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; evalState (reuse _Left) 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Left 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; evalState (reuse (unto succ)) 5</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- 6</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuse&#39; :: &#39;MonadState&#39; a m =&gt; &#39;Prism&#39;&#39; s a -&gt; m s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuse&#39; :: &#39;MonadState&#39; a m =&gt; &#39;Iso&#39;&#39; s a   -&gt; m s</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_239_1_239_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_239_1_239_6&#39;)"><span class="mpre">reuse</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 238, srcSpanStartColumn = 10, srcSpanEndLine = 238, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 238, srcSpanStartColumn = 25, srcSpanEndLine = 238, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadState b m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">AReview</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre">
</span><a name="loc_239_1_239_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_239_1_239_6&#39;)"><span class="hl_fundecl"><span class="mpre">reuse</span></span></a><span class="mpre"> </span><a name="loc_239_7_239_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_239_7_239_8&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Control.Monad.State.Class.html#loc_95_1_95_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_95_1_95_5&#39;)"><span class="hl_varref"><span class="mpre">gets</span></span></a><span class="mpre"> (</span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Tagged.html#loc_59_31_59_39" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_31_59_39&#39;)"><span class="hl_varref"><span class="mpre">unTagged</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_239_7_239_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_239_7_239_8&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_239_1_239_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_239_1_239_6&#39;)"><span class="mpre">reuse</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | This can be used to turn an &#39;Control.Lens.Iso.Iso&#39; or &#39;Prism&#39; around and &#39;use&#39; the current state through it the other way,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- applying a function.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuses&#39; ≡ &#39;uses&#39; &#39;.&#39; &#39;re&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuses&#39; (&#39;unto&#39; f) g ≡ &#39;gets&#39; (g &#39;.&#39; f)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;&gt;&gt; evalState (reuses _Left isLeft) (5 :: Int)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- True</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuses&#39; :: &#39;MonadState&#39; a m =&gt; &#39;Prism&#39;&#39; s a -&gt; (s -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;reuses&#39; :: &#39;MonadState&#39; a m =&gt; &#39;Iso&#39;&#39; s a   -&gt; (s -&gt; r) -&gt; m r</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><a href="#loc_258_1_258_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_1_258_7&#39;)"><span class="mpre">reuses</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 257, srcSpanStartColumn = 11, srcSpanEndLine = 257, srcSpanEndColumn = 28}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/src/Control/Lens/Review.hs&quot;, srcSpanStartLine = 257, srcSpanStartColumn = 26, srcSpanEndLine = 257, srcSpanEndColumn = 28}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/lens-4.3/s"><span class="mpre">MonadState b m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">AReview</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">s</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">t</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_258_1_258_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_1_258_7&#39;)"><span class="hl_fundecl"><span class="mpre">reuses</span></span></a><span class="mpre"> </span><a name="loc_258_8_258_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_8_258_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> </span><a name="loc_258_10_258_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_10_258_12&#39;)"><span class="hl_vardecl"><span class="mpre">tr</span></span></a><span class="mpre"> = </span><a href="Control.Monad.State.Class.html#loc_95_1_95_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.State.Class.html#loc_95_1_95_5&#39;)"><span class="hl_varref"><span class="mpre">gets</span></span></a><span class="mpre"> (</span><a href="#loc_258_10_258_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_10_258_12&#39;)"><span class="hl_varref"><span class="mpre">tr</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Data.Functor.Identity.html#loc_35_33_35_44" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_33_35_44&#39;)"><span class="hl_varref"><span class="mpre">runIdentity</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="Data.Tagged.html#loc_59_31_59_39" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_31_59_39&#39;)"><span class="hl_varref"><span class="mpre">unTagged</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">#.</span></span><span class="mpre"> </span><a href="#loc_258_8_258_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_8_258_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.#</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Identity</span></span><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_258_1_258_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_258_1_258_7&#39;)"><span class="mpre">reuses</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>