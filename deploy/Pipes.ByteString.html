<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE RankNTypes, Trustworthy #-}

</span><span class="hl_comment"><span class="mpre">{-| This module provides @pipes@ utilities for \&quot;byte streams\&quot;, which are
    streams of strict &#39;ByteString&#39;s chunks.  Use byte streams to interact
    with both &#39;IO.Handle&#39;s and lazy &#39;ByteString&#39;s.

    To stream to or from &#39;IO.Handle&#39;s, use &#39;fromHandle&#39; or &#39;toHandle&#39;.  For
    example, the following program copies data from one file to another:

&gt; import Pipes
&gt; import qualified Pipes.ByteString as P
&gt; import System.IO
&gt;
&gt; main =
&gt;     withFile &quot;inFile.txt&quot;  ReadMode  $ \hIn  -&gt;
&gt;     withFile &quot;outFile.txt&quot; WriteMode $ \hOut -&gt;
&gt;     runEffect $ P.fromHandle hIn &gt;-&gt; P.toHandle hOut

    You can stream to and from &#39;stdin&#39; and &#39;stdout&#39; using the predefined &#39;stdin&#39;
    and &#39;stdout&#39; pipes, like in the following \&quot;echo\&quot; program:

&gt; main = runEffect $ P.stdin &gt;-&gt; P.stdout

    You can also translate pure lazy &#39;BL.ByteString&#39;s to and from pipes:

&gt; import qualified Data.ByteString.Lazy.Char8 as BL
&gt;
&gt; main = runEffect $ P.fromLazy (BL.pack &quot;Hello, world!\n&quot;) &gt;-&gt; P.stdout

    In addition, this module provides many functions equivalent to lazy
    &#39;ByteString&#39; functions so that you can transform or fold byte streams.  For
    example, to stream only the first three lines of &#39;stdin&#39; to &#39;stdout&#39; you
    would write:

&gt; import Lens.Family (over)
&gt; import Pipes
&gt; import qualified Pipes.ByteString as PB
&gt; import Pipes.Group (takes)
&gt;
&gt; main = runEffect $ over PB.lines (takes 3) PB.stdin &gt;-&gt; PB.stdout

    The above program will never bring more than one chunk (~ 32 KB) into
    memory, no matter how long the lines are.

    Note that functions in this library are designed to operate on streams that
    are insensitive to chunk boundaries.  This means that they may freely split
    chunks into smaller chunks and /discard empty chunks/.  However, they will
    /never concatenate chunks/ in order to provide strict upper bounds on memory
    usage.
-}</span></span><span class="mpre">

module Pipes.ByteString (
    </span><span class="hl_comment"><span class="mpre">-- * Producers</span></span><span class="mpre">
      fromLazy
    , stdin
    , fromHandle
    , hGetSome
    , hGet
    , hGetRange

    </span><span class="hl_comment"><span class="mpre">-- * Servers</span></span><span class="mpre">
    , hGetSomeN
    , hGetN

    </span><span class="hl_comment"><span class="mpre">-- * Consumers</span></span><span class="mpre">
    , stdout
    , toHandle

    </span><span class="hl_comment"><span class="mpre">-- * Pipes</span></span><span class="mpre">
    , map
    , concatMap
    , take
    , takeWhile
    , filter
    , elemIndices
    , findIndices
    , scan

    </span><span class="hl_comment"><span class="mpre">-- * Folds</span></span><span class="mpre">
    , toLazy
    , toLazyM
    , foldBytes
    , head
    , last
    , null
    , length
    , any
    , all
    , maximum
    , minimum
    , elem
    , notElem
    , find
    , index
    , elemIndex
    , findIndex
    , count

    </span><span class="hl_comment"><span class="mpre">-- * Parsing</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $parse</span></span><span class="mpre">
    , nextByte
    , drawByte
    , unDrawByte
    , peekByte
    , isEndOfBytes

    </span><span class="hl_comment"><span class="mpre">-- * Parsing Lenses</span></span><span class="mpre">
    , splitAt
    , span
    , break
    , groupBy
    , group
    , word
    , line

    </span><span class="hl_comment"><span class="mpre">-- * Transforming Byte Streams</span></span><span class="mpre">
    , drop
    , dropWhile
    , intersperse
    , pack
    , unpack
    , chunksOf&#39;

    </span><span class="hl_comment"><span class="mpre">-- * FreeT Transformations</span></span><span class="mpre">
    , chunksOf
    , splitsWith
    , splits
    , groupsBy
    , groups
    , lines
    , unlines
    , words
    , unwords

    </span><span class="hl_comment"><span class="mpre">-- * Re-exports</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">-- $reexports</span></span><span class="mpre">
    , module Data.ByteString
    , module Data.Word
    , module Pipes.Group
    , module Pipes.Parse
    ) where

import Control.Applicative (</span><a href="Control.Applicative.html#loc_125_5_125_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_125_5_125_9&#39;)"><span class="mpre">(&lt;*)</span></a><span class="mpre">)
import Control.Exception (</span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="mpre">throwIO</span></a><span class="mpre">, </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="mpre">try</span></a><span class="mpre">)
import Control.Monad (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="mpre">liftM</span></a><span class="mpre">, </span><a href="Control.Monad.html#loc_204_1_204_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_204_1_204_5&#39;)"><span class="mpre">join</span></a><span class="mpre">)
import Control.Monad.Trans.State.Strict (</span><a href="Control.Monad.Trans.State.Strict.html#loc_220_1_220_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_220_1_220_7&#39;)"><span class="mpre">modify</span></a><span class="mpre">)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 147, srcSpanStartColumn = 18, srcSpanEndLine = 147, srcSpanEndColumn = 33}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> as BS
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 148, srcSpanStartColumn = 8, srcSpanEndLine = 148, srcSpanEndColumn = 23}, srcInfoPoints = []}) &quot;Data.ByteString&quot;"><span class="mpre">Data.ByteString</span></span><span class="mpre"> (ByteString)
import Data.ByteString.Internal (</span><a href="Data.ByteString.Internal.html#loc_560_1_560_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_560_1_560_13&#39;)"><span class="mpre">isSpaceWord8</span></a><span class="mpre">)
import qualified </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 150, srcSpanStartColumn = 18, srcSpanEndLine = 150, srcSpanEndColumn = 38}, srcInfoPoints = []}) &quot;Data.ByteString.Lazy&quot;"><span class="mpre">Data.ByteString.Lazy</span></span><span class="mpre"> as BL
import Data.ByteString.Lazy.Internal (</span><a href="Data.ByteString.Lazy.Internal.html#loc_179_1_179_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_179_1_179_12&#39;)"><span class="mpre">foldrChunks</span></a><span class="mpre">, </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="mpre">defaultChunkSize</span></a><span class="mpre">)
import Data.ByteString.Unsafe (</span><a href="Data.ByteString.Unsafe.html#loc_142_1_142_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Unsafe.html#loc_142_1_142_11&#39;)"><span class="mpre">unsafeTake</span></a><span class="mpre">)
import Data.Char (ord)
import Data.Functor.Constant (</span><a href="Data.Functor.Constant.html#loc_24_9_24_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Constant.html#loc_24_9_24_17&#39;)"><span class="mpre">Constant</span></a><span class="mpre">(Constant, </span><a href="Data.Functor.Constant.html#loc_24_35_24_46" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Constant.html#loc_24_35_24_46&#39;)"><span class="mpre">getConstant</span></a><span class="mpre">))
import Data.Functor.Identity (</span><a href="Data.Functor.Identity.html#loc_35_9_35_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_9_35_17&#39;)"><span class="mpre">Identity</span></a><span class="mpre">)
import qualified Data.List as List
import Data.Word (Word8)
import Foreign.C.Error (</span><a href="Foreign.C.Error.html#loc_112_9_112_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_112_9_112_14&#39;)"><span class="mpre">Errno</span></a><span class="mpre">(</span><a href="Foreign.C.Error.html#loc_112_17_112_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_112_17_112_22&#39;)"><span class="mpre">Errno</span></a><span class="mpre">), </span><a href="Foreign.C.Error.html#loc_213_1_213_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_213_1_213_6&#39;)"><span class="mpre">ePIPE</span></a><span class="mpre">)
import qualified GHC.IO.Exception as G
import Pipes
import Pipes.Core (</span><a href="Pipes.Core.html#loc_263_1_263_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_263_1_263_8&#39;)"><span class="mpre">respond</span></a><span class="mpre">, Server&#39;)
import qualified Pipes.Group as PG
import Pipes.Group (</span><a href="Pipes.Group.html#loc_110_1_110_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_110_1_110_8&#39;)"><span class="mpre">concats</span></a><span class="mpre">, </span><a href="Pipes.Group.html#loc_126_1_126_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_126_1_126_13&#39;)"><span class="mpre">intercalates</span></a><span class="mpre">, </span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="mpre">FreeT</span></a><span class="mpre">)
import qualified Pipes.Parse as PP
import Pipes.Parse (Parser)
import qualified Pipes.Prelude as P
import qualified System.IO as IO
import Prelude hiding (
      all
    , any
    , break
    , concatMap
    , drop
    , dropWhile
    , elem
    , filter
    , head
    , last
    , </span><a href="Data.List.html#loc_1044_1_1044_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1044_1_1044_6&#39;)"><span class="mpre">lines</span></a><span class="mpre">
    , length
    , map
    , </span><a href="Data.List.html#loc_523_1_523_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_523_1_523_8&#39;)"><span class="mpre">maximum</span></a><span class="mpre">
    , </span><a href="Data.List.html#loc_544_1_544_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_544_1_544_8&#39;)"><span class="mpre">minimum</span></a><span class="mpre">
    , notElem
    , null
    , span
    , splitAt
    , take
    , takeWhile
    , </span><a href="Data.List.html#loc_1060_1_1060_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1060_1_1060_8&#39;)"><span class="mpre">unlines</span></a><span class="mpre">
    , </span><a href="Data.List.html#loc_1081_1_1081_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1081_1_1081_8&#39;)"><span class="mpre">unwords</span></a><span class="mpre">
    , </span><a href="Data.List.html#loc_1071_1_1071_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.List.html#loc_1071_1_1071_6&#39;)"><span class="mpre">words</span></a><span class="mpre">
    )

</span><span class="hl_comment"><span class="mpre">-- | Convert a lazy &#39;BL.ByteString&#39; into a &#39;Producer&#39; of strict &#39;ByteString&#39;s</span></span><span class="mpre">
</span><a href="#loc_197_1_197_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_1_197_9&#39;)"><span class="mpre">fromLazy</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 13, srcSpanEndLine = 196, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 196, srcSpanStartColumn = 21, srcSpanEndLine = 196, srcSpanEndColumn = 23}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">BL.ByteString</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_197_1_197_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_1_197_9&#39;)"><span class="hl_fundecl"><span class="mpre">fromLazy</span></span></a><span class="mpre"> </span><a name="loc_197_10_197_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_10_197_12&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> = </span><a href="Data.ByteString.Lazy.Internal.html#loc_179_1_179_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_179_1_179_12&#39;)"><span class="hl_varref"><span class="mpre">foldrChunks</span></span></a><span class="mpre"> (\</span><a name="loc_197_29_197_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_29_197_30&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre"> </span><a name="loc_197_31_197_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_31_197_32&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> -&gt; </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_197_29_197_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_29_197_30&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_197_31_197_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_31_197_32&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">) </span><a href="#loc_197_10_197_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_197_10_197_12&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE fromLazy #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Stream bytes from &#39;stdin&#39;</span></span><span class="mpre">
</span><a href="#loc_202_1_202_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_1_202_6&#39;)"><span class="mpre">stdin</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 201, srcSpanStartColumn = 10, srcSpanEndLine = 201, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 201, srcSpanStartColumn = 20, srcSpanEndLine = 201, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_202_1_202_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_202_1_202_6&#39;)"><span class="hl_vardecl"><span class="mpre">stdin</span></span></a><span class="mpre"> = </span><a href="#loc_207_1_207_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_1_207_11&#39;)"><span class="hl_varref"><span class="mpre">fromHandle</span></span></a><span class="mpre"> </span><a href="GHC.IO.Handle.FD.html#loc_52_1_52_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.FD.html#loc_52_1_52_6&#39;)"><span class="hl_varref"><span class="mpre">IO.stdin</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE stdin #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Convert a &#39;IO.Handle&#39; into a byte stream using a default chunk size</span></span><span class="mpre">
</span><a href="#loc_207_1_207_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_1_207_11&#39;)"><span class="mpre">fromHandle</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 206, srcSpanStartColumn = 15, srcSpanEndLine = 206, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 206, srcSpanStartColumn = 25, srcSpanEndLine = 206, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_207_1_207_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_207_1_207_11&#39;)"><span class="hl_vardecl"><span class="mpre">fromHandle</span></span></a><span class="mpre"> = </span><a href="#loc_217_1_217_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_9&#39;)"><span class="hl_varref"><span class="mpre">hGetSome</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- TODO: Test chunk size for performance</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE fromHandle #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Convert a handle into a byte stream using a maximum chunk size

    &#39;hGetSome&#39; forwards input immediately as it becomes available, splitting the
    input into multiple chunks if it exceeds the maximum chunk size.
-}</span></span><span class="mpre">
</span><a href="#loc_217_1_217_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_9&#39;)"><span class="mpre">hGetSome</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 216, srcSpanStartColumn = 13, srcSpanEndLine = 216, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 216, srcSpanStartColumn = 23, srcSpanEndLine = 216, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_217_1_217_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_1_217_9&#39;)"><span class="hl_fundecl"><span class="mpre">hGetSome</span></span></a><span class="mpre"> </span><a name="loc_217_10_217_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_10_217_14&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> </span><a name="loc_217_15_217_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_15_217_16&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="#loc_219_5_219_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_5_219_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_219_5_219_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_5_219_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
        </span><a name="loc_220_9_220_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_9_220_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.hGetSome</span></span><span class="mpre"> </span><a href="#loc_217_15_217_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_15_217_16&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_217_10_217_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_217_10_217_14&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">)
        if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_220_9_220_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_9_220_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
            then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            else do
                </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_220_9_220_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_220_9_220_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                </span><a href="#loc_219_5_219_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_219_5_219_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE hGetSome #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Convert a handle into a byte stream using a fixed chunk size

    &#39;hGet&#39; waits until exactly the requested number of bytes are available for
    each chunk.
-}</span></span><span class="mpre">
</span><a href="#loc_234_1_234_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_5&#39;)"><span class="mpre">hGet</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 233, srcSpanStartColumn = 9, srcSpanEndLine = 233, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 233, srcSpanStartColumn = 19, srcSpanEndLine = 233, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_234_1_234_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_5&#39;)"><span class="hl_fundecl"><span class="mpre">hGet</span></span></a><span class="mpre"> </span><a name="loc_234_6_234_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_6_234_10&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> </span><a name="loc_234_11_234_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_11_234_12&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="#loc_236_5_236_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_5_236_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_236_5_236_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_5_236_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
        </span><a name="loc_237_9_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_9_237_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.hGet</span></span><span class="mpre"> </span><a href="#loc_234_11_234_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_11_234_12&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_234_6_234_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_6_234_10&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">)
        if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_237_9_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_9_237_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
            then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            else do
                </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_237_9_237_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_237_9_237_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                </span><a href="#loc_236_5_236_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_236_5_236_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE hGet #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Like &#39;hGet&#39; but with an extra parameter specifying an initial handle offset
-}</span></span><span class="mpre">
</span><a href="#loc_253_1_253_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_1_253_10&#39;)"><span class="mpre">hGetRange</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 248, srcSpanStartColumn = 8, srcSpanEndLine = 249, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 249, srcSpanStartColumn = 5, srcSpanEndLine = 249, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">MonadIO m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ Offset</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_comment"><span class="mpre">-- ^ Size</span></span><span class="mpre">
    -&gt; </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_253_1_253_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_1_253_10&#39;)"><span class="hl_fundecl"><span class="mpre">hGetRange</span></span></a><span class="mpre"> </span><a name="loc_253_11_253_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_11_253_17&#39;)"><span class="hl_vardecl"><span class="mpre">offset</span></span></a><span class="mpre"> </span><a name="loc_253_18_253_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_18_253_22&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> </span><a name="loc_253_23_253_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_23_253_24&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = do
    </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.html#loc_386_1_386_6" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.html#loc_386_1_386_6&#39;)"><span class="hl_varref"><span class="mpre">IO.hSeek</span></span></a><span class="mpre"> </span><a href="#loc_253_23_253_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_23_253_24&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">IO.AbsoluteSeek</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_253_11_253_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_11_253_17&#39;)"><span class="hl_varref"><span class="mpre">offset</span></span></a><span class="mpre">)
    </span><a href="#loc_234_1_234_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_234_1_234_5&#39;)"><span class="hl_varref"><span class="mpre">hGet</span></span></a><span class="mpre"> </span><a href="#loc_253_18_253_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_18_253_22&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre"> </span><a href="#loc_253_23_253_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_253_23_253_24&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE hGetRange #-}</span></span><span class="mpre">

</span><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="mpre">(^.)</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; ((</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><a href="Data.Functor.Constant.html#loc_24_9_24_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Constant.html#loc_24_9_24_17&#39;)"><span class="hl_tyconref"><span class="mpre">Constant</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><a href="Data.Functor.Constant.html#loc_24_9_24_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Constant.html#loc_24_9_24_17&#39;)"><span class="hl_tyconref"><span class="mpre">Constant</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre">)) -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">
</span><a name="loc_259_1_259_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_2&#39;)"><span class="hl_vardecl"><span class="mpre">a</span></span></a><span class="mpre"> </span><a name="loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_fundecl"><span class="mpre">^.</span></span></a><span class="mpre"> </span><a name="loc_259_6_259_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_6_259_10&#39;)"><span class="hl_vardecl"><span class="mpre">lens</span></span></a><span class="mpre"> = </span><a href="Data.Functor.Constant.html#loc_24_35_24_46" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Constant.html#loc_24_35_24_46&#39;)"><span class="hl_varref"><span class="mpre">getConstant</span></span></a><span class="mpre"> (</span><a href="#loc_259_6_259_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_6_259_10&#39;)"><span class="hl_varref"><span class="mpre">lens</span></span></a><span class="mpre"> </span><span class="hl_conref"><span class="mpre">Constant</span></span><span class="mpre"> </span><a href="#loc_259_1_259_2" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_1_259_2&#39;)"><span class="hl_varref"><span class="mpre">a</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">{-| Like &#39;hGetSome&#39;, except you can vary the maximum chunk size for each request
-}</span></span><span class="mpre">
</span><a href="#loc_264_1_264_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_1_264_10&#39;)"><span class="mpre">hGetSomeN</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 263, srcSpanStartColumn = 14, srcSpanEndLine = 263, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 263, srcSpanStartColumn = 24, srcSpanEndLine = 263, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Server&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_264_1_264_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_1_264_10&#39;)"><span class="hl_fundecl"><span class="mpre">hGetSomeN</span></span></a><span class="mpre"> </span><a name="loc_264_11_264_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_11_264_12&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="#loc_266_5_266_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_5_266_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_266_5_266_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_5_266_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_266_8_266_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_8_266_12&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> = do
        </span><a name="loc_267_9_267_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_9_267_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.hGetSome</span></span><span class="mpre"> </span><a href="#loc_264_11_264_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_264_11_264_12&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_266_8_266_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_8_266_12&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">)
        if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_267_9_267_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_9_267_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
            then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            else do
                </span><a name="loc_271_17_271_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_17_271_22&#39;)"><span class="hl_vardecl"><span class="mpre">size2</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.Core.html#loc_263_1_263_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_263_1_263_8&#39;)"><span class="hl_varref"><span class="mpre">respond</span></span></a><span class="mpre"> </span><a href="#loc_267_9_267_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_267_9_267_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                </span><a href="#loc_266_5_266_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_266_5_266_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_271_17_271_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_271_17_271_22&#39;)"><span class="hl_varref"><span class="mpre">size2</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE hGetSomeN #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Like &#39;hGet&#39;, except you can vary the chunk size for each request</span></span><span class="mpre">
</span><a href="#loc_277_1_277_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_1_277_6&#39;)"><span class="mpre">hGetN</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 276, srcSpanStartColumn = 10, srcSpanEndLine = 276, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 276, srcSpanStartColumn = 20, srcSpanEndLine = 276, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Server&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Int</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_277_1_277_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_1_277_6&#39;)"><span class="hl_fundecl"><span class="mpre">hGetN</span></span></a><span class="mpre"> </span><a name="loc_277_7_277_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_7_277_8&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="#loc_279_5_279_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_279_5_279_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_279_5_279_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_279_5_279_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_279_8_279_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_279_8_279_12&#39;)"><span class="hl_vardecl"><span class="mpre">size</span></span></a><span class="mpre"> = do
        </span><a name="loc_280_9_280_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_9_280_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.hGet</span></span><span class="mpre"> </span><a href="#loc_277_7_277_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_277_7_277_8&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="#loc_279_8_279_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_279_8_279_12&#39;)"><span class="hl_varref"><span class="mpre">size</span></span></a><span class="mpre">)
        if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_280_9_280_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_9_280_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
            then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            else do
                </span><a name="loc_284_17_284_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_284_17_284_22&#39;)"><span class="hl_vardecl"><span class="mpre">size2</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.Core.html#loc_263_1_263_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_263_1_263_8&#39;)"><span class="hl_varref"><span class="mpre">respond</span></span></a><span class="mpre"> </span><a href="#loc_280_9_280_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_280_9_280_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                </span><a href="#loc_279_5_279_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_279_5_279_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_284_17_284_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_284_17_284_22&#39;)"><span class="hl_varref"><span class="mpre">size2</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE hGetN #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Stream bytes to &#39;stdout&#39;

    Unlike &#39;toHandle&#39;, &#39;stdout&#39; gracefully terminates on a broken output pipe.
-}</span></span><span class="mpre">
</span><a href="#loc_293_1_293_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_293_1_293_7&#39;)"><span class="mpre">stdout</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 292, srcSpanStartColumn = 11, srcSpanEndLine = 292, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 292, srcSpanStartColumn = 21, srcSpanEndLine = 292, srcSpanEndColumn = 23}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Consumer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_293_1_293_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_293_1_293_7&#39;)"><span class="hl_vardecl"><span class="mpre">stdout</span></span></a><span class="mpre"> = </span><a href="#loc_295_5_295_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_5_295_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_295_5_295_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_5_295_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
        </span><a name="loc_296_9_296_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_9_296_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        </span><a name="loc_297_9_297_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_9_297_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">  &lt;- </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Exception.Base.html#loc_212_1_212_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Exception.Base.html#loc_212_1_212_4&#39;)"><span class="hl_varref"><span class="mpre">try</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.putStr</span></span><span class="mpre"> </span><a href="#loc_296_9_296_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_296_9_296_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
        case </span><a href="#loc_297_9_297_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_297_9_297_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> (</span><span class="warning" data-warning="PatPRec (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 299, srcSpanStartColumn = 19, srcSpanEndLine = 300, srcSpanEndColumn = 55}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 299, srcSpanStartColumn = 29, srcSpanEndLine = 299, srcSpanEndColumn = 30},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipe"><span class="mpre">G.IOError { G.ioe_type  = G.ResourceVanished
                            , G.ioe_errno = Just ioe }</span></span><span class="mpre">)
                 | </span><a href="Foreign.C.Error.html#loc_112_17_112_22" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_112_17_112_22&#39;)"><span class="hl_conref"><span class="mpre">Errno</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">ioe</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="Foreign.C.Error.html#loc_213_1_213_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Foreign.C.Error.html#loc_213_1_213_6&#39;)"><span class="hl_varref"><span class="mpre">ePIPE</span></span></a><span class="mpre">
                     -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">  </span><a name="loc_303_19_303_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_19_303_20&#39;)"><span class="hl_vardecl"><span class="mpre">e</span></span></a><span class="mpre">  -&gt; </span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> (</span><a href="GHC.IO.html#loc_304_1_304_8" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.html#loc_304_1_304_8&#39;)"><span class="hl_varref"><span class="mpre">throwIO</span></span></a><span class="mpre"> </span><a href="#loc_303_19_303_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_303_19_303_20&#39;)"><span class="hl_varref"><span class="mpre">e</span></span></a><span class="mpre">)
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><a href="#loc_295_5_295_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_295_5_295_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE stdout #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Convert a byte stream into a &#39;Handle&#39;

&gt; p &gt;-&gt; toHandle handle = for p (liftIO . hPutStr handle)
-}</span></span><span class="mpre">
</span><a href="#loc_312_1_312_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_1_312_9&#39;)"><span class="mpre">toHandle</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 311, srcSpanStartColumn = 13, srcSpanEndLine = 311, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 311, srcSpanStartColumn = 23, srcSpanEndLine = 311, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">MonadIO m =&gt;</span></span><span class="mpre"> </span><a href="GHC.IO.Handle.Types.html#loc_100_6_100_12" onmouseover="nemnem.highlightLocalToRemote(&#39;GHC.IO.Handle.Types.html#loc_100_6_100_12&#39;)"><span class="hl_tyconref"><span class="mpre">IO.Handle</span></span></a><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Consumer&#39;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_312_1_312_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_1_312_9&#39;)"><span class="hl_fundecl"><span class="mpre">toHandle</span></span></a><span class="mpre"> </span><a name="loc_312_10_312_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_10_312_11&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_299_1_299_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_299_1_299_4&#39;)"><span class="hl_varref"><span class="mpre">cat</span></span></a><span class="mpre"> (</span><a href="Control.Monad.IO.Class.html#loc_32_5_32_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.IO.Class.html#loc_32_5_32_11&#39;)"><span class="hl_varref"><span class="mpre">liftIO</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BS.hPut</span></span><span class="mpre"> </span><a href="#loc_312_10_312_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_312_10_312_11&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE toHandle #-}</span></span><span class="mpre">

</span><span class="hl_pragma"><span class="mpre">{-# RULES &quot;p &gt;-&gt; toHandle h&quot; forall p h .
        p &gt;-&gt; toHandle h = for p (\bs -&gt; liftIO (BS.hPut h bs))
  #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Apply a transformation to each &#39;Word8&#39; in the stream</span></span><span class="mpre">
</span><a href="#loc_321_1_321_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_1_321_4&#39;)"><span class="mpre">map</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 320, srcSpanStartColumn = 8, srcSpanEndLine = 320, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 320, srcSpanStartColumn = 16, srcSpanEndLine = 320, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_321_1_321_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_1_321_4&#39;)"><span class="hl_fundecl"><span class="mpre">map</span></span></a><span class="mpre"> </span><a name="loc_321_5_321_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_5_321_6&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_283_1_283_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_283_1_283_4&#39;)"><span class="hl_varref"><span class="mpre">P.map</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.map</span></span><span class="mpre"> </span><a href="#loc_321_5_321_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_5_321_6&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
</span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_321_1_321_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_321_1_321_4&#39;)"><span class="mpre">map</span></a><span class="mpre"> #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Map a function over the byte stream and concatenate the results</span></span><span class="mpre">
</span><a href="#loc_326_1_326_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_1_326_10&#39;)"><span class="mpre">concatMap</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 325, srcSpanStartColumn = 14, srcSpanEndLine = 325, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 325, srcSpanStartColumn = 22, srcSpanEndLine = 325, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_326_1_326_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_1_326_10&#39;)"><span class="hl_fundecl"><span class="mpre">concatMap</span></span></a><span class="mpre"> </span><a name="loc_326_11_326_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_11_326_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_283_1_283_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_283_1_283_4&#39;)"><span class="hl_varref"><span class="mpre">P.map</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.concatMap</span></span><span class="mpre"> </span><a href="#loc_326_11_326_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_326_11_326_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE concatMap #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @(take n)@ only allows @n@ bytes to pass</span></span><span class="mpre">
</span><a href="#loc_331_1_331_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_1_331_5&#39;)"><span class="mpre">take</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 330, srcSpanStartColumn = 9, srcSpanEndLine = 330, srcSpanEndColumn = 33}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 330, srcSpanStartColumn = 9, srcSpanEndLine = 330, srcSpanEndColumn = 10},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pip"><span class="mpre">(Monad m, Integral n) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_331_1_331_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_1_331_5&#39;)"><span class="hl_fundecl"><span class="mpre">take</span></span></a><span class="mpre"> </span><a name="loc_331_6_331_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_6_331_8&#39;)"><span class="hl_vardecl"><span class="mpre">n0</span></span></a><span class="mpre"> = </span><a href="#loc_332_5_332_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_5_332_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_331_6_331_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_331_6_331_8&#39;)"><span class="hl_varref"><span class="mpre">n0</span></span></a><span class="mpre"> where
    </span><a name="loc_332_5_332_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_5_332_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_332_8_332_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_8_332_9&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre">
        | </span><a href="#loc_332_8_332_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_8_332_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">    = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
        | </span><span class="hl_varref"><span class="mpre">otherwise</span></span><span class="mpre"> = do
            </span><a name="loc_335_13_335_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_13_335_15&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
            let </span><a name="loc_336_17_336_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_336_17_336_20&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.length</span></span><span class="mpre"> </span><a href="#loc_335_13_335_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_13_335_15&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
            if (</span><a href="#loc_336_17_336_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_336_17_336_20&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;</span></span><span class="mpre"> </span><a href="#loc_332_8_332_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_8_332_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
                then </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><a href="Data.ByteString.Unsafe.html#loc_142_1_142_11" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Unsafe.html#loc_142_1_142_11&#39;)"><span class="hl_varref"><span class="mpre">unsafeTake</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_332_8_332_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_8_332_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><a href="#loc_335_13_335_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_13_335_15&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
                else do
                    </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_335_13_335_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_335_13_335_15&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                    </span><a href="#loc_332_5_332_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_5_332_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_332_8_332_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_332_8_332_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_336_17_336_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_336_17_336_20&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE take #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Take bytes until they fail the predicate</span></span><span class="mpre">
</span><a href="#loc_346_1_346_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_1_346_10&#39;)"><span class="mpre">takeWhile</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 345, srcSpanStartColumn = 14, srcSpanEndLine = 345, srcSpanEndColumn = 24}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 345, srcSpanStartColumn = 22, srcSpanEndLine = 345, srcSpanEndColumn = 24}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_346_1_346_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_1_346_10&#39;)"><span class="hl_fundecl"><span class="mpre">takeWhile</span></span></a><span class="mpre"> </span><a name="loc_346_11_346_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_11_346_20&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="#loc_348_5_348_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_5_348_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_348_5_348_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_5_348_7&#39;)"><span class="hl_vardecl"><span class="mpre">go</span></span></a><span class="mpre"> = do
        </span><a name="loc_349_9_349_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_9_349_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        let (</span><a name="loc_350_14_350_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_14_350_20&#39;)"><span class="hl_vardecl"><span class="mpre">prefix</span></span></a><span class="mpre">, </span><a name="loc_350_22_350_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_22_350_28&#39;)"><span class="hl_vardecl"><span class="mpre">suffix</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">BS.span</span></span><span class="mpre"> </span><a href="#loc_346_11_346_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_346_11_346_20&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_349_9_349_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_9_349_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
        if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_350_22_350_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_22_350_28&#39;)"><span class="hl_varref"><span class="mpre">suffix</span></span></a><span class="mpre">)
            then do
                </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_349_9_349_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_349_9_349_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                </span><a href="#loc_348_5_348_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_348_5_348_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
            else </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_350_14_350_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_350_14_350_20&#39;)"><span class="hl_varref"><span class="mpre">prefix</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE takeWhile #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Only allows &#39;Word8&#39;s to pass if they satisfy the predicate</span></span><span class="mpre">
</span><a href="#loc_360_1_360_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_1_360_7&#39;)"><span class="mpre">filter</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 359, srcSpanStartColumn = 11, srcSpanEndLine = 359, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 359, srcSpanStartColumn = 19, srcSpanEndLine = 359, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_360_1_360_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_1_360_7&#39;)"><span class="hl_fundecl"><span class="mpre">filter</span></span></a><span class="mpre"> </span><a name="loc_360_8_360_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_8_360_17&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_283_1_283_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_283_1_283_4&#39;)"><span class="hl_varref"><span class="mpre">P.map</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.filter</span></span><span class="mpre"> </span><a href="#loc_360_8_360_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_8_360_17&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE filter #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Stream all indices whose elements match the given &#39;Word8&#39;</span></span><span class="mpre">
</span><a href="#loc_365_1_365_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_1_365_12&#39;)"><span class="mpre">elemIndices</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 364, srcSpanStartColumn = 16, srcSpanEndLine = 364, srcSpanEndColumn = 35}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 364, srcSpanStartColumn = 16, srcSpanEndLine = 364, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/P"><span class="mpre">(Monad m, Num n) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_365_1_365_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_1_365_12&#39;)"><span class="hl_fundecl"><span class="mpre">elemIndices</span></span></a><span class="mpre"> </span><a name="loc_365_13_365_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_13_365_15&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> = </span><a href="#loc_370_1_370_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_12&#39;)"><span class="hl_varref"><span class="mpre">findIndices</span></span></a><span class="mpre"> (</span><a href="#loc_365_13_365_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_365_13_365_15&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE elemIndices #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Stream all indices whose elements satisfy the given predicate</span></span><span class="mpre">
</span><a href="#loc_370_1_370_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_12&#39;)"><span class="mpre">findIndices</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 369, srcSpanStartColumn = 16, srcSpanEndLine = 369, srcSpanEndColumn = 35}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 369, srcSpanStartColumn = 16, srcSpanEndLine = 369, srcSpanEndColumn = 17},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/P"><span class="mpre">(Monad m, Num n) =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_370_1_370_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_12&#39;)"><span class="hl_fundecl"><span class="mpre">findIndices</span></span></a><span class="mpre"> </span><a name="loc_370_13_370_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_13_370_22&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="#loc_372_5_372_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_5_372_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">
  where
    </span><a name="loc_372_5_372_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_5_372_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_372_8_372_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_8_372_9&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> = do
        </span><a name="loc_373_9_373_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_9_373_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        </span><a href="Pipes.html#loc_465_1_465_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_465_1_465_5&#39;)"><span class="hl_varref"><span class="mpre">each</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">List.map</span></span><span class="mpre"> (\</span><a name="loc_374_27_374_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_27_374_28&#39;)"><span class="hl_vardecl"><span class="mpre">i</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_372_8_372_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_8_372_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_374_27_374_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_374_27_374_28&#39;)"><span class="hl_varref"><span class="mpre">i</span></span></a><span class="mpre">) (</span><span class="hl_varref"><span class="mpre">BS.findIndices</span></span><span class="mpre"> </span><a href="#loc_370_13_370_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_13_370_22&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_373_9_373_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_9_373_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
        </span><a href="#loc_372_5_372_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_5_372_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_160_3_160_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_160_3_160_5&#39;)"><span class="hl_infix"><span class="mpre">$!</span></span></a><span class="mpre"> </span><a href="#loc_372_8_372_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_372_8_372_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.length</span></span><span class="mpre"> </span><a href="#loc_373_9_373_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_373_9_373_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE findIndices #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Strict left scan over the bytes</span></span><span class="mpre">
</span><a href="#loc_382_1_382_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_1_382_5&#39;)"><span class="mpre">scan</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 380, srcSpanStartColumn = 8, srcSpanEndLine = 381, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 381, srcSpanStartColumn = 5, srcSpanEndLine = 381, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Pipe</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_382_1_382_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_1_382_5&#39;)"><span class="hl_fundecl"><span class="mpre">scan</span></span></a><span class="mpre"> </span><a name="loc_382_6_382_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_6_382_10&#39;)"><span class="hl_vardecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_382_11_382_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_11_382_16&#39;)"><span class="hl_vardecl"><span class="mpre">begin</span></span></a><span class="mpre"> = do
    </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.singleton</span></span><span class="mpre"> </span><a href="#loc_382_11_382_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_11_382_16&#39;)"><span class="hl_varref"><span class="mpre">begin</span></span></a><span class="mpre">)
    </span><a href="#loc_386_5_386_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_5_386_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_382_11_382_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_11_382_16&#39;)"><span class="hl_varref"><span class="mpre">begin</span></span></a><span class="mpre">
  where
    </span><a name="loc_386_5_386_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_5_386_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_386_8_386_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_10&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> = do
        </span><a name="loc_387_9_387_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_9_387_11&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_246_1_246_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_246_1_246_6&#39;)"><span class="hl_varref"><span class="mpre">await</span></span></a><span class="mpre">
        let </span><a name="loc_388_13_388_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_13_388_16&#39;)"><span class="hl_vardecl"><span class="mpre">bs&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">BS.scanl</span></span><span class="mpre"> </span><a href="#loc_382_6_382_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_382_6_382_10&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_386_8_386_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_8_386_10&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre"> </span><a href="#loc_387_9_387_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_387_9_387_11&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
            </span><a name="loc_389_13_389_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_13_389_16&#39;)"><span class="hl_vardecl"><span class="mpre">w8&#39;</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">BS.last</span></span><span class="mpre"> </span><a href="#loc_388_13_388_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_13_388_16&#39;)"><span class="hl_varref"><span class="mpre">bs&#39;</span></span></a><span class="mpre">
        </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.tail</span></span><span class="mpre"> </span><a href="#loc_388_13_388_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_388_13_388_16&#39;)"><span class="hl_varref"><span class="mpre">bs&#39;</span></span></a><span class="mpre">)
        </span><a href="#loc_386_5_386_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_386_5_386_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_389_13_389_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_389_13_389_16&#39;)"><span class="hl_varref"><span class="mpre">w8&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE scan #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Fold a pure &#39;Producer&#39; of strict &#39;ByteString&#39;s into a lazy
    &#39;BL.ByteString&#39;
-}</span></span><span class="mpre">
</span><a href="#loc_398_1_398_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_1_398_7&#39;)"><span class="mpre">toLazy</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><a href="Data.Functor.Identity.html#loc_35_9_35_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Functor.Identity.html#loc_35_9_35_17&#39;)"><span class="hl_tyconref"><span class="mpre">Identity</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">BL.ByteString</span></span><span class="mpre">
</span><a name="loc_398_1_398_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_398_1_398_7&#39;)"><span class="hl_vardecl"><span class="mpre">toLazy</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">BL.fromChunks</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Pipes.Prelude.html#loc_703_1_703_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_703_1_703_7&#39;)"><span class="hl_varref"><span class="mpre">P.toList</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE toLazy #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Fold an effectful &#39;Producer&#39; of strict &#39;ByteString&#39;s into a lazy
    &#39;BL.ByteString&#39;

    Note: &#39;toLazyM&#39; is not an idiomatic use of @pipes@, but I provide it for
    simple testing purposes.  Idiomatic @pipes@ style consumes the chunks
    immediately as they are generated instead of loading them all into memory.
-}</span></span><span class="mpre">
</span><a href="#loc_409_1_409_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_1_409_8&#39;)"><span class="mpre">toLazyM</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 408, srcSpanStartColumn = 12, srcSpanEndLine = 408, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 408, srcSpanStartColumn = 20, srcSpanEndLine = 408, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">BL.ByteString</span></span><span class="mpre">
</span><a name="loc_409_1_409_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_409_1_409_8&#39;)"><span class="hl_vardecl"><span class="mpre">toLazyM</span></span></a><span class="mpre"> = </span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BL.fromChunks</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Pipes.Prelude.html#loc_720_1_720_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_720_1_720_8&#39;)"><span class="hl_varref"><span class="mpre">P.toListM</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE toLazyM #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Reduce the stream of bytes using a strict left fold

    Note: It&#39;s more efficient to use folds from @Control.Foldl.ByteString@ in
    conjunction with @Pipes.Prelude.&#39;Pipes.Prelude.fold&#39;@ when possible
-}</span></span><span class="mpre">
</span><a href="#loc_420_1_420_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_1_420_10&#39;)"><span class="mpre">foldBytes</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 418, srcSpanStartColumn = 8, srcSpanEndLine = 419, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 419, srcSpanStartColumn = 5, srcSpanEndLine = 419, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_420_1_420_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_1_420_10&#39;)"><span class="hl_fundecl"><span class="mpre">foldBytes</span></span></a><span class="mpre"> </span><a name="loc_420_11_420_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_11_420_15&#39;)"><span class="hl_vardecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_420_16_420_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_16_420_21&#39;)"><span class="hl_vardecl"><span class="mpre">begin</span></span></a><span class="mpre"> </span><a name="loc_420_22_420_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_22_420_26&#39;)"><span class="hl_vardecl"><span class="mpre">done</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">P.fold</span></span></a><span class="mpre"> (\</span><a name="loc_420_38_420_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_38_420_39&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> </span><a name="loc_420_40_420_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_40_420_42&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">BS.foldl&#39;</span></span><span class="mpre"> </span><a href="#loc_420_11_420_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_11_420_15&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="#loc_420_38_420_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_38_420_39&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> </span><a href="#loc_420_40_420_42" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_40_420_42&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) </span><a href="#loc_420_16_420_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_16_420_21&#39;)"><span class="hl_varref"><span class="mpre">begin</span></span></a><span class="mpre"> </span><a href="#loc_420_22_420_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_420_22_420_26&#39;)"><span class="hl_varref"><span class="mpre">done</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE foldBytes #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Retrieve the first &#39;Word8&#39;</span></span><span class="mpre">
</span><a href="#loc_425_1_425_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_1_425_5&#39;)"><span class="mpre">head</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 424, srcSpanStartColumn = 9, srcSpanEndLine = 424, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 424, srcSpanStartColumn = 17, srcSpanEndLine = 424, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
</span><a name="loc_425_1_425_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_1_425_5&#39;)"><span class="hl_vardecl"><span class="mpre">head</span></span></a><span class="mpre"> = </span><a href="#loc_427_5_427_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_5_427_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_427_5_427_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_5_427_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_427_8_427_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_8_427_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_428_9_428_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_428_9_428_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_546_1_546_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_546_1_546_9&#39;)"><span class="hl_varref"><span class="mpre">nextByte</span></span></a><span class="mpre"> </span><a href="#loc_427_8_427_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_427_8_427_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><a href="#loc_428_9_428_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_428_9_428_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   _      -&gt; </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_431_20_431_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_20_431_22&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre">, _) -&gt; </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_431_20_431_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_431_20_431_22&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE head #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Retrieve the last &#39;Word8&#39;</span></span><span class="mpre">
</span><a href="#loc_436_1_436_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_1_436_5&#39;)"><span class="mpre">last</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 435, srcSpanStartColumn = 9, srcSpanEndLine = 435, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 435, srcSpanStartColumn = 17, srcSpanEndLine = 435, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
</span><a name="loc_436_1_436_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_436_1_436_5&#39;)"><span class="hl_vardecl"><span class="mpre">last</span></span></a><span class="mpre"> = </span><a href="#loc_438_5_438_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_5_438_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">
  where
    </span><a name="loc_438_5_438_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_5_438_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_438_8_438_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_8_438_9&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> </span><a name="loc_438_10_438_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_10_438_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_439_9_439_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_439_9_439_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_438_10_438_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_10_438_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
        case </span><a href="#loc_439_9_439_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_439_9_439_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">      -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_438_8_438_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_8_438_9&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_442_20_442_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_20_442_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_442_24_442_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_24_442_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt;
                </span><a href="#loc_438_5_438_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_5_438_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (if </span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_442_20_442_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_20_442_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> then </span><a href="#loc_438_8_438_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_438_8_438_9&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre"> else (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BS.last</span></span><span class="mpre"> </span><a href="#loc_442_20_442_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_20_442_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)) </span><a href="#loc_442_24_442_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_442_24_442_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                </span><span class="hl_comment"><span class="mpre">-- TODO: Change this to &#39;unsafeLast&#39; when bytestring-0.10.2.0</span></span><span class="mpre">
                </span><span class="hl_comment"><span class="mpre">--       becomes more widespread</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE last #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Determine if the stream is empty</span></span><span class="mpre">
</span><a href="#loc_450_1_450_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_450_1_450_5&#39;)"><span class="mpre">null</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 449, srcSpanStartColumn = 9, srcSpanEndLine = 449, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 449, srcSpanStartColumn = 17, srcSpanEndLine = 449, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_450_1_450_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_450_1_450_5&#39;)"><span class="hl_vardecl"><span class="mpre">null</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_584_1_584_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_584_1_584_4&#39;)"><span class="hl_varref"><span class="mpre">P.all</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE null #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Count the number of bytes</span></span><span class="mpre">
</span><a href="#loc_455_1_455_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_1_455_7&#39;)"><span class="mpre">length</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 454, srcSpanStartColumn = 11, srcSpanEndLine = 454, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 454, srcSpanStartColumn = 11, srcSpanEndLine = 454, srcSpanEndColumn = 12},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/P"><span class="mpre">(Monad m, Num n) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre">
</span><a name="loc_455_1_455_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_1_455_7&#39;)"><span class="hl_vardecl"><span class="mpre">length</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">P.fold</span></span></a><span class="mpre"> (\</span><a name="loc_455_19_455_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_19_455_20&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_455_21_455_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_21_455_23&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_455_19_455_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_19_455_20&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">+</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.length</span></span><span class="mpre"> </span><a href="#loc_455_21_455_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_455_21_455_23&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)) </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE length #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Fold that returns whether &#39;M.Any&#39; received &#39;Word8&#39;s satisfy the predicate</span></span><span class="mpre">
</span><a href="#loc_460_1_460_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_1_460_4&#39;)"><span class="mpre">any</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 459, srcSpanStartColumn = 8, srcSpanEndLine = 459, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 459, srcSpanStartColumn = 16, srcSpanEndLine = 459, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_460_1_460_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_1_460_4&#39;)"><span class="hl_fundecl"><span class="mpre">any</span></span></a><span class="mpre"> </span><a name="loc_460_5_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_5_460_14&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_591_1_591_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_591_1_591_4&#39;)"><span class="hl_varref"><span class="mpre">P.any</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.any</span></span><span class="mpre"> </span><a href="#loc_460_5_460_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_460_5_460_14&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE any #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Fold that returns whether &#39;M.All&#39; received &#39;Word8&#39;s satisfy the predicate</span></span><span class="mpre">
</span><a href="#loc_465_1_465_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_1_465_4&#39;)"><span class="mpre">all</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 464, srcSpanStartColumn = 8, srcSpanEndLine = 464, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 464, srcSpanStartColumn = 16, srcSpanEndLine = 464, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_465_1_465_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_1_465_4&#39;)"><span class="hl_fundecl"><span class="mpre">all</span></span></a><span class="mpre"> </span><a name="loc_465_5_465_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_5_465_14&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_584_1_584_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_584_1_584_4&#39;)"><span class="hl_varref"><span class="mpre">P.all</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.all</span></span><span class="mpre"> </span><a href="#loc_465_5_465_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_465_5_465_14&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE all #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Return the maximum &#39;Word8&#39; within a byte stream</span></span><span class="mpre">
</span><a href="#loc_470_1_470_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_1_470_8&#39;)"><span class="mpre">maximum</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 469, srcSpanStartColumn = 12, srcSpanEndLine = 469, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 469, srcSpanStartColumn = 20, srcSpanEndLine = 469, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
</span><a name="loc_470_1_470_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_470_1_470_8&#39;)"><span class="hl_vardecl"><span class="mpre">maximum</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">P.fold</span></span></a><span class="mpre"> </span><a href="#loc_472_5_472_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_5_472_9&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
  where
    </span><a name="loc_472_5_472_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_5_472_9&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_472_10_472_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_10_472_13&#39;)"><span class="hl_vardecl"><span class="mpre">mw8</span></span></a><span class="mpre"> </span><a name="loc_472_14_472_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_14_472_16&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> =
        if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_472_14_472_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_14_472_16&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
        then </span><a href="#loc_472_10_472_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_10_472_13&#39;)"><span class="hl_varref"><span class="mpre">mw8</span></span></a><span class="mpre">
        else </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><a href="#loc_472_10_472_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_10_472_13&#39;)"><span class="hl_varref"><span class="mpre">mw8</span></span></a><span class="mpre"> of
            </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">BS.maximum</span></span><span class="mpre"> </span><a href="#loc_472_14_472_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_14_472_16&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
            </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_477_18_477_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_477_18_477_20&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">max</span></span><span class="mpre"> </span><a href="#loc_477_18_477_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_477_18_477_20&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.maximum</span></span><span class="mpre"> </span><a href="#loc_472_14_472_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_472_14_472_16&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE maximum #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Return the minimum &#39;Word8&#39; within a byte stream</span></span><span class="mpre">
</span><a href="#loc_482_1_482_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_1_482_8&#39;)"><span class="mpre">minimum</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 481, srcSpanStartColumn = 12, srcSpanEndLine = 481, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 481, srcSpanStartColumn = 20, srcSpanEndLine = 481, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
</span><a name="loc_482_1_482_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_482_1_482_8&#39;)"><span class="hl_vardecl"><span class="mpre">minimum</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">P.fold</span></span></a><span class="mpre"> </span><a href="#loc_484_5_484_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_5_484_9&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
  where
    </span><a name="loc_484_5_484_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_5_484_9&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_484_10_484_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_10_484_13&#39;)"><span class="hl_vardecl"><span class="mpre">mw8</span></span></a><span class="mpre"> </span><a name="loc_484_14_484_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_14_484_16&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> =
        if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_484_14_484_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_14_484_16&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
        then </span><a href="#loc_484_10_484_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_10_484_13&#39;)"><span class="hl_varref"><span class="mpre">mw8</span></span></a><span class="mpre">
        else case </span><a href="#loc_484_10_484_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_10_484_13&#39;)"><span class="hl_varref"><span class="mpre">mw8</span></span></a><span class="mpre"> of
            </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.minimum</span></span><span class="mpre"> </span><a href="#loc_484_14_484_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_14_484_16&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
            </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_489_18_489_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_489_18_489_20&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> -&gt; </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">min</span></span><span class="mpre"> </span><a href="#loc_489_18_489_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_489_18_489_20&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.minimum</span></span><span class="mpre"> </span><a href="#loc_484_14_484_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_484_14_484_16&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE minimum #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Determine whether any element in the byte stream matches the given &#39;Word8&#39;</span></span><span class="mpre">
</span><a href="#loc_494_1_494_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_494_1_494_5&#39;)"><span class="mpre">elem</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 493, srcSpanStartColumn = 9, srcSpanEndLine = 493, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 493, srcSpanStartColumn = 17, srcSpanEndLine = 493, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_494_1_494_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_494_1_494_5&#39;)"><span class="hl_fundecl"><span class="mpre">elem</span></span></a><span class="mpre"> </span><a name="loc_494_6_494_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_494_6_494_8&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_591_1_591_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_591_1_591_4&#39;)"><span class="hl_varref"><span class="mpre">P.any</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.elem</span></span><span class="mpre"> </span><a href="#loc_494_6_494_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_494_6_494_8&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE elem #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Determine whether all elements in the byte stream do not match the given
    &#39;Word8&#39;
-}</span></span><span class="mpre">
</span><a href="#loc_501_1_501_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_1_501_8&#39;)"><span class="mpre">notElem</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 500, srcSpanStartColumn = 12, srcSpanEndLine = 500, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 500, srcSpanStartColumn = 20, srcSpanEndLine = 500, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_501_1_501_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_1_501_8&#39;)"><span class="hl_fundecl"><span class="mpre">notElem</span></span></a><span class="mpre"> </span><a name="loc_501_9_501_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_9_501_11&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_584_1_584_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_584_1_584_4&#39;)"><span class="hl_varref"><span class="mpre">P.all</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.notElem</span></span><span class="mpre"> </span><a href="#loc_501_9_501_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_501_9_501_11&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE notElem #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Find the first element in the stream that matches the predicate</span></span><span class="mpre">
</span><a href="#loc_508_1_508_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_508_1_508_5&#39;)"><span class="mpre">find</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 506, srcSpanStartColumn = 8, srcSpanEndLine = 507, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 507, srcSpanStartColumn = 5, srcSpanEndLine = 507, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
</span><a name="loc_508_1_508_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_508_1_508_5&#39;)"><span class="hl_fundecl"><span class="mpre">find</span></span></a><span class="mpre"> </span><a name="loc_508_6_508_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_508_6_508_15&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_508_16_508_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_508_16_508_17&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_425_1_425_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_1_425_5&#39;)"><span class="hl_varref"><span class="mpre">head</span></span></a><span class="mpre"> (</span><a href="#loc_508_16_508_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_508_16_508_17&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="#loc_360_1_360_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_360_1_360_7&#39;)"><span class="hl_varref"><span class="mpre">filter</span></span></a><span class="mpre"> </span><a href="#loc_508_6_508_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_508_6_508_15&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE find #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Index into a byte stream</span></span><span class="mpre">
</span><a href="#loc_515_1_515_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_515_1_515_6&#39;)"><span class="mpre">index</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 513, srcSpanStartColumn = 8, srcSpanEndLine = 514, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 513, srcSpanStartColumn = 8, srcSpanEndLine = 513, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes"><span class="mpre">(Monad m, Integral n)
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
</span><a name="loc_515_1_515_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_515_1_515_6&#39;)"><span class="hl_fundecl"><span class="mpre">index</span></span></a><span class="mpre"> </span><a name="loc_515_7_515_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_515_7_515_8&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_515_9_515_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_515_9_515_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_425_1_425_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_425_1_425_5&#39;)"><span class="hl_varref"><span class="mpre">head</span></span></a><span class="mpre"> (</span><a href="#loc_758_1_758_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_758_1_758_5&#39;)"><span class="hl_varref"><span class="mpre">drop</span></span></a><span class="mpre"> </span><a href="#loc_515_7_515_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_515_7_515_8&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><a href="#loc_515_9_515_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_515_9_515_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE index #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Find the index of an element that matches the given &#39;Word8&#39;</span></span><span class="mpre">
</span><a href="#loc_521_1_521_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_1_521_10&#39;)"><span class="mpre">elemIndex</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 520, srcSpanStartColumn = 8, srcSpanEndLine = 520, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 520, srcSpanStartColumn = 8, srcSpanEndLine = 520, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipe"><span class="mpre">(Monad m, Num n) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre">)
</span><a name="loc_521_1_521_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_1_521_10&#39;)"><span class="hl_fundecl"><span class="mpre">elemIndex</span></span></a><span class="mpre"> </span><a name="loc_521_11_521_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_11_521_13&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> = </span><a href="#loc_528_1_528_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_1_528_10&#39;)"><span class="hl_varref"><span class="mpre">findIndex</span></span></a><span class="mpre"> (</span><a href="#loc_521_11_521_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_521_11_521_13&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE elemIndex #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Store the first index of an element that satisfies the predicate</span></span><span class="mpre">
</span><a href="#loc_528_1_528_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_1_528_10&#39;)"><span class="mpre">findIndex</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 526, srcSpanStartColumn = 8, srcSpanEndLine = 527, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 526, srcSpanStartColumn = 8, srcSpanEndLine = 526, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes"><span class="mpre">(Monad m, Num n)
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre">)
</span><a name="loc_528_1_528_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_1_528_10&#39;)"><span class="hl_fundecl"><span class="mpre">findIndex</span></span></a><span class="mpre"> </span><a name="loc_528_11_528_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_11_528_20&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_528_21_528_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_21_528_22&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_632_1_632_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_632_1_632_5&#39;)"><span class="hl_varref"><span class="mpre">P.head</span></span></a><span class="mpre"> (</span><a href="#loc_528_21_528_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_21_528_22&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="#loc_370_1_370_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_370_1_370_12&#39;)"><span class="hl_varref"><span class="mpre">findIndices</span></span></a><span class="mpre"> </span><a href="#loc_528_11_528_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_528_11_528_20&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE findIndex #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Store a tally of how many elements match the given &#39;Word8&#39;</span></span><span class="mpre">
</span><a href="#loc_533_1_533_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_1_533_6&#39;)"><span class="mpre">count</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 532, srcSpanStartColumn = 10, srcSpanEndLine = 532, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 532, srcSpanStartColumn = 10, srcSpanEndLine = 532, srcSpanEndColumn = 11},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/P"><span class="mpre">(Monad m, Num n) =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre">
</span><a name="loc_533_1_533_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_1_533_6&#39;)"><span class="hl_fundecl"><span class="mpre">count</span></span></a><span class="mpre"> </span><a name="loc_533_7_533_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_7_533_9&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> </span><a name="loc_533_10_533_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_10_533_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Pipes.Prelude.html#loc_551_1_551_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_551_1_551_5&#39;)"><span class="hl_varref"><span class="mpre">P.fold</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">(+)</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> (</span><a href="#loc_533_10_533_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_10_533_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_318_4_318_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_318_4_318_7&#39;)"><span class="hl_infix"><span class="mpre">&gt;-&gt;</span></span></a><span class="mpre"> </span><a href="Pipes.Prelude.html#loc_283_1_283_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Prelude.html#loc_283_1_283_4&#39;)"><span class="hl_varref"><span class="mpre">P.map</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BS.count</span></span><span class="mpre"> </span><a href="#loc_533_7_533_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_533_7_533_9&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE count #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Consume the first byte from a byte stream

    &#39;next&#39; either fails with a &#39;Left&#39; if the &#39;Producer&#39; has no more bytes or
    succeeds with a &#39;Right&#39; providing the next byte and the remainder of the
    &#39;Producer&#39;.
-}</span></span><span class="mpre">
</span><a href="#loc_546_1_546_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_546_1_546_9&#39;)"><span class="mpre">nextByte</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 543, srcSpanStartColumn = 8, srcSpanEndLine = 544, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 544, srcSpanStartColumn = 5, srcSpanEndLine = 544, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Either</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">, </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">))
</span><a name="loc_546_1_546_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_546_1_546_9&#39;)"><span class="hl_vardecl"><span class="mpre">nextByte</span></span></a><span class="mpre"> = </span><a href="#loc_548_5_548_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_5_548_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre">
  where
    </span><a name="loc_548_5_548_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_5_548_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_548_8_548_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_8_548_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_549_9_549_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_9_549_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_548_8_548_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_8_548_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
        case </span><a href="#loc_549_9_549_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_549_9_549_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_551_20_551_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_20_551_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a href="#loc_551_20_551_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_551_20_551_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_552_20_552_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_20_552_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_552_24_552_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_24_552_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; case (</span><span class="hl_varref"><span class="mpre">BS.uncons</span></span><span class="mpre"> </span><a href="#loc_552_20_552_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_20_552_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) of
                </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">        -&gt; </span><a href="#loc_548_5_548_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_548_5_548_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_552_24_552_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_24_552_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> (</span><a name="loc_554_23_554_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_23_554_25&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre">, </span><a name="loc_554_27_554_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_27_554_30&#39;)"><span class="hl_vardecl"><span class="mpre">bs&#39;</span></span></a><span class="mpre">) -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a href="#loc_554_23_554_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_23_554_25&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">, </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_554_27_554_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_554_27_554_30&#39;)"><span class="hl_varref"><span class="mpre">bs&#39;</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_552_24_552_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_552_24_552_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE nextByte #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Draw one &#39;Word8&#39; from the underlying &#39;Producer&#39;, returning &#39;Nothing&#39; if the
    &#39;Producer&#39; is empty
-}</span></span><span class="mpre">
</span><a href="#loc_561_1_561_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_561_1_561_9&#39;)"><span class="mpre">drawByte</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 560, srcSpanStartColumn = 13, srcSpanEndLine = 560, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 560, srcSpanStartColumn = 21, srcSpanEndLine = 560, srcSpanEndColumn = 23}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Parser</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
</span><a name="loc_561_1_561_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_561_1_561_9&#39;)"><span class="hl_vardecl"><span class="mpre">drawByte</span></span></a><span class="mpre"> = do
    </span><a name="loc_562_5_562_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_562_5_562_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.Parse.html#loc_73_1_73_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Parse.html#loc_73_1_73_5&#39;)"><span class="hl_varref"><span class="mpre">PP.draw</span></span></a><span class="mpre">
    case </span><a href="#loc_562_5_562_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_562_5_562_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">
        </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_565_14_565_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_14_565_16&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> -&gt; case (</span><span class="hl_varref"><span class="mpre">BS.uncons</span></span><span class="mpre"> </span><a href="#loc_565_14_565_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_565_14_565_16&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) of
            </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">        -&gt; </span><a href="#loc_561_1_561_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_561_1_561_9&#39;)"><span class="hl_varref"><span class="mpre">drawByte</span></span></a><span class="mpre">
            </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> (</span><a name="loc_567_19_567_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_19_567_21&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre">, </span><a name="loc_567_23_567_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_23_567_26&#39;)"><span class="hl_vardecl"><span class="mpre">bs&#39;</span></span></a><span class="mpre">) -&gt; do
                </span><a href="Pipes.Parse.html#loc_129_1_129_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Parse.html#loc_129_1_129_7&#39;)"><span class="hl_varref"><span class="mpre">PP.unDraw</span></span></a><span class="mpre"> </span><a href="#loc_567_23_567_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_23_567_26&#39;)"><span class="hl_varref"><span class="mpre">bs&#39;</span></span></a><span class="mpre">
                </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a href="#loc_567_19_567_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_567_19_567_21&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE drawByte #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Push back a &#39;Word8&#39; onto the underlying &#39;Producer&#39;</span></span><span class="mpre">
</span><a href="#loc_574_1_574_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_1_574_11&#39;)"><span class="mpre">unDrawByte</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 573, srcSpanStartColumn = 15, srcSpanEndLine = 573, srcSpanEndColumn = 25}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 573, srcSpanStartColumn = 23, srcSpanEndLine = 573, srcSpanEndColumn = 25}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Parser</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_574_1_574_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_1_574_11&#39;)"><span class="hl_fundecl"><span class="mpre">unDrawByte</span></span></a><span class="mpre"> </span><a name="loc_574_12_574_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_12_574_14&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> = </span><a href="Control.Monad.Trans.State.Strict.html#loc_220_1_220_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.State.Strict.html#loc_220_1_220_7&#39;)"><span class="hl_varref"><span class="mpre">modify</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.singleton</span></span><span class="mpre"> </span><a href="#loc_574_12_574_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_12_574_14&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">) </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE unDrawByte #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| &#39;peekByte&#39; checks the first &#39;Word8&#39; in the stream, but uses &#39;unDrawByte&#39; to
    push the &#39;Word8&#39; back

&gt; peekByte = do
&gt;     x &lt;- drawByte
&gt;     case x of
&gt;         Nothing -&gt; return ()
&gt;         Just w8 -&gt; unDrawByte w8
&gt;     return x
-}</span></span><span class="mpre">
</span><a href="#loc_588_1_588_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_1_588_9&#39;)"><span class="mpre">peekByte</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 587, srcSpanStartColumn = 13, srcSpanEndLine = 587, srcSpanEndColumn = 23}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 587, srcSpanStartColumn = 21, srcSpanEndLine = 587, srcSpanEndColumn = 23}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Parser</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><a href="Data.Maybe.html#loc_49_7_49_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_7_49_12&#39;)"><span class="hl_tyconref"><span class="mpre">Maybe</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">)
</span><a name="loc_588_1_588_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_1_588_9&#39;)"><span class="hl_vardecl"><span class="mpre">peekByte</span></span></a><span class="mpre"> = do
    </span><a name="loc_589_5_589_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_5_589_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_561_1_561_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_561_1_561_9&#39;)"><span class="hl_varref"><span class="mpre">drawByte</span></span></a><span class="mpre">
    case </span><a href="#loc_589_5_589_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_5_589_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">()</span></span><span class="mpre">
        </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> </span><a name="loc_592_14_592_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_14_592_16&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_574_1_574_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_574_1_574_11&#39;)"><span class="hl_varref"><span class="mpre">unDrawByte</span></span></a><span class="mpre"> </span><a href="#loc_592_14_592_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_592_14_592_16&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_589_5_589_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_589_5_589_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE peekByte #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Check if the underlying &#39;Producer&#39; has no more bytes

    Note that this will skip over empty &#39;ByteString&#39; chunks, unlike
    &#39;Pipes.Parse.isEndOfInput&#39; from @pipes-parse@.

&gt; isEndOfBytes = liftM isNothing peekByte
-}</span></span><span class="mpre">
</span><a href="#loc_604_1_604_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_1_604_13&#39;)"><span class="mpre">isEndOfBytes</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 603, srcSpanStartColumn = 17, srcSpanEndLine = 603, srcSpanEndColumn = 27}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 603, srcSpanStartColumn = 25, srcSpanEndLine = 603, srcSpanEndColumn = 27}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Parser</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">
</span><a name="loc_604_1_604_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_604_1_604_13&#39;)"><span class="hl_vardecl"><span class="mpre">isEndOfBytes</span></span></a><span class="mpre"> = do
    </span><a name="loc_605_5_605_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_605_5_605_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_588_1_588_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_588_1_588_9&#39;)"><span class="hl_varref"><span class="mpre">peekByte</span></span></a><span class="mpre">
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (case </span><a href="#loc_605_5_605_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_605_5_605_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre"> -&gt; </span><span class="hl_conref"><span class="mpre">True</span></span><span class="mpre">
        </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> _  -&gt; </span><span class="hl_conref"><span class="mpre">False</span></span><span class="mpre"> )
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE isEndOfBytes #-}</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclTypeDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 611, srcSpanStartColumn = 1, srcSpanEndLine = 611, srcSpanEndColumn = 66}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 611, srcSpanStartColumn = 1, srcSpanEndLine = 611, srcSpanEndColumn = 5},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pip"><span class="mpre">type Lens&#39; a b = forall f . Functor f =&gt; (b -&gt; f b) -&gt; (a -&gt; f a)</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Improper lens that splits a &#39;Producer&#39; after the given number of bytes</span></span><span class="mpre">
</span><a href="#loc_619_1_619_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_1_619_8&#39;)"><span class="mpre">splitAt</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 615, srcSpanStartColumn = 8, srcSpanEndLine = 616, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 615, srcSpanStartColumn = 8, srcSpanEndLine = 615, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes"><span class="mpre">(Monad m, Integral n)
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
             (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">))
</span><a name="loc_619_1_619_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_1_619_8&#39;)"><span class="hl_fundecl"><span class="mpre">splitAt</span></span></a><span class="mpre"> </span><a name="loc_619_9_619_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_9_619_11&#39;)"><span class="hl_vardecl"><span class="mpre">n0</span></span></a><span class="mpre"> </span><a name="loc_619_12_619_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_12_619_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_619_14_619_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_14_619_16&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Control.Monad.html#loc_204_1_204_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_204_1_204_5&#39;)"><span class="hl_varref"><span class="mpre">join</span></span></a><span class="mpre"> (</span><a href="#loc_619_12_619_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_12_619_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_625_5_625_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_5_625_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_619_9_619_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_9_619_11&#39;)"><span class="hl_varref"><span class="mpre">n0</span></span></a><span class="mpre"> </span><a href="#loc_619_14_619_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_14_619_16&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">))
  where
    </span><span class="hl_comment"><span class="mpre">-- go  :: (Monad m, Integral n)</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     =&gt; n</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     -&gt; Producer ByteString m r</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     -&gt; Producer&#39; ByteString m (Producer ByteString m r)</span></span><span class="mpre">
    </span><a name="loc_625_5_625_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_5_625_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_625_8_625_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_8_625_9&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_625_10_625_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_10_625_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> =
        if (</span><a href="#loc_625_8_625_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_8_625_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><span class="hl_num"><span class="mpre">0</span></span><span class="mpre">)
        then </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_625_10_625_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_10_625_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
        else do
            </span><a name="loc_629_13_629_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_629_13_629_14&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_625_10_625_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_10_625_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
            case </span><a href="#loc_629_13_629_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_629_13_629_14&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_631_24_631_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_631_24_631_25&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_631_24_631_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_631_24_631_25&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
                </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_632_24_632_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_24_632_26&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_632_28_632_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_28_632_30&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; do
                    let </span><a name="loc_633_25_633_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_25_633_28&#39;)"><span class="hl_vardecl"><span class="mpre">len</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.length</span></span><span class="mpre"> </span><a href="#loc_632_24_632_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_24_632_26&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
                    if (</span><a href="#loc_633_25_633_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_25_633_28&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&lt;=</span></span><span class="mpre"> </span><a href="#loc_625_8_625_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_8_625_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
                        then do
                            </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_632_24_632_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_24_632_26&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                            </span><a href="#loc_625_5_625_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_5_625_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> (</span><a href="#loc_625_8_625_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_8_625_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">-</span></span><span class="mpre"> </span><a href="#loc_633_25_633_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_633_25_633_28&#39;)"><span class="hl_varref"><span class="mpre">len</span></span></a><span class="mpre">) </span><a href="#loc_632_28_632_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_28_632_30&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                        else do
                            let (</span><a name="loc_639_34_639_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_639_34_639_40&#39;)"><span class="hl_vardecl"><span class="mpre">prefix</span></span></a><span class="mpre">, </span><a name="loc_639_42_639_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_639_42_639_48&#39;)"><span class="hl_vardecl"><span class="mpre">suffix</span></span></a><span class="mpre">) =
                                    </span><span class="hl_varref"><span class="mpre">BS.splitAt</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><a href="#loc_625_8_625_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_625_8_625_9&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><a href="#loc_632_24_632_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_24_632_26&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                            </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_639_34_639_40" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_639_34_639_40&#39;)"><span class="hl_varref"><span class="mpre">prefix</span></span></a><span class="mpre">
                            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_639_42_639_48" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_639_42_639_48&#39;)"><span class="hl_varref"><span class="mpre">suffix</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_632_28_632_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_632_28_632_30&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE splitAt #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Improper lens that splits after the longest consecutive group of bytes that
    satisfy the given predicate
-}</span></span><span class="mpre">
</span><a href="#loc_653_1_653_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_1_653_5&#39;)"><span class="mpre">span</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 649, srcSpanStartColumn = 8, srcSpanEndLine = 650, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 650, srcSpanStartColumn = 5, srcSpanEndLine = 650, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
             (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">))
</span><a name="loc_653_1_653_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_1_653_5&#39;)"><span class="hl_fundecl"><span class="mpre">span</span></span></a><span class="mpre"> </span><a name="loc_653_6_653_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_6_653_15&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_653_16_653_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_16_653_17&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_653_18_653_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_18_653_20&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Control.Monad.html#loc_204_1_204_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_204_1_204_5&#39;)"><span class="hl_varref"><span class="mpre">join</span></span></a><span class="mpre"> (</span><a href="#loc_653_16_653_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_16_653_17&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_655_5_655_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_655_5_655_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_653_18_653_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_18_653_20&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">))
  where
    </span><a name="loc_655_5_655_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_655_5_655_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_655_8_655_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_655_8_655_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_656_9_656_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_9_656_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_655_8_655_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_655_8_655_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
        case </span><a href="#loc_656_9_656_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_656_9_656_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_658_20_658_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_658_20_658_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_658_20_658_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_658_20_658_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_659_20_659_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_659_20_659_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_659_24_659_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_659_24_659_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; do
                let (</span><a name="loc_660_22_660_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_660_22_660_28&#39;)"><span class="hl_vardecl"><span class="mpre">prefix</span></span></a><span class="mpre">, </span><a name="loc_660_30_660_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_660_30_660_36&#39;)"><span class="hl_vardecl"><span class="mpre">suffix</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">BS.span</span></span><span class="mpre"> </span><a href="#loc_653_6_653_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_6_653_15&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a href="#loc_659_20_659_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_659_20_659_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_660_30_660_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_660_30_660_36&#39;)"><span class="hl_varref"><span class="mpre">suffix</span></span></a><span class="mpre">)
                    then do
                        </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_659_20_659_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_659_20_659_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">
                        </span><a href="#loc_655_5_655_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_655_5_655_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_659_24_659_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_659_24_659_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                    else do
                        </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_660_22_660_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_660_22_660_28&#39;)"><span class="hl_varref"><span class="mpre">prefix</span></span></a><span class="mpre">
                        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_660_30_660_36" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_660_30_660_36&#39;)"><span class="hl_varref"><span class="mpre">suffix</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_659_24_659_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_659_24_659_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE span #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Improper lens that splits after the longest consecutive group of bytes that
    fail the given predicate
-}</span></span><span class="mpre">
</span><a href="#loc_678_1_678_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_1_678_6&#39;)"><span class="mpre">break</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 674, srcSpanStartColumn = 8, srcSpanEndLine = 675, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 675, srcSpanStartColumn = 5, srcSpanEndLine = 675, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
             (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">))
</span><a name="loc_678_1_678_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_1_678_6&#39;)"><span class="hl_fundecl"><span class="mpre">break</span></span></a><span class="mpre"> </span><a name="loc_678_7_678_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_7_678_16&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> = </span><a href="#loc_653_1_653_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_1_653_5&#39;)"><span class="hl_varref"><span class="mpre">span</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">not</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="#loc_678_7_678_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_7_678_16&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE break #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Improper lens that splits after the first group of matching bytes, as
    defined by the given equality predicate
-}</span></span><span class="mpre">
</span><a href="#loc_689_1_689_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_1_689_8&#39;)"><span class="mpre">groupBy</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 685, srcSpanStartColumn = 8, srcSpanEndLine = 686, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 686, srcSpanStartColumn = 5, srcSpanEndLine = 686, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
             (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">))
</span><a name="loc_689_1_689_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_1_689_8&#39;)"><span class="hl_fundecl"><span class="mpre">groupBy</span></span></a><span class="mpre"> </span><a name="loc_689_9_689_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_9_689_15&#39;)"><span class="hl_vardecl"><span class="mpre">equals</span></span></a><span class="mpre"> </span><a name="loc_689_16_689_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_16_689_17&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_689_18_689_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_18_689_20&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Control.Monad.html#loc_204_1_204_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_204_1_204_5&#39;)"><span class="hl_varref"><span class="mpre">join</span></span></a><span class="mpre"> (</span><a href="#loc_689_16_689_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_16_689_17&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_695_5_695_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_5_695_13&#39;)"><span class="hl_varref"><span class="mpre">_groupBy</span></span></a><span class="mpre"> </span><a href="#loc_689_18_689_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_18_689_20&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">))
  where
    </span><span class="hl_comment"><span class="mpre">-- _groupBy</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     :: Monad m</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     =&gt; Producer ByteString m r</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     -&gt; Producer ByteString m (Producer ByteString m r)</span></span><span class="mpre">
    </span><a name="loc_695_5_695_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_5_695_13&#39;)"><span class="hl_fundecl"><span class="mpre">_groupBy</span></span></a><span class="mpre"> </span><a name="loc_695_14_695_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_14_695_15&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_696_9_696_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_696_9_696_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_695_14_695_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_14_695_15&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
        case </span><a href="#loc_696_9_696_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_696_9_696_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_698_20_698_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_20_698_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_698_20_698_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_698_20_698_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_699_20_699_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_699_20_699_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_699_24_699_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_699_24_699_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; case (</span><span class="hl_varref"><span class="mpre">BS.uncons</span></span><span class="mpre"> </span><a href="#loc_699_20_699_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_699_20_699_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) of
                </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">      -&gt; </span><a href="#loc_695_5_695_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_695_5_695_13&#39;)"><span class="hl_varref"><span class="mpre">_groupBy</span></span></a><span class="mpre"> </span><a href="#loc_699_24_699_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_699_24_699_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> (</span><a name="loc_701_23_701_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_701_23_701_25&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre">, _) -&gt; (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_699_20_699_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_699_20_699_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_699_24_699_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_699_24_699_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)</span><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="#loc_653_1_653_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_1_653_5&#39;)"><span class="hl_varref"><span class="mpre">span</span></span></a><span class="mpre"> (</span><a href="#loc_689_9_689_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_9_689_15&#39;)"><span class="hl_varref"><span class="mpre">equals</span></span></a><span class="mpre"> </span><a href="#loc_701_23_701_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_701_23_701_25&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE groupBy #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Like &#39;groupBy&#39;, where the equality predicate is (&#39;==&#39;)</span></span><span class="mpre">
</span><a href="#loc_709_1_709_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_709_1_709_6&#39;)"><span class="mpre">group</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 706, srcSpanStartColumn = 8, srcSpanEndLine = 707, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 707, srcSpanStartColumn = 5, srcSpanEndLine = 707, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
             (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">))
</span><a name="loc_709_1_709_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_709_1_709_6&#39;)"><span class="hl_vardecl"><span class="mpre">group</span></span></a><span class="mpre"> = </span><a href="#loc_689_1_689_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_689_1_689_8&#39;)"><span class="hl_varref"><span class="mpre">groupBy</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">(==)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE group #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Improper lens that splits a &#39;Producer&#39; after the first word

    Unlike &#39;words&#39;, this does not drop leading whitespace

    Note: This function is purely for demonstration purposes since it assumes a
    particular encoding.  You should prefer the &#39;Data.Text.Text&#39; equivalent of
    this function from the @pipes-text@ library.
-}</span></span><span class="mpre">
</span><a href="#loc_724_1_724_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_1_724_5&#39;)"><span class="mpre">word</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 721, srcSpanStartColumn = 8, srcSpanEndLine = 722, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 722, srcSpanStartColumn = 5, srcSpanEndLine = 722, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
             (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">))
</span><a name="loc_724_1_724_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_1_724_5&#39;)"><span class="hl_fundecl"><span class="mpre">word</span></span></a><span class="mpre"> </span><a name="loc_724_6_724_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_6_724_7&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_724_8_724_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_8_724_10&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Control.Monad.html#loc_204_1_204_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_204_1_204_5&#39;)"><span class="hl_varref"><span class="mpre">join</span></span></a><span class="mpre"> (</span><a href="#loc_724_6_724_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_6_724_7&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_730_5_730_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_730_5_730_7&#39;)"><span class="hl_varref"><span class="mpre">to</span></span></a><span class="mpre"> </span><a href="#loc_724_8_724_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_724_8_724_10&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">))
  where
    </span><span class="hl_comment"><span class="mpre">-- to</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     :: Monad m</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     =&gt; Producer ByteString m r</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     -&gt; Producer ByteString m (Producer ByteString m r)</span></span><span class="mpre">
    </span><a name="loc_730_5_730_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_730_5_730_7&#39;)"><span class="hl_fundecl"><span class="mpre">to</span></span></a><span class="mpre"> </span><a name="loc_730_8_730_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_730_8_730_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_731_9_731_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_731_9_731_11&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_730_8_730_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_730_8_730_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="#loc_653_1_653_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_1_653_5&#39;)"><span class="hl_varref"><span class="mpre">span</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_560_1_560_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_560_1_560_13&#39;)"><span class="hl_varref"><span class="mpre">isSpaceWord8</span></span></a><span class="mpre">
        </span><a href="#loc_731_9_731_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_731_9_731_11&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="#loc_678_1_678_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_1_678_6&#39;)"><span class="hl_varref"><span class="mpre">break</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_560_1_560_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_560_1_560_13&#39;)"><span class="hl_varref"><span class="mpre">isSpaceWord8</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE word #-}</span></span><span class="mpre">

</span><a href="#loc_736_1_736_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_736_1_736_3&#39;)"><span class="mpre">nl</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">
</span><a name="loc_736_1_736_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_736_1_736_3&#39;)"><span class="hl_vardecl"><span class="mpre">nl</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">ord</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39;\n&#39;</span></span><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">{-| Improper lens that splits a &#39;Producer&#39; after the first line

    Unlike &#39;lines&#39;, this does not consume the newline marker, which is stored
    within the inner &#39;Producer&#39;

    Note: This function is purely for demonstration purposes since it assumes a
    particular encoding.  You should prefer the &#39;Data.Text.Text&#39; equivalent of
    this function from the @pipes-text@ library.
-}</span></span><span class="mpre">
</span><a href="#loc_751_1_751_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_751_1_751_5&#39;)"><span class="mpre">line</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 748, srcSpanStartColumn = 8, srcSpanEndLine = 749, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 749, srcSpanStartColumn = 5, srcSpanEndLine = 749, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
             (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">))
</span><a name="loc_751_1_751_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_751_1_751_5&#39;)"><span class="hl_vardecl"><span class="mpre">line</span></span></a><span class="mpre"> = </span><a href="#loc_678_1_678_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_1_678_6&#39;)"><span class="hl_varref"><span class="mpre">break</span></span></a><span class="mpre"> (</span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre"> </span><a href="#loc_736_1_736_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_736_1_736_3&#39;)"><span class="hl_varref"><span class="mpre">nl</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE line #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @(drop n)@ drops the first @n@ bytes</span></span><span class="mpre">
</span><a href="#loc_758_1_758_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_758_1_758_5&#39;)"><span class="mpre">drop</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 756, srcSpanStartColumn = 8, srcSpanEndLine = 757, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 756, srcSpanStartColumn = 8, srcSpanEndLine = 756, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes"><span class="mpre">(Monad m, Integral n)
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_758_1_758_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_758_1_758_5&#39;)"><span class="hl_fundecl"><span class="mpre">drop</span></span></a><span class="mpre"> </span><a name="loc_758_6_758_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_758_6_758_7&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_758_8_758_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_758_8_758_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
    </span><a name="loc_759_5_759_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_759_5_759_7&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Pipes.Core.html#loc_119_1_119_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_119_1_119_10&#39;)"><span class="hl_varref"><span class="mpre">runEffect</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> (</span><a href="#loc_758_8_758_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_758_8_758_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><span class="mpre"> </span><a href="#loc_619_1_619_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_1_619_8&#39;)"><span class="hl_varref"><span class="mpre">splitAt</span></span></a><span class="mpre"> </span><a href="#loc_758_6_758_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_758_6_758_7&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">) </span><a href="Pipes.html#loc_482_1_482_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_482_1_482_8&#39;)"><span class="hl_varref"><span class="mpre">discard</span></span></a><span class="mpre">)
    </span><a href="#loc_759_5_759_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_759_5_759_7&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE drop #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Drop bytes until they fail the predicate</span></span><span class="mpre">
</span><a href="#loc_767_1_767_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_767_1_767_10&#39;)"><span class="mpre">dropWhile</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 765, srcSpanStartColumn = 8, srcSpanEndLine = 766, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 766, srcSpanStartColumn = 5, srcSpanEndLine = 766, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_767_1_767_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_767_1_767_10&#39;)"><span class="hl_fundecl"><span class="mpre">dropWhile</span></span></a><span class="mpre"> </span><a name="loc_767_11_767_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_767_11_767_20&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_767_21_767_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_767_21_767_22&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
    </span><a name="loc_768_5_768_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_768_5_768_7&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Pipes.Core.html#loc_119_1_119_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Core.html#loc_119_1_119_10&#39;)"><span class="hl_varref"><span class="mpre">runEffect</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> (</span><a href="#loc_767_21_767_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_767_21_767_22&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><span class="mpre"> </span><a href="#loc_653_1_653_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_1_653_5&#39;)"><span class="hl_varref"><span class="mpre">span</span></span></a><span class="mpre"> </span><a href="#loc_767_11_767_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_767_11_767_20&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">) </span><a href="Pipes.html#loc_482_1_482_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_482_1_482_8&#39;)"><span class="hl_varref"><span class="mpre">discard</span></span></a><span class="mpre">)
    </span><a href="#loc_768_5_768_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_768_5_768_7&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE dropWhile #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Intersperse a &#39;Word8&#39; in between the bytes of the byte stream</span></span><span class="mpre">
</span><a href="#loc_775_1_775_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_1_775_12&#39;)"><span class="mpre">intersperse</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 774, srcSpanStartColumn = 8, srcSpanEndLine = 774, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 774, srcSpanStartColumn = 16, srcSpanEndLine = 774, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_775_1_775_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_1_775_12&#39;)"><span class="hl_fundecl"><span class="mpre">intersperse</span></span></a><span class="mpre"> </span><a name="loc_775_13_775_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_13_775_15&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> = </span><a href="#loc_777_5_777_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_777_5_777_8&#39;)"><span class="hl_varref"><span class="mpre">go0</span></span></a><span class="mpre">
  where
    </span><a name="loc_777_5_777_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_777_5_777_8&#39;)"><span class="hl_fundecl"><span class="mpre">go0</span></span></a><span class="mpre"> </span><a name="loc_777_9_777_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_777_9_777_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_778_9_778_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_778_9_778_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_777_9_777_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_777_9_777_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
        case </span><a href="#loc_778_9_778_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_778_9_778_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_780_20_780_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_780_20_780_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_780_20_780_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_780_20_780_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_781_20_781_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_781_20_781_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_781_24_781_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_781_24_781_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; do
                </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.intersperse</span></span><span class="mpre"> </span><a href="#loc_775_13_775_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_13_775_15&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre"> </span><a href="#loc_781_20_781_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_781_20_781_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
                </span><a href="#loc_784_5_784_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_784_5_784_8&#39;)"><span class="hl_varref"><span class="mpre">go1</span></span></a><span class="mpre"> </span><a href="#loc_781_24_781_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_781_24_781_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
    </span><a name="loc_784_5_784_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_784_5_784_8&#39;)"><span class="hl_fundecl"><span class="mpre">go1</span></span></a><span class="mpre"> </span><a name="loc_784_9_784_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_784_9_784_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_785_9_785_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_785_9_785_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Control.Monad.Trans.Class.html#loc_51_5_51_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Class.html#loc_51_5_51_9&#39;)"><span class="hl_varref"><span class="mpre">lift</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_784_9_784_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_784_9_784_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
        case </span><a href="#loc_785_9_785_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_785_9_785_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_787_20_787_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_787_20_787_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><a href="#loc_787_20_787_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_787_20_787_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_788_20_788_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_788_20_788_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_788_24_788_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_788_24_788_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; do
                </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.singleton</span></span><span class="mpre"> </span><a href="#loc_775_13_775_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_13_775_15&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">)
                </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.intersperse</span></span><span class="mpre"> </span><a href="#loc_775_13_775_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_775_13_775_15&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre"> </span><a href="#loc_788_20_788_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_788_20_788_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
                </span><a href="#loc_784_5_784_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_784_5_784_8&#39;)"><span class="hl_varref"><span class="mpre">go1</span></span></a><span class="mpre"> </span><a href="#loc_788_24_788_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_788_24_788_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE intersperse #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Improper lens from unpacked &#39;Word8&#39;s to packaged &#39;ByteString&#39;s</span></span><span class="mpre">
</span><a href="#loc_796_1_796_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_796_1_796_5&#39;)"><span class="mpre">pack</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 795, srcSpanStartColumn = 9, srcSpanEndLine = 795, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 795, srcSpanStartColumn = 17, srcSpanEndLine = 795, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
</span><a name="loc_796_1_796_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_796_1_796_5&#39;)"><span class="hl_fundecl"><span class="mpre">pack</span></span></a><span class="mpre"> </span><a name="loc_796_6_796_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_796_6_796_7&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_796_8_796_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_796_8_796_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_813_1_813_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_813_1_813_8&#39;)"><span class="hl_varref"><span class="mpre">_unpack</span></span></a><span class="mpre"> (</span><a href="#loc_796_6_796_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_796_6_796_7&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_805_1_805_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_1_805_6&#39;)"><span class="hl_varref"><span class="mpre">_pack</span></span></a><span class="mpre"> </span><a href="#loc_796_8_796_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_796_8_796_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE pack #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Improper lens from packed &#39;ByteString&#39;s to unpacked &#39;Word8&#39;s</span></span><span class="mpre">
</span><a href="#loc_801_1_801_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_1_801_7&#39;)"><span class="mpre">unpack</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 800, srcSpanStartColumn = 11, srcSpanEndLine = 800, srcSpanEndColumn = 21}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 800, srcSpanStartColumn = 19, srcSpanEndLine = 800, srcSpanEndColumn = 21}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
</span><a name="loc_801_1_801_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_1_801_7&#39;)"><span class="hl_fundecl"><span class="mpre">unpack</span></span></a><span class="mpre"> </span><a name="loc_801_8_801_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_8_801_9&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_801_10_801_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_10_801_11&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_805_1_805_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_1_805_6&#39;)"><span class="hl_varref"><span class="mpre">_pack</span></span></a><span class="mpre"> (</span><a href="#loc_801_8_801_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_8_801_9&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_813_1_813_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_813_1_813_8&#39;)"><span class="hl_varref"><span class="mpre">_unpack</span></span></a><span class="mpre"> </span><a href="#loc_801_10_801_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_801_10_801_11&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE unpack #-}</span></span><span class="mpre">

</span><a href="#loc_805_1_805_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_1_805_6&#39;)"><span class="mpre">_pack</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 804, srcSpanStartColumn = 10, srcSpanEndLine = 804, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 804, srcSpanStartColumn = 18, srcSpanEndLine = 804, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">
</span><a name="loc_805_1_805_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_1_805_6&#39;)"><span class="hl_fundecl"><span class="mpre">_pack</span></span></a><span class="mpre"> </span><a name="loc_805_7_805_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_7_805_8&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Pipes.Group.html#loc_275_1_275_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_275_1_275_6&#39;)"><span class="hl_varref"><span class="mpre">PG.folds</span></span></a><span class="mpre"> </span><a href="#loc_807_5_807_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_807_5_807_9&#39;)"><span class="hl_varref"><span class="mpre">step</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre"> </span><a href="#loc_809_5_809_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_809_5_809_9&#39;)"><span class="hl_varref"><span class="mpre">done</span></span></a><span class="mpre"> (</span><a href="#loc_805_7_805_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_805_7_805_8&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="Pipes.Group.html#loc_98_1_98_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_98_1_98_9&#39;)"><span class="hl_varref"><span class="mpre">PG.chunksOf</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Lazy.Internal.html#loc_208_1_208_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Lazy.Internal.html#loc_208_1_208_17&#39;)"><span class="hl_varref"><span class="mpre">defaultChunkSize</span></span></a><span class="mpre">)
  where
    </span><a name="loc_807_5_807_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_807_5_807_9&#39;)"><span class="hl_fundecl"><span class="mpre">step</span></span></a><span class="mpre"> </span><a name="loc_807_10_807_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_807_10_807_16&#39;)"><span class="hl_vardecl"><span class="mpre">diffAs</span></span></a><span class="mpre"> </span><a name="loc_807_17_807_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_807_17_807_19&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> = </span><a href="#loc_807_10_807_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_807_10_807_16&#39;)"><span class="hl_varref"><span class="mpre">diffAs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> (</span><a href="#loc_807_17_807_19" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_807_17_807_19&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">)

    </span><a name="loc_809_5_809_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_809_5_809_9&#39;)"><span class="hl_fundecl"><span class="mpre">done</span></span></a><span class="mpre"> </span><a name="loc_809_10_809_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_809_10_809_16&#39;)"><span class="hl_vardecl"><span class="mpre">diffAs</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">BS.pack</span></span><span class="mpre"> (</span><a href="#loc_809_10_809_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_809_10_809_16&#39;)"><span class="hl_varref"><span class="mpre">diffAs</span></span></a><span class="mpre"> [])
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE _pack #-}</span></span><span class="mpre">

</span><a href="#loc_813_1_813_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_813_1_813_8&#39;)"><span class="mpre">_unpack</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 812, srcSpanStartColumn = 12, srcSpanEndLine = 812, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 812, srcSpanStartColumn = 20, srcSpanEndLine = 812, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">
</span><a name="loc_813_1_813_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_813_1_813_8&#39;)"><span class="hl_fundecl"><span class="mpre">_unpack</span></span></a><span class="mpre"> </span><a name="loc_813_9_813_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_813_9_813_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="Pipes.html#loc_150_1_150_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_150_1_150_4&#39;)"><span class="hl_varref"><span class="mpre">for</span></span></a><span class="mpre"> </span><a href="#loc_813_9_813_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_813_9_813_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_465_1_465_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_465_1_465_5&#39;)"><span class="hl_varref"><span class="mpre">each</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BS.unpack</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE _unpack #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Group byte stream chunks into chunks of fixed length

    Note: This is the /only/ function in this API that concatenates
    &#39;ByteString&#39; chunks, which requires allocating new `ByteString`s
-}</span></span><span class="mpre">
</span><a href="#loc_824_1_824_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_824_1_824_10&#39;)"><span class="mpre">chunksOf&#39;</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 822, srcSpanStartColumn = 8, srcSpanEndLine = 823, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 822, srcSpanStartColumn = 8, srcSpanEndLine = 822, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes"><span class="mpre">(Monad m, Integral n)
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">r</span></span><span class="mpre">
</span><a name="loc_824_1_824_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_824_1_824_10&#39;)"><span class="hl_fundecl"><span class="mpre">chunksOf&#39;</span></span></a><span class="mpre"> </span><a name="loc_824_11_824_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_824_11_824_12&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_824_13_824_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_824_13_824_14&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> =
    </span><a href="Pipes.Group.html#loc_275_1_275_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_275_1_275_6&#39;)"><span class="hl_varref"><span class="mpre">PG.folds</span></span></a><span class="mpre">
        (\</span><a name="loc_826_11_826_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_11_826_17&#39;)"><span class="hl_vardecl"><span class="mpre">diffBs</span></span></a><span class="mpre"> </span><a name="loc_826_18_826_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_18_826_20&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_826_11_826_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_11_826_17&#39;)"><span class="hl_varref"><span class="mpre">diffBs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> (</span><a href="#loc_826_18_826_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_826_18_826_20&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="hl_infix"><span class="mpre">:</span></span><span class="mpre">))
        </span><span class="hl_varref"><span class="mpre">id</span></span><span class="mpre">
        (\</span><a name="loc_828_11_828_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_828_11_828_17&#39;)"><span class="hl_vardecl"><span class="mpre">diffBs</span></span></a><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">BS.concat</span></span><span class="mpre"> (</span><a href="#loc_828_11_828_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_828_11_828_17&#39;)"><span class="hl_varref"><span class="mpre">diffBs</span></span></a><span class="mpre"> []))
        (</span><a href="#loc_824_13_824_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_824_13_824_14&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><span class="mpre"> </span><a href="#loc_836_1_836_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_1_836_9&#39;)"><span class="hl_varref"><span class="mpre">chunksOf</span></span></a><span class="mpre"> </span><a href="#loc_824_11_824_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_824_11_824_12&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE chunksOf&#39; #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Split a byte stream into &#39;FreeT&#39;-delimited byte streams of fixed size</span></span><span class="mpre">
</span><a href="#loc_836_1_836_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_1_836_9&#39;)"><span class="mpre">chunksOf</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxTuple (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 834, srcSpanStartColumn = 8, srcSpanEndLine = 835, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 834, srcSpanStartColumn = 8, srcSpanEndLine = 834, srcSpanEndColumn = 9},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes"><span class="mpre">(Monad m, Integral n)
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">n</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) (</span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
</span><a name="loc_836_1_836_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_1_836_9&#39;)"><span class="hl_fundecl"><span class="mpre">chunksOf</span></span></a><span class="mpre"> </span><a name="loc_836_10_836_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_10_836_11&#39;)"><span class="hl_vardecl"><span class="mpre">n</span></span></a><span class="mpre"> </span><a name="loc_836_12_836_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_12_836_13&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_836_14_836_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_14_836_16&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Pipes.Group.html#loc_110_1_110_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_110_1_110_8&#39;)"><span class="hl_varref"><span class="mpre">concats</span></span></a><span class="mpre"> (</span><a href="#loc_836_12_836_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_12_836_13&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_838_5_838_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_838_5_838_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_836_14_836_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_14_836_16&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">))
  where
    </span><a name="loc_838_5_838_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_838_5_838_7&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_838_8_838_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_838_8_838_9&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">PG.FreeT</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
        </span><a name="loc_839_9_839_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_839_9_839_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_838_8_838_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_838_8_838_9&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><a href="#loc_839_9_839_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_839_9_839_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_841_20_841_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_20_841_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><a href="Control.Monad.Trans.Free.html#loc_74_20_74_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_20_74_24&#39;)"><span class="hl_conref"><span class="mpre">PG.Pure</span></span></a><span class="mpre"> </span><a href="#loc_841_20_841_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_841_20_841_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_842_20_842_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_20_842_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_842_24_842_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_24_842_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="Control.Monad.Trans.Free.html#loc_74_29_74_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_29_74_33&#39;)"><span class="hl_conref"><span class="mpre">PG.Free</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
                </span><a name="loc_843_17_843_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_843_17_843_20&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre"> &lt;- (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_842_20_842_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_20_842_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_842_24_842_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_842_24_842_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)</span><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="#loc_619_1_619_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_619_1_619_8&#39;)"><span class="hl_varref"><span class="mpre">splitAt</span></span></a><span class="mpre"> </span><a href="#loc_836_10_836_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_836_10_836_11&#39;)"><span class="hl_varref"><span class="mpre">n</span></span></a><span class="mpre">
                </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_838_5_838_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_838_5_838_7&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_843_17_843_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_843_17_843_20&#39;)"><span class="hl_varref"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE chunksOf #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Split a byte stream into groups separated by bytes that satisfy the
    predicate
-}</span></span><span class="mpre">
</span><a href="#loc_854_1_854_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_1_854_11&#39;)"><span class="mpre">splitsWith</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 851, srcSpanStartColumn = 8, srcSpanEndLine = 852, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 852, srcSpanStartColumn = 5, srcSpanEndLine = 852, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">
</span><a name="loc_854_1_854_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_1_854_11&#39;)"><span class="hl_fundecl"><span class="mpre">splitsWith</span></span></a><span class="mpre"> </span><a name="loc_854_12_854_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_12_854_21&#39;)"><span class="hl_vardecl"><span class="mpre">predicate</span></span></a><span class="mpre"> </span><a name="loc_854_22_854_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_22_854_24&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">PG.FreeT</span></span><span class="mpre"> (</span><a href="#loc_856_5_856_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_856_5_856_8&#39;)"><span class="hl_varref"><span class="mpre">go0</span></span></a><span class="mpre"> </span><a href="#loc_854_22_854_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_22_854_24&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">)
  where
    </span><a name="loc_856_5_856_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_856_5_856_8&#39;)"><span class="hl_fundecl"><span class="mpre">go0</span></span></a><span class="mpre"> </span><a name="loc_856_9_856_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_856_9_856_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_857_9_857_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_857_9_857_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_856_9_856_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_856_9_856_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
        case </span><a href="#loc_857_9_857_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_857_9_857_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_859_20_859_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_859_20_859_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Control.Monad.Trans.Free.html#loc_74_20_74_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_20_74_24&#39;)"><span class="hl_conref"><span class="mpre">PG.Pure</span></span></a><span class="mpre"> </span><a href="#loc_859_20_859_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_859_20_859_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_860_20_860_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_20_860_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_860_24_860_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_24_860_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt;
                if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_860_20_860_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_20_860_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
                then </span><a href="#loc_856_5_856_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_856_5_856_8&#39;)"><span class="hl_varref"><span class="mpre">go0</span></span></a><span class="mpre"> </span><a href="#loc_860_24_860_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_24_860_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                else </span><a href="#loc_864_5_864_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_864_5_864_8&#39;)"><span class="hl_varref"><span class="mpre">go1</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_860_20_860_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_20_860_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_860_24_860_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_860_24_860_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)
    </span><a name="loc_864_5_864_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_864_5_864_8&#39;)"><span class="hl_fundecl"><span class="mpre">go1</span></span></a><span class="mpre"> </span><a name="loc_864_9_864_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_864_9_864_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.Trans.Free.html#loc_74_29_74_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_29_74_33&#39;)"><span class="hl_conref"><span class="mpre">PG.Free</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
        </span><a name="loc_865_9_865_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_865_9_865_11&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_864_9_864_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_864_9_864_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="#loc_678_1_678_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_1_678_6&#39;)"><span class="hl_varref"><span class="mpre">break</span></span></a><span class="mpre"> </span><a href="#loc_854_12_854_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_12_854_21&#39;)"><span class="hl_varref"><span class="mpre">predicate</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">PG.FreeT</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            </span><a name="loc_867_13_867_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_867_13_867_14&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_546_1_546_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_546_1_546_9&#39;)"><span class="hl_varref"><span class="mpre">nextByte</span></span></a><span class="mpre"> </span><a href="#loc_865_9_865_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_865_9_865_11&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
            case </span><a href="#loc_867_13_867_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_867_13_867_14&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_869_24_869_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_869_24_869_25&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Control.Monad.Trans.Free.html#loc_74_20_74_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_20_74_24&#39;)"><span class="hl_conref"><span class="mpre">PG.Pure</span></span></a><span class="mpre"> </span><a href="#loc_869_24_869_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_869_24_869_25&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
                </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (_, </span><a name="loc_870_27_870_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_870_27_870_30&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_864_5_864_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_864_5_864_8&#39;)"><span class="hl_varref"><span class="mpre">go1</span></span></a><span class="mpre"> </span><a href="#loc_870_27_870_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_870_27_870_30&#39;)"><span class="hl_varref"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE splitsWith #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Split a byte stream into groups separated by the given byte</span></span><span class="mpre">
</span><a href="#loc_878_1_878_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_1_878_7&#39;)"><span class="mpre">splits</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 875, srcSpanStartColumn = 8, srcSpanEndLine = 876, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 876, srcSpanStartColumn = 5, srcSpanEndLine = 876, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) (</span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
</span><a name="loc_878_1_878_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_1_878_7&#39;)"><span class="hl_fundecl"><span class="mpre">splits</span></span></a><span class="mpre"> </span><a name="loc_878_8_878_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_8_878_10&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre"> </span><a name="loc_878_11_878_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_11_878_12&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_878_13_878_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_13_878_14&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> =
    </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> (</span><a href="Pipes.Group.html#loc_126_1_126_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_126_1_126_13&#39;)"><span class="hl_varref"><span class="mpre">PG.intercalates</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.singleton</span></span><span class="mpre"> </span><a href="#loc_878_8_878_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_8_878_10&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">))) (</span><a href="#loc_878_11_878_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_11_878_12&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_854_1_854_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_854_1_854_11&#39;)"><span class="hl_varref"><span class="mpre">splitsWith</span></span></a><span class="mpre"> (</span><a href="#loc_878_8_878_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_8_878_10&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">==</span></span><span class="mpre">) </span><a href="#loc_878_13_878_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_878_13_878_14&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE splits #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Isomorphism between a byte stream and groups of identical bytes using the
    supplied equality predicate
-}</span></span><span class="mpre">
</span><a href="#loc_889_1_889_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_1_889_9&#39;)"><span class="mpre">groupsBy</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 886, srcSpanStartColumn = 8, srcSpanEndLine = 887, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 887, srcSpanStartColumn = 5, srcSpanEndLine = 887, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Word8</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Bool</span></span><span class="mpre">)
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) (</span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
</span><a name="loc_889_1_889_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_1_889_9&#39;)"><span class="hl_fundecl"><span class="mpre">groupsBy</span></span></a><span class="mpre"> </span><a name="loc_889_10_889_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_10_889_16&#39;)"><span class="hl_vardecl"><span class="mpre">equals</span></span></a><span class="mpre"> </span><a name="loc_889_17_889_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_17_889_18&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_889_19_889_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_19_889_21&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="Pipes.Group.html#loc_110_1_110_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_110_1_110_8&#39;)"><span class="hl_varref"><span class="mpre">concats</span></span></a><span class="mpre"> (</span><a href="#loc_889_17_889_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_17_889_18&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_896_5_896_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_896_5_896_14&#39;)"><span class="hl_varref"><span class="mpre">_groupsBy</span></span></a><span class="mpre"> </span><a href="#loc_889_19_889_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_19_889_21&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">))
  where
    </span><span class="hl_comment"><span class="mpre">-- _groupsBy</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     :: Monad m</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     =&gt; (Word8 -&gt; Word8 -&gt; Bool)</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     -&gt; Producer ByteString m x</span></span><span class="mpre">
    </span><span class="hl_comment"><span class="mpre">--     -&gt; FreeT (Producer ByteString m) m x</span></span><span class="mpre">
    </span><a name="loc_896_5_896_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_896_5_896_14&#39;)"><span class="hl_fundecl"><span class="mpre">_groupsBy</span></span></a><span class="mpre"> </span><a name="loc_896_15_896_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_896_15_896_18&#39;)"><span class="hl_vardecl"><span class="mpre">p0&#39;</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">PG.FreeT</span></span><span class="mpre"> (</span><a href="#loc_898_9_898_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_898_9_898_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_896_15_896_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_896_15_896_18&#39;)"><span class="hl_varref"><span class="mpre">p0&#39;</span></span></a><span class="mpre">)
      where
        </span><a name="loc_898_9_898_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_898_9_898_11&#39;)"><span class="hl_fundecl"><span class="mpre">go</span></span></a><span class="mpre"> </span><a name="loc_898_12_898_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_898_12_898_13&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
            </span><a name="loc_899_13_899_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_899_13_899_14&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_898_12_898_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_898_12_898_13&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
            case </span><a href="#loc_899_13_899_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_899_13_899_14&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_901_24_901_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_901_24_901_25&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Control.Monad.Trans.Free.html#loc_74_20_74_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_20_74_24&#39;)"><span class="hl_conref"><span class="mpre">PG.Pure</span></span></a><span class="mpre"> </span><a href="#loc_901_24_901_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_901_24_901_25&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
                </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_902_24_902_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_902_24_902_26&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_902_28_902_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_902_28_902_30&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; case (</span><span class="hl_varref"><span class="mpre">BS.uncons</span></span><span class="mpre"> </span><a href="#loc_902_24_902_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_902_24_902_26&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">) of
                    </span><a href="Data.Maybe.html#loc_49_19_49_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_19_49_26&#39;)"><span class="hl_conref"><span class="mpre">Nothing</span></span></a><span class="mpre">      -&gt; </span><a href="#loc_898_9_898_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_898_9_898_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_902_28_902_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_902_28_902_30&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                    </span><a href="Data.Maybe.html#loc_49_29_49_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_49_29_49_33&#39;)"><span class="hl_conref"><span class="mpre">Just</span></span></a><span class="mpre"> (</span><a name="loc_904_27_904_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_904_27_904_29&#39;)"><span class="hl_vardecl"><span class="mpre">w8</span></span></a><span class="mpre">, _) -&gt; do
                        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.Trans.Free.html#loc_74_29_74_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_29_74_33&#39;)"><span class="hl_conref"><span class="mpre">PG.Free</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
                            </span><a name="loc_906_29_906_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_906_29_906_32&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre"> &lt;- (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_902_24_902_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_902_24_902_26&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_902_28_902_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_902_28_902_30&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)</span><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="#loc_653_1_653_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_653_1_653_5&#39;)"><span class="hl_varref"><span class="mpre">span</span></span></a><span class="mpre"> (</span><a href="#loc_889_10_889_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_10_889_16&#39;)"><span class="hl_varref"><span class="mpre">equals</span></span></a><span class="mpre"> </span><a href="#loc_904_27_904_29" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_904_27_904_29&#39;)"><span class="hl_varref"><span class="mpre">w8</span></span></a><span class="mpre">)
                            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">PG.FreeT</span></span><span class="mpre"> (</span><a href="#loc_898_9_898_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_898_9_898_11&#39;)"><span class="hl_varref"><span class="mpre">go</span></span></a><span class="mpre"> </span><a href="#loc_906_29_906_32" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_906_29_906_32&#39;)"><span class="hl_varref"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE groupsBy #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Like &#39;groupsBy&#39;, where the equality predicate is (&#39;==&#39;)</span></span><span class="mpre">
</span><a href="#loc_914_1_914_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_914_1_914_7&#39;)"><span class="mpre">groups</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 912, srcSpanStartColumn = 8, srcSpanEndLine = 913, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 913, srcSpanStartColumn = 5, srcSpanEndLine = 913, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) (</span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
</span><a name="loc_914_1_914_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_914_1_914_7&#39;)"><span class="hl_vardecl"><span class="mpre">groups</span></span></a><span class="mpre"> = </span><a href="#loc_889_1_889_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_889_1_889_9&#39;)"><span class="hl_varref"><span class="mpre">groupsBy</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">(==)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE groups #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Improper lens between a bytestream and its lines

    Note: This function is purely for demonstration purposes since it assumes a
    particular encoding.  You should prefer the &#39;Data.Text.Text&#39; equivalent of
    this function from the @pipes-text@ library.
-}</span></span><span class="mpre">
</span><a href="#loc_926_1_926_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_1_926_6&#39;)"><span class="mpre">lines</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 924, srcSpanStartColumn = 8, srcSpanEndLine = 925, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 925, srcSpanStartColumn = 5, srcSpanEndLine = 925, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) (</span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
</span><a name="loc_926_1_926_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_1_926_6&#39;)"><span class="hl_fundecl"><span class="mpre">lines</span></span></a><span class="mpre"> </span><a name="loc_926_7_926_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_7_926_8&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_926_9_926_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_9_926_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_964_1_964_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_964_1_964_9&#39;)"><span class="hl_varref"><span class="mpre">_unlines</span></span></a><span class="mpre"> (</span><a href="#loc_926_7_926_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_7_926_8&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_943_1_943_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_943_1_943_7&#39;)"><span class="hl_varref"><span class="mpre">_lines</span></span></a><span class="mpre"> </span><a href="#loc_926_9_926_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_926_9_926_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE lines #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Improper lens between lines and a bytestream

    Note: This function is purely for demonstration purposes since it assumes a
    particular encoding.  You should prefer the &#39;Data.Text.Text&#39; equivalent of
    this function from the @pipes-text@ library.
-}</span></span><span class="mpre">
</span><a href="#loc_938_1_938_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_938_1_938_8&#39;)"><span class="mpre">unlines</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 936, srcSpanStartColumn = 8, srcSpanEndLine = 937, srcSpanEndColumn = 7}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 937, srcSpanStartColumn = 5, srcSpanEndLine = 937, srcSpanEndColumn = 7}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemn"><span class="mpre">Monad m
    =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Lens&#39;</span></span><span class="mpre"> (</span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">) (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">)
</span><a name="loc_938_1_938_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_938_1_938_8&#39;)"><span class="hl_fundecl"><span class="mpre">unlines</span></span></a><span class="mpre"> </span><a name="loc_938_9_938_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_938_9_938_10&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> </span><a name="loc_938_11_938_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_938_11_938_12&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_943_1_943_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_943_1_943_7&#39;)"><span class="hl_varref"><span class="mpre">_lines</span></span></a><span class="mpre"> (</span><a href="#loc_938_9_938_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_938_9_938_10&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> (</span><a href="#loc_964_1_964_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_964_1_964_9&#39;)"><span class="hl_varref"><span class="mpre">_unlines</span></span></a><span class="mpre"> </span><a href="#loc_938_11_938_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_938_11_938_12&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">))
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE unlines #-}</span></span><span class="mpre">

</span><a href="#loc_943_1_943_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_943_1_943_7&#39;)"><span class="mpre">_lines</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 942, srcSpanStartColumn = 8, srcSpanEndLine = 942, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 942, srcSpanStartColumn = 16, srcSpanEndLine = 942, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">
</span><a name="loc_943_1_943_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_943_1_943_7&#39;)"><span class="hl_fundecl"><span class="mpre">_lines</span></span></a><span class="mpre"> </span><a name="loc_943_8_943_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_943_8_943_10&#39;)"><span class="hl_vardecl"><span class="mpre">p0</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">PG.FreeT</span></span><span class="mpre"> (</span><a href="#loc_945_5_945_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_5_945_8&#39;)"><span class="hl_varref"><span class="mpre">go0</span></span></a><span class="mpre"> </span><a href="#loc_943_8_943_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_943_8_943_10&#39;)"><span class="hl_varref"><span class="mpre">p0</span></span></a><span class="mpre">)
  where
    </span><a name="loc_945_5_945_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_5_945_8&#39;)"><span class="hl_fundecl"><span class="mpre">go0</span></span></a><span class="mpre"> </span><a name="loc_945_9_945_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_9_945_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_946_9_946_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_946_9_946_10&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> </span><a href="#loc_945_9_945_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_9_945_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
        case </span><a href="#loc_946_9_946_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_946_9_946_10&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
            </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_948_20_948_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_948_20_948_21&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Control.Monad.Trans.Free.html#loc_74_20_74_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_20_74_24&#39;)"><span class="hl_conref"><span class="mpre">PG.Pure</span></span></a><span class="mpre"> </span><a href="#loc_948_20_948_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_948_20_948_21&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
            </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_949_20_949_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_949_20_949_22&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_949_24_949_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_949_24_949_26&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt;
                if (</span><span class="hl_varref"><span class="mpre">BS.null</span></span><span class="mpre"> </span><a href="#loc_949_20_949_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_949_20_949_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre">)
                then </span><a href="#loc_945_5_945_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_5_945_8&#39;)"><span class="hl_varref"><span class="mpre">go0</span></span></a><span class="mpre"> </span><a href="#loc_949_24_949_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_949_24_949_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
                else </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="Control.Monad.Trans.Free.html#loc_74_29_74_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_29_74_33&#39;)"><span class="hl_conref"><span class="mpre">PG.Free</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><a href="#loc_953_5_953_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_5_953_8&#39;)"><span class="hl_varref"><span class="mpre">go1</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_949_20_949_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_949_20_949_22&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_949_24_949_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_949_24_949_26&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)
    </span><a name="loc_953_5_953_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_5_953_8&#39;)"><span class="hl_fundecl"><span class="mpre">go1</span></span></a><span class="mpre"> </span><a name="loc_953_9_953_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_9_953_10&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = do
        </span><a name="loc_954_9_954_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_954_9_954_11&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre"> &lt;- </span><a href="#loc_953_9_953_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_953_9_953_10&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="#loc_751_1_751_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_751_1_751_5&#39;)"><span class="hl_varref"><span class="mpre">line</span></span></a><span class="mpre">
        </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_conref"><span class="mpre">PG.FreeT</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            </span><a name="loc_956_13_956_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_956_13_956_14&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre">  &lt;- </span><a href="#loc_546_1_546_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_546_1_546_9&#39;)"><span class="hl_varref"><span class="mpre">nextByte</span></span></a><span class="mpre"> </span><a href="#loc_954_9_954_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_954_9_954_11&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">
            case </span><a href="#loc_956_13_956_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_956_13_956_14&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
                </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_958_24_958_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_958_24_958_25&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Control.Monad.Trans.Free.html#loc_74_20_74_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_20_74_24&#39;)"><span class="hl_conref"><span class="mpre">PG.Pure</span></span></a><span class="mpre"> </span><a href="#loc_958_24_958_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_958_24_958_25&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
                </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (_, </span><a name="loc_959_27_959_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_959_27_959_30&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="#loc_945_5_945_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_945_5_945_8&#39;)"><span class="hl_varref"><span class="mpre">go0</span></span></a><span class="mpre"> </span><a href="#loc_959_27_959_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_959_27_959_30&#39;)"><span class="hl_varref"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre">
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE _lines #-}</span></span><span class="mpre">

</span><a href="#loc_964_1_964_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_964_1_964_9&#39;)"><span class="mpre">_unlines</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 963, srcSpanStartColumn = 8, srcSpanEndLine = 963, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 963, srcSpanStartColumn = 16, srcSpanEndLine = 963, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">
</span><a name="loc_964_1_964_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_964_1_964_9&#39;)"><span class="hl_vardecl"><span class="mpre">_unlines</span></span></a><span class="mpre"> = </span><a href="Pipes.Group.html#loc_110_1_110_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_110_1_110_8&#39;)"><span class="hl_varref"><span class="mpre">concats</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">.</span></span><span class="mpre"> </span><a href="Pipes.Group.html#loc_223_1_223_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_223_1_223_5&#39;)"><span class="hl_varref"><span class="mpre">PG.maps</span></span></a><span class="mpre"> </span><a href="#loc_966_5_966_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_966_5_966_15&#39;)"><span class="hl_varref"><span class="mpre">addNewline</span></span></a><span class="mpre">
  where
    </span><a name="loc_966_5_966_15" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_966_5_966_15&#39;)"><span class="hl_fundecl"><span class="mpre">addNewline</span></span></a><span class="mpre"> </span><a name="loc_966_16_966_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_966_16_966_17&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><a href="#loc_966_16_966_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_966_16_966_17&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Control.Applicative.html#loc_125_5_125_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Applicative.html#loc_125_5_125_9&#39;)"><span class="hl_infix"><span class="mpre">&lt;*</span></span></a><span class="mpre"> </span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">BS.singleton</span></span><span class="mpre"> </span><a href="#loc_736_1_736_3" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_736_1_736_3&#39;)"><span class="hl_varref"><span class="mpre">nl</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE _unlines #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Convert a bytestream to delimited words

    Note: This function is purely for demonstration purposes since it assumes a
    particular encoding.  You should prefer the &#39;Data.Text.Text&#39; equivalent of
    this function from the @pipes-text@ library.
-}</span></span><span class="mpre">
</span><a href="#loc_976_1_976_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_976_1_976_6&#39;)"><span class="mpre">words</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 975, srcSpanStartColumn = 10, srcSpanEndLine = 975, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 975, srcSpanStartColumn = 18, srcSpanEndLine = 975, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">
</span><a name="loc_976_1_976_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_976_1_976_6&#39;)"><span class="hl_fundecl"><span class="mpre">words</span></span></a><span class="mpre"> </span><a name="loc_976_7_976_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_976_7_976_8&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> = </span><span class="hl_conref"><span class="mpre">PG.FreeT</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
    </span><a name="loc_977_5_977_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_977_5_977_6&#39;)"><span class="hl_vardecl"><span class="mpre">x</span></span></a><span class="mpre"> &lt;- </span><a href="Pipes.html#loc_454_1_454_5" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_454_1_454_5&#39;)"><span class="hl_varref"><span class="mpre">next</span></span></a><span class="mpre"> (</span><a href="#loc_767_1_767_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_767_1_767_10&#39;)"><span class="hl_varref"><span class="mpre">dropWhile</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_560_1_560_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_560_1_560_13&#39;)"><span class="hl_varref"><span class="mpre">isSpaceWord8</span></span></a><span class="mpre"> </span><a href="#loc_976_7_976_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_976_7_976_8&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">)
    </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> case </span><a href="#loc_977_5_977_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_977_5_977_6&#39;)"><span class="hl_varref"><span class="mpre">x</span></span></a><span class="mpre"> of
        </span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre">   </span><a name="loc_979_16_979_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_979_16_979_17&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">       -&gt; </span><a href="Control.Monad.Trans.Free.html#loc_74_20_74_24" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_20_74_24&#39;)"><span class="hl_conref"><span class="mpre">PG.Pure</span></span></a><span class="mpre"> </span><a href="#loc_979_16_979_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_979_16_979_17&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
        </span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> (</span><a name="loc_980_16_980_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_980_16_980_18&#39;)"><span class="hl_vardecl"><span class="mpre">bs</span></span></a><span class="mpre">, </span><a name="loc_980_20_980_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_980_20_980_22&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;</span></span></a><span class="mpre">) -&gt; </span><a href="Control.Monad.Trans.Free.html#loc_74_29_74_33" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_74_29_74_33&#39;)"><span class="hl_conref"><span class="mpre">PG.Free</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> do
            </span><a name="loc_981_13_981_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_981_13_981_16&#39;)"><span class="hl_vardecl"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre"> &lt;- (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><a href="#loc_980_16_980_18" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_980_16_980_18&#39;)"><span class="hl_varref"><span class="mpre">bs</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">&gt;&gt;</span></span><span class="mpre"> </span><a href="#loc_980_20_980_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_980_20_980_22&#39;)"><span class="hl_varref"><span class="mpre">p&#39;</span></span></a><span class="mpre">)</span><a href="#loc_259_3_259_5" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_259_3_259_5&#39;)"><span class="hl_infix"><span class="mpre">^.</span></span></a><a href="#loc_678_1_678_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_678_1_678_6&#39;)"><span class="hl_varref"><span class="mpre">break</span></span></a><span class="mpre"> </span><a href="Data.ByteString.Internal.html#loc_560_1_560_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.ByteString.Internal.html#loc_560_1_560_13&#39;)"><span class="hl_varref"><span class="mpre">isSpaceWord8</span></span></a><span class="mpre">
            </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="#loc_976_1_976_6" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_976_1_976_6&#39;)"><span class="hl_varref"><span class="mpre">words</span></span></a><span class="mpre"> </span><a href="#loc_981_13_981_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_981_13_981_16&#39;)"><span class="hl_varref"><span class="mpre">p&#39;&#39;</span></span></a><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE words #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{-| Convert delimited words back to a byte stream

    Note: This function is purely for demonstration purposes since it assumes a
    particular encoding.  You should prefer the &#39;Data.Text.Text&#39; equivalent of
    this function from the @pipes-text@ library.
-}</span></span><span class="mpre">
</span><a href="#loc_993_1_993_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_993_1_993_8&#39;)"><span class="mpre">unwords</span></a><span class="mpre">
    :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 992, srcSpanStartColumn = 8, srcSpanEndLine = 992, srcSpanEndColumn = 18}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/pipes-bytestring-2.1.0/src/Pipes/ByteString.hs&quot;, srcSpanStartLine = 992, srcSpanStartColumn = 16, srcSpanEndLine = 992, srcSpanEndColumn = 18}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><a href="Control.Monad.Trans.Free.html#loc_154_9_154_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.Trans.Free.html#loc_154_9_154_14&#39;)"><span class="hl_tyconref"><span class="mpre">FreeT</span></span></a><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">Producer</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ByteString</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">x</span></span><span class="mpre">
</span><a name="loc_993_1_993_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_993_1_993_8&#39;)"><span class="hl_vardecl"><span class="mpre">unwords</span></span></a><span class="mpre"> = </span><a href="Pipes.Group.html#loc_126_1_126_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.Group.html#loc_126_1_126_13&#39;)"><span class="hl_varref"><span class="mpre">PG.intercalates</span></span></a><span class="mpre"> (</span><a href="Pipes.html#loc_132_1_132_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Pipes.html#loc_132_1_132_6&#39;)"><span class="hl_varref"><span class="mpre">yield</span></span></a><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">BS.singleton</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fromIntegral</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">$</span></span><span class="mpre"> </span><span class="hl_varref"><span class="mpre">ord</span></span><span class="mpre"> </span><span class="hl_char"><span class="mpre">&#39; &#39;</span></span><span class="mpre">)
</span><span class="hl_comment"><span class="mpre">{-# INLINABLE unwords #-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- $parse
    The following parsing utilities are single-byte analogs of the ones found
    in @pipes-parse@.
-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">{- $reexports
    @Data.ByteString@ re-exports the &#39;ByteString&#39; type.

    @Data.Profunctor@ re-exports the &#39;Profunctor&#39; type.

    @Data.Word@ re-exports the &#39;Word8&#39; type.

    @Pipes.Parse@ re-exports &#39;Parser&#39;.

    @Pipes.Group@ re-exports &#39;concats&#39;, &#39;intercalates&#39;, and &#39;FreeT&#39;
    (the type).
-}</span></span><span class="mpre">
</span></div></body></html>