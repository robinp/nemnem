<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="static/nemnem.css"><script src="static/jquery-2.0.3.min.js"></script><script src="static/nemnem.js"></script></head><body><div id="code"><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Module      :  Network.HTTP</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  See LICENSE file</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Ganesh Sittampalam &lt;ganesh@earth.li&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  experimental</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  non-portable (not tested)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The &#39;Network.HTTP&#39; module provides a simple interface for sending and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- receiving content over HTTP in Haskell. Here&#39;s how to fetch a document from</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- a URL and return it as a String:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;    simpleHTTP (getRequest &quot;http://www.haskell.org/&quot;) &gt;&gt;= fmap (take 100) . getResponseBody</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt;        -- fetch document and return it (as a &#39;String&#39;.)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Other functions let you control the submission and transfer of HTTP</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;Request&#39;s and &#39;Response&#39;s more carefully, letting you integrate the use</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- of &#39;Network.HTTP&#39; functionality into your application.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The module also exports the main types of the package, &#39;Request&#39; and &#39;Response&#39;,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- along with &#39;Header&#39; and functions for working with these.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- The actual functionality is implemented by modules in the @Network.HTTP.*@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- namespace, letting you either use the default implementation here</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- by importing @Network.HTTP@ or, for more specific uses, selectively</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- import the modules in @Network.HTTP.*@. To wit, more than one kind of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- representation of the bulk data that flows across a HTTP connection is </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- supported. (see &quot;Network.HTTP.HandleStream&quot;.)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /NOTE:/ The &#39;Request&#39; send actions will normalize the @Request@ prior to transmission.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Normalization such as having the request path be in the expected form and, possibly,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- introduce a default @Host:@ header if one isn&#39;t already present.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Normalization also takes the @&quot;user:pass\@&quot;@ portion out of the the URI,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- if it was supplied, and converts it into @Authorization: Basic$ header.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you do not </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- want the requests tampered with, but sent as-is, please import and use the</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the &quot;Network.HTTP.HandleStream&quot; or &quot;Network.HTTP.Stream&quot; modules instead. They</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- export the same functions, but leaves construction and any normalization of </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @Request@s to the user.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- /NOTE:/ This package only supports HTTP; it does not support HTTPS.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Attempts to use HTTPS result in an error.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
module Network.HTTP 
       ( module Network.HTTP.Base
       , module Network.HTTP.Headers

         </span><span class="hl_comment"><span class="mpre">{- the functionality that the implementation modules, 
            Network.HTTP.HandleStream and Network.HTTP.Stream,
            exposes:
         -}</span></span><span class="mpre">
       , simpleHTTP      </span><span class="hl_comment"><span class="mpre">-- :: Request -&gt; IO (Result Response)</span></span><span class="mpre">
       , simpleHTTP_     </span><span class="hl_comment"><span class="mpre">-- :: Stream s =&gt; s -&gt; Request -&gt; IO (Result Response)</span></span><span class="mpre">
       , sendHTTP        </span><span class="hl_comment"><span class="mpre">-- :: Stream s =&gt; s -&gt; Request -&gt; IO (Result Response)</span></span><span class="mpre">
       , sendHTTP_notify </span><span class="hl_comment"><span class="mpre">-- :: Stream s =&gt; s -&gt; Request -&gt; IO () -&gt; IO (Result Response)</span></span><span class="mpre">
       , receiveHTTP     </span><span class="hl_comment"><span class="mpre">-- :: Stream s =&gt; s -&gt; IO (Result Request)</span></span><span class="mpre">
       , respondHTTP     </span><span class="hl_comment"><span class="mpre">-- :: Stream s =&gt; s -&gt; Response -&gt; IO ()</span></span><span class="mpre">

       , module Network.TCP
       
       , getRequest      </span><span class="hl_comment"><span class="mpre">-- :: String -&gt; Request_String</span></span><span class="mpre">
       , headRequest     </span><span class="hl_comment"><span class="mpre">-- :: String -&gt; Request_String</span></span><span class="mpre">
       , postRequest     </span><span class="hl_comment"><span class="mpre">-- :: String -&gt; Request_String</span></span><span class="mpre">
       , postRequestWithBody </span><span class="hl_comment"><span class="mpre">-- :: String -&gt; String -&gt; String -&gt; Request_String</span></span><span class="mpre">
       
       , getResponseBody </span><span class="hl_comment"><span class="mpre">-- :: Result (Request ty) -&gt; IO ty</span></span><span class="mpre">
       , getResponseCode </span><span class="hl_comment"><span class="mpre">-- :: Result (Request ty) -&gt; IO ResponseCode</span></span><span class="mpre">
       ) where

</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">------------------ Imports --------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------</span></span><span class="mpre">

import Network.HTTP.Headers
import Network.HTTP.Base
import qualified Network.HTTP.HandleStream as S
</span><span class="hl_comment"><span class="mpre">-- old implementation: import Network.HTTP.Stream</span></span><span class="mpre">
import </span><span class="warning" data-warning="Module not foundModuleName (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 81, srcSpanStartColumn = 8, srcSpanEndLine = 81, srcSpanEndColumn = 19}, srcInfoPoints = []}) &quot;Network.TCP&quot;"><span class="mpre">Network.TCP</span></span><span class="mpre">
import Network.Stream ( Result )
import Network.URI    ( </span><a href="Network.URI.html#loc_225_1_225_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.URI.html#loc_225_1_225_9&#39;)"><span class="mpre">parseURI</span></a><span class="mpre"> )

import Data.Maybe ( </span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="mpre">fromMaybe</span></a><span class="mpre"> )

</span><span class="hl_comment"><span class="mpre">{-
 Note: if you switch over/back to using Network.HTTP.Stream here, you&#39;ll
 have to wrap the results from &#39;openStream&#39; as Connections via &#39;hstreamToConnection&#39;
 prior to delegating to the Network.HTTP.Stream functions.
-}</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @simpleHTTP req@ transmits the &#39;Request&#39; @req@ by opening a /direct/, non-persistent</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- connection to the HTTP server that @req@ is destined for, followed by transmitting</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it and gathering up the response as a &#39;Result&#39;. Prior to sending the request,</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- it is normalized (via &#39;normalizeRequest&#39;). If you have to mediate the request</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- via an HTTP proxy, you will have to normalize the request yourself. Or switch to</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- using &#39;Network.Browser&#39; instead.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Examples:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; simpleHTTP (getRequest &quot;http://hackage.haskell.org/&quot;)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &gt; simpleHTTP (getRequest &quot;http://hackage.haskell.org:8012/&quot;)</span></span><span class="mpre">

</span><a href="#loc_106_1_106_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_1_106_11&#39;)"><span class="mpre">simpleHTTP</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxParen (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 105, srcSpanStartColumn = 15, srcSpanEndLine = 105, srcSpanEndColumn = 30}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 105, srcSpanStartColumn = 15, srcSpanEndLine = 105, srcSpanEndColumn = 16},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 105, src"><span class="mpre">(HStream ty) =&gt;</span></span><span class="mpre"> </span><a href="Network.HTTP.Base.html#loc_292_6_292_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_292_6_292_13&#39;)"><span class="hl_tyconref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Result</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_339_6_339_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_339_6_339_14&#39;)"><span class="hl_tyconref"><span class="mpre">Response</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">))
</span><a name="loc_106_1_106_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_1_106_11&#39;)"><span class="hl_fundecl"><span class="mpre">simpleHTTP</span></span></a><span class="mpre"> </span><a name="loc_106_12_106_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_12_106_13&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = do
  </span><a name="loc_107_3_107_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_3_107_7&#39;)"><span class="hl_vardecl"><span class="mpre">auth</span></span></a><span class="mpre"> &lt;- </span><a href="Network.HTTP.Base.html#loc_717_1_717_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_717_1_717_8&#39;)"><span class="hl_varref"><span class="mpre">getAuth</span></span></a><span class="mpre"> </span><a href="#loc_106_12_106_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_12_106_13&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
  </span><a href="Network.HTTP.Base.html#loc_213_1_213_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_213_1_213_10&#39;)"><span class="hl_varref"><span class="mpre">failHTTPS</span></span></a><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_293_16_293_21" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_293_16_293_21&#39;)"><span class="hl_varref"><span class="mpre">rqURI</span></span></a><span class="mpre"> </span><a href="#loc_106_12_106_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_12_106_13&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)
  </span><a name="loc_109_3_109_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_3_109_4&#39;)"><span class="hl_vardecl"><span class="mpre">c</span></span></a><span class="mpre"> &lt;- </span><span class="hl_varref"><span class="mpre">openStream</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_140_36_140_40" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_140_36_140_40&#39;)"><span class="hl_varref"><span class="mpre">host</span></span></a><span class="mpre"> </span><a href="#loc_107_3_107_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_3_107_7&#39;)"><span class="hl_varref"><span class="mpre">auth</span></span></a><span class="mpre">) (</span><a href="Data.Maybe.html#loc_98_1_98_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Maybe.html#loc_98_1_98_10&#39;)"><span class="hl_varref"><span class="mpre">fromMaybe</span></span></a><span class="mpre"> </span><span class="hl_num"><span class="mpre">80</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_141_36_141_40" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_141_36_141_40&#39;)"><span class="hl_varref"><span class="mpre">port</span></span></a><span class="mpre"> </span><a href="#loc_107_3_107_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_107_3_107_7&#39;)"><span class="hl_varref"><span class="mpre">auth</span></span></a><span class="mpre">))
  let </span><a name="loc_110_7_110_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_7_110_13&#39;)"><span class="hl_vardecl"><span class="mpre">norm_r</span></span></a><span class="mpre"> = </span><a href="Network.HTTP.Base.html#loc_763_1_763_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_763_1_763_17&#39;)"><span class="hl_varref"><span class="mpre">normalizeRequest</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 110, srcSpanStartColumn = 33, srcSpanEndLine = 110, srcSpanEndColumn = 81}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 110, srcSpanStartColumn = 63, srcSpanEndLine = 110, srcSpanEndColumn = 64},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 110, s"><span class="mpre">defaultNormalizeRequestOptions{normDoClose=True}</span></span><span class="mpre"> </span><a href="#loc_106_12_106_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_106_12_106_13&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
  </span><a href="#loc_115_1_115_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_1_115_12&#39;)"><span class="hl_varref"><span class="mpre">simpleHTTP_</span></span></a><span class="mpre"> </span><a href="#loc_109_3_109_4" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_109_3_109_4&#39;)"><span class="hl_varref"><span class="mpre">c</span></span></a><span class="mpre"> </span><a href="#loc_110_7_110_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_110_7_110_13&#39;)"><span class="hl_varref"><span class="mpre">norm_r</span></span></a><span class="mpre">
   
</span><span class="hl_comment"><span class="mpre">-- | Identical to &#39;simpleHTTP&#39;, but acting on an already opened stream.</span></span><span class="mpre">
</span><a href="#loc_115_1_115_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_1_115_12&#39;)"><span class="mpre">simpleHTTP_</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 114, srcSpanStartColumn = 16, srcSpanEndLine = 114, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 114, srcSpanStartColumn = 27, srcSpanEndLine = 114, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Netwo"><span class="mpre">HStream ty =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">HandleStream</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre"> -&gt; </span><a href="Network.HTTP.Base.html#loc_292_6_292_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_292_6_292_13&#39;)"><span class="hl_tyconref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Result</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_339_6_339_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_339_6_339_14&#39;)"><span class="hl_tyconref"><span class="mpre">Response</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">))
</span><a name="loc_115_1_115_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_1_115_12&#39;)"><span class="hl_fundecl"><span class="mpre">simpleHTTP_</span></span></a><span class="mpre"> </span><a name="loc_115_13_115_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_13_115_14&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><a name="loc_115_15_115_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_15_115_16&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre"> = do 
  let </span><a name="loc_116_7_116_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_7_116_13&#39;)"><span class="hl_vardecl"><span class="mpre">norm_r</span></span></a><span class="mpre"> = </span><a href="Network.HTTP.Base.html#loc_763_1_763_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_763_1_763_17&#39;)"><span class="hl_varref"><span class="mpre">normalizeRequest</span></span></a><span class="mpre"> </span><span class="warning" data-warning="ExpRecUpdate (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 116, srcSpanStartColumn = 33, srcSpanEndLine = 116, srcSpanEndColumn = 81}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 116, srcSpanStartColumn = 63, srcSpanEndLine = 116, srcSpanEndColumn = 64},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 116, s"><span class="mpre">defaultNormalizeRequestOptions{normDoClose=True}</span></span><span class="mpre"> </span><a href="#loc_115_15_115_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_15_115_16&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">
  </span><a href="Network.HTTP.HandleStream.html#loc_79_1_79_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.HandleStream.html#loc_79_1_79_9&#39;)"><span class="hl_varref"><span class="mpre">S.sendHTTP</span></span></a><span class="mpre"> </span><a href="#loc_115_13_115_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_115_13_115_14&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre"> </span><a href="#loc_116_7_116_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_116_7_116_13&#39;)"><span class="hl_varref"><span class="mpre">norm_r</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @sendHTTP hStream httpRequest@ transmits @httpRequest@ (after normalization) over</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @hStream@, but does not alter the status of the connection, nor request it to be</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- closed upon receiving the response.</span></span><span class="mpre">
</span><a href="#loc_123_1_123_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_1_123_9&#39;)"><span class="mpre">sendHTTP</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 122, srcSpanStartColumn = 13, srcSpanEndLine = 122, srcSpanEndColumn = 26}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 122, srcSpanStartColumn = 24, srcSpanEndLine = 122, srcSpanEndColumn = 26}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Netwo"><span class="mpre">HStream ty =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">HandleStream</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre"> -&gt; </span><a href="Network.HTTP.Base.html#loc_292_6_292_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_292_6_292_13&#39;)"><span class="hl_tyconref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Result</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_339_6_339_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_339_6_339_14&#39;)"><span class="hl_tyconref"><span class="mpre">Response</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">))
</span><a name="loc_123_1_123_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_1_123_9&#39;)"><span class="hl_fundecl"><span class="mpre">sendHTTP</span></span></a><span class="mpre"> </span><a name="loc_123_10_123_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_10_123_14&#39;)"><span class="hl_vardecl"><span class="mpre">conn</span></span></a><span class="mpre"> </span><a name="loc_123_15_123_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_15_123_17&#39;)"><span class="hl_vardecl"><span class="mpre">rq</span></span></a><span class="mpre"> = do
  let </span><a name="loc_124_7_124_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_7_124_13&#39;)"><span class="hl_vardecl"><span class="mpre">norm_r</span></span></a><span class="mpre"> = </span><a href="Network.HTTP.Base.html#loc_763_1_763_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_763_1_763_17&#39;)"><span class="hl_varref"><span class="mpre">normalizeRequest</span></span></a><span class="mpre"> </span><a href="Network.HTTP.Base.html#loc_750_1_750_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_750_1_750_31&#39;)"><span class="hl_varref"><span class="mpre">defaultNormalizeRequestOptions</span></span></a><span class="mpre"> </span><a href="#loc_123_15_123_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_15_123_17&#39;)"><span class="hl_varref"><span class="mpre">rq</span></span></a><span class="mpre"> 
  </span><a href="Network.HTTP.HandleStream.html#loc_79_1_79_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.HandleStream.html#loc_79_1_79_9&#39;)"><span class="hl_varref"><span class="mpre">S.sendHTTP</span></span></a><span class="mpre"> </span><a href="#loc_123_10_123_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_123_10_123_14&#39;)"><span class="hl_varref"><span class="mpre">conn</span></span></a><span class="mpre"> </span><a href="#loc_124_7_124_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_124_7_124_13&#39;)"><span class="hl_varref"><span class="mpre">norm_r</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @sendHTTP_notify hStream httpRequest action@ behaves like &#39;sendHTTP&#39;, but</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- lets you supply an IO @action@ to execute once the request has been successfully</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- transmitted over the connection. Useful when you want to set up tracing of</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- request transmission and its performance.</span></span><span class="mpre">
</span><a href="#loc_136_1_136_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_16&#39;)"><span class="mpre">sendHTTP_notify</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 131, srcSpanStartColumn = 20, srcSpanEndLine = 132, srcSpanEndColumn = 19}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 132, srcSpanStartColumn = 17, srcSpanEndLine = 132, srcSpanEndColumn = 19}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Netwo"><span class="mpre">HStream ty
                =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">HandleStream</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">
                -&gt; </span><a href="Network.HTTP.Base.html#loc_292_6_292_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_292_6_292_13&#39;)"><span class="hl_tyconref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">
                -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
                -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Result</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_339_6_339_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_339_6_339_14&#39;)"><span class="hl_tyconref"><span class="mpre">Response</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">))
</span><a name="loc_136_1_136_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_1_136_16&#39;)"><span class="hl_fundecl"><span class="mpre">sendHTTP_notify</span></span></a><span class="mpre"> </span><a name="loc_136_17_136_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_17_136_21&#39;)"><span class="hl_vardecl"><span class="mpre">conn</span></span></a><span class="mpre"> </span><a name="loc_136_22_136_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_22_136_24&#39;)"><span class="hl_vardecl"><span class="mpre">rq</span></span></a><span class="mpre"> </span><a name="loc_136_25_136_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_25_136_39&#39;)"><span class="hl_vardecl"><span class="mpre">onSendComplete</span></span></a><span class="mpre"> = do
  let </span><a name="loc_137_7_137_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_7_137_13&#39;)"><span class="hl_vardecl"><span class="mpre">norm_r</span></span></a><span class="mpre"> = </span><a href="Network.HTTP.Base.html#loc_763_1_763_17" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_763_1_763_17&#39;)"><span class="hl_varref"><span class="mpre">normalizeRequest</span></span></a><span class="mpre"> </span><a href="Network.HTTP.Base.html#loc_750_1_750_31" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_750_1_750_31&#39;)"><span class="hl_varref"><span class="mpre">defaultNormalizeRequestOptions</span></span></a><span class="mpre"> </span><a href="#loc_136_22_136_24" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_22_136_24&#39;)"><span class="hl_varref"><span class="mpre">rq</span></span></a><span class="mpre"> 
  </span><a href="Network.HTTP.HandleStream.html#loc_90_1_90_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.HandleStream.html#loc_90_1_90_16&#39;)"><span class="hl_varref"><span class="mpre">S.sendHTTP_notify</span></span></a><span class="mpre"> </span><a href="#loc_136_17_136_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_17_136_21&#39;)"><span class="hl_varref"><span class="mpre">conn</span></span></a><span class="mpre"> </span><a href="#loc_137_7_137_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_137_7_137_13&#39;)"><span class="hl_varref"><span class="mpre">norm_r</span></span></a><span class="mpre"> </span><a href="#loc_136_25_136_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_136_25_136_39&#39;)"><span class="hl_varref"><span class="mpre">onSendComplete</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @receiveHTTP hStream@ reads a &#39;Request&#39; from the &#39;HandleStream&#39; @hStream@</span></span><span class="mpre">
</span><a href="#loc_142_1_142_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_1_142_12&#39;)"><span class="mpre">receiveHTTP</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 141, srcSpanStartColumn = 16, srcSpanEndLine = 141, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 141, srcSpanStartColumn = 27, srcSpanEndLine = 141, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Netwo"><span class="mpre">HStream ty =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">HandleStream</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> (</span><span class="hl_tyconref"><span class="mpre">Result</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_292_6_292_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_292_6_292_13&#39;)"><span class="hl_tyconref"><span class="mpre">Request</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">))
</span><a name="loc_142_1_142_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_1_142_12&#39;)"><span class="hl_fundecl"><span class="mpre">receiveHTTP</span></span></a><span class="mpre"> </span><a name="loc_142_13_142_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_13_142_17&#39;)"><span class="hl_vardecl"><span class="mpre">conn</span></span></a><span class="mpre"> = </span><a href="Network.HTTP.HandleStream.html#loc_204_1_204_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.HandleStream.html#loc_204_1_204_12&#39;)"><span class="hl_varref"><span class="mpre">S.receiveHTTP</span></span></a><span class="mpre"> </span><a href="#loc_142_13_142_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_142_13_142_17&#39;)"><span class="hl_varref"><span class="mpre">conn</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | @respondHTTP hStream httpResponse@ transmits an HTTP &#39;Response&#39; over</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the &#39;HandleStream&#39; @hStream@. It could be used to implement simple web</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- server interactions, performing the dual role to &#39;sendHTTP&#39;.</span></span><span class="mpre">
</span><a href="#loc_148_1_148_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_12&#39;)"><span class="mpre">respondHTTP</span></a><span class="mpre"> :: </span><span class="warning" data-warning="ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 147, srcSpanStartColumn = 16, srcSpanEndLine = 147, srcSpanEndColumn = 29}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Network/HTTP.hs&quot;, srcSpanStartLine = 147, srcSpanStartColumn = 27, srcSpanEndLine = 147, srcSpanEndColumn = 29}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/HTTP-4000.2.17/Netwo"><span class="mpre">HStream ty =&gt;</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">HandleStream</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre"> -&gt; </span><a href="Network.HTTP.Base.html#loc_339_6_339_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_339_6_339_14&#39;)"><span class="hl_tyconref"><span class="mpre">Response</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre"> -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">()</span></span><span class="mpre">
</span><a name="loc_148_1_148_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_1_148_12&#39;)"><span class="hl_fundecl"><span class="mpre">respondHTTP</span></span></a><span class="mpre"> </span><a name="loc_148_13_148_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_13_148_17&#39;)"><span class="hl_vardecl"><span class="mpre">conn</span></span></a><span class="mpre"> </span><a name="loc_148_18_148_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_18_148_21&#39;)"><span class="hl_vardecl"><span class="mpre">rsp</span></span></a><span class="mpre"> = </span><a href="Network.HTTP.HandleStream.html#loc_234_1_234_12" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.HandleStream.html#loc_234_1_234_12&#39;)"><span class="hl_varref"><span class="mpre">S.respondHTTP</span></span></a><span class="mpre"> </span><a href="#loc_148_13_148_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_13_148_17&#39;)"><span class="hl_varref"><span class="mpre">conn</span></span></a><span class="mpre"> </span><a href="#loc_148_18_148_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_148_18_148_21&#39;)"><span class="hl_varref"><span class="mpre">rsp</span></span></a><span class="mpre">


</span><span class="hl_comment"><span class="mpre">-- | A convenience constructor for a GET &#39;Request&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the URL isn\&#39;t syntactically valid, the function raises an error.</span></span><span class="mpre">
</span><a href="#loc_157_1_157_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_1_157_11&#39;)"><span class="mpre">getRequest</span></a><span class="mpre">
    :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">             </span><span class="hl_comment"><span class="mpre">-- ^URL to fetch</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Request_String</span></span><span class="mpre">     </span><span class="hl_comment"><span class="mpre">-- ^The constructed request</span></span><span class="mpre">
</span><a name="loc_157_1_157_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_1_157_11&#39;)"><span class="hl_fundecl"><span class="mpre">getRequest</span></span></a><span class="mpre"> </span><a name="loc_157_12_157_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_12_157_21&#39;)"><span class="hl_vardecl"><span class="mpre">urlString</span></span></a><span class="mpre"> = 
  case </span><a href="Network.URI.html#loc_225_1_225_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.URI.html#loc_225_1_225_9&#39;)"><span class="hl_varref"><span class="mpre">parseURI</span></span></a><span class="mpre"> </span><a href="#loc_157_12_157_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_12_157_21&#39;)"><span class="hl_varref"><span class="mpre">urlString</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;getRequest: Not a valid URL - &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_157_12_157_21" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_12_157_21&#39;)"><span class="hl_varref"><span class="mpre">urlString</span></span></a><span class="mpre">)
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_160_10_160_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_10_160_11&#39;)"><span class="hl_vardecl"><span class="mpre">u</span></span></a><span class="mpre">  -&gt; </span><a href="Network.HTTP.Base.html#loc_395_1_395_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_395_1_395_10&#39;)"><span class="hl_varref"><span class="mpre">mkRequest</span></span></a><span class="mpre"> </span><a href="Network.HTTP.Base.html#loc_250_35_250_38" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_250_35_250_38&#39;)"><span class="hl_conref"><span class="mpre">GET</span></span></a><span class="mpre"> </span><a href="#loc_160_10_160_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_160_10_160_11&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A convenience constructor for a HEAD &#39;Request&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the URL isn\&#39;t syntactically valid, the function raises an error.</span></span><span class="mpre">
</span><a href="#loc_168_1_168_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_1_168_12&#39;)"><span class="mpre">headRequest</span></a><span class="mpre">
    :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">             </span><span class="hl_comment"><span class="mpre">-- ^URL to fetch</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Request_String</span></span><span class="mpre">     </span><span class="hl_comment"><span class="mpre">-- ^The constructed request</span></span><span class="mpre">
</span><a name="loc_168_1_168_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_1_168_12&#39;)"><span class="hl_fundecl"><span class="mpre">headRequest</span></span></a><span class="mpre"> </span><a name="loc_168_13_168_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_13_168_22&#39;)"><span class="hl_vardecl"><span class="mpre">urlString</span></span></a><span class="mpre"> = 
  case </span><a href="Network.URI.html#loc_225_1_225_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.URI.html#loc_225_1_225_9&#39;)"><span class="hl_varref"><span class="mpre">parseURI</span></span></a><span class="mpre"> </span><a href="#loc_168_13_168_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_13_168_22&#39;)"><span class="hl_varref"><span class="mpre">urlString</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;headRequest: Not a valid URL - &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_168_13_168_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_168_13_168_22&#39;)"><span class="hl_varref"><span class="mpre">urlString</span></span></a><span class="mpre">)
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_171_10_171_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_10_171_11&#39;)"><span class="hl_vardecl"><span class="mpre">u</span></span></a><span class="mpre">  -&gt; </span><a href="Network.HTTP.Base.html#loc_395_1_395_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_395_1_395_10&#39;)"><span class="hl_varref"><span class="mpre">mkRequest</span></span></a><span class="mpre"> </span><a href="Network.HTTP.Base.html#loc_250_22_250_26" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_250_22_250_26&#39;)"><span class="hl_conref"><span class="mpre">HEAD</span></span></a><span class="mpre"> </span><a href="#loc_171_10_171_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_171_10_171_11&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A convenience constructor for a POST &#39;Request&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the URL isn\&#39;t syntactically valid, the function raises an error.</span></span><span class="mpre">
</span><a href="#loc_179_1_179_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_1_179_12&#39;)"><span class="mpre">postRequest</span></a><span class="mpre">
    :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">                   </span><span class="hl_comment"><span class="mpre">-- ^URL to POST to</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Request_String</span></span><span class="mpre">           </span><span class="hl_comment"><span class="mpre">-- ^The constructed request</span></span><span class="mpre">
</span><a name="loc_179_1_179_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_1_179_12&#39;)"><span class="hl_fundecl"><span class="mpre">postRequest</span></span></a><span class="mpre"> </span><a name="loc_179_13_179_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_13_179_22&#39;)"><span class="hl_vardecl"><span class="mpre">urlString</span></span></a><span class="mpre"> = 
  case </span><a href="Network.URI.html#loc_225_1_225_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.URI.html#loc_225_1_225_9&#39;)"><span class="hl_varref"><span class="mpre">parseURI</span></span></a><span class="mpre"> </span><a href="#loc_179_13_179_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_13_179_22&#39;)"><span class="hl_varref"><span class="mpre">urlString</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;postRequest: Not a valid URL - &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_179_13_179_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_179_13_179_22&#39;)"><span class="hl_varref"><span class="mpre">urlString</span></span></a><span class="mpre">)
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_182_10_182_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_10_182_11&#39;)"><span class="hl_vardecl"><span class="mpre">u</span></span></a><span class="mpre">  -&gt; </span><a href="Network.HTTP.Base.html#loc_395_1_395_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_395_1_395_10&#39;)"><span class="hl_varref"><span class="mpre">mkRequest</span></span></a><span class="mpre"> </span><a href="Network.HTTP.Base.html#loc_250_41_250_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_250_41_250_45&#39;)"><span class="hl_conref"><span class="mpre">POST</span></span></a><span class="mpre"> </span><a href="#loc_182_10_182_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_182_10_182_11&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | A convenience constructor for a POST &#39;Request&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- It constructs a request and sets the body as well as</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- the Content-Type and Content-Length headers. The contents of the body</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- are forced to calculate the value for the Content-Length header.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If the URL isn\&#39;t syntactically valid, the function raises an error.</span></span><span class="mpre">
</span><a href="#loc_196_1_196_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_1_196_20&#39;)"><span class="mpre">postRequestWithBody</span></a><span class="mpre">
    :: </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">                      </span><span class="hl_comment"><span class="mpre">-- ^URL to POST to</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">                      </span><span class="hl_comment"><span class="mpre">-- ^Content-Type of body</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">String</span></span><span class="mpre">                      </span><span class="hl_comment"><span class="mpre">-- ^The body of the request</span></span><span class="mpre">
    -&gt; </span><span class="hl_tyconref"><span class="mpre">Request_String</span></span><span class="mpre">              </span><span class="hl_comment"><span class="mpre">-- ^The constructed request</span></span><span class="mpre">
</span><a name="loc_196_1_196_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_1_196_20&#39;)"><span class="hl_fundecl"><span class="mpre">postRequestWithBody</span></span></a><span class="mpre"> </span><a name="loc_196_21_196_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_21_196_30&#39;)"><span class="hl_vardecl"><span class="mpre">urlString</span></span></a><span class="mpre"> </span><a name="loc_196_31_196_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_31_196_34&#39;)"><span class="hl_vardecl"><span class="mpre">typ</span></span></a><span class="mpre"> </span><a name="loc_196_35_196_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_35_196_39&#39;)"><span class="hl_vardecl"><span class="mpre">body</span></span></a><span class="mpre"> = 
  case </span><a href="Network.URI.html#loc_225_1_225_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.URI.html#loc_225_1_225_9&#39;)"><span class="hl_varref"><span class="mpre">parseURI</span></span></a><span class="mpre"> </span><a href="#loc_196_21_196_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_21_196_30&#39;)"><span class="hl_varref"><span class="mpre">urlString</span></span></a><span class="mpre"> of
    </span><span class="hl_conref"><span class="mpre">Nothing</span></span><span class="mpre"> -&gt; </span><span class="hl_varref"><span class="mpre">error</span></span><span class="mpre"> (</span><span class="hl_string"><span class="mpre">&quot;postRequestWithBody: Not a valid URL - &quot;</span></span><span class="mpre"> </span><span class="hl_infix"><span class="mpre">++</span></span><span class="mpre"> </span><a href="#loc_196_21_196_30" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_21_196_30&#39;)"><span class="hl_varref"><span class="mpre">urlString</span></span></a><span class="mpre">)
    </span><span class="hl_conref"><span class="mpre">Just</span></span><span class="mpre"> </span><a name="loc_199_10_199_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_10_199_11&#39;)"><span class="hl_vardecl"><span class="mpre">u</span></span></a><span class="mpre">  -&gt; </span><a href="Network.HTTP.Base.html#loc_410_1_410_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_410_1_410_15&#39;)"><span class="hl_varref"><span class="mpre">setRequestBody</span></span></a><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_395_1_395_10" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_395_1_395_10&#39;)"><span class="hl_varref"><span class="mpre">mkRequest</span></span></a><span class="mpre"> </span><a href="Network.HTTP.Base.html#loc_250_41_250_45" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_250_41_250_45&#39;)"><span class="hl_conref"><span class="mpre">POST</span></span></a><span class="mpre"> </span><a href="#loc_199_10_199_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_199_10_199_11&#39;)"><span class="hl_varref"><span class="mpre">u</span></span></a><span class="mpre">) (</span><a href="#loc_196_31_196_34" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_31_196_34&#39;)"><span class="hl_varref"><span class="mpre">typ</span></span></a><span class="mpre">, </span><a href="#loc_196_35_196_39" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_35_196_39&#39;)"><span class="hl_varref"><span class="mpre">body</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | @getResponseBody response@ takes the response of a HTTP requesting action and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- tries to extricate the body of the &#39;Response&#39; @response@. If the request action</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returned an error, an IO exception is raised.</span></span><span class="mpre">
</span><a href="#loc_205_1_205_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_1_205_16&#39;)"><span class="mpre">getResponseBody</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Result</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_339_6_339_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_339_6_339_14&#39;)"><span class="hl_tyconref"><span class="mpre">Response</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">
</span><a name="loc_205_1_205_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_1_205_16&#39;)"><span class="hl_fundecl"><span class="mpre">getResponseBody</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_205_23_205_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_23_205_26&#39;)"><span class="hl_vardecl"><span class="mpre">err</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">fail</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_205_23_205_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_23_205_26&#39;)"><span class="hl_varref"><span class="mpre">err</span></span></a><span class="mpre">)
</span><a href="#loc_205_1_205_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_205_1_205_16&#39;)"><span class="hl_fundecl"><span class="mpre">getResponseBody</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_206_24_206_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_24_206_25&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">)  = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_343_16_343_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_343_16_343_23&#39;)"><span class="hl_varref"><span class="mpre">rspBody</span></span></a><span class="mpre"> </span><a href="#loc_206_24_206_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_206_24_206_25&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)

</span><span class="hl_comment"><span class="mpre">-- | @getResponseBody response@ takes the response of a HTTP requesting action and</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- tries to extricate the status code of the &#39;Response&#39; @response@. If the request action</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- returned an error, an IO exception is raised.</span></span><span class="mpre">
</span><a href="#loc_212_1_212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_1_212_16&#39;)"><span class="mpre">getResponseCode</span></a><span class="mpre"> :: </span><span class="hl_tyconref"><span class="mpre">Result</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_339_6_339_14" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_339_6_339_14&#39;)"><span class="hl_tyconref"><span class="mpre">Response</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">ty</span></span><span class="mpre">) -&gt; </span><span class="hl_tyconref"><span class="mpre">IO</span></span><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">ResponseCode</span></span><span class="mpre">
</span><a name="loc_212_1_212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_1_212_16&#39;)"><span class="hl_fundecl"><span class="mpre">getResponseCode</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Left</span></span><span class="mpre"> </span><a name="loc_212_23_212_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_23_212_26&#39;)"><span class="hl_vardecl"><span class="mpre">err</span></span></a><span class="mpre">) = </span><span class="hl_varref"><span class="mpre">fail</span></span><span class="mpre"> (</span><span class="hl_varref"><span class="mpre">show</span></span><span class="mpre"> </span><a href="#loc_212_23_212_26" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_23_212_26&#39;)"><span class="hl_varref"><span class="mpre">err</span></span></a><span class="mpre">)
</span><a href="#loc_212_1_212_16" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_212_1_212_16&#39;)"><span class="hl_fundecl"><span class="mpre">getResponseCode</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Right</span></span><span class="mpre"> </span><a name="loc_213_24_213_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_24_213_25&#39;)"><span class="hl_vardecl"><span class="mpre">r</span></span></a><span class="mpre">)  = </span><span class="hl_varref"><span class="mpre">return</span></span><span class="mpre"> (</span><a href="Network.HTTP.Base.html#loc_340_16_340_23" onmouseover="nemnem.highlightLocalToRemote(&#39;Network.HTTP.Base.html#loc_340_16_340_23&#39;)"><span class="hl_varref"><span class="mpre">rspCode</span></span></a><span class="mpre"> </span><a href="#loc_213_24_213_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_213_24_213_25&#39;)"><span class="hl_varref"><span class="mpre">r</span></span></a><span class="mpre">)


</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * TODO</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     - request pipelining</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     - https upgrade (includes full TLS, i.e. SSL, implementation)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--         - use of Stream classes will pay off</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--         - consider C implementation of encryption\/decryption</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     - comm timeouts</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     - MIME &amp; entity stuff (happening in separate module)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     - support \&quot;*\&quot; uri-request-string for OPTIONS request method</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Header notes:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     [@Host@]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  Required by HTTP\/1.1, if not supplied as part</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  of a request a default Host value is extracted</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  from the request-uri.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     [@Connection@] </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  If this header is present in any request or</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  response, and it&#39;s value is &quot;close&quot;, then</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  the current request\/response is the last </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  to be allowed on that connection.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     [@Expect@]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  Should a request contain a body, an Expect</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  header will be added to the request.  The added</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  header has the value \&quot;100-continue\&quot;.  After</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  a 417 \&quot;Expectation Failed\&quot; response the request</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  is attempted again without this added Expect</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  header.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--     [@TransferEncoding,ContentLength,...@]</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  if request is inconsistent with any of these</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  header values then you may not receive any response</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--                  or will generate an error response (probably 4xx).</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- * Response code notes</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Some response codes induce special behaviour:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   [@1xx@]   \&quot;100 Continue\&quot; will cause any unsent request body to be sent.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--             \&quot;101 Upgrade\&quot; will be returned.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--             Other 1xx responses are ignored.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- </span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--   [@417@]   The reason for this code is \&quot;Expectation failed\&quot;, indicating</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--             that the server did not like the Expect \&quot;100-continue\&quot; header</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--             added to a request.  Receipt of 417 will induce another</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--             request attempt (without Expect header), unless no Expect header</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--             had been added (in which case 417 response is returned).</span></span><span class="mpre">
</span></div></body></html>