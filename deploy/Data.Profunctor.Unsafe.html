<html><head><title>NemNem</title><link rel="stylesheet" type="text/css" href="/static/nemnem.css"><script src="/static/jquery-2.0.3.min.js"></script><script src="/static/nemnem.js"></script></head><body><div id="code"><span class="mpre">{-# LANGUAGE CPP #-}
#if defined(__GLASGOW_HASKELL__) &amp;&amp; __GLASGOW_HASKELL__ &gt;= 702
{-# LANGUAGE Unsafe #-}
#endif
</span><span class="hl_comment"><span class="mpre">-----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- |</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Copyright   :  (C) 2011-2013 Edward Kmett</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- License     :  BSD-style (see the file LICENSE)</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Stability   :  provisional</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Portability :  portable</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- For a good explanation of profunctors in Haskell see Dan Piponi&#39;s article:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &lt;http://blog.sigfpe.com/2011/07/profunctors-in-haskell.html&gt;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- This module includes /unsafe/ composition operators that are useful in</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- practice when it comes to generating optimal core in GHC.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you import this module you are taking upon yourself the obligation</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that you will only call the operators with @#@ in their names with functions</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- that are operationally identity such as @newtype@ constructors or the field</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- accessor of a @newtype@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you are ever in doubt, use &#39;rmap&#39; or &#39;lmap&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
module Data.Profunctor.Unsafe
  (
  </span><span class="hl_comment"><span class="mpre">-- * Profunctors</span></span><span class="mpre">
    Profunctor(..)
  ) where

import Control.Arrow
import Control.Category
import Control.Comonad (</span><a href="Control.Comonad.html#loc_307_9_307_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_307_9_307_18&#39;)"><span class="mpre">Cokleisli</span></a><span class="mpre">(..))
import Control.Monad (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="mpre">liftM</span></a><span class="mpre">)
import Data.Tagged
import Prelude hiding (id,(.),</span><a href="Control.Monad.html#loc_98_1_98_9" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_98_1_98_9&#39;)"><span class="mpre">sequence</span></a><span class="mpre">)
import Unsafe.Coerce

</span><span class="warning" data-warning="DeclAnnPragma (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 42, srcSpanStartColumn = 1, srcSpanEndLine = 42, srcSpanEndColumn = 52}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 42, srcSpanStartColumn = 1, srcSpanEndLine = 42, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Prof"><span class="mpre">{-# ANN module &quot;Hlint: ignore Redundant lambda&quot; #-}</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclAnnPragma (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 1, srcSpanEndLine = 43, srcSpanEndColumn = 52}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 43, srcSpanStartColumn = 1, srcSpanEndLine = 43, srcSpanEndColumn = 8},SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Prof"><span class="mpre">{-# ANN module &quot;Hlint: ignore Collapse lambdas&quot; #-}</span></span><span class="mpre">

</span><span class="warning" data-warning="DeclInfixDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 45, srcSpanStartColumn = 1, srcSpanEndLine = 45, srcSpanEndColumn = 12}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 45, srcSpanStartColumn = 8, srcSpanEndLine = 45, srcSpanEndColumn = 9}]}) (AssocRight (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/"><span class="mpre">infixr 9 #.</span></span><span class="mpre">
</span><span class="warning" data-warning="DeclInfixDecl (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 1, srcSpanEndLine = 46, srcSpanEndColumn = 12}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 46, srcSpanStartColumn = 8, srcSpanEndLine = 46, srcSpanEndColumn = 9}]}) (AssocLeft (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/n"><span class="mpre">infixl 8 .#</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Profunctors</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">----------------------------------------------------------------------------</span></span><span class="mpre">

</span><span class="hl_comment"><span class="mpre">-- | Formally, the class &#39;Profunctor&#39; represents a profunctor</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- from @Hask@ -&gt; @Hask@.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- Intuitively it is a bifunctor where the first argument is contravariant</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- and the second argument is covariant.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- You can define a &#39;Profunctor&#39; by either defining &#39;dimap&#39; or by defining both</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;lmap&#39; and &#39;rmap&#39;.</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you supply &#39;dimap&#39;, you should ensure that:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @&#39;dimap&#39; &#39;id&#39; &#39;id&#39; ≡ &#39;id&#39;@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you supply &#39;lmap&#39; and &#39;rmap&#39;, ensure:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;lmap&#39; &#39;id&#39; ≡ &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;rmap&#39; &#39;id&#39; ≡ &#39;id&#39;</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- If you supply both, you should also ensure:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @&#39;dimap&#39; f g ≡ &#39;lmap&#39; f &#39;.&#39; &#39;rmap&#39; g@</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- These ensure by parametricity:</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;dimap&#39; (f &#39;.&#39; g) (h &#39;.&#39; i) ≡ &#39;dimap&#39; g h &#39;.&#39; &#39;dimap&#39; f i</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;lmap&#39; (f &#39;.&#39; g) ≡ &#39;lmap&#39; g &#39;.&#39; &#39;lmap&#39; f</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- &#39;rmap&#39; (f &#39;.&#39; g) ≡ &#39;rmap&#39; f &#39;.&#39; &#39;rmap&#39; g</span></span><span class="mpre">
</span><span class="hl_comment"><span class="mpre">-- @</span></span><span class="mpre">
class </span><a name="loc_83_7_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_7_83_17&#39;)"><span class="hl_classdecl"><span class="mpre">Profunctor</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> where
  </span><span class="hl_comment"><span class="mpre">-- | Map over both arguments at the same time.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- @&#39;dimap&#39; f g ≡ &#39;lmap&#39; f &#39;.&#39; &#39;rmap&#39; g@</span></span><span class="mpre">
  </span><a name="loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="mpre">dimap</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; (</span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">d</span></span><span class="mpre">
  </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="hl_fundecl"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a name="loc_88_9_88_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_9_88_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_88_11_88_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_11_88_12&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> = </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="hl_varref"><span class="mpre">lmap</span></span></a><span class="mpre"> </span><a href="#loc_88_9_88_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_9_88_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="hl_varref"><span class="mpre">rmap</span></span></a><span class="mpre"> </span><a href="#loc_88_11_88_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_88_11_88_12&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="mpre">dimap</span></a><span class="mpre"> #-}</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- | Map the first argument contravariantly.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- @&#39;lmap&#39; f ≡ &#39;dimap&#39; f &#39;id&#39;@</span></span><span class="mpre">
  </span><a name="loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="mpre">lmap</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
  </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="hl_fundecl"><span class="mpre">lmap</span></span></a><span class="mpre"> </span><a name="loc_95_8_95_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_8_95_9&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> = </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="hl_varref"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a href="#loc_95_8_95_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_95_8_95_9&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_34_5_34_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_34_5_34_7&#39;)"><span class="hl_varref"><span class="mpre">id</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="mpre">lmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- | Map the second argument covariantly.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- @&#39;rmap&#39; ≡ &#39;dimap&#39; &#39;id&#39;@</span></span><span class="mpre">
  </span><a name="loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="mpre">rmap</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
  </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="hl_vardecl"><span class="mpre">rmap</span></span></a><span class="mpre"> = </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="hl_varref"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_34_5_34_7" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_34_5_34_7&#39;)"><span class="hl_varref"><span class="mpre">id</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="mpre">rmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- | Strictly map the second argument argument</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- covariantly with a function that is assumed</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- operationally to be a cast, such as a newtype</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- constructor.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- /Note:/ This operation is explicitly /unsafe/</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- since an implementation may choose to use</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- &#39;unsafeCoerce&#39; to implement this combinator</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- and it has no way to validate that your function</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- meets the requirements.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- If you implement this combinator with</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- &#39;unsafeCoerce&#39;, then you are taking upon yourself</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- the obligation that you don&#39;t use GADT-like</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- tricks to distinguish values.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- If you import &quot;Data.Profunctor.Unsafe&quot; you are</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- taking upon yourself the obligation that you</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- will only call this with a first argument that is</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- operationally identity.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- The semantics of this function with respect to bottoms</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- should match the default definition:</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- @(&#39;Profuctor.Unsafe.#.&#39;) ≡ \\f -&gt; \\p -&gt; p \`seq\` &#39;rmap&#39; f p@</span></span><span class="mpre">
  </span><a name="loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="mpre">( #. )</span></a><span class="mpre"> :: (</span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
  </span><a href="#loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="hl_vardecl"><span class="mpre">( #. )</span></span></a><span class="mpre"> = \</span><a name="loc_131_13_131_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_13_131_14&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> -&gt; \</span><a name="loc_131_19_131_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_19_131_20&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_131_19_131_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_19_131_20&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_167_1_167_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_167_1_167_4&#39;)"><span class="hl_infix"><span class="mpre">`seq`</span></span></a><span class="mpre"> </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="hl_varref"><span class="mpre">rmap</span></span></a><span class="mpre"> </span><a href="#loc_131_13_131_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_13_131_14&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_131_19_131_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_131_19_131_20&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="mpre">( #. )</span></a><span class="mpre"> #-}</span></span><span class="mpre">

  </span><span class="hl_comment"><span class="mpre">-- | Strictly map the first argument argument</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- contravariantly with a function that is assumed</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- operationally to be a cast, such as a newtype</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- constructor.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- /Note:/ This operation is explicitly /unsafe/</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- since an implementation may choose to use</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- &#39;unsafeCoerce&#39; to implement this combinator</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- and it has no way to validate that your function</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- meets the requirements.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- If you implement this combinator with</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- &#39;unsafeCoerce&#39;, then you are taking upon yourself</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- the obligation that you don&#39;t use GADT-like</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- tricks to distinguish values.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- If you import &quot;Data.Profunctor.Unsafe&quot; you are</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- taking upon yourself the obligation that you</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- will only call this with a second argument that is</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- operationally identity.</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">--</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- @(&#39;.#&#39;) ≡ \\p -&gt; p \`seq\` \\f -&gt; &#39;lmap&#39; f p@</span></span><span class="mpre">
  </span><a name="loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="mpre">( .# )</span></a><span class="mpre"> :: </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre"> -&gt; (</span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> -&gt; </span><span class="hl_tyvar"><span class="mpre">b</span></span><span class="mpre">) -&gt; </span><span class="hl_tyvar"><span class="mpre">p</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">a</span></span><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">c</span></span><span class="mpre">
  </span><a href="#loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="hl_vardecl"><span class="mpre">( .# )</span></span></a><span class="mpre"> = \</span><a name="loc_157_13_157_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_13_157_14&#39;)"><span class="hl_vardecl"><span class="mpre">p</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_157_13_157_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_13_157_14&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre"> </span><a href="Prelude.html#loc_167_1_167_4" onmouseover="nemnem.highlightLocalToRemote(&#39;Prelude.html#loc_167_1_167_4&#39;)"><span class="hl_infix"><span class="mpre">`seq`</span></span></a><span class="mpre"> \</span><a name="loc_157_27_157_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_27_157_28&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> -&gt; </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="hl_varref"><span class="mpre">lmap</span></span></a><span class="mpre"> </span><a href="#loc_157_27_157_28" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_27_157_28&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_157_13_157_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_157_13_157_14&#39;)"><span class="hl_varref"><span class="mpre">p</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="mpre">( .# )</span></a><span class="mpre"> #-}</span></span><span class="mpre">

instance </span><a href="#loc_83_7_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_7_83_17&#39;)"><span class="hl_classref"><span class="mpre">Profunctor</span></span></a><span class="mpre"> </span><span class="hl_tyconref"><span class="mpre">(-&gt;)</span></span><span class="mpre"> where
  </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="hl_fundecl"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a name="loc_161_9_161_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_9_161_11&#39;)"><span class="hl_vardecl"><span class="mpre">ab</span></span></a><span class="mpre"> </span><a name="loc_161_12_161_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_12_161_14&#39;)"><span class="hl_vardecl"><span class="mpre">cd</span></span></a><span class="mpre"> </span><a name="loc_161_15_161_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_15_161_17&#39;)"><span class="hl_vardecl"><span class="mpre">bc</span></span></a><span class="mpre"> = </span><a href="#loc_161_12_161_14" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_12_161_14&#39;)"><span class="hl_varref"><span class="mpre">cd</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_161_15_161_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_15_161_17&#39;)"><span class="hl_varref"><span class="mpre">bc</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_161_9_161_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_161_9_161_11&#39;)"><span class="hl_varref"><span class="mpre">ab</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="mpre">dimap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="hl_vardecl"><span class="mpre">lmap</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">flip</span></span><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_varref"><span class="mpre">(.)</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="mpre">lmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="hl_vardecl"><span class="mpre">rmap</span></span></a><span class="mpre"> = </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_varref"><span class="mpre">(.)</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="mpre">rmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="hl_fundecl"><span class="mpre">( #. )</span></span></a><span class="mpre"> _ = </span><a href="Unsafe.Coerce.html#loc_59_1_59_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Unsafe.Coerce.html#loc_59_1_59_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeCoerce</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="mpre">( #. )</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="hl_fundecl"><span class="mpre">( .# )</span></span></a><span class="mpre"> </span><a name="loc_169_10_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_10_169_13&#39;)"><span class="hl_vardecl"><span class="mpre">pbc</span></span></a><span class="mpre"> _ = </span><a href="Unsafe.Coerce.html#loc_59_1_59_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Unsafe.Coerce.html#loc_59_1_59_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeCoerce</span></span></a><span class="mpre"> </span><a href="#loc_169_10_169_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_169_10_169_13&#39;)"><span class="hl_varref"><span class="mpre">pbc</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="mpre">( .# )</span></a><span class="mpre"> #-}</span></span><span class="mpre">

instance </span><a href="#loc_83_7_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_7_83_17&#39;)"><span class="hl_classref"><span class="mpre">Profunctor</span></span></a><span class="mpre"> </span><a href="Data.Tagged.html#loc_59_9_59_15" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_59_9_59_15&#39;)"><span class="hl_tyconref"><span class="mpre">Tagged</span></span></a><span class="mpre"> where
  </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="hl_fundecl"><span class="mpre">dimap</span></span></a><span class="mpre"> _ </span><a name="loc_173_11_173_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_11_173_12&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><a name="loc_173_21_173_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_21_173_22&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> (</span><a href="#loc_173_11_173_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_11_173_12&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="#loc_173_21_173_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_173_21_173_22&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">)
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="mpre">dimap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="hl_fundecl"><span class="mpre">lmap</span></span></a><span class="mpre"> _ = </span><a href="Data.Tagged.html#loc_247_1_247_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Data.Tagged.html#loc_247_1_247_6&#39;)"><span class="hl_varref"><span class="mpre">retag</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="mpre">lmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="hl_vardecl"><span class="mpre">rmap</span></span></a><span class="mpre"> = </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="mpre">rmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="hl_fundecl"><span class="mpre">( #. )</span></span></a><span class="mpre"> _ = </span><a href="Unsafe.Coerce.html#loc_59_1_59_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Unsafe.Coerce.html#loc_59_1_59_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeCoerce</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="mpre">( #. )</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><a name="loc_181_10_181_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_10_181_11&#39;)"><span class="hl_vardecl"><span class="mpre">s</span></span></a><span class="mpre"> </span><a href="#loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="hl_fundecl"><span class="mpre">.#</span></span></a><span class="mpre"> _ = </span><span class="hl_conref"><span class="mpre">Tagged</span></span><span class="mpre"> </span><a href="#loc_181_10_181_11" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_181_10_181_11&#39;)"><span class="hl_varref"><span class="mpre">s</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="mpre">( .# )</span></a><span class="mpre"> #-}</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 184, srcSpanStartColumn = 10, srcSpanEndLine = 184, srcSpanEndColumn = 20}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 184, srcSpanStartColumn = 18, srcSpanEndLine = 184, srcSpanEndColumn = 20}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagran"><span class="mpre">Monad m =&gt;</span></span><span class="mpre"> </span><a href="#loc_83_7_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_7_83_17&#39;)"><span class="hl_classref"><span class="mpre">Profunctor</span></span></a><span class="mpre"> (</span><a href="Control.Arrow.html#loc_146_9_146_16" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Arrow.html#loc_146_9_146_16&#39;)"><span class="hl_tyconref"><span class="mpre">Kleisli</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">m</span></span><span class="mpre">) where
  </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="hl_fundecl"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a name="loc_185_9_185_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_9_185_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_185_11_185_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_11_185_12&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Kleisli</span></span><span class="mpre"> </span><a name="loc_185_22_185_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_22_185_23&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Kleisli</span></span><span class="mpre"> (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="#loc_185_11_185_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_11_185_12&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_185_22_185_23" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_22_185_23&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_185_9_185_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_185_9_185_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="mpre">dimap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="hl_fundecl"><span class="mpre">lmap</span></span></a><span class="mpre"> </span><a name="loc_187_8_187_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_8_187_9&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Kleisli</span></span><span class="mpre"> </span><a name="loc_187_19_187_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_19_187_20&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Kleisli</span></span><span class="mpre"> (</span><a href="#loc_187_19_187_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_19_187_20&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_187_8_187_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_187_8_187_9&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">)
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="mpre">lmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="hl_fundecl"><span class="mpre">rmap</span></span></a><span class="mpre"> </span><a name="loc_189_8_189_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_8_189_9&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Kleisli</span></span><span class="mpre"> </span><a name="loc_189_19_189_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_19_189_20&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Kleisli</span></span><span class="mpre"> (</span><a href="Control.Monad.html#loc_274_1_274_6" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Monad.html#loc_274_1_274_6&#39;)"><span class="hl_varref"><span class="mpre">liftM</span></span></a><span class="mpre"> </span><a href="#loc_189_8_189_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_8_189_9&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_189_19_189_20" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_189_19_189_20&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="mpre">rmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- We cannot safely overload (#.) because we didn&#39;t provide the &#39;Monad&#39;.</span></span><span class="mpre">
  </span><a href="#loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="hl_fundecl"><span class="mpre">( .# )</span></span></a><span class="mpre"> </span><a name="loc_192_10_192_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_192_10_192_13&#39;)"><span class="hl_vardecl"><span class="mpre">pbc</span></span></a><span class="mpre"> _ = </span><a href="Unsafe.Coerce.html#loc_59_1_59_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Unsafe.Coerce.html#loc_59_1_59_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeCoerce</span></span></a><span class="mpre"> </span><a href="#loc_192_10_192_13" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_192_10_192_13&#39;)"><span class="hl_varref"><span class="mpre">pbc</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_156_3_156_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_156_3_156_9&#39;)"><span class="mpre">( .# )</span></a><span class="mpre"> #-}</span></span><span class="mpre">

instance </span><span class="warning" data-warning="InstDecl ContextCxSingle (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 195, srcSpanStartColumn = 10, srcSpanEndLine = 195, srcSpanEndColumn = 22}, srcInfoPoints = [SrcSpan {srcSpanFilename = &quot;/home/vagrant/nemnem/pull/profunctors-4.0.4/src/Data/Profunctor/Unsafe.hs&quot;, srcSpanStartLine = 195, srcSpanStartColumn = 20, srcSpanEndLine = 195, srcSpanEndColumn = 22}]}) (ClassA (SrcSpanInfo {srcInfoSpan = SrcSpan {srcSpanFilename = &quot;/home/vagran"><span class="mpre">Functor w =&gt;</span></span><span class="mpre"> </span><a href="#loc_83_7_83_17" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_83_7_83_17&#39;)"><span class="hl_classref"><span class="mpre">Profunctor</span></span></a><span class="mpre"> (</span><a href="Control.Comonad.html#loc_307_9_307_18" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Comonad.html#loc_307_9_307_18&#39;)"><span class="hl_tyconref"><span class="mpre">Cokleisli</span></span></a><span class="mpre"> </span><span class="hl_tyvar"><span class="mpre">w</span></span><span class="mpre">) where
  </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="hl_fundecl"><span class="mpre">dimap</span></span></a><span class="mpre"> </span><a name="loc_196_9_196_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_9_196_10&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre"> </span><a name="loc_196_11_196_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_11_196_12&#39;)"><span class="hl_vardecl"><span class="mpre">g</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Cokleisli</span></span><span class="mpre"> </span><a name="loc_196_24_196_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_24_196_25&#39;)"><span class="hl_vardecl"><span class="mpre">h</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Cokleisli</span></span><span class="mpre"> (</span><a href="#loc_196_11_196_12" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_11_196_12&#39;)"><span class="hl_varref"><span class="mpre">g</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_196_24_196_25" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_24_196_25&#39;)"><span class="hl_varref"><span class="mpre">h</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_196_9_196_10" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_196_9_196_10&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_87_3_87_8" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_87_3_87_8&#39;)"><span class="mpre">dimap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="hl_fundecl"><span class="mpre">lmap</span></span></a><span class="mpre"> </span><a name="loc_198_8_198_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_8_198_9&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Cokleisli</span></span><span class="mpre"> </span><a name="loc_198_21_198_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_21_198_22&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Cokleisli</span></span><span class="mpre"> (</span><a href="#loc_198_21_198_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_21_198_22&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><span class="hl_varref"><span class="mpre">fmap</span></span><span class="mpre"> </span><a href="#loc_198_8_198_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_198_8_198_9&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre">)
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_94_3_94_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_94_3_94_7&#39;)"><span class="mpre">lmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="hl_fundecl"><span class="mpre">rmap</span></span></a><span class="mpre"> </span><a name="loc_200_8_200_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_200_8_200_9&#39;)"><span class="hl_vardecl"><span class="mpre">k</span></span></a><span class="mpre"> (</span><span class="hl_conref"><span class="mpre">Cokleisli</span></span><span class="mpre"> </span><a name="loc_200_21_200_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_200_21_200_22&#39;)"><span class="hl_vardecl"><span class="mpre">f</span></span></a><span class="mpre">) = </span><span class="hl_conref"><span class="mpre">Cokleisli</span></span><span class="mpre"> (</span><a href="#loc_200_8_200_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_200_8_200_9&#39;)"><span class="hl_varref"><span class="mpre">k</span></span></a><span class="mpre"> </span><a href="Control.Category.html#loc_37_5_37_8" onmouseover="nemnem.highlightLocalToRemote(&#39;Control.Category.html#loc_37_5_37_8&#39;)"><span class="hl_infix"><span class="mpre">.</span></span></a><span class="mpre"> </span><a href="#loc_200_21_200_22" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_200_21_200_22&#39;)"><span class="hl_varref"><span class="mpre">f</span></span></a><span class="mpre">)
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_101_3_101_7" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_101_3_101_7&#39;)"><span class="mpre">rmap</span></a><span class="mpre"> #-}</span></span><span class="mpre">
  </span><span class="hl_comment"><span class="mpre">-- We cannot safely overload (.#) because we didn&#39;t provide the &#39;Functor&#39;.</span></span><span class="mpre">
  </span><a href="#loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="hl_fundecl"><span class="mpre">( #. )</span></span></a><span class="mpre"> _ = </span><a href="Unsafe.Coerce.html#loc_59_1_59_13" onmouseover="nemnem.highlightLocalToRemote(&#39;Unsafe.Coerce.html#loc_59_1_59_13&#39;)"><span class="hl_varref"><span class="mpre">unsafeCoerce</span></span></a><span class="mpre">
  </span><span class="hl_pragma"><span class="mpre">{-# INLINE </span><a href="#loc_130_3_130_9" onmouseover="nemnem.highlightLocalToLocal(&#39;loc_130_3_130_9&#39;)"><span class="mpre">( #. )</span></a><span class="mpre"> #-}</span></span><span class="mpre">
</span></div></body></html>